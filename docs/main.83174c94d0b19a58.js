(self.webpackChunkhvt_uhelne_elektrarny=self.webpackChunkhvt_uhelne_elektrarny||[]).push([[179],{496:(dm,ed,td)=>{"use strict";function nn(t){return"function"==typeof t}function eu(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const um=eu(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function _(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class En{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(nn(i))try{i()}catch(a){n=a instanceof um?a.errors:[a]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const a of r)try{wr(a)}catch(u){n=n??[],u instanceof um?n=[...n,...u.errors]:n.push(u)}}if(n)throw new um(n)}}add(n){var e;if(n&&n!==this)if(this.closed)wr(n);else{if(n instanceof En){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&_(e,n)}remove(n){const{_finalizers:e}=this;e&&_(e,n),n instanceof En&&n._removeParent(this)}}En.EMPTY=(()=>{const t=new En;return t.closed=!0,t})();const be=En.EMPTY;function Eo(t){return t instanceof En||t&&"closed"in t&&nn(t.remove)&&nn(t.add)&&nn(t.unsubscribe)}function wr(t){nn(t)?t():t.unsubscribe()}const ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},_s={setTimeout(t,n,...e){const{delegate:i}=_s;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=_s;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ml(t){_s.setTimeout(()=>{const{onUnhandledError:n}=ct;if(!n)throw t;n(t)})}function qs(){}const kr=Xo("C",void 0,void 0);function Xo(t,n,e){return{kind:t,value:n,error:e}}let Mo=null;function vs(t){if(ct.useDeprecatedSynchronousErrorHandling){const n=!Mo;if(n&&(Mo={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=Mo;if(Mo=null,e)throw i}}else t()}class xa extends En{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Eo(n)&&n.add(this)):this.destination=Xr}static create(n,e,i){return new Yo(n,e,i)}next(n){this.isStopped?Zi(function nd(t){return Xo("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Zi(function bi(t){return Xo("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Zi(kr,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qi=Function.prototype.bind;function fl(t,n){return qi.call(t,n)}class Zn{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){Lr(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){Lr(i)}else Lr(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Lr(e)}}}class Yo extends xa{constructor(n,e,i){let r;if(super(),nn(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let a;this&&ct.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&fl(n.next,a),error:n.error&&fl(n.error,a),complete:n.complete&&fl(n.complete,a)}):r=n}this.destination=new Zn(r)}}function Lr(t){ct.useDeprecatedSynchronousErrorHandling?function Qo(t){ct.useDeprecatedSynchronousErrorHandling&&Mo&&(Mo.errorThrown=!0,Mo.error=t)}(t):ml(t)}function Zi(t,n){const{onStoppedNotification:e}=ct;e&&_s.setTimeout(()=>e(t,n))}const Xr={closed:!0,next:qs,error:function Zs(t){throw t},complete:qs},Do="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ii(t){return t}function gl(t){return 0===t.length?Ii:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}let bn=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const a=function Nn(t){return t&&t instanceof xa||function Jo(t){return t&&nn(t.next)&&nn(t.error)&&nn(t.complete)}(t)&&Eo(t)}(e)?e:new Yo(e,i,r);return vs(()=>{const{operator:u,source:f}=this;a.add(u?u.call(a,f):f?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=_l(i))((r,a)=>{const u=new Yo({next:f=>{try{e(f)}catch(b){a(b),u.unsubscribe()}},error:a,complete:r});this.subscribe(u)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Do](){return this}pipe(...e){return gl(e)(this)}toPromise(e){return new(e=_l(e))((i,r)=>{let a;this.subscribe(u=>a=u,u=>r(u),()=>i(a))})}}return t.create=n=>new t(n),t})();function _l(t){var n;return null!==(n=t??ct.Promise)&&void 0!==n?n:Promise}const Br=eu(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Zt=(()=>{class t extends bn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new ka(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new Br}next(e){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:a}=this;return i||r?be:(this.currentObservers=null,a.push(e),new En(()=>{this.currentObservers=null,_(a,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){const e=new bn;return e.source=this,e}}return t.create=(n,e)=>new ka(n,e),t})();class ka extends Zt{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:be}}function Sa(t){return nn(t?.lift)}function Mn(t){return n=>{if(Sa(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function sn(t,n,e,i,r){return new ao(t,n,e,i,r)}class ao extends xa{constructor(n,e,i,r,a,u){super(n),this.onFinalize=a,this.shouldUnsubscribe=u,this._next=e?function(f){try{e(f)}catch(b){n.error(b)}}:super._next,this._error=r?function(f){try{r(f)}catch(b){n.error(b)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Dt(t,n){return Mn((e,i)=>{let r=0;e.subscribe(sn(i,a=>{i.next(t.call(n,a,r++))}))})}function Fe(t){return this instanceof Fe?(this.v=t,this):new Fe(t)}function Qs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function Ao(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=t[a]&&function(u){return new Promise(function(f,b){!function r(a,u,f,b){Promise.resolve(b).then(function(k){a({value:k,done:f})},u)}(f,b,(u=t[a](u)).done,u.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const G=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Y(t){return nn(t?.then)}function ee(t){return nn(t[Do])}function he(t){return Symbol.asyncIterator&&nn(t?.[Symbol.asyncIterator])}function se(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ce=function ie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Se(t){return nn(t?.[ce])}function Te(t){return function Po(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),a=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(U){i[U]&&(r[U]=function(K){return new Promise(function(re,ue){a.push([U,K,re,ue])>1||f(U,K)})})}function f(U,K){try{!function b(U){U.value instanceof Fe?Promise.resolve(U.value.v).then(k,D):N(a[0][2],U)}(i[U](K))}catch(re){N(a[0][3],re)}}function k(U){f("next",U)}function D(U){f("throw",U)}function N(U,K){U(K),a.shift(),a.length&&f(a[0][0],a[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield Fe(e.read());if(r)return yield Fe(void 0);yield yield Fe(i)}}finally{e.releaseLock()}})}function Me(t){return nn(t?.getReader)}function Xe(t){if(t instanceof bn)return t;if(null!=t){if(ee(t))return function gt(t){return new bn(n=>{const e=t[Do]();if(nn(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(G(t))return function it(t){return new bn(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Y(t))return function dt(t){return new bn(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,ml)})}(t);if(he(t))return an(t);if(Se(t))return function xt(t){return new bn(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(Me(t))return function wn(t){return an(Te(t))}(t)}throw se(t)}function an(t){return new bn(n=>{(function Yt(t,n){var e,i,r,a;return function xn(t,n,e,i){return new(e||(e=Promise))(function(a,u){function f(D){try{k(i.next(D))}catch(N){u(N)}}function b(D){try{k(i.throw(D))}catch(N){u(N)}}function k(D){D.done?a(D.value):function r(a){return a instanceof e?a:new e(function(u){u(a)})}(D.value).then(f,b)}k((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Qs(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(u){r={error:u}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function It(t,n,e,i=0,r=!1){const a=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function Ot(t,n,e=1/0){return nn(n)?Ot((i,r)=>Dt((a,u)=>n(i,a,r,u))(Xe(t(i,r))),e):("number"==typeof n&&(e=n),Mn((i,r)=>function sr(t,n,e,i,r,a,u,f){const b=[];let k=0,D=0,N=!1;const U=()=>{N&&!b.length&&!k&&n.complete()},K=ue=>k<i?re(ue):b.push(ue),re=ue=>{a&&n.next(ue),k++;let we=!1;Xe(e(ue,D++)).subscribe(sn(n,De=>{r?.(De),a?K(De):n.next(De)},()=>{we=!0},void 0,()=>{if(we)try{for(k--;b.length&&k<i;){const De=b.shift();u?It(n,u,()=>re(De)):re(De)}U()}catch(De){n.error(De)}}))};return t.subscribe(sn(n,K,()=>{N=!0,U()})),()=>{f?.()}}(i,r,t,e)))}function Un(t=1/0){return Ot(Ii,t)}const zn=new bn(t=>t.complete());function Ma(t){return t&&nn(t.schedule)}function Ys(t){return t[t.length-1]}function bh(t){return nn(Ys(t))?t.pop():void 0}function on(t){return Ma(Ys(t))?t.pop():void 0}function oc(t,n=0){return Mn((e,i)=>{e.subscribe(sn(i,r=>It(i,t,()=>i.next(r),n),()=>It(i,t,()=>i.complete(),n),r=>It(i,t,()=>i.error(r),n)))})}function Ki(t,n=0){return Mn((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function sc(t,n){if(!t)throw new Error("Iterable cannot be null");return new bn(e=>{It(e,n,()=>{const i=t[Symbol.asyncIterator]();It(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function vt(t,n){return n?function Kn(t,n){if(null!=t){if(ee(t))return function Yr(t,n){return Xe(t).pipe(Ki(n),oc(n))}(t,n);if(G(t))return function uo(t,n){return new bn(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(Y(t))return function hm(t,n){return Xe(t).pipe(Ki(n),oc(n))}(t,n);if(he(t))return sc(t,n);if(Se(t))return function Xi(t,n){return new bn(e=>{let i;return It(e,n,()=>{i=t[ce](),It(e,n,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(u){return void e.error(u)}a?e.complete():e.next(r)},0,!0)}),()=>nn(i?.return)&&i.return()})}(t,n);if(Me(t))return function wl(t,n){return sc(Te(t),n)}(t,n)}throw se(t)}(t,n):Xe(t)}function xs(...t){const n=on(t),e=function tu(t,n){return"number"==typeof Ys(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?Xe(i[0]):Un(e)(vt(i,n)):zn}class tn extends Zt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function mt(...t){return vt(t,on(t))}function Vr(t={}){const{connector:n=(()=>new Zt),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return a=>{let u,f,b,k=0,D=!1,N=!1;const U=()=>{f?.unsubscribe(),f=void 0},K=()=>{U(),u=b=void 0,D=N=!1},re=()=>{const ue=u;K(),ue?.unsubscribe()};return Mn((ue,we)=>{k++,!N&&!D&&U();const De=b=b??n();we.add(()=>{k--,0===k&&!N&&!D&&(f=ac(re,r))}),De.subscribe(we),!u&&k>0&&(u=new Yo({next:ye=>De.next(ye),error:ye=>{N=!0,U(),f=ac(K,e,ye),De.error(ye)},complete:()=>{D=!0,U(),f=ac(K,i),De.complete()}}),Xe(ue).subscribe(u))})(a)}}function ac(t,n,...e){if(!0===n)return void t();if(!1===n)return;const i=new Yo({next:()=>{i.unsubscribe(),t()}});return Xe(n(...e)).subscribe(i)}function Qi(t,n){return Mn((e,i)=>{let r=null,a=0,u=!1;const f=()=>u&&!r&&i.complete();e.subscribe(sn(i,b=>{r?.unsubscribe();let k=0;const D=a++;Xe(t(b,D)).subscribe(r=sn(i,N=>i.next(n?n(b,N,D,k++):N),()=>{r=null,f()}))},()=>{u=!0,f()}))})}function id(t,n=Ii){return t=t??nu,Mn((e,i)=>{let r,a=!0;e.subscribe(sn(i,u=>{const f=n(u);(a||!t(r,f))&&(a=!1,r=f,i.next(u))}))})}function nu(t,n){return t===n}function dn(t){for(let n in t)if(t[n]===dn)return n;throw Error("Could not find renamed property on target object.")}function Da(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Ln(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ln).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function lc(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const cc=dn({__forward_ref__:dn});function kn(t){return t.__forward_ref__=kn,t.toString=function(){return Ln(this())},t}function Ct(t){return dc(t)?t():t}function dc(t){return"function"==typeof t&&t.hasOwnProperty(cc)&&t.__forward_ref__===kn}function uc(t){return t&&!!t.\u0275providers}const xh="https://g.co/ng/security#xss";class xe extends Error{constructor(n,e){super(function hc(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function kt(t){return"string"==typeof t?t:null==t?"":String(t)}function ws(t,n){throw new xe(-201,!1)}function Cr(t,n){null==t&&function _t(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}(n,t,null,"!=")}function Ze(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function mc(t){return Aa(t,ad)||Aa(t,Dh)}function Aa(t,n){return t.hasOwnProperty(n)?t[n]:null}function sd(t){return t&&(t.hasOwnProperty(au)||t.hasOwnProperty(fm))?t[au]:null}const ad=dn({\u0275prov:dn}),au=dn({\u0275inj:dn}),Dh=dn({ngInjectableDef:dn}),fm=dn({ngInjectorDef:dn});var Gt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Gt||{});let kl;function lr(t){const n=kl;return kl=t,n}function Pa(t,n,e){const i=mc(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Gt.Optional?null:void 0!==n?n:void ws(Ln(t))}const In=globalThis;class ze{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Ze({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ks={},cd="__NG_DI_FLAG__",Tl="ngTempTokenPath",ud=/\n/gm,gc="__source";let ea;function po(t){const n=ea;return ea=t,n}function vc(t,n=Gt.Default){if(void 0===ea)throw new xe(-203,!1);return null===ea?Pa(t,void 0,n):ea.get(t,n&Gt.Optional?null:void 0,n)}function Oe(t,n=Gt.Default){return(function ld(){return kl}()||vc)(Ct(t),n)}function qe(t,n=Gt.Default){return Oe(t,yc(n))}function yc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function El(t){const n=[];for(let e=0;e<t.length;e++){const i=Ct(t[e]);if(Array.isArray(i)){if(0===i.length)throw new xe(900,!1);let r,a=Gt.Default;for(let u=0;u<i.length;u++){const f=i[u],b=Ah(f);"number"==typeof b?-1===b?r=f.token:a|=b:r=f}n.push(Oe(r,a))}else n.push(Oe(i))}return n}function Ra(t,n){return t[cd]=n,t.prototype[cd]=n,t}function Ah(t){return t[cd]}function mo(t){return{toString:t}.toString()}var Oa=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Oa||{}),eo=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(eo||{});const un={},Wt=[],Yi=dn({\u0275cmp:dn}),ta=dn({\u0275dir:dn}),Fa=dn({\u0275pipe:dn}),xc=dn({\u0275mod:dn}),Tr=dn({\u0275fac:dn}),Ss=dn({__NG_ELEMENT_ID__:dn}),Na=dn({__NG_ENV_ID__:dn});function du(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=n.length;if(r+a===i||t.charCodeAt(r+a)<=32)return r}e=r+1}}function pd(t,n,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const a=e[i++],u=e[i++],f=e[i++];t.setAttribute(n,u,f,a)}else{const a=r,u=e[++i];hu(a)?t.setProperty(n,a,u):t.setAttribute(n,a,u),i++}}return i}function uu(t){return 3===t||4===t||6===t}function hu(t){return 64===t.charCodeAt(0)}function Ml(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||No(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function No(t,n,e,i,r){let a=0,u=t.length;if(-1===n)u=-1;else for(;a<t.length;){const f=t[a++];if("number"==typeof f){if(f===n){u=-1;break}if(f>n){u=a-1;break}}}for(;a<t.length;){const f=t[a];if("number"==typeof f)break;if(f===e){if(null===i)return void(null!==r&&(t[a+1]=r));if(i===t[a+1])return void(t[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==u&&(t.splice(u,0,n),a=u+1),t.splice(a++,0,e),null!==i&&t.splice(a++,0,i),null!==r&&t.splice(a++,0,r)}const Dl="ng-template";function to(t,n,e){let i=0,r=!0;for(;i<t.length;){let a=t[i++];if("string"==typeof a&&r){const u=t[i++];if(e&&"class"===a&&-1!==du(u.toLowerCase(),n,0))return!0}else{if(1===a){for(;i<t.length&&"string"==typeof(a=t[i++]);)if(a.toLowerCase()===n)return!0;return!1}"number"==typeof a&&(r=!1)}}return!1}function Il(t){return 4===t.type&&t.value!==Dl}function Rh(t,n,e){return n===(4!==t.type||e?t.value:Dl)}function Oh(t,n,e){let i=4;const r=t.attrs||[],a=function Ts(t){for(let n=0;n<t.length;n++)if(uu(t[n]))return n;return t.length}(r);let u=!1;for(let f=0;f<n.length;f++){const b=n[f];if("number"!=typeof b){if(!u)if(4&i){if(i=2|1&i,""!==b&&!Rh(t,b,e)||""===b&&1===n.length){if(fo(i))return!1;u=!0}}else{const k=8&i?b:n[++f];if(8&i&&null!==t.attrs){if(!to(t.attrs,k,e)){if(fo(i))return!1;u=!0}continue}const N=Cs(8&i?"class":b,r,Il(t),e);if(-1===N){if(fo(i))return!1;u=!0;continue}if(""!==k){let U;U=N>a?"":r[N+1].toLowerCase();const K=8&i?U:null;if(K&&-1!==du(K,k,0)||2&i&&k!==U){if(fo(i))return!1;u=!0}}}}else{if(!u&&!fo(i)&&!fo(b))return!1;if(u&&fo(b))continue;u=!1,i=b|1&i}}return fo(i)||u}function fo(t){return 0==(1&t)}function Cs(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let a=!1;for(;r<n.length;){const u=n[r];if(u===t)return r;if(3===u||6===u)a=!0;else{if(1===u||2===u){let f=n[++r];for(;"string"==typeof f;)f=n[++r];continue}if(4===u)break;if(0===u){r+=4;continue}}r+=a?1:2}return-1}return function md(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function pu(t,n,e=!1){for(let i=0;i<n.length;i++)if(Oh(t,n[i],e))return!0;return!1}function Es(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function is(t,n){return t?":not("+n.trim()+")":n}function _m(t){let n=t[0],e=1,i=2,r="",a=!1;for(;e<t.length;){let u=t[e];if("string"==typeof u)if(2&i){const f=t[++e];r+="["+u+(f.length>0?'="'+f+'"':"")+"]"}else 8&i?r+="."+u:4&i&&(r+=" "+u);else""!==r&&!fo(u)&&(n+=is(a,r),r=""),i=u,a=a||!fo(i);e++}return""!==r&&(n+=is(a,r)),n}function ri(t){return mo(()=>{const n=fu(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Oa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||eo.Emulated,styles:t.styles||Wt,_:null,schemas:t.schemas||null,tView:null,id:""};gu(e);const i=t.dependencies;return e.directiveDefs=fd(i,!1),e.pipeDefs=fd(i,!0),e.id=function vu(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of e)n=Math.imul(31,n)+r.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(e),e})}function Ms(t){return Jt(t)||Ai(t)}function Qe(t){return null!==t}function Vn(t){return mo(()=>({type:t.type,bootstrap:t.bootstrap||Wt,declarations:t.declarations||Wt,imports:t.imports||Wt,exports:t.exports||Wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function za(t,n){if(null==t)return un;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=i,n&&(n[r]=a)}return e}function Je(t){return mo(()=>{const n=fu(t);return gu(n),n})}function Jt(t){return t[Yi]||null}function Ai(t){return t[ta]||null}function Er(t){return t[Fa]||null}function jr(t,n){const e=t[xc]||null;if(!e&&!0===n)throw new Error(`Type ${Ln(t)} does not have '\u0275mod' property.`);return e}function fu(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||un,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:za(t.inputs,n),outputs:za(t.outputs)}}function gu(t){t.features?.forEach(n=>n(t))}function fd(t,n){if(!t)return null;const e=n?Er:Ms;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(Qe)}const Qn=0,Ye=1,ft=2,fn=3,Mr=4,La=5,xi=6,ra=7,li=8,wi=9,gn=10,St=11,Ba=12,yu=13,Va=14,ci=15,wc=16,ki=17,no=18,rt=19,ut=20,_o=21,zo=22,ja=23,Gn=24,$t=25,gd=1,oa=2,hn=7,Bo=9,fi=11;function cr(t){return Array.isArray(t)&&"object"==typeof t[gd]}function Ji(t){return Array.isArray(t)&&!0===t[gd]}function sa(t){return 0!=(4&t.flags)}function Is(t){return t.componentOffset>-1}function Rl(t){return 1==(1&t.flags)}function Ft(t){return!!t.template}function v(t){return 0!=(512&t[ft])}function Ce(t,n){return t.hasOwnProperty(Tr)?t[Tr]:null}let $e=null,Nt=!1;function Ne(t){const n=$e;return $e=t,n}const ht={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function _n(t){if(!vn(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Vi(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Bt(t){t.dirty=!0,function zt(t){if(void 0===t.liveConsumerNode)return;const n=Nt;Nt=!0;try{for(const e of t.liveConsumerNode)e.dirty||Bt(e)}finally{Nt=n}}(t),t.consumerMarkedDirty?.(t)}function Yn(t){return t&&(t.nextProducerIndex=0),Ne(t)}function Sn(t,n){if(Ne(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(vn(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)dr(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Vi(t){Dr(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(_n(e),i!==e.version))return!0}return!1}function Si(t){if(Dr(t),vn(t))for(let n=0;n<t.producerNode.length;n++)dr(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function dr(t,n){if(function Vo(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Dr(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)dr(t.producerNode[i],t.producerIndexOfThis[i]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[n],r=t.liveConsumerNode[n];Dr(r),r.producerIndexOfThis[i]=n}}function vn(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Dr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let aa=null;const io=()=>{},ss=(()=>({...ht,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:io}))();class As{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function vo(){return ym}function ym(t){return t.type.prototype.ngOnChanges&&(t.setInput=bm),Ci}function Ci(){const t=Nl(this),n=t?.current;if(n){const e=t.previous;if(e===un)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function bm(t,n,e,i){const r=this.declaredInputs[e],a=Nl(t)||function Sc(t,n){return t[xm]=n}(t,{previous:un,current:null}),u=a.current||(a.current={}),f=a.previous,b=f[r];u[r]=new As(b&&b.currentValue,n,f===un),t[i]=n}vo.ngInherit=!0;const xm="__ngSimpleChanges__";function Nl(t){return t[xm]||null}const Ps=function(t,n,e){};function ei(t){for(;Array.isArray(t);)t=t[Qn];return t}function zh(t,n){return ei(n[t])}function Ur(t,n){return ei(n[t.index])}function Sm(t,n){return t.data[n]}function jo(t,n){const e=n[t];return cr(e)?e:e[Qn]}function Ua(t,n){return null==n?null:t[n]}function Cm(t){t[ki]=0}function Gy(t){1024&t[ft]||(t[ft]|=1024,Cc(t,1))}function Ir(t){1024&t[ft]&&(t[ft]&=-1025,Cc(t,-1))}function Cc(t,n){let e=t[fn];if(null===e)return;e[La]+=n;let i=e;for(e=e[fn];null!==e&&(1===n&&1===i[La]||-1===n&&0===i[La]);)e[La]+=n,i=e,e=e[fn]}const yt={lFrame:Pm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Em(){return yt.bindingsEnabled}function yd(){return null!==yt.skipHydrationRootTNode}function Pe(){return yt.lFrame.lView}function pn(){return yt.lFrame.tView}function Ga(t){return yt.lFrame.contextLView=t,t[li]}function zl(t){return yt.lFrame.contextLView=null,t}function Ar(){let t=jg();for(;null!==t&&64===t.type;)t=t.parent;return t}function jg(){return yt.lFrame.currentTNode}function as(t,n){const e=yt.lFrame;e.currentTNode=t,e.isParent=n}function bd(){return yt.lFrame.isParent}function jh(){yt.lFrame.isParent=!1}function xd(){return yt.lFrame.bindingIndex++}function Wa(t){const n=yt.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function qy(t,n){const e=yt.lFrame;e.bindingIndex=e.bindingRootIndex=t,Im(n)}function Im(t){yt.lFrame.currentDirectiveIndex=t}function oi(t){const n=yt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function Eu(){return yt.lFrame.currentQueryIndex}function Gh(t){yt.lFrame.currentQueryIndex=t}function $h(t){const n=t[Ye];return 2===n.type?n.declTNode:1===n.type?t[xi]:null}function Mu(t,n,e){if(e&Gt.SkipSelf){let r=n,a=t;for(;!(r=r.parent,null!==r||e&Gt.Host||(r=$h(a),null===r||(a=a[Va],10&r.type))););if(null===r)return!1;n=r,t=a}const i=yt.lFrame=Am();return i.currentTNode=n,i.lView=t,!0}function Ec(t){const n=Am(),e=t[Ye];yt.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Am(){const t=yt.lFrame,n=null===t?null:t.child;return null===n?Pm(t):n}function Pm(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function kd(){const t=yt.lFrame;return yt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Wh=kd;function Du(){const t=kd();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Gr(){return yt.lFrame.selectedIndex}function Os(t){yt.lFrame.selectedIndex=t}function _i(){const t=yt.lFrame;return Sm(t.tView,t.selectedIndex)}let Om=!0;function Iu(){return Om}function Ll(t){Om=t}function Xh(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:f,ngAfterViewInit:b,ngAfterViewChecked:k,ngOnDestroy:D}=a;u&&(t.contentHooks??=[]).push(-e,u),f&&((t.contentHooks??=[]).push(e,f),(t.contentCheckHooks??=[]).push(e,f)),b&&(t.viewHooks??=[]).push(-e,b),k&&((t.viewHooks??=[]).push(e,k),(t.viewCheckHooks??=[]).push(e,k)),null!=D&&(t.destroyHooks??=[]).push(e,D)}}function Qh(t,n,e){$g(t,n,3,e)}function Yh(t,n,e,i){(3&t[ft])===e&&$g(t,n,e,i)}function ca(t,n){let e=t[ft];(3&e)===n&&(e&=8191,e+=1,t[ft]=e)}function $g(t,n,e,i){const a=i??-1,u=n.length-1;let f=0;for(let b=void 0!==i?65535&t[ki]:0;b<u;b++)if("number"==typeof n[b+1]){if(f=n[b],null!=i&&f>=i)break}else n[b]<0&&(t[ki]+=65536),(f<a||-1==a)&&(Sd(t,e,n,b),t[ki]=(4294901760&t[ki])+b+2),b++}function Fm(t,n){Ps(4,t,n);const e=Ne(null);try{n.call(t)}finally{Ne(e),Ps(5,t,n)}}function Sd(t,n,e,i){const r=e[i]<0,a=e[i+1],f=t[r?-e[i]:e[i]];r?t[ft]>>13<t[ki]>>16&&(3&t[ft])===n&&(t[ft]+=8192,Fm(f,a)):Fm(f,a)}const Cd=-1;class Au{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Mc(t){return t!==Cd}function Dc(t){return 32767&t}function Pu(t,n){let e=function tb(t){return t>>16}(t),i=n;for(;e>0;)i=i[Va],e--;return i}let ep=!0;function tp(t){const n=ep;return ep=t,n}const Td=255,Nm=5;let nb=0;const da={};function np(t,n){const e=qg(t,n);if(-1!==e)return e;const i=n[Ye];i.firstCreatePass&&(t.injectorIndex=n.length,zm(i.data,t),zm(n,null),zm(i.blueprint,null));const r=Ru(t,n),a=t.injectorIndex;if(Mc(r)){const u=Dc(r),f=Pu(r,n),b=f[Ye].data;for(let k=0;k<8;k++)n[a+k]=f[u+k]|b[u+k]}return n[a+8]=r,a}function zm(t,n){t.push(0,0,0,0,0,0,0,0,n)}function qg(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ru(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){if(i=yn(r),null===i)return Cd;if(e++,r=r[Va],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return Cd}function Ou(t,n,e){!function ib(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Ss)&&(i=e[Ss]),null==i&&(i=e[Ss]=nb++);const r=i&Td;n.data[t+(r>>Nm)]|=1<<r}(t,n,e)}function Lm(t,n,e){if(e&Gt.Optional||void 0!==t)return t;ws()}function Bm(t,n,e,i){if(e&Gt.Optional&&void 0===i&&(i=null),!(e&(Gt.Self|Gt.Host))){const r=t[wi],a=lr(void 0);try{return r?r.get(n,i,e&Gt.Optional):Pa(n,i,e&Gt.Optional)}finally{lr(a)}}return Lm(i,0,e)}function Kg(t,n,e,i=Gt.Default,r){if(null!==t){if(2048&n[ft]&&!(i&Gt.Self)){const u=function Qg(t,n,e,i,r){let a=t,u=n;for(;null!==a&&null!==u&&2048&u[ft]&&!(512&u[ft]);){const f=Fu(a,u,e,i|Gt.Self,da);if(f!==da)return f;let b=a.parent;if(!b){const k=u[ut];if(k){const D=k.get(e,da,i);if(D!==da)return D}b=yn(u),u=u[Va]}a=b}return r}(t,n,e,i,da);if(u!==da)return u}const a=Fu(t,n,e,i,da);if(a!==da)return a}return Bm(n,e,i,r)}function Fu(t,n,e,i,r){const a=function ob(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ss)?t[Ss]:void 0;return"number"==typeof n?n>=0?n&Td:Ri:n}(e);if("function"==typeof a){if(!Mu(n,t,i))return i&Gt.Host?Lm(r,0,i):Bm(n,e,i,r);try{let u;if(u=a(i),null!=u||i&Gt.Optional)return u;ws()}finally{Wh()}}else if("number"==typeof a){let u=null,f=qg(t,n),b=Cd,k=i&Gt.Host?n[ci][xi]:null;for((-1===f||i&Gt.SkipSelf)&&(b=-1===f?Ru(t,n):n[f+8],b!==Cd&&Vm(i,!1)?(u=n[Ye],f=Dc(b),n=Pu(b,n)):f=-1);-1!==f;){const D=n[Ye];if(Xg(a,f,D.data)){const N=rb(f,n,e,u,i,k);if(N!==da)return N}b=n[f+8],b!==Cd&&Vm(i,n[Ye].data[f+8]===k)&&Xg(a,f,n)?(u=D,f=Dc(b),n=Pu(b,n)):f=-1}}return r}function rb(t,n,e,i,r,a){const u=n[Ye],f=u.data[t+8],D=Nu(f,u,e,null==i?Is(f)&&ep:i!=u&&0!=(3&f.type),r&Gt.Host&&a===f);return null!==D?Ic(n,u,D,f):da}function Nu(t,n,e,i,r){const a=t.providerIndexes,u=n.data,f=1048575&a,b=t.directiveStart,D=a>>20,U=r?f+D:t.directiveEnd;for(let K=i?f:f+D;K<U;K++){const re=u[K];if(K<b&&e===re||K>=b&&re.type===e)return K}if(r){const K=u[b];if(K&&Ft(K)&&K.type===e)return b}return null}function Ic(t,n,e,i){let r=t[e];const a=n.data;if(function Qy(t){return t instanceof Au}(r)){const u=r;u.resolving&&function wh(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new xe(-200,`Circular dependency in DI detected for ${t}${e}`)}(function mn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():kt(t)}(a[e]));const f=tp(u.canSeeViewProviders);u.resolving=!0;const k=u.injectImpl?lr(u.injectImpl):null;Mu(t,i,Gt.Default);try{r=t[e]=u.factory(void 0,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&function Xy(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=n.type.prototype;if(i){const u=ym(n);(e.preOrderHooks??=[]).push(t,u),(e.preOrderCheckHooks??=[]).push(t,u)}r&&(e.preOrderHooks??=[]).push(0-t,r),a&&((e.preOrderHooks??=[]).push(t,a),(e.preOrderCheckHooks??=[]).push(t,a))}(e,a[e],n)}finally{null!==k&&lr(k),tp(f),u.resolving=!1,Wh()}}return r}function Xg(t,n,e){return!!(e[n+(t>>Nm)]&1<<t)}function Vm(t,n){return!(t&Gt.Self||t&Gt.Host&&n)}class tr{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return Kg(this._tNode,this._lView,n,yc(i),e)}}function Ri(){return new tr(Ar(),Pe())}function Oi(t){return mo(()=>{const n=t.prototype.constructor,e=n[Tr]||ip(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const a=r[Tr]||ip(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function ip(t){return dc(t)?()=>{const n=ip(Ct(t));return n&&n()}:Ce(t)}function yn(t){const n=t[Ye],e=n.type;return 2===e?n.declTNode:1===e?t[xi]:null}const Rc="__parameters__";function Ed(t,n,e){return mo(()=>{const i=function rp(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...a){if(this instanceof r)return i.apply(this,a),this;const u=new r(...a);return f.annotation=u,f;function f(b,k,D){const N=b.hasOwnProperty(Rc)?b[Rc]:Object.defineProperty(b,Rc,{value:[]})[Rc];for(;N.length<=D;)N.push(null);return(N[D]=N[D]||[]).push(u),b}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function Fc(t,n){t.forEach(e=>Array.isArray(e)?Fc(e,n):n(e))}function Hm(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function pr(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Nc(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function mr(t,n,e){let i=Za(t,n);return i>=0?t[1|i]=e:(i=~i,function Bu(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function Dd(t,n){const e=Za(t,n);if(e>=0)return t[1|e]}function Za(t,n){return function Um(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const a=i+(r-i>>1),u=t[a<<e];if(n===u)return a<<e;u>n?r=a:i=a+1}return~(r<<e)}(t,n,1)}const Fs=Ra(Ed("Optional"),8),cs=Ra(Ed("SkipSelf"),4);function Hu(t){return 128==(128&t.flags)}var Ka=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ka||{});const rf=new Map;let __=0;const sf="__ngContext__";function $r(t,n){cr(n)?(t[sf]=n[rt],function v_(t){rf.set(t[rt],t)}(n)):t[sf]=n}let cf;function fp(t,n){return cf(t,n)}function jc(t){const n=t[fn];return Ji(n)?n[fn]:n}function gp(t){return _p(t[Ba])}function uf(t){return _p(t[Mr])}function _p(t){for(;null!==t&&!Ji(t);)t=t[Mr];return t}function Xa(t,n,e,i,r){if(null!=i){let a,u=!1;Ji(i)?a=i:cr(i)&&(u=!0,i=i[Qn]);const f=ei(i);0===t&&null!==e?null==r?H(n,e,f):j(n,e,f,r||null,!0):1===t&&null!==e?j(n,e,f,r||null,!0):2===t?function je(t,n,e){const i=le(t,n);i&&function J(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}(n,f,u):3===t&&n.destroyNode(f),null!=a&&function $n(t,n,e,i,r){const a=e[hn];a!==ei(e)&&Xa(n,t,i,a,r);for(let f=fi;f<e.length;f++){const b=e[f];tt(b[Ye],b,t,n,i,a)}}(n,t,a,e,r)}}function Rd(t,n,e){return t.createElement(n,e)}function y(t,n){const e=t[Bo],i=e.indexOf(n);Ir(n),e.splice(i,1)}function w(t,n){if(t.length<=fi)return;const e=fi+n,i=t[e];if(i){const r=i[wc];null!==r&&r!==t&&y(r,i),n>0&&(t[e-1][Mr]=i[Mr]);const a=pr(t,fi+n);!function yb(t,n){tt(t,n,n[St],2,null,null),n[Qn]=null,n[xi]=null}(i[Ye],i);const u=a[no];null!==u&&u.detachView(a[Ye]),i[fn]=null,i[Mr]=null,i[ft]&=-129}return i}function S(t,n){if(!(256&n[ft])){const e=n[St];n[ja]&&Si(n[ja]),n[Gn]&&Si(n[Gn]),e.destroyNode&&tt(t,n,e,3,null,null),function c(t){let n=t[Ba];if(!n)return E(t[Ye],t);for(;n;){let e=null;if(cr(n))e=n[Ba];else{const i=n[fi];i&&(e=i)}if(!e){for(;n&&!n[Mr]&&n!==t;)cr(n)&&E(n[Ye],n),n=n[fn];null===n&&(n=t),cr(n)&&E(n[Ye],n),e=n&&n[Mr]}n=e}}(n)}}function E(t,n){if(!(256&n[ft])){n[ft]&=-129,n[ft]|=256,function P(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof Au)){const a=e[i+1];if(Array.isArray(a))for(let u=0;u<a.length;u+=2){const f=r[a[u]],b=a[u+1];Ps(4,f,b);try{b.call(f)}finally{Ps(5,f,b)}}else{Ps(4,r,a);try{a.call(r)}finally{Ps(5,r,a)}}}}}(t,n),function I(t,n){const e=t.cleanup,i=n[ra];if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const u=e[a+3];u>=0?i[u]():i[-u].unsubscribe(),a+=2}else e[a].call(i[e[a+1]]);null!==i&&(n[ra]=null);const r=n[_o];if(null!==r){n[_o]=null;for(let a=0;a<r.length;a++)(0,r[a])()}}(t,n),1===n[Ye].type&&n[St].destroy();const e=n[wc];if(null!==e&&Ji(n[fn])){e!==n[fn]&&y(e,n);const i=n[no];null!==i&&i.detachView(t)}!function y_(t){rf.delete(t[rt])}(n)}}function F(t,n,e){return function L(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[Qn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:a}=t.data[i.directiveStart+r];if(a===eo.None||a===eo.Emulated)return null}return Ur(i,e)}}(t,n.parent,e)}function j(t,n,e,i,r){t.insertBefore(n,e,i,r)}function H(t,n,e){t.appendChild(n,e)}function W(t,n,e,i,r){null!==i?j(t,n,e,i,r):H(t,n,e)}function le(t,n){return t.parentNode(n)}function pe(t,n,e){return Ee(t,n,e)}let We,Ti,fr,gr,Ee=function ge(t,n,e){return 40&t.type?Ur(t,e):null};function Ge(t,n,e,i){const r=F(t,i,n),a=n[St],f=pe(i.parent||n[xi],i,n);if(null!=r)if(Array.isArray(e))for(let b=0;b<e.length;b++)W(a,r,e[b],f,!1);else W(a,r,e,f,!1);void 0!==We&&We(a,i,n,e,r)}function He(t,n){if(null!==n){const e=n.type;if(3&e)return Ur(n,t);if(4&e)return Ke(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return He(t,i);{const r=t[n.index];return Ji(r)?Ke(-1,r):ei(r)}}if(32&e)return fp(n,t)()||ei(t[n.index]);{const i=Ve(t,n);return null!==i?Array.isArray(i)?i[0]:He(jc(t[ci]),i):He(t,n.next)}}return null}function Ve(t,n){return null!==n?t[ci][xi].projection[n.projection]:null}function Ke(t,n){const e=fi+t+1;if(e<n.length){const i=n[e],r=i[Ye].firstChild;if(null!==r)return He(i,r)}return n[hn]}function lt(t,n,e,i,r,a,u){for(;null!=e;){const f=i[e.index],b=e.type;if(u&&0===n&&(f&&$r(ei(f),i),e.flags|=2),32!=(32&e.flags))if(8&b)lt(t,n,e.child,i,r,a,!1),Xa(n,t,r,f,a);else if(32&b){const k=fp(e,i);let D;for(;D=k();)Xa(n,t,r,D,a);Xa(n,t,r,f,a)}else 16&b?Pn(t,n,i,e,r,a):Xa(n,t,r,f,a);e=u?e.projectionNext:e.next}}function tt(t,n,e,i,r,a){lt(e,i,t.firstChild,n,r,a,!1)}function Pn(t,n,e,i,r,a){const u=e[ci],b=u[xi].projection[i.projection];if(Array.isArray(b))for(let k=0;k<b.length;k++)Xa(n,t,r,b[k],a);else{let k=b;const D=u[fn];Hu(i)&&(k.flags|=128),lt(t,n,k,D,r,a,!0)}}function Rr(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function vi(t,n,e){const{mergedAttrs:i,classes:r,styles:a}=e;null!==i&&pd(t,n,i),null!==r&&Rr(t,n,r),null!==a&&function bo(t,n,e){t.setAttribute(n,"style",e)}(t,n,a)}function zi(t){return function ji(){if(void 0===Ti&&(Ti=null,In.trustedTypes))try{Ti=In.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ti}()?.createHTML(t)||t}function Ui(){if(void 0!==fr)return fr;if(typeof document<"u")return document;throw new xe(210,!1)}function Ht(t){return function yi(){if(void 0===gr&&(gr=null,In.trustedTypes))try{gr=In.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gr}()?.createHTML(t)||t}class Wn{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xh})`}}class ds extends Wn{getTypeName(){return"HTML"}}class zs extends Wn{getTypeName(){return"Style"}}class Ls extends Wn{getTypeName(){return"Script"}}class Qa extends Wn{getTypeName(){return"URL"}}class us extends Wn{getTypeName(){return"ResourceURL"}}function si(t){return t instanceof Wn?t.changingThisBreaksApplicationSecurity:t}function ui(t,n){const e=function Ya(t){return t instanceof Wn&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${xh})`)}return e===n}class E_{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(zi(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class bb{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=zi(n),e}}const wb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yp(t){return(t=String(t)).match(wb)?t:"unsafe:"+t}function el(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Zu(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const M_=el("area,br,col,hr,img,wbr"),D_=el("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hs=el("rp,rt"),gf=Zu(M_,Zu(D_,el("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zu(hs,el("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zu(hs,D_)),_f=el("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Gl=Zu(_f,el("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),el("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Bs=el("script,style,template");class Hc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!gf.hasOwnProperty(e))return this.sanitizedSomething=!0,!Bs.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const a=i.item(r),u=a.name,f=u.toLowerCase();if(!Gl.hasOwnProperty(f)){this.sanitizedSomething=!0;continue}let b=a.value;_f[f]&&(b=yp(b)),this.buf.push(" ",u,'="',H1(b),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();gf.hasOwnProperty(e)&&!M_.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(H1(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const ha=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P2=/([^\#-~ |!])/g;function H1(t){return t.replace(/&/g,"&amp;").replace(ha,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(P2,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let I_;function U1(t,n){let e=null;try{I_=I_||function mf(t){const n=new bb(t);return function xb(){try{return!!(new window.DOMParser).parseFromString(zi(""),"text/html")}catch{return!1}}()?new E_(n):n}(t);let i=n?String(n):"";e=I_.getInertBodyElement(i);let r=5,a=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=a,a=e.innerHTML,e=I_.getInertBodyElement(i)}while(i!==a);return zi((new Hc).sanitizeChildren(Sb(e)||e))}finally{if(e){const i=Sb(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Sb(t){return"content"in t&&function R2(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var oo=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(oo||{});function tl(t){const n=function vf(){const t=Pe();return t&&t[gn].sanitizer}();return n?Ht(n.sanitize(oo.HTML,t)||""):ui(t,"HTML")?Ht(si(t)):U1(Ui(),kt(t))}const yf=new ze("ENVIRONMENT_INITIALIZER"),q1=new ze("INJECTOR",-1),Z1=new ze("INJECTOR_DEF_TYPES");class Cb{get(n,e=ks){if(e===ks){const i=new Error(`NullInjectorError: No provider for ${Ln(n)}!`);throw i.name="NullInjectorError",i}return e}}function B2(...t){return{\u0275providers:X1(0,t),\u0275fromNgModule:!0}}function X1(t,...n){const e=[],i=new Set;let r;const a=u=>{e.push(u)};return Fc(n,u=>{const f=u;A_(f,a,[],i)&&(r||=[],r.push(f))}),void 0!==r&&Q1(r,a),e}function Q1(t,n){for(let e=0;e<t.length;e++){const{ngModule:i,providers:r}=t[e];Tb(r,a=>{n(a,i)})}}function A_(t,n,e,i){if(!(t=Ct(t)))return!1;let r=null,a=sd(t);const u=!a&&Jt(t);if(a||u){if(u&&!u.standalone)return!1;r=t}else{const b=t.ngModule;if(a=sd(b),!a)return!1;r=b}const f=i.has(r);if(u){if(f)return!1;if(i.add(r),u.dependencies){const b="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const k of b)A_(k,n,e,i)}}else{if(!a)return!1;{if(null!=a.imports&&!f){let k;i.add(r);try{Fc(a.imports,D=>{A_(D,n,e,i)&&(k||=[],k.push(D))})}finally{}void 0!==k&&Q1(k,n)}if(!f){const k=Ce(r)||(()=>new r);n({provide:r,useFactory:k,deps:Wt},r),n({provide:Z1,useValue:r,multi:!0},r),n({provide:yf,useValue:()=>Oe(r),multi:!0},r)}const b=a.providers;if(null!=b&&!f){const k=t;Tb(b,D=>{n(D,k)})}}}return r!==t&&void 0!==t.providers}function Tb(t,n){for(let e of t)uc(e)&&(e=e.\u0275providers),Array.isArray(e)?Tb(e,n):n(e)}const V2=dn({provide:String,useValue:dn});function Eb(t){return null!==t&&"object"==typeof t&&V2 in t}function Ku(t){return"function"==typeof t}const Mb=new ze("Set Injector scope."),P_={},H2={};let Db;function R_(){return void 0===Db&&(Db=new Cb),Db}class pa{}class bp extends pa{get destroyed(){return this._destroyed}constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ab(n,u=>this.processProvider(u)),this.records.set(q1,xp(void 0,this)),r.has("environment")&&this.records.set(pa,xp(void 0,this));const a=this.records.get(Mb);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(Z1.multi,Wt,Gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of n)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=po(this),i=lr(void 0);try{return n()}finally{po(e),lr(i)}}get(n,e=ks,i=Gt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Na))return n[Na](this);i=yc(i);const a=po(this),u=lr(void 0);try{if(!(i&Gt.SkipSelf)){let b=this.records.get(n);if(void 0===b){const k=function q2(t){return"function"==typeof t||"object"==typeof t&&t instanceof ze}(n)&&mc(n);b=k&&this.injectableDefInScope(k)?xp(Ib(n),P_):null,this.records.set(n,b)}if(null!=b)return this.hydrate(n,b)}return(i&Gt.Self?R_():this.parent).get(n,e=i&Gt.Optional&&e===ks?null:e)}catch(f){if("NullInjectorError"===f.name){if((f[Tl]=f[Tl]||[]).unshift(Ln(n)),a)throw f;return function Ph(t,n,e,i){const r=t[Tl];throw n[gc]&&r.unshift(n[gc]),t.message=function bc(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=Ln(n);if(Array.isArray(n))r=n.map(Ln).join(" -> ");else if("object"==typeof n){let a=[];for(let u in n)if(n.hasOwnProperty(u)){let f=n[u];a.push(u+":"+("string"==typeof f?JSON.stringify(f):Ln(f)))}r=`{${a.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(ud,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[Tl]=null,t}(f,n,"R3InjectorError",this.source)}throw f}finally{lr(u),po(a)}}resolveInjectorInitializers(){const n=po(this),e=lr(void 0);try{const r=this.get(yf.multi,Wt,Gt.Self);for(const a of r)a()}finally{po(n),lr(e)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(Ln(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(n){let e=Ku(n=Ct(n))?n:Ct(n&&n.provide);const i=function G2(t){return Eb(t)?xp(void 0,t.useValue):xp(ek(t),P_)}(n);if(Ku(n)||!0!==n.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=xp(void 0,P_,!0),r.factory=()=>El(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e){return e.value===P_&&(e.value=H2,e.value=e.factory()),"object"==typeof e.value&&e.value&&function W2(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Ct(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function Ib(t){const n=mc(t),e=null!==n?n.factory:Ce(t);if(null!==e)return e;if(t instanceof ze)throw new xe(204,!1);if(t instanceof Function)return function U2(t){const n=t.length;if(n>0)throw Nc(n,"?"),new xe(204,!1);const e=function mm(t){return t&&(t[ad]||t[Dh])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new xe(204,!1)}function ek(t,n,e){let i;if(Ku(t)){const r=Ct(t);return Ce(r)||Ib(r)}if(Eb(t))i=()=>Ct(t.useValue);else if(function J1(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...El(t.deps||[]));else if(function Y1(t){return!(!t||!t.useExisting)}(t))i=()=>Oe(Ct(t.useExisting));else{const r=Ct(t&&(t.useClass||t.provide));if(!function $2(t){return!!t.deps}(t))return Ce(r)||Ib(r);i=()=>new r(...El(t.deps))}return i}function xp(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Ab(t,n){for(const e of t)Array.isArray(e)?Ab(e,n):e&&uc(e)?Ab(e.\u0275providers,n):n(e)}const O_=new ze("AppId",{providedIn:"root",factory:()=>Z2}),Z2="ng",tk=new ze("Platform Initializer"),Od=new ze("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$l=new ze("AnimationModuleType"),Pb=new ze("CSP nonce",{providedIn:"root",factory:()=>Ui().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let nk=(t,n,e)=>null;function Vb(t,n,e=!1){return nk(t,n,e)}class rP{}class ok{}class sP{resolveComponentFactory(n){throw function oP(t){const n=Error(`No component factory found for ${Ln(t)}.`);return n.ngComponent=t,n}(n)}}let V_=(()=>{class t{static#e=this.NULL=new sP}return t})();function aP(){return Sp(Ar(),Pe())}function Sp(t,n){return new Rn(Ur(t,n))}let Rn=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=aP}return t})();function lP(t){return t instanceof Rn?t.nativeElement:t}class wf{}let Wl=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function cP(){const t=Pe(),e=jo(Ar().index,t);return(cr(e)?e:t)[St]}()}return t})(),dP=(()=>{class t{static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>null})}return t})();class Xu{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const uP=new Xu("16.2.11"),Ub={};function dk(t,n=null,e=null,i){const r=uk(t,n,e,i);return r.resolveInjectorInitializers(),r}function uk(t,n=null,e=null,i,r=new Set){const a=[e||Wt,B2(t)];return i=i||("object"==typeof t?void 0:Ln(t)),new bp(a,n||R_(),i||null,r)}let ms=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=ks;static#t=this.NULL=new Cb;static create(e,i){if(Array.isArray(e))return dk({name:""},i,e,"");{const r=e.name??"";return dk({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Ze({token:t,providedIn:"any",factory:()=>Oe(q1)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();function $b(t){return t.ngOriginalError}class ma{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&$b(n);for(;e&&$b(e);)e=$b(e);return e||null}}function qb(t){return n=>{setTimeout(t,void 0,n)}}const et=class vP extends Zt{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){let r=n,a=e||(()=>null),u=i;if(n&&"object"==typeof n){const b=n;r=b.next?.bind(b),a=b.error?.bind(b),u=b.complete?.bind(b)}this.__isAsync&&(a=qb(a),r&&(r=qb(r)),u&&(u=qb(u)));const f=super.subscribe({next:r,error:a,complete:u});return n instanceof En&&n.add(f),f}};function pk(...t){}class At{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function yP(){const t="function"==typeof In.requestAnimationFrame;let n=In[t?"requestAnimationFrame":"setTimeout"],e=In[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function wP(t){const n=()=>{!function xP(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(In,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Kb(t),t.isCheckStableRunning=!0,Zb(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Kb(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,a,u,f)=>{if(function SP(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(f))return e.invokeTask(r,a,u,f);try{return mk(t),e.invokeTask(r,a,u,f)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&n(),fk(t)}},onInvoke:(e,i,r,a,u,f,b)=>{try{return mk(t),e.invoke(r,a,u,f,b)}finally{t.shouldCoalesceRunChangeDetection&&n(),fk(t)}},onHasTask:(e,i,r,a)=>{e.hasTask(r,a),i===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,Kb(t),Zb(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,i,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!At.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(At.isInAngularZone())throw new xe(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const a=this._inner,u=a.scheduleEventTask("NgZoneEvent: "+r,n,bP,pk,pk);try{return a.runTask(u,e,i)}finally{a.cancelTask(u)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const bP={};function Zb(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Kb(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function mk(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fk(t){t._nesting--,Zb(t)}class kP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}const gk=new ze("",{providedIn:"root",factory:_k});function _k(){const t=qe(At);let n=!0;return xs(new bn(r=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(n),r.complete()})}),new bn(r=>{let a;t.runOutsideAngular(()=>{a=t.onStable.subscribe(()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,r.next(!0))})})});const u=t.onUnstable.subscribe(()=>{At.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{a.unsubscribe(),u.unsubscribe()}}).pipe(Vr()))}function Uc(t){return t instanceof Function?t():t}let Xb=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>new t})}return t})();function kf(t){for(;t;){t[ft]|=64;const n=jc(t);if(v(t)&&!n)return t;t=n}return null}const wk=new ze("",{providedIn:"root",factory:()=>!1});let H_=null;function Tk(t,n){return t[n]??Dk()}function Ek(t,n){const e=Dk();e.producerNode?.length&&(t[n]=H_,e.lView=t,H_=Mk())}const OP={...ht,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{kf(t.lView)},lView:null};function Mk(){return Object.create(OP)}function Dk(){return H_??=Mk(),H_}const Ut={};function en(t){Ik(pn(),Pe(),Gr()+t,!1)}function Ik(t,n,e,i){if(!i)if(3==(3&n[ft])){const a=t.preOrderCheckHooks;null!==a&&Qh(n,a,e)}else{const a=t.preOrderHooks;null!==a&&Yh(n,a,0,e)}Os(e)}function me(t,n=Gt.Default){const e=Pe();return null===e?Oe(t,n):Kg(Ar(),e,Ct(t),n)}function Qb(){throw new Error("invalid")}function U_(t,n,e,i,r,a,u,f,b,k,D){const N=n.blueprint.slice();return N[Qn]=r,N[ft]=140|i,(null!==k||t&&2048&t[ft])&&(N[ft]|=2048),Cm(N),N[fn]=N[Va]=t,N[li]=e,N[gn]=u||t&&t[gn],N[St]=f||t&&t[St],N[wi]=b||t&&t[wi]||null,N[xi]=a,N[rt]=function Ad(){return __++}(),N[zo]=D,N[ut]=k,N[ci]=2==n.type?t[ci]:N,N}function Ep(t,n,e,i,r){let a=t.data[n];if(null===a)a=function Yb(t,n,e,i,r){const a=jg(),u=bd(),b=t.data[n]=function HP(t,n,e,i,r,a){let u=n?n.injectorIndex:-1,f=0;return yd()&&(f|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:u,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:f,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?a:a&&a.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=b),null!==a&&(u?null==a.child&&null!==b.parent&&(a.child=b):null===a.next&&(a.next=b,b.prev=a)),b}(t,n,e,i,r),function Wy(){return yt.lFrame.inI18n}()&&(a.flags|=32);else if(64&a.type){a.type=e,a.value=i,a.attrs=r;const u=function Tu(){const t=yt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();a.injectorIndex=null===u?-1:u.injectorIndex}return as(a,!0),a}function Sf(t,n,e,i){if(0===e)return-1;const r=n.length;for(let a=0;a<e;a++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function Ak(t,n,e,i,r){const a=Tk(n,ja),u=Gr(),f=2&i;try{Os(-1),f&&n.length>$t&&Ik(t,n,$t,!1),Ps(f?2:0,r);const k=f?a:null,D=Yn(k);try{null!==k&&(k.dirty=!1),e(i,r)}finally{Sn(k,D)}}finally{f&&null===n[ja]&&Ek(n,ja),Os(u),Ps(f?3:1,r)}}function Jb(t,n,e){if(sa(n)){const i=Ne(null);try{const a=n.directiveEnd;for(let u=n.directiveStart;u<a;u++){const f=t.data[u];f.contentQueries&&f.contentQueries(1,e[u],u)}}finally{Ne(i)}}}function e0(t,n,e){Em()&&(function KP(t,n,e,i){const r=e.directiveStart,a=e.directiveEnd;Is(e)&&function nR(t,n,e){const i=Ur(n,t),r=Pk(e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const f=G_(t,U_(t,r,null,u,i,n,null,t[gn].rendererFactory.createRenderer(i,e),null,null,null));t[n.index]=f}(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||np(e,n),$r(i,n);const u=e.initialInputs;for(let f=r;f<a;f++){const b=t.data[f],k=Ic(n,t,f,e);$r(k,n),null!==u&&iR(0,f-r,k,b,0,u),Ft(b)&&(jo(e.index,n)[li]=Ic(n,t,f,e))}}(t,n,e,Ur(e,n)),64==(64&e.flags)&&zk(t,n,e))}function t0(t,n,e=Ur){const i=n.localNames;if(null!==i){let r=n.index+1;for(let a=0;a<i.length;a+=2){const u=i[a+1],f=-1===u?e(n,t):t[u];t[r++]=f}}}function Pk(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=n0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function n0(t,n,e,i,r,a,u,f,b,k,D){const N=$t+i,U=N+r,K=function NP(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Ut);return e}(N,U),re="function"==typeof k?k():k;return K[Ye]={type:t,blueprint:K,template:e,queries:null,viewQuery:f,declTNode:n,data:K.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:b,consts:re,incompleteFirstPass:!1,ssrId:D}}let Rk=t=>null;function Ok(t,n,e,i){for(let r in t)if(t.hasOwnProperty(r)){e=null===e?{}:e;const a=t[r];null===i?Fk(e,n,r,a):i.hasOwnProperty(r)&&Fk(e,n,i[r],a)}return e}function Fk(t,n,e,i){t.hasOwnProperty(e)?t[e].push(n,i):t[e]=[n,i]}function Vs(t,n,e,i,r,a,u,f){const b=Ur(n,e);let D,k=n.inputs;!f&&null!=k&&(D=k[i])?(l0(t,e,D,i,r),Is(n)&&function $P(t,n){const e=jo(n,t);16&e[ft]||(e[ft]|=64)}(e,n.index)):3&n.type&&(i=function GP(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=u?u(r,n.value||"",i):r,a.setProperty(b,i,r))}function r0(t,n,e,i){if(Em()){const r=null===i?null:{"":-1},a=function QP(t,n){const e=t.directiveRegistry;let i=null,r=null;if(e)for(let a=0;a<e.length;a++){const u=e[a];if(pu(n,u.selectors,!1))if(i||(i=[]),Ft(u))if(null!==u.findHostDirectiveDefs){const f=[];r=r||new Map,u.findHostDirectiveDefs(u,f,r),i.unshift(...f,u),o0(t,n,f.length)}else i.unshift(u),o0(t,n,0);else r=r||new Map,u.findHostDirectiveDefs?.(u,i,r),i.push(u)}return null===i?null:[i,r]}(t,e);let u,f;null===a?u=f=null:[u,f]=a,null!==u&&Nk(t,n,e,u,r,f),r&&function YP(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const a=e[n[r+1]];if(null==a)throw new xe(-301,!1);i.push(n[r],a)}}}(e,i,r)}e.mergedAttrs=Ml(e.mergedAttrs,e.attrs)}function Nk(t,n,e,i,r,a){for(let k=0;k<i.length;k++)Ou(np(e,n),t,i[k].type);!function eR(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let k=0;k<i.length;k++){const D=i[k];D.providersResolver&&D.providersResolver(D)}let u=!1,f=!1,b=Sf(t,n,i.length,null);for(let k=0;k<i.length;k++){const D=i[k];e.mergedAttrs=Ml(e.mergedAttrs,D.hostAttrs),tR(t,e,n,b,D),JP(b,D,r),null!==D.contentQueries&&(e.flags|=4),(null!==D.hostBindings||null!==D.hostAttrs||0!==D.hostVars)&&(e.flags|=64);const N=D.type.prototype;!u&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),u=!0),!f&&(N.ngOnChanges||N.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),f=!0),b++}!function UP(t,n,e){const r=n.directiveEnd,a=t.data,u=n.attrs,f=[];let b=null,k=null;for(let D=n.directiveStart;D<r;D++){const N=a[D],U=e?e.get(N):null,re=U?U.outputs:null;b=Ok(N.inputs,D,b,U?U.inputs:null),k=Ok(N.outputs,D,k,re);const ue=null===b||null===u||Il(n)?null:rR(b,D,u);f.push(ue)}null!==b&&(b.hasOwnProperty("class")&&(n.flags|=8),b.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=f,n.inputs=b,n.outputs=k}(t,e,a)}function zk(t,n,e){const i=e.directiveStart,r=e.directiveEnd,a=e.index,u=function wd(){return yt.lFrame.currentDirectiveIndex}();try{Os(a);for(let f=i;f<r;f++){const b=t.data[f],k=n[f];Im(f),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&XP(b,k)}}finally{Os(-1),Im(u)}}function XP(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function o0(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function JP(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Ft(n)&&(e[""]=t)}}function tR(t,n,e,i,r){t.data[i]=r;const a=r.factory||(r.factory=Ce(r.type)),u=new Au(a,Ft(r),me);t.blueprint[i]=u,e[i]=u,function qP(t,n,e,i,r){const a=r.hostBindings;if(a){let u=t.hostBindingOpCodes;null===u&&(u=t.hostBindingOpCodes=[]);const f=~n.index;(function ZP(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(u)!=f&&u.push(f),u.push(e,i,a)}}(t,n,i,Sf(t,e,r.hostVars,Ut),r)}function ql(t,n,e,i,r,a){const u=Ur(t,n);!function s0(t,n,e,i,r,a,u){if(null==a)t.removeAttribute(n,r,e);else{const f=null==u?kt(a):u(a,i||"",r);t.setAttribute(n,r,f,e)}}(n[St],u,a,t.value,e,i,r)}function iR(t,n,e,i,r,a){const u=a[n];if(null!==u)for(let f=0;f<u.length;)Lk(i,e,u[f++],u[f++],u[f++])}function Lk(t,n,e,i,r){const a=Ne(null);try{const u=t.inputTransforms;null!==u&&u.hasOwnProperty(i)&&(r=u[i].call(n,r)),null!==t.setInput?t.setInput(n,r,e,i):n[i]=r}finally{Ne(a)}}function rR(t,n,e){let i=null,r=0;for(;r<e.length;){const a=e[r];if(0!==a)if(5!==a){if("number"==typeof a)break;if(t.hasOwnProperty(a)){null===i&&(i=[]);const u=t[a];for(let f=0;f<u.length;f+=2)if(u[f]===n){i.push(a,u[f+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Bk(t,n,e,i){return[t,!0,!1,n,null,0,i,e,null,null,null]}function Vk(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const a=e[i+1];if(-1!==a){const u=t.data[a];Gh(e[i]),u.contentQueries(2,n[a],a)}}}function G_(t,n){return t[Ba]?t[yu][Mr]=n:t[Ba]=n,t[yu]=n,n}function a0(t,n,e){Gh(0);const i=Ne(null);try{n(t,e)}finally{Ne(i)}}function jk(t){return t[ra]||(t[ra]=[])}function Hk(t){return t.cleanup||(t.cleanup=[])}function Uk(t,n,e){return(null===t||Ft(t))&&(e=function ku(t){for(;Array.isArray(t);){if("object"==typeof t[gd])return t;t=t[Qn]}return null}(e[n.index])),e[St]}function Gk(t,n){const e=t[wi],i=e?e.get(ma,null):null;i&&i.handleError(n)}function l0(t,n,e,i,r){for(let a=0;a<e.length;){const u=e[a++],f=e[a++];Lk(t.data[u],n[u],i,f,r)}}function oR(t,n){const e=jo(n,t),i=e[Ye];!function sR(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(i,e);const r=e[Qn];null!==r&&null===e[zo]&&(e[zo]=Vb(r,e[wi])),c0(i,e,e[li])}function c0(t,n,e){Ec(n);try{const i=t.viewQuery;null!==i&&a0(1,i,e);const r=t.template;null!==r&&Ak(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Vk(t,n),t.staticViewQueries&&a0(2,t.viewQuery,e);const a=t.components;null!==a&&function aR(t,n){for(let e=0;e<n.length;e++)oR(t,n[e])}(n,a)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[ft]&=-5,Du()}}let $k=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(e,i,r){const a=typeof Zone>"u"?null:Zone.current,u=function os(t,n,e){const i=Object.create(ss);e&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=n;const r=u=>{i.cleanupFn=u};return i.ref={notify:()=>Bt(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Vi(i))return;i.hasRun=!0;const u=Yn(i);try{i.cleanupFn(),i.cleanupFn=io,i.fn(r)}finally{Sn(i,u)}},cleanup:()=>i.cleanupFn()},i.ref}(e,k=>{this.all.has(k)&&this.queue.set(k,a)},r);let f;this.all.add(u),u.notify();const b=()=>{u.cleanup(),f?.(),this.all.delete(u),this.queue.delete(u)};return f=i?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[e,i]of this.queue)this.queue.delete(e),i?i.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>new t})}return t})();function $_(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==n)for(let u=0;u<n.length;u++){const f=n[u];"number"==typeof f?a=f:1==a?r=lc(r,f):2==a&&(i=lc(i,f+": "+n[++u]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function Cf(t,n,e,i,r=!1){for(;null!==e;){const a=n[e.index];null!==a&&i.push(ei(a)),Ji(a)&&Wk(a,i);const u=e.type;if(8&u)Cf(t,n,e.child,i);else if(32&u){const f=fp(e,n);let b;for(;b=f();)i.push(b)}else if(16&u){const f=Ve(n,e);if(Array.isArray(f))i.push(...f);else{const b=jc(n[ci]);Cf(b[Ye],b,f,i,!0)}}e=r?e.projectionNext:e.next}return i}function Wk(t,n){for(let e=fi;e<t.length;e++){const i=t[e],r=i[Ye].firstChild;null!==r&&Cf(i[Ye],i,r,n)}t[hn]!==t[Qn]&&n.push(t[hn])}function W_(t,n,e,i=!0){const r=n[gn],a=r.rendererFactory,u=r.afterRenderEventManager;a.begin?.(),u?.begin();try{qk(t,n,t.template,e)}catch(b){throw i&&Gk(n,b),b}finally{a.end?.(),r.effectManager?.flush(),u?.end()}}function qk(t,n,e,i){const r=n[ft];if(256!=(256&r)){n[gn].effectManager?.flush(),Ec(n);try{Cm(n),function Ug(t){return yt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Ak(t,n,e,2,i);const u=3==(3&r);if(u){const k=t.preOrderCheckHooks;null!==k&&Qh(n,k,null)}else{const k=t.preOrderHooks;null!==k&&Yh(n,k,0,null),ca(n,0)}if(function dR(t){for(let n=gp(t);null!==n;n=uf(n)){if(!n[oa])continue;const e=n[Bo];for(let i=0;i<e.length;i++){Gy(e[i])}}}(n),Zk(n,2),null!==t.contentQueries&&Vk(t,n),u){const k=t.contentCheckHooks;null!==k&&Qh(n,k)}else{const k=t.contentHooks;null!==k&&Yh(n,k,1),ca(n,1)}!function FP(t,n){const e=t.hostBindingOpCodes;if(null===e)return;const i=Tk(n,Gn);try{for(let r=0;r<e.length;r++){const a=e[r];if(a<0)Os(~a);else{const u=a,f=e[++r],b=e[++r];qy(f,u),i.dirty=!1;const k=Yn(i);try{b(2,n[u])}finally{Sn(i,k)}}}}finally{null===n[Gn]&&Ek(n,Gn),Os(-1)}}(t,n);const f=t.components;null!==f&&Xk(n,f,0);const b=t.viewQuery;if(null!==b&&a0(2,b,i),u){const k=t.viewCheckHooks;null!==k&&Qh(n,k)}else{const k=t.viewHooks;null!==k&&Yh(n,k,2),ca(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[ft]&=-73,Ir(n)}finally{Du()}}}function Zk(t,n){for(let e=gp(t);null!==e;e=uf(e))for(let i=fi;i<e.length;i++)Kk(e[i],n)}function uR(t,n,e){Kk(jo(n,t),e)}function Kk(t,n){if(!function Lh(t){return 128==(128&t[ft])}(t))return;const e=t[Ye],i=t[ft];if(80&i&&0===n||1024&i||2===n)qk(e,t,e.template,t[li]);else if(t[La]>0){Zk(t,1);const r=e.components;null!==r&&Xk(t,r,1)}}function Xk(t,n,e){for(let i=0;i<n.length;i++)uR(t,n[i],e)}class Tf{get rootNodes(){const n=this._lView,e=n[Ye];return Cf(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[li]}set context(n){this._lView[li]=n}get destroyed(){return 256==(256&this._lView[ft])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[fn];if(Ji(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(w(n,i),pr(e,i))}this._attachedToViewContainer=!1}S(this._lView[Ye],this._lView)}onDestroy(n){!function Vh(t,n){if(256==(256&t[ft]))throw new xe(911,!1);null===t[_o]&&(t[_o]=[]),t[_o].push(n)}(this._lView,n)}markForCheck(){kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[ft]&=-129}reattach(){this._lView[ft]|=128}detectChanges(){W_(this._lView[Ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function o(t,n){tt(t,n,n[St],2,null,null)}(this._lView[Ye],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=n}}class hR extends Tf{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;W_(n[Ye],n,n[li],!1)}checkNoChanges(){}get context(){return null}}class Qk extends V_{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Jt(n);return new Ef(e,this.ngModule)}}function Yk(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class mR{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=yc(i);const r=this.injector.get(n,Ub,i);return r!==Ub||e===Ub?r:this.parentInjector.get(n,e,i)}}class Ef extends ok{get inputs(){const n=this.componentDef,e=n.inputTransforms,i=Yk(n.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return Yk(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function mu(t){return t.map(_m).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,r){let a=(r=r||this.ngModule)instanceof pa?r:r?.injector;a&&null!==this.componentDef.getStandaloneInjector&&(a=this.componentDef.getStandaloneInjector(a)||a);const u=a?new mR(n,a):n,f=u.get(wf,null);if(null===f)throw new xe(407,!1);const N={rendererFactory:f,sanitizer:u.get(dP,null),effectManager:u.get($k,null),afterRenderEventManager:u.get(Xb,null)},U=f.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",re=i?function zP(t,n,e,i){const a=i.get(wk,!1)||e===eo.ShadowDom,u=t.selectRootElement(n,a);return function LP(t){Rk(t)}(u),u}(U,i,this.componentDef.encapsulation,u):Rd(U,K,function pR(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(K)),De=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ye=null;null!==re&&(ye=Vb(re,u,!0));const st=n0(0,null,null,1,0,null,null,null,null,null,null),at=U_(null,st,null,De,null,null,N,U,u,null,ye);let jt,ti;Ec(at);try{const mi=this.componentDef;let so,$s=null;mi.findHostDirectiveDefs?(so=[],$s=new Map,mi.findHostDirectiveDefs(mi,so,$s),so.push(mi)):so=[mi];const pl=function gR(t,n){const e=t[Ye],i=$t;return t[i]=n,Ep(e,i,2,"#host",null)}(at,re),Hy=function _R(t,n,e,i,r,a,u){const f=r[Ye];!function vR(t,n,e,i){for(const r of t)n.mergedAttrs=Ml(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&($_(n,n.mergedAttrs,!0),null!==e&&vi(i,e,n))}(i,t,n,u);let b=null;null!==n&&(b=Vb(n,r[wi]));const k=a.rendererFactory.createRenderer(n,e);let D=16;e.signals?D=4096:e.onPush&&(D=64);const N=U_(r,Pk(e),null,D,r[t.index],t,a,k,null,null,b);return f.firstCreatePass&&o0(f,t,i.length-1),G_(r,N),r[t.index]=N}(pl,re,mi,so,at,N,U);ti=Sm(st,$t),re&&function bR(t,n,e,i){if(i)pd(t,e,["ng-version",uP.full]);else{const{attrs:r,classes:a}=function Fh(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let a=t[i];if("string"==typeof a)2===r?""!==a&&n.push(a,t[++i]):8===r&&e.push(a);else{if(!fo(r))break;r=a}i++}return{attrs:n,classes:e}}(n.selectors[0]);r&&pd(t,e,r),a&&a.length>0&&Rr(t,e,a.join(" "))}}(U,mi,re,i),void 0!==e&&function xR(t,n,e){const i=t.projection=[];for(let r=0;r<n.length;r++){const a=e[r];i.push(null!=a?Array.from(a):null)}}(ti,this.ngContentSelectors,e),jt=function yR(t,n,e,i,r,a){const u=Ar(),f=r[Ye],b=Ur(u,r);Nk(f,r,u,e,null,i);for(let D=0;D<e.length;D++)$r(Ic(r,f,u.directiveStart+D,u),r);zk(f,r,u),b&&$r(b,r);const k=Ic(r,f,u.directiveStart+u.componentOffset,u);if(t[li]=r[li]=k,null!==a)for(const D of a)D(k,n);return Jb(f,u,t),k}(Hy,mi,so,$s,at,[wR]),c0(st,at,null)}finally{Du()}return new fR(this.componentType,jt,Sp(ti,at),at,ti)}}class fR extends rP{constructor(n,e,i,r,a){super(),this.location=i,this._rootLView=r,this._tNode=a,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new hR(r),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const a=this._rootLView;l0(a[Ye],a,r,n,e),this.previousInputValues.set(n,e),kf(jo(this._tNode.index,a))}}get injector(){return new tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function wR(){const t=Ar();Xh(Pe()[Ye],t)}function Qt(t){let n=function Jk(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(Ft(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new xe(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);const u=t;u.inputs=q_(t.inputs),u.inputTransforms=q_(t.inputTransforms),u.declaredInputs=q_(t.declaredInputs),u.outputs=q_(t.outputs);const f=r.hostBindings;f&&TR(t,f);const b=r.viewQuery,k=r.contentQueries;if(b&&SR(t,b),k&&CR(t,k),Da(t.inputs,r.inputs),Da(t.declaredInputs,r.declaredInputs),Da(t.outputs,r.outputs),null!==r.inputTransforms&&(null===u.inputTransforms&&(u.inputTransforms={}),Da(u.inputTransforms,r.inputTransforms)),Ft(r)&&r.data.animation){const D=t.data;D.animation=(D.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let u=0;u<a.length;u++){const f=a[u];f&&f.ngInherit&&f(t),f===Qt&&(e=!1)}}n=Object.getPrototypeOf(n)}!function kR(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Ml(r.hostAttrs,e=Ml(e,r.hostAttrs))}}(i)}function q_(t){return t===un?{}:t===Wt?[]:t}function SR(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function CR(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,a)=>{n(i,r,a),e(i,r,a)}:n}function TR(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}function Z_(t){return!!function d0(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function xo(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Nr(t,n,e,i){const r=Pe();return xo(r,xd(),n)&&(pn(),ql(_i(),r,t,n,e,i)),Nr}function Ei(t,n,e,i,r,a,u,f){const b=Pe(),k=pn(),D=t+$t,N=k.firstCreatePass?function QR(t,n,e,i,r,a,u,f,b){const k=n.consts,D=Ep(n,t,4,u||null,Ua(k,f));r0(n,e,D,Ua(k,b)),Xh(n,D);const N=D.tView=n0(2,D,i,r,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,k,null);return null!==n.queries&&(n.queries.template(n,D),N.queries=n.queries.embeddedTView(D)),D}(D,k,b,n,e,i,r,a,u):k.data[D];as(N,!1);const U=gS(k,b,N,t);Iu()&&Ge(k,b,U,N),$r(U,b),G_(b,b[D]=Bk(U,b,U,N)),Rl(N)&&e0(k,b,N),null!=u&&t0(b,N,f)}let gS=function _S(t,n,e,i){return Ll(!0),n[St].createComment("")};function nl(t){return function Rs(t,n){return t[n]}(function Tc(){return yt.lFrame.contextLView}(),$t+t)}function cn(t,n,e){const i=Pe();return xo(i,xd(),n)&&Vs(pn(),_i(),i,t,n,i[St],e,!1),cn}function g0(t,n,e,i,r){const u=r?"class":"style";l0(t,e,n.inputs[u],u,i)}function Et(t,n,e,i){const r=Pe(),a=pn(),u=$t+t,f=r[St],b=a.firstCreatePass?function tO(t,n,e,i,r,a){const u=n.consts,b=Ep(n,t,2,i,Ua(u,r));return r0(n,e,b,Ua(u,a)),null!==b.attrs&&$_(b,b.attrs,!1),null!==b.mergedAttrs&&$_(b,b.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,b),b}(u,a,r,n,e,i):a.data[u],k=vS(a,r,b,f,n,t);r[u]=k;const D=Rl(b);return as(b,!0),vi(f,k,b),32!=(32&b.flags)&&Iu()&&Ge(a,r,k,b),0===function $y(){return yt.lFrame.elementDepthCount}()&&$r(k,r),function Lg(){yt.lFrame.elementDepthCount++}(),D&&(e0(a,r,b),Jb(a,b,r)),null!==i&&t0(r,b),Et}function Vt(){let t=Ar();bd()?jh():(t=t.parent,as(t,!1));const n=t;(function Mm(t){return yt.skipHydrationRootTNode===t})(n)&&function Ho(){yt.skipHydrationRootTNode=null}(),function Bg(){yt.lFrame.elementDepthCount--}();const e=pn();return e.firstCreatePass&&(Xh(e,t),sa(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Jy(t){return 0!=(8&t.flags)}(n)&&g0(e,n,Pe(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function eb(t){return 0!=(16&t.flags)}(n)&&g0(e,n,Pe(),n.stylesWithoutHost,!1),Vt}function vr(t,n,e,i){return Et(t,n,e,i),Vt(),vr}let vS=(t,n,e,i,r,a)=>(Ll(!0),Rd(i,r,function Kh(){return yt.lFrame.currentNamespace}()));function zp(){return Pe()}function Pf(t){return!!t&&"function"==typeof t.then}function xS(t){return!!t&&"function"==typeof t.subscribe}function Mi(t,n,e,i){const r=Pe(),a=pn(),u=Ar();return wS(a,r,r[St],u,t,n,i),Mi}function y0(t,n){const e=Ar(),i=Pe(),r=pn();return wS(r,i,Uk(oi(r.data),e,i),e,t,n),y0}function wS(t,n,e,i,r,a,u){const f=Rl(i),k=t.firstCreatePass&&Hk(t),D=n[li],N=jk(n);let U=!0;if(3&i.type||u){const ue=Ur(i,n),we=u?u(ue):ue,De=N.length,ye=u?at=>u(ei(at[i.index])):i.index;let st=null;if(!u&&f&&(st=function aO(t,n,e,i){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const u=r[a];if(u===e&&r[a+1]===i){const f=n[ra],b=r[a+2];return f.length>b?f[b]:null}"string"==typeof u&&(a+=2)}return null}(t,n,r,i.index)),null!==st)(st.__ngLastListenerFn__||st).__ngNextListenerFn__=a,st.__ngLastListenerFn__=a,U=!1;else{a=SS(i,n,D,a,!1);const at=e.listen(we,r,a);N.push(a,at),k&&k.push(r,ye,De,De+1)}}else a=SS(i,n,D,a,!1);const K=i.outputs;let re;if(U&&null!==K&&(re=K[r])){const ue=re.length;if(ue)for(let we=0;we<ue;we+=2){const jt=n[re[we]][re[we+1]].subscribe(a),ti=N.length;N.push(a,jt),k&&k.push(r,i.index,ti,-(ti+1))}}}function kS(t,n,e,i){try{return Ps(6,n,e),!1!==e(i)}catch(r){return Gk(t,r),!1}finally{Ps(7,n,e)}}function SS(t,n,e,i,r){return function a(u){if(u===Function)return i;kf(t.componentOffset>-1?jo(t.index,n):n);let b=kS(n,e,i,u),k=a.__ngNextListenerFn__;for(;k;)b=kS(n,e,k,u)&&b,k=k.__ngNextListenerFn__;return r&&!1===b&&u.preventDefault(),b}}function wo(t=1){return function Gg(t){return(yt.lFrame.contextLView=function Zy(t,n){for(;t>0;)n=n[Va],t--;return n}(t,yt.lFrame.contextLView))[li]}(t)}function lO(t,n){let e=null;const i=function go(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const a=n[r];if("*"!==a){if(null===i?pu(t,a,!0):Es(i,a))return r}else e=r}return e}function Go(t){const n=Pe()[ci][xi];if(!n.projection){const i=n.projection=Nc(t?t.length:1,null),r=i.slice();let a=n.child;for(;null!==a;){const u=t?lO(a,t):0;null!==u&&(r[u]?r[u].projectionNext=a:i[u]=a,r[u]=a),a=a.next}}}function Cn(t,n=0,e){const i=Pe(),r=pn(),a=Ep(r,$t+t,16,null,e||null);null===a.projection&&(a.projection=n),jh(),(!i[zo]||yd())&&32!=(32&a.flags)&&function Lt(t,n,e){Pn(n[St],0,n,e,F(t,e,n),pe(e.parent||n[xi],e,n))}(r,i,a)}function J_(t,n){return t<<17|n<<2}function Fd(t){return t>>17&32767}function x0(t){return 2|t}function Yu(t){return(131068&t)>>2}function w0(t,n){return-131069&t|n<<2}function k0(t){return 1|t}function OS(t,n,e,i,r){const a=t[e+1],u=null===n;let f=i?Fd(a):Yu(a),b=!1;for(;0!==f&&(!1===b||u);){const D=t[f+1];mO(t[f],n)&&(b=!0,t[f+1]=i?k0(D):x0(D)),f=i?Fd(D):Yu(D)}b&&(t[e+1]=i?x0(a):k0(a))}function mO(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Za(t,n)>=0}const zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FS(t){return t.substring(zr.key,zr.keyEnd)}function fO(t){return t.substring(zr.value,zr.valueEnd)}function zS(t,n){const e=zr.textEnd;let i=zr.key=Lp(t,n,e);return e===i?-1:(i=zr.keyEnd=function yO(t,n,e){let i;for(;n<e&&(45===(i=t.charCodeAt(n))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)n++;return n}(t,i,e),i=BS(t,i,e),i=zr.value=Lp(t,i,e),i=zr.valueEnd=function bO(t,n,e){let i=-1,r=-1,a=-1,u=n,f=u;for(;u<e;){const b=t.charCodeAt(u++);if(59===b)return f;34===b||39===b?f=u=VS(t,b,u,e):n===u-4&&85===a&&82===r&&76===i&&40===b?f=u=VS(t,41,u,e):b>32&&(f=u),a=r,r=i,i=-33&b}return f}(t,i,e),BS(t,i,e))}function Lp(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function BS(t,n,e,i){return(n=Lp(t,n,e))<e&&n++,n}function VS(t,n,e,i){let r=-1,a=e;for(;a<i;){const u=t.charCodeAt(a++);if(u==n&&92!==r)return a;r=92==u&&92===r?0:u}throw new Error}function S0(t,n,e){return rl(t,n,e,!1),S0}function rr(t,n){return rl(t,n,null,!0),rr}function il(t){!function ol(t,n,e,i){const r=pn(),a=Wa(2);r.firstUpdatePass&&HS(r,null,a,i);const u=Pe();if(e!==Ut&&xo(u,a,e)){const f=r.data[Gr()];if(WS(f,i)&&!jS(r,a)){let b=i?f.classesWithoutHost:f.stylesWithoutHost;null!==b&&(e=lc(b,e||"")),g0(r,f,u,e,i)}else!function DO(t,n,e,i,r,a,u,f){r===Ut&&(r=Wt);let b=0,k=0,D=0<r.length?r[0]:null,N=0<a.length?a[0]:null;for(;null!==D||null!==N;){const U=b<r.length?r[b+1]:void 0,K=k<a.length?a[k+1]:void 0;let ue,re=null;D===N?(b+=2,k+=2,U!==K&&(re=N,ue=K)):null===N||null!==D&&D<N?(b+=2,re=D):(k+=2,re=N,ue=K),null!==re&&GS(t,n,e,i,re,ue,u,f),D=b<r.length?r[b]:null,N=k<a.length?a[k]:null}}(r,f,u,u[St],u[a+1],u[a+1]=function EO(t,n,e){if(null==e||""===e)return Wt;const i=[],r=si(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(i,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(i,a,r[a]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,a)}}(US,xO,t,!1)}function xO(t,n){for(let e=function _O(t){return function LS(t){zr.key=0,zr.keyEnd=0,zr.value=0,zr.valueEnd=0,zr.textEnd=t.length}(t),zS(t,Lp(t,0,zr.textEnd))}(n);e>=0;e=zS(n,e))US(t,FS(n),fO(n))}function rl(t,n,e,i){const r=Pe(),a=pn(),u=Wa(2);a.firstUpdatePass&&HS(a,t,u,i),n!==Ut&&xo(r,u,n)&&GS(a,a.data[Gr()],r,r[St],t,r[u+1]=function IO(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Ln(si(t)))),t}(n,e),i,u)}function jS(t,n){return n>=t.expandoStartIndex}function HS(t,n,e,i){const r=t.data;if(null===r[e+1]){const a=r[Gr()],u=jS(t,e);WS(a,i)&&null===n&&!u&&(n=!1),n=function kO(t,n,e,i){const r=oi(t);let a=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=Rf(e=C0(null,t,n,e,i),n.attrs,i),a=null);else{const u=n.directiveStylingLast;if(-1===u||t[u]!==r)if(e=C0(r,t,n,e,i),null===a){let b=function SO(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==Yu(i))return t[Fd(i)]}(t,n,i);void 0!==b&&Array.isArray(b)&&(b=C0(null,t,n,b[1],i),b=Rf(b,n.attrs,i),function CO(t,n,e,i){t[Fd(e?n.classBindings:n.styleBindings)]=i}(t,n,i,b))}else a=function TO(t,n,e){let i;const r=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<r;a++)i=Rf(i,t[a].hostAttrs,e);return Rf(i,n.attrs,e)}(t,n,i)}return void 0!==a&&(i?n.residualClasses=a:n.residualStyles=a),e}(r,a,n,i),function hO(t,n,e,i,r,a){let u=a?n.classBindings:n.styleBindings,f=Fd(u),b=Yu(u);t[i]=e;let D,k=!1;if(Array.isArray(e)?(D=e[1],(null===D||Za(e,D)>0)&&(k=!0)):D=e,r)if(0!==b){const U=Fd(t[f+1]);t[i+1]=J_(U,f),0!==U&&(t[U+1]=w0(t[U+1],i)),t[f+1]=function dO(t,n){return 131071&t|n<<17}(t[f+1],i)}else t[i+1]=J_(f,0),0!==f&&(t[f+1]=w0(t[f+1],i)),f=i;else t[i+1]=J_(b,0),0===f?f=i:t[b+1]=w0(t[b+1],i),b=i;k&&(t[i+1]=x0(t[i+1])),OS(t,D,i,!0),OS(t,D,i,!1),function pO(t,n,e,i,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof n&&Za(a,n)>=0&&(e[i+1]=k0(e[i+1]))}(n,D,t,i,a),u=J_(f,b),a?n.classBindings=u:n.styleBindings=u}(r,a,n,e,u,i)}}function C0(t,n,e,i,r){let a=null;const u=e.directiveEnd;let f=e.directiveStylingLast;for(-1===f?f=e.directiveStart:f++;f<u&&(a=n[f],i=Rf(i,a.hostAttrs,r),a!==t);)f++;return null!==t&&(e.directiveStylingLast=f),i}function Rf(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let a=0;a<n.length;a++){const u=n[a];"number"==typeof u?r=u:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),mr(t,u,!!e||n[++a]))}return void 0===t?null:t}function US(t,n,e){mr(t,n,si(e))}function GS(t,n,e,i,r,a,u,f){if(!(3&n.type))return;const b=t.data,k=b[f+1],D=function uO(t){return 1==(1&t)}(k)?$S(b,n,e,r,Yu(k),u):void 0;ev(D)||(ev(a)||function cO(t){return 2==(2&t)}(k)&&(a=$S(b,null,e,r,f,u)),function Ni(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let a=-1===i.indexOf("-")?void 0:Ka.DashCase;null==r?t.removeStyle(e,i,a):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),a|=Ka.Important),t.setStyle(e,i,r,a))}}(i,u,zh(Gr(),e),r,a))}function $S(t,n,e,i,r,a){const u=null===n;let f;for(;r>0;){const b=t[r],k=Array.isArray(b),D=k?b[1]:b,N=null===D;let U=e[r+1];U===Ut&&(U=N?Wt:void 0);let K=N?Dd(U,i):D===i?U:void 0;if(k&&!ev(K)&&(K=Dd(b,i)),ev(K)&&(f=K,u))return f;const re=t[r+1];r=u?Fd(re):Yu(re)}if(null!==n){let b=a?n.residualClasses:n.residualStyles;null!=b&&(f=Dd(b,i))}return f}function ev(t){return void 0!==t}function WS(t,n){return 0!=(t.flags&(n?8:16))}function Di(t,n=""){const e=Pe(),i=pn(),r=t+$t,a=i.firstCreatePass?Ep(i,r,1,n,null):i.data[r],u=qS(i,e,a,n,t);e[r]=u,Iu()&&Ge(i,e,u,a),as(a,!1)}let qS=(t,n,e,i,r)=>(Ll(!0),function Ul(t,n){return t.createText(n)}(n[St],i));function tv(t){return Nd("",t,""),tv}function Nd(t,n,e){const i=Pe(),r=function Dp(t,n,e,i){return xo(t,xd(),e)?n+kt(e)+i:Ut}(i,t,n,e);return r!==Ut&&function Gc(t,n,e){const i=zh(n,t);!function vp(t,n,e){t.setValue(n,e)}(t[St],i,e)}(i,Gr(),r),Nd}function T0(t,n,e){const i=Pe();if(xo(i,xd(),n)){const a=pn(),u=_i();Vs(a,u,i,t,n,Uk(oi(a.data),u,i),e,!0)}return T0}const Vp="en-US";let mC=Vp;function D0(t,n,e,i,r){if(t=Ct(t),Array.isArray(t))for(let a=0;a<t.length;a++)D0(t[a],n,e,i,r);else{const a=pn(),u=Pe(),f=Ar();let b=Ku(t)?t:Ct(t.provide);const k=ek(t),D=1048575&f.providerIndexes,N=f.directiveStart,U=f.providerIndexes>>20;if(Ku(t)||!t.multi){const K=new Au(k,r,me),re=A0(b,n,r?D:D+U,N);-1===re?(Ou(np(f,u),a,b),I0(a,t,n.length),n.push(b),f.directiveStart++,f.directiveEnd++,r&&(f.providerIndexes+=1048576),e.push(K),u.push(K)):(e[re]=K,u[re]=K)}else{const K=A0(b,n,D+U,N),re=A0(b,n,D,D+U),we=re>=0&&e[re];if(r&&!we||!r&&!(K>=0&&e[K])){Ou(np(f,u),a,b);const De=function QF(t,n,e,i,r){const a=new Au(t,e,me);return a.multi=[],a.index=n,a.componentProviders=0,BC(a,r,i&&!e),a}(r?XF:KF,e.length,r,i,k);!r&&we&&(e[re].providerFactory=De),I0(a,t,n.length,0),n.push(b),f.directiveStart++,f.directiveEnd++,r&&(f.providerIndexes+=1048576),e.push(De),u.push(De)}else I0(a,t,K>-1?K:re,BC(e[r?re:K],k,!r&&i));!r&&i&&we&&e[re].componentProviders++}}}function I0(t,n,e,i){const r=Ku(n),a=function j2(t){return!!t.useClass}(n);if(r||a){const b=(a?Ct(n.useClass):n).prototype.ngOnDestroy;if(b){const k=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const D=k.indexOf(e);-1===D?k.push(e,[i,b]):k[D+1].push(i,b)}else k.push(e,b)}}}function BC(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function A0(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function KF(t,n,e,i){return P0(this.multi,[])}function XF(t,n,e,i){const r=this.multi;let a;if(this.providerFactory){const u=this.providerFactory.componentProviders,f=Ic(e,e[Ye],this.providerFactory.index,i);a=f.slice(0,u),P0(r,a);for(let b=u;b<f.length;b++)a.push(f[b])}else a=[],P0(r,a);return a}function P0(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function jn(t,n=[]){return e=>{e.providersResolver=(i,r)=>function ZF(t,n,e){const i=pn();if(i.firstCreatePass){const r=Ft(t);D0(e,i.data,i.blueprint,r,!0),D0(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class eh{}class VC{}class R0 extends eh{constructor(n,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qk(this);const r=jr(n);this._bootstrapComponents=Uc(r.bootstrap),this._r3Injector=uk(n,e,[{provide:eh,useValue:this},{provide:V_,useValue:this.componentFactoryResolver},...i],Ln(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class O0 extends VC{constructor(n){super(),this.moduleType=n}create(n){return new R0(this.moduleType,n,[])}}class jC extends eh{constructor(n){super(),this.componentFactoryResolver=new Qk(this),this.instance=null;const e=new bp([...n.providers,{provide:eh,useValue:this},{provide:V_,useValue:this.componentFactoryResolver}],n.parent||R_(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function F0(t,n,e=null){return new jC({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}let eN=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=X1(0,e.type),r=i.length>0?F0([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ze({token:t,providedIn:"environment",factory:()=>new t(Oe(pa))})}return t})();function HC(t){t.getStandaloneInjector=n=>n.get(eN).getOrCreateStandaloneInjector(t)}function z0(t,n,e){const i=function ro(){const t=yt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}()+t,r=Pe();return r[i]===Ut?function Zl(t,n,e){return t[n]=e}(r,i,e?n.call(e):n()):function Mf(t,n){return t[n]}(r,i)}function CN(){return this._results[Symbol.iterator]()}class jp{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new et)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=jp.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=CN)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=function ls(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function lb(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],a=n[i];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function EN(t,n,e,i=!0){const r=n[Ye];if(function h(t,n,e,i){const r=fi+i,a=e.length;i>0&&(e[r-1][Mr]=n),i<a-fi?(n[Mr]=e[r],Hm(e,fi+i,n)):(e.push(n),n[Mr]=null),n[fn]=e;const u=n[wc];null!==u&&e!==u&&function m(t,n){const e=t[Bo];n[ci]!==n[fn][fn][ci]&&(t[oa]=!0),null===e?t[Bo]=[n]:e.push(n)}(u,n);const f=n[no];null!==f&&f.insertView(t),n[ft]|=128}(r,n,t,e),i){const a=Ke(e,t),u=n[St],f=le(u,t[hn]);null!==f&&function l(t,n,e,i,r,a){i[Qn]=r,i[xi]=n,tt(t,i,e,1,r,a)}(r,t[xi],u,n,f,a)}}let $c=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=IN}return t})();const MN=$c,DN=class extends MN{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){const r=function TN(t,n,e,i){const r=n.tView,f=U_(t,r,e,4096&t[ft]?4096:16,null,n,null,null,null,i?.injector??null,i?.hydrationInfo??null);f[wc]=t[n.index];const k=t[no];return null!==k&&(f[no]=k.createEmbeddedView(r)),c0(r,f,e),f}(this._declarationLView,this._declarationTContainer,n,{injector:e,hydrationInfo:i});return new Tf(r)}};function IN(){return sv(Ar(),Pe())}function sv(t,n){return 4&t.type?new DN(n,t,Sp(t,n)):null}let sl=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=NN}return t})();function NN(){return sT(Ar(),Pe())}const zN=sl,rT=class extends zN{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Sp(this._hostTNode,this._hostLView)}get injector(){return new tr(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ru(this._hostTNode,this._hostLView);if(Mc(n)){const e=Pu(n,this._hostLView),i=Dc(n);return new tr(e[Ye].data[i+8],e)}return new tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=oT(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-fi}createEmbeddedView(n,e,i){let r,a;"number"==typeof i?r=i:null!=i&&(r=i.index,a=i.injector);const f=n.createEmbeddedViewImpl(e||{},a,null);return this.insertImpl(f,r,false),f}createComponent(n,e,i,r,a){const u=n&&!function Lu(t){return"function"==typeof t}(n);let f;if(u)f=e;else{const ue=e||{};f=ue.index,i=ue.injector,r=ue.projectableNodes,a=ue.environmentInjector||ue.ngModuleRef}const b=u?n:new Ef(Jt(n)),k=i||this.parentInjector;if(!a&&null==b.ngModule){const we=(u?k:this.parentInjector).get(pa,null);we&&(a=we)}Jt(b.componentType??{});const K=b.create(k,r,null,a);return this.insertImpl(K.hostView,f,false),K}insert(n,e){return this.insertImpl(n,e,!1)}insertImpl(n,e,i){const r=n._lView;if(function Bh(t){return Ji(t[fn])}(r)){const b=this.indexOf(n);if(-1!==b)this.detach(b);else{const k=r[fn],D=new rT(k,k[xi],k[fn]);D.detach(D.indexOf(n))}}const u=this._adjustIndex(e),f=this._lContainer;return EN(f,r,u,!i),n.attachToViewContainerRef(),Hm(L0(f),u,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=oT(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=w(this._lContainer,e);i&&(pr(L0(this._lContainer),e),S(i[Ye],i))}detach(n){const e=this._adjustIndex(n,-1),i=w(this._lContainer,e);return i&&null!=pr(L0(this._lContainer),e)?new Tf(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function oT(t){return t[8]}function L0(t){return t[8]||(t[8]=[])}function sT(t,n){let e;const i=n[t.index];return Ji(i)?e=i:(e=Bk(i,n,null,t),n[t.index]=e,G_(n,e)),aT(e,n,t,i),new rT(e,t,n)}let aT=function lT(t,n,e,i){if(t[hn])return;let r;r=8&e.type?ei(i):function LN(t,n){const e=t[St],i=e.createComment(""),r=Ur(n,t);return j(e,le(e,r),i,function oe(t,n){return t.nextSibling(n)}(e,r),!1),i}(n,e),t[hn]=r};class B0{constructor(n){this.queryList=n,this.matches=null}clone(){return new B0(this.queryList)}setDirty(){this.queryList.setDirty()}}class V0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let a=0;a<i;a++){const u=e.getByIndex(a);r.push(this.queries[u.indexInDeclarationView].clone())}return new V0(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==pT(n,e).matches&&this.queries[e].setDirty()}}class cT{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class j0{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,a=this.getByIndex(i).embeddedTView(n,r);a&&(a.indexInDeclarationView=i,null!==e?e.push(a):e=[a])}return null!==e?new j0(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class H0{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new H0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];this.matchTNodeWithReadOption(n,e,jN(e,a)),this.matchTNodeWithReadOption(n,e,Nu(e,n,a,!1,!1))}else i===$c?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Nu(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Rn||r===sl||r===$c&&4&e.type)this.addMatch(e.index,-2);else{const a=Nu(e,n,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function jN(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function UN(t,n,e,i){return-1===e?function HN(t,n){return 11&t.type?Sp(t,n):4&t.type?sv(t,n):null}(n,t):-2===e?function GN(t,n,e){return e===Rn?Sp(n,t):e===$c?sv(n,t):e===sl?sT(n,t):void 0}(t,n,i):Ic(t,t[Ye],e,n)}function dT(t,n,e,i){const r=n[no].queries[i];if(null===r.matches){const a=t.data,u=e.matches,f=[];for(let b=0;b<u.length;b+=2){const k=u[b];f.push(k<0?null:UN(n,a[k],u[b+1],e.metadata.read))}r.matches=f}return r.matches}function U0(t,n,e,i){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const u=dT(t,n,r,e);for(let f=0;f<a.length;f+=2){const b=a[f];if(b>0)i.push(u[f/2]);else{const k=a[f+1],D=n[-b];for(let N=fi;N<D.length;N++){const U=D[N];U[wc]===U[fn]&&U0(U[Ye],U,k,i)}if(null!==D[Bo]){const N=D[Bo];for(let U=0;U<N.length;U++){const K=N[U];U0(K[Ye],K,k,i)}}}}}return i}function Gi(t){const n=Pe(),e=pn(),i=Eu();Gh(i+1);const r=pT(e,i);if(t.dirty&&function Su(t){return 4==(4&t[ft])}(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?U0(e,n,i,[]):dT(e,n,r,i);t.reset(a,lP),t.notifyOnChanges()}return!0}return!1}function Xl(t,n,e){const i=pn();i.firstCreatePass&&(hT(i,new cT(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),uT(i,Pe(),n)}function js(t,n,e,i){const r=pn();if(r.firstCreatePass){const a=Ar();hT(r,new cT(n,e,i),a.index),function WN(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}uT(r,Pe(),e)}function $i(){return function $N(t,n){return t[no].queries[n].queryList}(Pe(),Eu())}function uT(t,n,e){const i=new jp(4==(4&e));(function jP(t,n,e,i){const r=jk(n);r.push(e),t.firstCreatePass&&Hk(t).push(i,r.length-1)})(t,n,i,i.destroy),null===n[no]&&(n[no]=new V0),n[no].queries.push(new B0(i))}function hT(t,n,e){null===t.queries&&(t.queries=new j0),t.queries.track(new H0(n,e))}function pT(t,n){return t.queries.getByIndex(n)}const K0=new ze("Application Initializer");let X0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=qe(K0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const a=r();if(Pf(a))e.push(a);else if(xS(a)){const u=new Promise((f,b)=>{a.subscribe({complete:f,error:b})});e.push(u)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IT=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Ql=new ze("LocaleId",{providedIn:"root",factory:()=>qe(Ql,Gt.Optional|Gt.SkipSelf)||function pz(){return typeof $localize<"u"&&$localize.locale||Vp}()});let AT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tn(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class gz{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let PT=(()=>{class t{compileModuleSync(e){return new O0(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),a=Uc(jr(e).declarations).reduce((u,f)=>{const b=Jt(f);return b&&u.push(new Ef(b)),u},[]);return new gz(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const NT=new ze(""),uv=new ze("");let tx,J0=(()=>{class t{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tx||(function Lz(t){tx=t}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==a),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(At),Oe(ex),Oe(uv))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})(),ex=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return tx?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),zd=null;const zT=new ze("AllowMultipleToken"),nx=new ze("PlatformDestroyListeners"),ix=new ze("appBootstrapListener");class BT{constructor(n,e){this.name=n,this.token=e}}function jT(t,n,e=[]){const i=`Platform: ${n}`,r=new ze(i);return(a=[])=>{let u=rx();if(!u||u.injector.get(zT,!1)){const f=[...e,...a,{provide:r,useValue:!0}];t?t(f):function jz(t){if(zd&&!zd.get(zT,!1))throw new xe(400,!1);(function LT(){!function Pi(t){aa=t}(()=>{throw new xe(600,!1)})})(),zd=t;const n=t.get(UT);(function VT(t){t.get(tk,null)?.forEach(e=>e())})(t)}(function HT(t=[],n){return ms.create({name:n,providers:[{provide:Mb,useValue:"platform"},{provide:nx,useValue:new Set([()=>zd=null])},...t]})}(f,i))}return function Uz(t){const n=rx();if(!n)throw new xe(401,!1);return n}()}}function rx(){return zd?.get(UT)??null}let UT=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function Gz(t="zone.js",n){return"noop"===t?new kP:"zone.js"===t?new At(n):t}(i?.ngZone,function GT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const a=function JF(t,n,e){return new R0(t,n,e)}(e.moduleType,this.injector,function KT(t){return[{provide:At,useFactory:t},{provide:yf,multi:!0,useFactory:()=>{const n=qe(Wz,{optional:!0});return()=>n.initialize()}},{provide:ZT,useFactory:$z},{provide:gk,useFactory:_k}]}(()=>r)),u=a.injector.get(ma,null);return r.runOutsideAngular(()=>{const f=r.onError.subscribe({next:b=>{u.handleError(b)}});a.onDestroy(()=>{hv(this._modules,a),f.unsubscribe()})}),function $T(t,n,e){try{const i=e();return Pf(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(u,r,()=>{const f=a.injector.get(X0);return f.runInitializers(),f.donePromise.then(()=>(function fC(t){Cr(t,"Expected localeId to be defined"),"string"==typeof t&&(mC=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ql,Vp)||Vp),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,i=[]){const r=WT({},i);return function Bz(t,n,e){const i=new O0(e);return Promise.resolve(i)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const i=e.injector.get(th);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new xe(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(nx,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ms))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function WT(t,n){return Array.isArray(n)?n.reduce(WT,t):{...t,...n}}let th=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qe(ZT),this.zoneIsStable=qe(gk),this.componentTypes=[],this.components=[],this.isStable=qe(AT).hasPendingTasks.pipe(Qi(e=>e?mt(!1):this.zoneIsStable),id(),Vr()),this._injector=qe(pa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof ok;if(!this._injector.get(X0).done)throw!r&&function ia(t){const n=Jt(t)||Ai(t)||Er(t);return null!==n&&n.standalone}(e),new xe(405,!1);let u;u=r?e:this._injector.get(V_).resolveComponentFactory(e),this.componentTypes.push(u.componentType);const f=function Vz(t){return t.isBoundToModule}(u)?void 0:this._injector.get(eh),k=u.create(ms.NULL,[],i||u.selector,f),D=k.location.nativeElement,N=k.injector.get(NT,null);return N?.registerApplication(D),k.onDestroy(()=>{this.detachView(k.hostView),hv(this.components,k),N?.unregisterApplication(D)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;hv(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(ix,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>hv(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new xe(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hv(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const ZT=new ze("",{providedIn:"root",factory:()=>qe(ma).handleError.bind(void 0)});function $z(){const t=qe(At),n=qe(ma);return e=>t.runOutsideAngular(()=>n.handleError(e))}let Wz=(()=>{class t{constructor(){this.zone=qe(At),this.applicationRef=qe(th)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Ld=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Zz}return t})();function Zz(t){return function Kz(t,n,e){if(Is(t)&&!e){const i=jo(t.index,n);return new Tf(i,i)}return 47&t.type?new Tf(n[ci],n):null}(Ar(),Pe(),16==(16&t))}class JT{constructor(){}supports(n){return Z_(n)}create(n){return new tL(n)}}const eL=(t,n)=>n;class tL{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||eL}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){const u=!i||e&&e.currentIndex<tE(i,r,a)?e:i,f=tE(u,r,a),b=u.currentIndex;if(u===i)r--,i=i._nextRemoved;else if(e=e._next,null==u.previousIndex)r++;else{a||(a=[]);const k=f-r,D=b-r;if(k!=D){for(let U=0;U<k;U++){const K=U<a.length?a[U]:a[U]=0,re=K+U;D<=re&&re<k&&(a[U]=K+1)}a[u.previousIndex]=D-k}}f!==b&&n(u,f,b)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Z_(n))throw new xe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,a,u,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let f=0;f<this.length;f++)a=n[f],u=this._trackByFn(f,a),null!==e&&Object.is(e.trackById,u)?(i&&(e=this._verifyReinsertion(e,a,u,f)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,u,f),i=!0),e=e._next}else r=0,function RR(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,f=>{u=this._trackByFn(r,f),null!==e&&Object.is(e.trackById,u)?(i&&(e=this._verifyReinsertion(e,f,u,r)),Object.is(e.item,f)||this._addIdentityChange(e,f)):(e=this._mismatch(e,f,u,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,a,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,a,r)):n=this._addAfter(new nL(e,i),a,r),n}_verifyReinsertion(n,e,i,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?n=this._reinsertAfter(a,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,a=n._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new eE),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new eE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class nL{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iL{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class eE{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new iL,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tE(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}function iE(){return new fv([new JT])}let fv=(()=>{class t{static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:iE});constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||iE()),deps:[[t,new cs,new Fs]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new xe(901,!1)}}return t})();const lL=jT(null,"core",[]);let cL=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(th))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})(),dx=null;function Bd(){return dx}class kL{}const Hn=new ze("DocumentToken");let ux=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(CL)},providedIn:"platform"})}return t})();const SL=new ze("Location Initialized");let CL=(()=>{class t extends ux{constructor(){super(),this._doc=qe(Hn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bd().getBaseHref(this._doc)}onPopState(e){const i=Bd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Bd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function hx(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function pE(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Wc(t){return t&&"?"!==t[0]?"?"+t:t}let ih=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(fE)},providedIn:"root"})}return t})();const mE=new ze("appBaseHref");let fE=(()=>{class t extends ih{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??qe(Hn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return hx(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Wc(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const u=this.prepareExternalUrl(r+Wc(a));this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,a){const u=this.prepareExternalUrl(r+Wc(a));this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ux),Oe(mE,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),TL=(()=>{class t extends ih{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=hx(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let u=this.prepareExternalUrl(r+Wc(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,a){let u=this.prepareExternalUrl(r+Wc(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ux),Oe(mE,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})(),_v=(()=>{class t{constructor(e){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function DL(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(pE(gE(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Wc(i))}normalize(e){return t.stripTrailingSlash(function ML(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,gE(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Wc(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Wc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=Wc;static#t=this.joinWithSlash=hx;static#n=this.stripTrailingSlash=pE;static#i=this.\u0275fac=function(i){return new(i||t)(Oe(ih))};static#r=this.\u0275prov=Ze({token:t,factory:function(){return function EL(){return new _v(Oe(ih))}()},providedIn:"root"})}return t})();function gE(t){return t.replace(/\/index.html$/,"")}class _3{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let EE=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,u)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new _3(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===a?void 0:a);else if(null!==a){const f=i.get(a);i.move(f,u),ME(f,r)}});for(let r=0,a=i.length;r<a;r++){const f=i.get(r).context;f.index=r,f.count=a,f.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{ME(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(me(sl),me($c),me(fv))};static#t=this.\u0275dir=Je({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function ME(t,n){t.context.$implicit=n.item}let Mv=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new v3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){DE("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){DE("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(me(sl),me($c))};static#t=this.\u0275dir=Je({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class v3{constructor(){this.$implicit=null,this.ngIf=null}}function DE(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ln(n)}'.`)}let Wf=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})();const RE="browser";function Dv(t){return t===RE}function OE(t){return"server"===t}let Z3=(()=>{class t{static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>new K3(Oe(Hn),window)})}return t})();class K3{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function X3(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const u=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class bB extends kL{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Dx extends bB{static makeCurrent(){!function wL(t){dx||(dx=t)}(new Dx)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function xB(){return Zf=Zf||document.querySelector("base"),Zf?Zf.getAttribute("href"):null}();return null==e?null:function wB(t){Pv=Pv||document.createElement("a"),Pv.setAttribute("href",t);const n=Pv.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){Zf=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function m3(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let Pv,Zf=null,SB=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const Ix=new ze("EventManagerPlugins");let BE=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(a=>a.supports(e)),!i)throw new xe(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Ix),Oe(At))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();class VE{constructor(n){this._doc=n}}const Ax="ng-app-id";let jE=(()=>{class t{constructor(e,i,r,a={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=OE(a),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${Ax}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const a=r.get(e);return a.usage+=i,a.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,a=r?.get(i);if(a?.parentNode===e)return r.delete(i),a.removeAttribute(Ax),a;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=i,this.platformIsServer&&u.setAttribute(Ax,this.appId),u}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const a=this.styleRef,u=a.get(i)?.elements;u?u.push(r):a.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Hn),Oe(O_),Oe(Pb,8),Oe(Od))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const Px={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rx=/%COMP%/g,MB=new ze("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function UE(t,n){return n.map(e=>e.replace(Rx,t))}let Ox=(()=>{class t{constructor(e,i,r,a,u,f,b,k=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=a,this.doc=u,this.platformId=f,this.ngZone=b,this.nonce=k,this.rendererByCompId=new Map,this.platformIsServer=OE(f),this.defaultRenderer=new Fx(e,u,b,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===eo.ShadowDom&&(i={...i,encapsulation:eo.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof $E?r.applyToHost(e):r instanceof Nx&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let a=r.get(i.id);if(!a){const u=this.doc,f=this.ngZone,b=this.eventManager,k=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,N=this.platformIsServer;switch(i.encapsulation){case eo.Emulated:a=new $E(b,k,i,this.appId,D,u,f,N);break;case eo.ShadowDom:return new PB(b,k,e,i,u,f,this.nonce,N);default:a=new Nx(b,k,i,D,u,f,N)}r.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(BE),Oe(jE),Oe(O_),Oe(MB),Oe(Hn),Oe(Od),Oe(At),Oe(Pb))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();class Fx{constructor(n,e,i,r){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(Px[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(GE(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(GE(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new xe(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const a=Px[r];a?n.setAttributeNS(a,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=Px[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Ka.DashCase|Ka.Important)?n.style.setProperty(e,i,r&Ka.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Ka.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=Bd().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function GE(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class PB extends Fx{constructor(n,e,i,r,a,u,f,b){super(n,a,u,b),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const k=UE(r.id,r.styles);for(const D of k){const N=document.createElement("style");f&&N.setAttribute("nonce",f),N.textContent=D,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Nx extends Fx{constructor(n,e,i,r,a,u,f,b){super(n,a,u,f),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=b?UE(b,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class $E extends Nx{constructor(n,e,i,r,a,u,f,b){const k=r+"-"+i.id;super(n,e,i,a,u,f,b,k),this.contentAttr=function DB(t){return"_ngcontent-%COMP%".replace(Rx,t)}(k),this.hostAttr=function IB(t){return"_nghost-%COMP%".replace(Rx,t)}(k)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let RB=(()=>{class t extends VE{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Hn))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const WE=["alt","control","meta","shift"],OB={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let NB=(()=>{class t extends VE{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const a=t.parseEventName(i),u=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bd().onAndCancel(e,a.domEventName,u))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(i.pop());let u="",f=i.indexOf("code");if(f>-1&&(i.splice(f,1),u="code."),WE.forEach(k=>{const D=i.indexOf(k);D>-1&&(i.splice(D,1),u+=k+".")}),u+=a,0!=i.length||0===a.length)return null;const b={};return b.domEventName=r,b.fullKey=u,b}static matchEventFullKeyCode(e,i){let r=OB[e.key]||e.key,a="";return i.indexOf("code.")>-1&&(r=e.code,a="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),WE.forEach(u=>{u!==r&&(0,FB[u])(e)&&(a+=u+".")}),a+=r,a===i)}static eventCallback(e,i,r){return a=>{t.matchEventFullKeyCode(a,e)&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Hn))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const VB=jT(lL,"browser",[{provide:Od,useValue:RE},{provide:tk,useValue:function zB(){Dx.makeCurrent()},multi:!0},{provide:Hn,useFactory:function BB(){return function Fr(t){fr=t}(document),document},deps:[]}]),jB=new ze(""),KE=[{provide:uv,useClass:class kB{addToWindow(n){In.getAngularTestability=(i,r=!0)=>{const a=n.findTestabilityInTree(i,r);if(null==a)throw new xe(5103,!1);return a},In.getAllAngularTestabilities=()=>n.getAllTestabilities(),In.getAllAngularRootElements=()=>n.getAllRootElements(),In.frameworkStabilizers||(In.frameworkStabilizers=[]),In.frameworkStabilizers.push(i=>{const r=In.getAllAngularTestabilities();let a=r.length,u=!1;const f=function(b){u=u||b,a--,0==a&&i(u)};r.forEach(b=>{b.whenStable(f)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?Bd().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:NT,useClass:J0,deps:[At,ex,uv]},{provide:J0,useClass:J0,deps:[At,ex,uv]}],XE=[{provide:Mb,useValue:"root"},{provide:ma,useFactory:function LB(){return new ma},deps:[]},{provide:Ix,useClass:RB,multi:!0,deps:[Hn,At,Od]},{provide:Ix,useClass:NB,multi:!0,deps:[Hn]},Ox,jE,BE,{provide:wf,useExisting:Ox},{provide:class Q3{},useClass:SB,deps:[]},[]];let QE=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:O_,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(jB,12))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({providers:[...XE,...KE],imports:[Wf,cL]})}return t})(),YE=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Hn))};static#t=this.\u0275prov=Ze({token:t,factory:function(i){let r=null;return r=i?new i:function UB(){return new YE(Oe(Hn))}(),r},providedIn:"root"})}return t})();typeof window<"u"&&window;let Rv=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(i){let r=null;return r=i?new(i||t):Oe(tM),r},providedIn:"root"})}return t})(),tM=(()=>{class t extends Rv{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case oo.NONE:return i;case oo.HTML:return ui(i,"HTML")?si(i):U1(this._doc,String(i)).toString();case oo.STYLE:return ui(i,"Style")?si(i):i;case oo.SCRIPT:if(ui(i,"Script"))return si(i);throw new xe(5200,!1);case oo.URL:return ui(i,"URL")?si(i):yp(String(i));case oo.RESOURCE_URL:if(ui(i,"ResourceURL"))return si(i);throw new xe(5201,!1);default:throw new xe(5202,!1)}}bypassSecurityTrustHtml(e){return function qu(t){return new ds(t)}(e)}bypassSecurityTrustStyle(e){return function T_(t){return new zs(t)}(e)}bypassSecurityTrustScript(e){return function hf(t){return new Ls(t)}(e)}bypassSecurityTrustUrl(e){return function pf(t){return new Qa(t)}(e)}bypassSecurityTrustResourceUrl(e){return function Ja(t){return new us(t)}(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Hn))};static#t=this.\u0275prov=Ze({token:t,factory:function(i){let r=null;return r=i?new i:function qB(t){return new tM(t.get(Hn))}(Oe(ms)),r},providedIn:"root"})}return t})();function iM(t,n,e,i,r,a,u){try{var f=t[a](u),b=f.value}catch(k){return void e(k)}f.done?n(b):Promise.resolve(b).then(i,r)}function rM(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var a=t.apply(n,e);function u(b){iM(a,i,r,u,f,"next",b)}function f(b){iM(a,i,r,u,f,"throw",b)}u(void 0)})}}var Ov=td(624);class oM extends Zt{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(n){const{hasError:e,_hasValue:i,_value:r,thrownError:a,isStopped:u,_isComplete:f}=this;e?n.error(a):(u||f)&&(i&&n.next(r),n.complete())}next(n){this.isStopped||(this._value=n,this._hasValue=!0)}complete(){const{_hasValue:n,_value:e,_isComplete:i}=this;i||(this._isComplete=!0,n&&super.next(e),super.complete())}}const Fv=eu(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Zr(t,n){return Mn((e,i)=>{let r=0;e.subscribe(sn(i,a=>t.call(n,a,r++)&&i.next(a)))})}function cl(t){return t<=0?()=>zn:Mn((n,e)=>{let i=0;n.subscribe(sn(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function Nv(t){return Mn((n,e)=>{let i=!1;n.subscribe(sn(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function sM(t=ZB){return Mn((n,e)=>{let i=!1;n.subscribe(sn(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function ZB(){return new Fv}function jd(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Zr((r,a)=>t(r,a,i)):Ii,cl(1),e?Nv(n):sM(()=>new Fv))}const KB=["container"];let lM=(()=>{class t{constructor(e){this.zone=e,this.mapCreated=new oM,this.mapLoaded=new oM,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new En,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(e){this.zone.onStable.pipe(jd()).subscribe(()=>{this.createMap(e.mapOptions),this.hookEvents(e.mapEvents),this.mapEvents=e.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),e.mapOptions.terrain&&this.mapInstance.on("load",()=>{this.updateTerrain(e.mapOptions.terrain)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(e)})}updateMaxZoom(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(e)})}updateMinPitch(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(e)})}updateMaxPitch(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(e)})}updateRenderWorldCopies(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(e)})}updateScrollZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(e)})}updateMaxBounds(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(e)})}updateTerrain(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setTerrain(e)})}getTerrain(){return this.zone.runOutsideAngular(()=>this.mapInstance.getTerrain())}changeCanvasCursor(e){this.mapInstance.getCanvasContainer().style.cursor=e}queryRenderedFeatures(e,i){return this.mapInstance.queryRenderedFeatures(e,i)}panTo(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(e,i)})}move(e,i,r,a,u,f){return this.zone.runOutsideAngular(()=>{this.mapInstance[e]({...i,zoom:r??this.mapInstance.getZoom(),center:a??this.mapInstance.getCenter(),bearing:u??this.mapInstance.getBearing(),pitch:f??this.mapInstance.getPitch()})})}addLayer(e,i,r){this.zone.runOutsideAngular(()=>{Object.keys(e.layerOptions).forEach(a=>{void 0===e.layerOptions[a]&&delete e.layerOptions[a]}),this.mapInstance.addLayer(e.layerOptions,r),i&&(e.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerClick.emit(a)})}),e.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerDblClick.emit(a)})}),e.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseDown.emit(a)})}),e.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseUp.emit(a)})}),e.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseEnter.emit(a)})}),e.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseLeave.emit(a)})}),e.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseMove.emit(a)})}),e.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseOver.emit(a)})}),e.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseOut.emit(a)})}),e.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerContextMenu.emit(a)})}),e.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerTouchStart.emit(a)})}),e.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerTouchEnd.emit(a)})}),e.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerTouchCancel.emit(a)})}))})}removeLayer(e){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(e)&&this.mapInstance.removeLayer(e)})}addMarker(e){const i={offset:e.markersOptions.offset,anchor:e.markersOptions.anchor,draggable:!!e.markersOptions.draggable,rotationAlignment:e.markersOptions.rotationAlignment,pitchAlignment:e.markersOptions.pitchAlignment,clickTolerance:e.markersOptions.clickTolerance};e.markersOptions.element.childNodes.length>0&&(i.element=e.markersOptions.element);const r=new Ov.Marker(i);return e.markersEvents.markerDragStart.observers.length&&r.on("dragstart",u=>{if(u){const{target:f}=u;this.zone.run(()=>{e.markersEvents.markerDragStart.emit(f)})}}),e.markersEvents.markerDrag.observers.length&&r.on("drag",u=>{if(u){const{target:f}=u;this.zone.run(()=>{e.markersEvents.markerDrag.emit(f)})}}),e.markersEvents.markerDragEnd.observers.length&&r.on("dragend",u=>{if(u){const{target:f}=u;this.zone.run(()=>{e.markersEvents.markerDragEnd.emit(f)})}}),r.setLngLat(e.markersOptions.feature?e.markersOptions.feature.geometry.coordinates:e.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(r.addTo(this.mapInstance),r))}removeMarker(e){this.markersToRemove.push(e)}createPopup(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(e.popupOptions).forEach(a=>void 0===e.popupOptions[a]&&delete e.popupOptions[a]);const r=new Ov.Popup(e.popupOptions);return r.setDOMContent(i),e.popupEvents.popupClose.observers.length&&r.on("close",()=>{this.zone.run(()=>{e.popupEvents.popupClose.emit()})}),e.popupEvents.popupOpen.observers.length&&r.on("open",()=>{this.zone.run(()=>{e.popupEvents.popupOpen.emit()})}),r})}addPopupToMap(e,i,r=!1){return this.zone.runOutsideAngular(()=>{r&&e._listeners&&delete e._listeners.open,e.setLngLat(i),e.addTo(this.mapInstance)})}addPopupToMarker(e,i){return this.zone.runOutsideAngular(()=>{e.setPopup(i)})}removePopupFromMap(e,i=!1){i&&e._listeners&&delete e._listeners.close,this.popupsToRemove.push(e)}removePopupFromMarker(e){return this.zone.runOutsideAngular(()=>{e.setPopup(void 0)})}addControl(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(e,i)})}removeControl(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(e)})}loadAndAddImage(e,i,r){var a=this;return rM(function*(){return a.zone.runOutsideAngular(()=>new Promise((u,f)=>{a.mapInstance.loadImage(i,(b,k)=>{b?f(b):(a.addImage(e,k,r),u())})}))})()}addImage(e,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(e,i,r)})}removeImage(e){this.imageIdsToRemove.push(e)}addSource(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>void 0===i[r]&&delete i[r]),this.mapInstance.addSource(e,i)})}getSource(e){return this.mapInstance.getSource(e)}removeSource(e){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(e).forEach(i=>this.mapInstance.removeLayer(i.id)),this.mapInstance.removeSource(e)})}setAllLayerPaintProperty(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>{this.mapInstance.setPaintProperty(e,r,i[r])})})}setAllLayerLayoutProperty(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>{this.mapInstance.setLayoutProperty(e,r,i[r])})})}setLayerFilter(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(e,i)})}setLayerBefore(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(e,i)})}setLayerZoomRange(e,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(e,i||0,r||20)})}fitBounds(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(e,i)})}fitScreenCoordinates(e,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(e[0],e[1],i,r)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(e){At.assertNotInAngularZone(),Object.keys(e).forEach(r=>{void 0===e[r]&&delete e[r]}),this.mapInstance=new Ov.Map(e),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(e.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const e of this.markersToRemove)e.remove();this.markersToRemove=[]}removePopups(){for(const e of this.popupsToRemove)e.remove();this.popupsToRemove=[]}removeImages(){for(const e of this.imageIdsToRemove)this.mapInstance.removeImage(e);this.imageIdsToRemove=[]}findLayersBySourceId(e){const i=this.mapInstance.getStyle().layers;return null==i?[]:i.filter(r=>"source"in r&&r.source===e)}hookEvents(e){this.mapInstance.on("load",i=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{e.mapLoad.emit(i.target)})}),e.mapResize.observers.length&&this.mapInstance.on("resize",i=>this.zone.run(()=>{e.mapResize.emit(i)})),e.mapRemove.observers.length&&this.mapInstance.on("remove",i=>this.zone.run(()=>{e.mapRemove.emit(i)})),e.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",i=>this.zone.run(()=>{e.mapMouseDown.emit(i)})),e.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",i=>this.zone.run(()=>{e.mapMouseUp.emit(i)})),e.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",i=>this.zone.run(()=>{e.mapMouseMove.emit(i)})),e.mapClick.observers.length&&this.mapInstance.on("click",i=>this.zone.run(()=>{e.mapClick.emit(i)})),e.mapDblClick.observers.length&&this.mapInstance.on("dblclick",i=>this.zone.run(()=>{e.mapDblClick.emit(i)})),e.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",i=>this.zone.run(()=>{e.mapMouseOver.emit(i)})),e.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",i=>this.zone.run(()=>{e.mapMouseOut.emit(i)})),e.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",i=>this.zone.run(()=>{e.mapContextMenu.emit(i)})),e.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",i=>this.zone.run(()=>{e.mapTouchStart.emit(i)})),e.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",i=>this.zone.run(()=>{e.mapTouchEnd.emit(i)})),e.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",i=>this.zone.run(()=>{e.mapTouchMove.emit(i)})),e.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",i=>this.zone.run(()=>{e.mapTouchCancel.emit(i)})),e.mapWheel.observers.length&&this.mapInstance.on("wheel",i=>this.zone.run(()=>{e.mapWheel.emit(i)})),e.moveStart.observers.length&&this.mapInstance.on("movestart",i=>this.zone.run(()=>e.moveStart.emit(i))),e.move.observers.length&&this.mapInstance.on("move",i=>this.zone.run(()=>e.move.emit(i))),e.moveEnd.observers.length&&this.mapInstance.on("moveend",i=>this.zone.run(()=>e.moveEnd.emit(i))),e.mapDragStart.observers.length&&this.mapInstance.on("dragstart",i=>this.zone.run(()=>{e.mapDragStart.emit(i)})),e.mapDrag.observers.length&&this.mapInstance.on("drag",i=>this.zone.run(()=>{e.mapDrag.emit(i)})),e.mapDragEnd.observers.length&&this.mapInstance.on("dragend",i=>this.zone.run(()=>{e.mapDragEnd.emit(i)})),e.zoomStart.observers.length&&this.mapInstance.on("zoomstart",i=>this.zone.run(()=>e.zoomStart.emit(i))),e.zoomEvt.observers.length&&this.mapInstance.on("zoom",i=>this.zone.run(()=>e.zoomEvt.emit(i))),e.zoomEnd.observers.length&&this.mapInstance.on("zoomend",i=>this.zone.run(()=>e.zoomEnd.emit(i))),e.rotateStart.observers.length&&this.mapInstance.on("rotatestart",i=>this.zone.run(()=>e.rotateStart.emit(i))),e.rotate.observers.length&&this.mapInstance.on("rotate",i=>this.zone.run(()=>e.rotate.emit(i))),e.rotateEnd.observers.length&&this.mapInstance.on("rotateend",i=>this.zone.run(()=>e.rotateEnd.emit(i))),e.pitchStart.observers.length&&this.mapInstance.on("pitchstart",i=>this.zone.run(()=>e.pitchStart.emit(i))),e.pitchEvt.observers.length&&this.mapInstance.on("pitch",i=>this.zone.run(()=>e.pitchEvt.emit(i))),e.pitchEnd.observers.length&&this.mapInstance.on("pitchend",i=>this.zone.run(()=>e.pitchEnd.emit(i))),e.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",i=>this.zone.run(()=>e.boxZoomStart.emit(i))),e.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",i=>this.zone.run(()=>e.boxZoomEnd.emit(i))),e.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",i=>this.zone.run(()=>e.boxZoomCancel.emit(i))),e.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",i=>this.zone.run(()=>e.webGlContextLost.emit(i))),e.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",i=>this.zone.run(()=>e.webGlContextRestored.emit(i))),e.render.observers.length&&this.mapInstance.on("render",i=>this.zone.run(()=>e.render.emit(i))),e.mapError.observers.length&&this.mapInstance.on("error",i=>this.zone.run(()=>{e.mapError.emit(i)})),e.data.observers.length&&this.mapInstance.on("data",i=>this.zone.run(()=>e.data.emit(i))),e.styleData.observers.length&&this.mapInstance.on("styledata",i=>this.zone.run(()=>e.styleData.emit(i))),e.sourceData.observers.length&&this.mapInstance.on("sourcedata",i=>this.zone.run(()=>e.sourceData.emit(i))),e.dataLoading.observers.length&&this.mapInstance.on("dataloading",i=>this.zone.run(()=>e.dataLoading.emit(i))),e.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",i=>this.zone.run(()=>e.styleDataLoading.emit(i))),e.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",i=>this.zone.run(()=>e.sourceDataLoading.emit(i))),e.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",i=>this.zone.run(()=>e.styleImageMissing.emit(i))),e.idle.observers.length&&this.mapInstance.on("idle",i=>this.zone.run(()=>e.idle.emit(i)))}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(At))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})(),e5=(()=>{class t{get mapInstance(){return this.mapService.mapInstance}constructor(e){this.mapService=e,this.movingMethod="flyTo",this.mapResize=new et,this.mapRemove=new et,this.mapMouseDown=new et,this.mapMouseUp=new et,this.mapMouseMove=new et,this.mapClick=new et,this.mapDblClick=new et,this.mapMouseOver=new et,this.mapMouseOut=new et,this.mapContextMenu=new et,this.mapTouchStart=new et,this.mapTouchEnd=new et,this.mapTouchMove=new et,this.mapTouchCancel=new et,this.mapWheel=new et,this.moveStart=new et,this.move=new et,this.moveEnd=new et,this.mapDragStart=new et,this.mapDrag=new et,this.mapDragEnd=new et,this.zoomStart=new et,this.zoomEvt=new et,this.zoomEnd=new et,this.rotateStart=new et,this.rotate=new et,this.rotateEnd=new et,this.pitchStart=new et,this.pitchEvt=new et,this.pitchEnd=new et,this.boxZoomStart=new et,this.boxZoomEnd=new et,this.boxZoomCancel=new et,this.webGlContextLost=new et,this.webGlContextRestored=new et,this.mapLoad=new et,this.idle=new et,this.render=new et,this.mapError=new et,this.data=new et,this.styleData=new et,this.sourceData=new et,this.dataLoading=new et,this.styleDataLoading=new et,this.sourceDataLoading=new et,this.styleImageMissing=new et}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,terrain:this.terrain},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(e){var i=this;return rM(function*(){yield i.mapService.mapCreated$.toPromise(),e.cursorStyle&&!e.cursorStyle.isFirstChange()&&i.mapService.changeCanvasCursor(e.cursorStyle.currentValue),e.minZoom&&!e.minZoom.isFirstChange()&&i.mapService.updateMinZoom(e.minZoom.currentValue),e.maxZoom&&!e.maxZoom.isFirstChange()&&i.mapService.updateMaxZoom(e.maxZoom.currentValue),e.minPitch&&!e.minPitch.isFirstChange()&&i.mapService.updateMinPitch(e.minPitch.currentValue),e.maxPitch&&!e.maxPitch.isFirstChange()&&i.mapService.updateMaxPitch(e.maxPitch.currentValue),e.renderWorldCopies&&!e.renderWorldCopies.isFirstChange()&&i.mapService.updateRenderWorldCopies(e.renderWorldCopies.currentValue),e.scrollZoom&&!e.scrollZoom.isFirstChange()&&i.mapService.updateScrollZoom(e.scrollZoom.currentValue),e.dragRotate&&!e.dragRotate.isFirstChange()&&i.mapService.updateDragRotate(e.dragRotate.currentValue),e.touchPitch&&!e.touchPitch.isFirstChange()&&i.mapService.updateTouchPitch(e.touchPitch.currentValue),e.touchZoomRotate&&!e.touchZoomRotate.isFirstChange()&&i.mapService.updateTouchZoomRotate(e.touchZoomRotate.currentValue),e.doubleClickZoom&&!e.doubleClickZoom.isFirstChange()&&i.mapService.updateDoubleClickZoom(e.doubleClickZoom.currentValue),e.keyboard&&!e.keyboard.isFirstChange()&&i.mapService.updateKeyboard(e.keyboard.currentValue),e.dragPan&&!e.dragPan.isFirstChange()&&i.mapService.updateDragPan(e.dragPan.currentValue),e.boxZoom&&!e.boxZoom.isFirstChange()&&i.mapService.updateBoxZoom(e.boxZoom.currentValue),e.style&&!e.style.isFirstChange()&&i.mapService.updateStyle(e.style.currentValue),e.maxBounds&&!e.maxBounds.isFirstChange()&&i.mapService.updateMaxBounds(e.maxBounds.currentValue),e.fitBounds&&e.fitBounds.currentValue&&!e.fitBounds.isFirstChange()&&i.mapService.fitBounds(e.fitBounds.currentValue,i.fitBoundsOptions),e.fitScreenCoordinates&&e.fitScreenCoordinates.currentValue&&((i.center||i.zoom||i.pitch||i.fitBounds)&&e.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-maplibre-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),i.mapService.fitScreenCoordinates(e.fitScreenCoordinates.currentValue,i.bearing?i.bearing[0]:0,i.movingOptions)),!i.centerWithPanTo||!e.center||e.center.isFirstChange()||e.zoom||e.bearing||e.pitch?(e.center&&!e.center.isFirstChange()||e.zoom&&!e.zoom.isFirstChange()||e.bearing&&!e.bearing.isFirstChange()&&!e.fitScreenCoordinates||e.pitch&&!e.pitch.isFirstChange())&&i.mapService.move(i.movingMethod,i.movingOptions,e.zoom&&i.zoom?i.zoom[0]:void 0,e.center?i.center:void 0,e.bearing&&i.bearing?i.bearing[0]:void 0,e.pitch&&i.pitch?i.pitch[0]:void 0):i.mapService.panTo(i.center,i.panToOptions),e.terrain&&!e.terrain.isFirstChange()&&i.mapService.updateTerrain(e.terrain.currentValue)})()}static#e=this.\u0275fac=function(i){return new(i||t)(me(lM))};static#t=this.\u0275cmp=ri({type:t,selectors:[["mgl-map"]],viewQuery:function(i,r){if(1&i&&Xl(KB,7),2&i){let a;Gi(a=$i())&&(r.mapContainer=a.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",terrain:"terrain",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[jn([lM]),vo],decls:2,vars:0,consts:[["container",""]],template:function(i,r){1&i&&vr(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}return t})(),t5=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Wf]})}return t})();const{isArray:r5}=Array,{getPrototypeOf:o5,prototype:s5,keys:a5}=Object;function cM(t){if(1===t.length){const n=t[0];if(r5(n))return{args:n,keys:null};if(function l5(t){return t&&"object"==typeof t&&o5(t)===s5}(n)){const e=a5(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:c5}=Array;function Lx(t){return Dt(n=>function d5(t,n){return c5(n)?t(...n):t(n)}(t,n))}function dM(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function zv(...t){const n=on(t),e=bh(t),{args:i,keys:r}=cM(t);if(0===i.length)return vt([],n);const a=new bn(function u5(t,n,e=Ii){return i=>{uM(n,()=>{const{length:r}=t,a=new Array(r);let u=r,f=r;for(let b=0;b<r;b++)uM(n,()=>{const k=vt(t[b],n);let D=!1;k.subscribe(sn(i,N=>{a[b]=N,D||(D=!0,f--),f||i.next(e(a.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,n,r?u=>dM(r,u):Ii));return e?a.pipe(Lx(e)):a}function uM(t,n,e){t?It(e,t,n):n()}function Lv(...t){return function h5(){return Un(1)}()(vt(t,on(t)))}function hM(t){return new bn(n=>{Xe(t()).subscribe(n)})}function Wp(t,n){const e=nn(t)?t:()=>t,i=r=>r.error(e());return new bn(n?r=>n.schedule(i,0,r):i)}function Bx(){return Mn((t,n)=>{let e=null;t._refCount++;const i=sn(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class pM extends bn{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Sa(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new En;const e=this.getSubject();n.add(this.source.subscribe(sn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=En.EMPTY)}return n}refCount(){return Bx()(this)}}function Bv(...t){const n=on(t);return Mn((e,i)=>{(n?Lv(t,e,n):Lv(t,e)).subscribe(i)})}function qp(t,n){return nn(n)?Ot(t,n,1):Ot(t,1)}function br(t,n,e){const i=nn(t)||n||e?{next:t,error:n,complete:e}:t;return i?Mn((r,a)=>{var u;null===(u=i.subscribe)||void 0===u||u.call(i);let f=!0;r.subscribe(sn(a,b=>{var k;null===(k=i.next)||void 0===k||k.call(i,b),a.next(b)},()=>{var b;f=!1,null===(b=i.complete)||void 0===b||b.call(i),a.complete()},b=>{var k;f=!1,null===(k=i.error)||void 0===k||k.call(i,b),a.error(b)},()=>{var b,k;f&&(null===(b=i.unsubscribe)||void 0===b||b.call(i)),null===(k=i.finalize)||void 0===k||k.call(i)}))}):Ii}function Hd(t){return Mn((n,e)=>{let a,i=null,r=!1;i=n.subscribe(sn(e,void 0,void 0,u=>{a=Xe(t(u,Hd(t)(n))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function Vx(t){return t<=0?()=>zn:Mn((n,e)=>{let i=[];n.subscribe(sn(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function jx(t){return Dt(()=>t)}function Vv(t){return Mn((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function Zo(t){return Mn((n,e)=>{Xe(t).subscribe(sn(e,()=>e.complete(),qs)),!e.closed&&n.subscribe(e)})}const qt="primary",Kf=Symbol("RouteTitle");class g5{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Zp(t){return new g5(t)}function _5(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let a=0;a<i.length;a++){const u=i[a],f=t[a];if(u.startsWith(":"))r[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Yl(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!mM(t[r],n[r]))return!1;return!0}function mM(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,a)=>i[a]===r)}return t===n}function fM(t){return t.length>0?t[t.length-1]:null}function Ud(t){return function n5(t){return!!t&&(t instanceof bn||nn(t.lift)&&nn(t.subscribe))}(t)?t:Pf(t)?vt(Promise.resolve(t)):mt(t)}const y5={exact:function vM(t,n,e){if(!rh(t.segments,n.segments)||!jv(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!vM(t.children[i],n.children[i],e))return!1;return!0},subset:yM},gM={exact:function b5(t,n){return Yl(t,n)},subset:function x5(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>mM(t[e],n[e]))},ignored:()=>!0};function _M(t,n,e){return y5[e.paths](t.root,n.root,e.matrixParams)&&gM[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function yM(t,n,e){return bM(t,n,n.segments,e)}function bM(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!rh(r,e)||n.hasChildren()||!jv(r,e,i))}if(t.segments.length===e.length){if(!rh(t.segments,e)||!jv(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!yM(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(rh(t.segments,r)&&jv(t.segments,r,i)&&t.children[qt])&&bM(t.children[qt],n,a,i)}}function jv(t,n,e){return n.every((i,r)=>gM[e](t[r].parameters,i.parameters))}class Kp{constructor(n=new qn([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zp(this.queryParams)),this._queryParamMap}toString(){return S5.serialize(this)}}class qn{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hv(this)}}class Xf{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Zp(this.parameters)),this._parameterMap}toString(){return kM(this)}}function rh(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let Qf=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return new Hx},providedIn:"root"})}return t})();class Hx{parse(n){const e=new F5(n);return new Kp(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Yf(n.root,!0)}`,i=function E5(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${Uv(e)}=${Uv(r)}`).join("&"):`${Uv(e)}=${Uv(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function C5(t){return encodeURI(t)}(n.fragment)}`:""}`}}const S5=new Hx;function Hv(t){return t.segments.map(n=>kM(n)).join("/")}function Yf(t,n){if(!t.hasChildren())return Hv(t);if(n){const e=t.children[qt]?Yf(t.children[qt],!1):"",i=[];return Object.entries(t.children).forEach(([r,a])=>{r!==qt&&i.push(`${r}:${Yf(a,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function k5(t,n){let e=[];return Object.entries(t.children).forEach(([i,r])=>{i===qt&&(e=e.concat(n(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==qt&&(e=e.concat(n(r,i)))}),e}(t,(i,r)=>r===qt?[Yf(t.children[qt],!1)]:[`${r}:${Yf(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[qt]?`${Hv(t)}/${e[0]}`:`${Hv(t)}/(${e.join("//")})`}}function xM(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uv(t){return xM(t).replace(/%3B/gi,";")}function Ux(t){return xM(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gv(t){return decodeURIComponent(t)}function wM(t){return Gv(t.replace(/\+/g,"%20"))}function kM(t){return`${Ux(t.path)}${function T5(t){return Object.keys(t).map(n=>`;${Ux(n)}=${Ux(t[n])}`).join("")}(t.parameters)}`}const M5=/^[^\/()?;#]+/;function Gx(t){const n=t.match(M5);return n?n[0]:""}const D5=/^[^\/()?;=#]+/,A5=/^[^=?&#]+/,R5=/^[^&#]+/;class F5{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qn([],{}):new qn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[qt]=new qn(n,e)),i}parseSegment(){const n=Gx(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new xe(4009,!1);return this.capture(n),new Xf(Gv(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function I5(t){const n=t.match(D5);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Gx(this.remaining);r&&(i=r,this.capture(i))}n[Gv(e)]=Gv(i)}parseQueryParam(n){const e=function P5(t){const n=t.match(A5);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const u=function O5(t){const n=t.match(R5);return n?n[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=wM(e),a=wM(i);if(n.hasOwnProperty(r)){let u=n[r];Array.isArray(u)||(u=[u],n[r]=u),u.push(a)}else n[r]=a}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Gx(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new xe(4010,!1);let a;i.indexOf(":")>-1?(a=i.slice(0,i.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=qt);const u=this.parseChildren();e[a]=1===Object.keys(u).length?u[qt]:new qn([],u),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new xe(4011,!1)}}function SM(t){return t.segments.length>0?new qn([],{[qt]:t}):t}function CM(t){const n={};for(const i of Object.keys(t.children)){const a=CM(t.children[i]);if(i===qt&&0===a.segments.length&&a.hasChildren())for(const[u,f]of Object.entries(a.children))n[u]=f;else(a.segments.length>0||a.hasChildren())&&(n[i]=a)}return function N5(t){if(1===t.numberOfChildren&&t.children[qt]){const n=t.children[qt];return new qn(t.segments.concat(n.segments),n.children)}return t}(new qn(t.segments,n))}function oh(t){return t instanceof Kp}function TM(t){let n;const r=SM(function e(a){const u={};for(const b of a.children){const k=e(b);u[b.outlet]=k}const f=new qn(a.url,u);return a===t&&(n=f),f}(t.root));return n??r}function EM(t,n,e,i){let r=t;for(;r.parent;)r=r.parent;if(0===n.length)return $x(r,r,r,e,i);const a=function L5(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new DM(!0,0,t);let n=0,e=!1;const i=t.reduce((r,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([b,k])=>{f[b]="string"==typeof k?k.split("/"):k}),[...r,{outlets:f}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===u?(a.split("/").forEach((f,b)=>{0==b&&"."===f||(0==b&&""===f?e=!0:".."===f?n++:""!=f&&r.push(f))}),r):[...r,a]},[]);return new DM(e,n,i)}(n);if(a.toRoot())return $x(r,r,new qn([],{}),e,i);const u=function B5(t,n,e){if(t.isAbsolute)return new Wv(n,!0,0);if(!e)return new Wv(n,!1,NaN);if(null===e.parent)return new Wv(e,!0,0);const i=$v(t.commands[0])?0:1;return function V5(t,n,e){let i=t,r=n,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new xe(4005,!1);r=i.segments.length}return new Wv(i,!1,r-a)}(e,e.segments.length-1+i,t.numberOfDoubleDots)}(a,r,t),f=u.processChildren?eg(u.segmentGroup,u.index,a.commands):IM(u.segmentGroup,u.index,a.commands);return $x(r,u.segmentGroup,f,e,i)}function $v(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Jf(t){return"object"==typeof t&&null!=t&&t.outlets}function $x(t,n,e,i,r){let u,a={};i&&Object.entries(i).forEach(([b,k])=>{a[b]=Array.isArray(k)?k.map(D=>`${D}`):`${k}`}),u=t===n?e:MM(t,n,e);const f=SM(CM(u));return new Kp(f,a,r)}function MM(t,n,e){const i={};return Object.entries(t.children).forEach(([r,a])=>{i[r]=a===n?e:MM(a,n,e)}),new qn(t.segments,i)}class DM{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&$v(i[0]))throw new xe(4003,!1);const r=i.find(Jf);if(r&&r!==fM(i))throw new xe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wv{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function IM(t,n,e){if(t||(t=new qn([],{})),0===t.segments.length&&t.hasChildren())return eg(t,n,e);const i=function H5(t,n,e){let i=0,r=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return a;const u=t.segments[r],f=e[i];if(Jf(f))break;const b=`${f}`,k=i<e.length-1?e[i+1]:null;if(r>0&&void 0===b)break;if(b&&k&&"object"==typeof k&&void 0===k.outlets){if(!PM(b,k,u))return a;i+=2}else{if(!PM(b,{},u))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const a=new qn(t.segments.slice(0,i.pathIndex),{});return a.children[qt]=new qn(t.segments.slice(i.pathIndex),t.children),eg(a,0,r)}return i.match&&0===r.length?new qn(t.segments,{}):i.match&&!t.hasChildren()?Wx(t,n,e):i.match?eg(t,0,r):Wx(t,n,e)}function eg(t,n,e){if(0===e.length)return new qn(t.segments,{});{const i=function j5(t){return Jf(t[0])?t[0].outlets:{[qt]:t}}(e),r={};if(Object.keys(i).some(a=>a!==qt)&&t.children[qt]&&1===t.numberOfChildren&&0===t.children[qt].segments.length){const a=eg(t.children[qt],n,e);return new qn(t.segments,a.children)}return Object.entries(i).forEach(([a,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(r[a]=IM(t.children[a],n,u))}),Object.entries(t.children).forEach(([a,u])=>{void 0===i[a]&&(r[a]=u)}),new qn(t.segments,r)}}function Wx(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const a=e[r];if(Jf(a)){const b=U5(a.outlets);return new qn(i,b)}if(0===r&&$v(e[0])){i.push(new Xf(t.segments[n].path,AM(e[0]))),r++;continue}const u=Jf(a)?a.outlets[qt]:`${a}`,f=r<e.length-1?e[r+1]:null;u&&f&&$v(f)?(i.push(new Xf(u,AM(f))),r+=2):(i.push(new Xf(u,{})),r++)}return new qn(i,{})}function U5(t){const n={};return Object.entries(t).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[e]=Wx(new qn([],{}),0,i))}),n}function AM(t){const n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function PM(t,n,e){return t==e.path&&Yl(n,e.parameters)}const tg="imperative";class Jl{constructor(n,e){this.id=n,this.url=e}}class qv extends Jl{constructor(n,e,i="imperative",r=null){super(n,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gd extends Jl{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ng extends Jl{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xp extends Jl{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=16}}class Zv extends Jl{constructor(n,e,i,r){super(n,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class RM extends Jl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G5 extends Jl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $5 extends Jl{constructor(n,e,i,r,a){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class W5 extends Jl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class q5 extends Jl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z5{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class K5{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class X5{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q5{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y5{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J5{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OM{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class qx{}class Zx{constructor(n){this.url=n}}class e4{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ig,this.attachRef=null}}let ig=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new e4,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class FM{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Kx(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=Kx(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Xx(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return Xx(n,this._root).map(e=>e.value)}}function Kx(t,n){if(t===n.value)return n;for(const e of n.children){const i=Kx(t,e);if(i)return i}return null}function Xx(t,n){if(t===n.value)return[n];for(const e of n.children){const i=Xx(t,e);if(i.length)return i.unshift(n),i}return[]}class Kc{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Qp(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class NM extends FM{constructor(n,e){super(n),this.snapshot=e,Qx(this,n)}toString(){return this.snapshot.toString()}}function zM(t,n){const e=function t4(t,n){const u=new Kv([],{},{},"",{},qt,n,null,{});return new BM("",new Kc(u,[]))}(0,n),i=new tn([new Xf("",{})]),r=new tn({}),a=new tn({}),u=new tn({}),f=new tn(""),b=new sh(i,r,u,f,a,qt,n,e.root);return b.snapshot=e.root,new NM(new Kc(b,[]),e)}class sh{constructor(n,e,i,r,a,u,f,b){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=a,this.outlet=u,this.component=f,this._futureSnapshot=b,this.title=this.dataSubject?.pipe(Dt(k=>k[Kf]))??mt(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Dt(n=>Zp(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Dt(n=>Zp(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function LM(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function n4(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Kv{get title(){return this.data?.[Kf]}constructor(n,e,i,r,a,u,f,b,k){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=u,this.component=f,this.routeConfig=b,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class BM extends FM{constructor(n,e){super(e),this.url=n,Qx(this,e)}toString(){return VM(this._root)}}function Qx(t,n){n.value._routerState=t,n.children.forEach(e=>Qx(t,e))}function VM(t){const n=t.children.length>0?` { ${t.children.map(VM).join(", ")} } `:"";return`${t.value}${n}`}function Yx(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Yl(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),Yl(n.params,e.params)||t.paramsSubject.next(e.params),function v5(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Yl(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.urlSubject.next(e.url),Yl(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Jx(t,n){const e=Yl(t.params,n.params)&&function w5(t,n){return rh(t,n)&&t.every((e,i)=>Yl(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Jx(t.parent,n.parent))}let ew=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=qe(ig),this.location=qe(sl),this.changeDetector=qe(Ld),this.environmentInjector=qe(pa),this.inputBinder=qe(Xv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xe(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new xe(4013,!1);this._activatedRoute=e;const r=this.location,u=e.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,b=new i4(e,f,r.injector);this.activated=r.createComponent(u,{index:r.length,injector:b,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vo]})}return t})();class i4{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===sh?this.route:n===ig?this.childContexts:this.parent.get(n,e)}}const Xv=new ze("");let jM=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=zv([i.queryParams,i.params,i.data]).pipe(Qi(([a,u,f],b)=>(f={...a,...u,...f},0===b?mt(f):Promise.resolve(f)))).subscribe(a=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const u=function xL(t){const n=Jt(t);if(!n)return null;const e=new Ef(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(u)for(const{templateName:f}of u.inputs)e.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();function rg(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function o4(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return rg(t,i,r);return rg(t,i)})}(t,n,e);return new Kc(i,r)}{if(t.shouldAttach(n.value)){const a=t.retrieve(n.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=n.value,u.children=n.children.map(f=>rg(t,f)),u}}const i=function s4(t){return new sh(new tn(t.url),new tn(t.params),new tn(t.queryParams),new tn(t.fragment),new tn(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(a=>rg(t,a));return new Kc(i,r)}}const tw="ngNavigationCancelingError";function HM(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=oh(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=UM(!1,0,n);return r.url=e,r.navigationBehaviorOptions=i,r}function UM(t,n,e){const i=new Error("NavigationCancelingError: "+(t||""));return i[tw]=!0,i.cancellationCode=n,e&&(i.url=e),i}function GM(t){return t&&t[tw]}let $M=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=ri({type:t,selectors:[["ng-component"]],standalone:!0,features:[HC],decls:1,vars:0,template:function(i,r){1&i&&vr(0,"router-outlet")},dependencies:[ew],encapsulation:2})}return t})();function nw(t){const n=t.children&&t.children.map(nw),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==qt&&(e.component=$M),e}function dl(t){return t.outlet||qt}function og(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class m4{constructor(n,e,i,r,a){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=a}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Yx(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=Qp(e);n.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,r[u],i),delete r[u]}),Object.values(r).forEach(a=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(r===a)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(n,e,u.children)}else this.deactivateChildRoutes(n,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=Qp(n);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],r);if(i&&i.outlet){const u=i.outlet.detach(),f=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:u,route:n,contexts:f})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=Qp(n);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){const r=Qp(e);n.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new J5(a.value.snapshot))}),n.children.length&&this.forwardEvent(new Q5(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(Yx(r),r===a)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,u.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const f=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),Yx(f.route.value),this.activateChildRoutes(n,null,u.children)}else{const f=og(r.snapshot);u.attachRef=null,u.route=r,u.injector=f,u.outlet&&u.outlet.activateWith(r,u.injector),this.activateChildRoutes(n,null,u.children)}}else this.activateChildRoutes(n,null,i)}}class WM{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Qv{constructor(n,e){this.component=n,this.route=e}}function f4(t,n,e){const i=t._root;return sg(i,n?n._root:null,e,[i.value])}function Yp(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function Mh(t){return null!==mc(t)}(t)?n.get(t):t:i}function sg(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=Qp(n);return t.children.forEach(u=>{(function _4(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,u=n?n.value:null,f=e?e.getContext(t.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const b=function v4(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!rh(t.url,n.url);case"pathParamsOrQueryParamsChange":return!rh(t.url,n.url)||!Yl(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jx(t,n)||!Yl(t.queryParams,n.queryParams);default:return!Jx(t,n)}}(u,a,a.routeConfig.runGuardsAndResolvers);b?r.canActivateChecks.push(new WM(i)):(a.data=u.data,a._resolvedData=u._resolvedData),sg(t,n,a.component?f?f.children:null:e,i,r),b&&f&&f.outlet&&f.outlet.isActivated&&r.canDeactivateChecks.push(new Qv(f.outlet.component,u))}else u&&ag(n,f,r),r.canActivateChecks.push(new WM(i)),sg(t,null,a.component?f?f.children:null:e,i,r)})(u,a[u.value.outlet],e,i.concat([u.value]),r),delete a[u.value.outlet]}),Object.entries(a).forEach(([u,f])=>ag(f,e.getContext(u),r)),r}function ag(t,n,e){const i=Qp(t),r=t.value;Object.entries(i).forEach(([a,u])=>{ag(u,r.component?n?n.children.getContext(a):null:n,e)}),e.canDeactivateChecks.push(new Qv(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}function lg(t){return"function"==typeof t}function qM(t){return t instanceof Fv||"EmptyError"===t?.name}const Yv=Symbol("INITIAL_VALUE");function Jp(){return Qi(t=>zv(t.map(n=>n.pipe(cl(1),Bv(Yv)))).pipe(Dt(n=>{for(const e of n)if(!0!==e){if(e===Yv)return Yv;if(!1===e||e instanceof Kp)return e}return!0}),Zr(n=>n!==Yv),cl(1)))}function ZM(t){return function wa(...t){return gl(t)}(br(n=>{if(oh(n))throw HM(0,n)}),Dt(n=>!0===n))}class Jv{constructor(n){this.segmentGroup=n||null}}class KM{constructor(n){this.urlTree=n}}function em(t){return Wp(new Jv(t))}function XM(t){return Wp(new KM(t))}class L4{constructor(n,e){this.urlSerializer=n,this.urlTree=e}noMatchError(n){return new xe(4002,!1)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return mt(i);if(r.numberOfChildren>1||!r.children[qt])return Wp(new xe(4e3,!1));r=r.children[qt]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreateUrlTree(n,e,i,r){const a=this.createSegmentGroup(n,e.root,i,r);return new Kp(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Object.entries(n).forEach(([r,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);i[r]=e[f]}else i[r]=a}),i}createSegmentGroup(n,e,i,r){const a=this.createSegments(n,e.segments,i,r);let u={};return Object.entries(e.children).forEach(([f,b])=>{u[f]=this.createSegmentGroup(n,b,i,r)}),new qn(a,u)}createSegments(n,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,r):this.findOrReturn(a,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new xe(4001,!1);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}const iw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B4(t,n,e,i,r){const a=rw(t,n,e);return a.matched?(i=function l4(t,n){return t.providers&&!t._injector&&(t._injector=F0(t.providers,n,`Route: ${t.path}`)),t._injector??n}(n,i),function F4(t,n,e,i){const r=n.canMatch;return r&&0!==r.length?mt(r.map(u=>{const f=Yp(u,t);return Ud(function S4(t){return t&&lg(t.canMatch)}(f)?f.canMatch(n,e):t.runInContext(()=>f(n,e)))})).pipe(Jp(),ZM()):mt(!0)}(i,n,e).pipe(Dt(u=>!0===u?a:{...iw}))):mt(a)}function rw(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...iw}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(n.matcher||_5)(e,t,n);if(!r)return{...iw};const a={};Object.entries(r.posParams??{}).forEach(([f,b])=>{a[f]=b.path});const u=r.consumed.length>0?{...a,...r.consumed[r.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:u,positionalParamSegments:r.posParams??{}}}function QM(t,n,e,i){return e.length>0&&function H4(t,n,e){return e.some(i=>ey(t,n,i)&&dl(i)!==qt)}(t,e,i)?{segmentGroup:new qn(n,j4(i,new qn(e,t.children))),slicedSegments:[]}:0===e.length&&function U4(t,n,e){return e.some(i=>ey(t,n,i))}(t,e,i)?{segmentGroup:new qn(t.segments,V4(t,0,e,i,t.children)),slicedSegments:e}:{segmentGroup:new qn(t.segments,t.children),slicedSegments:e}}function V4(t,n,e,i,r){const a={};for(const u of i)if(ey(t,e,u)&&!r[dl(u)]){const f=new qn([],{});a[dl(u)]=f}return{...r,...a}}function j4(t,n){const e={};e[qt]=n;for(const i of t)if(""===i.path&&dl(i)!==qt){const r=new qn([],{});e[dl(i)]=r}return e}function ey(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class q4{constructor(n,e,i,r,a,u,f){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=a,this.paramsInheritanceStrategy=u,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new L4(this.urlSerializer,this.urlTree)}noMatchError(n){return new xe(4002,!1)}recognize(){const n=QM(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,qt).pipe(Hd(e=>{if(e instanceof KM)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof Jv?this.noMatchError(e):e}),Dt(e=>{const i=new Kv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,{}),r=new Kc(i,e),a=new BM("",r),u=function z5(t,n,e=null,i=null){return EM(TM(t),n,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(a._root),{state:a,tree:u}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,qt).pipe(Hd(i=>{throw i instanceof Jv?this.noMatchError(i):i}))}inheritParamsAndData(n){const e=n.value,i=LM(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i):this.processSegment(n,e,i,i.segments,r,!0)}processChildren(n,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return vt(r).pipe(qp(a=>{const u=i.children[a],f=function h4(t,n){const e=t.filter(i=>dl(i)===n);return e.push(...t.filter(i=>dl(i)!==n)),e}(e,a);return this.processSegmentGroup(n,f,u,a)}),function m5(t,n){return Mn(function p5(t,n,e,i,r){return(a,u)=>{let f=e,b=n,k=0;a.subscribe(sn(u,D=>{const N=k++;b=f?t(b,D,N):(f=!0,D),i&&u.next(b)},r&&(()=>{f&&u.next(b),u.complete()})))}}(t,n,arguments.length>=2,!0))}((a,u)=>(a.push(...u),a)),Nv(null),function f5(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Zr((r,a)=>t(r,a,i)):Ii,Vx(1),e?Nv(n):sM(()=>new Fv))}(),Ot(a=>{if(null===a)return em(i);const u=YM(a);return function Z4(t){t.sort((n,e)=>n.value.outlet===qt?-1:e.value.outlet===qt?1:n.value.outlet.localeCompare(e.value.outlet))}(u),mt(u)}))}processSegment(n,e,i,r,a,u){return vt(e).pipe(qp(f=>this.processSegmentAgainstRoute(f._injector??n,e,f,i,r,a,u).pipe(Hd(b=>{if(b instanceof Jv)return mt(null);throw b}))),jd(f=>!!f),Hd(f=>{if(qM(f))return function $4(t,n,e){return 0===n.length&&!t.children[e]}(i,r,a)?mt([]):em(i);throw f}))}processSegmentAgainstRoute(n,e,i,r,a,u,f){return function G4(t,n,e,i){return!!(dl(t)===i||i!==qt&&ey(n,e,t))&&("**"===t.path||rw(n,t,e).matched)}(i,r,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,r,i,a,u,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,e,i,a,u):em(r):em(r)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const a=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?XM(a):this.applyRedirects.lineralizeSegments(i,a).pipe(Ot(u=>{const f=new qn(u,{});return this.processSegment(n,e,f,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,u){const{matched:f,consumedSegments:b,remainingSegments:k,positionalParamSegments:D}=rw(e,r,a);if(!f)return em(e);const N=this.applyRedirects.applyRedirectCommands(b,r.redirectTo,D);return r.redirectTo.startsWith("/")?XM(N):this.applyRedirects.lineralizeSegments(r,N).pipe(Ot(U=>this.processSegment(n,i,e,U.concat(k),u,!1)))}matchSegmentAgainstRoute(n,e,i,r,a,u){let f;if("**"===i.path){const b=r.length>0?fM(r).parameters:{};f=mt({snapshot:new Kv(r,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JM(i),dl(i),i.component??i._loadedComponent??null,i,eD(i)),consumedSegments:[],remainingSegments:[]}),e.children={}}else f=B4(e,i,r,n).pipe(Dt(({matched:b,consumedSegments:k,remainingSegments:D,parameters:N})=>b?{snapshot:new Kv(k,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JM(i),dl(i),i.component??i._loadedComponent??null,i,eD(i)),consumedSegments:k,remainingSegments:D}:null));return f.pipe(Qi(b=>null===b?em(e):this.getChildConfig(n=i._injector??n,i,r).pipe(Qi(({routes:k})=>{const D=i._loadedInjector??n,{snapshot:N,consumedSegments:U,remainingSegments:K}=b,{segmentGroup:re,slicedSegments:ue}=QM(e,U,K,k);if(0===ue.length&&re.hasChildren())return this.processChildren(D,k,re).pipe(Dt(De=>null===De?null:[new Kc(N,De)]));if(0===k.length&&0===ue.length)return mt([new Kc(N,[])]);const we=dl(i)===a;return this.processSegment(D,k,re,ue,we?qt:a,!0).pipe(Dt(De=>[new Kc(N,De)]))}))))}getChildConfig(n,e,i){return e.children?mt({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?mt({routes:e._loadedRoutes,injector:e._loadedInjector}):function O4(t,n,e,i){const r=n.canLoad;return void 0===r||0===r.length?mt(!0):mt(r.map(u=>{const f=Yp(u,t);return Ud(function b4(t){return t&&lg(t.canLoad)}(f)?f.canLoad(n,e):t.runInContext(()=>f(n,e)))})).pipe(Jp(),ZM())}(n,e,i).pipe(Ot(r=>r?this.configLoader.loadChildren(n,e).pipe(br(a=>{e._loadedRoutes=a.routes,e._loadedInjector=a.injector})):function z4(t){return Wp(UM(!1,3))}())):mt({routes:[],injector:n})}}function K4(t){const n=t.value.routeConfig;return n&&""===n.path}function YM(t){const n=[],e=new Set;for(const i of t){if(!K4(i)){n.push(i);continue}const r=n.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=YM(i.children);n.push(new Kc(i.value,r))}return n.filter(i=>!e.has(i))}function JM(t){return t.data||{}}function eD(t){return t.resolve||{}}function tD(t){return"string"==typeof t.title||null===t.title}function ow(t){return Qi(n=>{const e=t(n);return e?vt(e).pipe(Dt(()=>n)):mt(n)})}const tm=new ze("ROUTES");let sw=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=qe(PT)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return mt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Ud(e.loadComponent()).pipe(Dt(nD),br(a=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=a}),Vv(()=>{this.componentLoaders.delete(e)})),r=new pM(i,()=>new Zt).pipe(Bx());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return mt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const a=function nV(t,n,e,i){return Ud(t.loadChildren()).pipe(Dt(nD),Ot(r=>r instanceof VC||Array.isArray(r)?mt(r):vt(n.compileModuleAsync(r))),Dt(r=>{i&&i(t);let a,u,f=!1;return Array.isArray(r)?(u=r,!0):(a=r.create(e).injector,u=a.get(tm,[],{optional:!0,self:!0}).flat()),{routes:u.map(nw),injector:a}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(Vv(()=>{this.childrenLoaders.delete(i)})),u=new pM(a,()=>new Zt).pipe(Bx());return this.childrenLoaders.set(i,u),u}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nD(t){return function iV(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let ty=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Zt,this.transitionAbortSubject=new Zt,this.configLoader=qe(sw),this.environmentInjector=qe(pa),this.urlSerializer=qe(Qf),this.rootContexts=qe(ig),this.inputBindingEnabled=null!==qe(Xv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>mt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new K5(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Z5(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new tn({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:tg,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zr(a=>0!==a.id),Dt(a=>({...a,extractedUrl:e.urlHandlingStrategy.extract(a.rawUrl)})),Qi(a=>{this.currentTransition=a;let u=!1,f=!1;return mt(a).pipe(br(b=>{this.currentNavigation={id:b.id,initialUrl:b.rawUrl,extractedUrl:b.extractedUrl,trigger:b.source,extras:b.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Qi(b=>{const k=b.currentBrowserUrl.toString(),D=!e.navigated||b.extractedUrl.toString()!==k||k!==b.currentUrlTree.toString();if(!D&&"reload"!==(b.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const U="";return this.events.next(new Xp(b.id,this.urlSerializer.serialize(b.rawUrl),U,0)),b.resolve(null),zn}if(e.urlHandlingStrategy.shouldProcessUrl(b.rawUrl))return mt(b).pipe(Qi(U=>{const K=this.transitions?.getValue();return this.events.next(new qv(U.id,this.urlSerializer.serialize(U.extractedUrl),U.source,U.restoredState)),K!==this.transitions?.getValue()?zn:Promise.resolve(U)}),function X4(t,n,e,i,r,a){return Ot(u=>function W4(t,n,e,i,r,a,u="emptyOnly"){return new q4(t,n,e,i,r,u,a).recognize()}(t,n,e,i,u.extractedUrl,r,a).pipe(Dt(({state:f,tree:b})=>({...u,targetSnapshot:f,urlAfterRedirects:b}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),br(U=>{a.targetSnapshot=U.targetSnapshot,a.urlAfterRedirects=U.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:U.urlAfterRedirects};const K=new RM(U.id,this.urlSerializer.serialize(U.extractedUrl),this.urlSerializer.serialize(U.urlAfterRedirects),U.targetSnapshot);this.events.next(K)}));if(D&&e.urlHandlingStrategy.shouldProcessUrl(b.currentRawUrl)){const{id:U,extractedUrl:K,source:re,restoredState:ue,extras:we}=b,De=new qv(U,this.urlSerializer.serialize(K),re,ue);this.events.next(De);const ye=zM(0,this.rootComponentType).snapshot;return this.currentTransition=a={...b,targetSnapshot:ye,urlAfterRedirects:K,extras:{...we,skipLocationChange:!1,replaceUrl:!1}},mt(a)}{const U="";return this.events.next(new Xp(b.id,this.urlSerializer.serialize(b.extractedUrl),U,1)),b.resolve(null),zn}}),br(b=>{const k=new G5(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(k)}),Dt(b=>(this.currentTransition=a={...b,guards:f4(b.targetSnapshot,b.currentSnapshot,this.rootContexts)},a)),function T4(t,n){return Ot(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:u}}=e;return 0===u.length&&0===a.length?mt({...e,guardsResult:!0}):function E4(t,n,e,i){return vt(t).pipe(Ot(r=>function R4(t,n,e,i,r){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?mt(a.map(f=>{const b=og(n)??r,k=Yp(f,b);return Ud(function k4(t){return t&&lg(t.canDeactivate)}(k)?k.canDeactivate(t,n,e,i):b.runInContext(()=>k(t,n,e,i))).pipe(jd())})).pipe(Jp()):mt(!0)}(r.component,r.route,e,n,i)),jd(r=>!0!==r,!0))}(u,i,r,t).pipe(Ot(f=>f&&function y4(t){return"boolean"==typeof t}(f)?function M4(t,n,e,i){return vt(n).pipe(qp(r=>Lv(function I4(t,n){return null!==t&&n&&n(new X5(t)),mt(!0)}(r.route.parent,i),function D4(t,n){return null!==t&&n&&n(new Y5(t)),mt(!0)}(r.route,i),function P4(t,n,e){const i=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(u=>function g4(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(u)).filter(u=>null!==u).map(u=>hM(()=>mt(u.guards.map(b=>{const k=og(u.node)??e,D=Yp(b,k);return Ud(function w4(t){return t&&lg(t.canActivateChild)}(D)?D.canActivateChild(i,t):k.runInContext(()=>D(i,t))).pipe(jd())})).pipe(Jp())));return mt(a).pipe(Jp())}(t,r.path,e),function A4(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return mt(!0);const r=i.map(a=>hM(()=>{const u=og(n)??e,f=Yp(a,u);return Ud(function x4(t){return t&&lg(t.canActivate)}(f)?f.canActivate(n,t):u.runInContext(()=>f(n,t))).pipe(jd())}));return mt(r).pipe(Jp())}(t,r.route,e))),jd(r=>!0!==r,!0))}(i,a,t,n):mt(f)),Dt(f=>({...e,guardsResult:f})))})}(this.environmentInjector,b=>this.events.next(b)),br(b=>{if(a.guardsResult=b.guardsResult,oh(b.guardsResult))throw HM(0,b.guardsResult);const k=new $5(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot,!!b.guardsResult);this.events.next(k)}),Zr(b=>!!b.guardsResult||(this.cancelNavigationTransition(b,"",3),!1)),ow(b=>{if(b.guards.canActivateChecks.length)return mt(b).pipe(br(k=>{const D=new W5(k.id,this.urlSerializer.serialize(k.extractedUrl),this.urlSerializer.serialize(k.urlAfterRedirects),k.targetSnapshot);this.events.next(D)}),Qi(k=>{let D=!1;return mt(k).pipe(function Q4(t,n){return Ot(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return mt(e);let a=0;return vt(r).pipe(qp(u=>function Y4(t,n,e,i){const r=t.routeConfig,a=t._resolve;return void 0!==r?.title&&!tD(r)&&(a[Kf]=r.title),function J4(t,n,e,i){const r=function eV(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return mt({});const a={};return vt(r).pipe(Ot(u=>function tV(t,n,e,i){const r=og(n)??i,a=Yp(t,r);return Ud(a.resolve?a.resolve(n,e):r.runInContext(()=>a(n,e)))}(t[u],n,e,i).pipe(jd(),br(f=>{a[u]=f}))),Vx(1),jx(a),Hd(u=>qM(u)?zn:Wp(u)))}(a,t,n,i).pipe(Dt(u=>(t._resolvedData=u,t.data=LM(t,e).resolve,r&&tD(r)&&(t.data[Kf]=r.title),null)))}(u.route,i,t,n)),br(()=>a++),Vx(1),Ot(u=>a===r.length?mt(e):zn))})}(e.paramsInheritanceStrategy,this.environmentInjector),br({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(k,"",2)}}))}),br(k=>{const D=new q5(k.id,this.urlSerializer.serialize(k.extractedUrl),this.urlSerializer.serialize(k.urlAfterRedirects),k.targetSnapshot);this.events.next(D)}))}),ow(b=>{const k=D=>{const N=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&N.push(this.configLoader.loadComponent(D.routeConfig).pipe(br(U=>{D.component=U}),Dt(()=>{})));for(const U of D.children)N.push(...k(U));return N};return zv(k(b.targetSnapshot.root)).pipe(Nv(),cl(1))}),ow(()=>this.afterPreactivation()),Dt(b=>{const k=function r4(t,n,e){const i=rg(t,n._root,e?e._root:void 0);return new NM(i,n)}(e.routeReuseStrategy,b.targetSnapshot,b.currentRouterState);return this.currentTransition=a={...b,targetRouterState:k},a}),br(()=>{this.events.next(new qx)}),((t,n,e,i)=>Dt(r=>(new m4(n,r.targetRouterState,r.currentRouterState,e,i).activate(t),r)))(this.rootContexts,e.routeReuseStrategy,b=>this.events.next(b),this.inputBindingEnabled),cl(1),br({next:b=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gd(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects))),e.titleStrategy?.updateTitle(b.targetRouterState.snapshot),b.resolve(!0)},complete:()=>{u=!0}}),Zo(this.transitionAbortSubject.pipe(br(b=>{throw b}))),Vv(()=>{u||f||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),Hd(b=>{if(f=!0,GM(b))this.events.next(new ng(a.id,this.urlSerializer.serialize(a.extractedUrl),b.message,b.cancellationCode)),function a4(t){return GM(t)&&oh(t.url)}(b)?this.events.next(new Zx(b.url)):a.resolve(!1);else{this.events.next(new Zv(a.id,this.urlSerializer.serialize(a.extractedUrl),b,a.targetSnapshot??void 0));try{a.resolve(e.errorHandler(b))}catch(k){a.reject(k)}}return zn}))}))}cancelNavigationTransition(e,i,r){const a=new ng(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(a),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function iD(t){return t!==tg}let rD=(()=>{class t{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(a=>a.outlet===qt);return i}getResolvedTitleForRoute(e){return e.data[Kf]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(rV)},providedIn:"root"})}return t})(),rV=(()=>{class t extends rD{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(YE))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(aV)},providedIn:"root"})}return t})();class sV{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let aV=(()=>{class t extends sV{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Oi(t)))(r||t)}}();static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ny=new ze("",{providedIn:"root",factory:()=>({})});let lV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(cV)},providedIn:"root"})}return t})(),cV=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var cg=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(cg||{});function oD(t,n){t.events.pipe(Zr(e=>e instanceof Gd||e instanceof ng||e instanceof Zv||e instanceof Xp),Dt(e=>e instanceof Gd||e instanceof Xp?cg.COMPLETE:e instanceof ng&&(0===e.code||1===e.code)?cg.REDIRECTING:cg.FAILED),Zr(e=>e!==cg.REDIRECTING),cl(1)).subscribe(()=>{n()})}function dV(t){throw t}function uV(t,n,e){return n.parse("/")}const hV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let va=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=qe(IT),this.isNgZoneEnabled=!1,this._events=new Zt,this.options=qe(ny,{optional:!0})||{},this.pendingTasks=qe(AT),this.errorHandler=this.options.errorHandler||dV,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||uV,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=qe(lV),this.routeReuseStrategy=qe(oV),this.titleStrategy=qe(rD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qe(tm,{optional:!0})?.flat()??[],this.navigationTransitions=qe(ty),this.urlSerializer=qe(Qf),this.location=qe(_v),this.componentInputBindingEnabled=!!qe(Xv,{optional:!0}),this.eventsSubscription=new En,this.isNgZoneEnabled=qe(At)instanceof At&&At.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kp,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zM(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(sD(i)&&this._events.next(i));if(i instanceof qv)iD(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Xp)this.rawUrlTree=r.rawUrl;else if(i instanceof RM){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(a,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof qx)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof ng)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof Zx){const a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iD(r.source)};this.scheduleNavigation(a,tg,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof Zv&&this.restoreHistory(r,!0),i instanceof Gd&&(this.navigated=!0),sD(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),tg,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const a={replaceUrl:!0},u=r?.navigationId?r:null;if(r){const b={...r};delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(a.state=b)}const f=this.parseUrl(e);this.scheduleNavigation(f,i,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(nw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:u,queryParamsHandling:f,preserveFragment:b}=i,k=b?this.currentUrlTree.fragment:u;let N,D=null;switch(f){case"merge":D={...this.currentUrlTree.queryParams,...a};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}null!==D&&(D=this.removeEmptyProps(D));try{N=TM(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),N=this.currentUrlTree.root}return EM(N,e,D,k??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=oh(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,tg,null,i)}navigate(e,i={skipLocationChange:!1}){return function mV(t){for(let n=0;n<t.length;n++)if(null==t[n])throw new xe(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...hV}:!1===i?{...pV}:i,oh(e))return _M(this.currentUrlTree,e,r);const a=this.parseUrl(e);return _M(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}scheduleNavigation(e,i,r,a,u){if(this.disposed)return Promise.resolve(!1);let f,b,k;u?(f=u.resolve,b=u.reject,k=u.promise):k=new Promise((N,U)=>{f=N,b=U});const D=this.pendingTasks.add();return oD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:a,resolve:f,reject:b,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(N=>Promise.reject(N))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const u={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",u)}else{const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",a)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sD(t){return!(t instanceof qx||t instanceof Zx)}class aD{}let _V=(()=>{class t{constructor(e,i,r,a,u){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Zr(e=>e instanceof Gd),qp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i){a.providers&&!a._injector&&(a._injector=F0(a.providers,e,`Route: ${a.path}`));const u=a._injector??e,f=a._loadedInjector??u;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&r.push(this.preloadConfig(u,a)),(a.children||a._loadedRoutes)&&r.push(this.processRoutes(f,a.children??a._loadedRoutes))}return vt(r).pipe(Un())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):mt(null);const a=r.pipe(Ot(u=>null===u?mt(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes(u.injector??e,u.routes))));return i.loadComponent&&!i._loadedComponent?vt([a,this.loader.loadComponent(i)]).pipe(Un()):a})}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(va),Oe(PT),Oe(pa),Oe(aD),Oe(sw))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const lw=new ze("");let lD=(()=>{class t{constructor(e,i,r,a,u={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=a,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof qv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Gd?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Xp&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof OM&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new OM(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){Qb()};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();function Xc(t,n){return{\u0275kind:t,\u0275providers:n}}function dD(){const t=qe(ms);return n=>{const e=t.get(th);if(n!==e.components[0])return;const i=t.get(va),r=t.get(uD);1===t.get(cw)&&i.initialNavigation(),t.get(hD,null,Gt.Optional)?.setUpPreloading(),t.get(lw,null,Gt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const uD=new ze("",{factory:()=>new Zt}),cw=new ze("",{providedIn:"root",factory:()=>1}),hD=new ze("");function xV(t){return Xc(0,[{provide:hD,useExisting:_V},{provide:aD,useExisting:t}])}const pD=new ze("ROUTER_FORROOT_GUARD"),kV=[_v,{provide:Qf,useClass:Hx},va,ig,{provide:sh,useFactory:function cD(t){return t.routerState.root},deps:[va]},sw,[]];function SV(){return new BT("Router",va)}let mD=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[kV,[],{provide:tm,multi:!0,useValue:e},{provide:pD,useFactory:MV,deps:[[va,new Fs,new cs]]},{provide:ny,useValue:i||{}},i?.useHash?{provide:ih,useClass:TL}:{provide:ih,useClass:fE},{provide:lw,useFactory:()=>{const t=qe(Z3),n=qe(At),e=qe(ny),i=qe(ty),r=qe(Qf);return e.scrollOffset&&t.setOffset(e.scrollOffset),new lD(r,i,t,n,e)}},i?.preloadingStrategy?xV(i.preloadingStrategy).\u0275providers:[],{provide:BT,multi:!0,useFactory:SV},i?.initialNavigation?DV(i):[],i?.bindToComponentInputs?Xc(8,[jM,{provide:Xv,useExisting:jM}]).\u0275providers:[],[{provide:fD,useFactory:dD},{provide:ix,multi:!0,useExisting:fD}]]}}static forChild(e){return{ngModule:t,providers:[{provide:tm,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(pD,8))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})();function MV(t){return"guarded"}function DV(t){return["disabled"===t.initialNavigation?Xc(3,[{provide:K0,multi:!0,useFactory:()=>{const n=qe(va);return()=>{n.setUpLocationChangeListener()}}},{provide:cw,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Xc(2,[{provide:cw,useValue:0},{provide:K0,multi:!0,deps:[ms],useFactory:n=>{const e=n.get(SL,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=n.get(va),a=n.get(uD);oD(r,()=>{i(!0)}),n.get(ty).afterPreactivation=()=>(i(!0),a.closed?mt(void 0):a),r.initialNavigation()}))}}]).\u0275providers:[]]}const fD=new ze(""),AV=JSON.parse('{"R":[{"type":"Feature","properties":{"icon":"industry","entry_id":1,"name":"Rychnov na Falknovsku","place":"Sokolov","years_in_service":"1907-1968","power":"500kw, 1.5MW(1909), 10MW(1926), 18,9MW(1936)","sources1":"https://vary.rozhlas.cz/elektrarna-v-dolnim-rychnove-rozsvitila-sokolovsko-ve-30-letech-patrila-k-8791627, https://www.sokolov-vychod.cz/elektrarna-j-d-starck","sources2":"","type":"Uhl\xed","owner":"\u010cEZ","description_short":"Elektr\xe1rnu na v\xfdchodn\xedm okraji Sokolova vystav\u011bla spole\u010dnost \u201eDolov\xe9 a pr\u016fmyslov\xe9 z\xe1vody,\xa0 d\u0159\xedve Johan David Starck\u201c v\xa0roce 1907. Po\u010d\xe1tky elektr\xe1rny sahaj\xed v\u0161ak ji\u017e do roku\xa0 1886, kdy bylo instalov\xe1no osv\u011btlovac\xed dynamo pro osv\u011btlen\xed nakl\xe1dac\xed lampy a dolu Boghead. V\xa0roce 1903 bylo instalov\xe1no v\u011bt\u0161\xed dynamo\xa0\xa0 o v\xfdkonu 20 ko\u0148sk\xfdch sil a roku 1907, kter\xfd je pova\u017eov\xe1n za rok zalo\u017een\xed\xa0 elektr\xe1rny, byla postavena chladic\xed v\u011b\u017e a turbogener\xe1tor o v\xfdkonu 500 kW.","description1":"Roku 1909 byl instalov\xe1n druh\xfd parn\xed turbogener\xe1tor s\xa0v\xfdkonem 1000 kW a dal\u0161\xed chladic\xed v\u011b\u017e. Energie ji\u017e bylo dostatek nejen pro elektrifikaci \u010derp\xe1n\xed d\u016fln\xedch vod, ale i pro zaveden\xed elekt\u0159iny ve Falknov\u011b (dne\u0161n\xed Sokolov), Doln\xedm Rychnov\u011b a Tisov\xe9.","description2":"V\xa0roce 1923 se za\u010dalo stav\u011bt dal\u0161\xed veden\xed ji\u017en\xedm sm\u011brem na B\u0159ezovou a Kamenici., n\xe1sledovaly kyn\u0161persk\xe9 doly, p\u0159esto\u017ee kyn\u0161persk\xe1 briket\xe1rna m\u011bla svoji elektr\xe1rnu.\xa0 V\xa0roce 1926 do\u0161lo k\xa0v\xfdznamn\xe9 zm\u011bn\u011b \u2013 elektr\xe1rna dostala sv\xe9 vlastn\xed veden\xed a p\u0159estala podl\xe9hat dolu Luitpold (Anton\xedn), pokra\u010dovalo se v\xa0budov\xe1n\xed dal\u0161\xedch veden\xed, v\xa0turb\xednov\xe9 hale se\xa0 instalovala je\u0159\xe1bov\xe1 dr\xe1ha, odstavily se dva slab\u0161\xed turbogener\xe1tory (v\xfdkon 500 a 1000 kW) a osadil se nov\xfd o v\xfdkonu 10\xa0000 kW.","description3":"Rekonstrukce elektr\xe1rny byla dokon\u010dena v\xa0roce 1931 vybudov\xe1n\xedm \xfapravny vod s\xa0laborato\u0159\xed, instalac\xed dal\u0161\xedho strmotrubn\xe9ho kotle, roz\u0161\xed\u0159en\xedm vel\xedna a rozvodny, instalac\xed nov\xe9ho sp\xednac\xedho za\u0159\xedzen\xed a stavbou druh\xe9ho a t\u0159et\xedho kom\xedna. Roku 1936 byly p\u0159istav\u011bny kancel\xe1\u0159e a d\xedlny. V\xa0roce 1936 byla elektr\xe1rna vybavena t\u0159emi turbogener\xe1tory o celkov\xe9m v\xfdkonu 18\xa0900 kW, dev\xedti velk\xfdmi transform\xe1tory, p\u011bti strmotrubn\xfdmi a dv\u011bma star\xfdmi kotli.","description4":"Po v\xe1lce p\u0159evzala elektr\xe1rnu spole\u010dnost Mostecko-sokolovsk\xe9 elektr\xe1rny, pozd\u011bji \u010cEZ. V\xfdroba elekt\u0159iny prob\xedhala v\xa0sokolovsk\xe9 elektr\xe1rn\u011b a\u017e do roku 1968.","description5":"","description6":"","description7":""},"geometry":{"coordinates":[12.6367839,50.2680642],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":2,"name":"Mari\xe1nsk\xe9 L\xe1zn\u011b","place":"Mari\xe1nsk\xe9 l\xe1zn\u011b","years_in_service":"1888-1945","power":"50kW(1889), 1000HP(1904), ","sources1":"hamelika.cz","sources2":"https://www.hamelika.cz/?cz_hamelika-historie-marianskolazenske-elektrarny,77","type":"Uhl\xed","owner":"M\u011bsto Mari\xe1nsk\xe9 l\xe1zn\u011b","description_short":"V roce 1888 prob\xedhala stavba novobarokn\xed litinov\xe9 kolon\xe1dy podle projektu v\xedde\u0148sk\xfdch stavitel\u016f Miksche a Niedzielsk\xe9ho. P\u016fvodn\u011b m\u011bla mari\xe1nskol\xe1ze\u0148sk\xe1 elektr\xe1rna t\u0159i parn\xed dynama typu Westinghouse po 80 PS, ale v kr\xe1tk\xe9 dob\u011b dost\xe1v\xe1 nov\xe1 za\u0159\xedzen\xed sp\u0159a\u017een\xe9ho st\u0159\xeddav\xe9ho proudu. P\u0159i v\xfdkonu 50 kW p\u0159i 500 ot\xe1\u010dk\xe1ch v minut\u011b se vyr\xe1b\u011bl jednof\xe1zov\xfd st\u0159\xeddan\xfd proud o 2000 voltech a 42 period\xe1ch.","description1":"Dne 14.listopadu 1888 prob\u011bhlo zku\u0161ebn\xed osv\u011btlen\xed kolon\xe1dy a p\u0159ilehl\xe9 ulice od domu LIPSKO dol\u016f k hotelu KLINGER \u010dty\u0159mi obloukov\xfdmi lampami.","description2":"V roce 1904 bylo nutno zakoupit a instalovat na m\xedsto mal\xe9ho stroje o 100 PS parn\xed turbinu se 1000 PS (HP). Byla to tehdy jedine\u010dnost, nebo\u0165 \u0161lo o \u010dtvrtou nejv\u011bt\u0161\xed parn\xed turbinu v Rakousko-Uhersku.","description3":"Nov\xe1 za\u0159\xedzen\xed 1925-1926. V roce 1925 byla z\u0159\xedzena vlastn\xed po\u010d\xedta\u010dov\xe1 stanice a elektr\xe1rna st\xe1la p\u0159ed dal\u0161\xedmi v\xfdznamn\xfdmi zm\u011bnami p\u0159i roz\u0161\xed\u0159en\xed kapacity v\xfdroby, kter\xe9 nebylo mo\u017eno d\xe1le oddalovat. Roku 1926 vzrostl v\xfdkon dvou star\u0161\xedch parn\xedch stroj\u016f 2x300 PS (HP) provedenou rekonstrukc\xed na 2 x 500","description4":"U kotl\u016f \u0160koda a dal\u0161\xedch zlep\u0161en\xedch bylo mo\u017eno udr\u017eet norm\xe1ln\xed v\xfdkon 1700 kW.","description5":"Proto\u017ee elektr\xe1rna v Mari\xe1nsk\xfdch L\xe1zn\xedch si uchov\xe1vala od po\u010d\xe1tku s\xed\u0165ovou frekvenci 43 Hertz\u016f, muselo doj\xedt ke zv\xfd\u0161en\xed n\xe1klad\u016f v d\u016fsledku pot\u0159ebn\xe9ho m\u011bni\u010de frekvence p\u0159i odb\u011bru proudu nebo p\u0159ed\xe1v\xe1n\xed proudu do d\xe1lkov\xe9ho veden\xed. Proto\u017ee p\u0159i 43 Hz nebylo mo\u017eno dos\xe1hnout normovan\xfdch ot\xe1\u010dek motor\u016f nap\u0159. 2880 nebo 1440, nebo\u0165 le\u017eely o 14 % n\xed\u017ee, bylo pou\u017e\xedv\xe1n\xed stroj\u016f a za\u0159\xedzen\xed, poh\xe1n\u011bn\xfdch pevn\u011b p\u0159ipojen\xfdmi motory nemo\u017en\xe9. Bylo proto nyn\xed nutno v\u0161ude pou\u017e\xedvat mezipohonov\xfdch \xfastroj\xed - \u0159emeny, p\u0159evodovky.","description6":"\\nM\u011bstsk\xe1 elektr\xe1rna byla v provozu a\u017e do roku 1972, kdy byla zru\u0161ena, a v roce 1973 byla uvedena do provozu M\u011bstsk\xe1 tepl\xe1rna, pou\u017e\xedvaj\xedc\xed jako paliva mazutu o v\xfdkonu 25 tun p\xe1ry za hodinu. Za\u010dalo pokl\xe1d\xe1n\xed parovodu a budov\xe1n\xed v\xfdm\u011bn\xedkov\xfdch stanic.","description7":""},"geometry":{"coordinates":[17.7025342,49.9604419],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":3,"name":"Kraslice","place":"Kraslice","years_in_service":"1903-1945","power":"250kW(1903),  538kW(1911)","sources1":"pamatkovykatalog","sources2":"https://www.pamatkovykatalog.cz/elektrarna-15333378","type":"kombinace uhl\xed,voda","owner":"","description_short":"Tepeln\xe1 elektr\xe1rna byla za\u0159\xedzena na spalov\xe1n\xed hn\u011bd\xe9ho uhl\xed z dol\u016f Marie, Union a Ane\u017eka v mno\u017estv\xed 4500 t ro\u010dn\u011b. V koteln\u011b byly osazeny 2 kotle Cornwall s rovinn\xfdmi ro\u0161ty, kter\xe9 poh\xe1n\u011bly 2 svisl\xe9 parostroje o v\xfdkonu 140 ks ka\u017ed\xfd a 1 kompaundn\xed parn\xed stroj s kondenzac\xed o v\xfdkonu 385 ks.","description1":"Stejnosm\u011brn\xfd proud vyr\xe1b\u011blo celkem 5 dynam o r\u016fzn\xfdch v\xfdkonech: 1. dynamo o v\xfdkonu 62 kW z roku 1903 od firmy Waldek-Wagner, 2. dynamo o v\xfdkonu 82 kW z roku 1903 a firmy Waldek-Wagner, 3. dynamo o v\xfdkonu 82 kW z roku 1903 a firmy Waldek-Wagner, 4. dynamo o v\xfdkonu 24 kW z roku 1903 a firmy Berg a 5. dynamo o v\xfdkonu 288 kW z roku 1911 a firmy Siemens a Schuckert.","description2":"Akumul\xe1tor m\u011bl 278 \u010dl\xe1nk\u016f a kapacitu 435 Amph. Vodn\xed s\xedla Svatavy byla zu\u017eitkov\xe1na sp\xe1dem o v\xfd\u0161ce 3,2 m 2 turb\xednami o celkov\xe9m v\xfdkonu 135 ks.","description3":"V\xfdroba elekt\u0159iny v elektr\xe1rn\u011b skon\u010dila v roce 1945, od pades\xe1t\xfdch let minul\xe9ho stolet\xed elekt\u0159inu dod\xe1v\xe1 do Kraslic elektr\xe1rna Tisov\xe1 u Sokolova. V roce 1952 byl zbo\u0159en kom\xedn elektr\xe1rny. Z elektr\xe1rny se dochovala pouze v roce 1995 rekonstruovan\xe1 transformovna a spr\xe1vn\xed objekt \u010dp. 636.","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[12.5163728,50.3184772],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":4,"name":"Horn\xed J\xed\u0159et\xedn","place":"Horn\xed J\xed\u0159et\xedn","years_in_service":"1908-1945","power":"480kW","sources1":"tovarnikominy.cz","sources2":"https://www.tovarnikominy.cz/kominy.75","type":"uheln\xe1","owner":"Soukrom\xfd majitel","description_short":"M\u011bsto Horn\xed Ji\u0159et\xedn si v roce 1908 postavilo pro sv\xe9 pot\u0159eby a pot\u0159eby okoln\xedch obc\xed parn\xed elektr\xe1rnu. Ta byla je\u0161t\u011b v letech 1911\u20131914\xa0roz\u0161\xed\u0159ena a v t\xe9to podob\u011b se a\u017e na drobn\xe9 zm\u011bny souvisej\xedc\xed s rekonstrukc\xed pro nov\xe9 vyu\u017eit\xed dochovala dodnes.\xa0","description1":"Drobn\xfd objekt byl jednotn\u011b pojat\xfd v historizuj\xedc\xedm slohu kombinuj\xedc\xedm om\xedtan\xe9 plochy s \u010derven\xfdm re\u017en\xfdm zdivem. P\u0159ed objektem byl karlovarskou specializovanou spole\u010dnost\xed Sch\xf6berl a spol.\xa0postaven tov\xe1rn\xed kom\xedn v\xfd\u0161ky 30 metr\u016f a sv\u011btlost\xed 120 centimetr\u016f. Ten slou\u017eil k odvodu spalin z parn\xedch kotl\u016f \u2013 v roce 1934 jsou uv\xe1d\u011bny celkem t\u0159i instalovan\xe9 kotle o celkov\xe9 v\xfdh\u0159evn\xe9 plo\u0161e 570 m2. Kotle dod\xe1valy p\xe1ru dv\u011bma parn\xedm stroj\u016fm po 300 HP, celkov\xfd elektrick\xfd v\xfdkon elektr\xe1rny byl 480 kW.","description2":"Po roce 1945 byla elektr\xe1rna vy\u0159azena z provozu.\xa0Do dne\u0161n\xedch dn\u016f si i p\u0159es opravy zachov\xe1v\xe1 p\u016fvodn\xed r\xe1z a soukrom\xfd majitel ji vyu\u017e\xedv\xe1 pro vlastn\xed pot\u0159ebu. Na kom\xedn\u011b je osazen ochoz s telekomunika\u010dn\xed technologi\xed, nicm\xe9n\u011b um\xedst\u011bn\xedm ochozu t\u011bsn\u011b pod hlavic\xed je siln\u011b naru\u0161en vizu\xe1ln\xed dojem z architektonicky kvalitn\u011b proveden\xe9ho kom\xedna.","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.546553333333334,50.572028333333336],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":6,"name":"Opava","place":"Opava","years_in_service":"1904-19XX","power":"neuvedeno","sources1":"https://www.pamatkovykatalog.cz/mestska-parni-elektrarna-19561977","sources2":"","type":"uheln\xe1","owner":"","description_short":"Parn\xed elektr\xe1rna se dv\u011bma parn\xedmi stroji a kotli Babcock-Wilcox z ciheln\xe9ho zdiva s \u017eeleznou st\u0159e\u0161n\xed konstrukc\xed postavena stavitelem Aloisem Geldnerem podle projektu architekta Laubeho z firmy AEG v roce 1904. P\u016fvodn\xed za\u0159\xedzen\xed nedochov\xe1no.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[17.893948333333334,49.94394805555555],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":7,"name":"Mydlovary","place":"Mydlovary","years_in_service":"1926-1998","power":"25MW","sources1":"http://www.encyklopedie.c-budejovice.cz/clanek/elektrarny","sources2":"https://cs.wikipedia.org/wiki/Zanikl%C3%A9_elektr%C3%A1rny_v_%C4%8Cesku#Elektr%C3%A1rna_Mydlovary","type":"uheln\xe1","owner":"Mydlovary","description_short":"Jednalo se o\xa0prvn\xed za\u0159\xedzen\xed v\xa0\u010cSR, kter\xe9 m\u011blo ov\u011b\u0159it mo\u017enosti spalov\xe1n\xed\xa0lignitu, jen\u017e se hojn\u011b vyskytoval v\xa0okol\xed\xa0Mydlovar. Prvn\xed experiment\xe1ln\xed elektr\xe1rna m\u011bla v\xfdkon 2 \xd7 400\xa0kW, zprovozn\u011bna byla roku 1922, odstavena byla pak v\xa0roce 1927, o rok d\u0159\xedve v\u0161ak za\u010dala ji\u017e b\u011b\u017eet definitivn\xed elektr\xe1rna s\xa0pr\xe1\u0161kov\xfdmi kotly a TG1 o\xa0v\xfdkonu 3\xa0MW. V\xa0roce 1928 najely do provozu dal\u0161\xed kotle K3 a K4 a TG2 o\xa0v\xfdkonu 6\xa0MW.","description1":"Dal\u0161\xed roz\u0161\xed\u0159en\xed p\u0159i\u0161lo v\xa0roce 1935 (kotel K5), v\xa0roce 1939 nov\xe9 TG 3 o\xa0v\xfdkonu 10\xa0MW, v\xa0roce 1940 kotel K6. Dal\u0161\xed rozvoj n\xe1sledoval a\u017e v\xa0roce 1965 s\xa0tepl\xe1rensk\xfdm kotlem K7 a TG 4 o\xa0v\xfdkonu 6\xa0MW.","description2":"Z\xe1rove\u0148 se spu\u0161t\u011bn\xedm tohoto kotle byly definitivn\u011b odstaveny nejstar\u0161\xed kotle K1-K4 a TG 1 a rovn\u011b\u017e v\xa0tomto roce byl postaven 100\xa0m vysok\xfd kom\xedn. V\xa0roce 1973 p\u0159e\u0161la elektr\xe1rna na spalov\xe1n\xed sokolovsk\xe9ho hruboprachu.","description3":"Z\xa0elektr\xe1rny se stala sp\xed\u0161e tepl\xe1rna (z\xe1sobovala MAPE Mydlovary a m\u011bsto \u010cesk\xe9 Bud\u011bjovice) a z\xa0toho d\u016fvodu byly odstaveny postupn\u011b TG 2 (1976), TG 3 (1984), posledn\xed TG 4 o\xa0v\xfdkonu 6\xa0MW byl odstaven v\xa0roce 1998, \u010d\xedm\u017e zanikla v\xa0tomto m\xedst\u011b v\xfdroba elekt\u0159iny nep\u0159etr\u017eit\u011b zde trvaj\xedc\xed od roku 1922.","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[14.361852257486733,49.08449219316303],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":8,"name":"\u010cesko Bud\u011bjovick\xe1","place":"v Novohradsk\xe9 ulici","years_in_service":"1920-1948","power":"neuvedeno","sources1":"http://www.encyklopedie.c-budejovice.cz/clanek/elektrarny","sources2":"","type":"uheln\xe1","owner":"Jiho\u010desk\xe9 elektr\xe1rny pod sebou 12,7 MW (hodn\u011b vodn\xedch)","description_short":"Roku 1920\xa0byly za\xa0\xfa\u010delem systematick\xe9 elektrifikace ji\u017en\xedch \u010cech ustaveny\xa0Jiho\u010desk\xe9 elektr\xe1rny, akciov\xe1 spole\u010dnost se\xa0s\xeddlem v\xa0\u010cesk\xfdch Bud\u011bjovic\xedch (J\u010cE). Spole\u010dnost se\xa0rozhodla vybudovat na\xa0lignitov\xe9m lo\u017eisku v\xa0Mydlovarech tepelnou elektr\xe1rnu, z\xa0n\xed\u017e by byl dod\xe1v\xe1n do\xa0m\u011bsta proud prim\xe1rn\xedm veden\xedm 22\xa0kV\xa0(1922).","description1":"T\xe9\u017e koupila od\xa0rakousk\xe9 spole\u010dnosti 15.\xa06.\xa01925\xa0parn\xed elektr\xe1rna\xa0v\xa0Novohradsk\xe9 ulici, k\xa0jej\xed\u017e likvidaci do\u0161lo 1948.\xa0Od\xa0t\xe9 doby objekt slou\u017e\xed jako\xa0tepl\xe1rna.","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[14.4852089,48.9678],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":9,"name":"Mari\xe1nsk\xe9 Hory","place":"Ign\xe1c (j\xe1ma)","years_in_service":"1913-ted","power":"12kW, 1922 - 24,8kW, 1927 - 42kW, 2006 - 14,08MW","sources1":"https://cs.wikipedia.org/wiki/Tepl%C3%A1rna_P%C5%99%C3%ADvoz","sources2":"","type":"uheln\xe1","owner":"Veolia Energie \u010cR","description_short":"V roce 1913 byla uvedena do provozu elektrick\xe1 \xfast\u0159edna (elektr\xe1rna), kter\xe1 nahradila p\u0159edev\u0161\xedm elektr\xe1rnu koksovny Franti\u0161ek z roku 1909, a byla ur\u010den\xe1 pro z\xe1sobov\xe1n\xed elektrickou energi\xed v\u0161ech z\xe1vod\u016f SDCF.\\n\\nV 50. letech 20. stolet\xed byla Elektr\xe1rna Franti\u0161ek za\u010dlen\u011bna do Ostravsko\u2013karvinsk\xfdch elektr\xe1ren (OKE) v pod\u0159\xedzen\xed \xdast\u0159edn\xed spr\xe1vy energetiky.\\n\\nV 90. letech se m\u011bn\xed na Tepl\xe1rnu P\u0159\xedvoz (TPV). Od roku 1998 se st\xe1v\xe1 nov\xfdm majitelem spole\u010dnost Dalkia.\\n\\nV roce 2013 Tepl\xe1rna P\u0159\xedvoz zabezpe\u010dovala dod\xe1vku tepla pro 13,5 tis. dom\xe1cnost\xed v Ostrav\u011b, a d\xe1le pro Koksovnu Svoboda, M\u011bstskou nemocnici Ostrava Fifejdy, Novou Karolinu a Pivovar Ostrava.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[18.274919444444443,49.86114444444445],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":10,"name":"Zb\u016fch","place":"d\u016fl, sudety","years_in_service":"1914-1966","power":"2,75MW, 16,7MW","sources1":"https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&ved=2ahUKEwi-y-Gu9vWCAxUKhP0HHWbBBWIQFnoECA8QAQ&url=https%3A%2F%2Fwww.zbuch.cz%2Fe_download.php%3Ffile%3Ddata%2Feditor%2F328cs_5.pdf%26original%3DZb%25C5%25AFch%2520od%2520prav%25C4%259Bku%2520k%2520sou%25C4%258Dasnosti%2520-%2520text%2520knihy%2520z%2520roku%25202003.pdf&usg=AOvVaw0dUvjKvphzgm1JIP4_1Vz2&opi=89978449","sources2":"","type":"uheln\xe1","owner":"Elektr\xe1rna Zb\u016fch","description_short":"P\u016fvodn\xed elektrocentr\xe1la byla v prostor\xe1ch vysokotlak\xe9ho kompresoru a hlavn\xedch ventil\xe1tor\u016f. M\u011bla v\xfdkon 2750 kW. V obdob\xed po I. sv\u011btov\xe9 v\xe1lce byla v are\xe1lu dolu vystav\u011bna nov\xe1 elektrocentr\xe1la, dokon\u010den\xe1 p\u0159ed polovinou 20. let 20. stolet\xed. Byla vybavena t\u0159emi turbosoustroj\xedmi o v\xfdkonu 16,7 MW, kter\xe9 dodaly firmy \u0160koda, \u010cKD a AEG\u2013BB Union.","description1":"Pozd\u011bji vznikl samostatn\xfd n\xe1rodn\xed podnik Elektr\xe1rna Zb\u016fch s pobo\u010dn\xfdmi z\xe1vody v N\xfd\u0159anech a Hol\xfd\u0161ov\u011b a vodn\xed elektr\xe1rny na \u0161umavsk\xe9 Vyd\u0159e, na Radbuze ve Stod\u011b a Chot\u011b\u0161ov\u011b. Koncem 50. let a na po\u010d\xe1tku 60. let jsou postupn\u011b v\u0161echny elektr\xe1rny, krom\u011b Zb\u016fchu a na Vyd\u0159e, odstaveny a elektr\xe1rna Zb\u016fch se st\xe1v\xe1 na n\u011bkolik posledn\xedch let provozu z\xe1vodem podniku Z\xe1pado\u010desk\xe9 elektr\xe1rny. V roce 1966 je \u010dinnost Elektr\xe1rny Zb\u016fch zastavena, kotelna p\u0159ed\xe1na zp\u011bt dolu DOM Zb\u016fch ZUD a provozov\xe1na jako tepl\xe1rna.","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.2088669,49.6683436],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":11,"name":"Such\xe1","place":"Obec Such\xe1 u Polsk\xfdch hranic","years_in_service":"1916-????","power":"???","sources1":"MIKE\u0160, Jan.\xa0Elektrifikace \u010ceskoslovenska do roku 1938. Online, Diserta\u010dn\xed pr\xe1ce, vedouc\xed Efmertov\xe1, Marcela. Praha: Univerzita Karlova, Filozofick\xe1 fakulta, 2016. Dostupn\xe9 z:\xa0https://dspace.cuni.cz/handle/20.500.11956/83800. [cit. 2023-11-18].","sources2":"","type":"uheln\xe1","owner":"???","description_short":"","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[18.475749999999998,49.80025],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":14,"name":"Komo\u0159any I","place":"Most-Komo\u0159any, ul. Tepl\xe1rensk\xe1","years_in_service":"1951-sou\u010dasnost","power":"96 MW","sources1":"https://www.ue.cz/historie-a-soucasnost","sources2":"","type":"uheln\xe1","owner":"p\u016fvodn\u011b Mosteck\xe9-Sokolovsk\xe9 elektr\xe1rny n.p., dnes United Energy a.s.","description_short":"Elektr\xe1rna Komo\u0159any se za\u010dala stav\u011bt je\u0161t\u011b b\u011bhem druh\xe9 sv\u011btov\xe9 v\xe1lky v roce 1943 a stavba pak pokra\u010dovala v r\xe1mci n\xe1rodn\xedho podniku Mostecko-sokolovsk\xfdch elektr\xe1ren i po roce 1945. Prvn\xed kotel a turbogener\xe1tor byly uvedeny do provozu v roce 1951. V pades\xe1t\xfdch letech bylo uvedeno do provozu p\u011bt kotl\u016f o v\xfdkonu 90 tun p\xe1ry za hodinu a t\u0159i kondenza\u010dn\xed turbosoustroj\xed po 32 MW. Od po\u010d\xe1tku byla elektr\xe1rna z\xe1sobov\xe1na hn\u011bd\xfdm uhl\xedm p\u0159\xedmo ze sousedn\xed \xfapravny.\\n\\n","description1":"V roce 1963 byly provedeny investice pro zm\u011bnu provozu na tepl\xe1rensk\xfd a v 1964 za\u010dala fungovat jako tepl\xe1rna.","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.575166666666666,50.52280555555556],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":15,"name":"Komo\u0159any II","place":"Most-Komo\u0159any, ul. Tepl\xe1rensk\xe1","years_in_service":"1958-sou\u010dastnost","power":"116 MW","sources1":"https://www.ue.cz/historie-a-soucasnost","sources2":"","type":"uheln\xe1","owner":"p\u016fvodn\u011b Mosteck\xe9-Sokolovsk\xe9 elektr\xe1rny n.p., dnes United Energy a.s.","description_short":"Prvn\xed kotel \u010d. 6 byl zprovozn\u011bn v l\xe9t\u011b roku 1958, posledn\xed s po\u0159adov\xfdm \u010d\xedslem sedm o rok pozd\u011bji. Elektr\xe1rna Komo\u0159any II. m\u011bla p\u011bt ro\u0161tov\xfdch kotl\u016f o v\xfdkonu 125 tun p\xe1ry, t\u0159i kondenza\u010dn\xed turbogener\xe1tory po 32 MW a jedno kondenza\u010dn\xed odb\u011brov\xe9 turbosoustroj\xed o v\xfdkonu 20 MW.","description1":"Stejn\u011b jako u elektr\xe1rny Komo\u0159any I byly v roce 1963 provedeny investice pro zm\u011bnu provozu na tepl\xe1rensk\xfd a v 1964 za\u010dala fungovat jako tepl\xe1rna.","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.575666666666667,50.52280555555556],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":16,"name":"Hodon\xedn","place":"Hodon\xedn, ul. elektr\xe1rensk\xe1","years_in_service":"1951-sou\u010dasnost","power":"205 MW","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarna-hodonin-58184","sources2":"","type":"uheln\xe1","owner":"\u010cEZ a.s.","description_short":"Elektr\xe1rna Hodon\xedn pat\u0159\xed mezi elektr\xe1rny \u010cEZ, kter\xe9 aktu\xe1ln\u011b spaluj\xed krom\u011b uhl\xed i\xa0biomasu. Byla postavena ve dvou etap\xe1ch v\xa0letech 1951-1957. V\xfdb\u011br lokality pro jej\xed v\xfdstavbu vych\xe1zel z\xa0m\xedstn\xedch podm\xednek, bl\xedzkosti lignitov\xe9ho dolu a\xa0\u0159eky Moravy. S\xa0vyu\u017eit\xedm lignitu s\xa045% obsahem vody pro pr\xe1\u0161kov\xe9 spalov\xe1n\xed nebyly v\xa050. letech \u017e\xe1dn\xe9 zku\u0161enosti, proto soub\u011b\u017en\u011b se zpracov\xe1n\xedm projektov\xe9 dokumentace elektr\xe1rny prob\xedhaly i\xa0zkou\u0161ky s\xa0p\u0159edsou\u0161en\xedm a\xa0mlet\xedm lignitu. K\xa0datu uveden\xed elektr\xe1rny do provozu se poda\u0159ilo technick\xe9 probl\xe9my vy\u0159e\u0161it, i\xa0kdy\u017e v\xa0n\u011bkter\xfdch obdob\xedch se zde spalovalo sokolovsk\xe9 hn\u011bd\xe9 uhl\xed.","description1":"P\u016fvodn\u011b bylo v\xa0elektr\xe1rn\u011b instalov\xe1no osm pr\xe1\u0161kov\xfdch kotl\u016f, ka\u017ed\xfd o\xa0v\xfdkonu 125 tun p\xe1ry/hod. Vyrobeny byly v\xa0ZVU Hradec Kr\xe1lov\xe9 a\xa0uspo\u0159\xe1d\xe1ny do bloku, tak\u017ee v\xa0roce 1954 za\u010dal pracovat blok \u010dty\u0159 kotl\u016f se dv\u011bma 50 MW turb\xednami. Tyto turb\xedny ze \u0160kody Plze\u0148 byly prvn\xed 50 MW turb\xedny instalovan\xe9 v\xa0\u010ceskoslovensku. V\xa0roce 1957 byly spu\u0161t\u011bny do provozu dal\u0161\xed dva kotle s\xa050 MW turb\xednou a\xa0v\xa0roce 1958 posledn\xed dva kotle s\xa0turb\xednami 55 MW. Se sv\xfdm v\xfdkonem 205 MW byla v\xa0t\xe9 dob\u011b Elektr\xe1rna Hodon\xedn nejv\u011bt\u0161\xedm zdrojem elekt\u0159iny v\xa0\u010ceskoslovensku. V\xa0roce 1966 se celkov\xfd v\xfdkon elektr\xe1rny zv\xfd\u0161il na 210 MW rekonstrukc\xed dvou 50 a\xa055 MW turbogener\xe1tor\u016f na 55 MW. V\u0161echny zdej\u0161\xed turb\xedny jsou kondenza\u010dn\xed, s\xa0pr\u016fto\u010dn\xfdm chlazen\xedm. \xdapravou pro\u0161ly tak\xe9 kotle, jejich\u017e v\xfdkon se zv\xfd\u0161il ze 125 tun p\xe1ry/hod na 135 tun p\xe1ry/hod.","description2":"Ji\u017e v roce 1963 za\u010dala elektr\xe1rna Hodon\xedn ztr\xe1cet na v\xfdznamu s v\xfdstavbou nov\xfdch 100 a 200 MW blok\u016f a p\u0159ech\xe1z\xed na tepl\xe1rensk\xfd provoz.","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[17.119944444444446,48.84572222222222],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":17,"name":"Tisov\xe1 I","place":"Sokolov, Tisov\xe1 2","years_in_service":"1958-sou\u010dastnost","power":"200 MW","sources1":"https://www.sokolov-vychod.cz/elektrarna-tisova","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010cEZ a.s.","description_short":"Elektr\xe1rnu od jej\xedho po\u010d\xe1tku tvo\u0159ila \u010dty\u0159i turbosoustroj\xed o v\xfdkonu 50 MW. V roce 1964 bylo zde a v elektr\xe1rn\u011b Tisov\xe1 II vyrobeno skoro 10 % ve\u0161ker\xe9 elekt\u0159iny v \u010ceskoslovensku a jednalo se o nejv\u011bt\u0161\xed elektr\xe1rensk\xfd komplex v t\xe9to zemi. Pot\xe9 mezi lety 1983 a 1987 do\u0161lo k rozs\xe1hl\xe9 rekonstrukci, kter\xe1 vedla k tomu, \u017ee se z elektr\xe1rny stala kogenera\u010dn\xed v\xfdrobna elekt\u0159iny a tepla.  V \u010dervnu roku 1998 do\u0161lo k odstaven\xed jednoho z blok\u016f. V kogenera\u010dn\xedm re\u017eimu funguje v\xfdrobna i dnes.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[12.6073738,50.1500848],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":18,"name":"Tisov\xe1 II","place":"Sokolov, Tisov\xe1 2","years_in_service":"1963-sou\u010dastnost","power":"330 MW, 110 MW (1991)","sources1":"https://www.sokolov-vychod.cz/elektrarna-tisova","sources2":"https://www.cez.cz/edee/content/file/static/encyklopedie/vykladovy-slovnik-energetiky/hesla/uh_el_tis.html","type":"hn\u011bdouheln\xe1","owner":"\u010cEZ a.s.","description_short":"Elektr\xe1rna byla dostav\u011bnu roku 1963 a byly zde poprv\xe9 v \u010ceskoslovensku pou\u017eity bloky 110 MW. N\xe1sleduj\xedc\xed rok vyrobily elektr\xe1rny Tisov\xe1 I a Tisov\xe1 II skoro 10 % elekt\u0159iny v \u010ceskoslovensku.","description1":"Do elektr\xe1rny bylo d\xe1le investov\xe1no v r\xe1mci ekologick\xfdch program\u016f. V roce 1992 byla provedena instalace elektrick\xe9ho odlu\u010dova\u010de a v n\xe1sleduj\xedc\xedch 5 letech i odsi\u0159ovac\xedch jednotek. Z\xe1rove\u0148 zde byl nahrazen\xed p\u016fvodn\xedch kotl\u016f (o parn\xedm v\xfdkonu 125 t/h) za kotle s parn\xedm v\xfdkonem 350 t/h, co\u017e byla prvn\xed instalace takov\xfdchto kotl\u016f na \u010desk\xe9m \xfazem\xed. ","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[12.6078738,50.1500848],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":19,"name":"Po\u010derady I","place":"Obec Po\u010derady","years_in_service":"1970-sou\u010dastnost","power":"400 MW, 800 MW (1971), 1200 MW (1978), 800 MW (1994)","sources1":"https://www.svetenergie.cz/cz/energetika-zblizka/uhelne-elektrarny/uhelne-elektrarny-cez/elektrarna-pocerady","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010cEZ a.s.","description_short":"Podle projektu, kter\xfd se za\u010dal p\u0159ipravovat v \u0159\xedjnu 1959, byla Elektr\xe1rna Po\u010derady postavena jako klasick\xe1 kondenza\u010dn\xed elektr\xe1rna s \u0161esti 200MW bloky. Postupn\u011b se uv\xe1d\u011bly do provozu v letech 1970 a\u017e 1977.","description1":"V r\xe1mci \xfatlumov\xe9ho programu uheln\xfdch elektr\xe1ren byl k 1. 1. 1994 odstaven z provozu v\xfdrobn\xed blok \u010d. 1. Ostatn\xed bloky pro\u0161ly mezi lety 1990 a\u017e 2000 rozs\xe1hl\xfdm moderniza\u010dn\xedm a ekologick\xfdm programem. Z\xe1kladn\xed technick\xe1 koncepce v\xfdrobn\xedch blok\u016f je stejn\xe1 a v\u0161echny bloky jsou od konce roku 2001 \u0159\xedzen\xe9 z jedn\xe9 spole\u010dn\xe9 technologick\xe9 dozorny. ","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.6808653,50.4275549],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":20,"name":"Plze\u0148","place":"p\u016fvodn\xed pivovarsk\xfd park","years_in_service":"1907-1986","power":"neuveden","sources1":"https://www.prazdroj.cz/1563-bsval-pivovarsk-elektr-rna-plze-sk-ho-prazdroje-otije-inspirativn-mi-peedn-ikami-27-listopadu-bude-hostit-patn-ctou-pechakucha-night-plze","sources2":"","type":"uheln\xe1","owner":"Plze\u0148sk\xfd Prazdroj","description_short":"Elektr\xe1rna byla uvedena do provozu ji\u017e na p\u0159elomu let 1907/1908 a jej\xed energie nap\xe1jela 134 motor\u016f, 120 obloukov\xfdch lamp a zhruba 6 200 \u017e\xe1rovek. Mimo vlastn\xed pot\u0159ebu pivovaru dod\xe1vala elektr\xe1rna proud tak\xe9 do obc\xed Doubravka, \xdajezd, Hr\xe1dek a kr\xe1tce tak\xe9 na Letnou","description1":"Elektr\xe1rna slou\u017eila i\xa0p\u0159es zna\u010dn\xe1 v\xe1le\u010dn\xe1 poni\u010den\xed a\xa0\u0159adu rekonstrukc\xed a\u017e do\xa0roku 1986, kdy byl cel\xfd pivovarsk\xfd z\xe1vod napojen na plze\u0148skou tepl\xe1rnu.","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.3885039,49.7482872],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":21,"name":"P\u0159espoln\xed elektr\xe1rna Franze Haniky","place":"Plan\xe1 u Mari\xe1nsk\xfdch L\xe1zn\xed","years_in_service":"1912-???","power":"0,373 MW","sources1":"https://pamatkovykatalog.cz/prespolni-elektrarna-franze-haniky-16008048","sources2":"MIKE\u0160, Jan.\xa0Elektrifikace \u010ceskoslovenska do roku 1938. Online, Diserta\u010dn\xed pr\xe1ce, vedouc\xed Efmertov\xe1, Marcela. Praha: Univerzita Karlova, Filozofick\xe1 fakulta, 2016. Dostupn\xe9 z:\xa0https://dspace.cuni.cz/handle/20.500.11956/83800. [cit. 2023-11-18].","type":"uheln\xe1","owner":"rodina Hanik\u016f -> n.p. Z\xe1pado\u010desk\xe9 Elektr\xe1rny","description_short":"P\u0159espoln\xed elektr\xe1rna vybudovan\xe1 p\u0159estavbou z b\xfdval\xe9ho ml\xfdna rodiny Hanik\u016f v Plan\xe9 v roce 1912. K elektr\xe1rn\u011b p\u0159idru\u017eena drobn\xe1 elektrotechnick\xe1 v\xfdroba. Elektr\xe1rna plan\xe9 z\xe1sobovala na pades\xe1t okoln\xedch obc\xed.\xa0","description1":"Elektr\xe1rna krom\u011b jedn\xe9 parn\xed turb\xedny o v\xfdkonu 500 HP obsahovala tak\xe9 dv\u011b vodn\xed turb\xedny o v\xfdkonu 110 HP a elektrickou rozvodnu, kter\xe1 rozv\xe1d\u011bla elekt\u0159inu pomoc\xed veden\xed na 5 kV.","description2":"Po druh\xe9 sv\u011btov\xe9 v\xe1lce byla elektr\xe1rna zkonfiskov\xe1na, pozd\u011bji se z n\xed stala u\u017e jen rozvodna a pot\xe9 sklad a d\xedlny.","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[12.739555555555555,49.86216666666667],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":22,"name":"Trmice","place":"Trmice","years_in_service":"1916-1959","power":"6 MW, roz\u0161\xed\u0159en\xed 59,8 MW","sources1":"cez","sources2":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/teplarna-trmice-58160","type":"uheln\xe1","owner":"Nordb\xf6hmische Elektrizit\xe4tswerke","description_short":"Na popud nedostate\u010dn\xe9ho elektrick\xe9ho v\xfdkonu v severn\xedch \u010cech\xe1ch byla v roce 1914 zah\xe1jena v\xfdstavba Trmick\xe9 elektr\xe1rny spole\u010dnost\xed Nordb\xf6hmische Elektrizit\xe4tswerke. Stavba byla dokon\u010dena o dva roky pozd\u011bji v roce 1916. Do provozu se tak uvedly \u010dty\u0159i kotle spolu s turbosoustroj\xedm o v\xfdkonu 6 MW. Po dal\u0161\xedch investic\xedch do elektr\xe1rny do\u0161lo k nav\xfd\u0161en\xed v\xfdkonu a v roce 1939 \u010dinil instalovan\xfd v\xfdkon u\u017e  59,8 MW, co\u017e p\u0159edstavovalo p\u0159ibli\u017en\u011b 7 % v\xfdkonu v cel\xfdch \u010cech\xe1ch. V roce 1959 za\u010dala rekonstrukce elektr\xe1rny v tepl\xe1rensk\xfd celek. Rekonstrukce byla dokon\u010dena v roce 1974.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.98562,50.6457680302681],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":23,"name":"Oslavany","place":"Oslavany","years_in_service":"1913-1993","power":"2x3,4 MW po uveden\xed do provozu, maxim\xe1ln\u011b a\u017e 115 MW po modernizac\xedch a navy\u0161ov\xe1n\xed","sources1":"http://www.rosicko-oslavansko.cz/13-historie/32-elektrarna-oslavany/","sources2":"","type":"\u010derno uheln\xe1","owner":"OELAG","description_short":"Elektr\xe1rna v Oslavanech byla ofici\xe1ln\u011b zah\xe1jena 1. dubna 1913. Elektrick\xfd proud se pomoc\xed dvojit\xe9ho veden\xed o 44 tis\xedc volt\u016f transportoval do \u010cernovic a n\xe1sledn\u011b k odb\u011bratel\u016fm v Brn\u011b a okol\xed. Modernizace z p\u016fvodn\xedho v\xfdkonu 2x3,4 MW stimulovala velk\xe1 popt\xe1vka po elektrick\xe9 energii na za\u010d\xe1tku prvn\xed sv\u011btov\xe9 v\xe1lky. Popt\xe1vka nar\u016fstala i nad\xe1le po v\xe1le\u010dn\xe9m obdob\xed a tak po dal\u0161\xedm navy\u0161ov\xe1n\xed \u010dinil instalovan\xfd v\xfdkon v roce 1929 ji\u017e 49,8 MW. Po rozhodnut\xed rady spr\xe1vy Z\xe1padomoravsk\xfdch elektr\xe1ren byla na m\xedst\u011b star\xe9 kotelny postavena v roce 1941 kotelna nov\xe1. Modernizac\xed p\u0159o\u0161la i strojovna, ve kter\xe9 byla v rozmez\xed let 1942-1950 uvedena soustroj\xed o instalovan\xe9m v\xfdkonu 63 MW. Posl\xe9ze byl v roce 1964 postaven nov\xfd modern\xed blok o v\xfdkonu 50 MW. Maxim\xe1lni v\xfdkon elektr\xe1rny tak vzrostl na 115 MW. Provoz elektr\xe1rny byl ukon\u010den v roce 1993 kv\u016fli p\u0159eru\u0161en\xed dod\xe1vky uhl\xed z rosicko-oslavansk\xe9ho rev\xedru.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[16.343757,49.1205036442399],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":24,"name":"Erv\u011bnice I","place":"Komo\u0159any u Mostu","years_in_service":"1926-1965","power":"45 MW, pozd\u011bji 70 MW","sources1":"https://cs.wikipedia.org/wiki/Zanikl%C3%A9_elektr%C3%A1rny_v_%C4%8Cesku#Elektr%C3%A1rna_Erv%C4%9Bnice","sources2":"\u0160EMBERA, Franti\u0161ek.\xa0Erv\u011bnick\xe1 elektr\xe1rna. Praha: Franti\u0161ek \u0160embera, 1926","type":"uheln\xe1-hn\u011bd\xe9","owner":"\xdast\u0159edn\xed elektr\xe1rny a.s. v Praze","description_short":"Stimulem pro v\xfdstavbu elektr\xe1rny Erv\u011bnice byla rostouc\xed popt\xe1vka po elektrick\xe9 energii ve dvac\xe1t\xfdch letech minul\xe9ho stolet\xed v Praze a z\xe1rove\u0148 i v\u0161eobecn\xe1 elektrifikace republiky. V\xfdstavbu zaji\u0161\u0165ovala spole\u010dnost \xdast\u0159edn\xed elektr\xe1rny. Lokalita byla p\u0159\xedhodn\xe1 kv\u016fli nedalek\xe9mu hn\u011bdouheln\xe9mu lomu Hedvika. Po uveden\xed do provozu v roce 1926 \u010d\xedtal instalovan\xfd v\xfdkon elektr\xe1rny 45 MW a o \u0161est let pozd\u011bji byl spu\u0161t\u011bn nov\xfd blok o v\xfdkonu 25 MW. Po obsazen\xed sudet byla v roce 1939 elektr\xe1rna ve vlastnictv\xed \u0159\xed\u0161sk\xe9 spole\u010dnosti Elektrowerke, A. G., Berlin. Provoz elektr\xe1rny byl ukon\u010den v roce 1965.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.544864,50.5271203085051],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":25,"name":"Erv\u011bnice II","place":"Komo\u0159any u Mostu","years_in_service":"1948-1980","power":"160 MW","sources1":"https://cs.wikipedia.org/wiki/Zanikl%C3%A9_elektr%C3%A1rny_v_%C4%8Cesku#Elektr%C3%A1rna_Erv%C4%9Bnice","sources2":"\u0160EMBERA, Franti\u0161ek.\xa0Erv\u011bnick\xe1 elektr\xe1rna. Praha: Franti\u0161ek \u0160embera, 1926","type":"uheln\xe1-hn\u011bd\xe9","owner":"Elektrowerke, A. G., Berlin","description_short":"B\u011bhem obdob\xed druh\xe9 sv\u011btov\xe9 v\xe1lky doch\xe1zelo k rozmachu pr\u016fmyslu v okol\xed elektr\xe1rny Erv\u011bnice I. Na popud tohoto rozmachu byla postavena elektr\xe1rna Erv\u011bnice II, kter\xe1 byla uvedena do provozu v rozmez\xed let 1948 a 1950. Do provozu bylo uvedeno celkem 5 turbosoustroj\xed o celkov\xe9m v\xfdkonu 160 MW (5x32 MW). Elektr\xe1rna Erv\u011bnice II byla z\xe1sobov\xe1na hn\u011bd\xfdm uhl\xfdm z hn\u011bdouheln\xe9ho lomu Hedvika. Provoz elektr\xe1rny Erv\u011bnice II byl ukon\u010den v roce 1980.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.545364000000001,50.5271203085051],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":26,"name":"Po\u0159\xed\u010d\xed I","place":"Trutnov","years_in_service":"1914-1957","power":"4,5 MW, pozd\u011bji 26 MW a pak 6 MW","sources1":"https://cs.wikipedia.org/wiki/Zanikl%C3%A9_elektr%C3%A1rny_v_%C4%8Cesku#Elektr%C3%A1rna_Po%C5%99%C3%AD%C4%8D%C3%AD_1","sources2":"https://krkonossky.denik.cz/zpravy_region/epo1-se-chysta-k-otevreni-nabidne-umeni-v-turbinove-hale-i-rozvodnach-energie-20.html","type":"Uheln\xe1","owner":"Svaz hospod\xe1\u0159sk\xfdch dru\u017estev pro odb\u011br elektrick\xe9 energie","description_short":"Elektr\xe1rna Po\u0159\xed\u010d\xed I uveden\xe1 do provozu v roce 1914 dod\xe1vala elektrickou energii do 60 m\u011bst a o obc\xed v Trutnovsk\xe9m regionu. Instalovan\xfd v\xfdkon elektr\xe1rny \u010dinil 4,5 MW, energii pro gener\xe1tor dod\xe1valo 6 kotl\u016f. V n\xe1sleduj\xedc\xedch letech prob\u011bhla modernizace a instalovan\xfd v\xfdkon v\u0161plhal a\u017e na 26 MW. V obdob\xed druh\xe9 sv\u011btov\xe9 v\xe1lky se v\xfdkon sn\xed\u017eil na 6 MW. Po uveden\xed do provozu elektr\xe1rny Po\u0159\xed\u010d\xed II v roce 1957, byla elektr\xe1rna po\u0159\xed\u010d\xed I odstavena a n\xe1sledn\u011b zru\u0161ena v roce 1970.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.9582431837067,50.5776796889413],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":27,"name":"Po\u0159\xed\u010d\xed II","place":"Trutnov","years_in_service":"1957-sou\u010dastnost","power":"165 MW","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarny-porici-58181","sources2":"https://dspace.cuni.cz/bitstream/handle/20.500.11956/83800/140050101.pdf?sequence=4&isAllowed=y","type":"uheln\xe1","owner":"???","description_short":"Elektr\xe1rna Po\u0159\xed\u010d\xed II za\u010dala fungovat v roce 1957, jako n\xe1hrada elektr\xe1rny Po\u0159\xed\u010d\xed I, s p\u016fvodn\xedmi \u0161esti kotly (jednotkov\xfd v\xfdkon 125 tun p\xe1ry/hodinu), z nich\u017e \u010dty\u0159i byly pozd\u011bji nahrazeny dv\u011bma modern\xedmi kotli fluidn\xedho typu v letech 1996 a 1998. Tyto fluidn\xed kotle, spaluj\xedc\xed hn\u011bd\xe9 uhl\xed, maj\xed ka\u017ed\xfd jmenovit\xfd v\xfdkon 250 tun p\xe1ry/hodinu. Dva z p\u016fvodn\xedch kotl\u016f jsou v sou\u010dasn\xe9 dob\u011b vyu\u017e\xedv\xe1ny jako havarijn\xed rezerva pro vyt\xe1p\u011bn\xed. V strojovn\u011b elektr\xe1rny jsou instalov\xe1ny t\u0159i turbogener\xe1tory s jmenovit\xfdm v\xfdkonem 55 MW ka\u017ed\xfd.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.9631020165296,50.5729064091736],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":28,"name":"Jablonec","place":"Jablonec nad Nisou","years_in_service":"1911-sedmdes\xe1t\xe1 l\xe9ta","power":"2,8 MW","sources1":"https://pamatkovykatalog.cz/tepelna-elektrarna-20269539","sources2":"","type":"uheln\xe1","owner":"???","description_short":"Jabloneck\xe1 elektr\xe1rna byla postavena v roce 1911 podle projektu Josefa Ulricha. Strojovna elektr\xe1rny \u010d\xedtala 4 parn\xed turb\xedny o celkov\xe9m v\xfdkonu p\u0159ibli\u017en\u011b 2,8 MW, kter\xe9 vyr\xe1b\u011bli mechanickou energii pro celkem 10 gener\xe1tor\u016f o v\xfdkonov\xe9m rozp\u011bt\xed 26-1400 kW. Provoz elektr\xe1rny byl v sedmdes\xe1t\xfdch letech 20. stolet\xed p\u0159eorientov\xe1n na kombinovanou v\xfdrobu elektrick\xe9 a tepeln\xe9 energie a v tomto provozu fungovala do 90. let.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.149,50.727],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":29,"name":"Most","place":"Most","years_in_service":"1897-???","power":"2,7 MW","sources1":"MIKE\u0160, Jan.\xa0Elektrifikace \u010ceskoslovenska do roku 1938. Online, Diserta\u010dn\xed pr\xe1ce, vedouc\xed Efmertov\xe1, Marcela. Praha: Univerzita Karlova, Filozofick\xe1 fakulta, 2016. Dostupn\xe9 z:\xa0https://dspace.cuni.cz/handle/20.500.11956/83800. [cit. 2023-11-18].","sources2":"https://de.wikipedia.org/wiki/Stra\xdfenbahn_Most_(Meterspur)","type":"uheln\xe1","owner":"Br\xfcxer Strassenbahn- und Elektrizit\xe4ts-Gesellschaft","description_short":"V roce 1987 postavila belgick\xe1 spole\u010dnost  Societe Anonyme d\'Electricite m\u011bstskou elektr\xe1rnu m\u011bsta Most. Ve stejn\xe9m m\u011bst\u011b zalo\u017eilo m\u011bsto spole\u010dnost Br\xfcxer Strassenbahn- und Elektrizit\xe4ts-Gesellschaft, kter\xe1 se stala provozovatelem m\xedstn\xed uheln\xe9 elektr\xe1rny a posl\xe9ze i vybudovan\xe9 mosteck\xe9 trak\u010dn\xed s\xedt\u011b uveden\xe9 do provozu v roce 1899. Elektr\xe1rna o v\xfdkonu 2,7 MW byla z\xe1sobov\xe1na uhl\xedm z dol\u016f Minerva a Himmelsf\xfcrstschacht. Elektr\xe1rna dod\xe1vala elektrickou energii pro m\u011bsto Most a okol\xed a\u017e po \u017datec.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.6124219607144,50.5155852529745],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":30,"name":"Liberec","place":"Liberec","years_in_service":"1906-1922","power":"1,79 MW","sources1":"https://www.pamatkovykatalog.cz/tepelna-elektrarna-24056853","sources2":"","type":"\u010derno uheln\xe1","owner":"Spole\u010dnost libereck\xe9 pouli\u010dn\xed dr\xe1hy","description_short":"Tepeln\xe1 elektr\xe1rna v Liberci vznikla v roce 1906 roz\u0161\xed\u0159en\xedm trak\u010dn\xed elektr\xe1rny. Dva ro\u0161tov\xe9 kotle spalovaly ro\u010dn\u011b 5000-6000 tun \u010dern\xe9ho uhl\xed ro\u010dn\u011b. Ve strojovn\u011b elektrickou energii v\xfdr\xe1b\u011blo dohromady 5 gener\xe1tor\u016f o celkov\xe9m instalovan\xe9m v\xfdkonu 1,79 MW. Sou\u010d\xe1st\xed strojovny byly z\xe1rove\u0148 z\xe1lo\u017en\xed elektrochemick\xe9 akumul\xe1tory. V tomto re\u017eimu pracovala elektr\xe1rna a\u017e do roku 1922, kdy byla nahrazena elektr\xe1rnou v And\u011blsk\xe9 Ho\u0159e, Jablonci, sask\xe9m Hirschfelde a machn\xednskou vodn\xed elektr\xe1rnou.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.051,50.763],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":31,"name":"\xdast\xed nad Labem","place":"na \u0160pit\xe1lk\xe9m n\xe1m\u011bst\xed","years_in_service":"1899-1922","power":"???","sources1":"https://tramvajeusti.webnode.cz/products/areal-spitalske-namesti/","sources2":"https://ustecky.denik.cz/zpravy_region/20100607_wv_teplarna_spitalske_prvni_vusti.html","type":"hn\u011bdo uheln\xe1","owner":"AEG Union, pozd\u011bji \u010desky Elektrick\xfd podnik m\u011bsta \xdast\xed","description_short":"\xdasteck\xe1 m\u011bstsk\xe1 elektr\xe1rna byla uvedena do provozu v roce 1899. Elektrick\xfd stejnosm\u011brn\xfd proud byl pou\u017e\xedv\xe1n pro nap\xe1jen\xed tamn\xed trakce, m\u011bstsk\xfdch sv\u011bteln\xfdch okruh\u016f a pro \xfa\u010dely pr\u016fmyslov\xe9 byl transformov\xe1n na proud st\u0159\xeddav\xfd. V roce 1922 byl provoz elektr\xe1rny p\u0159etvo\u0159en na tepl\xe1renskou v\xfdrobu. \xdast\xed nad Labem bylo tak prvn\xedm m\u011bstem na na\u0161em \xfazem\xed, kter\xe9 m\u011blo d\xe1lkov\xe9 vyt\xe1p\u011bn\xed dom\xe1cnost\xed a podnik\u016f. Tepl\xe1rna byla v provozu a\u017e do roku 1968.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[14.0320322122695,50.6620434852601],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":32,"name":"Hole\u0161ovick\xe1 elektr\xe1rna","place":"Praha - Hole\u0161ovice","years_in_service":"1900-","power":"1908- 8924 kW,, 1910 nov\xe1 turb\xedna,22MW","sources1":"https://cs.wikipedia.org/wiki/Zanikl%C3%A9_elektr%C3%A1rny_v_%C4%8Cesku#Elektr%C3%A1rna_Praha-Hole%C5%A1ovice","sources2":"http://www.odbornecasopisy.cz/elektro/casopis/tema/co-jsme-psali-pred-100-lety-3-elektrarny-hlav-mesta-prahy--17145","type":"uheln\xe1","owner":"","description_short":"\xdast\u0159edn\xed elektrick\xe1 stanice kr\xe1lovsk\xe9ho m\u011bsta Prahy byla vybudov\xe1na v letech 1898-1900. P\u016fvodn\u011b byla osazena parn\xedmi stroji a slou\u017eila k dod\xe1vk\xe1ch el. energie pro nap\xe1jen\xed tramvaj\xed. Postupn\u011b byla roz\u0161i\u0159ov\xe1na a modernizov\xe1na. Po vyd\xe1n\xed z\xe1kona o velk\xe9 Praze se stava centr\xe1ln\xed elektr\xe1rnou. Byla prvn\xed elektr\xe1rnou na \xfazem\xed dne\u0161n\xed Prahy vyr\xe1b\u011bj\xedc\xed st\u0159\xeddav\xfd proud.","description1":"Elektr\xe1rna byla vybudov\xe1na takticky na b\u0159ehu Vltavy nedaleko n\xe1dra\u017e\xed Hole\u0161ovice, aby bylo mo\u017en\xe9 dov\xe1\u017eet pomoc\xed vle\u010dky uhl\xed pro provoz. ","description2":"Strojn\xedm vybaven\xedm elkr\xe1rny bylo po uveden\xed do provozu 5 parn\xedch stroj\u016f ka\u017edy po 1000 HP (745,7 kW). V roce 1903 byla roz\u0161\xed\u0159ena o dal\u0161\xed parn\xed stroj o v\xfdkonu 3000 HP (2,24 MW). V roce 1910 byla osazena prvn\xed  parn\xed turb\xednou v n\xe1sleduj\xedc\xedch letech byla osazov\xe1na dal\u0161\xedmi uheln\xfdmi kotli a parn\xedmi kondenza\u010dn\xedmi turb\xednami jej\xed celkov\xfd v\xfdkon \u010dinil 22 MW. V roce 1925 se spustil kombinovan\xfd provoz, sputili se tedy dod\xe1vky tepla pro Prahu. ","description3":"V letech 1971-1975 byla p\u0159ebudov\xe1na na spalov\xe1n\xed t\u011b\u017ek\xe9ho topn\xe9ho oleje a p\u0159ebudov\xe1na na tepl\xe1rnu. Postupn\u011b byly zbo\u0159eny 3 ze \u010dty\u0159 dominantn\xedch kom\xedn\u016f. Od roku 1981 se jedn\xe1 o pam\xe1tkov\u011b chr\xe1n\u011bn\xfd objekt.","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[14.435645,50.1091711],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":33,"name":"Karl\xedn","place":"Praha - Karl\xedn","years_in_service":"1894-1939","power":"","sources1":"","sources2":"","type":"uheln\xe1","owner":"Franti\u0161ek K\u0159i\u017e\xedk ","description_short":"Byla postavena v letech 1892-1894 jako jedna z prvn\xedch obecn\xedch elektr\xe1rem v \u010cech\xe1ch. Dod\xe1vala stejnosm\u011brn\xfd proud do obloukov\xfdch lamp Karl\xednsk\xe9ho ve\u0159ejn\xe9ho osv\u011btlen\xed.","description1":"Byla vybavena 4 parn\xedmi kotli a dynamy, zbytkov\xe9 teplo z kotl\u016f bylo vyu\u017eito k vyt\xe1p\u011bt\xed lidov\xfdch l\xe1zn\xed a p\u0159ilehl\xe9 pr\xe1delny. Dominatou elektr\xe1rny je 30 m vysok\xfd kom\xedn. Kter\xfd byl v roce 1960 staticky zaji\u0161t\u011bn a stoj\xed jako p\u0159ipom\xednka b\xfdval\xe9 elektr\xe1rny dodnes.","description2":"Po roce 1939 slou\u017eila ji\u017e pouze jako m\u011bn\xedrna a z m\xedst kotl\u016f se staly sklady. Po roce 1945 s\xeddlila v are\xe1lu opravna transform\xe1tor\u016f, d\xedlny \u010cSAD a kancel\xe1\u0159e.","description3":"Na obr\xe1zku je sou\u010dasn\xe1 podoba m\xedsta b\xfdvval\xe9 elektr\xe1rny, kde byl zachov\xe1n kom\xedn","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[14.450583333333332,50.09054722222223],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":34,"name":"Pardubice","place":"ulice Arno\u0161ta z Pardubic","years_in_service":"1904","power":"(15 MW)","sources1":"https://pamatkovykatalog.cz/elektrarna-mesta-pardubic-24537972","sources2":"","type":"\u010derno uheln\xe1","owner":"Franti\u0161ek K\u0159i\u017e\xedk -> m\u011bsto Pardubice-> \u010cEZ","description_short":"Postavena firmou Fr. K\u0159i\u017e\xedka, uvdena do provozu roku 1905. V roce 1911 ji vykupoupilo m\u011bsto Pardubice a st\xe1v\xe1 se m\u011bstskou elektr\xe1rnou, tedy slou\u017e\xed pro elektrifikaci Pardubic. Po vzniku \u010cSR a p\u0159ijet\xed elektrifika\u010dn\xedho z\xe1kona \u010d. 438/1919 Sb. a na\u0159. R\u010cS se st\xe1v\xe1 elektr\xe1rnou svazovou z\xe1sobuj\xedc\xed \u0161irok\xe9 okol\xed. Postupn\u011b (ve 20. a 30. letech proch\xe1z\xed elektr\xe1rna modernizac\xed. Po druh\xe9 sv\u011btov\xe9 v\xe1lce byla pou\u017e\xedv\xe1na jako tepl\xe1rna a p\u0159estav\u011bna na spalov\xe1n\xed mazutu, v souvislosti s v\xfdrobou v Paramu (mazut odpadn\xed produkt).","description1":"Elektr\xe1rna byla vybavena 8 parn\xedmi kotly kter\xe9 z\xe1sobovali parou 3 turb\xedny s v\xfdkonem v sou\u010dtu 10680 (7964 kW) a 3 parn\xed stroje o v\xfdkonech 2x200hp (149 kW) a 1x400hp (298 kW). Elekt\u0159inu vyr\xe1b\u011bla 3 dynama o v\xfdkonu 2x100 kW a 1x270 kW rozvod elkt\u0159iny byl tedy stejnosm\u011brn\xfd. V letech 1912 a 1916 byly osazeny dva turogener\xe1tory o v\xfdkonech 1000 a 1100 kW (st\u0159\xeddav\xe9), p\u0159i modernizaci ve 20. letech p\u0159ibyl v roce 1924 turbogener\xe1tor o v\xfdkonu 5 MW. P\u0159ibyly tak\xe9 sychronn\xed konvertory pro transformaci stejnosm\u011brn\xe9ho proudu z dynam na st\u0159\xeddav\xfd do tehdej\u0161\xedho rozvodu. V roce 1937 elektr\xe1rn\u011b p\u0159ibyla tepl\xe1rensk\xe1 funkce a z\xe1sobovala telep \u010d\xe1st Parbubic. Po druh\xe9 sv\u011btov\xe9 v\xe1lce p\u0159e\u0161la pln\u011b na tepl\xe1renskou funkci, kterou plnila do roku 2001. Z\xe1sobov\xe1n\xed Pardubic teplem je realizov\xe1no v elektr\xe1rny/tepl\xe1rny <span class=\\"description-link 38\\">Opatovice</span>.","description2":"V sou\u010dasn\xe9 dob\u011b v are\xe1liu s\xeddl\xed n\u011bkolik spole\u010dnost\xed. V b\xfdvyl\xe9 elktr\xe1rn\u011b se nach\xe1z\xed plynov\xfd kotel a slou\u017e\xed jako z\xe1lo\u017en\xed zdroj pro vyt\xe1p\u011bn\xed Pardubic. Je pod spr\xe1vou spole\u010dnosti \u010cEZ. ","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.7775633,50.0328394],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":35,"name":"Kol\xedn, p\u016fvodn\xed","place":"K\u0159i\u017e\xedkova, lev\xfd b\u0159eh Labe","years_in_service":"1916-193x","power":"Nen\xed zn\xe1mo","sources1":"https://www.cestyapamatky.cz/kolinsko/kolin/tepelna-elektrarna","sources2":"","type":"Uhl\xed","owner":"Franti\u0161ek K\u0159i\u017e\xedk -> ESSO","description_short":"Elektr\xe1rna byla v Kol\xedn\u011b postavena pro nap\xe1jen\xed obloukov\xfdch lamp nach\xe1zej\xedc\xedch se nejprve v prostor\xe1ch Horsk\xe9ho cukrovaru, aby nahradila malou podnikovou elktr\xe1rni\u010dku. B\\\\la postavena firmou Franti\u0161ka K\u0159i\u017e\xedka v letech 1911-1912 v prostoru mezi ulicemi  Pod Hroby a Zengrova (dnesn\xed pr\u016fmyslov\xe1 z\xf3na). Na elektr\xe1rnu bylo postupn\u011b p\u0159ipojeno 37 obc\xed. V roce 1916 prodal Fr, K\u0159i\u017e\xedk elektr\xe1rnu spole\u010dnosti ESSO (Elektr\xe1rensk\xfd svaz st\u0159edolabsk\xfdch okres\u016f), kter\xe1 ji v letech 1916-18 zmodernizovala. Ve 20. letech zv\xfd\u0161ila spot\u0159eba el. energie na tolik, \u017ee ji\u017e tato elktr\xe1rna v\xfdkonem nesta\u010dila a tak v letech 1930-32byal vybudov\xe1na spole\u010dnost\xed ESSO <span class=\\"description-link 36\\">nov\xe1 elektr\xe1rna</span> na druh\xe9m b\u0159ehu Labe.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.2145008,50.0234172],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":36,"name":"Kol\xedn, sou\u010dasn\xe1","place":"prav\xfd b\u0159eh Labe","years_in_service":"1932-doposud","power":"239,7 MW","sources1":"https://www.cestyapamatky.cz/kolinsko/kolin/tepelna-elektrarna","sources2":"","type":"Uhl\xed","owner":"p\u016fvodn\u011b ESSO, nyn\xed Veolia","description_short":"Elekr\xe1rna byla vybudov\xe1na na m\xedst\u011b b\xfdval\xe9ho Horsk\xe9ho cukrovaru na prav\xe9m b\u0159ehu Labe v \u010d\xedsti Z\xe1lab\xed. Je \u010dasto citov\xe1na fako architektonick\xe1 pam\xe1tka postaven\xe1 ve stylu funkcionalismu architektem Jaroslavem Fragnerem. P\u016fvodn\u011b byl navr\u017een a postaven d\u011bn\xfd kom\xedn vysok\xfd 117 m a \u0161irok\xfd 5 m, kter\xfd byl tehdy nejvy\u0161\u0161\xedm kom\xednem v Evrop\u011b. Elketr\xe1rna byla osozena uheln\xfdmi kotli a 3 parn\xedmi turb\xednami (st\u0159\xeddav\xfd proud). Po roce 1948 baly zn\xe1rodn\u011bna a byla p\u0159id\xe1na do Tepl\xe1rensk\xfdch z\xe1vod\u016f Praha - Hole\u0161ovice, p\u0159e\u0161la \u010d\xe1ste\u010dn\u011b na tepl\xe1rensk\xfd provoz a bylo v jedn\xe1ni jej\xed zru\u0161en\xed. V 60. letech bylo rozhodnuto o jej\xedm z\xe1niku byl rozhodnuto o zru\u0161en\xed v\u0161ech 3 turb\xedn a p\u0159e\u0161la na tepl\xe1rensk\xfd provoz. Elektr\xe1rnu na \u010das zachr\xe1nila op\u011bt stoupaj\xedc\xed popt\xe1vka o elektrickou energii, kdy v roce 1984 byl zprovozn\u011bn kotel na hn\u011bd\xe9 uhl\xed. \xdapln\xe9 odstaven\xed elektr\xe1rny (i tepl\xe1rny) bylo pl\xe1nov\xe1no na rok 1989 v souvislosti s v\xfdstavbou parn\xedho nap\xe1je\u010de z <span class=\\"description-link 37\\">el. Chvaletice</span>. Na\u0161t\u011b\u0161n\xed (pro elektr\xe1rnu) do\u0161lo ke zm\u011bn\u011b politick\xfdch a spole\u010densk\xfdch pom\u011br\u016f. V roce 1992 vznikla akciov\xe1 spole\u010dnost Elektr\xe1rna Kol\xedn, bylo rozhodnuto k n\xe1vrtu k v\xfdrob\u011b elekt\u0159iny a v roce 1994 byl spu\u0161t\u011bn provoz kotle K6 pro spalov\xe1n\xed plynu. Elekr\xe1rna do sou\u010dasnostije\u0161t\u011b n\u011bkolikr\xe1t zm\u011bnila majitele a v roce 2003 v n\xed byl uveden do provozu sou\u010dasn\xfd hlavn\xed zdroj hn\u011bdouheln\xfd kotel K8. V sou\u010dasnosti je majitelem spole\u010dnosti Veolia.       ","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.209115,50.0303975],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":37,"name":"Chvaletice","place":"Chvaletice, Trn\xe1vka (n\u011bkde mezi)","years_in_service":"1979-doposud","power":"820","sources1":"","sources2":"","type":"uheln\xe1","owner":"V sou\u010dasnoti 7 energy","description_short":"Postavena v letch 1973-1979 na m\xedst\u011b po t\u011b\u017eb\u011b pyritu. Do roku 2021 \u0161lo o nejlad\u0161\xed uhelnou elektr\xe1rnu v \u010cR. M\xe1 4 hm\u011bdouhlen\xe9 kotle a 4 rovnotlak\xe9 kondenza\u010dn\xed turb\xedny, nap\u011bt\xed na svork\xe1ch gener\xe1toru je 15,75 kV a je pomoc\xed blokov\xfdch transform\xe1tor\u016f p\u0159ev\xe1d\u011bno a p\u0159ipojeno na linku 400 kW. Elketr\xe1rna je typick\xe1 sv\xfdm 300 m vysok\xfdm kom\xednem a 4 100 m vysok\xfdmi a 60 m  v r\u016fm\u011bu m\u011b\u0159ic\xedmi chladic\xedmi v\u011b\u017eemi. Po roce 1989 byla elektr\xe1rna provozov\xe1na spole\u010dnost\xed \u010cEZ. V roce 2011 bylo uva\u017eov\xe1no  zru\u0161en\xed elektr\xe1rny,p\u0159\xedpadn\u011b jej\xedm prodeji, jedn\xedm z d\u016fvod\u016f byl n\xe1kup emes\xedch povolenek a obecn\u011b problematika vypou\u0161t\u011bn\xfdch emis\xed. Elektr\xe1rna se nakonec dostala spole\u010dnosti Sev.en EC, kter\xe1 v roce 2016 zah\xe1jila jej\xed modernizaci ke sn\xed\u017een\xed vypou\u0161t\u011bn\xfdch emis\xed. Krom\u011b elekr\xe1rensk\xe9ho provozu je odpadn\xed teplo vyu\u017e\xedv\xe1no k dod\xe1vk\xe1m tepla do m\u011bsta Chvaletice, obce Trn\xe1vka, dvou pr\u016fmyslov\xfdch are\xe1l\u016f mezi m\u011bstem a elektr\xe1rnou a pro vlastn\xed provoz elektr\xe1rny. Od pl\xe1novan\xe9ho parovodu do <span class=\\"description-link 36\\">Kol\xedna</span> bylo nakonec upu\u0161t\u011bno, byl by neefektivn\xed.   ","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.452777777777778,50.02861111111111],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":38,"name":"Opatovice","place":"","years_in_service":"1959-doposud","power":"360","sources1":"https://www.eop.cz/historie-soustavy","sources2":"https://pardubicky.denik.cz/zpravy_region/uhli-v-opatovicich-chteli-soudruzi-nahradit-uranem-20191020.html","type":"Vedeno jako kogenera\u010dn\xed uheln\xe1 elektr\xe1rna","owner":"EOP","description_short":"Uvedena do provozu roku 1959 (prvn\xed blok), od za\u010d\xe1tku pojektov\xe1na pro elektr\xe1rensk\xfd i tepl\xe1rensk\xfd provoz. Skl\xe1d\xe1 se z 6 blok\u016f, kter\xe9 byly v\u0161echny uvedeny do provozu do roku 1960. V roce 1969 byla schv\xe1lena studie CZT (centr\xe1ln\xed z\xe1sobov\xe1n\xed teplem) a elektr\xe1rna byla postupn\u011b p\u0159ipojov\xe1na jako tepl\xe1rna pro z\xe1sobov\xe1n\xed teplem Pardubic, Hradce Kr\xe1lov\xe9 a okol\xed. Pro v\xfdrobu el. energie je vybavena kotli s pr\xe1\u0161kov\xfdm spalov\xe1n\xedm a 3 kondenza\u010dn\xedmi, 2 odb\u011brov\xfdmi a 1 protitlakou turb\xednou. V sou\u010dasn\xe9 dob\u011b je v pl\xe1nu p\u0159estav\u011bn\xed elektr\xe1rny pro spalov\xe1n\xed plynu.","description1":"V roce 1980 byla zah\xe1jena p\u0159\xedprava na hled\xe1n\xed lokality nov\xe9 jadern\xe9 elektr\xe1rny v\xfdchodn\xed \u010dechy, kde hr\xe1lo um\xedst\u011bn\xed stav\xe1j\xedc\xed elektr\xe1rny zna\u010dnou roli. Pl\xe1n uva\u017eoval s postaven\xedm JE v m\xedstech st\xe1vaj\xedc\xed uheln\xe9 s v\xfdkonem 2x1GW. Stavba by byla pl\xe1nov\xe1na v letech 1994-2000. Ov\u0161em po nehod\u011b v \u010cernobylu a n\xe1sledn\xe9 zm\u011bn\u011b politick\xe9ho re\u017eimu v zemi bylo um\xedst\u011bn\xed v bl\xedzkosti m\u011bst Pardubice a Hrdec Kr\xe1lov\xe9 vyhodnoceno jako nevhodn\xe9 a tyto pl\xe1ny kompletn\u011b zanikly.","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[15.7909706,50.1269586],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":39,"name":"M\u011bln\xedk I","place":"P\u0159ibli\u017en\u011b 13 km pod sooutokem Labe a Vltavy  ","years_in_service":"1960","power":"240","sources1":"https://www.svetenergie.cz/cz/energetika-zblizka/uhelne-elektrarny/uhelne-elektrarny-cez/elektrarna-melnik","sources2":"","type":"hn\u011bdouheln\xe1","owner":"Od roku 1993 Energotrans, 2012 100% akciov\xfd pod\xedl \u010cEZ","description_short":"Stavba byla zah\xe1jena v roce 1956 a do provozu byla uvedena v roce 1960. V osmdes\xe1t\xfdch letech za\u010dala p\u0159estavba na tepl\xe1rnu sou\u010dasn\u011b byla zah\xe1jena v\xfdstavba tepeln\xe9ho napaje\u010de do Pra\u017esk\xe9 tepeln\xe9 soustavy. Dod\xe1vka tepla pro Prahu byla zah\xe1jena roku 1995.  ","description1":"4 Kotle na spalov\xe1n\xed hn\u011bd\xe9ho uhl\xed s parn\xedmi turb\xednami poh\xe1n\u011bj\xedc\xedmi 4 turbogener\xe1tory \xe1 60MW. ","description2":"M\u011bln\xedk I, II, III tu m\xe1me rozd\u011blen, ale je to jeden are\xe1l tak\u017ee bych to dal do jednoho","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[14.4172844,50.4138506],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":40,"name":"M\u011bln\xedk II","place":"","years_in_service":"1966","power":"220","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarna-melnik-58183","sources2":"","type":"hn\u011bdouheln\xe1","owner":"Od roku 1993 Energotrans, 2012 100% akciov\xfd pod\xedl \u010cEZ","description_short":"V roce 1971 uvedeny do provozu 4 bloky po 110 MW. V 80. letech postupn\u011b modernizov\xe1ny elektroduhlova\u010de. ","description1":"V r\xe1mci realizace \xfatlumov\xe9ho programu zdroj\u016f \u010cEZ do\u0161lo k rozhodnut\xed provozovat po nabyt\xed nov\xe9 ekologick\xe9 legislativy (od 1. 1. 1999) pouze dva bloky.","description2":"V letech 1994-1996 pro\u0161ly dva pokra\u010duj\xedc\xed bloku celkovou rekonstrukc\xed. Byly naistalovan\xe9 nov\xe9 turb\xedny s mo\u017enost\xed odb\u011bru tepla i v hork\xe9 vod\u011b. Prim\xe1rn\xedm c\xedlem bylo sn\xed\u017een\xed emis\xed NOx. V roce 1998 bylo pokra\u010dov\xe1no v modernizaci hlavn\u011b z hlediska odsi\u0159ov\xe1n\xed.","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[14.4177844,50.4138506],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":41,"name":"M\u011bln\xedk III","place":"","years_in_service":"1981","power":"500","sources1":"https://www.svetenergie.cz/cz/energetika-zblizka/uhelne-elektrarny/uhelne-elektrarny-cez/elektrarna-melnik","sources2":"","type":"hn\u011bdouheln\xe1","owner":"Od roku 1993 Energotrans, 2012 100% akciov\xfd pod\xedl \u010cEZ","description_short":"Elektr\xe1rna s jedn\xedm blokem 500 MW uvedena do trval\xe9ho provozu v roce 1981, ve sv\xe9 dob\u011b to byl blok s nejv\u011bt\u0161\xedm v\xfdkon v republice. Pro\u0161el v pr\u016fb\u011bhu rekonstrukcemi pro zlep\u0161en\xed ekologi\u010dnosti a ekomom\u010dnosti provozu, d\xedky tomu bylo v leteh 1994-1998 rozhodnuto o prodlou\u017een\xed \u017eivotnosti elketr\xe1rny o dal\u0161\xedch nejm\xe9n\u011b 20 let.","description1":"Pro vyu\u017eit\xed vyt\xe9kaj\xedc\xed vody z elektr\xe1rny byla v are\xe1lu postavena MVE.","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[14.418284400000001,50.4138506],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":42,"name":"\u0160ternberk","place":"","years_in_service":"1890","power":"Nen\xed zn\xe1mo","sources1":"sternberg.org (technick\xe9 pam\xe1tky)","sources2":"","type":"Uheln\xe1","owner":"Alois Bellada -> m\u011bsto \u0160ternberk ","description_short":"Na konci 19. stolet\xed se \u0160ternbesk\xe9 ml\xfdny, tkalcovny, textilky a dal\u0161\xed v\xfdrobny za\u010daly osazovat parn\xedmi stroji. V roce 1883 p\u0159ebuduval budovu b\u011blidla a barv\xedrny na parn\xed pohon Johan Belleda v letech 1887 - 1889 jej za\u010dal p\u0159estavovat na parn\xed elekr\xe1rnu. Od roku 1890 za\u010dal Alois Bellada vyr\xe1b\u011bt elekt\u0159inu. Od roku 1895 napp\xe1jela Belledova elktr\xe1rna tak\xe9 ve\u0159ejn\xe9 osv\u011btlen\xed. V roce 1911 p\u0159evzalo elektr\xe1rnu m\u011bsto a provozovalo ji do roku 1931, kdy byla p\u0159estav\u011bna na rozvodnu.","description1":"","description2":"","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[17.2890217,49.72193],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":43,"name":"T\u0159ebovice","place":"ostrava","years_in_service":"1933-sou\u010dasnost","power":"2x 21 MW, zni\u010dena nem\u011bckou arm\xe1dou; 65MW 1939; 285,5MW 1955; ","sources1":"https://www.historickaostrava.cz/elektrarna-v-ostrave-trebovicich/","sources2":"","type":"uheln\xe1","owner":"Veolia Energie \u010cR","description_short":"V roce 1920 byla zalo\u017eena spole\u010dnost Moravskoslezsk\xe9 elektr\xe1rny se s\xeddlem v Moravsk\xe9 Ostrav\u011b s p\u016fvodn\xedm akciov\xfdm kapit\xe1lem 15 mil. K\u010ds. Tato spole\u010dnost m\u011bla na starost obvod \u017eupy moravskoslezsk\xe9, tedy skoro cel\xe9 Opavsko, T\u011b\u0161\xednsko a v\xfdchodn\xed Moravu a\u017e po Radho\u0161\u0165 a B\u011blot\xedn. Z\xe1sobovac\xed oblast MSE tvo\u0159ilo \xfazem\xed o rozloze 4560 km2, ve kter\xe9m bylo 28 soudn\xedch okres\u016f s 511 obcemi a celkem 845.000 obyvateli.\xa0","description1":"Z po\u010d\xe1tku MSE nakupovala elekt\u0159inu od d\u016fln\xedch elektr\xe1ren, v pr\u016fb\u011bhu let v\u0161ak pl\xe1novala postavit vlastn\xed parn\xed elektr\xe1rnu v ostravsk\xe9m kamenouheln\xe9m rev\xedru. Na popud Ing. Lista se ob\u011b elektr\xe1rensk\xe9 spole\u010dnosti (MSE i SME) dohodly na spole\u010dn\xe9 v\xfdstavb\u011b parn\xed elektr\xe1rny v T\u0159ebovic\xedch.","description2":"T\u0159ebovick\xe1 elektr\xe1rna byla vyprojektov\xe1na ji\u017e ve 20.letech 20. stolet\xed, ale k zah\xe1jen\xed v\xfdstavby do\u0161lo v roce\xa01929, kdy byla vyps\xe1na sout\u011b\u017e na v\xfdstavbu \xfast\u0159edny 40, p\u0159\xedpadn\u011b 100 atm. a v\xedce. S ohledem na nejhospod\xe1rn\u011bj\u0161\xed \u0159e\u0161en\xed bylo rozhodnuto o v\xfdstavb\u011b vysokotlak\xe9 \xfast\u0159edny 130 atm., kter\xe1 ze v\u0161ech sout\u011b\u017en\xedch projekt\u016f slibovala nejp\u0159\xedzniv\u011bj\u0161\xed vyu\u017eit\xed tepla. O um\xedst\u011bn\xed elektr\xe1rny v T\u0159ebovic\xedch rozhodla bl\xedzkost uheln\xfdch dol\u016f, dostupn\xe1 voda z \u0159eky Opavy i dostate\u010dn\xfd prostor pro p\u0159\xedpadn\xe9 roz\u0161i\u0159ov\xe1n\xed.\xa0","description3":"V\xfdstavba elektr\xe1rny za\u010dala v roce\xa01931. Hlavn\xed halu tvo\u0159\xed ocelov\xe1 konstrukce s vyzd\xedvkou z re\u017en\xe9ho zdiva. V are\xe1lu byly postaveny dv\u011b n\xe1dr\u017ee na vodu, proto\u017ee bl\xedzk\xe1 \u0159eka m\u011bla hlavn\u011b v l\xe9t\u011b n\xedzk\xfd pr\u016ftok vody. V elektr\xe1rn\u011b byly vnit\u0159n\xed rozvody na 22kV pro pot\u0159eby MSE a dom\xe1c\xed rozvodny na 3000V a 380V. Vedle budov elektr\xe1rny byla postavena venkovn\xed nekryt\xe1 rozvodna na 110kV, odkud vych\xe1zela dv\u011b d\xe1lkov\xe1 veden\xed sm\u011brem na P\u0159erov a \u017dilinu.\xa0\xa0N\xe1klady na v\xfdstavbu dos\xe1hly \u010d\xe1stky zhruba 80 milionu K\u010ds.\xa0","description4":"T\u0159ebovick\xe1 elektr\xe1rna byla spu\u0161t\u011bna dne\xa01. \u010dervence 1933. Po spu\u0161t\u011bn\xed provozu se jednalo o nejsiln\u011bj\u0161\xed vysokotlakou elektrickou \xfast\u0159ednu na sv\u011bt\u011b, nejv\u011bt\u0161\xed elektr\xe1rnu na Morav\u011b a z\xe1rove\u0148 nejmodern\u011bj\u0161\xed ve st\u0159edn\xed Evrop\u011b. Prvn\xed etapa v\xfdstavby byla dokon\u010dena v roce\xa01939, elektr\xe1rna m\u011bla tehdy v\xfdkon 65 MW.","description5":"A\u010dkoliv elektr\xe1rna pracovala s nejhor\u0161\xedm ostravsk\xfdm uhl\xedm, cel\xe9 za\u0159\xedzen\xed se vyzna\u010dovalo p\u0159ekvapuj\xedc\xed \u010distotou. Uhl\xed se automaticky v\xe1\u017eilo a pomoc\xed mechanick\xfdch dopravn\xedk\u016f bylo dopraveno do ml\xfdnice. Ohromn\xe9 ml\xfdny uhl\xed pohltily a semlely na prach, kter\xfd ventil\xe1tory nafoukaly do z\xe1sobn\xedk\u016f, um\xedst\u011bn\xfdch vysoko pod st\u0159echou kotelny. Kotelna byla 35 metr\u016f vysok\xe1 budova v n\xed\u017e bylo \u010disto a topi\u010d v\u0161e ovl\xe1dat pomoc\xed p\u0159\xedstroj\u016f, kter\xe9 informovaly o prob\xedhaj\xedc\xedch procesech.\xa0Struska a pop\xedlek koteln\xedch agreg\xe1t\u016f se odplavuje do jam na strusku, le\u017e\xedc\xedch mimo budovu, odkud se nakl\xe1d\xe1 do vagonu a pot\xe9 odv\xe1\u017e\xed na skl\xe1dky v okol\xed.","description6":"B\u011bhem druh\xe9 etapy v\xfdstavby v letech\xa01950 a\u017e 1955\xa0byl v\xfdkon elektr\xe1rny zv\xfd\u0161en na 285,5 MW. V t\xe9to etap\u011b byl tak\xe9 postaven t\u0159et\xed kom\xedn, pozd\u011bji tak\xe9 t\u0159i nov\xe9 chlad\xedc\xed v\u011b\u017ee.\xa0","description7":"Koncem roku\xa01958\xa0bylo v bl\xedzkosti elektr\xe1rny vybudov\xe1no odkali\u0161t\u011b, na kter\xe9 se plavila v\u011bt\u0161\xed \u010d\xe1st zadr\u017een\xfdch pop\xedlku a p\u0159ibli\u017en\u011b 40% produkce strusky."},"geometry":{"coordinates":[18.2116,49.8316],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":44,"name":"V\xedtkovice","place":"ostrava","years_in_service":"v\xedc jak 1947- sou\u010dasnost","power":"3x342","sources1":"https://cs.wikipedia.org/wiki/Elektr\xe1rna_V\xedtkovice","sources2":"","type":"\u010dernouheln\xe1","owner":"\u010dez a.s.","description_short":"V elektr\xe1rn\u011b jsou um\xedst\u011bny t\u0159i koteln\xed jednotky s tepeln\xfdm v\xfdkonem 342\xa0MW. Tyto kotly vyprodukuj\xed 4000\xa0TJ\xa0p\xe1ry\xa0za rok. Tato p\xe1ra slou\u017e\xed z 55\xa0% k produkci elektrick\xe9 energie, zb\xfdvaj\xedc\xed \u010d\xe1st energie se vyu\u017e\xedv\xe1 pro v\xfdrobu tepla, jeho\u017e ro\u010dn\xed produkce je 210 000\xa0MWh.[1]","description1":"Pod tento z\xe1vod spad\xe1 tak\xe9 mobiln\xed v\xfdtopna na zemn\xed plyn, kter\xe1 je um\xedst\u011bna ve firm\u011b\xa0V\xedtkovice Steel. Tato v\xfdtopna disponuj\xedc\xed tepeln\xfdm v\xfdkonem 18 MW a ro\u010dn\xed produkc\xed 200 TJ slou\u017e\xed k v\xfdrob\u011b p\xe1ry pro pot\u0159ebu vakuov\xe9ho lit\xed oceli.[1]","description2":"Provozovatelem tohoto energetick\xe9ho zdroje byla od roku 2000 spole\u010dnost Energetika V\xedtkovice, a.s., jeho\u017e jedin\xfdm akcion\xe1\u0159em byla Severomoravsk\xe1 energetika, a.s. 26. \u0159\xedjna 2007 se jedin\xfdm akcion\xe1\u0159em t\xe9to firmy stala spole\u010dnost \u010cEZ. 1. \u0159\xedjna 2008 spole\u010dnost Energetika V\xedtkovice zanikla bez likvidace, nebo\u0165\xa0f\xfazovala\xa0s mate\u0159skou spole\u010dnost\xed \u010cEZ.[2]","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[18.273899999999998,49.8161],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":45,"name":"Na Z\xe1most\xed","place":"ostrava","years_in_service":"1896-1945","power":"do 1MW nejsp\xed\u0161","sources1":"https://www.historickaostrava.cz/stara-elektrarna-na-zamosti/","sources2":"","type":"uheln\xe1","owner":"??","description_short":"Obecn\xed elektr\xe1rna ve Slezsk\xe9 Ostrav\u011b byla vybudov\xe1na v roce 1896. Elektr\xe1rna nap\xe1jela \u010derpac\xed stanici vod\xe1rny, s\xed\u0165 ve\u0159ejn\xe9ho elektrick\xe9ho osv\u011btlen\xed a pozd\u011bji i \xfazkorozchodnou tramvajovou tra\u0165 do Mich\xe1lkovic a Hru\u0161ova.","description1":"V souvislost se stavbou nov\xe9ho vodojemu na Hladnov\u011b do\u0161lo k postaven\xed v\u016fbec prvn\xed elektr\xe1rny na Ostravsku. Do vodojemu v elektr\xe1rn\u011b na Z\xe1most\xed byla samosp\xe1dem p\u0159iv\xe1d\u011bna voda\xa0z lesa D\u016fl\u0148\xe1ku. Z vodojemu v elektr\xe1rn\u011b byla voda p\u0159e\u010derp\xe1v\xe1na \u010derpadly do zemn\xedho vodojemu na Jaklovci.\xa0","description2":"Tehdej\u0161\xed obci Polsk\xe1 Ostrava byla 28. \u0159\xedjna 1895 ud\u011blena koncese na stavbu a provozov\xe1n\xed elektr\xe1rny.\xa0Projekt a stavbu provedl m\xedstn\xed, n\xe1rodnostn\u011b \u010desk\xfd architekt a stavitel Bohumil \u017didlick\xfd. Strojn\xed vybaven\xed (kotle a rychlob\u011b\u017en\xe9 parn\xed stroje) dodaly adamovsk\xe9 stroj\xedrny Bromovsk\xfd, Schulz & Sohr. V budov\u011b elektrick\xe9 centr\xe1ly byla kotelna, strojovna, vod\xe1rensk\xe1 m\xedstnost, skladi\u0161t\u011b a d\xedlna. Ve vedlej\u0161\xed budov\u011b byly kancel\xe1\u0159e. Sou\u010d\xe1st\xed elektr\xe1rny byl tak\xe9 kom\xedn vysok\xfd 35 metr\u016f.","description3":"Elektr\xe1rna vyr\xe1b\u011bla stejnosm\u011brn\xfd proud 2x 150V. P\u016fvodn\u011b dod\xe1vala proud 80 odb\u011bratel\u016fm, v\u010detn\u011b J\xe1my Terezie a koksovny J\xe1my Trojice.\xa0","description4":"\u010cerpac\xed stanice vodovodu byla um\xedst\u011bna v \u201eCentr\xe1ln\xed stanici pro elektrick\xe9 osv\u011btlen\xed\u201c pravd\u011bpodobn\u011b z \xfasporn\xfdch d\u016fvod\u016f, proto\u017ee obsluha elektr\xe1rny a vod\xe1rny byla spojena. Elektrick\xe1 energie byla vyu\u017e\xedv\xe1na pro pohon p\xedstov\xe9ho \u010derpadla.\xa0","description5":"V roce 1911 byly p\u0159istav\u011bny suter\xe9nn\xed prostory pro akumul\xe1tor, kter\xfd nap\xe1jel tramvajovou tra\u0165 do Mich\xe1lkovic a po roz\u0161\xed\u0159en\xed o dal\u0161\xed kotel a parn\xed stoj o v\xfdkonu 200 kon\xed i tramvajovou tra\u0165 do Hru\u0161ova.\xa0","description6":"V roce 1914 byl parn\xed pohon p\u0159em\u011bn\u011bn na pohon elektrick\xfd. Ve stejn\xe9m roce byla postavena elektr\xe1rna na koksovn\u011b Karolina a transforma\u010dn\xed stanice na dole Terezie.\xa0","description7":"Dal\u0161\xed rekonstrukce elektr\xe1rny prob\xedhaly v letech 1931 a\u017e 1933. Elektr\xe1rna p\u0159e\u0161la na st\u0159\xeddav\xfd proud a byla prom\u011bn\u011bna na transforma\u010dn\xed stanici. V\xa0roce 1941 byla elektr\xe1rna slou\u010dena s obecn\xed elektr\xe1rnou v Radvanic\xedch.\xa0"},"geometry":{"coordinates":[18.297148882264935,49.839471541854834],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":46,"name":"Moravsk\xe1 Ostrava","place":"ostrava","years_in_service":"1896-1967","power":"28,7 MW????","sources1":"https://www.historickaostrava.cz/elektrarna-moel/","sources2":"","type":"Uheln\xe1","owner":"Karol\xedna","description_short":"Historie elektr\xe1rny za\u010d\xedn\xe1 v kv\u011btnu roku 1896, kdy m\u011bsto Moravsk\xe1 Ostrava ud\u011blilo budape\u0161\u0165sk\xe9 firm\u011b Ganz&Comp. koncesi na v\xfdstavbu a provozov\xe1n\xed m\u011bstsk\xe9 elektr\xe1rny a to na dobu pades\xe1ti let. V prosinci t\xe9ho\u017e roku byly dokon\u010den\xe9 dva kotle s parn\xedm strojem a 600kW gener\xe1torem a byl zah\xe1jen zku\u0161ebn\xed provoz. V lednu 1898 byla elektr\xe1rna i s rozvodnou dokon\u010dena a zprovozn\u011bna.","description1":"V roce 1900 spole\u010dnost Ganz&Comp. zakl\xe1d\xe1 Moravskoostravskou elektr\xe1renskou akciovou spole\u010dnost (odtud MOEL) se z\xe1kladn\xedm kapit\xe1lem 2,5 milionu korun, kter\xe1 elektr\xe1rnu p\u0159evzala.","description2":"Na p\u0159elomu stolet\xed neust\xe1le rostla spot\u0159eba energie, obzvl\xe1\u0161t\u011b v souvislosti s budov\xe1n\xedm m\xedstn\xedch drah s elektrick\xfdm nap\xe1jen\xedm. V kv\u011btnu 1901 zde byl zah\xe1jen provoz patn\xe1cti elektrick\xfdch tramvaj\xed.","description3":"Po roce 1918 se akcion\xe1\u0159em elektr\xe1rny stalo m\u011bsto Moravsk\xe1 Ostrava. Elektr\xe1rna i dal\u0161\xed provozy se modernizuj\xed a roz\u0161i\u0159uj\xed. V meziv\xe1le\u010dn\xe9 dob\u011b vzrostl akciov\xfd kapit\xe1l spole\u010dnosti a\u017e na 11 milion\u016f K\u010d.","description4":"V roce 1959 byla elektr\xe1rna upravena na v\xfdtopnu pro budovan\xe9 s\xeddli\u0161t\u011b Jind\u0159i\u0161ka. V\xfdroba elekt\u0159iny st\xe1le klesala a v roce 1961 byla zastavena trvale. B\xfdval\xe1 elektr\xe1rna pak byla p\u0159ejmenov\xe1na na Tepl\xe1rnu Ostrava.","description5":"Nejstar\u0161\xed ostravsk\xe1 elektr\xe1rna MOEL ukon\u010dila provoz 9/11 1967.","description6":"Rozvodna na rozd\xedl od elektr\xe1rny v\u0161ak fungovala st\xe1le. V 80t\xfdch letech byla modernizov\xe1na v souvislosti s p\u0159echodem m\u011bsta z nap\u011bn\xed 6kV na 22kV. Od roku 1996 slou\u017eila jen jako provozn\xed z\xe1loha.","description7":"Je\u0161t\u011b ned\xe1vno byla nejstar\u0161\xedm elektrotechnick\xfdm za\u0159\xedzen\xedm sv\xe9ho druhu na cel\xe9m \xfazem\xed Moravy a Slezska. V roce 2008 byl are\xe1l zbo\u0159en."},"geometry":{"coordinates":[18.282809508970043,49.835383379906155],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":47,"name":"P\u0159erov","place":"m\u011bsto P\u0159erov","years_in_service":"1919-1965","power":"do 10 MW, 1929- 30 MW?","sources1":"https://issuu.com/vkol/docs/krok_03-2022_oba_lka_www3_1_/s/16645659","sources2":"","type":"uheln\xe1","owner":"St\u0159edomoravsk\xe1 elektr\xe1rna, spole\u010dnost s ru\u010den\xedm omezen\xfdm v P\u0159erov\u011b","description_short":" Jde o unik\xe1tn\xed industri\xe1ln\xed stavbu vystav\u011bnou v duchu geometrick\xe9 moderny podle n\xe1vrhu pra\u017esk\xe9ho architekta Ladislava Sk\u0159iv\xe1nka a do provozu byla uvedena v roce 1920.","description1":"Rostouc\xed spot\u0159eba elekt\u0159iny si vynutila roz\u0161\xed\u0159en\xed p\u0159erovsk\xe9 elektr\xe1rny v l. 1927 \u2013 1929 o dal\u0161\xed turbogener\xe1tory, t\xedm v\u0161ak byly jej\xed v\xfdrobn\xed rezervy vy\u010derp\xe1ny.","description2":"V \u0159\xedjnu 1938, po odstoupen\xed severomoravsk\xfdch \xfazem\xed Sudet N\u011bmecku, byla na p\u0159\xedkaz \u0159\xed\u0161sk\xe9ho ministerstva hospod\xe1\u0159stv\xed z\u0159\xedzena v Opav\u011b spole\u010dnost\xed Elektrowerke, A. G. Berlin d\u016fv\u011brnick\xe1 spr\xe1va v\xfdroben elekt\u0159iny a rozvodn\xfdch za\u0159\xedzen\xed SME le\u017e\xedc\xedch v oblasti Sudet. Elektrowerke, resp. Reichselektrowerke A. G. Berlin pak, op\u011bt na p\u0159\xedkaz \u0159\xed\u0161sk\xe9ho ministerstva hospod\xe1\u0159stv\xed, zah\xe1jila jedn\xe1n\xed o koupi elektr\xe1rny v T\u0159ebovic\xedch, v\u010detn\u011b p\u0159\xedslu\u0161n\xfdch rozvodn\xfdch za\u0159\xedzen\xed. Odprodej elektr\xe1rny, resp. jej\xed ide\xe1ln\xed poloviny pat\u0159\xedc\xed SME, byl schv\xe1len na XIX. \u0159\xe1dn\xe9 valn\xe9 hromad\u011b 19. 7. 1940. Sou\u010dasn\u011b v\u0161ak musela b\xfdt uzav\u0159ena smlouva o odb\u011bru elekt\u0159iny z t\u0159ebovick\xe9 elektr\xe1rny, proto\u017ee vodn\xed elektr\xe1rna ve Str\u017ei u Krom\u011b\u0159\xed\u017ee mohla kr\xfdt jen nepatrnou pot\u0159ebu proudu pro z\xe1sobov\xe1n\xed \xfazem\xed v p\u016fsobnosti SME i p\u0159esto, \u017ee se zmen\u0161ilo t\xe9m\u011b\u0159 o polovinu. P\u016fvodn\xed p\u0159erovsk\xe1 elektr\xe1rna byla schopna vykr\xfdvat pouze tzv. odb\u011brov\xe9 \u0161pi\u010dky. Takto dod\xe1van\xe1 elekt\u0159ina m\u011bla b\xfdt hrazena odpo\u010dty z pod\xedlu kupn\xed ceny za elektr\xe1rnu v T\u0159ebovic\xedch, kter\xfd n\xe1le\u017eel SME.","description3":"Kontakty s Moravsko-slezsk\xfdmi elektr\xe1rnami Moravsk\xe1 Ostrava zapo\u010dat\xe9 p\u0159i v\xfdstavb\u011b a vyu\u017e\xedv\xe1n\xed elektr\xe1rny v T\u0159ebovic\xedch vy\xfastily v r. 1941 ve f\xfazi obou firem. F\xfazi schv\xe1lila mimo\u0159\xe1dn\xe1 valn\xe1 hromada 12. 9. 1941, sou\u010dasn\u011b do\u0161lo i ke zm\u011bn\u011b n\xe1zvu firmy na \u201eV\xfdchodomoravsk\xe9 elektr\xe1rny, akciov\xe1 spole\u010dnost v P\u0159erov\u011b\u201c. Do obchodn\xedho rejst\u0159\xedku Krajsk\xe9ho soudu v Olomouci byla zm\u011bna zaps\xe1na 25. 11. 1941 (d\xe1le viz archivn\xed fond \u201eV\xfdchodomoravsk\xe9 elektr\xe1rny, akciov\xe1 spole\u010dnost v P\u0159erov\u011b\u201c, \u010d. NAD: 2291*).","description4":"Tepeln\xe1 elektr\xe1rna P\u0159erova odeb\xedrala ostravsk\xe9 uhl\xed z dol\u016f Anselm, Betyna, \u0160alamoun a \u017dofie v mno\u017estv\xed 7260 t/rok. V koteln\u011b bylo instalov\xe1ny 4 strmotrubn\xe9 kotle s ro\u0161ty Weck v\xfdroby Sl\xe1dek/Spojen\xe9 stroj\xedrny. P\xe1ra rozt\xe1\u010dela 2 parn\xed turb\xedny o v\xfdkonech 2000 a 7200 ks. Elekt\u0159inu vyr\xe1b\u011bly 2 gener\xe1tory o v\xfdkonu 1200 kW z roku 1919 od firmy BBC a o v\xfdkonu 4550 kW z roku 1921 od firmy \u010cMK. Dopl\u0148uj\xedc\xedm strojem byl 1 motorgener\xe1tor o v\xfdkonu 23 kW. Z\xe1lo\u017en\xedm zdrojem byla 63 \u010dl\xe1nkov\xfd akumul\xe1tor o kapacit\u011b 135 Amp/h. V rozvodn\u011b byly osazeny dva transform\xe1tory o v\xfdkonu 4000 kVA z roku 1921 od firmy \u010cMK.","description5":"Elektr\xe1rna m\xe1 vysok\xfd region\xe1ln\xed v\xfdznam v r\xe1mci historick\xe9ho v\xfdvoje elektrizace Moravy jako sou\u010d\xe1sti celkov\xe9 koncepce soustavn\xe9 elektrizace \u010ceskoslovensk\xe9 republiky, kter\xe1 vych\xe1zela ze z\xe1kona ze dne 22. 7. 1919, \u010d. 438 Sb., o st\xe1tn\xed podpo\u0159e p\u0159i zah\xe1jen\xed soustavn\xe9 elektrizace. Jedine\u010dn\xe9 architektonick\xe9 \u0159e\u0161en\xed spo\u010d\xedv\xe1 v kombinaci funk\u010dn\xed stavby s reprezentativn\xed architektonickou formou a detailem. Mimo\u0159\xe1dn\xe9 je zachov\xe1n\xed autentick\xe9 podoby architektury zejm. provozon\u011b administrativn\xed budovy, v\u010detn\u011b zachovan\xfdch architektonick\xfdch detail\u016f, jako jsou nap\u0159\xedklad detail zobo\u0159ezu na fas\xe1d\xe1ch, kontrastn\xed u\u017eit\xed \u010derven\xfdch p\xe1len\xfdch a re\u017en\xfdch cihel atd. Nesporn\xe1 je urbanistick\xe1 hodnota, nebo\u0165 se jedn\xe1 o v\xfdznamnou dominantu P\u0159erova, kter\xe1 je ned\xedlnou sou\u010d\xe1st\xed historicky ust\xe1len\xfdch panoramatick\xfdch pohled\u016f na m\u011bsto. Kom\xedny z tmav\xfdch cihel s kovov\xfdmi skru\u017eemi jsou charakteristick\xfdm vizu\xe1ln\xedm znakem m\u011bsta v bl\xedzk\xfdch i d\xe1lkov\xfdch pohledech.","description6":"Ve m\u011bst\u011b ale ji\u017e p\u016fsobil za\u0159izuj\xedc\xed v\xfdbor pro elektrick\xe9 osv\u011btlen\xed, jeho\u017e \u010dlenov\xe9 po\u017e\xe1dali v roce 1896 o povolen\xed v\xe9st s\xedt\u011b elektrick\xfdch dr\xe1t\u016f po ulic\xedch a ve\u0159ejn\xfdch m\xedstech. Z\xe1rove\u0148 se jednalo o v\xfdstavb\u011b elektrick\xe9 centr\xe1ly, jako staveni\u0161t\u011b bylo p\u016fvodn\u011b vybr\xe1no n\xe1m\u011bst\xed Na Marku.","description7":"V listopadu toho roku schvaloval obecn\xed v\xfdbor v \u010dele se starostou Franti\u0161kem Tropperem stavbu m\u011bstsk\xe9 elektr\xe1rny. Projekt vytvo\u0159il Ing. Josef Pfeffermann ve stavebn\xed kancel\xe1\u0159i architekta a stavitele Edvarda Sochora. Pro osv\u011btlen\xed m\u011bsta byla nejvhodn\u011bj\u0161\xed stejnosm\u011brn\xe1 s\xed\u0165 o n\xedzk\xe9m nap\u011bt\xed, jeho\u017e zdroj bylo t\u0159eba um\xedstit uprost\u0159ed z\xe1stavby. Za t\xedm \xfa\u010delem byly z\xedsk\xe1ny pozemky na lev\xe9m b\u0159ehu Be\u010dvy, na dne\u0161n\xedm n\xe1b\u0159e\u017e\xed Protifa\u0161istick\xfdch bojovn\xedk\u016f. Hlavn\xedmi prvky pr\u016f\u010del\xed byly term\xe1ln\xed okno strojovny a \u010dty\u0159icetimetrov\xfd kom\xedn kotelny. Stavba byla zad\xe1na staviteli Franti\u0161ku \u017d\xe1kovi v P\u0159erov\u011b a zah\xe1jena na ja\u0159e 1897. Parn\xed kotle, nap\xe1jec\xed pumpy a parn\xed stroje dodala strojnick\xe1 tov\xe1rna M\xe4erky, Bromovsk\xfd a Schulz z Hradce Kr\xe1lov\xe9. Dynama, rozv\xe1d\u011b\u010d, obloukov\xe9 lampy syst\xe9m Doubrava-Don\xe1t a rozvodnou s\xed\u0165 dodala a provedla firma Bartelmus, Don\xe1t a spol., elektrotechnick\xe1 tov\xe1rna v Brn\u011b, v\u0161e za pau\u0161\xe1ln\xed obnos 92 817 zl. 87 kr"},"geometry":{"coordinates":[17.45111111111111,49.455555555555556],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":48,"name":"Tu\u0161imice I","place":"Tu\u0161imice","years_in_service":"1964-1998","power":"6x110, odstaveno v r\xe1mci utlumov\xe9ho programu","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarny-tusimice-58175","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Stejn\u011b jako ETU I, kter\xe1 ji\u017e doslou\u017eila, byla i\xa0Elektr\xe1rna Tu\u0161imice II postavena p\u0159\xedmo u\xa0zdroje paliva - Doly N\xe1stup Tu\u0161imice. Um\xedst\u011bn\xed elektr\xe1rny v\xa0centru v\xfdskytu hn\u011bd\xe9ho uhl\xed s\xa0p\xe1sovou dopravou od t\u011b\u017eebn\xedch stroj\u016f a\u017e do elektr\xe1rny byly a\xa0jsou hlavn\xed p\u0159ednost\xed lokality Tu\u0161imice, nebo\u0165 zcela odpadaj\xed n\xe1klady za dopravu uhl\xed po \u017eeleznici. To v\xfdznamn\u011b sni\u017euje v\xfdrobn\xed n\xe1klady a\xa0\u0159ad\xed elektr\xe1rnu mezi nejefektivn\u011bj\u0161\xed provozy v\xa0\u010cesk\xe9 republice. Proto byla a\xa0je elektr\xe1rna od doby sv\xe9ho spu\u0161t\u011bn\xed v\u017edy maxim\xe1ln\u011b vyu\u017e\xedv\xe1na. ETU I\xa0s\xa0pln\xfdm instalovan\xfdm v\xfdkonem pracovala a\u017e do za\u010d\xe1tku 90. let, pot\xe9 bylo v\u0161ech 6 blok\u016f v\xa0r\xe1mci \xfatlumov\xe9ho programu odstaveno. Kom\xedn elektr\xe1rny padl k\xa0zemi v\xa0listopadu 2005, byl to dosud nejvy\u0161\u0161\xed \u017eelezobetonov\xfd kom\xedn (196 metr\u016f) v\xa0\u010cR, kter\xfd byl takto odst\u0159elen.","description1":"P\u0159i stavb\u011b, stejn\u011b jako u sousedn\xed elektr\xe1rny Tu\u0161imice II, byly odkryty stopy po\xa0prav\u011bk\xe9\xa0t\u011b\u017eb\u011b\xa0k\u0159emence. \u0160lo o des\xedtky[6]\xa0prehistorick\xfdch t\u011b\u017eebn\xedch objekt\u016f z\xa0mlad\u0161\xed doby kamenn\xe9, prvn\xed a unik\xe1tn\xed n\xe1lez tohoto druhu v tehdej\u0161\xed\xa0\u010cSSR[7].","description2":"V 10. letech 21. stolet\xed byly na plo\u0161e po zru\u0161en\xe9 elektr\xe1rn\u011b otev\u0159eny sklen\xedky pro p\u011bstov\xe1n\xed zeleniny (nap\u0159. raj\u010dat), sklen\xedky pou\u017e\xedvaj\xed odpadn\xed teplo z ETU II.[4][5]","description3":"","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.333958333333333,50.38636388888889],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":49,"name":"Tu\u0161imice II","place":"Tu\u0161imice","years_in_service":"1975-sou\u010dasnost","power":"4x200","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarny-tusimice-58175","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Stejn\u011b jako ETU I, kter\xe1 ji\u017e doslou\u017eila, byla i\xa0Elektr\xe1rna Tu\u0161imice II postavena p\u0159\xedmo u\xa0zdroje paliva - Doly N\xe1stup Tu\u0161imice. Um\xedst\u011bn\xed elektr\xe1rny v\xa0centru v\xfdskytu hn\u011bd\xe9ho uhl\xed s\xa0p\xe1sovou dopravou od t\u011b\u017eebn\xedch stroj\u016f a\u017e do elektr\xe1rny byly a\xa0jsou hlavn\xed p\u0159ednost\xed lokality Tu\u0161imice, nebo\u0165 zcela odpadaj\xed n\xe1klady za dopravu uhl\xed po \u017eeleznici. To v\xfdznamn\u011b sni\u017euje v\xfdrobn\xed n\xe1klady a\xa0\u0159ad\xed elektr\xe1rnu mezi nejefektivn\u011bj\u0161\xed provozy v\xa0\u010cesk\xe9 republice. Proto byla a\xa0je elektr\xe1rna od doby sv\xe9ho spu\u0161t\u011bn\xed v\u017edy maxim\xe1ln\u011b vyu\u017e\xedv\xe1na. ETU I\xa0s\xa0pln\xfdm instalovan\xfdm v\xfdkonem pracovala a\u017e do za\u010d\xe1tku 90. let, pot\xe9 bylo v\u0161ech 6 blok\u016f v\xa0r\xe1mci \xfatlumov\xe9ho programu odstaveno. Kom\xedn elektr\xe1rny padl k\xa0zemi v\xa0listopadu 2005, byl to dosud nejvy\u0161\u0161\xed \u017eelezobetonov\xfd kom\xedn (196 metr\u016f) v\xa0\u010cR, kter\xfd byl takto odst\u0159elen.","description1":"Elektr\xe1rna Tu\u0161imice II\xa0se \u010dty\u0159mi 200 MW bloky zah\xe1jila provoz v\xa0letech 1974 \u2013 1975. Postavena byla, shodn\u011b jako prvn\xed, p\u0159\xedmo u\xa0zdroje paliva Dol\u016f N\xe1stup Tu\u0161imice, odkud p\u0159ich\xe1z\xed palivo p\xe1sovou dopravou a\u017e do kotelny.\xa0Spole\u010dnost\xa0\u010cEZ Tepl\xe1rensk\xe1, a.s.\xa0dod\xe1v\xe1 teplo vyroben\xe9 v\xa0elektr\xe1rn\u011b \xa0sv\xfdm z\xe1kazn\xedk\u016fm v\xa0nejbli\u017e\u0161\xedm okol\xed a\xa0z\xe1sobuje teplem m\u011bsto Kada\u0148. Celkov\xe1 ro\u010dn\xed dod\xe1vka tepla odb\u011bratel\u016fm je cca 500 TJ p\u0159i maxim\xe1ln\xedm tepeln\xe9m v\xfdkonu 85 MWt.","description2":"Mezi roky 2007 a\xa02012 elektr\xe1rna Tu\u0161imice II\xa0 pro\u0161la grandi\xf3zn\xed komplexn\xed obnovou, kter\xe1 zajistila jej\xed budouc\xed provoz podle sou\u010dasn\xfdch evropsk\xfdch standard\u016f p\u0159ibli\u017en\u011b do roku 2035, kdy se p\u0159edpokl\xe1d\xe1\xa0vyt\u011b\u017een\xed sousedn\xedho dolu Libou\u0161. \xda\u010dinnost elektr\xe1rny se zv\xfd\u0161ila o\xa06\xa0% \u010d\xedm\u017e do\u0161lo k\xa014% \xfaspo\u0159e paliva na vyrobenou MWh. Modernizovan\xe1 technologie umo\u017e\u0148uje spalovat v\xa0budoucnu i\xa0m\xe9n\u011b kvalitn\xed palivo z\xa0dolu Libou\u0161. Modernizovan\xe9 je i\xa0odsi\u0159ovac\xed za\u0159\xedzen\xed postaven\xe9 v\xa0letech 1994\u20131997. Nyn\xed je p\u0159ipraveno plnit ty nejp\u0159\xedsn\u011bj\u0161\xed limity v\xa0oblasti vypou\u0161t\u011bn\xed emis\xed po roce 2016. Emise oxid\u016f dus\xedku se poda\u0159ilo sn\xed\u017eit o\xa070\xa0%, emise oxidu si\u0159i\u010dit\xe9ho o\xa079\xa0% a\xa0emise tuh\xfdch zne\u010di\u0161\u0165uj\xedc\xedch l\xe1tek o\xa087\xa0%.\xa0 (Prvn\xed ekologizac\xed v\u0161ak ji\u017e elektr\xe1rna pro\u0161la v\xa0devades\xe1t\xfdch letech, kdy se v\xa0prvn\xed vln\u011b sn\xed\u017eily jej\xed emise o\xa0v\xedce ne\u017e 90 procent!) Vedlej\u0161\xed energetick\xe9 produkty (pop\xedlek, struska a\xa0depon\xe1t) vznikaj\xedc\xed v\xa0Elektr\xe1rn\u011b Tu\u0161imice II jsou certifikovan\xfdmi v\xfdrobky. Depon\xe1t slou\u017e\xed k\xa0revitalizaci krajiny po d\u016fln\xed \u010dinnosti, certifikovan\xe1 struska je vyu\u017e\xedv\xe1na k\xa0asanaci b\xfdval\xe9ho slo\u017ei\u0161t\u011b Tu\u0161imice a\xa0pop\xedlek se prod\xe1v\xe1 pro vyu\u017eit\xed ve stavebnictv\xed. Komplexn\xed obnova v\xa0hodnot\u011b 26 miliard korun tak\xe9 pomohla p\u0159ekonat ekonomickou krizi v\xa0lokalit\u011b a\xa0prodlou\u017een\xed provozu o\xa025 let umo\u017enilo zachovat tis\xedce pracovn\xedch m\xedst.","description3":"Pod veden\xedm gener\xe1ln\xedho dodavatele \u0160KODA PRAHA Invest do\u0161lo k\xa0v\xfdm\u011bn\u011b \u010dty\u0159 p\u016fvodn\xedch kotl\u016f, rekonstrukci elektroodlu\u010dova\u010d\u016f, vybudov\xe1n\xed nov\xe9ho ods\xed\u0159en\xed a\xa0rekonstrukci vodn\xedho hospod\xe1\u0159stv\xed elektr\xe1rny. Na upraven\xfdch turb\xednov\xfdch stolic\xedch jsou nyn\xed nainstalov\xe1ny \u010dty\u0159i nov\xe9 t\u0159\xedt\u011blesov\xe9 turb\xedny, ka\u017ed\xe1 o\xa0v\xfdkonu 200 MW. \u010cty\u0159i gener\xe1tory pro strojovnu, komplexn\xed za\u0159\xedzen\xed pro elektro\u010d\xe1st a\xa0syst\xe9m automatizovan\xe9ho \u0159\xedzen\xed technologick\xfdch proces\u016f dodala spole\u010dnost Siemens. Dosa\u017een\xe9 parametry odpov\xeddaj\xed hodnot\xe1m p\u0159edepsan\xfdm pro tzv. BAT (Best Available Technology, kter\xe9 p\u0159edstavuj\xed sv\u011btov\u011b uzn\xe1van\xfd standard dosa\u017een\xed emisn\xedch limit\u016f a\xa0zv\xfd\u0161en\xed \xfa\u010dinnosti\xa0 modernizovan\xfdch zdroj\u016f.","description4":"","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.334458333333334,50.38636388888889],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":50,"name":"Prun\xe9\u0159ov I","place":"z\xe1padn\xedm okraji severo\u010desk\xe9 hn\u011bdouheln\xe9 p\xe1nve mezi Chomutovem a\xa0Kl\xe1\u0161tercem nad Oh\u0159\xed.","years_in_service":"1967-2020","power":"660, pak sn\xed\u017eeno na 4x110 v r\xe1mci \xfatlumov\xe9ho programu","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarny-prunerov-58176","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Elektr\xe1rna Prun\xe9\u0159ov\xa0le\u017e\xed na z\xe1padn\xedm okraji severo\u010desk\xe9 hn\u011bdouheln\xe9 p\xe1nve mezi Chomutovem a\xa0Kl\xe1\u0161tercem nad Oh\u0159\xed. P\u016fvodn\u011b byla organiza\u010dn\u011b spojeny s\xa0Elektr\xe1rnou Tu\u0161imice I\xa0a\xa0Tu\u0161imice II v\xa0Elektr\xe1rn\xe1ch SSM, pozd\u011bji v\xa0Podkru\u0161nohorsk\xfdch elektr\xe1rn\xe1ch. Samostatnou organiza\u010dn\xed jednotkou \u010cEZ,\xa0a.\xa0s., se staly v\xa0roce 1993. V\xa0sou\u010dasn\xe9 dob\u011b op\u011bt tvo\u0159\xed spole\u010dnou organiza\u010dn\xed jednotku s\xa0Elektr\xe1rnou Tu\u0161imice.","description1":"Elektr\xe1rny Prun\xe9\u0159ov pat\u0159\xed k\xa0nejv\u011bt\u0161\xedm dodavatel\u016fm elekt\u0159iny. Z\xe1rove\u0148 prost\u0159ednictv\xedm spole\u010dnosti \u010cEZ Tepl\xe1rensk\xe1, a.s., dod\xe1vaj\xed teplo do Chomutova, Jirkova a\xa0Kl\xe1\u0161terce nad Oh\u0159\xed. Instalovan\xfd v\xfdkon pro dod\xe1vku tepla dosahuje 500 MW. Ro\u010dn\xed dod\xe1vka tepla pro v\u0161echna t\u0159i m\u011bsta \u010din\xed 920 TJ.","description2":"Dodavatelem za\u0159\xedzen\xed pro Elektr\xe1rnu Prun\xe9\u0159ov I\xa0byla n\u011bmeck\xe1 firma Bischoff, GmbH a\xa0za\u0159\xedzen\xed bylo dokon\u010deno a\xa0uvedeno do pln\xe9ho provozu koncem roku 1995.","description3":"Provoz Elektr\xe1rny Prun\xe9\u0159ov\xa0I\xa0byl ukon\u010den 30.\xa0\u010dervna 2020. Firma \u010cEZ hodlala n\xe1sledn\u011b vyu\u017e\xedt are\xe1l k\xa0v\xfdstavb\u011b paroplynov\xe9ho cyklu, plynov\xe9 kotelny, sol\xe1rn\xedho parku, bateriov\xe9ho \xfalo\u017ei\u0161t\u011b \u010di jin\xfdm zp\u016fsobem.[17]\xa0Likvidace elektr\xe1rny za\u010dala 13.\xa0kv\u011btna 2022 zah\xe1jen\xedm demolice chladic\xedch v\u011b\u017e\xed. Dv\u011b st\u011b metr\u016f vysok\xfd kom\xedn byl odst\u0159elen 23.\xa0\u010dervna 2023.[18][19]\xa0Odst\u0159el prob\u011bhl v\xa010.56, p\u0159i\u010dem\u017e po\u010det minut symbolizuje 56 let existence elektr\xe1rny.[20]","description4":"V devades\xe1t\xfdch letech byl v\xfdkon EPRU I v r\xe1mci \xfatlumov\xe9ho programu sn\xed\u017een o t\u0159etinu. V letech 1995 a 1996 byly ob\u011b elektr\xe1rny vybaveny\xa0odsi\u0159ovac\xedm\xa0za\u0159\xedzen\xedm pot\xe9, kdy v d\u016fsledku nekontrolovateln\xe9ho vypou\u0161t\u011bn\xed\xa0oxid\u016f s\xedry\xa0do\xa0ovzdu\u0161\xed\xa0a n\xe1sledn\xfdch\xa0kysel\xfdch de\u0161\u0165\u016f\xa0doch\xe1zelo k rozs\xe1hl\xe9 likvidaci\xa0lesn\xedho\xa0porostu p\u0159ilehl\xfdch\xa0Kru\u0161n\xfdch hor. N\xe1sledky t\xe9to devastace\xa0p\u0159\xedrody\xa0jsou patrn\xe9 dodnes a n\xe1vrat k norm\xe1lu bude je\u0161t\u011b dlouh\xfd proces. V evropsk\xe9m \u017eeb\u0159\xed\u010dku sleduj\xedc\xedm nejvy\u0161\u0161\xed emise\xa0oxidu uhli\u010dit\xe9ho\xa0elektr\xe1ren ve vztahu k vyroben\xe9mu mno\u017estv\xed elektrick\xe9 energie skon\u010dily elektr\xe1rny na dvan\xe1ct\xe9m m\xedst\u011b (co do absolutn\xedho objemu emis\xed CO2\xa0je Prun\xe9\u0159ov a\u017e na dvac\xe1t\xe9m m\xedst\u011b v Evrop\u011b).[2]\xa0V r\xe1mci \u010cesk\xe9 republiky jsou elektr\xe1rny nejv\u011bt\u0161\xedm zdrojem emis\xed oxidu uhli\u010dit\xe9ho, v roce 2007 emitovaly 10,1 milion\u016f tun.","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.259,50.418],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":51,"name":"Prun\xe9\u0159ov II","place":"z\xe1padn\xedm okraji severo\u010desk\xe9 hn\u011bdouheln\xe9 p\xe1nve mezi Chomutovem a\xa0Kl\xe1\u0161tercem nad Oh\u0159\xed.","years_in_service":"1982-sou\u010dasnost","power":"1050, 3x250","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarny-prunerov-58176","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Elektr\xe1rna Prun\xe9\u0159ov II\xa0je nejmlad\u0161\xed uhelnou elektr\xe1rnou \u010cEZ,\xa0a.\xa0s. P\u016fvodn\u011b m\u011bla p\u011bt 210 MW blok\u016f, kter\xe9 byly postupn\u011b uvedeny do provozu v\xa0letech 1981 a\u017e 1982.\xa0Po komplexn\xed obnov\u011b\xa0(2012 \u2013 2016)\xa0m\xe1\xa0instalovan\xfd v\xfdkon 3 x 250 MW.\xa0Star\u0161\xed Elektr\xe1rna Prun\xe9\u0159ov I\xa0s\xa0v\xfdkonem 440 MW\xa0 byla v\xa0\u010dervnu 2020 po v\xedce ne\u017e 50 letech odstavena z\xa0provozu. \u010cEZ\xa0tak\xa0pokra\u010duje v\xa0napl\u0148ov\xe1n\xed sv\xe9 strategie postupn\xe9ho p\u0159echodu k\xa0n\xedzkoemisn\xed a\u017e bezemisn\xed v\xfdrob\u011b elekt\u0159iny postaven\xe9 na obnoviteln\xfdch zdroj\xedch a\xa0jadern\xe9 energetice.","description1":"Elektr\xe1rny Prun\xe9\u0159ov pat\u0159\xed k\xa0nejv\u011bt\u0161\xedm dodavatel\u016fm elekt\u0159iny. Z\xe1rove\u0148 prost\u0159ednictv\xedm spole\u010dnosti \u010cEZ Tepl\xe1rensk\xe1, a.s., dod\xe1vaj\xed teplo do Chomutova, Jirkova a\xa0Kl\xe1\u0161terce nad Oh\u0159\xed. Instalovan\xfd v\xfdkon pro dod\xe1vku tepla dosahuje 500 MW. Ro\u010dn\xed dod\xe1vka tepla pro v\u0161echna t\u0159i m\u011bsta \u010din\xed 920 TJ.","description2":"Elektr\xe1rna Prun\xe9\u0159ov II\xa0m\xe1 po komplexn\xed obnov\u011b kotle o\xa0v\xfdkonu 660 t/h, s\xa0parametry p\xe1ry 18,2 MPa/575/580 \xb0C. Kotle jsou dvoutahov\xe9, s\xa0granula\u010dn\xedm topeni\u0161t\u011bm, pr\u016ftla\u010dn\xe9, s\xa0p\u0159ih\u0159\xedv\xe1n\xedm p\xe1ry. Jejich dodavatelem byly V\xedtkovice Power Engineering. Turb\xedny 250 MW typ \u0160koda KT \u2013 250 \u2013 17,66\xa0 jsou dvout\u011blesov\xe9, rovnotlak\xe9 kondenza\u010dn\xed\xa0 s\xa0p\u0159ih\u0159\xedv\xe1n\xedm p\xe1ry za VT d\xedlem, s\xa0jedn\xedm kombinovan\xfdm VT-ST d\xedlem a\xa0jedn\xedm dvouproudov\xfdm NT d\xedlem. Ka\u017ed\xe1 turb\xedna je vybavena 8 neregulovan\xfdmi odb\u011bry p\xe1ry pro regeneraci, topen\xed nap\xe1jec\xed n\xe1dr\u017ee a\xa0oh\u0159\xedv\xe1n\xed topn\xe9 vody v\xa0OTV a\xa0jedn\xedm regulovan\xfdm odb\u011brem p\xe1ry\xa0 pro regulaci teploty v\xa0OTV3 a\xa0dod\xe1vku p\xe1ry do NTO5. V\xfdvody jednotliv\xfdch blok\u016f jsou p\u0159es v\xfdvodov\xe9 transform\xe1tory 300 MVA, 15,75/420 kV p\u0159ipojeny do p\u0159enosov\xe9 soustavy 400 kV linkami V465 a\xa0V466, do rozvodny Hradec u\xa0Kadan\u011b.","description3":"V\xa0druh\xe9m p\u0159\xedpad\u011b realizovalo dod\xe1vku \\"na kl\xed\u010d\\" konsorcium japonsk\xfdch firem Mitsubishi Heavy Industries, Mitsubishi Corporation ve spolupr\xe1ci se ZVU Hradec Kr\xe1lov\xe9, a. s. Odsi\u0159ovac\xed za\u0159\xedzen\xed bylo uvedeno do provozu v\xa0l\xe9t\u011b roku 1996.","description4":"V devades\xe1t\xfdch letech byl v\xfdkon EPRU I v r\xe1mci \xfatlumov\xe9ho programu sn\xed\u017een o t\u0159etinu. V letech 1995 a 1996 byly ob\u011b elektr\xe1rny vybaveny\xa0odsi\u0159ovac\xedm\xa0za\u0159\xedzen\xedm pot\xe9, kdy v d\u016fsledku nekontrolovateln\xe9ho vypou\u0161t\u011bn\xed\xa0oxid\u016f s\xedry\xa0do\xa0ovzdu\u0161\xed\xa0a n\xe1sledn\xfdch\xa0kysel\xfdch de\u0161\u0165\u016f\xa0doch\xe1zelo k rozs\xe1hl\xe9 likvidaci\xa0lesn\xedho\xa0porostu p\u0159ilehl\xfdch\xa0Kru\u0161n\xfdch hor. N\xe1sledky t\xe9to devastace\xa0p\u0159\xedrody\xa0jsou patrn\xe9 dodnes a n\xe1vrat k norm\xe1lu bude je\u0161t\u011b dlouh\xfd proces. V evropsk\xe9m \u017eeb\u0159\xed\u010dku sleduj\xedc\xedm nejvy\u0161\u0161\xed emise\xa0oxidu uhli\u010dit\xe9ho\xa0elektr\xe1ren ve vztahu k vyroben\xe9mu mno\u017estv\xed elektrick\xe9 energie skon\u010dily elektr\xe1rny na dvan\xe1ct\xe9m m\xedst\u011b (co do absolutn\xedho objemu emis\xed CO2\xa0je Prun\xe9\u0159ov a\u017e na dvac\xe1t\xe9m m\xedst\u011b v Evrop\u011b).[2]\xa0V r\xe1mci \u010cesk\xe9 republiky jsou elektr\xe1rny nejv\u011bt\u0161\xedm zdrojem emis\xed oxidu uhli\u010dit\xe9ho, v roce 2007 emitovaly 10,1 milion\u016f tun.","description5":"","description6":"","description7":""},"geometry":{"coordinates":[13.259500000000001,50.418],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":52,"name":"D\u011btmarovice","place":"u\xa0Ostravy, v\xa0t\u011bsn\xe9 bl\xedzkosti polsk\xfdch hranic a\xa0hned vedle hlavn\xed \u017eelezni\u010dn\xed trat\u011b Bohum\xedn\u2013\u017dilina","years_in_service":"1976-sou\u010dasnost","power":"600 (d\u0159\xedve 800) - sn\xed\u017eeno o jeden blok 2020,  v\u017edy 200MW/blok","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarna-detmarovice-58185","sources2":"","type":"\u010dernouheln\xe1","owner":"\u010dez a.s.","description_short":"St\xe1ty Evropsk\xe9 unie odsouhlasily v roce 2019 program naz\xfdvan\xfd European Green Deal a p\u0159ihl\xe1sily se k z\xe1vazku vytvo\u0159it z Evropy uhl\xedkov\u011b neutr\xe1ln\xed kontinent. Konec spalov\xe1n\xed uhl\xed pro energetick\xe9 \xfa\u010dely je p\u0159irozen\xfd proces, kter\xfd je nezbytn\xfd k napln\u011bn\xed tohoto z\xe1vazku. Na za\u010d\xe1tku roku se celkov\xfd instalovan\xfd elektrick\xfd v\xfdkon sn\xed\u017eil o 200 MW jednoho uheln\xe9ho bloku. Aktu\xe1ln\xed ceny elektrick\xe9 energie a emisn\xedch povolenek neumo\u017e\u0148uj\xed jej\xed ekonomicky opodstatn\u011bnou v\xfdrobu z \u010dern\xe9ho uhl\xed. Spole\u010dnost Elektr\xe1rna D\u011btmarovice, a.s., proto pl\xe1nuje odstavit zb\xfdvaj\xedc\xed t\u0159i uheln\xe9 bloky o celkov\xe9m v\xfdkonu 600 MW na konci roku 2022 nebo nejpozd\u011bji po topn\xe9 sez\xf3n\u011b 2022-2023. M\xedsto nich je pl\xe1nov\xe1no instalovat vysoce \xfa\u010dinn\xe9 kogenera\u010dn\xed jednotky o celkov\xe9m v\xfdkonu 45 MWe a 40 MWt, kter\xe9 zajist\xed kombinovanou v\xfdrobu elekt\u0159iny a tepla z plynu. To umo\u017en\xed pokra\u010dovat i v budoucnu v dod\xe1vk\xe1ch tepla do Orlov\xe9 a Bohum\xedna.","description1":"Stav\u011bt se za\u010dalo v\xa0roce 1971, bloky byly postupn\u011b p\u0159if\xe1zov\xe1ny do s\xedt\u011b od kv\u011btna 1975 a\u017e do listopadu 1976. Gener\xe1ln\xedm projektantem stavby byl Energoprojekt Praha, dodavatelem stavebn\xed \u010d\xe1sti \u010cOLD Ostrava, technologie \u0160koda Plze\u0148.","description2":"Elektr\xe1rna ro\u010dn\u011b vyrob\xed okolo 2 TWh elektrick\xe9 energie a\xa0v\xedce ne\u017e 650 TJ tepla, kter\xe9 se dod\xe1v\xe1 do Orlov\xe9, Bohum\xedna a\xa0od roku 2018 i\xa0do sklen\xedk\u016f pro p\u011bstov\xe1n\xed zeleniny v\xa0Doln\xed Lutyni.","description3":"Elektr\xe1rna spaluje \u010dern\xe9 uhl\xed s\xa0pr\u016fm\u011brnou v\xfdh\u0159evnost\xed 22 MJ/kg a\xa0obsahem s\xedry pod 1\xa0%. Pou\u017e\xedv\xe1 se uhl\xed z\xa0Ostravsko-karvinsk\xe9 p\xe1nve, ale i\xa0z\xa0dal\u0161\xedch t\u011b\u017eebn\xedch lokalit. V\xa0ED\u011a jsou instalov\xe1ny 3 v\xfdrobn\xed bloky, ka\u017ed\xfd o\xa0elektrick\xe9m v\xfdkonu 200 MW. V\xfdkon t\u011bchto blok\u016f je distribuov\xe1n do okoln\xedch rozvoden velmi vysok\xe9ho nap\u011bt\xed. Pr\u016fm\u011brn\xe1 denn\xed spot\u0159eba paliva na jeden blok je cca 1600 tun uhl\xed, co\u017e p\u0159edstavuje cca 32 \u017eelezni\u010dn\xedch vagon\u016f. Uhl\xed se po rozemlet\xed na velmi jemnou frakci spaluje v\xa0celkem 4 kotl\xedch o\xa0v\xfdkonu 650 t p\xe1ry/hod. Kotle jsou z\xa0produkce podniku V\xedtkovice, jsou pr\u016ftla\u010dn\xe9, dvoutahov\xe9, s\xa0granula\u010dn\xed spalovac\xed komorou, \xfa\u010dinnost se pohybuje okolo 90\xa0%, nejvy\u0161\u0161\xed teplota v\xa0kotli je 1400 stup\u0148\u016f Celsia. Ka\u017ed\xfd kotel m\xe1 mlec\xed za\u0159\xedzen\xed, kter\xe9\xa0se skl\xe1d\xe1 ze \u010dty\u0159 mlec\xedch okruh\u016f s\xa0krou\u017ekov\xfdmi ml\xfdny o\xa0v\xfdkonu 36 t/h. Kotle se \\"naj\xed\u017ed\u011bj\xed\\" zemn\xedm plynem, k\xa0zap\xe1len\xed plynov\xfdch\xa0ho\u0159\xe1k\u016f se pou\u017e\xedv\xe1 elektrick\xe1 jiskra. V\xa0zadn\xed \u010d\xe1sti kotle na samostatn\xe9 konstrukci jsou instalov\xe1ny regenera\u010dn\xed oh\u0159\xedv\xe1ky typu Ljungstrom. Ka\u017ed\xfd kotel je opat\u0159en \u010dty\u0159mi elektrostatick\xfdmi odlu\u010dova\u010di typu Lurgi a\xa0dv\u011bma kou\u0159ov\xfdmi ventil\xe1tory. Za\u0159\xedzen\xed ods\xed\u0159en\xed je dod\xe1vkou firmy Mitsubishi. Sest\xe1v\xe1 ze dvou absorb\xe9r\u016f (v\u017edy jeden pro dva v\xfdrobn\xed bloky). V\xa0provozu je od b\u0159ezna 1998.","description4":"Elektr\xe1rna D\u011btmarovice krom\u011b v\xfdroby elektrick\xe9 energie produkuje i\xa0teplo. Spole\u010dn\xe1 v\xfdroba elektrick\xe9 energie a\xa0tepla v\xa0jednom cyklu, tzv. kogenerace, sni\u017euje spot\u0159ebu paliva na vyrobenou jednotku energie a\xa0t\xedm \u0161et\u0159\xed i\xa0\u017eivotn\xed prost\u0159ed\xed.\xa0Dod\xe1vky tepla z\xa0elektr\xe1rny do Orlov\xe9 a\xa0Bohum\xedna zaji\u0161\u0165uje spole\u010dnost\xa0\u010cEZ Tepl\xe1rensk\xe1, a.s.","description5":"Na z\xe1klad\u011b v\xedt\u011bzstv\xed ve ve\u0159ejn\xe9 sout\u011b\u017ei za\u010dala v\xa0kv\u011btnu 2009 v\xfdstavba p\u0159ivad\u011b\u010de tepla do Bohum\xedna. Horkovodem bude proudit teplo z\xa0elektr\xe1rny D\u011btmarovice do Bohum\xedna po dobu minim\xe1ln\u011b dvaceti let. Prvn\xed dod\xe1vky za\u010daly na podzim 2010. N\xe1klady na v\xfdstavbu ve v\xfd\u0161i 500 milion\u016f korun hradila Skupina \u010cEZ.","description6":"Ze spalovac\xedch proces\u016f prob\xedhaj\xedc\xedch p\u0159i v\xfdrob\u011b elekt\u0159iny a\xa0tepla\xa0vznikaj\xed vedlej\u0161\xed energetick\xe9 produkty, kter\xe9 se st\xe1vaj\xed za p\u0159edpokladu spln\u011bn\xed technick\xfdch a\xa0z\xe1konn\xfdch podm\xednek surovinou pro dal\u0161\xed zpracov\xe1n\xed a\xa0v\xfdrobu.","description7":"Elektr\xe1rna D\u011btmarovice vyprodukuje ro\u010dn\u011b cca 250 000 tun VEP.\xa0 Z\xa0tohoto mno\u017estv\xed je 90\xa0% popelovin, kter\xe9 jsou certifikov\xe1ny a\xa0vyu\u017e\xedv\xe1ny ve stavebnictv\xed p\u0159edev\u0161\xedm jako p\u0159\xedsada do cementu, betonu \u010di p\xf3robetonu. Zbyl\xfdch 10\xa0% p\u0159edstavuje energos\xe1drovec, kter\xfd je produktem ods\xed\u0159en\xed z\xa0mokr\xe9 v\xe1pencov\xe9 vyp\xedrky. V\xa0Elektr\xe1rn\u011b D\u011btmarovice je vyu\u017e\xedv\xe1n spolu s\xa0\u010d\xe1st\xed popelovin k\xa0rekultiva\u010dn\xedm \xfa\u010del\u016fm."},"geometry":{"coordinates":[18.469199999999997,49.9031],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","entry_id":53,"name":"Ledvice","place":"\xfapat\xed v\xfdchodn\xed \u010d\xe1sti Kru\u0161n\xfdch hor, mezi l\xe1ze\u0148sk\xfdmi m\u011bsty Teplice a\xa0B\xedlina","years_in_service":"1969-sou\u010dasnost","power":"5bl - 640, nyn\xed 660","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarna-ledvice-58177","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Elektr\xe1rna Ledvice le\u017e\xed na \xfapat\xed v\xfdchodn\xed \u010d\xe1sti Kru\u0161n\xfdch hor, mezi l\xe1ze\u0148sk\xfdmi m\u011bsty Teplice a\xa0B\xedlina. Po\u010d\xe1tek stavby sah\xe1 a\u017e do roku 1961 a\xa0p\u016fvodn\u011b byla tvo\u0159ena 5 v\xfdrobn\xedmi bloky o\xa0celkov\xe9m v\xfdkonu 640 MW, kter\xe9 byly postupn\u011b zprovozn\u011bny v\xa0letech 1966 \u2013 69. Z\xa0d\u016fvodu nov\xfdch p\u0159\xedsn\xfdch po\u017eadavk\u016f na pln\u011bn\xed emisn\xedch limit\u016f byly v\xa090. letech 20. stolet\xed z\xa0provozu odstaveny bloky 1 a\xa05, bloky 2 a\xa03 pro\u0161ly gener\xe1ln\xedmi opravami a\xa0ekologick\xfdm programem zam\u011b\u0159en\xfdm zejm\xe9na na ods\xed\u0159en\xed, deNOx a\xa0redukci tuh\xfdch zne\u010di\u0161\u0165uj\xedc\xedch l\xe1tek ve spalin\xe1ch. V\xfdrobn\xed blok \u010d. 4 pro\u0161el z\xe1sadn\u011bj\u0161\xed rekonstrukc\xed \xa0- p\u016fvodn\xed granula\u010dn\xed kotel byl nahrazen v\xa0roce 1998 kotlem s\xa0fluidn\xedm spalov\xe1n\xedm spl\u0148uj\xedc\xedm v\u0161echny tehdy nov\xe9 legislativn\xed po\u017eadavky a\xa0n\xe1sledn\u011b byla v\xa0roce 2007 u\xa0tohoto bloku vym\u011bn\u011bna i\xa0turb\xedna. Ta je optimalizov\xe1na zejm\xe9na pro tepl\xe1rensk\xfd provoz, elektrick\xfd v\xfdkon z\u016fstal 110 MW. B\u011bhem v\xfdstavby\xa0 nov\xe9ho v\xfdrobn\xedho bloku 6 byly bloky 2 a\xa03 trvale odstaveny z\xa0provozu a\xa0to v\xa0letech 2013, respektive 2015. Blok 4 s\xa0fluidn\xedm kotlem a\xa0novou turb\xednou, kter\xfd pln\xed v\u0161echny v\xa0sou\u010dasnosti platn\xe9 emisn\xed limity je provozov\xe1n d\xe1le\xa0a\xa0z\xe1rove\u0148 je od roku 2017 v\xa0trval\xe9m provozu i\xa0posledn\xed postaven\xfd v\xfdrobn\xed blok 6 s\xa0kotlem se superkritick\xfdmi parametry p\xe1ry a\xa0elektrick\xfdm v\xfdkonem 660 MW.","description1":"Blok 6 je vyprojektov\xe1n, postaven a\xa0provozov\xe1n dle po\u017eadavk\u016f a\xa0princip\u016f BAT (best available technologies \u2013 nejlep\u0161\xed dostupn\xe9 technologie) s\xa0c\xedlem dosa\u017een\xed vysok\xe9 \xfa\u010dinnosti p\u0159i v\xfdrob\u011b elektrick\xe9 a\xa0tepeln\xe9 energie. Je tak jednou z\xa0nejmodern\u011bj\u0161\xedch klasick\xfdch elektr\xe1ren ve st\u0159edn\xed Evrop\u011b a\xa0d\xedky pou\u017eit\xed technologie BAT pro dan\xfd projekt do\u0161lo tak\xe9 k\xa0v\xfdrazn\xe9mu sn\xed\u017een\xed ve\u0161ker\xfdch sledovan\xfdch emis\xed v\xa0lokalit\u011b. Hodnota instalovan\xe9ho elektrick\xe9ho v\xfdkonu 660 MW \xa0byla zvolena jako pr\u016fnik parametr\u016f a\xa0mo\u017enost\xed pou\u017eit\xfdch v\xfdrobn\xedch technologi\xed (nadkritick\xe9 parametry p\xe1ry a\xa0velk\xe9 jednotkov\xe9 v\xfdkony ke zv\xfd\u0161en\xed energetick\xe9 \xfa\u010dinnosti), vyu\u017eiteln\xfdch z\xe1sob energetick\xe9ho uhl\xed v\xa0dole B\xedlina na dobu projektov\xe9 \u017eivotnosti bloku, prostorov\xfdch podm\xednek a\xa0velikost\xed v\xfdkonu z\xa0hlediska spolehliv\xe9ho provozu p\u0159enosov\xe9 soustavy \u010cR. V\xa0r\xe1mci v\xfdstavby byly nov\u011b postaveny a\xa0uvedeny do provozu spole\u010dn\xe9 technologie nutn\xe9 k\xa0zaji\u0161t\u011bn\xed provozu st\xe1vaj\xedc\xedch blok\u016f\xa0 - \xa0chemick\xe1 \xfapravna vody s\xa0p\u0159\xedslu\u0161enstv\xedm,\xa0zauhlov\xe1n\xed s\xa0novou skl\xe1dkou uhl\xed a\xa0dal\u0161\xed.","description2":"V Elektr\xe1rn\u011b Ledvice je spalov\xe1no hn\u011bd\xe9 uhl\xed z\xa0Dol\u016f B\xedlina. Uhl\xed je dopravov\xe1no p\u0159\xedmo p\xe1sov\xfdmi dopravn\xedky ze sousedn\xed \xdapravny uhl\xed Ledvice, a\xa0to bu\u010f do z\xe1sobn\xedk\u016f paliva jednotliv\xfdch kotl\u016f, nebo na manipula\u010dn\xed skl\xe1dku.","description3":"Zprovozn\u011bn\xedm Nov\xe9ho zdroje zavr\u0161ila Skupina \u010cEZ rozs\xe1hl\xfd ekologick\xfd program zapo\u010dat\xfd ji\u017e v\xa0roce 1992. Tehdy se jednalo o\xa01. vlnu ekologizace, kter\xe1 do konce roku 1998 p\u0159inesla ods\xed\u0159en\xed a\xa0denitrifikaci v\u0161ech uheln\xfdch v\xfdrobn\xedch zdroj\u016f spole\u010dnosti v\xa0\u010cesk\xe9 republice, co\u017e znamenalo sn\xed\u017een\xed emis\xed oxid\u016f s\xedry a\xa0pop\xedlku o\xa090 a\xa0oxidu dus\xedku o\xa050 procent. Druh\xe1 vlna ekologizace v\xa0tomto trendu v\xa0souvislosti se zp\u0159\xedsn\u011bn\xedm limit\u016f v\xa0r\xe1mci evropsk\xe9 legislativy pokra\u010dovala sn\xed\u017een\xedm ve\u0161ker\xfdch emis\xed o\xa0dal\u0161\xedch cca 50 procent, p\u0159i\u010dem\u017e krom\u011b v\xfdstavby Nov\xe9ho zdroje v\xa0Ledvic\xedch obn\xe1\u0161ela rovn\u011b\u017e komplexn\xed modernizaci elektr\xe1ren Tu\u0161imice II a\xa0Prun\xe9\u0159ov II a\xa0realizaci nov\xe9ho Paroplynov\xe9ho cyklu Po\u010derady.","description4":"Hlavn\xedm zdrojem vody pot\u0159ebn\xe9 pro v\xfdrobu je \u0159eka Labe. Voda je dod\xe1v\xe1na \u010derpac\xed stanic\xed v\xa0Doln\xedch Z\xe1lezlech a\xa0do elektr\xe1rny je dopravov\xe1na prost\u0159ednictv\xedm p\u0159ivad\u011b\u010de dlouh\xe9ho cca 25 km. Jedn\xe1 se o\xa0unik\xe1tn\xed a\xa0velmi spolehlivou technologii postavenou ji\u017e v\xa0pr\u016fb\u011bhu 2.sv\u011btov\xe9 v\xe1lky. Jako z\xe1lo\u017en\xed zdroj slou\u017e\xed n\xe1dr\u017e V\u0161echlapy z\xa060.let minul\xe9ho stolet\xed. Filtrace a\xa0\xfaprava vody demineralizac\xed potom prob\xedh\xe1 v\xa0modern\xed chemick\xe9 \xfapravn\u011b vody postaven\xe9 v\xa0r\xe1mci v\xfdstavby bloku 6.","description5":"Nov\xfd zdroj Elektr\xe1rny Ledvice je i\xa0zaj\xedmav\xfdm c\xedlem pro p\u0159\xedznivce industri\xe1ln\xed turistiky a\xa0rozhleden. Jeho 140 m vysok\xe1 kotelna je v\xa0sou\u010dasn\xe9 dob\u011b nejvy\u0161\u0161\xed pr\u016fmyslovou stavbou na \xfazem\xed \u010ceska. Dv\u011b podp\u016frn\xe9 v\u011b\u017ee kotelny, takzvan\xe1 ledvick\xe1 dvoj\u010data, jsou je\u0161t\u011b o\xa0n\u011bco vy\u0161\u0161\xed. Na vrcholu severn\xed v\u011b\u017ee je proto prosklen\xe1 rozhledna s\xa0mo\u017enost\xed vystoupit na ochoz ve v\xfd\u0161ce 140 metr\u016f. Na ofici\xe1ln\u011b nejvy\u0161\u0161\xed rozhlednu v\xa0\u010cR se lze dostat v\xa0r\xe1mci exkurze po p\u0159edchoz\xed prohl\xeddce Informa\u010dn\xedho centra klasick\xe9 energetiky, kter\xe9 je rovn\u011b\u017e jedin\xe9 sv\xe9ho druhu v\xa0republice. Infocentrum nab\xedz\xed \u0159adu interaktivn\xedch z\xe1\u017eitk\u016f, v\u010detn\u011b 3D filmu o\xa0historick\xe9m v\xfdvoji Zem\u011b a\xa0tud\xed\u017e i\xa0v\xfdrob\u011b elekt\u0159iny, on-line m\u011b\u0159en\xed fotosynt\xe9zy \u017eiv\xe9ho stromu nebo detailn\xedch popis\u016f technologie nov\xe9ho uheln\xe9ho elektr\xe1rensk\xe9ho bloku s\xa0mo\u017enost\xed virtu\xe1ln\xedho nahl\xe9dnut\xed do jednotliv\xfdch provoz\u016f.","description6":"","description7":""},"geometry":{"coordinates":[13.780800000000001,50.5767],"type":"Point"}}]}'),nm={UKNOWN:"Unknown"},dw={CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari",OPERA:"Opera",IE:"IE",MS_EDGE:"MS-Edge",MS_EDGE_CHROMIUM:"MS-Edge-Chromium",FB_MESSANGER:"FB-Messanger",SAMSUNG:"Samsung",UCBROWSER:"UC-Browser",UNKNOWN:nm.UKNOWN},iy={HTC:/HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\bEVO\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel/,NEXUS_PHONE:/Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6/,DELL:/Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\b001DL\b|\b101DL\b|\bGS01\b/,MOTOROLA:new RegExp("Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|\n      A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|\n      MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|\n      ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|\n      WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|\n      XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|\n      XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052"),SAMSUNG:new RegExp("\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|\n      GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|\n      GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|\n      GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|\n      GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|\n      GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|\n      GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|\n      GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|\n      GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|\n      GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|\n      GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|\n      GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|\n      GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|\n      GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|\n      GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|\n      GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|\n      GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|\n      GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|\n      SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|\n      SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|\n      SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|\n      SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|\n      SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|\n      SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|\n      SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|\n      SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|\n      SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|\n      SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|\n      SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|\n      SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|\n      SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|\n      SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|\n      SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|\n      SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|\n      SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|\n      SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|\n      SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|\n      SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|\n      SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|\n      SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|\n      SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|\n      SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|\n      SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|\n      SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|\n      SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|\n      SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|\n      SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|\n      SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|\n      SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|\n      GT-N7105|SCH-I535|SM-N900A|SM-N900T|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|\n      GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|\n      GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|\n      SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|\n      SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|\n      SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F"),LG:new RegExp("\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|\n      LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|\n      C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|\n      LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|\n      VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|\n      MS323|M257)"),SONY:/SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533/,ASUS:/Asus.*Galaxy|PadFone.*Mobile/,NOKIA_LUMIA:/Lumia [0-9]{3,4}/,MICROMAX:/Micromax.*\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\b/,PALM:/PalmSource|Palm/,VERTU:/Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature/,PANTECH:new RegExp("PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|\n        IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|\n        IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|\n        CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|\n        P2000|P7040|P7000|C790"),FLY:/IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250/,WIKO:new RegExp("KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|\n        SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|\n        CINK KING|CINK PEAX|CINK SLIM|SUBLIM"),I_MOBILE:/i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)/,SIMVALLEY:/\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\b/,WOLFGANG:/AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q/,ALCATEL:/Alcatel|Mobile; rv:49.0|Mobile; ALCATEL 4052R; rv:48.0/,NINTENDO:/Nintendo (3DS|Switch)/,AMOI:/Amoi/,INQ:/INQ/,VITA:/\bVita\b/,BLACKBERRY:/\bBlackBerry\b|\bBB10\b|rim[0-9]+/,FIREFOX_OS:/\bFirefox-OS\b/,IPHONE:/\biPhone\b/,iPod:/\biPod\b/,ANDROID:/\bAndroid\b/,WINDOWS_PHONE:/\bWindows-Phone\b/,GENERIC_PHONE:new RegExp("Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|\n        up.link|vodafone|\\bwap\\b|nokia|Nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser")},im={iPad:/iPad|iPad.*Mobile/,NexusTablet:/Android.*Nexus[\s]+(7|9|10)/,GoogleTablet:/Android.*Pixel C/,SamsungTablet:new RegExp("SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|\n        GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|\n        SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|\n        GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|\n        SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|\n        GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|\n        SHV-E230S|SHW-M180K|SHW-M180L|SM-T865|SM-T290|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|\n        SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|\n        GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T385M|SM-P585M|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|\n        SM-P601|SM-P605|SM-P615|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|\n        GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|\n        SM-T510|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|\n        SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T500|SM-T330|\n        SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|\n        SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|\n        SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|\n        SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|\n        SM-T719|SM-T725|SM-T813|SM-T819|SM-T580|SM-T590|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|\n        SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-P585Y|SM-X200|SM-T970"),Kindle:new RegExp("Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|\n        KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome        /[0-9.]+ (?!Mobile)"),SurfaceTablet:/Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)/,HPTablet:/HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10/,AsusTablet:new RegExp("^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|\n        TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|\n        Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|\n        ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|\n        ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b"),BlackBerryTablet:/PlayBook|RIM Tablet/,HTCtablet:/HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410/,MotorolaTablet:/xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617/,NookTablet:/Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2/,AcerTablet:new RegExp("Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|\n        W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\n        \\bA3-A20\\b|\\bA3-A30"),ToshibaTablet:/Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO/,LGTablet:/\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\b/,FujitsuTablet:/Android.*\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\b/,PrestigioTablet:new RegExp("PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|\n        PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|\n        PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|\n        PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|\n        PMT5887|PMT5001|PMT5002"),LenovoTablet:new RegExp("Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|\n        YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|\n        B8000|B8080)(-|)(FL|F|HV|H|)|TB-X606F|TB-X103F|TB-X304F|TB-X304L|TB-X704F|TB-8703F|Tab2A7-10F|TB2-X30L|TB-8504F"),DellTablet:/Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7/,YarvikTablet:new RegExp("Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|\n        TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|\n        TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|\n        TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|\n        TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b"),MedionTablet:/Android.*\bOYO\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB/,ArnovaTablet:/97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2/,IntensoTablet:/INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004/,IRUTablet:/M702pro/,MegafonTablet:/MegaFon V9|\bZTE V9\b|Android.*\bMT7A\b/,EbodaTablet:/E-Boda (Supreme|Impresspeed|Izzycomm|Essential)/,AllViewTablet:/Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)/,ArchosTablet:new RegExp("\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10|\n         Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b"),AinolTablet:/NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark/,NokiaLumiaTablet:/Lumia 2520/,SonyTablet:new RegExp("Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|\n        SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|\n        EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|\n        SGP612|SGP712"),PhilipsTablet:/\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\b/,CubeTablet:/Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT/,CobyTablet:new RegExp("MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|\n        MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010"),MIDTablet:new RegExp("M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|\n        MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|\n        MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10"),MSITablet:new RegExp("MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|\n        Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b"),SMiTTablet:/Android.*(\bMID\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)/,RockChipTablet:/Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A/,FlyTablet:/IQ310|Fly Vision/,bqTablet:new RegExp("Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|\n        Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))|Maxwell.*Lite|Maxwell.*Plus"),HuaweiTablet:new RegExp("MediaPad|MediaPad 7 Youth|MediaPad T3 10|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|\n        S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-W09|AGS-L09"),NecTablet:/\bN-06D|\bN-08D/,PantechTablet:/Pantech.*P4100/,BronchoTablet:/Broncho.*(N701|N708|N802|a710)/,VersusTablet:/TOUCHPAD.*[78910]|\bTOUCHTAB\b/,ZyncTablet:/z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900/,PositivoTablet:/TB07STA|TB10STA|TB07FTA|TB10FTA/,NabiTablet:/Android.*\bNabi/,KoboTablet:/Kobo Touch|\bK080\b|\bVox\b Build|\bArc\b Build/,DanewTablet:/DSlide.*\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\b/,TexetTablet:new RegExp("NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|\n        TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|\n        TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|\n        TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|\n        TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|\n        TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|\n        TB-436|TB-416|TB-146SE|TB-126SE"),PlaystationTablet:/Playstation.*(Portable|Vita)/,TrekstorTablet:/ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab/,PyleAudioTablet:/\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\b/,AdvanTablet:new RegExp("Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|\n        T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b"),DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|\n        Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:/Android.*\bG1\b(?!\))/,MicromaxTablet:/Funbook|Micromax.*\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\b/,KarbonnTablet:/Android.*\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\b/,AllFineTablet:/Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide/,PROSCANTablet:new RegExp("\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|\n        PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|\n        PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|\n        PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b"),YONESTablet:/BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026/,ChangJiaTablet:new RegExp("TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|\n        TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|\n        TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|\n        TPC10111|TPC10203|TPC10205|TPC10503"),GUTablet:/TX-A1301|TX-M9002|Q702|kf026/,PointOfViewTablet:new RegExp("TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|\n        TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|\n        TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|\n        TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10"),OvermaxTablet:new RegExp("OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|\n        MagicTab|Stream|TB-08|TB-09)|Qualcore 1027"),HCLTablet:/HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync/,DPSTablet:/DPS Dream 9|DPS Dual 7/,VistureTablet:/V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10/,CrestaTablet:/CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989/,MediatekTablet:/\bMT8125|MT8389|MT8135|MT8377\b/,ConcordeTablet:/Concorde([ ]+)?Tab|ConCorde ReadMan/,GoCleverTablet:new RegExp("GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|\n        TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|\n        GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|\n        TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|\n        TAB R104|TAB R83.3|TAB A1042"),ModecomTablet:new RegExp("FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|\n        FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|\n        FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003"),VoninoTablet:new RegExp("\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|\n        Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|\n        Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b"),ECSTablet:/V07OT2|TM105A|S10OT1|TR10CS1/,StorexTablet:/eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab/,VodafoneTablet:/SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497/,EssentielBTablet:/Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2/,RossMoorTablet:/RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711/,iMobileTablet:/i-mobile i-note/,TolinoTablet:/tolino tab [0-9.]+|tolino shine/,AudioSonicTablet:/\bC-22Q|T7-QC|T-17B|T-17P\b/,AMPETablet:/Android.* A78 /,SkkTablet:/Android.* (SKYPAD|PHOENIX|CYCLOPS)/,TecnoTablet:/TECNO P9|TECNO DP8D/,JXDTablet:new RegExp("Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|\n        S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|\n        P1000|P300|S18|S6600|S9100)\\b"),iJoyTablet:new RegExp("Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|\n        Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|\n        Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|\n        Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|\n        Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)"),FX2Tablet:/FX2 PAD7|FX2 PAD10/,XoroTablet:new RegExp("KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|\n        PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|\n        PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|\n        TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151"),ViewsonicTablet:/ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a/,VerizonTablet:/QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1/,OdysTablet:/LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\bXELIO\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10/,CaptivaTablet:/CAPTIVA PAD/,IconbitTablet:new RegExp("NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|\n        NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S"),TeclastTablet:new RegExp("T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\n        \\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\n        \\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\n        \\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\n        \\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\n        \\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\n        \\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\n        \\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\n        \\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi"),OndaTablet:new RegExp("\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|\n        V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|\n        V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|\n        Vi40)\\b[s]+|V10 \\b4G\\b"),JaytechTablet:/TPC-PA762/,BlaupunktTablet:/Endeavour 800NG|Endeavour 1010/,DigmaTablet:/\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\b/,EvolioTablet:/ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\bEvotab\b|\bNeura\b/,LavaTablet:/QPAD E704|\bIvoryS\b|E-TAB IVORY|\bE-TAB\b/,AocTablet:/MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712/,MpmanTablet:new RegExp("MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\n        \\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|\n        MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010"),CelkonTablet:/CT695|CT888|CT[\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\bCT-1\b/,WolderTablet:new RegExp("miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|\n        POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|\n        FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b"),MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:/\bMI PAD\b|\bHM NOTE 1W\b/,NibiruTablet:/Nibiru M1|Nibiru Jupiter One/,NexoTablet:/NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI/,LeaderTablet:new RegExp("TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|\n        TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100"),UbislateTablet:/UbiSlate[\s]?7C/,PocketBookTablet:/Pocketbook/,KocasoTablet:/\b(TB-1207)\b/,HisenseTablet:/\b(F5281|E2371)\b/,Hudl:/Hudl HT7S3|Hudl 2/,TelstraTablet:/T-Hub2/,Honeywell:/RT10A/,GenericTablet:new RegExp("Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|\n        A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|\n        Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107")},$d={BLACKBERRY:"Blackberry",FIREFOX_OS:"Firefox-OS",CHROME_BOOK:"Chrome-Book",WINDOWS_PHONE:"Windows-Phone",VITA:"Vita",PS4:"PS4",MAC:"Macintosh",CHROMECAST:"Chromecast",APPLE_TV:"Apple-TV",GOOGLE_TV:"Google-TV",ANDROID:"Android",Tesla:"Tesla",iPad:"iPad",IPHONE:"iPhone",iPod:"iPod",UNKNOWN:nm.UKNOWN,HTC:"HTC",NEXUS_PHONE:"Nexus Phone",NexusTablet:"Nexus Tablet",DELL:"Dell",MOTOROLA:"Motorola",SAMSUNG:"Samsung",LG:"LG",SONY:"Sony",ASUS:"Asus",NOKIA_LUMIA:"Nokia Lumia",MICROMAX:"Micromax",PALM:"Palm",VERTU:"Vertu",PANTECH:"PANTECH",FLY:"Fly",WIKO:"WIKO",I_MOBILE:"i-mobile",SIMVALLEY:"Simvalley",WOLFGANG:"Wolfgang",ALCATEL:"Alcatel",HONEYWELL:"Honeywell",NINTENDO:"Nintendo",AMOI:"Amoi",INQ:"INQ",GENERIC_PHONE:"Generic Phone",MI_SE_9:"Mi SE 9"},gD=[$d.PS4,$d.CHROME_BOOK,$d.MAC,$d.DELL,$d.ASUS,$d.UNKNOWN],PV={WINDOWS:"Windows",MAC:"Mac",IOS:"iOS",ANDROID:"Android",LINUX:"Linux",UNIX:"Unix",FIREFOX_OS:"Firefox-OS",CHROME_OS:"Chrome-OS",WINDOWS_PHONE:"Windows-Phone",UNKNOWN:nm.UKNOWN},RV={WINDOWS_3_11:"windows-3-11",WINDOWS_95:"windows-95",WINDOWS_ME:"windows-me",WINDOWS_98:"windows-98",WINDOWS_CE:"windows-ce",WINDOWS_2000:"windows-2000",WINDOWS_XP:"windows-xp",WINDOWS_SERVER_2003:"windows-server-2003",WINDOWS_VISTA:"windows-vista",WINDOWS_7:"windows-7",WINDOWS_8_1:"windows-8-1",WINDOWS_8:"windows-8",WINDOWS_10:"windows-10",WINDOWS_PHONE_7_5:"windows-phone-7-5",WINDOWS_PHONE_8_1:"windows-phone-8-1",WINDOWS_PHONE_10:"windows-phone-10",WINDOWS_NT_4_0:"windows-nt-4-0",MACOSX_11_0:"mac-os-x-11-0",MACOSX_16:"mac-os-x-16",MACOSX_15:"mac-os-x-15",MACOSX_14:"mac-os-x-14",MACOSX_13:"mac-os-x-13",MACOSX_12:"mac-os-x-12",MACOSX_11:"mac-os-x-11",MACOSX_10:"mac-os-x-10",MACOSX_9:"mac-os-x-9",MACOSX_8:"mac-os-x-8",MACOSX_7:"mac-os-x-7",MACOSX_6:"mac-os-x-6",MACOSX_5:"mac-os-x-5",MACOSX_4:"mac-os-x-4",MACOSX_3:"mac-os-x-3",MACOSX_2:"mac-os-x-2",MACOSX:"mac-os-x",iOS:"iOS",ANDROID_9:"android-9",UNKNOWN:nm.UKNOWN.toLowerCase()},_D={WINDOWS:{and:[{or:[/\bWindows|(Win\d\d)\b/,/\bWin 9x\b/]},{not:/\bWindows Phone\b/}]},MAC:{and:[/\bMac OS\b/,{not:{or:[/\biPhone\b/,/\biPad\b/,/\biPod\b/,/\bWindows Phone\b/]}}]},IOS:{and:[{or:[/\biPad\b/,/\biPhone\b/,/\biPod\b/]},{not:/\bWindows Phone\b/}]},ANDROID:{and:[/\bAndroid\b/,{not:/\bWindows Phone\b/}]},LINUX:/\bLinux\b/,UNIX:/\bUNIX\b/,FIREFOX_OS:{and:[/\bFirefox\b/,/Mobile\b/]},CHROME_OS:/\bCrOS\b/,WINDOWS_PHONE:{or:[/\bIEMobile\b/,/\bWindows Phone\b/]},PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/},FV={...iy,...im,..._D,FIREFOX_OS:{and:[/\bFirefox\b/,/\bMobile\b/]},CHROME_BOOK:/\bCrOS\b/,PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,CHROMECAST:/\bCrKey\b/,APPLE_TV:/^iTunes-AppleTV\/4.1$/,GOOGLE_TV:/\bGoogleTV\b/,Tesla:/Tesla\/([0-9]{4}.[0-9]{1,2}.?[0-9]{0,2}.?[0-9]{0,2})-(.{7})/,MI_SE_9:/\bXiaomi\b/,MAC:{and:[/\bMac OS\b/,{not:{or:[/\biPhone\b/,/\biPad\b/,/\biPod\b/,/\bWindows Phone\b/]}}]}},uw={WINDOWS_3_11:/Win16/,WINDOWS_95:/(Windows 95|Win95|Windows_95)/,WINDOWS_ME:/(Win 9x 4.90|Windows ME)/,WINDOWS_98:/(Windows 98|Win98)/,WINDOWS_CE:/Windows CE/,WINDOWS_2000:/(Windows NT 5.0|Windows 2000)/,WINDOWS_XP:/(Windows NT 5.1|Windows XP)/,WINDOWS_SERVER_2003:/Windows NT 5.2/,WINDOWS_VISTA:/Windows NT 6.0/,WINDOWS_7:/(Windows 7|Windows NT 6.1)/,WINDOWS_8_1:/(Windows 8.1|Windows NT 6.3)/,WINDOWS_8:/(Windows 8|Windows NT 6.2)/,WINDOWS_10:/(Windows NT 10.0)/,WINDOWS_PHONE_7_5:/(Windows Phone OS 7.5)/,WINDOWS_PHONE_8_1:/(Windows Phone 8.1)/,WINDOWS_PHONE_10:/(Windows Phone 10)/,WINDOWS_NT_4_0:{and:[/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/,{not:/Windows NT 10.0/}]},MACOSX:/(MAC OS X\s*[^ 0-9])/,MACOSX_3:/(Darwin 10.3|Mac OS X 10.3)/,MACOSX_4:/(Darwin 10.4|Mac OS X 10.4)/,MACOSX_5:/(Mac OS X 10.5)/,MACOSX_6:/(Mac OS X 10.6)/,MACOSX_7:/(Mac OS X 10.7)/,MACOSX_8:/(Mac OS X 10.8)/,MACOSX_9:/(Mac OS X 10.9)/,MACOSX_10:/(Mac OS X 10.10)/,MACOSX_11:/(Mac OS X 10.11)/,MACOSX_12:/(Mac OS X 10.12)/,MACOSX_13:/(Mac OS X 10.13)/,MACOSX_14:/(Mac OS X 10.14)/,MACOSX_15:/(Mac OS X 10.15)/,MACOSX_16:/(Mac OS X 10.16)/,MACOSX_11_0:{or:[/11_0 like Mac OS X/,/Mac OS X 11/]},iOS:/(iPhone OS\s*[0-9_]+)/,ANDROID_9:/(Android 9)/},hw={CHROME:[/\bChrome\/([\d\.]+)\b/,/\bCriOS\/([\d\.]+)\b/,/\bHeadlessChrome\/([\d\.]+)\b/],FIREFOX:[/\bFirefox\/([\d\.]+)\b/,/\bFxiOS\/([\d\.]+)\b/],SAFARI:[/\bVersion\/([\d\.]+)\b/,/\bSafari\/([\d\.]+)\b/],OPERA:[/\bVersion\/([\d\.]+)\b/,/\bOPR\/([\d\.]+)\b/],IE:[/\bMSIE ([\d\.]+\w?)\b/,/\brv:([\d\.]+\w?)\b/],MS_EDGE:/\bEdg(?:e|A|iOS)\/([\d\.]+)\b/,MS_EDGE_CHROMIUM:/\bEdg\/([\d\.]+)\b/,SAMSUNG:/\bSamsungBrowser\/([\d\.]+)\b/,UCBROWSER:/\bUCBrowser\/([\d\.]+)\b/},NV=Object.keys(uw).reduce((t,n)=>(t[n]=uw[n],t),{}),vD=Object.keys(hw).reduce((t,n)=>(t[dw[n]]=hw[n],t),{});var ec=Object.freeze({__proto__:null,BROWSERS:dw,BROWSERS_RE:{CHROME:{and:[{or:[/\bChrome\b/,/\bCriOS\b/,/\bHeadlessChrome\b/]},{not:{or:[/\bOPR\b/,/\bEdg(e|A|iOS)\b/,/\bEdg\/\b/,/\bSamsungBrowser\b/,/\bUCBrowser\b/]}}]},FIREFOX:{or:[/\bFirefox\b/,/\bFxiOS\b/]},SAFARI:{and:[/^((?!CriOS).)*\Safari\b.*$/,{not:{or:[/\bOPR\b/,/\bEdg(e|A|iOS)\b/,/\bEdg\/\b/,/\bWindows Phone\b/,/\bSamsungBrowser\b/,/\bUCBrowser\b/]}}]},OPERA:{or:[/Opera\b/,/\bOPR\b/]},IE:{or:[/\bMSIE\b/,/\bTrident\b/,/^Mozilla\/5\.0 \(Windows NT 10\.0; Win64; x64\)$/]},MS_EDGE:{or:[/\bEdg(e|A|iOS)\b/]},MS_EDGE_CHROMIUM:/\bEdg\/\b/,PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/,FB_MESSANGER:/\bFBAN\/MessengerForiOS\b/,SAMSUNG:/\bSamsungBrowser\b/,UCBROWSER:/\bUCBrowser\b/},BROWSER_VERSIONS_RE:vD,BROWSER_VERSIONS_RE_MAP:hw,DESKTOP_DEVICES:gD,DEVICES:$d,DEVICES_RE:FV,GENERAL:nm,MOBILES_RE:iy,OS:PV,OS_RE:_D,OS_VERSIONS:RV,OS_VERSIONS_RE:NV,OS_VERSIONS_RE_MAP:uw,TABLETS_RE:im});class zV{constructor(){}test(n,e){return"string"==typeof e&&(e=new RegExp(e)),e instanceof RegExp?e.test(n):e&&Array.isArray(e.and)?e.and.every(i=>this.test(n,i)):e&&Array.isArray(e.or)?e.or.some(i=>this.test(n,i)):!(!e||!e.not||this.test(n,e.not))}exec(n,e){return"string"==typeof e&&(e=new RegExp(e)),e instanceof RegExp?e.exec(n):e&&Array.isArray(e)?e.reduce((i,r)=>i||this.exec(n,r),null):null}}var dg=function(t){return t.Mobile="mobile",t.Tablet="tablet",t.Desktop="desktop",t.Unknown="unknown",t}(dg||{}),pw=function(t){return t.Portrait="portrait",t.Landscape="landscape",t}(pw||{});const mw="iPad";let fw,LV=(()=>{class t{constructor(e){this.platformId=e,this.ua="",this.userAgent="",this.os="",this.browser="",this.device="",this.os_version="",this.browser_version="",this.reTree=new zV,this.deviceType="",this.orientation="",Dv(this.platformId)&&typeof window<"u"&&(this.userAgent=window.navigator.userAgent),this.setDeviceInfo(this.userAgent)}setDeviceInfo(e=this.userAgent){e!==this.userAgent&&(this.userAgent=e);const i=[{const:"OS",prop:"os"},{const:"BROWSERS",prop:"browser"},{const:"DEVICES",prop:"device"},{const:"OS_VERSIONS",prop:"os_version"}];if(i.forEach(r=>{this[r.prop]=Object.keys(ec[r.const]).reduce((a,u)=>"device"===ec[r.const][u]&&Dv(this.platformId)&&(this.reTree.test(this.userAgent,im[mw])||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)?(a[ec[r.const][u]]=mw,Object):(a[ec[r.const][u]]=this.reTree.test(e,ec[`${r.const}_RE`][u]),a),{})}),i.forEach(r=>{this[r.prop]=Object.keys(ec[r.const]).map(a=>ec[r.const][a]).reduce((a,u)=>"device"===r.prop&&a===ec[r.const].ANDROID?this[r.prop][u]?u:a:a===ec[r.const].UNKNOWN&&this[r.prop][u]?u:a,ec[r.const].UNKNOWN)}),this.browser_version="0",this.browser!==dw.UNKNOWN){const a=this.reTree.exec(e,vD[this.browser]);a&&(this.browser_version=a[1])}this.orientation=typeof window<"u"&&window.matchMedia?window.matchMedia("(orientation: landscape)").matches?pw.Landscape:pw.Portrait:nm.UKNOWN,this.deviceType=this.isTablet()?dg.Tablet:this.isMobile(this.userAgent)?dg.Mobile:this.isDesktop(this.userAgent)?dg.Desktop:dg.Unknown}getDeviceInfo(){return{userAgent:this.userAgent,os:this.os,browser:this.browser,device:this.device,os_version:this.os_version,browser_version:this.browser_version,deviceType:this.deviceType,orientation:this.orientation}}isMobile(e=this.userAgent){return!this.isTablet(e)&&!!Object.keys(iy).find(r=>this.reTree.test(e,iy[r]))}isTablet(e=this.userAgent){return!(!Dv(this.platformId)||!(this.reTree.test(this.userAgent,im[mw])||typeof navigator<"u"&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1))||!!Object.keys(im).find(r=>!!this.reTree.test(e,im[r]))}isDesktop(e=this.userAgent){return(this.device!==$d.UNKNOWN||!this.isMobile(e)&&!this.isTablet(e))&&gD.indexOf(this.device)>-1}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Od))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();try{fw=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fw=!1}let ug,oy,ah,gw,ko=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Dv(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fw)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Od))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ry(t){return function BV(){if(null==ug&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ug=!0}))}finally{ug=ug||!1}return ug}()?t:!!t.capture}function hg(){if("object"!=typeof document||!document)return 0;if(null==oy){const t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",t.appendChild(e),document.body.appendChild(t),oy=0,0===t.scrollLeft&&(t.scrollLeft=1,oy=0===t.scrollLeft?1:2),t.remove()}return oy}function om(t){return t.composedPath?t.composedPath()[0]:t.target}class uj extends En{constructor(n,e){super()}schedule(n,e=0){return this}}const sy={setInterval(t,n,...e){const{delegate:i}=sy;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=sy;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};class vw extends uj{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(a,this.id,e),this}requestAsyncId(n,e,i=0){return sy.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&sy.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(a){i=!0,r=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,_(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}const xD={now:()=>(xD.delegate||Date).now(),delegate:void 0};class pg{constructor(n,e=pg.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}pg.now=xD.now;class yw extends pg{constructor(n,e=pg.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const bw=new yw(vw),hj=bw;function ay(t,n=bw){return Mn((e,i)=>{let r=null,a=null,u=null;const f=()=>{if(r){r.unsubscribe(),r=null;const k=a;a=null,i.next(k)}};function b(){const k=u+t,D=n.now();if(D<k)return r=this.schedule(void 0,k-D),void i.add(r);f()}e.subscribe(sn(i,k=>{a=k,u=n.now(),r||(r=n.schedule(b,t),i.add(r))},()=>{f(),i.complete()},void 0,()=>{a=r=null}))})}function wD(t){return Zr((n,e)=>t<=e)}function xr(t){return null!=t&&"false"!=`${t}`}function kD(t,n=0){return function pj(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):n}function SD(t){return Array.isArray(t)?t:[t]}function lh(t){return t instanceof Rn?t.nativeElement:t}const CD=new Set;let ch,mj=(()=>{class t{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):gj}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function fj(t,n){if(!CD.has(t))try{ch||(ch=document.createElement("style"),n&&(ch.nonce=n),ch.setAttribute("type","text/css"),document.head.appendChild(ch)),ch.sheet&&(ch.sheet.insertRule(`@media ${t} {body{ }}`,0),CD.add(t))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ko),Oe(Pb,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gj(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let _j=(()=>{class t{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Zt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return TD(SD(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let a=zv(TD(SD(e)).map(u=>this._registerQuery(u).observable));return a=Lv(a.pipe(cl(1)),a.pipe(wD(1),ay(0))),a.pipe(Dt(u=>{const f={matches:!1,breakpoints:{}};return u.forEach(({matches:b,query:k})=>{f.matches=f.matches||b,f.breakpoints[k]=b}),f}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),a={observable:new bn(u=>{const f=b=>this._zone.run(()=>u.next(b));return i.addListener(f),()=>{i.removeListener(f)}}).pipe(Bv(i),Dt(({matches:u})=>({query:e,matches:u})),Zo(this._destroySubject)),mql:i};return this._queries.set(e,a),a}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(mj),Oe(At))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TD(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}let DD=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function kj(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function wj(t){try{return t.frameElement}catch{return null}}(function Aj(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(i&&(-1===AD(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),a=AD(e);return e.hasAttribute("contenteditable")?-1!==a:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Dj(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==a:"video"===r?-1!==a&&(null!==a||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function Ij(t){return!function Cj(t){return function Ej(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function Sj(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function Tj(t){return function Mj(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||ID(t))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ko))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ID(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function AD(t){if(!ID(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class Pj{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,i,r,a=!1){this._element=n,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(cl(1)).subscribe(n)}}let Rj=(()=>{class t{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new Pj(e,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(DD),Oe(At),Oe(Hn))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function PD(t){return 0===t.buttons||0===t.detail}function RD(t){const n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const Oj=new ze("cdk-input-modality-detector-options"),Fj={ignoreKeys:[18,17,224,91,16]},sm=ry({passive:!0,capture:!0});let Nj=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(e,i,r,a){this._platform=e,this._mostRecentTarget=null,this._modality=new tn(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(f=>f===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=om(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(PD(u)?"keyboard":"mouse"),this._mostRecentTarget=om(u))},this._onTouchstart=u=>{RD(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=om(u))},this._options={...Fj,...a},this.modalityDetected=this._modality.pipe(wD(1)),this.modalityChanged=this.modalityDetected.pipe(id()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,sm),r.addEventListener("mousedown",this._onMousedown,sm),r.addEventListener("touchstart",this._onTouchstart,sm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,sm),document.removeEventListener("mousedown",this._onMousedown,sm),document.removeEventListener("touchstart",this._onTouchstart,sm))}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ko),Oe(At),Oe(Hn),Oe(Oj,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Lj=new ze("cdk-focus-monitor-default-options"),ly=ry({passive:!0,capture:!0});let FD=(()=>{class t{constructor(e,i,r,a,u){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Zt,this._rootNodeFocusAndBlurListener=f=>{for(let k=om(f);k;k=k.parentElement)"focus"===f.type?this._onFocus(f,k):this._onBlur(f,k)},this._document=a,this._detectionMode=u?.detectionMode||0}monitor(e,i=!1){const r=lh(e);if(!this._platform.isBrowser||1!==r.nodeType)return mt();const a=function HV(t){if(function jV(){if(null==gw){const t=typeof document<"u"?document.head:null;gw=!(!t||!t.createShadowRoot&&!t.attachShadow)}return gw}()){const n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(r)||this._getDocument(),u=this._elementInfo.get(r);if(u)return i&&(u.checkChildren=!0),u.subject;const f={checkChildren:i,subject:new Zt,rootNode:a};return this._elementInfo.set(r,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(e){const i=lh(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const a=lh(e);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([f,b])=>this._originChanged(f,i,b)):(this._setOrigin(i),"function"==typeof a.focus&&a.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),a=om(e);!r||!r.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,ly),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,ly)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Zo(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ly),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ly),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,a)=>{(a===e||r.checkChildren&&a.contains(e))&&i.push([a,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const a=e.labels;if(a)for(let u=0;u<a.length;u++)if(a[u].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(At),Oe(ko),Oe(Nj),Oe(Hn,8),Oe(Lj,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ND="cdk-high-contrast-black-on-white",zD="cdk-high-contrast-white-on-black",xw="cdk-high-contrast-active";let Bj=(()=>{class t{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=qe(_j).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,a=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(xw,ND,zD),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(xw,ND):2===i&&e.add(xw,zD)}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ko),Oe(Hn))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Vj=new ze("cdk-dir-doc",{providedIn:"root",factory:function jj(){return qe(Hn)}}),Hj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let LD=(()=>{class t{constructor(e){this.value="ltr",this.change=new et,e&&(this.value=function Uj(t){const n=t?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?Hj.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Vj,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),BD=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})();const $j=new ze("mat-sanity-checks",{providedIn:"root",factory:function Gj(){return!0}});let So=(()=>{class t{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!function GV(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Bj),Oe($j,8),Oe(Hn))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[BD,BD]})}return t})();function Wj(t){return class extends t{get disabled(){return this._disabled}set disabled(n){this._disabled=xr(n)}constructor(...n){super(...n),this._disabled=!1}}}function ww(t,n){return class extends t{get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...e){super(...e),this.defaultColor=n,this.color=n}}}function qj(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=xr(n)}constructor(...n){super(...n),this._disableRipple=!1}}}class Kj{constructor(n,e,i,r=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const HD=ry({passive:!0,capture:!0});class Xj{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=om(n);e&&this._events.get(n.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(a=>a.handleEvent(n))})}}addHandler(n,e,i,r){const a=this._events.get(e);if(a){const u=a.get(i);u?u.add(r):a.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,HD)})}removeHandler(n,e,i){const r=this._events.get(n);if(!r)return;const a=r.get(e);a&&(a.delete(i),0===a.size&&r.delete(e),0===r.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,HD)))}}const UD={enterDuration:225,exitDuration:150},GD=ry({passive:!0,capture:!0}),$D=["mousedown","touchstart"],WD=["mouseup","mouseleave","touchend","touchcancel"];class fg{static#e=this._eventManager=new Xj;constructor(n,e,i,r){this._target=n,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=lh(i))}fadeInRipple(n,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...UD,...i.animation};i.centered&&(n=r.left+r.width/2,e=r.top+r.height/2);const u=i.radius||function Yj(t,n,e){const i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+r*r)}(n,e,r),f=n-r.left,b=e-r.top,k=a.enterDuration,D=document.createElement("div");D.classList.add("mat-ripple-element"),D.style.left=f-u+"px",D.style.top=b-u+"px",D.style.height=2*u+"px",D.style.width=2*u+"px",null!=i.color&&(D.style.backgroundColor=i.color),D.style.transitionDuration=`${k}ms`,this._containerElement.appendChild(D);const N=window.getComputedStyle(D),K=N.transitionDuration,re="none"===N.transitionProperty||"0s"===K||"0s, 0s"===K||0===r.width&&0===r.height,ue=new Kj(this,D,i,re);D.style.transform="scale3d(1, 1, 1)",ue.state=0,i.persistent||(this._mostRecentTransientRipple=ue);let we=null;return!re&&(k||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const De=()=>this._finishRippleTransition(ue),ye=()=>this._destroyRipple(ue);D.addEventListener("transitionend",De),D.addEventListener("transitioncancel",ye),we={onTransitionEnd:De,onTransitionCancel:ye}}),this._activeRipples.set(ue,we),(re||!k)&&this._finishRippleTransition(ue),ue}fadeOutRipple(n){if(2===n.state||3===n.state)return;const e=n.element,i={...UD,...n.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=lh(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,$D.forEach(i=>{fg._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{WD.forEach(e=>{this._triggerElement.addEventListener(e,this,GD)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=1,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel)),n.element.remove()}_onMousedown(n){const e=PD(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!RD(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&($D.forEach(e=>fg._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&WD.forEach(e=>n.removeEventListener(e,this,GD)))}}const gg=new ze("mat-ripple-global-options");let Jj=(()=>{class t{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,a,u){this._elementRef=e,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new fg(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(At),me(ko),me(gg,8),me($l,8))};static#t=this.\u0275dir=Je({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&rr("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})(),qD=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[So,So]})}return t})(),e6=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[So]})}return t})();const ZD={capture:!0},KD=["focus","click","mouseenter","touchstart"],kw="mat-ripple-loader-uninitialized",Sw="mat-ripple-loader-class-name",XD="mat-ripple-loader-centered",cy="mat-ripple-loader-disabled";let t6=(()=>{class t{constructor(){this._document=qe(Hn,{optional:!0}),this._animationMode=qe($l,{optional:!0}),this._globalRippleOptions=qe(gg,{optional:!0}),this._platform=qe(ko),this._ngZone=qe(At),this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;const r=e.target.closest(`[${kw}]`);r&&this.createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const e of KD)this._document?.addEventListener(e,this._onInteraction,ZD)})}ngOnDestroy(){for(const e of KD)this._document?.removeEventListener(e,this._onInteraction,ZD)}configureRipple(e,i){e.setAttribute(kw,""),(i.className||!e.hasAttribute(Sw))&&e.setAttribute(Sw,i.className||""),i.centered&&e.setAttribute(XD,""),i.disabled&&e.setAttribute(cy,"")}getRipple(e){return e.matRipple?e.matRipple:this.createRipple(e)}setDisabled(e,i){const r=e.matRipple;r?r.disabled=i:i?e.setAttribute(cy,""):e.removeAttribute(cy)}createRipple(e){if(!this._document)return;e.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(Sw)),e.append(i);const r=new Jj(new Rn(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=e,r.centered=e.hasAttribute(XD),r.disabled=e.hasAttribute(cy),this.attachRipple(e,r),r}attachRipple(e,i){e.removeAttribute(kw),e.matRipple=i}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const n6=["mat-button",""],i6=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],r6=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],s6=["mat-icon-button",""],a6=["*"],l6=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],c6=ww(Wj(qj(class{constructor(t){this._elementRef=t}})));let QD=(()=>{class t extends c6{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=xr(e),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=xr(e),this._updateRippleDisabled()}constructor(e,i,r,a){super(e),this._platform=i,this._ngZone=r,this._animationMode=a,this._focusMonitor=qe(FD),this._rippleLoader=qe(t6),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const u=e.nativeElement.classList;for(const f of l6)this._hasHostAttributes(f.selector)&&f.mdcClasses.forEach(b=>{u.add(b)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...e){return e.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){Qb()};static#t=this.\u0275dir=Je({type:t,features:[Qt]})}return t})(),u6=(()=>{class t extends QD{constructor(e,i,r,a){super(e,i,r,a)}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(ko),me(At),me($l,8))};static#t=this.\u0275cmp=ri({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(Nr("disabled",r.disabled||null),rr("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Qt],attrs:n6,ngContentSelectors:r6,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(Go(i6),vr(0,"span",0),Cn(1),Et(2,"span",1),Cn(3,1),Vt(),Cn(4,2),vr(5,"span",2)(6,"span",3)),2&i&&rr("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),p6=(()=>{class t extends QD{constructor(e,i,r,a){super(e,i,r,a),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(ko),me(At),me($l,8))};static#t=this.\u0275cmp=ri({type:t,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(Nr("disabled",r.disabled||null),rr("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Qt],attrs:s6,ngContentSelectors:a6,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(Go(),vr(0,"span",0),Cn(1),vr(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),m6=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[So,qD,So]})}return t})();const f6=["addListener","removeListener"],g6=["addEventListener","removeEventListener"],_6=["on","off"];function _g(t,n,e,i){if(nn(e)&&(i=e,e=void 0),i)return _g(t,n,e).pipe(Lx(i));const[r,a]=function b6(t){return nn(t.addEventListener)&&nn(t.removeEventListener)}(t)?g6.map(u=>f=>t[u](n,f,e)):function v6(t){return nn(t.addListener)&&nn(t.removeListener)}(t)?f6.map(YD(t,n)):function y6(t){return nn(t.on)&&nn(t.off)}(t)?_6.map(YD(t,n)):[];if(!r&&G(t))return Ot(u=>_g(u,n,e))(Xe(t));if(!r)throw new TypeError("Invalid event target");return new bn(u=>{const f=(...b)=>u.next(1<b.length?b:b[0]);return r(f),()=>a(f)})}function YD(t,n){return e=>i=>t[e](n,i)}const vg={schedule(t){let n=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=vg;i&&(n=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=n(a=>{e=void 0,t(a)});return new En(()=>e?.(r))},requestAnimationFrame(...t){const{delegate:n}=vg;return(n?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:n}=vg;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class w6 extends yw{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;n=n||i.shift();do{if(r=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}}(class x6 extends vw{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=vg.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:a}=n;null!=e&&(null===(r=a[a.length-1])||void 0===r?void 0:r.id)!==e&&(vg.cancelAnimationFrame(e),n._scheduled=void 0)}});let Cw,S6=1;const dy={};function JD(t){return t in dy&&(delete dy[t],!0)}const C6={setImmediate(t){const n=S6++;return dy[n]=!0,Cw||(Cw=Promise.resolve()),Cw.then(()=>JD(n)&&t()),n},clearImmediate(t){JD(t)}},{setImmediate:T6,clearImmediate:E6}=C6,uy={setImmediate(...t){const{delegate:n}=uy;return(n?.setImmediate||T6)(...t)},clearImmediate(t){const{delegate:n}=uy;return(n?.clearImmediate||E6)(t)},delegate:void 0};new class D6 extends yw{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;n=n||i.shift();do{if(r=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}}(class M6 extends vw{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=uy.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:a}=n;null!=e&&(null===(r=a[a.length-1])||void 0===r?void 0:r.id)!==e&&(uy.clearImmediate(e),n._scheduled===e&&(n._scheduled=void 0))}});function eI(t,n=bw){return function A6(t){return Mn((n,e)=>{let i=!1,r=null,a=null,u=!1;const f=()=>{if(a?.unsubscribe(),a=null,i){i=!1;const k=r;r=null,e.next(k)}u&&e.complete()},b=()=>{a=null,u&&e.complete()};n.subscribe(sn(e,k=>{i=!0,r=k,a||Xe(t(k)).subscribe(a=sn(e,f,b))},()=>{u=!0,(!i||!a||a.closed)&&e.complete()}))})}(()=>function R6(t=0,n,e=hj){let i=-1;return null!=n&&(Ma(n)?e=n:i=n),new bn(r=>{let a=function P6(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let u=0;return e.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},a)})}(t,n))}let tI=(()=>{class t{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Zt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new bn(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(eI(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):mt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Zr(a=>!a||r.indexOf(a)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,a)=>{this._scrollableContainsElement(a,e)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=lh(i),a=e.getElementRef().nativeElement;do{if(r==a)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>_g(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(At),Oe(ko),Oe(Hn,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tw=(()=>{class t{constructor(e,i,r,a){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=a,this._destroyed=new Zt,this._elementScrolled=new bn(u=>this.ngZone.runOutsideAngular(()=>_g(this.elementRef.nativeElement,"scroll").pipe(Zo(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=hg()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==hg()?e.left=e.right:1==hg()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;!function VV(){if(null==ah){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ah=!1,ah;if("scrollBehavior"in document.documentElement.style)ah=!0;else{const t=Element.prototype.scrollTo;ah=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return ah}()?(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left)):i.scrollTo(e)}measureScrollOffset(e){const i="left",r="right",a=this.elementRef.nativeElement;if("top"==e)return a.scrollTop;if("bottom"==e)return a.scrollHeight-a.clientHeight-a.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==e?e=u?r:i:"end"==e&&(e=u?i:r),u&&2==hg()?e==i?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:u&&1==hg()?e==i?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:e==i?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(tI),me(At),me(LD,8))};static#t=this.\u0275dir=Je({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return t})(),N6=(()=>{class t{constructor(e,i,r){this._platform=e,this._change=new Zt,this._changeListener=a=>{this._change.next(a)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,a=r.getBoundingClientRect();return{top:-a.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-a.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(eI(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ko),Oe(At),Oe(Hn,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nI=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})();class iI{}class z6{}const Qc="*";function L6(t,n){return{type:7,name:t,definitions:n,options:{}}}function rI(t,n=null){return{type:4,styles:n,timings:t}}function oI(t,n=null){return{type:2,steps:t,options:n}}function hy(t){return{type:6,styles:t,offset:null}}function sI(t,n,e){return{type:0,name:t,styles:n,options:e}}function aI(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}class yg{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class lI{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,r=0;const a=this.players.length;0==a?queueMicrotask(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==a&&this._onFinish()}),u.onDestroy(()=>{++i==a&&this._onDestroy()}),u.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,f)=>Math.max(u,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const cI=["*"],B6=["content"];function V6(t,n){if(1&t){const e=zp();Et(0,"div",2),Mi("click",function(){return Ga(e),zl(wo()._onBackdropClicked())}),Vt()}2&t&&rr("mat-drawer-shown",wo()._isShowingBackdrop())}function j6(t,n){1&t&&(Et(0,"mat-drawer-content"),Cn(1,2),Vt())}const H6=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],U6=["mat-drawer","mat-drawer-content","*"],G6={transformDrawer:L6("transform",[sI("open, open-instant",hy({transform:"none",visibility:"visible"})),sI("void",hy({"box-shadow":"none",visibility:"hidden"})),aI("void => open-instant",rI("0ms")),aI("void <=> open, open-instant => void",rI("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},$6=new ze("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function W6(){return!1}}),dI=new ze("MAT_DRAWER_CONTAINER");let Mw=(()=>{class t extends Tw{constructor(e,i,r,a,u){super(r,a,u),this._changeDetectorRef=e,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(i){return new(i||t)(me(Ld),me(kn(()=>hI)),me(Rn),me(tI),me(At))};static#t=this.\u0275cmp=ri({type:t,selectors:[["mat-drawer-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,r){2&i&&S0("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[jn([{provide:Tw,useExisting:t}]),Qt],ngContentSelectors:cI,decls:1,vars:0,template:function(i,r){1&i&&(Go(),Cn(0))},encapsulation:2,changeDetection:0})}return t})(),uI=(()=>{class t{get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=xr(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=xr(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(xr(e))}constructor(e,i,r,a,u,f,b,k){this._elementRef=e,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=a,this._ngZone=u,this._interactivityChecker=f,this._doc=b,this._container=k,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Zt,this._animationEnd=new Zt,this._animationState="void",this.openedChange=new et(!0),this._openedStream=this.openedChange.pipe(Zr(D=>D),Dt(()=>{})),this.openedStart=this._animationStarted.pipe(Zr(D=>D.fromState!==D.toState&&0===D.toState.indexOf("open")),jx(void 0)),this._closedStream=this.openedChange.pipe(Zr(D=>!D),Dt(()=>{})),this.closedStart=this._animationStarted.pipe(Zr(D=>D.fromState!==D.toState&&"void"===D.toState),jx(void 0)),this._destroyed=new Zt,this.onPositionChanged=new et,this._modeChanged=new Zt,this.openedChange.subscribe(D=>{D?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{_g(this._elementRef.nativeElement,"keydown").pipe(Zr(D=>27===D.keyCode&&!this.disableClose&&!function _w(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(D)),Zo(this._destroyed)).subscribe(D=>this._ngZone.run(()=>{this.close(),D.stopPropagation(),D.preventDefault()}))}),this._animationEnd.pipe(id((D,N)=>D.fromState===N.fromState&&D.toState===N.toState)).subscribe(D=>{const{fromState:N,toState:U}=D;(0===U.indexOf("open")&&"void"===N||"void"===U&&0===N.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,i){e&&i&&(this._openedVia=i);const r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,i,r){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(a=>{this.openedChange.pipe(cl(1)).subscribe(u=>a(u?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(e){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(Rj),me(FD),me(ko),me(At),me(DD),me(Hn,8),me(dI,8))};static#t=this.\u0275cmp=ri({type:t,selectors:[["mat-drawer"]],viewQuery:function(i,r){if(1&i&&Xl(B6,5),2&i){let a;Gi(a=$i())&&(r._content=a.first)}},hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer"],hostVars:12,hostBindings:function(i,r){1&i&&y0("@transform.start",function(u){return r._animationStarted.next(u)})("@transform.done",function(u){return r._animationEnd.next(u)}),2&i&&(Nr("align",null),T0("@transform",r._animationState),rr("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:cI,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,r){1&i&&(Go(),Et(0,"div",0,1),Cn(2),Vt())},dependencies:[Tw],encapsulation:2,data:{animation:[G6.transformDrawer]},changeDetection:0})}return t})(),hI=(()=>{class t{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=xr(e)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=null==e?null:xr(e)}get scrollable(){return this._userContent||this._content}constructor(e,i,r,a,u,f=!1,b){this._dir=e,this._element=i,this._ngZone=r,this._changeDetectorRef=a,this._animationMode=b,this._drawers=new jp,this.backdropClick=new et,this._destroyed=new Zt,this._doCheckSubject=new Zt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Zt,e&&e.change.pipe(Zo(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),u.change().pipe(Zo(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=f}ngAfterContentInit(){this._allDrawers.changes.pipe(Bv(this._allDrawers),Zo(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Bv(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(ay(10),Zo(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();e+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,e-=r}e=e||null,i=i||null,(e!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:e,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(Zr(i=>i.fromState!==i.toState),Zo(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(Zo(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e&&e.onPositionChanged.pipe(Zo(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(cl(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(Zo(xs(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return null!=e&&e.opened}_drawerHasBackdrop(e){return null==this._backdropOverride?!!e&&"side"!==e.mode:this._backdropOverride}static#e=this.\u0275fac=function(i){return new(i||t)(me(LD,8),me(Rn),me(At),me(Ld),me(N6),me($6),me($l,8))};static#t=this.\u0275cmp=ri({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(i,r,a){if(1&i&&(js(a,Mw,5),js(a,uI,5)),2&i){let u;Gi(u=$i())&&(r._content=u.first),Gi(u=$i())&&(r._allDrawers=u)}},viewQuery:function(i,r){if(1&i&&Xl(Mw,5),2&i){let a;Gi(a=$i())&&(r._userContent=a.first)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,r){2&i&&rr("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[jn([{provide:dI,useExisting:t}])],ngContentSelectors:U6,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){1&i&&(Go(H6),Ei(0,V6,1,2,"div",0),Cn(1),Cn(2,1),Ei(3,j6,2,0,"mat-drawer-content",1)),2&i&&(cn("ngIf",r.hasBackdrop),en(3),cn("ngIf",!r._content))},dependencies:[Mv,Mw],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return t})(),q6=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Wf,So,nI,nI,So]})}return t})();class Dw{}class Yc{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),a=r.toLowerCase(),u=e.slice(i+1).trim();this.maybeSetNormalizedName(r,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Yc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Yc;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Yc?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const r=("a"===n.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const a=n.value;if(a){let u=this.headers.get(e);if(!u)return;u=u.filter(f=>-1===a.indexOf(f)),0===u.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,u)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(a=>a.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class Z6{encodeKey(n){return mI(n)}encodeValue(n){return mI(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const X6=/%(\d[a-f0-9])/gi,Q6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mI(t){return encodeURIComponent(t).replace(X6,(n,e)=>Q6[e]??n)}function py(t){return`${t}`}class Wd{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Z6,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function K6(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const a=r.indexOf("="),[u,f]=-1==a?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,a)),n.decodeValue(r.slice(a+1))],b=e.get(u)||[];b.push(f),e.set(u,b)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],r=Array.isArray(i)?i.map(py):[py(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(a=>{e.push({param:i,value:a,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Wd({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(py(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(py(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class Y6{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function fI(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function gI(t){return typeof Blob<"u"&&t instanceof Blob}function _I(t){return typeof FormData<"u"&&t instanceof FormData}class bg{constructor(n,e,i,r){let a;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function J6(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,a=r):a=i,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Yc),this.context||(this.context=new Y6),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+u}}else this.params=new Wd,this.urlWithParams=e}serializeBody(){return null===this.body?null:fI(this.body)||gI(this.body)||_I(this.body)||function e8(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_I(this.body)?null:gI(this.body)?this.body.type||null:fI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,a=void 0!==n.body?n.body:this.body,u=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,f=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let b=n.headers||this.headers,k=n.params||this.params;const D=n.context??this.context;return void 0!==n.setHeaders&&(b=Object.keys(n.setHeaders).reduce((N,U)=>N.set(U,n.setHeaders[U]),b)),n.setParams&&(k=Object.keys(n.setParams).reduce((N,U)=>N.set(U,n.setParams[U]),k)),new bg(e,i,a,{params:k,headers:b,context:D,reportProgress:f,responseType:r,withCredentials:u})}}var Aw=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Aw||{});class t8{constructor(n,e=200,i="OK"){this.headers=n.headers||new Yc,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class xg extends t8{constructor(n={}){super(n),this.type=Aw.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new xg({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}function Pw(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Rw=(()=>{class t{constructor(e){this.handler=e}request(e,i,r={}){let a;if(e instanceof bg)a=e;else{let b,k;b=r.headers instanceof Yc?r.headers:new Yc(r.headers),r.params&&(k=r.params instanceof Wd?r.params:new Wd({fromObject:r.params})),a=new bg(e,i,void 0!==r.body?r.body:null,{headers:b,context:r.context,params:k,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const u=mt(a).pipe(qp(b=>this.handler.handle(b)));if(e instanceof bg||"events"===r.observe)return u;const f=u.pipe(Zr(b=>b instanceof xg));switch(r.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe(Dt(b=>{if(null!==b.body&&!(b.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return b.body}));case"blob":return f.pipe(Dt(b=>{if(null!==b.body&&!(b.body instanceof Blob))throw new Error("Response is not a Blob.");return b.body}));case"text":return f.pipe(Dt(b=>{if(null!==b.body&&"string"!=typeof b.body)throw new Error("Response is not a string.");return b.body}));default:return f.pipe(Dt(b=>b.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Wd).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Pw(r,i))}post(e,i,r={}){return this.request("POST",e,Pw(r,i))}put(e,i,r={}){return this.request("PUT",e,Pw(r,i))}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Dw))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const x8=["*"];let gy;function wg(t){return function w8(){if(void 0===gy&&(gy=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(gy=t.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return gy}()?.createHTML(t)||t}function EI(t){return Error(`Unable to find icon with the name "${t}"`)}function MI(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function DI(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class uh{constructor(n,e,i){this.url=n,this.svgText=e,this.options=i}}let _y=(()=>{class t{constructor(e,i,r,a){this._httpClient=e,this._sanitizer=i,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,a){return this._addSvgIconConfig(e,i,new uh(r,null,a))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,a){const u=this._sanitizer.sanitize(oo.HTML,r);if(!u)throw DI(r);const f=wg(u);return this._addSvgIconConfig(e,i,new uh("",f,a))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new uh(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const a=this._sanitizer.sanitize(oo.HTML,i);if(!a)throw DI(i);const u=wg(a);return this._addSvgIconSetConfig(e,new uh("",u,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(oo.RESOURCE_URL,e);if(!i)throw MI(e);const r=this._cachedIconsByUrl.get(i);return r?mt(vy(r)):this._loadSvgIconFromConfig(new uh(e,null)).pipe(br(a=>this._cachedIconsByUrl.set(i,a)),Dt(a=>vy(a)))}getNamedSvgIcon(e,i=""){const r=II(i,e);let a=this._svgIconConfigs.get(r);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(i,e),a)return this._svgIconConfigs.set(r,a),this._getSvgFromConfig(a);const u=this._iconSetConfigs.get(i);return u?this._getSvgFromIconSetConfigs(e,u):Wp(EI(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?mt(vy(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Dt(i=>vy(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?mt(r):function pI(...t){const n=bh(t),{args:e,keys:i}=cM(t),r=new bn(a=>{const{length:u}=e;if(!u)return void a.complete();const f=new Array(u);let b=u,k=u;for(let D=0;D<u;D++){let N=!1;Xe(e[D]).subscribe(sn(a,U=>{N||(N=!0,k--),f[D]=U},()=>b--,void 0,()=>{(!b||!N)&&(k||a.next(i?dM(i,f):f),a.complete())}))}});return n?r.pipe(Lx(n)):r}(i.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(Hd(f=>{const k=`Loading icon set URL: ${this._sanitizer.sanitize(oo.RESOURCE_URL,u.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(k)),mt(null)})))).pipe(Dt(()=>{const u=this._extractIconWithNameFromAnySet(e,i);if(!u)throw EI(e);return u}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const a=i[r];if(a.svgText&&a.svgText.toString().indexOf(e)>-1){const u=this._svgElementFromConfig(a),f=this._extractSvgIconFromSet(u,e,a.options);if(f)return f}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(br(i=>e.svgText=i),Dt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?mt(null):this._fetchIcon(e).pipe(br(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const a=e.querySelector(`[id="${i}"]`);if(!a)return null;const u=a.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,r);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),r);const f=this._svgElementFromString(wg("<svg></svg>"));return f.appendChild(u),this._setSvgAttributes(f,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(wg("<svg></svg>")),r=e.attributes;for(let a=0;a<r.length;a++){const{name:u,value:f}=r[a];"id"!==u&&i.setAttribute(u,f)}for(let a=0;a<e.childNodes.length;a++)e.childNodes[a].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[a].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,a=r?.withCredentials??!1;if(!this._httpClient)throw function k8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const u=this._sanitizer.sanitize(oo.RESOURCE_URL,i);if(!u)throw MI(i);const f=this._inProgressUrlFetches.get(u);if(f)return f;const b=this._httpClient.get(u,{responseType:"text",withCredentials:a}).pipe(Dt(k=>wg(k)),Vv(()=>this._inProgressUrlFetches.delete(u)),Vr());return this._inProgressUrlFetches.set(u,b),b}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(II(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const a=this._resolvers[r](i,e);if(a)return C8(a)?new uh(a.url,null,a.options):new uh(a,null)}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Rw,8),Oe(Rv),Oe(Hn,8),Oe(ma))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vy(t){return t.cloneNode(!0)}function II(t,n){return t+":"+n}function C8(t){return!(!t.url||!t.options)}const T8=ww(class{constructor(t){this._elementRef=t}}),E8=new ze("MAT_ICON_DEFAULT_OPTIONS"),M8=new ze("mat-icon-location",{providedIn:"root",factory:function D8(){const t=qe(Hn),n=t?t.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),AI=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],I8=AI.map(t=>`[${t}]`).join(", "),A8=/^url\(['"]?#(.*?)['"]?\)$/;let P8=(()=>{class t extends T8{get inline(){return this._inline}set inline(e){this._inline=xr(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(e,i,r,a,u,f){super(e),this._iconRegistry=i,this._location=a,this._errorHandler=u,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=En.EMPTY,f&&(f.color&&(this.color=this.defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,a)=>{r.forEach(u=>{a.setAttribute(u.name,`url('${e}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(I8),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<i.length;a++)AI.forEach(u=>{const f=i[a],b=f.getAttribute(u),k=b?b.match(A8):null;if(k){let D=r.get(f);D||(D=[],r.set(f,D)),D.push({name:u,value:k[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(cl(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${a.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(_y),function Ac(t){return function Zg(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const a=e[r];if(uu(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(a===n)return e[r+1];r+=2}}}return null}(Ar(),t)}("aria-hidden"),me(M8),me(ma),me(E8,8))};static#t=this.\u0275cmp=ri({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Nr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),rr("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Qt],ngContentSelectors:x8,decls:1,vars:0,template:function(i,r){1&i&&(Go(),Cn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return t})(),R8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[So,So]})}return t})();const O8=["*",[["mat-toolbar-row"]]],F8=["*","mat-toolbar-row"],N8=ww(class{constructor(t){this._elementRef=t}});let z8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return t})(),L8=(()=>{class t extends N8{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(ko),me(Hn))};static#t=this.\u0275cmp=ri({type:t,selectors:[["mat-toolbar"]],contentQueries:function(i,r,a){if(1&i&&js(a,z8,5),2&i){let u;Gi(u=$i())&&(r._toolbarRows=u)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(i,r){2&i&&rr("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Qt],ngContentSelectors:F8,decls:2,vars:0,template:function(i,r){1&i&&(Go(O8),Cn(0),Cn(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return t})(),B8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[So,So]})}return t})(),PI=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),V8=(()=>{class t{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=lh(e);return new bn(r=>{const u=this._observeElement(i).subscribe(r);return()=>{u.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Zt,r=this._mutationObserverFactory.create(a=>i.next(a));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(PI))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),RI=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=xr(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=kD(e),this._subscribe()}constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new et,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(ay(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)(me(V8),me(Rn),me(At))};static#t=this.\u0275dir=Je({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return t})(),j8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({providers:[PI]})}return t})(),H8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[So,So]})}return t})();const LA=["*"],VA=["unscopedContent"],j9=["text"],H9=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],U9=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],jA=new ze("ListOption");let n1=(()=>{class t{constructor(e){this._elementRef=e}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn))};static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return t})(),HA=(()=>{class t{constructor(e){this._elementRef=e}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn))};static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return t})(),aH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return t})(),UA=(()=>{class t{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}static#e=this.\u0275fac=function(i){return new(i||t)(me(jA,8))};static#t=this.\u0275dir=Je({type:t,hostVars:4,hostBindings:function(i,r){2&i&&rr("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return t})(),lH=(()=>{class t extends UA{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Oi(t)))(r||t)}}();static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Qt]})}return t})(),cH=(()=>{class t extends UA{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Oi(t)))(r||t)}}();static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Qt]})}return t})();const dH=new ze("MAT_LIST_CONFIG");let lm=(()=>{class t{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=qe(dH,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=xr(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=xr(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,hostVars:1,hostBindings:function(i,r){2&i&&Nr("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return t})(),r1=(()=>{class t{set lines(e){this._explicitLines=kD(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=xr(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=xr(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,i,r,a,u,f){this._elementRef=e,this._ngZone=i,this._listBase=r,this._platform=a,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new En,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=u||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===f,r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new fg(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(xs(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();const i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===i),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===i),this._hasUnscopedTextContent){const a=0===this._titles.length&&1===i;r.classList.toggle("mdc-list-item__primary-text",a),r.classList.toggle("mdc-list-item__secondary-text",!a)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!(!e.textContent||!e.textContent.trim()))}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(At),me(lm,8),me(ko),me(gg,8),me($l,8))};static#t=this.\u0275dir=Je({type:t,contentQueries:function(i,r,a){if(1&i&&(js(a,lH,4),js(a,cH,4)),2&i){let u;Gi(u=$i())&&(r._avatars=u),Gi(u=$i())&&(r._icons=u)}},hostVars:4,hostBindings:function(i,r){2&i&&(Nr("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),rr("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return t})(),uH=(()=>{class t extends lm{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Oi(t)))(r||t)}}();static#t=this.\u0275cmp=ri({type:t,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[jn([{provide:lm,useExisting:t}]),Qt],ngContentSelectors:LA,decls:1,vars:0,template:function(i,r){1&i&&(Go(),Cn(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0})}return t})(),hH=(()=>{class t extends r1{get activated(){return this._activated}set activated(e){this._activated=xr(e)}constructor(e,i,r,a,u,f){super(e,i,r,a,u,f),this._activated=!1}_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(At),me(lm,8),me(ko),me(gg,8),me($l,8))};static#t=this.\u0275cmp=ri({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,a){if(1&i&&(js(a,HA,5),js(a,n1,5),js(a,aH,5)),2&i){let u;Gi(u=$i())&&(r._lines=u),Gi(u=$i())&&(r._titles=u),Gi(u=$i())&&(r._meta=u)}},viewQuery:function(i,r){if(1&i&&(Xl(VA,5),Xl(j9,5)),2&i){let a;Gi(a=$i())&&(r._unscopedContent=a.first),Gi(a=$i())&&(r._itemText=a.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(i,r){2&i&&(Nr("aria-current",r._getAriaCurrent()),rr("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",0!==r._avatars.length)("mdc-list-item--with-leading-icon",0!==r._icons.length)("mdc-list-item--with-trailing-meta",0!==r._meta.length)("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[Qt],ngContentSelectors:U9,decls:10,vars:0,consts:[[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],[1,"mat-mdc-focus-indicator"]],template:function(i,r){1&i&&(Go(H9),Cn(0),Et(1,"span",0),Cn(2,1),Cn(3,2),Et(4,"span",1,2),Mi("cdkObserveContent",function(){return r._updateItemLines(!0)}),Cn(6,3),Vt()(),Cn(7,4),Cn(8,5),vr(9,"div",3))},dependencies:[RI],encapsulation:2,changeDetection:0})}return t})(),mH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"]})}return t})(),vH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[j8,Wf,So,qD,e6,H8]})}return t})();const yH=["*"],SH=new ze("MAT_CARD_CONFIG");let $A=(()=>{class t{constructor(e){this.appearance=e?.appearance||"raised"}static#e=this.\u0275fac=function(i){return new(i||t)(me(SH,8))};static#t=this.\u0275cmp=ri({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){2&i&&rr("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:yH,decls:1,vars:0,template:function(i,r){1&i&&(Go(),Cn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return t})(),WA=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})(),EH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[So,Wf,So]})}return t})();const MH=["description"];let DH=(()=>{class t{constructor(e,i){this.sanitizer=e,this.renderer=i,this.link_action=new et,this.listeners_destroyers=[]}ngAfterViewChecked(){this.createLinks(this.description_components)}createLinks(e){if(null!=this.listeners_destroyers)for(const i of this.listeners_destroyers)i();for(const i of e)for(const r of i.nativeElement.getElementsByTagName("span"))r.classList.contains("description-link")&&this.listeners_destroyers.push(this.renderer.listen(r,"click",a=>{var u=Number(a.target.classList[1]);this.link_action.emit(u)}))}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rv),me(Wl))};static#t=this.\u0275cmp=ri({type:t,selectors:[["app-detail-content"]],viewQuery:function(i,r){if(1&i&&Xl(MH,5),2&i){let a;Gi(a=$i())&&(r.description_components=a)}},inputs:{powerplant_details:"powerplant_details"},outputs:{link_action:"link_action"},decls:38,vars:16,consts:[[1,"detail-card-content"],[1,"detail-text-wrapper"],[3,"innerHtml"],["description",""],[1,"images-wrapper"],["src","assets/img/ceske_budejovice1.jpg",2,"width","100%"]],template:function(i,r){1&i&&(Et(0,"div",0)(1,"div",1)(2,"h2"),Di(3),Vt(),Et(4,"p")(5,"b"),Di(6),Vt()(),Et(7,"p"),Di(8),Vt(),Et(9,"p"),Di(10),Vt(),Et(11,"p"),Di(12),Vt(),Et(13,"p"),Di(14),Vt(),vr(15,"div",2,3)(17,"div",2,3)(19,"div",2,3)(21,"div",2,3)(23,"div",2,3)(25,"div",2,3)(27,"div",2,3)(29,"div",2,3),Et(31,"div")(32,"h5"),Di(33,"Zdroje:"),Vt(),vr(34,"div",2)(35,"div",2),Vt()(),Et(36,"div",4),vr(37,"img",5),Vt()()),2&i&&(en(3),tv(r.powerplant_details.name),en(3),Nd("M\xedsto: ",r.powerplant_details.place,""),en(2),Nd("Roky v provozu: ",r.powerplant_details.years_in_service,""),en(2),Nd("V\xfdkon: ",r.powerplant_details.power,""),en(2),Nd("Druh: ",r.powerplant_details.type,""),en(2),Nd("Vlastn\xedk: ",r.powerplant_details.owner,""),en(1),cn("innerHtml",r.powerplant_details.description_short,tl),en(2),cn("innerHtml",r.powerplant_details.description1,tl),en(2),cn("innerHtml",r.powerplant_details.description2,tl),en(2),cn("innerHtml",r.powerplant_details.description3,tl),en(2),cn("innerHtml",r.powerplant_details.description4,tl),en(2),cn("innerHtml",r.powerplant_details.description5,tl),en(2),cn("innerHtml",r.powerplant_details.description6,tl),en(2),cn("innerHtml",r.powerplant_details.description7,tl),en(5),cn("innerHtml",r.powerplant_details.sources1,tl),en(1),cn("innerHtml",r.powerplant_details.sources2,tl))},styles:[".detail-card-content{width:100%;height:100%;position:relative;display:flex;flex-direction:row;flex-wrap:wrap;align-items:flex-start;justify-content:center}.detail-text-wrapper{flex-grow:2;max-width:40em;padding:1em;text-align:justify}.images-wrapper{flex-grow:1;top:0;width:50%;padding:1em;display:flex;flex-direction:column;justify-content:flex-start}.description-link{color:#fff;font-weight:700}.description-link:hover{cursor:pointer}\n"],encapsulation:2})}return t})();const IH=["detailcard"],AH=["infocardwrapper"];function PH(t,n){if(1&t){const e=zp();Et(0,"mat-list-item")(1,"div",26),Mi("click",function(){const a=Ga(e).$implicit,u=wo(),f=nl(3);return u.isMobile&&f.close(),zl(u.mapShowPowerPlant(a))}),Et(2,"a")(3,"button",27)(4,"span"),Di(5),Vt()()()()()}if(2&t){const e=n.$implicit;en(5),tv(e.name)}}function RH(t,n){1&t&&(Et(0,"div")(1,"mat-icon"),Di(2,"expand_less"),Vt(),Di(3," v\xedce "),Et(4,"mat-icon"),Di(5,"expand_less"),Vt()())}function OH(t,n){1&t&&(Et(0,"div")(1,"mat-icon"),Di(2,"expand_more"),Vt(),Di(3," m\xe9n\u011b "),Et(4,"mat-icon"),Di(5,"expand_more"),Vt()())}function FH(t,n){if(1&t){const e=zp();Et(0,"div",28),Mi("click",function(){return Ga(e),zl(wo().detailsToggleClicked())}),Ei(1,RH,6,0,"div",29),Ei(2,OH,6,0,"div",29),Vt()}if(2&t){const e=wo();en(1),cn("ngIf",!e.detail_card_expanded),en(1),cn("ngIf",e.detail_card_expanded)}}function NH(t,n){if(1&t){const e=zp();Et(0,"div",30)(1,"app-detail-content",31),Mi("link_action",function(r){return Ga(e),zl(wo().mapShowPowerPlantByID(r))}),Vt()()}if(2&t){const e=wo();en(1),cn("powerplant_details",e.powerplant_details)}}function zH(t,n){1&t&&(Et(0,"div",32),Di(1," Vyberte elektr\xe1rnu z mapy nebo ze seznamu "),Vt())}const LH=function(){return[6.4]},BH=function(){return[15.5,49.8]};let qA=(()=>{class t{constructor(e,i,r,a){this.changeDetector=e,this.deviceService=i,this.location=r,this.route=a,this.map=null,this.detail_card_expanded=!1,this.powerplants=[],this.powerplants_sorted=[],this.deviceInfo=null,this.isMobile=!1;for(const u of AV.R)this.powerplants.push(u.properties),this.powerplants[this.powerplants.length-1].coordinates=[u.geometry.coordinates[0],u.geometry.coordinates[1]];this.powerplants_sorted=[...this.powerplants].sort((u,f)=>u.name.localeCompare(f.name)),this.deviceInfo=this.deviceService.getDeviceInfo(),this.isMobile=this.deviceService.isMobile()}ngAfterViewInit(){null!=this.route.snapshot.paramMap.get("id")&&(this.info_card.nativeElement.classList.remove("info-card-enabled"),this.info_card.nativeElement.classList.add("info-card-disabled"))}mapLoaded(e){this.map=e,this.map.on("click","elektrarny",i=>{var a=i.features[0].geometry;this.powerplant_details=i.features[0].properties,this.powerplant_details.coordinates=[a.coordinates[0],a.coordinates[1]],this.location.go("elektrarna/"+this.powerplant_details.entry_id),this.mapShowPopup(this.powerplant_details)}),this.map.on("mouseenter","elektrarny",()=>{this.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave","elektrarny",()=>{this.map.getCanvas().style.cursor=""}),this.route.params.subscribe(i=>{this.mapShowPowerPlantByID(Number(i.id))})}mapShowPopup(e){null!=this.popup&&(this.popup.remove(),this.popup=null),null!=this.marker&&(this.marker.remove(),this.marker=null),this.marker=new Ov.Marker({draggable:!0}).setLngLat(e.coordinates).addTo(this.map),this.changeDetector.detectChanges()}mapShowPowerPlantByID(e){for(const i of this.powerplants)i.entry_id==e&&this.mapShowPowerPlant(i)}mapShowPowerPlant(e){this.powerplant_details=e,this.location.go("elektrarna/"+e.entry_id),this.mapShowPopup(e),this.mapFlyTo(e.coordinates)}mapFlyTo(e){this.map.flyTo({center:e,zoom:8,bearing:0,speed:2,curve:1,easing:i=>i,essential:!0})}detailsToggleClicked(){this.detail_card.nativeElement.classList.contains("detail-card-up")?(this.detail_card_expanded=!1,this.detail_card.nativeElement.classList.remove("detail-card-up"),this.detail_card.nativeElement.classList.add("detail-card-down")):(this.detail_card_expanded=!0,this.detail_card.nativeElement.classList.remove("detail-card-down"),this.detail_card.nativeElement.classList.add("detail-card-up")),this.changeDetector.detectChanges()}static#e=this.\u0275fac=function(i){return new(i||t)(me(Ld),me(LV),me(_v),me(sh))};static#t=this.\u0275cmp=ri({type:t,selectors:[["app-main-page"]],viewQuery:function(i,r){if(1&i&&(Xl(IH,5),Xl(AH,5)),2&i){let a;Gi(a=$i())&&(r.detail_card=a.first),Gi(a=$i())&&(r.info_card=a.first)}},decls:43,vars:11,consts:[[1,"main-page"],[1,"page-container"],[1,"sidenav-container",3,"mode"],["drawer",""],[1,"menu-container"],["mat-subheader","",1,"menu-headline"],[4,"ngFor","ngForOf"],[1,"content-container"],[1,"top-toolbar"],["mat-icon-button","","color","secondary","aria-label","List of powerplants",1,"drawer-button",3,"click"],["mat-icon-button","","color","secondary",1,"info-button",3,"click"],[1,"map-container"],[3,"zoom","center","mapLoad"],["mapa",""],[1,"detail-card-wrapper"],["detailcard",""],[1,"detail-card"],["class","detail-card-icons-wrapper",3,"click",4,"ngIf"],[1,"detail-card-content-wrapper"],["class","detail-card-content",4,"ngIf"],["class","no-selected-powerplant-info",4,"ngIf"],[1,"info-card-enabled"],["infocardwrapper",""],[1,"info-card"],[1,"info-card-icons-wrapper",3,"click"],[1,"info-card-content-wrapper"],["matListItemTitle","",3,"click"],["mat-button","",1,"menu-item"],[1,"detail-card-icons-wrapper",3,"click"],[4,"ngIf"],[1,"detail-card-content"],[3,"powerplant_details","link_action"],[1,"no-selected-powerplant-info"]],template:function(i,r){if(1&i){const a=zp();Et(0,"div",0)(1,"mat-drawer-container",1)(2,"mat-drawer",2,3)(4,"mat-list",4)(5,"div",5),Di(6,"Elektr\xe1rny"),Vt(),Ei(7,PH,6,1,"mat-list-item",6),Vt()(),Et(8,"div",7)(9,"mat-toolbar",8)(10,"div",8)(11,"button",9),Mi("click",function(){return Ga(a),zl(nl(3).toggle())}),Et(12,"mat-icon"),Di(13,"menu"),Vt()(),Et(14,"span"),Di(15,"Uheln\xe9 elektr\xe1rny v \u010cR"),Vt()(),Et(16,"div")(17,"button",10),Mi("click",function(){Ga(a);const f=nl(31);return f.classList.remove("info-card-disabled"),zl(f.classList.add("info-card-enabled"))}),Et(18,"mat-icon"),Di(19,"info"),Vt()()()(),Et(20,"div",11)(21,"mgl-map",12,13),Mi("mapLoad",function(f){return r.mapLoaded(f)}),Vt()(),Et(23,"div",14,15)(25,"mat-card",16),Ei(26,FH,3,2,"div",17),Et(27,"mat-card-content",18),Ei(28,NH,2,1,"div",19),Ei(29,zH,2,0,"div",20),Vt()()()()(),Et(30,"div",21,22)(32,"mat-card",23)(33,"div",24),Mi("click",function(){Ga(a);const f=nl(31);return f.classList.remove("info-card-enabled"),zl(f.classList.add("info-card-disabled"))}),Et(34,"mat-icon"),Di(35,"close"),Vt()(),Et(36,"mat-card-content",25)(37,"h2"),Di(38,"P\u0159ehled uheln\xfdch elektr\xe1ren v \u010cR"),Vt(),Di(39," Semestr\xe1ln\xed projekt HVT"),vr(40,"br")(41,"br"),Di(42," tady bude asi n\u011bjak\xfd popis a koment\xe1\u0159 k cel\xe9mu projektu "),Vt()()()()}2&i&&(en(2),cn("mode",r.isMobile?"over":"side"),en(5),cn("ngForOf",r.powerplants_sorted),en(14),il("assets/slepa_mapa_osm_prod.json"),cn("zoom",z0(9,LH))("center",z0(10,BH)),en(5),cn("ngIf",null!=r.powerplant_details),en(2),cn("ngIf",null!=r.powerplant_details),en(1),cn("ngIf",null==r.powerplant_details))},dependencies:[EE,Mv,e5,u6,p6,uI,hI,P8,L8,uH,hH,mH,n1,$A,WA,DH],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}.page-container[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}.content-container[_ngcontent-%COMP%]{height:100%;overflow:hidden;position:relative}.sidenav-container[_ngcontent-%COMP%]{padding:20px}.mat-icon[_ngcontent-%COMP%]{vertical-align:top}.menu-container[_ngcontent-%COMP%]{width:100%}.menu-item[_ngcontent-%COMP%]{padding:.5em 0 .5em 1.5em;width:100%;text-align:left;font-weight:700;display:flex;flex-direction:row;justify-content:left;align-items:center}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:active{color:inherit;text-decoration:none}.menu-headline[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;justify-content:left;align-items:center}.detail-card-wrapper[_ngcontent-%COMP%]{position:absolute;width:80%;left:10%;top:90vh;height:85vh;z-index:1000}.detail-card[_ngcontent-%COMP%]{width:100%;height:100%;overflow:scroll;position:relative}.detail-card-icons-wrapper[_ngcontent-%COMP%]{width:100%;height:5em;display:flex;flex-direction:column;align-items:center;position:absolute;left:0;top:0;z-index:2000;font-size:small}.detail-card-icons-wrapper[_ngcontent-%COMP%]:hover, .info-card-icons-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.detail-card-content-wrapper[_ngcontent-%COMP%]{position:absolute;width:100%;left:0;top:1.5em;padding:0}.detail-card-content[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:row;flex-wrap:wrap;align-items:flex-start;justify-content:center}@keyframes _ngcontent-%COMP%_moredetail{0%{top:90vh}to{top:10vh}}@keyframes _ngcontent-%COMP%_lessdetail{0%{top:10vh}to{top:90vh}}.detail-card-down[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_lessdetail;animation-duration:.3s;animation-iteration-count:1;animation-timing-function:ease-in-out;animation-fill-mode:forwards}.detail-card-up[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_moredetail;animation-duration:.3s;animation-iteration-count:1;animation-timing-function:ease-in-out;animation-fill-mode:forwards}.no-selected-powerplant-info[_ngcontent-%COMP%]{text-align:center}.detail-text-wrapper[_ngcontent-%COMP%]{flex-grow:2;max-width:40em;padding:1em;text-align:justify}.images-wrapper[_ngcontent-%COMP%]{flex-grow:1;top:0;width:50%;padding:1em;display:flex;flex-direction:column;justify-content:flex-start}.top-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.drawer-button[_ngcontent-%COMP%]{margin-right:.5em}.info-card-enabled[_ngcontent-%COMP%]{display:block;visibility:visible}.info-card-disabled[_ngcontent-%COMP%]{display:none;visibility:hidden}.info-card[_ngcontent-%COMP%]{width:70vw;height:75vh;position:fixed;left:15vw;top:10vh;z-index:3000}.info-card-icons-wrapper[_ngcontent-%COMP%]{position:absolute;right:1em;top:1em;color:#fff}.info-card-content-wrapper[_ngcontent-%COMP%]{color:#fff;padding-top:1em}"]})}return t})();const VH=[{path:"",component:qA},{path:"elektrarna/:id",component:qA}];let jH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[mD.forRoot(VH),mD]})}return t})(),HH=(()=>{class t{constructor(){this.title="hvt-uhelne-elektrarny"}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=ri({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&vr(0,"router-outlet")},dependencies:[ew]})}return t})();function ZA(t){return new xe(3e3,!1)}function Qd(t){switch(t.length){case 0:return new yg;case 1:return t[0];default:return new lI(t)}}function KA(t,n,e=new Map,i=new Map){const r=[],a=[];let u=-1,f=null;if(n.forEach(b=>{const k=b.get("offset"),D=k==u,N=D&&f||new Map;b.forEach((U,K)=>{let re=K,ue=U;if("offset"!==K)switch(re=t.normalizePropertyName(re,r),ue){case"!":ue=e.get(K);break;case Qc:ue=i.get(K);break;default:ue=t.normalizeStyleValue(K,re,ue,r)}N.set(re,ue)}),D||a.push(N),f=N,u=k}),r.length)throw function uU(t){return new xe(3502,!1)}();return a}function o1(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&s1(e,"start",t)));break;case"done":t.onDone(()=>i(e&&s1(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&s1(e,"destroy",t)))}}function s1(t,n,e){const a=a1(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),u=t._data;return null!=u&&(a._data=u),a}function a1(t,n,e,i,r="",a=0,u){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:a,disabled:!!u}}function Us(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function XA(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const kU=(()=>typeof document>"u"?null:document.documentElement)();function l1(t){const n=t.parentNode||t.host||null;return n===kU?null:n}let mh=null,QA=!1;function YA(t,n){for(;n;){if(n===t)return!0;n=l1(n)}return!1}function JA(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]}let e2=(()=>{class t{validateStyleProperty(e){return function CU(t){mh||(mh=function TU(){return typeof document<"u"?document.body:null}()||{},QA=!!mh.style&&"WebkitAppearance"in mh.style);let n=!0;return mh.style&&!function SU(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in mh.style,!n&&QA&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in mh.style)),n}(e)}matchesElement(e,i){return!1}containsElement(e,i){return YA(e,i)}getParentElement(e){return l1(e)}query(e,i,r){return JA(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,a,u,f=[],b){return new yg(r,a)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})(),c1=(()=>{class t{static#e=this.NOOP=new e2}return t})();const EU=1e3,d1="ng-enter",My="ng-leave",Dy="ng-trigger",Iy=".ng-trigger",n2="ng-animating",u1=".ng-animating";function Jc(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:h1(parseFloat(n[1]),n[2])}function h1(t,n){return"s"===n?t*EU:t}function Ay(t,n,e){return t.hasOwnProperty("duration")?t:function DU(t,n,e){let r,a=0,u="";if("string"==typeof t){const f=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return n.push(ZA()),{duration:0,delay:0,easing:""};r=h1(parseFloat(f[1]),f[2]);const b=f[3];null!=b&&(a=h1(parseFloat(b),f[4]));const k=f[5];k&&(u=k)}else r=t;if(!e){let f=!1,b=n.length;r<0&&(n.push(function UH(){return new xe(3100,!1)}()),f=!0),a<0&&(n.push(function GH(){return new xe(3101,!1)}()),f=!0),f&&n.splice(b,0,ZA())}return{duration:r,delay:a,easing:u}}(t,n,e)}function Mg(t,n={}){return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function r2(t){const n=new Map;return Object.keys(t).forEach(e=>{n.set(e,t[e])}),n}function Yd(t,n=new Map,e){if(e)for(let[i,r]of e)n.set(i,r);for(let[i,r]of t)n.set(i,r);return n}function tc(t,n,e){n.forEach((i,r)=>{const a=m1(r);e&&!e.has(r)&&e.set(r,t.style[a]),t.style[a]=i})}function fh(t,n){n.forEach((e,i)=>{const r=m1(i);t.style[r]=""})}function Dg(t){return Array.isArray(t)?1==t.length?t[0]:oI(t):t}const p1=new RegExp("{{\\s*(.+?)\\s*}}","g");function s2(t){let n=[];if("string"==typeof t){let e;for(;e=p1.exec(t);)n.push(e[1]);p1.lastIndex=0}return n}function Ig(t,n,e){const i=t.toString(),r=i.replace(p1,(a,u)=>{let f=n[u];return null==f&&(e.push(function WH(t){return new xe(3003,!1)}()),f=""),f.toString()});return r==i?t:r}function Py(t){const n=[];let e=t.next();for(;!e.done;)n.push(e.value),e=t.next();return n}const PU=/-+([a-z0-9])/g;function m1(t){return t.replace(PU,(...n)=>n[1].toUpperCase())}function Gs(t,n,e){switch(n.type){case 7:return t.visitTrigger(n,e);case 0:return t.visitState(n,e);case 1:return t.visitTransition(n,e);case 2:return t.visitSequence(n,e);case 3:return t.visitGroup(n,e);case 4:return t.visitAnimate(n,e);case 5:return t.visitKeyframes(n,e);case 6:return t.visitStyle(n,e);case 8:return t.visitReference(n,e);case 9:return t.visitAnimateChild(n,e);case 10:return t.visitAnimateRef(n,e);case 11:return t.visitQuery(n,e);case 12:return t.visitStagger(n,e);default:throw function qH(t){return new xe(3004,!1)}()}}function a2(t,n){return window.getComputedStyle(t)[n]}const Ry="*";function FU(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function NU(t,n,e){if(":"==t[0]){const b=function zU(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function aU(t){return new xe(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof b)return void n.push(b);t=b}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function sU(t){return new xe(3015,!1)}()),n;const r=i[1],a=i[2],u=i[3];n.push(l2(r,u));"<"==a[0]&&!(r==Ry&&u==Ry)&&n.push(l2(u,r))}(i,e,n)):e.push(t),e}const Oy=new Set(["true","1"]),Fy=new Set(["false","0"]);function l2(t,n){const e=Oy.has(t)||Fy.has(t),i=Oy.has(n)||Fy.has(n);return(r,a)=>{let u=t==Ry||t==r,f=n==Ry||n==a;return!u&&e&&"boolean"==typeof r&&(u=r?Oy.has(t):Fy.has(t)),!f&&i&&"boolean"==typeof a&&(f=a?Oy.has(n):Fy.has(n)),u&&f}}const LU=new RegExp("s*:selfs*,?","g");function f1(t,n,e,i){return new BU(t).build(n,e,i)}class BU{constructor(n){this._driver=n}build(n,e,i){const r=new HU(e);return this._resetContextStyleTimingState(r),Gs(this,Dg(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0;const a=[],u=[];return"@"==n.name.charAt(0)&&e.errors.push(function KH(){return new xe(3006,!1)}()),n.definitions.forEach(f=>{if(this._resetContextStyleTimingState(e),0==f.type){const b=f,k=b.name;k.toString().split(/\s*,\s*/).forEach(D=>{b.name=D,a.push(this.visitState(b,e))}),b.name=k}else if(1==f.type){const b=this.visitTransition(f,e);i+=b.queryCount,r+=b.depCount,u.push(b)}else e.errors.push(function XH(){return new xe(3007,!1)}())}),{type:7,name:n.name,states:a,transitions:u,queryCount:i,depCount:r,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){const a=new Set,u=r||{};i.styles.forEach(f=>{f instanceof Map&&f.forEach(b=>{s2(b).forEach(k=>{u.hasOwnProperty(k)||a.add(k)})})}),a.size&&(Py(a.values()),e.errors.push(function QH(t,n){return new xe(3008,!1)}()))}return{type:0,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=Gs(this,Dg(n.animation),e);return{type:1,matchers:FU(n.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:gh(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(i=>Gs(this,i,e)),options:gh(n.options)}}visitGroup(n,e){const i=e.currentTime;let r=0;const a=n.steps.map(u=>{e.currentTime=i;const f=Gs(this,u,e);return r=Math.max(r,e.currentTime),f});return e.currentTime=r,{type:3,steps:a,options:gh(n.options)}}visitAnimate(n,e){const i=function GU(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return g1(Ay(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=g1(0,0,"");return a.dynamic=!0,a.strValue=e,a}const r=Ay(e,n);return g1(r.duration,r.delay,r.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let r,a=n.styles?n.styles:hy({});if(5==a.type)r=this.visitKeyframes(a,e);else{let u=n.styles,f=!1;if(!u){f=!0;const k={};i.easing&&(k.easing=i.easing),u=hy(k)}e.currentTime+=i.duration+i.delay;const b=this.visitStyle(u,e);b.isEmptyStep=f,r=b}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let f of r)"string"==typeof f?f===Qc?i.push(f):e.errors.push(new xe(3002,!1)):i.push(r2(f));let a=!1,u=null;return i.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(u=f.get("easing"),f.delete("easing")),!a))for(let b of f.values())if(b.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:i,easing:u,offset:n.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let r=e.currentTime,a=e.currentTime;i&&a>0&&(a-=i.duration+i.delay),n.styles.forEach(u=>{"string"!=typeof u&&u.forEach((f,b)=>{const k=e.collectedStyles.get(e.currentQuerySelector),D=k.get(b);let N=!0;D&&(a!=r&&a>=D.startTime&&r<=D.endTime&&(e.errors.push(function JH(t,n,e,i,r){return new xe(3010,!1)}()),N=!1),a=D.startTime),N&&k.set(b,{startTime:a,endTime:r}),e.options&&function AU(t,n,e){const i=n.params||{},r=s2(t);r.length&&r.forEach(a=>{i.hasOwnProperty(a)||e.push(function $H(t){return new xe(3001,!1)}())})}(f,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function eU(){return new xe(3011,!1)}()),i;let a=0;const u=[];let f=!1,b=!1,k=0;const D=n.steps.map(De=>{const ye=this._makeStyleAst(De,e);let st=null!=ye.offset?ye.offset:function UU(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(ye.styles),at=0;return null!=st&&(a++,at=ye.offset=st),b=b||at<0||at>1,f=f||at<k,k=at,u.push(at),ye});b&&e.errors.push(function tU(){return new xe(3012,!1)}()),f&&e.errors.push(function nU(){return new xe(3200,!1)}());const N=n.steps.length;let U=0;a>0&&a<N?e.errors.push(function iU(){return new xe(3202,!1)}()):0==a&&(U=1/(N-1));const K=N-1,re=e.currentTime,ue=e.currentAnimateTimings,we=ue.duration;return D.forEach((De,ye)=>{const st=U>0?ye==K?1:U*ye:u[ye],at=st*we;e.currentTime=re+ue.delay+at,ue.duration=at,this._validateStyleAst(De,e),De.offset=st,i.styles.push(De)}),i}visitReference(n,e){return{type:8,animation:Gs(this,Dg(n.animation),e),options:gh(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:gh(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:gh(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;const[a,u]=function VU(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(LU,"")),t=t.replace(/@\*/g,Iy).replace(/@\w+/g,e=>Iy+"-"+e.slice(1)).replace(/:animating/g,u1),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+a:a,Us(e.collectedStyles,e.currentQuerySelector,new Map);const f=Gs(this,Dg(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:f,originalSelector:n.selector,options:gh(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function rU(){return new xe(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:Ay(n.timings,e.errors,!0);return{type:12,animation:Gs(this,Dg(n.animation),e),timings:i,options:null}}}class HU{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gh(t){return t?(t=Mg(t)).params&&(t.params=function jU(t){return t?Mg(t):null}(t.params)):t={},t}function g1(t,n,e){return{duration:t,delay:n,easing:e}}function _1(t,n,e,i,r,a,u=null,f=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:a,totalTime:r+a,easing:u,subTimeline:f}}class Ny{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const qU=new RegExp(":enter","g"),KU=new RegExp(":leave","g");function v1(t,n,e,i,r,a=new Map,u=new Map,f,b,k=[]){return(new XU).buildKeyframes(t,n,e,i,r,a,u,f,b,k)}class XU{buildKeyframes(n,e,i,r,a,u,f,b,k,D=[]){k=k||new Ny;const N=new y1(n,e,k,r,a,D,[]);N.options=b;const U=b.delay?Jc(b.delay):0;N.currentTimeline.delayNextStep(U),N.currentTimeline.setStyles([u],null,N.errors,b),Gs(this,i,N);const K=N.timelines.filter(re=>re.containsAnimation());if(K.length&&f.size){let re;for(let ue=K.length-1;ue>=0;ue--){const we=K[ue];if(we.element===e){re=we;break}}re&&!re.allowOnlyTimelineStyles()&&re.setStyles([f],null,N.errors,b)}return K.length?K.map(re=>re.buildKeyframes()):[_1(e,[],[],[],0,U,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(n.options),a=e.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);a!=u&&e.transformIntoNewTimeline(u)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const r of n){const a=r?.delay;if(a){const u="number"==typeof a?a:Jc(Ig(a,r?.params??{},e.errors));i.delayNextStep(u)}}}_visitSubInstructions(n,e,i){let a=e.currentTimeline.currentTime;const u=null!=i.duration?Jc(i.duration):null,f=null!=i.delay?Jc(i.delay):null;return 0!==u&&n.forEach(b=>{const k=e.appendInstructionToTimeline(b,u,f);a=Math.max(a,k.duration+k.delay)}),a}visitReference(n,e){e.updateOptions(n.options,!0),Gs(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let r=e;const a=n.options;if(a&&(a.params||a.delay)&&(r=e.createSubContext(a),r.transformIntoNewTimeline(),null!=a.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=zy);const u=Jc(a.delay);r.delayNextStep(u)}n.steps.length&&(n.steps.forEach(u=>Gs(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let r=e.currentTimeline.currentTime;const a=n.options&&n.options.delay?Jc(n.options.delay):0;n.steps.forEach(u=>{const f=e.createSubContext(n.options);a&&f.delayNextStep(a),Gs(this,u,f),r=Math.max(r,f.currentTimeline.currentTime),i.push(f.currentTimeline)}),i.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return Ay(e.params?Ig(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const a=n.style;5==a.type?this.visitKeyframes(a,e):(e.incrementTime(i.duration),this.visitStyle(a,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const a=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(a):i.setStyles(n.styles,a,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,a=i.duration,f=e.createSubContext().currentTimeline;f.easing=i.easing,n.styles.forEach(b=>{f.forwardTime((b.offset||0)*a),f.setStyles(b.styles,b.easing,e.errors,e.options),f.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(f),e.transformIntoNewTimeline(r+a),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,r=n.options||{},a=r.delay?Jc(r.delay):0;a&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=zy);let u=i;const f=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=f.length;let b=null;f.forEach((k,D)=>{e.currentQueryIndex=D;const N=e.createSubContext(n.options,k);a&&N.delayNextStep(a),k===e.element&&(b=N.currentTimeline),Gs(this,n.animation,N),N.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,N.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),b&&(e.currentTimeline.mergeTimelineCollectedStyles(b),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,r=e.currentTimeline,a=n.timings,u=Math.abs(a.duration),f=u*(e.currentQueryTotal-1);let b=u*e.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":b=f-b;break;case"full":b=i.currentStaggerTime}const D=e.currentTimeline;b&&D.delayNextStep(b);const N=D.currentTime;Gs(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-N+(r.startTime-i.currentTimeline.startTime)}}const zy={};class y1{constructor(n,e,i,r,a,u,f,b){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=a,this.errors=u,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=b||new Ly(this._driver,e,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let r=this.options;null!=i.duration&&(r.duration=Jc(i.duration)),null!=i.delay&&(r.delay=Jc(i.delay));const a=i.params;if(a){let u=r.params;u||(u=this.options.params={}),Object.keys(a).forEach(f=>{(!e||!u.hasOwnProperty(f))&&(u[f]=Ig(a[f],u,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){const r=e||this.element,a=new y1(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(n),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(n){return this.previousNode=zy,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},a=new QU(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,a,u){let f=[];if(r&&f.push(this.element),n.length>0){n=(n=n.replace(qU,"."+this._enterClassName)).replace(KU,"."+this._leaveClassName);let k=this._driver.query(this.element,n,1!=i);0!==i&&(k=i<0?k.slice(k.length+i,k.length):k.slice(0,i)),f.push(...k)}return!a&&0==f.length&&u.push(function oU(t){return new xe(3014,!1)}()),f}}class Ly{constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new Ly(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Qc),this._currentKeyframe.set(e,Qc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);const a=r&&r.params||{},u=function YU(t,n){const e=new Map;let i;return t.forEach(r=>{if("*"===r){i=i||n.keys();for(let a of i)e.set(a,Qc)}else Yd(r,e)}),e}(n,this._globalTimelineStyles);for(let[f,b]of u){const k=Ig(b,a,i);this._pendingStyles.set(f,k),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??Qc),this._updateStyle(f,k)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((f,b)=>{const k=Yd(f,new Map,this._backFill);k.forEach((D,N)=>{"!"===D?n.add(N):D===Qc&&e.add(N)}),i||k.set("offset",b/this.duration),r.push(k)});const a=n.size?Py(n.values()):[],u=e.size?Py(e.values()):[];if(i){const f=r[0],b=new Map(f);f.set("offset",0),b.set("offset",1),r=[f,b]}return _1(this.element,r,a,u,this.duration,this.startTime,this.easing,!1)}}class QU extends Ly{constructor(n,e,i,r,a,u,f=!1){super(n,e,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const a=[],u=i+e,f=e/u,b=Yd(n[0]);b.set("offset",0),a.push(b);const k=Yd(n[0]);k.set("offset",u2(f)),a.push(k);const D=n.length-1;for(let N=1;N<=D;N++){let U=Yd(n[N]);const K=U.get("offset");U.set("offset",u2((e+K*i)/u)),a.push(U)}i=u,e=0,r="",n=a}return _1(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function u2(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}class b1{}const JU=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class e7 extends b1{normalizePropertyName(n,e){return m1(n)}normalizeStyleValue(n,e,i,r){let a="";const u=i.toString().trim();if(JU.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)a="px";else{const f=i.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&r.push(function ZH(t,n){return new xe(3005,!1)}())}return u+a}}function h2(t,n,e,i,r,a,u,f,b,k,D,N,U){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:a,toState:i,toStyles:u,timelines:f,queriedElements:b,preStyleProps:k,postStyleProps:D,totalTime:N,errors:U}}const x1={};class p2{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return function t7(t,n,e,i,r){return t.some(a=>a(n,e,i,r))}(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return void 0!==n&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,a,u,f,b,k,D){const N=[],U=this.ast.options&&this.ast.options.params||x1,re=this.buildStyles(i,f&&f.params||x1,N),ue=b&&b.params||x1,we=this.buildStyles(r,ue,N),De=new Set,ye=new Map,st=new Map,at="void"===r,jt={params:n7(ue,U),delay:this.ast.options?.delay},ti=D?[]:v1(n,e,this.ast.animation,a,u,re,we,jt,k,N);let mi=0;if(ti.forEach($s=>{mi=Math.max($s.duration+$s.delay,mi)}),N.length)return h2(e,this._triggerName,i,r,at,re,we,[],[],ye,st,mi,N);ti.forEach($s=>{const pl=$s.element,Hy=Us(ye,pl,new Set);$s.preStyleProps.forEach(_h=>Hy.add(_h));const Pg=Us(st,pl,new Set);$s.postStyleProps.forEach(_h=>Pg.add(_h)),pl!==e&&De.add(pl)});const so=Py(De.values());return h2(e,this._triggerName,i,r,at,re,we,ti,so,ye,st,mi)}}function n7(t,n){const e=Mg(n);for(const i in t)t.hasOwnProperty(i)&&null!=t[i]&&(e[i]=t[i]);return e}class i7{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,r=Mg(this.defaultParams);return Object.keys(n).forEach(a=>{const u=n[a];null!==u&&(r[a]=u)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,f)=>{u&&(u=Ig(u,r,e));const b=this.normalizer.normalizePropertyName(f,e);u=this.normalizer.normalizeStyleValue(f,b,u,e),i.set(f,u)})}),i}}class o7{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new i7(r.style,r.options&&r.options.params||{},i))}),m2(this.states,"true","1"),m2(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new p2(n,r,this.states))}),this.fallbackTransition=function s7(t,n,e){return new p2(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,f)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(u=>u.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function m2(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const a7=new Ny;class l7{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],a=f1(this._driver,e,i,[]);if(i.length)throw function hU(t){return new xe(3503,!1)}();this._animations.set(n,a)}_buildPlayer(n,e,i){const r=n.element,a=KA(this._normalizer,n.keyframes,e,i);return this._driver.animate(r,a,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const r=[],a=this._animations.get(n);let u;const f=new Map;if(a?(u=v1(this._driver,e,a,d1,My,new Map,new Map,i,a7,r),u.forEach(D=>{const N=Us(f,D.element,new Map);D.postStyleProps.forEach(U=>N.set(U,null))})):(r.push(function pU(){return new xe(3300,!1)}()),u=[]),r.length)throw function mU(t){return new xe(3504,!1)}();f.forEach((D,N)=>{D.forEach((U,K)=>{D.set(K,this._driver.computeStyle(N,K,Qc))})});const k=Qd(u.map(D=>{const N=f.get(D.element);return this._buildPlayer(D,new Map,N)}));return this._playersById.set(n,k),k.onDestroy(()=>this.destroy(n)),this.players.push(k),k}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function fU(t){return new xe(3301,!1)}();return e}listen(n,e,i,r){const a=a1(e,"","","");return o1(this._getPlayer(n),i,a,r),()=>{}}command(n,e,i,r){if("register"==i)return void this.register(n,r[0]);if("create"==i)return void this.create(n,e,r[0]||{});const a=this._getPlayer(n);switch(i){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n)}}}const f2="ng-animate-queued",w1="ng-animate-disabled",p7=[],g2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},m7={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hl="__ng_removed";class k1{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function v7(t){return t??null}(i?n.value:n),i){const a=Mg(n);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Ag="void",S1=new k1(Ag);class f7{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,ya(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw function gU(t,n){return new xe(3302,!1)}();if(null==i||0==i.length)throw function _U(t){return new xe(3303,!1)}();if(!function y7(t){return"start"==t||"done"==t}(i))throw function vU(t,n){return new xe(3400,!1)}();const a=Us(this._elementListeners,n,[]),u={name:e,phase:i,callback:r};a.push(u);const f=Us(this._engine.statesByElement,n,new Map);return f.has(e)||(ya(n,Dy),ya(n,Dy+"-"+e),f.set(e,S1)),()=>{this._engine.afterFlush(()=>{const b=a.indexOf(u);b>=0&&a.splice(b,1),this._triggers.has(e)||f.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function yU(t){return new xe(3401,!1)}();return e}trigger(n,e,i,r=!0){const a=this._getTrigger(e),u=new C1(this.id,e,n);let f=this._engine.statesByElement.get(n);f||(ya(n,Dy),ya(n,Dy+"-"+e),this._engine.statesByElement.set(n,f=new Map));let b=f.get(e);const k=new k1(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&b&&k.absorbOptions(b.options),f.set(e,k),b||(b=S1),k.value!==Ag&&b.value===k.value){if(!function w7(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const a=e[r];if(!n.hasOwnProperty(a)||t[a]!==n[a])return!1}return!0}(b.params,k.params)){const ue=[],we=a.matchStyles(b.value,b.params,ue),De=a.matchStyles(k.value,k.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{fh(n,we),tc(n,De)})}return}const U=Us(this._engine.playersByElement,n,[]);U.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==e&&ue.queued&&ue.destroy()});let K=a.matchTransition(b.value,k.value,n,k.params),re=!1;if(!K){if(!r)return;K=a.fallbackTransition,re=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:K,fromState:b,toState:k,player:u,isFallbackTransition:re}),re||(ya(n,f2),u.onStart(()=>{cm(n,f2)})),u.onDone(()=>{let ue=this.players.indexOf(u);ue>=0&&this.players.splice(ue,1);const we=this._engine.playersByElement.get(n);if(we){let De=we.indexOf(u);De>=0&&we.splice(De,1)}}),this.players.push(u),U.push(u),u}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,Iy,!0);i.forEach(r=>{if(r[hl])return;const a=this._engine.fetchNamespacesByElement(r);a.size?a.forEach(u=>u.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){const a=this._engine.statesByElement.get(n),u=new Map;if(a){const f=[];if(a.forEach((b,k)=>{if(u.set(k,b.value),this._triggers.has(k)){const D=this.trigger(n,k,Ag,r);D&&f.push(D)}}),f.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,u),i&&Qd(f).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const r=new Set;e.forEach(a=>{const u=a.name;if(r.has(u))return;r.add(u);const b=this._triggers.get(u).fallbackTransition,k=i.get(u)||S1,D=new k1(Ag),N=new C1(this.id,u,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:u,transition:b,fromState:k,toState:D,player:N,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){const a=i.players.length?i.playersByQueriedElement.get(n):[];if(a&&a.length)r=!0;else{let u=n;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{const a=n[hl];(!a||a===g2)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){ya(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const a=i.element,u=this._elementListeners.get(a);u&&u.forEach(f=>{if(f.name==i.triggerName){const b=a1(a,i.triggerName,i.fromState.value,i.toState.value);b._data=n,o1(i.player,f.phase,b,f.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const a=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class g7{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,a)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new f7(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let u=!1,f=this.driver.getParentElement(e);for(;f;){const b=r.get(f);if(b){const k=i.indexOf(b);i.splice(k+1,0,n),u=!0;break}f=this.driver.getParentElement(f)}u||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let r of i.values())if(r.namespaceId){const a=this._fetchNamespace(r.namespaceId);a&&e.add(a)}return e}trigger(n,e,i,r){if(By(e)){const a=this._fetchNamespace(n);if(a)return a.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!By(e))return;const a=e[hl];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(n){const u=this._fetchNamespace(n);u&&u.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),ya(n,w1)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),cm(n,w1))}removeNode(n,e,i){if(By(e)){const r=n?this._fetchNamespace(n):null;r?r.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);const a=this.namespacesByHostElement.get(e);a&&a.id!==n&&a.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,r,a){this.collectedLeaveElements.push(e),e[hl]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:a}}listen(n,e,i,r,a){return By(e)?this._fetchNamespace(n).listen(e,i,r,a):()=>{}}_buildInstruction(n,e,i,r,a){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,a)}destroyInnerAnimations(n){let e=this.driver.query(n,Iy,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,u1,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Qd(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[hl];if(e&&e.setForRemoval){if(n[hl]=g2,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(w1)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ya(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Qd(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw function bU(t){return new xe(3402,!1)}()}_flushAnimations(n,e){const i=new Ny,r=[],a=new Map,u=[],f=new Map,b=new Map,k=new Map,D=new Set;this.disabledNodes.forEach(pt=>{D.add(pt);const wt=this.driver.query(pt,".ng-animate-queued",!0);for(let Pt=0;Pt<wt.length;Pt++)D.add(wt[Pt])});const N=this.bodyNode,U=Array.from(this.statesByElement.keys()),K=y2(U,this.collectedEnterElements),re=new Map;let ue=0;K.forEach((pt,wt)=>{const Pt=d1+ue++;re.set(wt,Pt),pt.forEach(Tn=>ya(Tn,Pt))});const we=[],De=new Set,ye=new Set;for(let pt=0;pt<this.collectedLeaveElements.length;pt++){const wt=this.collectedLeaveElements[pt],Pt=wt[hl];Pt&&Pt.setForRemoval&&(we.push(wt),De.add(wt),Pt.hasAnimation?this.driver.query(wt,".ng-star-inserted",!0).forEach(Tn=>De.add(Tn)):ye.add(wt))}const st=new Map,at=y2(U,Array.from(De));at.forEach((pt,wt)=>{const Pt=My+ue++;st.set(wt,Pt),pt.forEach(Tn=>ya(Tn,Pt))}),n.push(()=>{K.forEach((pt,wt)=>{const Pt=re.get(wt);pt.forEach(Tn=>cm(Tn,Pt))}),at.forEach((pt,wt)=>{const Pt=st.get(wt);pt.forEach(Tn=>cm(Tn,Pt))}),we.forEach(pt=>{this.processLeaveNode(pt)})});const jt=[],ti=[];for(let pt=this._namespaceList.length-1;pt>=0;pt--)this._namespaceList[pt].drainQueuedTransitions(e).forEach(Pt=>{const Tn=Pt.player,Kr=Pt.element;if(jt.push(Tn),this.collectedEnterElements.length){const To=Kr[hl];if(To&&To.setForMove){if(To.previousTriggersValues&&To.previousTriggersValues.has(Pt.triggerName)){const vh=To.previousTriggersValues.get(Pt.triggerName),ba=this.statesByElement.get(Pt.element);if(ba&&ba.has(Pt.triggerName)){const Uy=ba.get(Pt.triggerName);Uy.value=vh,ba.set(Pt.triggerName,Uy)}}return void Tn.destroy()}}const nc=!N||!this.driver.containsElement(N,Kr),Ws=st.get(Kr),Jd=re.get(Kr),Bi=this._buildInstruction(Pt,i,Jd,Ws,nc);if(Bi.errors&&Bi.errors.length)return void ti.push(Bi);if(nc)return Tn.onStart(()=>fh(Kr,Bi.fromStyles)),Tn.onDestroy(()=>tc(Kr,Bi.toStyles)),void r.push(Tn);if(Pt.isFallbackTransition)return Tn.onStart(()=>fh(Kr,Bi.fromStyles)),Tn.onDestroy(()=>tc(Kr,Bi.toStyles)),void r.push(Tn);const I2=[];Bi.timelines.forEach(To=>{To.stretchStartingKeyframe=!0,this.disabledNodes.has(To.element)||I2.push(To)}),Bi.timelines=I2,i.append(Kr,Bi.timelines),u.push({instruction:Bi,player:Tn,element:Kr}),Bi.queriedElements.forEach(To=>Us(f,To,[]).push(Tn)),Bi.preStyleProps.forEach((To,vh)=>{if(To.size){let ba=b.get(vh);ba||b.set(vh,ba=new Set),To.forEach((Uy,M1)=>ba.add(M1))}}),Bi.postStyleProps.forEach((To,vh)=>{let ba=k.get(vh);ba||k.set(vh,ba=new Set),To.forEach((Uy,M1)=>ba.add(M1))})});if(ti.length){const pt=[];ti.forEach(wt=>{pt.push(function xU(t,n){return new xe(3505,!1)}())}),jt.forEach(wt=>wt.destroy()),this.reportError(pt)}const mi=new Map,so=new Map;u.forEach(pt=>{const wt=pt.element;i.has(wt)&&(so.set(wt,wt),this._beforeAnimationBuild(pt.player.namespaceId,pt.instruction,mi))}),r.forEach(pt=>{const wt=pt.element;this._getPreviousPlayers(wt,!1,pt.namespaceId,pt.triggerName,null).forEach(Tn=>{Us(mi,wt,[]).push(Tn),Tn.destroy()})});const $s=we.filter(pt=>x2(pt,b,k)),pl=new Map;v2(pl,this.driver,ye,k,Qc).forEach(pt=>{x2(pt,b,k)&&$s.push(pt)});const Pg=new Map;K.forEach((pt,wt)=>{v2(Pg,this.driver,new Set(pt),b,"!")}),$s.forEach(pt=>{const wt=pl.get(pt),Pt=Pg.get(pt);pl.set(pt,new Map([...wt?.entries()??[],...Pt?.entries()??[]]))});const _h=[],M2=[],D2={};u.forEach(pt=>{const{element:wt,player:Pt,instruction:Tn}=pt;if(i.has(wt)){if(D.has(wt))return Pt.onDestroy(()=>tc(wt,Tn.toStyles)),Pt.disabled=!0,Pt.overrideTotalTime(Tn.totalTime),void r.push(Pt);let Kr=D2;if(so.size>1){let Ws=wt;const Jd=[];for(;Ws=Ws.parentNode;){const Bi=so.get(Ws);if(Bi){Kr=Bi;break}Jd.push(Ws)}Jd.forEach(Bi=>so.set(Bi,Kr))}const nc=this._buildAnimation(Pt.namespaceId,Tn,mi,a,Pg,pl);if(Pt.setRealPlayer(nc),Kr===D2)_h.push(Pt);else{const Ws=this.playersByElement.get(Kr);Ws&&Ws.length&&(Pt.parentPlayer=Qd(Ws)),r.push(Pt)}}else fh(wt,Tn.fromStyles),Pt.onDestroy(()=>tc(wt,Tn.toStyles)),M2.push(Pt),D.has(wt)&&r.push(Pt)}),M2.forEach(pt=>{const wt=a.get(pt.element);if(wt&&wt.length){const Pt=Qd(wt);pt.setRealPlayer(Pt)}}),r.forEach(pt=>{pt.parentPlayer?pt.syncPlayerEvents(pt.parentPlayer):pt.destroy()});for(let pt=0;pt<we.length;pt++){const wt=we[pt],Pt=wt[hl];if(cm(wt,My),Pt&&Pt.hasAnimation)continue;let Tn=[];if(f.size){let nc=f.get(wt);nc&&nc.length&&Tn.push(...nc);let Ws=this.driver.query(wt,u1,!0);for(let Jd=0;Jd<Ws.length;Jd++){let Bi=f.get(Ws[Jd]);Bi&&Bi.length&&Tn.push(...Bi)}}const Kr=Tn.filter(nc=>!nc.destroyed);Kr.length?b7(this,wt,Kr):this.processLeaveNode(wt)}return we.length=0,_h.forEach(pt=>{this.players.push(pt),pt.onDone(()=>{pt.destroy();const wt=this.players.indexOf(pt);this.players.splice(wt,1)}),pt.play()}),_h}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,a){let u=[];if(e){const f=this.playersByQueriedElement.get(n);f&&(u=f)}else{const f=this.playersByElement.get(n);if(f){const b=!a||a==Ag;f.forEach(k=>{k.queued||!b&&k.triggerName!=r||u.push(k)})}}return(i||r)&&(u=u.filter(f=>!(i&&i!=f.namespaceId||r&&r!=f.triggerName))),u}_beforeAnimationBuild(n,e,i){const a=e.element,u=e.isRemovalTransition?void 0:n,f=e.isRemovalTransition?void 0:e.triggerName;for(const b of e.timelines){const k=b.element,D=k!==a,N=Us(i,k,[]);this._getPreviousPlayers(k,D,u,f,e.toState).forEach(K=>{const re=K.getRealPlayer();re.beforeDestroy&&re.beforeDestroy(),K.destroy(),N.push(K)})}fh(a,e.fromStyles)}_buildAnimation(n,e,i,r,a,u){const f=e.triggerName,b=e.element,k=[],D=new Set,N=new Set,U=e.timelines.map(re=>{const ue=re.element;D.add(ue);const we=ue[hl];if(we&&we.removedBeforeQueried)return new yg(re.duration,re.delay);const De=ue!==b,ye=function x7(t){const n=[];return b2(t,n),n}((i.get(ue)||p7).map(mi=>mi.getRealPlayer())).filter(mi=>!!mi.element&&mi.element===ue),st=a.get(ue),at=u.get(ue),jt=KA(this._normalizer,re.keyframes,st,at),ti=this._buildPlayer(re,jt,ye);if(re.subTimeline&&r&&N.add(ue),De){const mi=new C1(n,f,ue);mi.setRealPlayer(ti),k.push(mi)}return ti});k.forEach(re=>{Us(this.playersByQueriedElement,re.element,[]).push(re),re.onDone(()=>function _7(t,n,e){let i=t.get(n);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,re.element,re))}),D.forEach(re=>ya(re,n2));const K=Qd(U);return K.onDestroy(()=>{D.forEach(re=>cm(re,n2)),tc(b,e.toStyles)}),N.forEach(re=>{Us(r,re,[]).push(K)}),K}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new yg(n.duration,n.delay)}}class C1{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new yg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>o1(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Us(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function By(t){return t&&1===t.nodeType}function _2(t,n){const e=t.style.display;return t.style.display=n??"none",e}function v2(t,n,e,i,r){const a=[];e.forEach(b=>a.push(_2(b)));const u=[];i.forEach((b,k)=>{const D=new Map;b.forEach(N=>{const U=n.computeStyle(k,N,r);D.set(N,U),(!U||0==U.length)&&(k[hl]=m7,u.push(k))}),t.set(k,D)});let f=0;return e.forEach(b=>_2(b,a[f++])),u}function y2(t,n){const e=new Map;if(t.forEach(f=>e.set(f,[])),0==n.length)return e;const r=new Set(n),a=new Map;function u(f){if(!f)return 1;let b=a.get(f);if(b)return b;const k=f.parentNode;return b=e.has(k)?k:r.has(k)?1:u(k),a.set(f,b),b}return n.forEach(f=>{const b=u(f);1!==b&&e.get(b).push(f)}),e}function ya(t,n){t.classList?.add(n)}function cm(t,n){t.classList?.remove(n)}function b7(t,n,e){Qd(e).onDone(()=>t.processLeaveNode(n))}function b2(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof lI?b2(i.players,n):n.push(i)}}function x2(t,n,e){const i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(a=>r.add(a)):n.set(t,i),e.delete(t),!0}class Vy{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,a)=>{},this._transitionEngine=new g7(n,e,i),this._timelineEngine=new l7(n,e,i),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(n,e,i,r,a){const u=n+"-"+r;let f=this._triggerCache[u];if(!f){const b=[],D=f1(this._driver,a,b,[]);if(b.length)throw function dU(t,n){return new xe(3404,!1)}();f=function r7(t,n,e){return new o7(t,n,e)}(r,D,this._normalizer),this._triggerCache[u]=f}this._transitionEngine.registerTrigger(e,r,f)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if("@"==i.charAt(0)){const[a,u]=XA(i);this._timelineEngine.command(a,e,u,r)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,a){if("@"==i.charAt(0)){const[u,f]=XA(i);return this._timelineEngine.listen(u,e,f,a)}return this._transitionEngine.listen(n,e,i,r,a)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let S7=(()=>{class t{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let a=t.initialStylesByElement.get(e);a||t.initialStylesByElement.set(e,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&tc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tc(this._element,this._initialStyles),this._endStyles&&(tc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(fh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fh(this._element,this._endStyles),this._endStyles=null),tc(this._element,this._initialStyles),this._state=3)}}return t})();function T1(t){let n=null;return t.forEach((e,i)=>{(function C7(t){return"display"===t||"position"===t})(i)&&(n=n||new Map,n.set(i,e))}),n}class w2{constructor(n,e,i,r){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&n.set(r,this._finished?i:a2(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class T7{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return YA(n,e)}getParentElement(n){return l1(n)}query(n,e,i){return JA(n,e,i)}computeStyle(n,e,i){return window.getComputedStyle(n)[e]}animate(n,e,i,r,a,u=[]){const b={duration:i,delay:r,fill:0==r?"both":"forwards"};a&&(b.easing=a);const k=new Map,D=u.filter(K=>K instanceof w2);(function RU(t,n){return 0===t||0===n})(i,r)&&D.forEach(K=>{K.currentSnapshot.forEach((re,ue)=>k.set(ue,re))});let N=function IU(t){return t.length?t[0]instanceof Map?t:t.map(n=>r2(n)):[]}(e).map(K=>Yd(K));N=function OU(t,n,e){if(e.size&&n.length){let i=n[0],r=[];if(e.forEach((a,u)=>{i.has(u)||r.push(u),i.set(u,a)}),r.length)for(let a=1;a<n.length;a++){let u=n[a];r.forEach(f=>u.set(f,a2(t,f)))}}return n}(n,N,k);const U=function k7(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=T1(n[0]),n.length>1&&(i=T1(n[n.length-1]))):n instanceof Map&&(e=T1(n)),e||i?new S7(t,e,i):null}(n,N);return new w2(n,N,b,U)}}let E7=(()=>{class t extends iI{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:eo.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?oI(e):e;return k2(this._renderer,null,i,"register",[r]),new M7(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(wf),Oe(Hn))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();class M7 extends z6{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new D7(this._id,n,e||{},this._renderer)}}class D7{constructor(n,e,i,r){this.id=n,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return k2(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function k2(t,n,e,i,r){return t.setProperty(n,`@@${e}:${i}`,r)}const S2="@.disabled";let I7=(()=>{class t{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(a,u)=>{const f=u?.parentNode(a);f&&u.removeChild(f,a)}}createRenderer(e,i){const a=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let D=this._rendererCache.get(a);return D||(D=new C2("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,D)),D}const u=i.id,f=i.id+"-"+this._currentId;this._currentId++,this.engine.register(f,e);const b=D=>{Array.isArray(D)?D.forEach(b):this.engine.registerTrigger(u,f,e,D.name,D)};return i.data.animation.forEach(b),new A7(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,f]=a;u(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(wf),Oe(Vy),Oe(At))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();class C2{constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==S2?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class A7 extends C2{constructor(n,e,i,r,a){super(e,i,r,a),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==S2?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const r=function P7(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let a=e.slice(1),u="";return"@"!=a.charAt(0)&&([a,u]=function R7(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(a)),this.engine.listen(this.namespaceId,r,a,u,f=>{this.factory.scheduleListenerCallback(f._data||-1,i,f)})}return this.delegate.listen(n,e,i)}}const T2=[{provide:iI,useClass:E7},{provide:b1,useFactory:function F7(){return new e7}},{provide:Vy,useClass:(()=>{class t extends Vy{constructor(e,i,r,a){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Hn),Oe(c1),Oe(b1),Oe(th))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})()},{provide:wf,useFactory:function N7(t,n,e){return new I7(t,n,e)},deps:[Ox,Vy,At]}],E1=[{provide:c1,useFactory:()=>new T7},{provide:$l,useValue:"BrowserAnimations"},...T2],E2=[{provide:c1,useClass:e2},{provide:$l,useValue:"NoopAnimations"},...T2];let z7=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?E2:E1}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({providers:E1,imports:[QE]})}return t})(),L7=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t,bootstrap:[HH]});static#n=this.\u0275inj=Dn({imports:[QE,jH,t5,z7,m6,q6,R8,B8,vH,EH]})}return t})();VB().bootstrapModule(L7).catch(t=>console.error(t))},624:function(dm){dm.exports=function(){"use strict";var ed,td,nn;function eu(_,En){if(ed)if(td){var be="var sharedChunk = {}; ("+ed+")(sharedChunk); ("+td+")(sharedChunk);",Eo={};ed(Eo),nn=En(Eo),typeof window<"u"&&(nn.workerUrl=window.URL.createObjectURL(new Blob([be],{type:"text/javascript"})))}else td=En;else ed=En}return eu(0,function(_){function En(l,o,c,h){return new(c||(c=Promise))(function(m,y){function w(I){try{E(h.next(I))}catch(P){y(P)}}function S(I){try{E(h.throw(I))}catch(P){y(P)}}function E(I){var P;I.done?m(I.value):(P=I.value,P instanceof c?P:new c(function(F){F(P)})).then(w,S)}E((h=h.apply(l,o||[])).next())})}function be(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}"function"==typeof SuppressedError&&SuppressedError;var Eo=wr;function wr(l,o){this.x=l,this.y=o}wr.prototype={clone:function(){return new wr(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,o){return this.clone()._rotateAround(l,o)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var o=l.x-this.x,c=l.y-this.y;return o*o+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,o){return Math.atan2(this.x*o-this.y*l,this.x*l+this.y*o)},_matMult:function(l){var o=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=o,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var o=Math.cos(l),c=Math.sin(l),h=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=h,this},_rotateAround:function(l,o){var c=Math.cos(l),h=Math.sin(l),m=o.y+h*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-h*(this.y-o.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},wr.convert=function(l){return l instanceof wr?l:Array.isArray(l)?new wr(l[0],l[1]):l};var ct=be(Eo),_s=ml;function ml(l,o,c,h){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(h-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=o,this.p2x=c,this.p2y=h}ml.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,o){if(void 0===o&&(o=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,h=0;h<8;h++){var m=this.sampleCurveX(c)-l;if(Math.abs(m)<o)return c;var y=this.sampleCurveDerivativeX(c);if(Math.abs(y)<1e-6)break;c-=m/y}var w=0,S=1;for(c=l,h=0;h<20&&(m=this.sampleCurveX(c),!(Math.abs(m-l)<o));h++)l>m?w=c:S=c,c=.5*(S-w)+w;return c},solve:function(l,o){return this.sampleCurveY(this.solveCurveX(l,o))}};var qs=be(_s);let kr,bi;function nd(){return null==kr&&(kr=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),kr}function Xo(){if(null==bi&&(bi=!1,nd())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let h=0;h<25;h++){const m=4*h;o.fillStyle=`rgb(${m},${m+1},${m+2})`,o.fillRect(h%5,Math.floor(h/5),1,1)}const c=o.getImageData(0,0,5,5).data;for(let h=0;h<100;h++)if(h%4!=3&&c[h]!==h){bi=!0;break}}}return bi||!1}function Mo(l,o,c,h){const m=new qs(l,o,c,h);return function(y){return m.solve(y)}}const vs=Mo(.25,.1,.25,1);function Qo(l,o,c){return Math.min(c,Math.max(o,l))}function xa(l,o,c){const h=c-o,m=((l-o)%h+h)%h+o;return m===o?c:m}function qi(l,...o){for(const c of o)for(const h in c)l[h]=c[h];return l}let fl=1;function Zn(l,o,c){const h={};for(const m in l)h[m]=o.call(c||this,l[m],m,l);return h}function Yo(l,o,c){const h={};for(const m in l)o.call(c||this,l[m],m,l)&&(h[m]=l[m]);return h}function Lr(l){return Array.isArray(l)?l.map(Lr):"object"==typeof l&&l?Zn(l,Lr):l}const Zs={};function Zi(l){Zs[l]||(typeof console<"u"&&console.warn(l),Zs[l]=!0)}function Xr(l,o,c){return(c.y-l.y)*(o.x-l.x)>(o.y-l.y)*(c.x-l.x)}function Do(l){let o=0;for(let c,h,m=0,y=l.length,w=y-1;m<y;w=m++)c=l[m],h=l[w],o+=(h.x-c.x)*(c.y+h.y);return o}function Ii(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let wa=null;function gl(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const bn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function _l(l,o,c,h,m){return En(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(l,{timestamp:0});try{const w=y?.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const S=w.startsWith("BGR"),E=new Uint8ClampedArray(h*m*4);if(yield y.copyTo(E,function(I,P,F,L,j){const H=4*Math.max(-P,0),W=(Math.max(0,F)-F)*L*4+H,J=4*L,ne=Math.max(0,P),le=Math.max(0,F);return{rect:{x:ne,y:le,width:Math.min(I.width,P+L)-ne,height:Math.min(I.height,F+j)-le},layout:[{offset:W,stride:J}]}}(l,o,c,h,m)),S)for(let I=0;I<E.length;I+=4){const P=E[I];E[I]=E[I+2],E[I+2]=P}return E}finally{y.close()}})}let Jo,Nn,Br,Zt;const ka={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(l){const o=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(l,o=0){return this.getImageCanvasContext(l).getImageData(-o,-o,l.width+2*o,l.height+2*o)},getImageCanvasContext(l){const o=window.document.createElement("canvas"),c=o.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return o.width=l.width,o.height=l.height,c.drawImage(l,0,0,l.width,l.height),c},resolveURL:l=>(Br||(Br=document.createElement("a")),Br.href=l,Br.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Zt&&(Zt=matchMedia("(prefers-reduced-motion: reduce)")),Zt.matches)}},Sa={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Mn extends Error{constructor(o,c,h,m){super(`AJAXError: ${c} (${o}): ${h}`),this.status=o,this.statusText=c,this.url=h,this.body=m}}const sn=Ii()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,ao=l=>Sa.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))];function Dt(l,o){const c=new AbortController,h=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:sn(),signal:c.signal});let m=!1,y=!1;return"json"===l.type&&h.headers.set("Accept","application/json"),y||fetch(h).then(w=>{return w.ok?(S=w,void("arrayBuffer"===l.type||"image"===l.type?S.arrayBuffer():"json"===l.type?S.json():S.text()).then(E=>{y||(m=!0,o(null,E,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(E=>{y||o(new Error(E.message))})):w.blob().then(S=>o(new Mn(w.status,w.statusText,l.url,S)));var S}).catch(w=>{20!==w.code&&o(new Error(w.message))}),{cancel:()=>{y=!0,m||c.abort()}}}const es=function(l,o){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){if(Ii()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,o);if(!Ii())return(ao(l.url)||Dt)(l,o)}if(!(/^file:/.test(c=l.url)||/^file:/.test(sn())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Dt(l,o);if(Ii()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,o,void 0,!0)}var c;return function(h,m){const y=new XMLHttpRequest;y.open(h.method||"GET",h.url,!0),"arrayBuffer"!==h.type&&"image"!==h.type||(y.responseType="arraybuffer");for(const w in h.headers)y.setRequestHeader(w,h.headers[w]);return"json"===h.type&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials="include"===h.credentials,y.onerror=()=>{m(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||0===y.status)&&null!==y.response){let w=y.response;if("json"===h.type)try{w=JSON.parse(y.response)}catch(S){return m(S)}m(null,w,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else{const w=new Blob([y.response],{type:y.getResponseHeader("Content-Type")});m(new Mn(y.status,y.statusText,h.url,w))}},y.send(h.body),{cancel:()=>y.abort()}}(l,o)},ic=function(l,o){return es(qi(l,{type:"arrayBuffer"}),o)};function Io(l){if(!l||l.indexOf("://")<=0||0===l.indexOf("data:image/")||0===l.indexOf("blob:"))return!0;const o=new URL(l),c=window.location;return o.protocol===c.protocol&&o.host===c.host}function vl(l,o,c){c[l]&&-1!==c[l].indexOf(o)||(c[l]=c[l]||[],c[l].push(o))}function Ca(l,o,c){if(c&&c[l]){const h=c[l].indexOf(o);-1!==h&&c[l].splice(h,1)}}class Ks{constructor(o,c={}){qi(this,c),this.type=o}}class Ta extends Ks{constructor(o,c={}){super("error",qi({error:o},c))}}class yl{on(o,c){return this._listeners=this._listeners||{},vl(o,c,this._listeners),this}off(o,c){return Ca(o,c,this._listeners),Ca(o,c,this._oneTimeListeners),this}once(o,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},vl(o,c,this._oneTimeListeners),this):new Promise(h=>this.once(o,h))}fire(o,c){"string"==typeof o&&(o=new Ks(o,c||{}));const h=o.type;if(this.listens(h)){o.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,o);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of y)Ca(h,S,this._oneTimeListeners),S.call(this,o);const w=this._eventedParent;w&&(qi(o,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof Ta&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,c){return this._eventedParent=o,this._eventedParentData=c,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Qr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function lo(l,o){const c={};for(const h in l)"ref"!==h&&(c[h]=l[h]);return Qr.forEach(h=>{h in o&&(c[h]=o[h])}),c}function xn(l,o){if(Array.isArray(l)){if(!Array.isArray(o)||l.length!==o.length)return!1;for(let c=0;c<l.length;c++)if(!xn(l[c],o[c]))return!1;return!0}if("object"==typeof l&&null!==l&&null!==o){if("object"!=typeof o||Object.keys(l).length!==Object.keys(o).length)return!1;for(const c in l)if(!xn(l[c],o[c]))return!1;return!0}return l===o}const rn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function co(l,o,c){c.push({command:rn.addSource,args:[l,o[l]]})}function bl(l,o,c){o.push({command:rn.removeSource,args:[l]}),c[l]=!0}function Ao(l,o,c,h){bl(l,c,h),co(l,o,c)}function rc(l,o,c){let h;for(h in l[c])if(Object.prototype.hasOwnProperty.call(l[c],h)&&"data"!==h&&!xn(l[c][h],o[c][h]))return!1;for(h in o[c])if(Object.prototype.hasOwnProperty.call(o[c],h)&&"data"!==h&&!xn(l[c][h],o[c][h]))return!1;return!0}function xl(l,o,c,h,m,y){let w;for(w in o=o||{},l=l||{})Object.prototype.hasOwnProperty.call(l,w)&&(xn(l[w],o[w])||c.push({command:y,args:[h,w,o[w],m]}));for(w in o)Object.prototype.hasOwnProperty.call(o,w)&&!Object.prototype.hasOwnProperty.call(l,w)&&(xn(l[w],o[w])||c.push({command:y,args:[h,w,o[w],m]}))}function Xs(l){return l.id}function Ea(l,o){return l[o.id]=o,l}class Fe{constructor(o,c,h,m){this.message=(o?`${o}: `:"")+h,m&&(this.identifier=m),null!=c&&c.__line__&&(this.line=c.__line__)}}function Po(l,...o){for(const c of o)for(const h in c)l[h]=c[h];return l}class ni extends Error{constructor(o,c){super(c),this.message=c,this.key=o}}class Qs{constructor(o,c=[]){this.parent=o,this.bindings={};for(const[h,m]of c)this.bindings[h]=m}concat(o){return new Qs(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const ys={kind:"null"},Ue={kind:"number"},Rt={kind:"string"},bt={kind:"boolean"},Sr={kind:"color"},ts={kind:"object"},Mt={kind:"value"},bs={kind:"collator"},X={kind:"formatted"},z={kind:"padding"},B={kind:"resolvedImage"},G={kind:"variableAnchorOffsetCollection"};function Y(l,o){return{kind:"array",itemType:l,N:o}}function ee(l){if("array"===l.kind){const o=ee(l.itemType);return"number"==typeof l.N?`array<${o}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${o}>`}return l.kind}const he=[ys,Ue,Rt,bt,Sr,X,ts,Y(Mt),z,B,G];function se(l,o){if("error"===o.kind)return null;if("array"===l.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!se(l.itemType,o.itemType))&&("number"!=typeof l.N||l.N===o.N))return null}else{if(l.kind===o.kind)return null;if("value"===l.kind)for(const c of he)if(!se(c,o))return null}return`Expected ${ee(l)} but found ${ee(o)} instead.`}function ie(l,o){return o.some(c=>c.kind===l.kind)}function ce(l,o){return o.some(c=>"null"===c?null===l:"array"===c?Array.isArray(l):"object"===c?l&&!Array.isArray(l)&&"object"==typeof l:c===typeof l)}function Se(l,o){return"array"===l.kind&&"array"===o.kind?l.itemType.kind===o.itemType.kind&&"number"==typeof l.N:l.kind===o.kind}const Xe=4/29,gt=6/29,it=3*gt*gt,dt=gt*gt*gt,xt=Math.PI/180,an=180/Math.PI;function wn(l){return(l%=360)<0&&(l+=360),l}function Yt([l,o,c,h]){let m,y;const w=sr((.2225045*(l=It(l))+.7168786*(o=It(o))+.0606169*(c=It(c)))/1);l===o&&o===c?m=y=w:(m=sr((.4360747*l+.3850649*o+.1430804*c)/.96422),y=sr((.0139322*l+.0971045*o+.7141733*c)/.82521));const S=116*w-16;return[S<0?0:S,500*(m-w),200*(w-y),h]}function It(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function sr(l){return l>dt?Math.pow(l,1/3):l/it+Xe}function Ot([l,o,c,h]){let m=(l+16)/116,y=isNaN(o)?m:m+o/500,w=isNaN(c)?m:m-c/200;return m=1*zn(m),y=.96422*zn(y),w=.82521*zn(w),[Un(3.1338561*y-1.6168667*m-.4906146*w),Un(-.9787684*y+1.9161415*m+.033454*w),Un(.0719453*y-.2289914*m+1.4052427*w),h]}function Un(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function zn(l){return l>gt?l*l*l:it*(l-Xe)}function Ro(l){return parseInt(l.padEnd(2,l),16)/255}function yh(l,o){return Ma(o?l/100:l,0,1)}function Ma(l,o,c){return Math.min(Math.max(o,l),c)}function Ys(l){return!l.some(Number.isNaN)}const bh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class on{constructor(o,c,h,m=1,y=!0){this.r=o,this.g=c,this.b=h,this.a=m,y||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[o,c,h,m]))}static parse(o){if(o instanceof on)return o;if("string"!=typeof o)return;const c=function(h){if("transparent"===(h=h.toLowerCase().trim()))return[0,0,0,0];const m=bh[h];if(m){const[w,S,E]=m;return[w/255,S/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const w=h.length<6?1:2;let S=1;return[Ro(h.slice(S,S+=w)),Ro(h.slice(S,S+=w)),Ro(h.slice(S,S+=w)),Ro(h.slice(S,S+w)||"ff")]}if(h.startsWith("rgb")){const w=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[S,E,I,P,F,L,j,H,W,J,ne,le]=w,oe=[P||" ",j||" ",J].join("");if("  "===oe||"  /"===oe||",,"===oe||",,,"===oe){const pe=[I,L,W].join(""),ge="%%%"===pe?100:""===pe?255:0;if(ge){const Ee=[Ma(+E/ge,0,1),Ma(+F/ge,0,1),Ma(+H/ge,0,1),ne?yh(+ne,le):1];if(Ys(Ee))return Ee}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[w,S,E,I,P,F,L,j,H]=y,W=[E||" ",P||" ",L].join("");if("  "===W||"  /"===W||",,"===W||",,,"===W){const J=[+S,Ma(+I,0,100),Ma(+F,0,100),j?yh(+j,H):1];if(Ys(J))return function([ne,le,oe,pe]){function ge(Ee){const We=(Ee+ne/30)%12,nt=le*Math.min(oe,1-oe);return oe-nt*Math.max(-1,Math.min(We-3,9-We,1))}return ne=wn(ne),le/=100,oe/=100,[ge(0),ge(8),ge(4),pe]}(J)}}}(o);return c?new on(...c,!1):void 0}get rgb(){const{r:o,g:c,b:h,a:m}=this,y=m||1/0;return this.overwriteGetter("rgb",[o/y,c/y,h/y,m])}get hcl(){return this.overwriteGetter("hcl",function(o){const[c,h,m,y]=Yt(o),w=Math.sqrt(h*h+m*m);return[Math.round(1e4*w)?wn(Math.atan2(m,h)*an):NaN,w,c,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Yt(this.rgb))}overwriteGetter(o,c){return Object.defineProperty(this,o,{value:c}),c}toString(){const[o,c,h,m]=this.rgb;return`rgba(${[o,c,h].map(y=>Math.round(255*y)).join(",")},${m})`}}on.black=new on(0,0,0,1),on.white=new on(1,1,1,1),on.transparent=new on(0,0,0,0),on.red=new on(1,0,0,1);class tu{constructor(o,c,h){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,c){return this.collator.compare(o,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class oc{constructor(o,c,h,m,y){this.text=o,this.image=c,this.scale=h,this.fontStack=m,this.textColor=y}}class Ki{constructor(o){this.sections=o}static fromString(o){return new Ki([new oc(o,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(o=>0!==o.text.length||o.image&&0!==o.image.name.length)}static factory(o){return o instanceof Ki?o:Ki.fromString(o)}toString(){return 0===this.sections.length?"":this.sections.map(o=>o.text).join("")}}class Yr{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Yr)return o;if("number"==typeof o)return new Yr([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const c of o)if("number"!=typeof c)return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new Yr(o)}}toString(){return JSON.stringify(this.values)}}const hm=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class uo{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof uo)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let c=0;c<o.length;c+=2){const h=o[c],m=o[c+1];if("string"!=typeof h||!hm.has(h)||!Array.isArray(m)||2!==m.length||"number"!=typeof m[0]||"number"!=typeof m[1])return}return new uo(o)}}toString(){return JSON.stringify(this.values)}}class Xi{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Xi({name:o,available:!1}):null}}function sc(l,o,c,h){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof c&&c>=0&&c<=255?void 0===h||"number"==typeof h&&h>=0&&h<=1?null:`Invalid rgba value [${[l,o,c,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof h?[l,o,c,h]:[l,o,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wl(l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l||l instanceof on||l instanceof tu||l instanceof Ki||l instanceof Yr||l instanceof uo||l instanceof Xi)return!0;if(Array.isArray(l)){for(const o of l)if(!wl(o))return!1;return!0}if("object"==typeof l){for(const o in l)if(!wl(l[o]))return!1;return!0}return!1}function Kn(l){if(null===l)return ys;if("string"==typeof l)return Rt;if("boolean"==typeof l)return bt;if("number"==typeof l)return Ue;if(l instanceof on)return Sr;if(l instanceof tu)return bs;if(l instanceof Ki)return X;if(l instanceof Yr)return z;if(l instanceof uo)return G;if(l instanceof Xi)return B;if(Array.isArray(l)){const o=l.length;let c;for(const h of l){const m=Kn(h);if(c){if(c===m)continue;c=Mt;break}c=m}return Y(c||Mt,o)}return ts}function vt(l){const o=typeof l;return null===l?"":"string"===o||"number"===o||"boolean"===o?String(l):l instanceof on||l instanceof Ki||l instanceof Yr||l instanceof uo||l instanceof Xi?l.toString():JSON.stringify(l)}class xs{constructor(o,c){this.type=o,this.value=c}static parse(o,c){if(2!==o.length)return c.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!wl(o[1]))return c.error("invalid value");const h=o[1];let m=Kn(h);const y=c.expectedType;return"array"!==m.kind||0!==m.N||!y||"array"!==y.kind||"number"==typeof y.N&&0!==y.N||(m=y),new xs(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class tn{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const mt={string:Rt,number:Ue,boolean:bt,object:ts};class Vr{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let h,m=1;const y=o[0];if("array"===y){let S,E;if(o.length>2){const I=o[1];if("string"!=typeof I||!(I in mt)||"object"===I)return c.error('The item type argument of "array" must be one of string, number, boolean',1);S=mt[I],m++}else S=Mt;if(o.length>3){if(null!==o[2]&&("number"!=typeof o[2]||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);E=o[2],m++}h=Y(S,E)}else{if(!mt[y])throw new Error(`Types doesn't contain name = ${y}`);h=mt[y]}const w=[];for(;m<o.length;m++){const S=c.parse(o[m],m,Mt);if(!S)return null;w.push(S)}return new Vr(h,w)}evaluate(o){for(let c=0;c<this.args.length;c++){const h=this.args[c].evaluate(o);if(!se(this.type,Kn(h)))return h;if(c===this.args.length-1)throw new tn(`Expected value to be of type ${ee(this.type)}, but found ${ee(Kn(h))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const ac={"to-boolean":bt,"to-color":Sr,"to-number":Ue,"to-string":Rt};class Qi{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const h=o[0];if(!ac[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if(("to-boolean"===h||"to-string"===h)&&2!==o.length)return c.error("Expected one argument.");const m=ac[h],y=[];for(let w=1;w<o.length;w++){const S=c.parse(o[w],w,Mt);if(!S)return null;y.push(S)}return new Qi(m,y)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let c,h;for(const m of this.args){if(c=m.evaluate(o),h=null,c instanceof on)return c;if("string"==typeof c){const y=o.parseColor(c);if(y)return y}else if(Array.isArray(c)&&(h=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:sc(c[0],c[1],c[2],c[3]),!h))return new on(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new tn(h||`Could not parse color from value '${"string"==typeof c?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const h of this.args){c=h.evaluate(o);const m=Yr.parse(c);if(m)return m}throw new tn(`Could not parse padding from value '${"string"==typeof c?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const h of this.args){c=h.evaluate(o);const m=uo.parse(c);if(m)return m}throw new tn(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof c?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const h of this.args){if(c=h.evaluate(o),null===c)return 0;const m=Number(c);if(!isNaN(m))return m}throw new tn(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Ki.fromString(vt(this.args[0].evaluate(o)));case"resolvedImage":return Xi.fromString(vt(this.args[0].evaluate(o)));default:return vt(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const id=["Unknown","Point","LineString","Polygon"];class nu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?id[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let c=this._parseColorCache[o];return c||(c=this._parseColorCache[o]=on.parse(o)),c}}class dn{constructor(o,c,h=[],m,y=new Qs,w=[]){this.registry=o,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=y,this.errors=w,this.expectedType=m,this._isConstant=c}parse(o,c,h,m,y={}){return c?this.concat(c,h,m)._parse(o,y):this._parse(o,y)}_parse(o,c){function h(m,y,w){return"assert"===w?new Vr(y,[m]):"coerce"===w?new Qi(y,[m]):m}if(null!==o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o||(o=["literal",o]),Array.isArray(o)){if(0===o.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=o[0];if("string"!=typeof m)return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let w=y.parse(o,this);if(!w)return null;if(this.expectedType){const S=this.expectedType,E=w.type;if("string"!==S.kind&&"number"!==S.kind&&"boolean"!==S.kind&&"object"!==S.kind&&"array"!==S.kind||"value"!==E.kind)if("color"!==S.kind&&"formatted"!==S.kind&&"resolvedImage"!==S.kind||"value"!==E.kind&&"string"!==E.kind)if("padding"!==S.kind||"value"!==E.kind&&"number"!==E.kind&&"array"!==E.kind)if("variableAnchorOffsetCollection"!==S.kind||"value"!==E.kind&&"array"!==E.kind){if(this.checkSubtype(S,E))return null}else w=h(w,S,c.typeAnnotation||"coerce");else w=h(w,S,c.typeAnnotation||"coerce");else w=h(w,S,c.typeAnnotation||"coerce");else w=h(w,S,c.typeAnnotation||"assert")}if(!(w instanceof xs)&&"resolvedImage"!==w.type.kind&&this._isConstant(w)){const S=new nu;try{w=new xs(w.type,w.evaluate(S))}catch(E){return this.error(E.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===o?"'undefined' value invalid. Use null instead.":"object"==typeof o?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,c,h){const m="number"==typeof o?this.path.concat(o):this.path,y=h?this.scope.concat(h):this.scope;return new dn(this.registry,this._isConstant,m,c||null,y,this.errors)}error(o,...c){const h=`${this.key}${c.map(m=>`[${m}]`).join("")}`;this.errors.push(new ni(h,o))}checkSubtype(o,c){const h=se(o,c);return h&&this.error(h),h}}class Da{constructor(o,c,h){this.type=bs,this.locale=h,this.caseSensitive=o,this.diacriticSensitive=c}static parse(o,c){if(2!==o.length)return c.error("Expected one argument.");const h=o[1];if("object"!=typeof h||Array.isArray(h))return c.error("Collator options argument must be an object.");const m=c.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,bt);if(!m)return null;const y=c.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,bt);if(!y)return null;let w=null;return h.locale&&(w=c.parse(h.locale,1,Rt),!w)?null:new Da(m,y,w)}evaluate(o){return new tu(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}const Ln=8192;function lc(l,o){l[0]=Math.min(l[0],o[0]),l[1]=Math.min(l[1],o[1]),l[2]=Math.max(l[2],o[0]),l[3]=Math.max(l[3],o[1])}function cc(l,o){return!(l[0]<=o[0]||l[2]>=o[2]||l[1]<=o[1]||l[3]>=o[3])}function kn(l,o){const c=(180+l[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,m=Math.pow(2,o.z);return[Math.round(c*m*Ln),Math.round(h*m*Ln)]}function Ct(l,o,c){const h=l[0]-o[0],m=l[1]-o[1],y=l[0]-c[0],w=l[1]-c[1];return h*w-y*m==0&&h*y<=0&&m*w<=0}function dc(l,o){let c=!1;for(let w=0,S=o.length;w<S;w++){const E=o[w];for(let I=0,P=E.length;I<P-1;I++){if(Ct(l,E[I],E[I+1]))return!1;(m=E[I])[1]>(h=l)[1]!=(y=E[I+1])[1]>h[1]&&h[0]<(y[0]-m[0])*(h[1]-m[1])/(y[1]-m[1])+m[0]&&(c=!c)}}var h,m,y;return c}function uc(l,o){for(let c=0;c<o.length;c++)if(dc(l,o[c]))return!0;return!1}function pm(l,o,c,h){const m=h[0]-c[0],y=h[1]-c[1],w=(l[0]-c[0])*y-m*(l[1]-c[1]),S=(o[0]-c[0])*y-m*(o[1]-c[1]);return w>0&&S<0||w<0&&S>0}function xh(l,o,c){for(const I of c)for(let P=0;P<I.length-1;++P)if((S=[(w=I[P+1])[0]-(y=I[P])[0],w[1]-y[1]])[0]*(E=[(m=o)[0]-(h=l)[0],m[1]-h[1]])[1]-S[1]*E[0]!=0&&pm(h,m,y,w)&&pm(y,w,h,m))return!0;var h,m,y,w,S,E;return!1}function xe(l,o){for(let c=0;c<l.length;++c)if(!dc(l[c],o))return!1;for(let c=0;c<l.length-1;++c)if(xh(l[c],l[c+1],o))return!1;return!0}function hc(l,o){for(let c=0;c<o.length;c++)if(xe(l,o[c]))return!0;return!1}function kt(l,o,c){const h=[];for(let m=0;m<l.length;m++){const y=[];for(let w=0;w<l[m].length;w++){const S=kn(l[m][w],c);lc(o,S),y.push(S)}h.push(y)}return h}function mn(l,o,c){const h=[];for(let m=0;m<l.length;m++){const y=kt(l[m],o,c);h.push(y)}return h}function wh(l,o,c,h){if(l[0]<c[0]||l[0]>c[2]){const m=.5*h;let y=l[0]-c[0]>m?-h:c[0]-l[0]>m?h:0;0===y&&(y=l[0]-c[2]>m?-h:c[2]-l[0]>m?h:0),l[0]+=y}lc(o,l)}function kh(l,o,c,h){const m=Math.pow(2,h.z)*Ln,y=[h.x*Ln,h.y*Ln],w=[];for(const S of l)for(const E of S){const I=[E.x+y[0],E.y+y[1]];wh(I,o,c,m),w.push(I)}return w}function iu(l,o,c,h){const m=Math.pow(2,h.z)*Ln,y=[h.x*Ln,h.y*Ln],w=[];for(const E of l){const I=[];for(const P of E){const F=[P.x+y[0],P.y+y[1]];lc(o,F),I.push(F)}w.push(I)}if(o[2]-o[0]<=m/2){(S=o)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const E of w)for(const I of E)wh(I,o,c,m)}var S;return w}class ws{constructor(o,c){this.type=bt,this.geojson=o,this.geometries=c}static parse(o,c){if(2!==o.length)return c.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(wl(o[1])){const h=o[1];if("FeatureCollection"===h.type)for(let m=0;m<h.features.length;++m){const y=h.features[m].geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new ws(h,h.features[m].geometry)}else if("Feature"===h.type){const m=h.geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new ws(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new ws(h,h)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(null!=o.geometry()&&null!=o.canonicalID()){if("Point"===o.geometryType())return function(c,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if("Polygon"===h.type){const S=kt(h.coordinates,y,w),E=kh(c.geometry(),m,y,w);if(!cc(m,y))return!1;for(const I of E)if(!dc(I,S))return!1}if("MultiPolygon"===h.type){const S=mn(h.coordinates,y,w),E=kh(c.geometry(),m,y,w);if(!cc(m,y))return!1;for(const I of E)if(!uc(I,S))return!1}return!0}(o,this.geometries);if("LineString"===o.geometryType())return function(c,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if("Polygon"===h.type){const S=kt(h.coordinates,y,w),E=iu(c.geometry(),m,y,w);if(!cc(m,y))return!1;for(const I of E)if(!xe(I,S))return!1}if("MultiPolygon"===h.type){const S=mn(h.coordinates,y,w),E=iu(c.geometry(),m,y,w);if(!cc(m,y))return!1;for(const I of E)if(!hc(I,S))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class ar{constructor(o,c){this.type=c.type,this.name=o,this.boundExpression=c}static parse(o,c){if(2!==o.length||"string"!=typeof o[1])return c.error("'var' expression requires exactly one string literal argument.");const h=o[1];return c.scope.has(h)?new ar(h,c.scope.get(h)):c.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Oo{constructor(o,c,h,m){this.name=o,this.type=c,this._evaluate=h,this.args=m}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,c){const h=o[0],m=Oo.definitions[h];if(!m)return c.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=w.filter(([I])=>!Array.isArray(I)||I.length===o.length-1);let E=null;for(const[I,P]of S){E=new dn(c.registry,rd,c.path,null,c.scope);const F=[];let L=!1;for(let j=1;j<o.length;j++){const H=o[j],W=Array.isArray(I)?I[j-1]:I.type,J=E.parse(H,1+F.length,W);if(!J){L=!0;break}F.push(J)}if(!L)if(Array.isArray(I)&&I.length!==F.length)E.error(`Expected ${I.length} arguments, but found ${F.length} instead.`);else{for(let j=0;j<F.length;j++){const H=Array.isArray(I)?I[j]:I.type,W=F[j];E.concat(j+1).checkSubtype(H,W.type)}if(0===E.errors.length)return new Oo(h,y,P,F)}}if(1===S.length)c.errors.push(...E.errors);else{const I=(S.length?S:w).map(([F])=>{return L=F,Array.isArray(L)?`(${L.map(ee).join(", ")})`:`(${ee(L.type)}...)`;var L}).join(" | "),P=[];for(let F=1;F<o.length;F++){const L=c.parse(o[F],1+P.length);if(!L)return null;P.push(ee(L.type))}c.error(`Expected arguments of type ${I}, but found (${P.join(", ")}) instead.`)}return null}static register(o,c){Oo.definitions=c;for(const h in c)o[h]=Oo}}function rd(l){if(l instanceof ar)return rd(l.boundExpression);if(l instanceof Oo&&"error"===l.name||l instanceof Da||l instanceof ws)return!1;const o=l instanceof Qi||l instanceof Vr;let c=!0;return l.eachChild(h=>{c=o?c&&rd(h):c&&h instanceof xs}),!!c&&ru(l)&&ou(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ru(l){if(l instanceof Oo&&("get"===l.name&&1===l.args.length||"feature-state"===l.name||"has"===l.name&&1===l.args.length||"properties"===l.name||"geometry-type"===l.name||"id"===l.name||/^filter-/.test(l.name))||l instanceof ws)return!1;let o=!0;return l.eachChild(c=>{o&&!ru(c)&&(o=!1)}),o}function Fo(l){if(l instanceof Oo&&"feature-state"===l.name)return!1;let o=!0;return l.eachChild(c=>{o&&!Fo(c)&&(o=!1)}),o}function ou(l,o){if(l instanceof Oo&&o.indexOf(l.name)>=0)return!1;let c=!0;return l.eachChild(h=>{c&&!ou(h,o)&&(c=!1)}),c}function pc(l,o){const c=l.length-1;let h,m,y=0,w=c,S=0;for(;y<=w;)if(S=Math.floor((y+w)/2),h=l[S],m=l[S+1],h<=o){if(S===c||o<m)return S;y=S+1}else{if(!(h>o))throw new tn("Input is not a number.");w=S-1}return 0}class Ia{constructor(o,c,h){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(const[m,y]of h)this.labels.push(m),this.outputs.push(y)}static parse(o,c){if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");const h=c.parse(o[1],1,Ue);if(!h)return null;const m=[];let y=null;c.expectedType&&"value"!==c.expectedType.kind&&(y=c.expectedType);for(let w=1;w<o.length;w+=2){const S=1===w?-1/0:o[w],E=o[w+1],I=w,P=w+1;if("number"!=typeof S)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(m.length&&m[m.length-1][0]>=S)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const F=c.parse(E,P,y);if(!F)return null;y=y||F.type,m.push([S,F])}return new Ia(y,h,m)}evaluate(o){const c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(o);const m=this.input.evaluate(o);if(m<=c[0])return h[0].evaluate(o);const y=c.length;return m>=c[y-1]?h[y-1].evaluate(o):h[pc(c,m)].evaluate(o)}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Kt(l,o,c){return l+c*(o-l)}function od(l,o,c){return l.map((h,m)=>Kt(h,o[m],c))}const ho={number:Kt,color:function(l,o,c,h="rgb"){switch(h){case"rgb":{const[m,y,w,S]=od(l.rgb,o.rgb,c);return new on(m,y,w,S,!1)}case"hcl":{const[m,y,w,S]=l.hcl,[E,I,P,F]=o.hcl;let L,j;if(isNaN(m)||isNaN(E))isNaN(m)?isNaN(E)?L=NaN:(L=E,1!==w&&0!==w||(j=I)):(L=m,1!==P&&0!==P||(j=y));else{let le=E-m;E>m&&le>180?le-=360:E<m&&m-E>180&&(le+=360),L=m+c*le}const[H,W,J,ne]=function([le,oe,pe,ge]){return le=isNaN(le)?0:le*xt,Ot([pe,Math.cos(le)*oe,Math.sin(le)*oe,ge])}([L,j??Kt(y,I,c),Kt(w,P,c),Kt(S,F,c)]);return new on(H,W,J,ne,!1)}case"lab":{const[m,y,w,S]=Ot(od(l.lab,o.lab,c));return new on(m,y,w,S,!1)}}},array:od,padding:function(l,o,c){return new Yr(od(l.values,o.values,c))},variableAnchorOffsetCollection:function(l,o,c){const h=l.values,m=o.values;if(h.length!==m.length)throw new tn(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${o.toString()}`);const y=[];for(let w=0;w<h.length;w+=2){if(h[w]!==m[w])throw new tn(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${h[w]}, to[${w}]: ${m[w]}`);y.push(h[w]);const[S,E]=h[w+1],[I,P]=m[w+1];y.push([Kt(S,I,c),Kt(E,P,c)])}return new uo(y)}};class Jr{constructor(o,c,h,m,y){this.type=o,this.operator=c,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[w,S]of y)this.labels.push(w),this.outputs.push(S)}static interpolationFactor(o,c,h,m){let y=0;if("exponential"===o.name)y=Sh(c,o.base,h,m);else if("linear"===o.name)y=Sh(c,1,h,m);else if("cubic-bezier"===o.name){const w=o.controlPoints;y=new qs(w[0],w[1],w[2],w[3]).solve(Sh(c,1,h,m))}return y}static parse(o,c){let[h,m,y,...w]=o;if(!Array.isArray(m)||0===m.length)return c.error("Expected an interpolation type expression.",1);if("linear"===m[0])m={name:"linear"};else if("exponential"===m[0]){const I=m[1];if("number"!=typeof I)return c.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if("cubic-bezier"!==m[0])return c.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const I=m.slice(1);if(4!==I.length||I.some(P=>"number"!=typeof P||P<0||P>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}}if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(y=c.parse(y,2,Ue),!y)return null;const S=[];let E=null;"interpolate-hcl"===h||"interpolate-lab"===h?E=Sr:c.expectedType&&"value"!==c.expectedType.kind&&(E=c.expectedType);for(let I=0;I<w.length;I+=2){const P=w[I],F=w[I+1],L=I+3,j=I+4;if("number"!=typeof P)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(S.length&&S[S.length-1][0]>=P)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const H=c.parse(F,j,E);if(!H)return null;E=E||H.type,S.push([P,H])}return Se(E,Ue)||Se(E,Sr)||Se(E,z)||Se(E,G)||Se(E,Y(Ue))?new Jr(E,h,m,y,S):c.error(`Type ${ee(E)} is not interpolatable.`)}evaluate(o){const c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(o);const m=this.input.evaluate(o);if(m<=c[0])return h[0].evaluate(o);const y=c.length;if(m>=c[y-1])return h[y-1].evaluate(o);const w=pc(c,m),S=Jr.interpolationFactor(this.interpolation,m,c[w],c[w+1]),E=h[w].evaluate(o),I=h[w+1].evaluate(o);switch(this.operator){case"interpolate":return ho[this.type.kind](E,I,S);case"interpolate-hcl":return ho.color(E,I,S,"hcl");case"interpolate-lab":return ho.color(E,I,S,"lab")}}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Sh(l,o,c,h){const m=h-c,y=l-c;return 0===m?0:1===o?y/m:(Math.pow(o,y)-1)/(Math.pow(o,m)-1)}class Cr{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expectected at least one argument.");let h=null;const m=c.expectedType;m&&"value"!==m.kind&&(h=m);const y=[];for(const S of o.slice(1)){const E=c.parse(S,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,y.push(E)}if(!h)throw new Error("No output type");const w=m&&y.some(S=>se(m,S.type));return new Cr(w?Mt:h,y)}evaluate(o){let c,h=null,m=0;for(const y of this.args)if(m++,h=y.evaluate(o),h&&h instanceof Xi&&!h.available&&(c||(c=h.name),h=null,m===this.args.length&&(h=c)),null!==h)break;return h}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}class _t{constructor(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const c of this.bindings)o(c[1]);o(this.result)}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const h=[];for(let y=1;y<o.length-1;y+=2){const w=o[y];if("string"!=typeof w)return c.error(`Expected string, but found ${typeof w} instead.`,y);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",y);const S=c.parse(o[y+1],y+1);if(!S)return null;h.push([w,S])}const m=c.parse(o[o.length-1],o.length-1,c.expectedType,h);return m?new _t(h,m):null}outputDefined(){return this.result.outputDefined()}}class Ch{constructor(o,c,h){this.type=o,this.index=c,this.input=h}static parse(o,c){if(3!==o.length)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=c.parse(o[1],1,Ue),m=c.parse(o[2],2,Y(c.expectedType||Mt));return h&&m?new Ch(m.type.itemType,h,m):null}evaluate(o){const c=this.index.evaluate(o),h=this.input.evaluate(o);if(c<0)throw new tn(`Array index out of bounds: ${c} < 0.`);if(c>=h.length)throw new tn(`Array index out of bounds: ${c} > ${h.length-1}.`);if(c!==Math.floor(c))throw new tn(`Array index must be an integer, but found ${c} instead.`);return h[c]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Th{constructor(o,c){this.type=bt,this.needle=o,this.haystack=c}static parse(o,c){if(3!==o.length)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=c.parse(o[1],1,Mt),m=c.parse(o[2],2,Mt);return h&&m?ie(h.type,[bt,Rt,Ue,ys,Mt])?new Th(h,m):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(h.type)} instead`):null}evaluate(o){const c=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!h)return!1;if(!ce(c,["boolean","string","number","null"]))throw new tn(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Kn(c))} instead.`);if(!ce(h,["string","array"]))throw new tn(`Expected second argument to be of type array or string, but found ${ee(Kn(h))} instead.`);return h.indexOf(c)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class su{constructor(o,c,h){this.type=Ue,this.needle=o,this.haystack=c,this.fromIndex=h}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=c.parse(o[1],1,Mt),m=c.parse(o[2],2,Mt);if(!h||!m)return null;if(!ie(h.type,[bt,Rt,Ue,ys,Mt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(h.type)} instead`);if(4===o.length){const y=c.parse(o[3],3,Ue);return y?new su(h,m,y):null}return new su(h,m)}evaluate(o){const c=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!ce(c,["boolean","string","number","null"]))throw new tn(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Kn(c))} instead.`);if(!ce(h,["string","array"]))throw new tn(`Expected second argument to be of type array or string, but found ${ee(Kn(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(o);return h.indexOf(c,m)}return h.indexOf(c)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class Ze{constructor(o,c,h,m,y,w){this.inputType=o,this.type=c,this.input=h,this.cases=m,this.outputs=y,this.otherwise=w}static parse(o,c){if(o.length<5)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return c.error("Expected an even number of arguments.");let h,m;c.expectedType&&"value"!==c.expectedType.kind&&(m=c.expectedType);const y={},w=[];for(let I=2;I<o.length-1;I+=2){let P=o[I];const F=o[I+1];Array.isArray(P)||(P=[P]);const L=c.concat(I);if(0===P.length)return L.error("Expected at least one branch label.");for(const H of P){if("number"!=typeof H&&"string"!=typeof H)return L.error("Branch labels must be numbers or strings.");if("number"==typeof H&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof H&&Math.floor(H)!==H)return L.error("Numeric branch labels must be integer values.");if(h){if(L.checkSubtype(h,Kn(H)))return null}else h=Kn(H);if(void 0!==y[String(H)])return L.error("Branch labels must be unique.");y[String(H)]=w.length}const j=c.parse(F,I,m);if(!j)return null;m=m||j.type,w.push(j)}const S=c.parse(o[1],1,Mt);if(!S)return null;const E=c.parse(o[o.length-1],o.length-1,m);return E?"value"!==S.type.kind&&c.concat(1).checkSubtype(h,S.type)?null:new Ze(h,m,S,y,w,E):null}evaluate(o){const c=this.input.evaluate(o);return(Kn(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Eh{constructor(o,c,h){this.type=o,this.branches=c,this.otherwise=h}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return c.error("Expected an odd number of arguments.");let h;c.expectedType&&"value"!==c.expectedType.kind&&(h=c.expectedType);const m=[];for(let w=1;w<o.length-1;w+=2){const S=c.parse(o[w],w,bt);if(!S)return null;const E=c.parse(o[w+1],w+1,h);if(!E)return null;m.push([S,E]),h=h||E.type}const y=c.parse(o[o.length-1],o.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new Eh(h,m,y)}evaluate(o){for(const[c,h]of this.branches)if(c.evaluate(o))return h.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[c,h]of this.branches)o(c),o(h);o(this.otherwise)}outputDefined(){return this.branches.every(([o,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class Dn{constructor(o,c,h,m){this.type=o,this.input=c,this.beginIndex=h,this.endIndex=m}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=c.parse(o[1],1,Mt),m=c.parse(o[2],2,Ue);if(!h||!m)return null;if(!ie(h.type,[Y(Mt),Rt,Mt]))return c.error(`Expected first argument to be of type array or string, but found ${ee(h.type)} instead`);if(4===o.length){const y=c.parse(o[3],3,Ue);return y?new Dn(h.type,h,m,y):null}return new Dn(h.type,h,m)}evaluate(o){const c=this.input.evaluate(o),h=this.beginIndex.evaluate(o);if(!ce(c,["string","array"]))throw new tn(`Expected first argument to be of type array or string, but found ${ee(Kn(c))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(o);return c.slice(h,m)}return c.slice(h)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function mc(l,o){return"=="===l||"!="===l?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function Mh(l,o,c,h){return 0===h.compare(o,c)}function Aa(l,o,c){const h="=="!==l&&"!="!==l;return class A2{constructor(y,w,S){this.type=bt,this.lhs=y,this.rhs=w,this.collator=S,this.hasUntypedArgument="value"===y.type.kind||"value"===w.type.kind}static parse(y,w){if(3!==y.length&&4!==y.length)return w.error("Expected two or three arguments.");const S=y[0];let E=w.parse(y[1],1,Mt);if(!E)return null;if(!mc(S,E.type))return w.concat(1).error(`"${S}" comparisons are not supported for type '${ee(E.type)}'.`);let I=w.parse(y[2],2,Mt);if(!I)return null;if(!mc(S,I.type))return w.concat(2).error(`"${S}" comparisons are not supported for type '${ee(I.type)}'.`);if(E.type.kind!==I.type.kind&&"value"!==E.type.kind&&"value"!==I.type.kind)return w.error(`Cannot compare types '${ee(E.type)}' and '${ee(I.type)}'.`);h&&("value"===E.type.kind&&"value"!==I.type.kind?E=new Vr(I.type,[E]):"value"!==E.type.kind&&"value"===I.type.kind&&(I=new Vr(E.type,[I])));let P=null;if(4===y.length){if("string"!==E.type.kind&&"string"!==I.type.kind&&"value"!==E.type.kind&&"value"!==I.type.kind)return w.error("Cannot use collator to compare non-string types.");if(P=w.parse(y[3],3,bs),!P)return null}return new A2(E,I,P)}evaluate(y){const w=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const E=Kn(w),I=Kn(S);if(E.kind!==I.kind||"string"!==E.kind&&"number"!==E.kind)throw new tn(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=Kn(w),I=Kn(S);if("string"!==E.kind||"string"!==I.kind)return o(y,w,S)}return this.collator?c(y,w,S,this.collator.evaluate(y)):o(y,w,S)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const mm=Aa("==",function(l,o,c){return o===c},Mh),sd=Aa("!=",function(l,o,c){return o!==c},function(l,o,c,h){return!Mh(0,o,c,h)}),ad=Aa("<",function(l,o,c){return o<c},function(l,o,c,h){return h.compare(o,c)<0}),au=Aa(">",function(l,o,c){return o>c},function(l,o,c,h){return h.compare(o,c)>0}),Dh=Aa("<=",function(l,o,c){return o<=c},function(l,o,c,h){return h.compare(o,c)<=0}),fm=Aa(">=",function(l,o,c){return o>=c},function(l,o,c,h){return h.compare(o,c)>=0});class Gt{constructor(o,c,h,m,y){this.type=Rt,this.number=o,this.locale=c,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(o,c){if(3!==o.length)return c.error("Expected two arguments.");const h=c.parse(o[1],1,Ue);if(!h)return null;const m=o[2];if("object"!=typeof m||Array.isArray(m))return c.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=c.parse(m.locale,1,Rt),!y))return null;let w=null;if(m.currency&&(w=c.parse(m.currency,1,Rt),!w))return null;let S=null;if(m["min-fraction-digits"]&&(S=c.parse(m["min-fraction-digits"],1,Ue),!S))return null;let E=null;return m["max-fraction-digits"]&&(E=c.parse(m["max-fraction-digits"],1,Ue),!E)?null:new Gt(h,y,w,S,E)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class kl{constructor(o){this.type=X,this.sections=o}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const h=o[1];if(!Array.isArray(h)&&"object"==typeof h)return c.error("First argument must be an image or text section.");const m=[];let y=!1;for(let w=1;w<=o.length-1;++w){const S=o[w];if(y&&"object"==typeof S&&!Array.isArray(S)){y=!1;let E=null;if(S["font-scale"]&&(E=c.parse(S["font-scale"],1,Ue),!E))return null;let I=null;if(S["text-font"]&&(I=c.parse(S["text-font"],1,Y(Rt)),!I))return null;let P=null;if(S["text-color"]&&(P=c.parse(S["text-color"],1,Sr),!P))return null;const F=m[m.length-1];F.scale=E,F.font=I,F.textColor=P}else{const E=c.parse(o[w],1,Mt);if(!E)return null;const I=E.type.kind;if("string"!==I&&"value"!==I&&"null"!==I&&"resolvedImage"!==I)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:E,scale:null,font:null,textColor:null})}}return new kl(m)}evaluate(o){return new Ki(this.sections.map(c=>{const h=c.content.evaluate(o);return Kn(h)===B?new oc("",h,null,null,null):new oc(vt(h),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null)}))}eachChild(o){for(const c of this.sections)o(c.content),c.scale&&o(c.scale),c.font&&o(c.font),c.textColor&&o(c.textColor)}outputDefined(){return!1}}class ld{constructor(o){this.type=B,this.input=o}static parse(o,c){if(2!==o.length)return c.error("Expected two arguments.");const h=c.parse(o[1],1,Rt);return h?new ld(h):c.error("No image name provided.")}evaluate(o){const c=this.input.evaluate(o),h=Xi.fromString(c);return h&&o.availableImages&&(h.available=o.availableImages.indexOf(c)>-1),h}eachChild(o){o(this.input)}outputDefined(){return!1}}class lr{constructor(o){this.type=Ue,this.input=o}static parse(o,c){if(2!==o.length)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);const h=c.parse(o[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?c.error(`Expected argument of type string or array, but found ${ee(h.type)} instead.`):new lr(h):null}evaluate(o){const c=this.input.evaluate(o);if("string"==typeof c||Array.isArray(c))return c.length;throw new tn(`Expected value to be of type string or array, but found ${ee(Kn(c))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const Pa={"==":mm,"!=":sd,">":au,"<":ad,">=":fm,"<=":Dh,array:Vr,at:Ch,boolean:Vr,case:Eh,coalesce:Cr,collator:Da,format:kl,image:ld,in:Th,"index-of":su,interpolate:Jr,"interpolate-hcl":Jr,"interpolate-lab":Jr,length:lr,let:_t,literal:xs,match:Ze,number:Vr,"number-format":Gt,object:Vr,slice:Dn,step:Ia,string:Vr,"to-boolean":Qi,"to-color":Qi,"to-number":Qi,"to-string":Qi,var:ar,within:ws};function gm(l,[o,c,h,m]){o=o.evaluate(l),c=c.evaluate(l),h=h.evaluate(l);const y=m?m.evaluate(l):1,w=sc(o,c,h,y);if(w)throw new tn(w);return new on(o/255,c/255,h/255,y,!1)}function In(l,o){return l in o}function Ih(l,o){const c=o[l];return void 0===c?null:c}function Sl(l){return{type:l}}function ze(l){return{result:"success",value:l}}function ns(l){return{result:"error",value:l}}function Js(l){return"data-driven"===l["property-type"]||"cross-faded-data-driven"===l["property-type"]}function lu(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function fc(l){return!!l.expression&&l.expression.interpolated}function ln(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function Bn(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}function Rg(l){return l}function Xt(l,o){const c="color"===o.type,h=l.stops&&"object"==typeof l.stops[0][0],m=h||!(h||void 0!==l.property),y=l.type||(fc(o)?"exponential":"interval");if(c||"padding"===o.type){const P=c?on.parse:Yr.parse;(l=Po({},l)).stops&&(l.stops=l.stops.map(F=>[F[0],P(F[1])])),l.default=P(l.default?l.default:o.default)}if(l.colorSpace&&"rgb"!==(w=l.colorSpace)&&"hcl"!==w&&"lab"!==w)throw new Error(`Unknown color space: "${l.colorSpace}"`);var w;let S,E,I;if("exponential"===y)S=ks;else if("interval"===y)S=Xn;else if("categorical"===y){S=ii,E=Object.create(null);for(const P of l.stops)E[P[0]]=P[1];I=typeof l.stops[0][0]}else{if("identity"!==y)throw new Error(`Unknown function type "${y}"`);S=cd}if(h){const P={},F=[];for(let H=0;H<l.stops.length;H++){const W=l.stops[H],J=W[0].zoom;void 0===P[J]&&(P[J]={zoom:J,type:l.type,property:l.property,default:l.default,stops:[]},F.push(J)),P[J].stops.push([W[0].value,W[1]])}const L=[];for(const H of F)L.push([P[H].zoom,Xt(P[H],o)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:Jr.interpolationFactor.bind(void 0,j),zoomStops:L.map(H=>H[0]),evaluate:({zoom:H},W)=>ks({stops:L,base:l.base},o,H).evaluate(H,W)}}if(m){const P="exponential"===y?{name:"exponential",base:void 0!==l.base?l.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Jr.interpolationFactor.bind(void 0,P),zoomStops:l.stops.map(F=>F[0]),evaluate:({zoom:F})=>S(l,o,F,E,I)}}return{kind:"source",evaluate(P,F){const L=F&&F.properties?F.properties[l.property]:void 0;return void 0===L?Cl(l.default,o.default):S(l,o,L,E,I)}}}function Cl(l,o,c){return void 0!==l?l:void 0!==o?o:void 0!==c?c:void 0}function ii(l,o,c,h,m){return Cl(typeof c===m?h[c]:void 0,l.default,o.default)}function Xn(l,o,c){if("number"!==ln(c))return Cl(l.default,o.default);const h=l.stops.length;if(1===h||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[h-1][0])return l.stops[h-1][1];const m=pc(l.stops.map(y=>y[0]),c);return l.stops[m][1]}function ks(l,o,c){const h=void 0!==l.base?l.base:1;if("number"!==ln(c))return Cl(l.default,o.default);const m=l.stops.length;if(1===m||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[m-1][0])return l.stops[m-1][1];const y=pc(l.stops.map(P=>P[0]),c),w=function(P,F,L,j){const H=j-L,W=P-L;return 0===H?0:1===F?W/H:(Math.pow(F,W)-1)/(Math.pow(F,H)-1)}(c,h,l.stops[y][0],l.stops[y+1][0]),S=l.stops[y][1],E=l.stops[y+1][1],I=ho[o.type]||Rg;return"function"==typeof S.evaluate?{evaluate(...P){const F=S.evaluate.apply(void 0,P),L=E.evaluate.apply(void 0,P);if(void 0!==F&&void 0!==L)return I(F,L,w,l.colorSpace)}}:I(S,E,w,l.colorSpace)}function cd(l,o,c){switch(o.type){case"color":c=on.parse(c);break;case"formatted":c=Ki.fromString(c.toString());break;case"resolvedImage":c=Xi.fromString(c.toString());break;case"padding":c=Yr.parse(c);break;default:ln(c)===o.type||"enum"===o.type&&o.values[c]||(c=void 0)}return Cl(c,l.default,o.default)}Oo.register(Pa,{error:[{kind:"error"},[Rt],(l,[o])=>{throw new tn(o.evaluate(l))}],typeof:[Rt,[Mt],(l,[o])=>ee(Kn(o.evaluate(l)))],"to-rgba":[Y(Ue,4),[Sr],(l,[o])=>{const[c,h,m,y]=o.evaluate(l).rgb;return[255*c,255*h,255*m,y]}],rgb:[Sr,[Ue,Ue,Ue],gm],rgba:[Sr,[Ue,Ue,Ue,Ue],gm],has:{type:bt,overloads:[[[Rt],(l,[o])=>In(o.evaluate(l),l.properties())],[[Rt,ts],(l,[o,c])=>In(o.evaluate(l),c.evaluate(l))]]},get:{type:Mt,overloads:[[[Rt],(l,[o])=>Ih(o.evaluate(l),l.properties())],[[Rt,ts],(l,[o,c])=>Ih(o.evaluate(l),c.evaluate(l))]]},"feature-state":[Mt,[Rt],(l,[o])=>Ih(o.evaluate(l),l.featureState||{})],properties:[ts,[],l=>l.properties()],"geometry-type":[Rt,[],l=>l.geometryType()],id:[Mt,[],l=>l.id()],zoom:[Ue,[],l=>l.globals.zoom],"heatmap-density":[Ue,[],l=>l.globals.heatmapDensity||0],"line-progress":[Ue,[],l=>l.globals.lineProgress||0],accumulated:[Mt,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[Ue,Sl(Ue),(l,o)=>{let c=0;for(const h of o)c+=h.evaluate(l);return c}],"*":[Ue,Sl(Ue),(l,o)=>{let c=1;for(const h of o)c*=h.evaluate(l);return c}],"-":{type:Ue,overloads:[[[Ue,Ue],(l,[o,c])=>o.evaluate(l)-c.evaluate(l)],[[Ue],(l,[o])=>-o.evaluate(l)]]},"/":[Ue,[Ue,Ue],(l,[o,c])=>o.evaluate(l)/c.evaluate(l)],"%":[Ue,[Ue,Ue],(l,[o,c])=>o.evaluate(l)%c.evaluate(l)],ln2:[Ue,[],()=>Math.LN2],pi:[Ue,[],()=>Math.PI],e:[Ue,[],()=>Math.E],"^":[Ue,[Ue,Ue],(l,[o,c])=>Math.pow(o.evaluate(l),c.evaluate(l))],sqrt:[Ue,[Ue],(l,[o])=>Math.sqrt(o.evaluate(l))],log10:[Ue,[Ue],(l,[o])=>Math.log(o.evaluate(l))/Math.LN10],ln:[Ue,[Ue],(l,[o])=>Math.log(o.evaluate(l))],log2:[Ue,[Ue],(l,[o])=>Math.log(o.evaluate(l))/Math.LN2],sin:[Ue,[Ue],(l,[o])=>Math.sin(o.evaluate(l))],cos:[Ue,[Ue],(l,[o])=>Math.cos(o.evaluate(l))],tan:[Ue,[Ue],(l,[o])=>Math.tan(o.evaluate(l))],asin:[Ue,[Ue],(l,[o])=>Math.asin(o.evaluate(l))],acos:[Ue,[Ue],(l,[o])=>Math.acos(o.evaluate(l))],atan:[Ue,[Ue],(l,[o])=>Math.atan(o.evaluate(l))],min:[Ue,Sl(Ue),(l,o)=>Math.min(...o.map(c=>c.evaluate(l)))],max:[Ue,Sl(Ue),(l,o)=>Math.max(...o.map(c=>c.evaluate(l)))],abs:[Ue,[Ue],(l,[o])=>Math.abs(o.evaluate(l))],round:[Ue,[Ue],(l,[o])=>{const c=o.evaluate(l);return c<0?-Math.round(-c):Math.round(c)}],floor:[Ue,[Ue],(l,[o])=>Math.floor(o.evaluate(l))],ceil:[Ue,[Ue],(l,[o])=>Math.ceil(o.evaluate(l))],"filter-==":[bt,[Rt,Mt],(l,[o,c])=>l.properties()[o.value]===c.value],"filter-id-==":[bt,[Mt],(l,[o])=>l.id()===o.value],"filter-type-==":[bt,[Rt],(l,[o])=>l.geometryType()===o.value],"filter-<":[bt,[Rt,Mt],(l,[o,c])=>{const h=l.properties()[o.value],m=c.value;return typeof h==typeof m&&h<m}],"filter-id-<":[bt,[Mt],(l,[o])=>{const c=l.id(),h=o.value;return typeof c==typeof h&&c<h}],"filter->":[bt,[Rt,Mt],(l,[o,c])=>{const h=l.properties()[o.value],m=c.value;return typeof h==typeof m&&h>m}],"filter-id->":[bt,[Mt],(l,[o])=>{const c=l.id(),h=o.value;return typeof c==typeof h&&c>h}],"filter-<=":[bt,[Rt,Mt],(l,[o,c])=>{const h=l.properties()[o.value],m=c.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[bt,[Mt],(l,[o])=>{const c=l.id(),h=o.value;return typeof c==typeof h&&c<=h}],"filter->=":[bt,[Rt,Mt],(l,[o,c])=>{const h=l.properties()[o.value],m=c.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[bt,[Mt],(l,[o])=>{const c=l.id(),h=o.value;return typeof c==typeof h&&c>=h}],"filter-has":[bt,[Mt],(l,[o])=>o.value in l.properties()],"filter-has-id":[bt,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[bt,[Y(Rt)],(l,[o])=>o.value.indexOf(l.geometryType())>=0],"filter-id-in":[bt,[Y(Mt)],(l,[o])=>o.value.indexOf(l.id())>=0],"filter-in-small":[bt,[Rt,Y(Mt)],(l,[o,c])=>c.value.indexOf(l.properties()[o.value])>=0],"filter-in-large":[bt,[Rt,Y(Mt)],(l,[o,c])=>function(h,m,y,w){for(;y<=w;){const S=y+w>>1;if(m[S]===h)return!0;m[S]>h?w=S-1:y=S+1}return!1}(l.properties()[o.value],c.value,0,c.value.length-1)],all:{type:bt,overloads:[[[bt,bt],(l,[o,c])=>o.evaluate(l)&&c.evaluate(l)],[Sl(bt),(l,o)=>{for(const c of o)if(!c.evaluate(l))return!1;return!0}]]},any:{type:bt,overloads:[[[bt,bt],(l,[o,c])=>o.evaluate(l)||c.evaluate(l)],[Sl(bt),(l,o)=>{for(const c of o)if(c.evaluate(l))return!0;return!1}]]},"!":[bt,[bt],(l,[o])=>!o.evaluate(l)],"is-supported-script":[bt,[Rt],(l,[o])=>{const c=l.globals&&l.globals.isSupportedScript;return!c||c(o.evaluate(l))}],upcase:[Rt,[Rt],(l,[o])=>o.evaluate(l).toUpperCase()],downcase:[Rt,[Rt],(l,[o])=>o.evaluate(l).toLowerCase()],concat:[Rt,Sl(Mt),(l,o)=>o.map(c=>vt(c.evaluate(l))).join("")],"resolved-locale":[Rt,[bs],(l,[o])=>o.evaluate(l).resolvedLocale()]});class Tl{constructor(o,c){var h;this.expression=o,this._warningHistory={},this._evaluator=new nu,this._defaultValue=c?"color"===(h=c).type&&Bn(h.default)?new on(0,0,0,0):"color"===h.type?on.parse(h.default)||null:"padding"===h.type?Yr.parse(h.default)||null:"variableAnchorOffsetCollection"===h.type?uo.parse(h.default)||null:void 0===h.default?null:h.default:null,this._enumValues=c&&"enum"===c.type?c.values:null}evaluateWithoutErrorHandling(o,c,h,m,y,w){return this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(o,c,h,m,y,w){this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=w||null;try{const S=this.expression.evaluate(this._evaluator);if(null==S||"number"==typeof S&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new tn(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function dd(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in Pa}function ud(l,o){const c=new dn(Pa,rd,[],o?function(m){const y={color:Sr,string:Rt,number:Ue,enum:Rt,boolean:bt,formatted:X,padding:z,resolvedImage:B,variableAnchorOffsetCollection:G};return"array"===m.type?Y(y[m.value]||Mt,m.length):y[m.type]}(o):void 0),h=c.parse(l,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return h?ze(new Tl(h,o)):ns(c.errors)}class cu{constructor(o,c){this.kind=o,this._styleExpression=c,this.isStateDependent="constant"!==o&&!Fo(c.expression)}evaluateWithoutErrorHandling(o,c,h,m,y,w){return this._styleExpression.evaluateWithoutErrorHandling(o,c,h,m,y,w)}evaluate(o,c,h,m,y,w){return this._styleExpression.evaluate(o,c,h,m,y,w)}}class gc{constructor(o,c,h,m){this.kind=o,this.zoomStops=h,this._styleExpression=c,this.isStateDependent="camera"!==o&&!Fo(c.expression),this.interpolationType=m}evaluateWithoutErrorHandling(o,c,h,m,y,w){return this._styleExpression.evaluateWithoutErrorHandling(o,c,h,m,y,w)}evaluate(o,c,h,m,y,w){return this._styleExpression.evaluate(o,c,h,m,y,w)}interpolationFactor(o,c,h){return this.interpolationType?Jr.interpolationFactor(this.interpolationType,o,c,h):0}}function ea(l,o){const c=ud(l,o);if("error"===c.result)return c;const h=c.value.expression,m=ru(h);if(!m&&!Js(o))return ns([new ni("","data expressions not supported")]);const y=ou(h,["zoom"]);if(!y&&!lu(o))return ns([new ni("","zoom expressions not supported")]);const w=po(h);return w||y?w instanceof ni?ns([w]):w instanceof Jr&&!fc(o)?ns([new ni("",'"interpolate" expressions cannot be used with this property')]):ze(w?new gc(m?"camera":"composite",c.value,w.labels,w instanceof Jr?w.interpolation:void 0):new cu(m?"constant":"source",c.value)):ns([new ni("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class _c{constructor(o,c){this._parameters=o,this._specification=c,Po(this,Xt(this._parameters,this._specification))}static deserialize(o){return new _c(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function po(l){let o=null;if(l instanceof _t)o=po(l.result);else if(l instanceof Cr){for(const c of l.args)if(o=po(c),o)break}else(l instanceof Ia||l instanceof Jr)&&l.input instanceof Oo&&"zoom"===l.input.name&&(o=l);return o instanceof ni||l.eachChild(c=>{const h=po(c);h instanceof ni?o=h:!o&&h?o=new ni("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&h&&o!==h&&(o=new ni("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function vc(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const o of l.slice(1))if(!vc(o)&&"boolean"!=typeof o)return!1;return!0;default:return!0}}const Oe={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function hd(l){if(null==l)return{filter:()=>!0,needGeometry:!1};vc(l)||(l=El(l));const o=ud(l,Oe);if("error"===o.result)throw new Error(o.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,h,m)=>o.value.evaluate(c,h,{},m),needGeometry:yc(l)}}function qe(l,o){return l<o?-1:l>o?1:0}function yc(l){if(!Array.isArray(l))return!1;if("within"===l[0])return!0;for(let o=1;o<l.length;o++)if(yc(l[o]))return!0;return!1}function El(l){if(!l)return!0;const o=l[0];return l.length<=1?"any"!==o:"=="===o?Ra(l[1],l[2],"=="):"!="===o?bc(Ra(l[1],l[2],"==")):"<"===o||">"===o||"<="===o||">="===o?Ra(l[1],l[2],o):"any"===o?(c=l.slice(1),["any"].concat(c.map(El))):"all"===o?["all"].concat(l.slice(1).map(El)):"none"===o?["all"].concat(l.slice(1).map(El).map(bc)):"in"===o?Ah(l[1],l.slice(2)):"!in"===o?bc(Ah(l[1],l.slice(2))):"has"===o?Ph(l[1]):"!has"===o?bc(Ph(l[1])):"within"!==o||l;var c}function Ra(l,o,c){switch(l){case"$type":return[`filter-type-${c}`,o];case"$id":return[`filter-id-${c}`,o];default:return[`filter-${c}`,l,o]}}function Ah(l,o){if(0===o.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(c=>typeof c!=typeof o[0])?["filter-in-large",l,["literal",o.sort(qe)]]:["filter-in-small",l,["literal",o]]}}function Ph(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function bc(l){return["!",l]}function mo(l){const o=typeof l;if("number"===o||"boolean"===o||"string"===o||null==l)return JSON.stringify(l);if(Array.isArray(l)){let m="[";for(const y of l)m+=`${mo(y)},`;return`${m}]`}const c=Object.keys(l).sort();let h="{";for(let m=0;m<c.length;m++)h+=`${JSON.stringify(c[m])}:${mo(l[c[m]])},`;return`${h}}`}function Oa(l){let o="";for(const c of Qr)o+=`/${mo(l[c])}`;return o}function eo(l){const o=l.value;return o?[new Fe(l.key,o,"constants have been deprecated as of v8")]:[]}function un(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Wt(l){if(Array.isArray(l))return l.map(Wt);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const o={};for(const c in l)o[c]=Wt(l[c]);return o}return un(l)}function Yi(l){const o=l.key,c=l.value,h=l.valueSpec||{},m=l.objectElementValidators||{},y=l.style,w=l.styleSpec,S=l.validateSpec;let E=[];const I=ln(c);if("object"!==I)return[new Fe(o,c,`object expected, ${I} found`)];for(const P in c){const F=P.split(".")[0],L=h[F]||h["*"];let j;if(m[F])j=m[F];else if(h[F])j=S;else if(m["*"])j=m["*"];else{if(!h["*"]){E.push(new Fe(o,c[P],`unknown property "${P}"`));continue}j=S}E=E.concat(j({key:(o&&`${o}.`)+P,value:c[P],valueSpec:L,style:y,styleSpec:w,object:c,objectKey:P,validateSpec:S},c))}for(const P in h)m[P]||h[P].required&&void 0===h[P].default&&void 0===c[P]&&E.push(new Fe(o,c,`missing required property "${P}"`));return E}function ta(l){const o=l.value,c=l.valueSpec,h=l.style,m=l.styleSpec,y=l.key,w=l.arrayElementValidator||l.validateSpec;if("array"!==ln(o))return[new Fe(y,o,`array expected, ${ln(o)} found`)];if(c.length&&o.length!==c.length)return[new Fe(y,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new Fe(y,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let S={type:c.value,values:c.values};m.$version<7&&(S.function=c.function),"object"===ln(c.value)&&(S=c.value);let E=[];for(let I=0;I<o.length;I++)E=E.concat(w({array:o,arrayIndex:I,value:o[I],valueSpec:S,validateSpec:l.validateSpec,style:h,styleSpec:m,key:`${y}[${I}]`}));return E}function Fa(l){const o=l.key,c=l.value,h=l.valueSpec;let m=ln(c);return"number"===m&&c!=c&&(m="NaN"),"number"!==m?[new Fe(o,c,`number expected, ${m} found`)]:"minimum"in h&&c<h.minimum?[new Fe(o,c,`${c} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&c>h.maximum?[new Fe(o,c,`${c} is greater than the maximum value ${h.maximum}`)]:[]}function xc(l){const o=l.valueSpec,c=un(l.value.type);let h,m,y,w={};const S="categorical"!==c&&void 0===l.value.property,E=!S,I="array"===ln(l.value.stops)&&"array"===ln(l.value.stops[0])&&"object"===ln(l.value.stops[0][0]),P=Yi({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(j){if("identity"===c)return[new Fe(j.key,j.value,'identity function may not have a "stops" property')];let H=[];const W=j.value;return H=H.concat(ta({key:j.key,value:W,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:F})),"array"===ln(W)&&0===W.length&&H.push(new Fe(j.key,W,"array must have at least one stop")),H},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:o,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return"identity"===c&&S&&P.push(new Fe(l.key,l.value,'missing required property "property"')),"identity"===c||l.value.stops||P.push(new Fe(l.key,l.value,'missing required property "stops"')),"exponential"===c&&l.valueSpec.expression&&!fc(l.valueSpec)&&P.push(new Fe(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(E&&!Js(l.valueSpec)?P.push(new Fe(l.key,l.value,"property functions not supported")):S&&!lu(l.valueSpec)&&P.push(new Fe(l.key,l.value,"zoom functions not supported"))),"categorical"!==c&&!I||void 0!==l.value.property||P.push(new Fe(l.key,l.value,'"property" property is required')),P;function F(j){let H=[];const W=j.value,J=j.key;if("array"!==ln(W))return[new Fe(J,W,`array expected, ${ln(W)} found`)];if(2!==W.length)return[new Fe(J,W,`array length 2 expected, length ${W.length} found`)];if(I){if("object"!==ln(W[0]))return[new Fe(J,W,`object expected, ${ln(W[0])} found`)];if(void 0===W[0].zoom)return[new Fe(J,W,"object stop key must have zoom")];if(void 0===W[0].value)return[new Fe(J,W,"object stop key must have value")];if(y&&y>un(W[0].zoom))return[new Fe(J,W[0].zoom,"stop zoom values must appear in ascending order")];un(W[0].zoom)!==y&&(y=un(W[0].zoom),m=void 0,w={}),H=H.concat(Yi({key:`${J}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:Fa,value:L}}))}else H=H.concat(L({key:`${J}[0]`,value:W[0],valueSpec:{},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},W));return dd(Wt(W[1]))?H.concat([new Fe(`${J}[1]`,W[1],"expressions are not allowed in function stops.")]):H.concat(j.validateSpec({key:`${J}[1]`,value:W[1],valueSpec:o,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function L(j,H){const W=ln(j.value),J=un(j.value),ne=null!==j.value?j.value:H;if(h){if(W!==h)return[new Fe(j.key,ne,`${W} stop domain type must match previous stop domain type ${h}`)]}else h=W;if("number"!==W&&"string"!==W&&"boolean"!==W)return[new Fe(j.key,ne,"stop domain value must be a number, string, or boolean")];if("number"!==W&&"categorical"!==c){let le=`number expected, ${W} found`;return Js(o)&&void 0===c&&(le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(j.key,ne,le)]}return"categorical"!==c||"number"!==W||isFinite(J)&&Math.floor(J)===J?"categorical"!==c&&"number"===W&&void 0!==m&&J<m?[new Fe(j.key,ne,"stop domain values must appear in ascending order")]:(m=J,"categorical"===c&&J in w?[new Fe(j.key,ne,"stop domain values must be unique")]:(w[J]=!0,[])):[new Fe(j.key,ne,`integer expected, found ${J}`)]}}function Tr(l){const o=("property"===l.expressionContext?ea:ud)(Wt(l.value),l.valueSpec);if("error"===o.result)return o.value.map(h=>new Fe(`${l.key}${h.key}`,l.value,h.message));const c=o.value.expression||o.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!c.outputDefined())return[new Fe(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!Fo(c))return[new Fe(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext&&!Fo(c))return[new Fe(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!ou(c,["zoom","feature-state"]))return[new Fe(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!ru(c))return[new Fe(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ss(l){const o=l.key,c=l.value,h=l.valueSpec,m=[];return Array.isArray(h.values)?-1===h.values.indexOf(un(c))&&m.push(new Fe(o,c,`expected one of [${h.values.join(", ")}], ${JSON.stringify(c)} found`)):-1===Object.keys(h.values).indexOf(un(c))&&m.push(new Fe(o,c,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(c)} found`)),m}function Na(l){return vc(Wt(l.value))?Tr(Po({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):du(l)}function du(l){const o=l.value,c=l.key;if("array"!==ln(o))return[new Fe(c,o,`array expected, ${ln(o)} found`)];const h=l.styleSpec;let m,y=[];if(o.length<1)return[new Fe(c,o,"filter array must have at least 1 element")];switch(y=y.concat(Ss({key:`${c}[0]`,value:o[0],valueSpec:h.filter_operator,style:l.style,styleSpec:l.styleSpec})),un(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===un(o[1])&&y.push(new Fe(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":3!==o.length&&y.push(new Fe(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(m=ln(o[1]),"string"!==m&&y.push(new Fe(`${c}[1]`,o[1],`string expected, ${m} found`)));for(let w=2;w<o.length;w++)m=ln(o[w]),"$type"===un(o[1])?y=y.concat(Ss({key:`${c}[${w}]`,value:o[w],valueSpec:h.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==m&&"number"!==m&&"boolean"!==m&&y.push(new Fe(`${c}[${w}]`,o[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)y=y.concat(du({key:`${c}[${w}]`,value:o[w],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":m=ln(o[1]),2!==o.length?y.push(new Fe(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):"string"!==m&&y.push(new Fe(`${c}[1]`,o[1],`string expected, ${m} found`));break;case"within":m=ln(o[1]),2!==o.length?y.push(new Fe(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):"object"!==m&&y.push(new Fe(`${c}[1]`,o[1],`object expected, ${m} found`))}return y}function pd(l,o){const c=l.key,h=l.validateSpec,m=l.style,y=l.styleSpec,w=l.value,S=l.objectKey,E=y[`${o}_${l.layerType}`];if(!E)return[];const I=S.match(/^(.*)-transition$/);if("paint"===o&&I&&E[I[1]]&&E[I[1]].transition)return h({key:c,value:w,valueSpec:y.transition,style:m,styleSpec:y});const P=l.valueSpec||E[S];if(!P)return[new Fe(c,w,`unknown property "${S}"`)];let F;if("string"===ln(w)&&Js(P)&&!P.tokens&&(F=/^{([^}]+)}$/.exec(w)))return[new Fe(c,w,`"${S}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const L=[];return"symbol"===l.layerType&&("text-field"===S&&m&&!m.glyphs&&L.push(new Fe(c,w,'use of "text-field" requires a style "glyphs" property')),"text-font"===S&&Bn(Wt(w))&&"identity"===un(w.type)&&L.push(new Fe(c,w,'"text-font" does not support identity functions'))),L.concat(h({key:l.key,value:w,valueSpec:P,style:m,styleSpec:y,expressionContext:"property",propertyType:o,propertyKey:S}))}function uu(l){return pd(l,"paint")}function hu(l){return pd(l,"layout")}function Ml(l){let o=[];const c=l.value,h=l.key,m=l.style,y=l.styleSpec;c.type||c.ref||o.push(new Fe(h,c,'either "type" or "ref" is required'));let w=un(c.type);const S=un(c.ref);if(c.id){const E=un(c.id);for(let I=0;I<l.arrayIndex;I++){const P=m.layers[I];un(P.id)===E&&o.push(new Fe(h,c.id,`duplicate layer id "${c.id}", previously used at line ${P.id.__line__}`))}}if("ref"in c){let E;["type","source","source-layer","filter","layout"].forEach(I=>{I in c&&o.push(new Fe(h,c[I],`"${I}" is prohibited for ref layers`))}),m.layers.forEach(I=>{un(I.id)===S&&(E=I)}),E?E.ref?o.push(new Fe(h,c.ref,"ref cannot reference another ref layer")):w=un(E.type):o.push(new Fe(h,c.ref,`ref layer "${S}" not found`))}else if("background"!==w)if(c.source){const E=m.sources&&m.sources[c.source],I=E&&un(E.type);E?"vector"===I&&"raster"===w?o.push(new Fe(h,c.source,`layer "${c.id}" requires a raster source`)):"raster-dem"!==I&&"hillshade"===w?o.push(new Fe(h,c.source,`layer "${c.id}" requires a raster-dem source`)):"raster"===I&&"raster"!==w?o.push(new Fe(h,c.source,`layer "${c.id}" requires a vector source`)):"vector"!==I||c["source-layer"]?"raster-dem"===I&&"hillshade"!==w?o.push(new Fe(h,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==w||!c.paint||!c.paint["line-gradient"]||"geojson"===I&&E.lineMetrics||o.push(new Fe(h,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Fe(h,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new Fe(h,c.source,`source "${c.source}" not found`))}else o.push(new Fe(h,c,'missing required property "source"'));return o=o.concat(Yi({key:h,value:c,valueSpec:y.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${h}.type`,value:c.type,valueSpec:y.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:c,objectKey:"type"}),filter:Na,layout:E=>Yi({layer:c,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>hu(Po({layerType:w},I))}}),paint:E=>Yi({layer:c,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>uu(Po({layerType:w},I))}})}})),o}function No(l){const o=l.value,c=l.key,h=ln(o);return"string"!==h?[new Fe(c,o,`string expected, ${h} found`)]:[]}const Dl={promoteId:function({key:l,value:o}){if("string"===ln(o))return No({key:l,value:o});{const c=[];for(const h in o)c.push(...No({key:`${l}.${h}`,value:o[h]}));return c}}};function to(l){const o=l.value,c=l.key,h=l.styleSpec,m=l.style,y=l.validateSpec;if(!o.type)return[new Fe(c,o,'"type" is required')];const w=un(o.type);let S;switch(w){case"vector":case"raster":return S=Yi({key:c,value:o,valueSpec:h[`source_${w.replace("-","_")}`],style:l.style,styleSpec:h,objectElementValidators:Dl,validateSpec:y}),S;case"raster-dem":return S=function(E){var I;const P=null!==(I=E.sourceName)&&void 0!==I?I:"",F=E.value,L=E.styleSpec,j=L.source_raster_dem,H=E.style;let W=[];const J=ln(F);if(void 0===F)return W;if("object"!==J)return W.push(new Fe("source_raster_dem",F,`object expected, ${J} found`)),W;const ne="custom"===un(F.encoding),le=["redFactor","greenFactor","blueFactor","baseShift"],oe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const pe in F)!ne&&le.includes(pe)?W.push(new Fe(pe,F[pe],`In "${P}": "${pe}" is only valid when "encoding" is set to "custom". ${oe} encoding found`)):j[pe]?W=W.concat(E.validateSpec({key:pe,value:F[pe],valueSpec:j[pe],validateSpec:E.validateSpec,style:H,styleSpec:L})):W.push(new Fe(pe,F[pe],`unknown property "${pe}"`));return W}({sourceName:c,value:o,style:l.style,styleSpec:h,validateSpec:y}),S;case"geojson":if(S=Yi({key:c,value:o,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:y,objectElementValidators:Dl}),o.cluster)for(const E in o.clusterProperties){const[I,P]=o.clusterProperties[E],F="string"==typeof I?[I,["accumulated"],["get",E]]:I;S.push(...Tr({key:`${c}.${E}.map`,value:P,validateSpec:y,expressionContext:"cluster-map"})),S.push(...Tr({key:`${c}.${E}.reduce`,value:F,validateSpec:y,expressionContext:"cluster-reduce"}))}return S;case"video":return Yi({key:c,value:o,valueSpec:h.source_video,style:m,validateSpec:y,styleSpec:h});case"image":return Yi({key:c,value:o,valueSpec:h.source_image,style:m,validateSpec:y,styleSpec:h});case"canvas":return[new Fe(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ss({key:`${c}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:y,styleSpec:h})}}function Il(l){const o=l.value,c=l.styleSpec,h=c.light,m=l.style;let y=[];const w=ln(o);if(void 0===o)return y;if("object"!==w)return y=y.concat([new Fe("light",o,`object expected, ${w} found`)]),y;for(const S in o){const E=S.match(/^(.*)-transition$/);y=y.concat(E&&h[E[1]]&&h[E[1]].transition?l.validateSpec({key:S,value:o[S],valueSpec:c.transition,validateSpec:l.validateSpec,style:m,styleSpec:c}):h[S]?l.validateSpec({key:S,value:o[S],valueSpec:h[S],validateSpec:l.validateSpec,style:m,styleSpec:c}):[new Fe(S,o[S],`unknown property "${S}"`)])}return y}function Rh(l){const o=l.value,c=l.styleSpec,h=c.terrain,m=l.style;let y=[];const w=ln(o);if(void 0===o)return y;if("object"!==w)return y=y.concat([new Fe("terrain",o,`object expected, ${w} found`)]),y;for(const S in o)y=y.concat(h[S]?l.validateSpec({key:S,value:o[S],valueSpec:h[S],validateSpec:l.validateSpec,style:m,styleSpec:c}):[new Fe(S,o[S],`unknown property "${S}"`)]);return y}function Oh(l){let o=[];const c=l.value,h=l.key;if(Array.isArray(c)){const m=[],y=[];for(const w in c)c[w].id&&m.includes(c[w].id)&&o.push(new Fe(h,c,`all the sprites' ids must be unique, but ${c[w].id} is duplicated`)),m.push(c[w].id),c[w].url&&y.includes(c[w].url)&&o.push(new Fe(h,c,`all the sprites' URLs must be unique, but ${c[w].url} is duplicated`)),y.push(c[w].url),o=o.concat(Yi({key:`${h}[${w}]`,value:c[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return o}return No({key:h,value:c})}const fo={"*":()=>[],array:ta,boolean:function(l){const o=l.value,c=l.key,h=ln(o);return"boolean"!==h?[new Fe(c,o,`boolean expected, ${h} found`)]:[]},number:Fa,color:function(l){const o=l.key,c=l.value,h=ln(c);return"string"!==h?[new Fe(o,c,`color expected, ${h} found`)]:on.parse(String(c))?[]:[new Fe(o,c,`color expected, "${c}" found`)]},constants:eo,enum:Ss,filter:Na,function:xc,layer:Ml,object:Yi,source:to,light:Il,terrain:Rh,string:No,formatted:function(l){return 0===No(l).length?[]:Tr(l)},resolvedImage:function(l){return 0===No(l).length?[]:Tr(l)},padding:function(l){const o=l.key,c=l.value;if("array"===ln(c)){if(c.length<1||c.length>4)return[new Fe(o,c,`padding requires 1 to 4 values; ${c.length} values found`)];const h={type:"number"};let m=[];for(let y=0;y<c.length;y++)m=m.concat(l.validateSpec({key:`${o}[${y}]`,value:c[y],validateSpec:l.validateSpec,valueSpec:h}));return m}return Fa({key:o,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(l){const o=l.key,c=l.value,h=ln(c),m=l.styleSpec;if("array"!==h||c.length<1||c.length%2!=0)return[new Fe(o,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let w=0;w<c.length;w+=2)y=y.concat(Ss({key:`${o}[${w}]`,value:c[w],valueSpec:m.layout_symbol["text-anchor"]})),y=y.concat(ta({key:`${o}[${w+1}]`,value:c[w+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:m}));return y},sprite:Oh};function Cs(l){const o=l.value,c=l.valueSpec,h=l.styleSpec;return l.validateSpec=Cs,c.expression&&Bn(un(o))?xc(l):c.expression&&dd(Wt(o))?Tr(l):c.type&&fo[c.type]?fo[c.type](l):Yi(Po({},l,{valueSpec:c.type?h[c.type]:c}))}function pu(l){const o=l.value,c=l.key,h=No(l);return h.length||(-1===o.indexOf("{fontstack}")&&h.push(new Fe(c,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&h.push(new Fe(c,o,'"glyphs" url must include a "{range}" token'))),h}function go(l,o=ke){let c=[];return c=c.concat(Cs({key:"",value:l,valueSpec:o.$root,styleSpec:o,style:l,validateSpec:Cs,objectElementValidators:{glyphs:pu,"*":()=>[]}})),l.constants&&(c=c.concat(eo({key:"constants",value:l.constants,style:l,styleSpec:o,validateSpec:Cs}))),md(c)}function Ts(l){return function(o){return l({...o,validateSpec:Cs})}}function md(l){return[].concat(l).sort((o,c)=>o.line-c.line)}function Es(l){return function(...o){return md(l.apply(this,o))}}go.source=Es(Ts(to)),go.sprite=Es(Ts(Oh)),go.glyphs=Es(Ts(pu)),go.light=Es(Ts(Il)),go.terrain=Es(Ts(Rh)),go.layer=Es(Ts(Ml)),go.filter=Es(Ts(Na)),go.paintProperty=Es(Ts(uu)),go.layoutProperty=Es(Ts(hu));const is=go,_m=is.light,mu=is.paintProperty,Fh=is.layoutProperty;function ri(l,o){let c=!1;if(o&&o.length)for(const h of o)l.fire(new Ta(new Error(h.message))),c=!0;return c}class Al{constructor(o,c,h){const m=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const w=new Int32Array(this.arrayBuffer);o=w[0],this.d=(c=w[1])+2*(h=w[2]);for(let E=0;E<this.d*this.d;E++){const I=w[3+E],P=w[3+E+1];m.push(I===P?null:w.subarray(I,P))}const S=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],S),this.bboxes=w.subarray(S),this.insert=this._insertReadonly}else{this.d=c+2*h;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=h,this.scale=c/o,this.uid=0;const y=h/c*o;this.min=-y,this.max=o+y}insert(o,c,h,m,y){this._forEachCell(c,h,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,c,h,m,y,w){this.cells[y].push(w)}query(o,c,h,m,y){const w=this.min,S=this.max;if(o<=w&&c<=w&&S<=h&&S<=m&&!y)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(o,c,h,m,this._queryCell,E,{},y),E}}_queryCell(o,c,h,m,y,w,S,E){const I=this.cells[y];if(null!==I){const P=this.keys,F=this.bboxes;for(let L=0;L<I.length;L++){const j=I[L];if(void 0===S[j]){const H=4*j;(E?E(F[H+0],F[H+1],F[H+2],F[H+3]):o<=F[H+2]&&c<=F[H+3]&&h>=F[H+0]&&m>=F[H+1])?(S[j]=!0,w.push(P[j])):S[j]=!1}}}}_forEachCell(o,c,h,m,y,w,S,E){const I=this._convertToCellCoord(o),P=this._convertToCellCoord(c),F=this._convertToCellCoord(h),L=this._convertToCellCoord(m);for(let j=I;j<=F;j++)for(let H=P;H<=L;H++){const W=this.d*H+j;if((!E||E(this._convertFromCellCoord(j),this._convertFromCellCoord(H),this._convertFromCellCoord(j+1),this._convertFromCellCoord(H+1)))&&y.call(this,o,c,h,m,W,w,S,E))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,c=3+this.cells.length+1+1;let h=0;for(let w=0;w<this.cells.length;w++)h+=this.cells[w].length;const m=new Int32Array(c+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=c;for(let w=0;w<o.length;w++){const S=o[w];m[3+w]=y,m.set(S,y),y+=S.length}return m[3+o.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+o.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(o,c){const h=o.toArrayBuffer();return c&&c.push(h),{buffer:h}}static deserialize(o){return new Al(o.buffer)}}const Ms={};function Qe(l,o,c={}){if(Ms[l])throw new Error(`${l} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:l,writeable:!1}),Ms[l]={klass:o,omit:c.omit||[],shallow:c.shallow||[]}}Qe("Object",Object),Qe("TransferableGridIndex",Al),Qe("Color",on),Qe("Error",Error),Qe("AJAXError",Mn),Qe("ResolvedImage",Xi),Qe("StylePropertyFunction",_c),Qe("StyleExpression",Tl,{omit:["_evaluator"]}),Qe("ZoomDependentExpression",gc),Qe("ZoomConstantExpression",cu),Qe("CompoundExpression",Oo,{omit:["_evaluate"]});for(const l in Pa)Pa[l]._classRegistryKey||Qe(`Expression_${l}`,Pa[l]);function Vn(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&"ArrayBuffer"===l.constructor.name)}function na(l,o){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob)return l;if(Vn(l)||gl(l))return o&&o.push(l),l;if(ArrayBuffer.isView(l)){const c=l;return o&&o.push(c.buffer),c}if(l instanceof ImageData)return o&&o.push(l.data.buffer),l;if(Array.isArray(l)){const c=[];for(const h of l)c.push(na(h,o));return c}if("object"==typeof l){const c=l.constructor,h=c._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Ms[h])throw new Error(`${h} is not registered.`);const m=c.serialize?c.serialize(l,o):{};if(c.serialize){if(o&&m===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in l){if(!l.hasOwnProperty(y)||Ms[h].omit.indexOf(y)>=0)continue;const w=l[y];m[y]=Ms[h].shallow.indexOf(y)>=0?w:na(w,o)}l instanceof Error&&(m.message=l.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==h&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof l)}function za(l){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||Vn(l)||gl(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(za);if("object"==typeof l){const o=l.$name||"Object";if(!Ms[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:c}=Ms[o];if(!c)throw new Error(`can't deserialize unregistered class ${o}`);if(c.deserialize)return c.deserialize(l);const h=Object.create(c.prototype);for(const m of Object.keys(l)){if("$name"===m)continue;const y=l[m];h[m]=Ms[o].shallow.indexOf(m)>=0?y:za(y)}return h}throw new Error("can't deserialize object of type "+typeof l)}class Je{constructor(){this.first=!0}update(o,c){const h=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=c),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=h,!0))}}const Be={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Jt(l){for(const o of l)if(ia(o.charCodeAt(0)))return!0;return!1}function Ai(l){for(const o of l)if(!Er(o.charCodeAt(0)))return!1;return!0}function Er(l){return!(Be.Arabic(l)||Be["Arabic Supplement"](l)||Be["Arabic Extended-A"](l)||Be["Arabic Presentation Forms-A"](l)||Be["Arabic Presentation Forms-B"](l))}function ia(l){return!(746!==l&&747!==l&&(l<4352||!(Be["Bopomofo Extended"](l)||Be.Bopomofo(l)||Be["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Be["CJK Compatibility Ideographs"](l)||Be["CJK Compatibility"](l)||Be["CJK Radicals Supplement"](l)||Be["CJK Strokes"](l)||!(!Be["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||12336===l)||Be["CJK Unified Ideographs Extension A"](l)||Be["CJK Unified Ideographs"](l)||Be["Enclosed CJK Letters and Months"](l)||Be["Hangul Compatibility Jamo"](l)||Be["Hangul Jamo Extended-A"](l)||Be["Hangul Jamo Extended-B"](l)||Be["Hangul Jamo"](l)||Be["Hangul Syllables"](l)||Be.Hiragana(l)||Be["Ideographic Description Characters"](l)||Be.Kanbun(l)||Be["Kangxi Radicals"](l)||Be["Katakana Phonetic Extensions"](l)||Be.Katakana(l)&&12540!==l||!(!Be["Halfwidth and Fullwidth Forms"](l)||65288===l||65289===l||65293===l||l>=65306&&l<=65310||65339===l||65341===l||65343===l||l>=65371&&l<=65503||65507===l||l>=65512&&l<=65519)||!(!Be["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Be["Unified Canadian Aboriginal Syllabics"](l)||Be["Unified Canadian Aboriginal Syllabics Extended"](l)||Be["Vertical Forms"](l)||Be["Yijing Hexagram Symbols"](l)||Be["Yi Syllables"](l)||Be["Yi Radicals"](l))))}function jr(l){return!(ia(l)||(o=l,Be["Latin-1 Supplement"](o)&&(167===o||169===o||174===o||177===o||188===o||189===o||190===o||215===o||247===o)||Be["General Punctuation"](o)&&(8214===o||8224===o||8225===o||8240===o||8241===o||8251===o||8252===o||8258===o||8263===o||8264===o||8265===o||8273===o)||Be["Letterlike Symbols"](o)||Be["Number Forms"](o)||Be["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||9003===o||o>=9085&&o<=9114||o>=9150&&o<=9165||9167===o||o>=9169&&o<=9179||o>=9186&&o<=9215)||Be["Control Pictures"](o)&&9251!==o||Be["Optical Character Recognition"](o)||Be["Enclosed Alphanumerics"](o)||Be["Geometric Shapes"](o)||Be["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Be["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Be["CJK Symbols and Punctuation"](o)||Be.Katakana(o)||Be["Private Use Area"](o)||Be["CJK Compatibility Forms"](o)||Be["Small Form Variants"](o)||Be["Halfwidth and Fullwidth Forms"](o)||8734===o||8756===o||8757===o||o>=9984&&o<=10087||o>=10102&&o<=10131||65532===o||65533===o));var o}function fu(l){return l>=1424&&l<=2303||Be["Arabic Presentation Forms-A"](l)||Be["Arabic Presentation Forms-B"](l)}function gu(l,o){return!(!o&&fu(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Be.Khmer(l))}function fd(l){for(const o of l)if(fu(o.charCodeAt(0)))return!0;return!1}const _u="deferred",vu="loading",Qn="loaded";let Ye=null,ft="unavailable",fn=null;const Mr=function(l){l&&"string"==typeof l&&l.indexOf("NetworkError")>-1&&(ft="error"),Ye&&Ye(l)};function La(){xi.fire(new Ks("pluginStateChange",{pluginStatus:ft,pluginURL:fn}))}const xi=new yl,ra=function(){return ft},li=function(){if(ft!==_u||!fn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ft=vu,La(),fn&&ic({url:fn},l=>{l?Mr(l):(ft=Qn,La())})},wi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ft===Qn||null!=wi.applyArabicShaping,isLoading:()=>ft===vu,setState(l){if(!Ii())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ft=l.pluginStatus,fn=l.pluginURL},isParsed(){if(!Ii())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=wi.applyArabicShaping&&null!=wi.processBidirectionalText&&null!=wi.processStyledBidirectionalText},getPluginURL(){if(!Ii())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return fn}};class gn{constructor(o,c){this.zoom=o,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Je,this.transition={})}isSupportedScript(o){return function(c,h){for(const m of c)if(!gu(m.charCodeAt(0),h))return!1;return!0}(o,wi.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,c=o-Math.floor(o),h=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*c}}}class St{constructor(o,c){this.property=o,this.value=c,this.expression=function(h,m){if(Bn(h))return new _c(h,m);if(dd(h)){const y=ea(h,m);if("error"===y.result)throw new Error(y.value.map(w=>`${w.key}: ${w.message}`).join(", "));return y.value}{let y=h;return"color"===m.type&&"string"==typeof h?y=on.parse(h):"padding"!==m.type||"number"!=typeof h&&!Array.isArray(h)?"variableAnchorOffsetCollection"===m.type&&Array.isArray(h)&&(y=uo.parse(h)):y=Yr.parse(h),{kind:"constant",evaluate:()=>y}}}(void 0===c?o.specification.default:c,o.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(o,c,h){return this.property.possiblyEvaluate(this,o,c,h)}}class Ba{constructor(o){this.property=o,this.value=new St(o,void 0)}transitioned(o,c){return new Va(this.property,this.value,c,qi({},o.transition,this.transition),o.now)}untransitioned(){return new Va(this.property,this.value,null,{},0)}}class yu{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Lr(this._values[o].value.value)}setValue(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ba(this._values[o].property)),this._values[o].value=new St(this._values[o].property,null===c?void 0:Lr(c))}getTransition(o){return Lr(this._values[o].transition)}setTransition(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ba(this._values[o].property)),this._values[o].transition=Lr(c)||void 0}serialize(){const o={};for(const c of Object.keys(this._values)){const h=this.getValue(c);void 0!==h&&(o[c]=h);const m=this.getTransition(c);void 0!==m&&(o[`${c}-transition`]=m)}return o}transitioned(o,c){const h=new ci(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(o,c._values[m]);return h}untransitioned(){const o=new ci(this._properties);for(const c of Object.keys(this._values))o._values[c]=this._values[c].untransitioned();return o}}class Va{constructor(o,c,h,m,y){this.property=o,this.value=c,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,o.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(o,c,h){const m=o.now||0,y=this.value.possiblyEvaluate(o,c,h),w=this.prior;if(w){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return w.possiblyEvaluate(o,c,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,c,h),y,function(E){if(E<=0)return 0;if(E>=1)return 1;const I=E*E,P=I*E;return 4*(E<.5?P:3*(E-I)+P-.75)}(S))}}return y}}class ci{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,c,h){const m=new no(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(o,c,h);return m}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class wc{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return void 0!==this._values[o].value}getValue(o){return Lr(this._values[o].value)}setValue(o,c){this._values[o]=new St(this._values[o].property,null===c?void 0:Lr(c))}serialize(){const o={};for(const c of Object.keys(this._values)){const h=this.getValue(c);void 0!==h&&(o[c]=h)}return o}possiblyEvaluate(o,c,h){const m=new no(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(o,c,h);return m}}class ki{constructor(o,c,h){this.property=o,this.value=c,this.parameters=h}isConstant(){return"constant"===this.value.kind}constantOr(o){return"constant"===this.value.kind?this.value.value:o}evaluate(o,c,h,m){return this.property.evaluate(this.value,this.parameters,o,c,h,m)}}class no{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class rt{constructor(o){this.specification=o}possiblyEvaluate(o,c){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(c)}interpolate(o,c,h){const m=ho[this.specification.type];return m?m(o,c,h):o}}class ut{constructor(o,c){this.specification=o,this.overrides=c}possiblyEvaluate(o,c,h,m){return new ki(this,"constant"===o.expression.kind||"camera"===o.expression.kind?{kind:"constant",value:o.expression.evaluate(c,null,{},h,m)}:o.expression,c)}interpolate(o,c,h){if("constant"!==o.value.kind||"constant"!==c.value.kind)return o;if(void 0===o.value.value||void 0===c.value.value)return new ki(this,{kind:"constant",value:void 0},o.parameters);const m=ho[this.specification.type];if(m){const y=m(o.value.value,c.value.value,h);return new ki(this,{kind:"constant",value:y},o.parameters)}return o}evaluate(o,c,h,m,y,w){return"constant"===o.kind?o.value:o.evaluate(c,h,m,y,w)}}class _o extends ut{possiblyEvaluate(o,c,h,m){if(void 0===o.value)return new ki(this,{kind:"constant",value:void 0},c);if("constant"===o.expression.kind){const y=o.expression.evaluate(c,null,{},h,m),w="resolvedImage"===o.property.specification.type&&"string"!=typeof y?y.name:y,S=this._calculate(w,w,w,c);return new ki(this,{kind:"constant",value:S},c)}if("camera"===o.expression.kind){const y=this._calculate(o.expression.evaluate({zoom:c.zoom-1}),o.expression.evaluate({zoom:c.zoom}),o.expression.evaluate({zoom:c.zoom+1}),c);return new ki(this,{kind:"constant",value:y},c)}return new ki(this,o.expression,c)}evaluate(o,c,h,m,y,w){if("source"===o.kind){const S=o.evaluate(c,h,m,y,w);return this._calculate(S,S,S,c)}return"composite"===o.kind?this._calculate(o.evaluate({zoom:Math.floor(c.zoom)-1},h,m),o.evaluate({zoom:Math.floor(c.zoom)},h,m),o.evaluate({zoom:Math.floor(c.zoom)+1},h,m),c):o.value}_calculate(o,c,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:h,to:c}}interpolate(o){return o}}class zo{constructor(o){this.specification=o}possiblyEvaluate(o,c,h,m){if(void 0!==o.value){if("constant"===o.expression.kind){const y=o.expression.evaluate(c,null,{},h,m);return this._calculate(y,y,y,c)}return this._calculate(o.expression.evaluate(new gn(Math.floor(c.zoom-1),c)),o.expression.evaluate(new gn(Math.floor(c.zoom),c)),o.expression.evaluate(new gn(Math.floor(c.zoom+1),c)),c)}}_calculate(o,c,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:h,to:c}}interpolate(o){return o}}class ja{constructor(o){this.specification=o}possiblyEvaluate(o,c,h,m){return!!o.expression.evaluate(c,null,{},h,m)}interpolate(){return!1}}class Gn{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in o){const h=o[c];h.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new St(h,void 0),y=this.defaultTransitionablePropertyValues[c]=new Ba(h);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate({})}}}Qe("DataDrivenProperty",ut),Qe("DataConstantProperty",rt),Qe("CrossFadedDataDrivenProperty",_o),Qe("CrossFadedProperty",zo),Qe("ColorRampProperty",ja);const $t="-transition";class Lo extends yl{constructor(o,c){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),c.layout&&(this._unevaluatedLayout=new wc(c.layout)),c.paint)){this._transitionablePaint=new yu(c.paint);for(const h in o.paint)this.setPaintProperty(h,o.paint[h],{validate:!1});for(const h in o.layout)this.setLayoutProperty(h,o.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new no(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return"visibility"===o?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,c,h={}){null!=c&&this._validate(Fh,`layers.${this.id}.layout.${o}`,o,c,h)||("visibility"!==o?this._unevaluatedLayout.setValue(o,c):this.visibility=c)}getPaintProperty(o){return o.endsWith($t)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,c,h={}){if(null!=c&&this._validate(mu,`layers.${this.id}.paint.${o}`,o,c,h))return!1;if(o.endsWith($t))return this._transitionablePaint.setTransition(o.slice(0,-11),c||void 0),!1;{const m=this._transitionablePaint._values[o],y="cross-faded-data-driven"===m.property.specification["property-type"],w=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(o,c),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value;return E.isDataDriven()||w||y||this._handleOverridablePaintPropertyUpdate(o,S,E)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,c,h){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||"none"===this.visibility}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,c){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,c)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Yo(o,(c,h)=>!(void 0===c||"layout"===h&&!Object.keys(c).length||"paint"===h&&!Object.keys(c).length))}_validate(o,c,h,m,y={}){return(!y||!1!==y.validate)&&ri(this,o.call(is,{key:c,layerType:this.type,objectKey:h,value:m,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const c=this.paint.get(o);if(c instanceof ki&&Js(c.property.specification)&&("source"===c.value.kind||"composite"===c.value.kind)&&c.value.isStateDependent)return!0}return!1}}const gd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class oa{constructor(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,c){return o._trim(),c&&(o.isTransferred=!0,c.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function An(l,o=1){let c=0,h=0;return{members:l.map(m=>{const y=gd[m.type].BYTES_PER_ELEMENT,w=c=Bo(c,Math.max(o,y)),S=m.components||1;return h=Math.max(h,y),c+=y*S,{name:m.name,type:m.type,components:S,offset:w}}),size:Bo(c,Math.max(h,o)),alignment:o}}function Bo(l,o){return Math.ceil(l/o)*o}class Ds extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,c)}emplace(o,c,h){const m=2*o;return this.int16[m+0]=c,this.int16[m+1]=h,o}}Ds.prototype.bytesPerElement=4,Qe("StructArrayLayout2i4",Ds);class fi extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=3*o;return this.int16[y+0]=c,this.int16[y+1]=h,this.int16[y+2]=m,o}}fi.prototype.bytesPerElement=6,Qe("StructArrayLayout3i6",fi);class Pl extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,h,m)}emplace(o,c,h,m,y){const w=4*o;return this.int16[w+0]=c,this.int16[w+1]=h,this.int16[w+2]=m,this.int16[w+3]=y,o}}Pl.prototype.bytesPerElement=8,Qe("StructArrayLayout4i8",Pl);class cr extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w){const S=this.length;return this.resize(S+1),this.emplace(S,o,c,h,m,y,w)}emplace(o,c,h,m,y,w,S){const E=6*o;return this.int16[E+0]=c,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=y,this.int16[E+4]=w,this.int16[E+5]=S,o}}cr.prototype.bytesPerElement=12,Qe("StructArrayLayout2i4i12",cr);class Ji extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w){const S=this.length;return this.resize(S+1),this.emplace(S,o,c,h,m,y,w)}emplace(o,c,h,m,y,w,S){const E=4*o,I=8*o;return this.int16[E+0]=c,this.int16[E+1]=h,this.uint8[I+4]=m,this.uint8[I+5]=y,this.uint8[I+6]=w,this.uint8[I+7]=S,o}}Ji.prototype.bytesPerElement=8,Qe("StructArrayLayout2i4ub8",Ji);class sa extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,c)}emplace(o,c,h){const m=2*o;return this.float32[m+0]=c,this.float32[m+1]=h,o}}sa.prototype.bytesPerElement=8,Qe("StructArrayLayout2f8",sa);class Is extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,S,E,I,P){const F=this.length;return this.resize(F+1),this.emplace(F,o,c,h,m,y,w,S,E,I,P)}emplace(o,c,h,m,y,w,S,E,I,P,F){const L=10*o;return this.uint16[L+0]=c,this.uint16[L+1]=h,this.uint16[L+2]=m,this.uint16[L+3]=y,this.uint16[L+4]=w,this.uint16[L+5]=S,this.uint16[L+6]=E,this.uint16[L+7]=I,this.uint16[L+8]=P,this.uint16[L+9]=F,o}}Is.prototype.bytesPerElement=20,Qe("StructArrayLayout10ui20",Is);class Rl extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,S,E,I,P,F,L){const j=this.length;return this.resize(j+1),this.emplace(j,o,c,h,m,y,w,S,E,I,P,F,L)}emplace(o,c,h,m,y,w,S,E,I,P,F,L,j){const H=12*o;return this.int16[H+0]=c,this.int16[H+1]=h,this.int16[H+2]=m,this.int16[H+3]=y,this.uint16[H+4]=w,this.uint16[H+5]=S,this.uint16[H+6]=E,this.uint16[H+7]=I,this.int16[H+8]=P,this.int16[H+9]=F,this.int16[H+10]=L,this.int16[H+11]=j,o}}Rl.prototype.bytesPerElement=24,Qe("StructArrayLayout4i4ui4i24",Rl);class Ft extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=3*o;return this.float32[y+0]=c,this.float32[y+1]=h,this.float32[y+2]=m,o}}Ft.prototype.bytesPerElement=12,Qe("StructArrayLayout3f12",Ft);class v extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint32[1*o+0]=c,o}}v.prototype.bytesPerElement=4,Qe("StructArrayLayout1ul4",v);class s extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,S,E,I){const P=this.length;return this.resize(P+1),this.emplace(P,o,c,h,m,y,w,S,E,I)}emplace(o,c,h,m,y,w,S,E,I,P){const F=10*o,L=5*o;return this.int16[F+0]=c,this.int16[F+1]=h,this.int16[F+2]=m,this.int16[F+3]=y,this.int16[F+4]=w,this.int16[F+5]=S,this.uint32[L+3]=E,this.uint16[F+8]=I,this.uint16[F+9]=P,o}}s.prototype.bytesPerElement=20,Qe("StructArrayLayout6i1ul2ui20",s);class d extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w){const S=this.length;return this.resize(S+1),this.emplace(S,o,c,h,m,y,w)}emplace(o,c,h,m,y,w,S){const E=6*o;return this.int16[E+0]=c,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=y,this.int16[E+4]=w,this.int16[E+5]=S,o}}d.prototype.bytesPerElement=12,Qe("StructArrayLayout2i2i2i12",d);class p extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y){const w=this.length;return this.resize(w+1),this.emplace(w,o,c,h,m,y)}emplace(o,c,h,m,y,w){const S=4*o,E=8*o;return this.float32[S+0]=c,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[E+6]=y,this.int16[E+7]=w,o}}p.prototype.bytesPerElement=16,Qe("StructArrayLayout2f1f2i16",p);class g extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,h,m)}emplace(o,c,h,m,y){const w=12*o,S=3*o;return this.uint8[w+0]=c,this.uint8[w+1]=h,this.float32[S+1]=m,this.float32[S+2]=y,o}}g.prototype.bytesPerElement=12,Qe("StructArrayLayout2ub2f12",g);class x extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=3*o;return this.uint16[y+0]=c,this.uint16[y+1]=h,this.uint16[y+2]=m,o}}x.prototype.bytesPerElement=6,Qe("StructArrayLayout3ui6",x);class C extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,S,E,I,P,F,L,j,H,W,J,ne){const le=this.length;return this.resize(le+1),this.emplace(le,o,c,h,m,y,w,S,E,I,P,F,L,j,H,W,J,ne)}emplace(o,c,h,m,y,w,S,E,I,P,F,L,j,H,W,J,ne,le){const oe=24*o,pe=12*o,ge=48*o;return this.int16[oe+0]=c,this.int16[oe+1]=h,this.uint16[oe+2]=m,this.uint16[oe+3]=y,this.uint32[pe+2]=w,this.uint32[pe+3]=S,this.uint32[pe+4]=E,this.uint16[oe+10]=I,this.uint16[oe+11]=P,this.uint16[oe+12]=F,this.float32[pe+7]=L,this.float32[pe+8]=j,this.uint8[ge+36]=H,this.uint8[ge+37]=W,this.uint8[ge+38]=J,this.uint32[pe+10]=ne,this.int16[oe+22]=le,o}}C.prototype.bytesPerElement=48,Qe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class T extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,S,E,I,P,F,L,j,H,W,J,ne,le,oe,pe,ge,Ee,We,nt,Ge,He,Ve,Ke){const je=this.length;return this.resize(je+1),this.emplace(je,o,c,h,m,y,w,S,E,I,P,F,L,j,H,W,J,ne,le,oe,pe,ge,Ee,We,nt,Ge,He,Ve,Ke)}emplace(o,c,h,m,y,w,S,E,I,P,F,L,j,H,W,J,ne,le,oe,pe,ge,Ee,We,nt,Ge,He,Ve,Ke,je){const Re=32*o,lt=16*o;return this.int16[Re+0]=c,this.int16[Re+1]=h,this.int16[Re+2]=m,this.int16[Re+3]=y,this.int16[Re+4]=w,this.int16[Re+5]=S,this.int16[Re+6]=E,this.int16[Re+7]=I,this.uint16[Re+8]=P,this.uint16[Re+9]=F,this.uint16[Re+10]=L,this.uint16[Re+11]=j,this.uint16[Re+12]=H,this.uint16[Re+13]=W,this.uint16[Re+14]=J,this.uint16[Re+15]=ne,this.uint16[Re+16]=le,this.uint16[Re+17]=oe,this.uint16[Re+18]=pe,this.uint16[Re+19]=ge,this.uint16[Re+20]=Ee,this.uint16[Re+21]=We,this.uint16[Re+22]=nt,this.uint32[lt+12]=Ge,this.float32[lt+13]=He,this.float32[lt+14]=Ve,this.uint16[Re+30]=Ke,this.uint16[Re+31]=je,o}}T.prototype.bytesPerElement=64,Qe("StructArrayLayout8i15ui1ul2f2ui64",T);class M extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.float32[1*o+0]=c,o}}M.prototype.bytesPerElement=4,Qe("StructArrayLayout1f4",M);class A extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=3*o;return this.uint16[6*o+0]=c,this.float32[y+1]=h,this.float32[y+2]=m,o}}A.prototype.bytesPerElement=12,Qe("StructArrayLayout1ui2f12",A);class R extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=4*o;return this.uint32[2*o+0]=c,this.uint16[y+2]=h,this.uint16[y+3]=m,o}}R.prototype.bytesPerElement=8,Qe("StructArrayLayout1ul2ui8",R);class O extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,c)}emplace(o,c,h){const m=2*o;return this.uint16[m+0]=c,this.uint16[m+1]=h,o}}O.prototype.bytesPerElement=4,Qe("StructArrayLayout2ui4",O);class V extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint16[1*o+0]=c,o}}V.prototype.bytesPerElement=2,Qe("StructArrayLayout1ui2",V);class Z extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,h,m)}emplace(o,c,h,m,y){const w=4*o;return this.float32[w+0]=c,this.float32[w+1]=h,this.float32[w+2]=m,this.float32[w+3]=y,o}}Z.prototype.bytesPerElement=16,Qe("StructArrayLayout4f16",Z);class q extends oa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ct(this.anchorPointX,this.anchorPointY)}}q.prototype.size=20;class Q extends s{get(o){return new q(this,o)}}Qe("CollisionBoxArray",Q);class $ extends oa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}$.prototype.size=48;class ae extends C{get(o){return new $(this,o)}}Qe("PlacedSymbolArray",ae);class fe extends oa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}fe.prototype.size=64;class te extends T{get(o){return new fe(this,o)}}Qe("SymbolInstanceArray",te);class de extends M{getoffsetX(o){return this.float32[1*o+0]}}Qe("GlyphOffsetArray",de);class _e extends fi{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}Qe("SymbolLineVertexArray",_e);class ve extends oa{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Ce extends A{get(o){return new ve(this,o)}}Qe("TextAnchorOffsetArray",Ce);class Ae extends oa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ae.prototype.size=8;class Ie extends R{get(o){return new Ae(this,o)}}Qe("FeatureIndexArray",Ie);class Le extends Ds{}class $e extends Ds{}class Nt extends Ds{}class Ne extends cr{}class ht extends Ji{}class ot extends sa{}class _n extends Is{}class zt extends Rl{}class Tt extends Ft{}class Bt extends v{}class Yn extends d{}class Sn extends g{}class Vi extends x{}class Si extends O{}const di=An([{name:"a_pos",components:2,type:"Int16"}],4),{members:dr}=di;class vn{constructor(o=[]){this.segments=o}prepareSegment(o,c,h,m){let y=this.segments[this.segments.length-1];return o>vn.MAX_VERTEX_ARRAY_LENGTH&&Zi(`Max vertices per segment is ${vn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!y||y.vertexLength+o>vn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:c.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},void 0!==m&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const o of this.segments)for(const c in o.vaos)o.vaos[c].destroy()}static simpleSegment(o,c,h,m){return new vn([{vertexOffset:o,primitiveOffset:c,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Dr(l,o){return 256*(l=Qo(Math.floor(l),0,255))+Qo(Math.floor(o),0,255)}vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qe("SegmentVector",vn);const Vo=An([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ha={exports:{}},er=function(l,o){var c,h,m,y,w,S,E,I;for(h=l.length-(c=3&l.length),m=o,w=3432918353,S=461845907,I=0;I<h;)E=255&l.charCodeAt(I)|(255&l.charCodeAt(++I))<<8|(255&l.charCodeAt(++I))<<16|(255&l.charCodeAt(++I))<<24,++I,m=27492+(65535&(y=5*(65535&(m=(m^=E=(65535&(E=(E=(65535&E)*w+(((E>>>16)*w&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(E=0,c){case 3:E^=(255&l.charCodeAt(I+2))<<16;case 2:E^=(255&l.charCodeAt(I+1))<<8;case 1:m^=E=(65535&(E=(E=(65535&(E^=255&l.charCodeAt(I)))*w+(((E>>>16)*w&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295}return m^=l.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0},Hr=function(l,o){for(var c,h=l.length,m=o^h,y=0;h>=4;)c=1540483477*(65535&(c=255&l.charCodeAt(y)|(255&l.charCodeAt(++y))<<8|(255&l.charCodeAt(++y))<<16|(255&l.charCodeAt(++y))<<24))+((1540483477*(c>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:m^=(255&l.charCodeAt(y+2))<<16;case 2:m^=(255&l.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&l.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};Ha.exports=er,Ha.exports.murmur3=er,Ha.exports.murmur2=Hr;var aa=be(Ha.exports);class Jn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,c,h,m){this.ids.push(Pi(o)),this.positions.push(c,h,m)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Pi(o);let h=0,m=this.ids.length-1;for(;h<m;){const w=h+m>>1;this.ids[w]>=c?m=w:h=w+1}const y=[];for(;this.ids[h]===c;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(o,c){const h=new Float64Array(o.ids),m=new Uint32Array(o.positions);return hr(h,m,0,h.length-1),c&&c.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(o){const c=new Jn;return c.ids=o.ids,c.positions=o.positions,c.indexed=!0,c}}function Pi(l){const o=+l;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:aa(String(l))}function hr(l,o,c,h){for(;c<h;){const m=l[c+h>>1];let y=c-1,w=h+1;for(;;){do{y++}while(l[y]<m);do{w--}while(l[w]>m);if(y>=w)break;gi(l,y,w),gi(o,3*y,3*w),gi(o,3*y+1,3*w+1),gi(o,3*y+2,3*w+2)}w-c<h-w?(hr(l,o,c,w),c=w+1):(hr(l,o,w+1,h),h=w)}}function gi(l,o,c){const h=l[o];l[o]=l[c],l[c]=h}Qe("FeaturePositionMap",Jn);class Fl{constructor(o,c){this.gl=o.gl,this.location=c}}class _d extends Fl{constructor(o,c){super(o,c),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class bu extends Fl{constructor(o,c){super(o,c),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class xu extends Fl{constructor(o,c){super(o,c),this.current=on.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const vm=new Float32Array(16);function wu(l){return[Dr(255*l.r,255*l.g),Dr(255*l.b,255*l.a)]}class rs{constructor(o,c,h){this.value=o,this.uniformNames=c.map(m=>`u_${m}`),this.type=h}setUniform(o,c,h){o.set(h.constantOr(this.value))}getBinding(o,c,h){return"color"===this.type?new xu(o,c):new _d(o,c)}}class la{constructor(o,c){this.uniformNames=c.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=o.tlbr}setUniform(o,c,h,m){const y="u_pattern_to"===m?this.patternTo:"u_pattern_from"===m?this.patternFrom:"u_pixel_ratio_to"===m?this.pixelRatioTo:"u_pixel_ratio_from"===m?this.pixelRatioFrom:null;y&&o.set(y)}getBinding(o,c,h){return"u_pattern"===h.substr(0,9)?new bu(o,c):new _d(o,c)}}class os{constructor(o,c,h,m){this.expression=o,this.type=h,this.maxValue=0,this.paintVertexAttributes=c.map(y=>({name:`a_${y}`,type:"Float32",components:"color"===h?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(o,c,h,m,y){const w=this.paintVertexArray.length,S=this.expression.evaluate(new gn(0),c,{},m,[],y);this.paintVertexArray.resize(o),this._setPaintValue(w,o,S)}updatePaintArray(o,c,h,m){const y=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(o,c,y)}_setPaintValue(o,c,h){if("color"===this.type){const m=wu(h);for(let y=o;y<c;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=o;m<c;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class io{constructor(o,c,h,m,y,w){this.expression=o,this.uniformNames=c.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=c.map(S=>({name:`a_${S}`,type:"Float32",components:"color"===h?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,c,h,m,y){const w=this.expression.evaluate(new gn(this.zoom),c,{},m,[],y),S=this.expression.evaluate(new gn(this.zoom+1),c,{},m,[],y),E=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(E,o,w,S)}updatePaintArray(o,c,h,m){const y=this.expression.evaluate({zoom:this.zoom},h,m),w=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(o,c,y,w)}_setPaintValue(o,c,h,m){if("color"===this.type){const y=wu(h),w=wu(m);for(let S=o;S<c;S++)this.paintVertexArray.emplace(S,y[0],y[1],w[0],w[1])}else{for(let y=o;y<c;y++)this.paintVertexArray.emplace(y,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,c){const h=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,m=Qo(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);o.set(m)}getBinding(o,c,h){return new _d(o,c)}}class ss{constructor(o,c,h,m,y,w){this.expression=o,this.type=c,this.useIntegerZoom=h,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(o,c,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(m,o,c.patterns&&c.patterns[this.layerId],h)}updatePaintArray(o,c,h,m,y){this._setPaintValues(o,c,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(o,c,h,m){if(!m||!h)return;const{min:y,mid:w,max:S}=h,E=m[y],I=m[w],P=m[S];if(E&&I&&P)for(let F=o;F<c;F++)this.zoomInPaintVertexArray.emplace(F,I.tl[0],I.tl[1],I.br[0],I.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],I.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(F,I.tl[0],I.tl[1],I.br[0],I.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],I.pixelRatio,P.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Vo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Vo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Nh{constructor(o,c,h){this.binders={},this._buffers=[];const m=[];for(const y in o.paint._values){if(!h(y))continue;const w=o.paint.get(y);if(!(w instanceof ki&&Js(w.property.specification)))continue;const S=vo(y,o.type),E=w.value,I=w.property.specification.type,P=w.property.useIntegerZoom,F=w.property.specification["property-type"],L="cross-faded"===F||"cross-faded-data-driven"===F;if("constant"===E.kind)this.binders[y]=L?new la(E.value,S):new rs(E.value,S,I),m.push(`/u_${y}`);else if("source"===E.kind||L){const j=ym(y,I,"source");this.binders[y]=L?new ss(E,I,P,c,j,o.id):new os(E,S,I,j),m.push(`/a_${y}`)}else{const j=ym(y,I,"composite");this.binders[y]=new io(E,S,I,P,c,j),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(o){const c=this.binders[o];return c instanceof os||c instanceof io?c.maxValue:0}populatePaintArrays(o,c,h,m,y){for(const w in this.binders){const S=this.binders[w];(S instanceof os||S instanceof io||S instanceof ss)&&S.populatePaintArray(o,c,h,m,y)}}setConstantPatternPositions(o,c){for(const h in this.binders){const m=this.binders[h];m instanceof la&&m.setConstantPatternPositions(o,c)}}updatePaintArrays(o,c,h,m,y){let w=!1;for(const S in o){const E=c.getPositions(S);for(const I of E){const P=h.feature(I.index);for(const F in this.binders){const L=this.binders[F];if((L instanceof os||L instanceof io||L instanceof ss)&&!0===L.expression.isStateDependent){const j=m.paint.get(F);L.expression=j.value,L.updatePaintArray(I.start,I.end,P,o[S],y),w=!0}}}}return w}defines(){const o=[];for(const c in this.binders){const h=this.binders[c];(h instanceof rs||h instanceof la)&&o.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return o}getBinderAttributes(){const o=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof os||h instanceof io)for(let m=0;m<h.paintVertexAttributes.length;m++)o.push(h.paintVertexAttributes[m].name);else if(h instanceof ss)for(let m=0;m<Vo.members.length;m++)o.push(Vo.members[m].name)}return o}getBinderUniforms(){const o=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof rs||h instanceof la||h instanceof io)for(const m of h.uniformNames)o.push(m)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,c){const h=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof rs||y instanceof la||y instanceof io)for(const w of y.uniformNames)if(c[w]){const S=y.getBinding(o,c[w],w);h.push({name:w,property:m,binding:S})}}return h}setUniforms(o,c,h,m){for(const{name:y,property:w,binding:S}of c)this.binders[w].setUniform(S,m,h.get(w),y)}updatePaintBuffers(o){this._buffers=[];for(const c in this.binders){const h=this.binders[c];if(o&&h instanceof ss){const m=2===o.fromScale?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof os||h instanceof io)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(o){for(const c in this.binders){const h=this.binders[c];(h instanceof os||h instanceof io||h instanceof ss)&&h.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const c=this.binders[o];(c instanceof os||c instanceof io||c instanceof ss)&&c.destroy()}}}class As{constructor(o,c,h=(()=>!0)){this.programConfigurations={};for(const m of o)this.programConfigurations[m.id]=new Nh(m,c,h);this.needsUpload=!1,this._featureMap=new Jn,this._bufferOffset=0}populatePaintArrays(o,c,h,m,y,w){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(o,c,m,y,w);void 0!==c.id&&this._featureMap.add(c.id,h,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,c,h,m){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(o,this._featureMap,c,y,m)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function vo(l,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${o}-`,"").replace(/-/g,"_")]}function ym(l,o,c){const m={"line-pattern":{source:_n,composite:_n},"fill-pattern":{source:_n,composite:_n},"fill-extrusion-pattern":{source:_n,composite:_n}}[l];return m&&m[c]||{color:{source:sa,composite:Z},number:{source:M,composite:sa}}[o][c]}Qe("ConstantBinder",rs),Qe("CrossFadedConstantBinder",la),Qe("SourceExpressionBinder",os),Qe("CrossFadedCompositeBinder",ss),Qe("CompositeExpressionBinder",io),Qe("ProgramConfiguration",Nh,{omit:["_buffers"]}),Qe("ProgramConfigurationSet",As);const Ci=8192,bm=Math.pow(2,14)-1,xm=-bm-1;function Nl(l){const o=Ci/l.extent,c=l.loadGeometry();for(let h=0;h<c.length;h++){const m=c[h];for(let y=0;y<m.length;y++){const w=m[y],S=Math.round(w.x*o),E=Math.round(w.y*o);w.x=Qo(S,xm,bm),w.y=Qo(E,xm,bm),(S<w.x||S>w.x+1||E<w.y||E>w.y+1)&&Zi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function Sc(l,o){return{type:l.type,id:l.id,properties:l.properties,geometry:o?Nl(l):[]}}function vd(l,o,c,h,m){l.emplaceBack(2*o+(h+1)/2,2*c+(m+1)/2)}class wm{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new $e,this.indexArray=new Vi,this.segments=new vn,this.programConfigurations=new As(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,h){const m=this.layers[0],y=[];let w=null,S=!1;"circle"===m.type&&(w=m.layout.get("circle-sort-key"),S=!w.isConstant());for(const{feature:E,id:I,index:P,sourceLayerIndex:F}of o){const L=this.layers[0]._featureFilter.needGeometry,j=Sc(E,L);if(!this.layers[0]._featureFilter.filter(new gn(this.zoom),j,h))continue;const H=S?w.evaluate(j,{},h):void 0,W={id:I,properties:E.properties,type:E.type,sourceLayerIndex:F,index:P,geometry:L?j.geometry:Nl(E),patterns:{},sortKey:H};y.push(W)}S&&y.sort((E,I)=>E.sortKey-I.sortKey);for(const E of y){const{geometry:I,index:P,sourceLayerIndex:F}=E,L=o[P].feature;this.addFeature(E,I,P,h),c.featureIndex.insert(L,I,P,F,this.index)}}update(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,dr),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,c,h,m){for(const y of c)for(const w of y){const S=w.x,E=w.y;if(S<0||S>=Ci||E<0||E>=Ci)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),P=I.vertexLength;vd(this.layoutVertexArray,S,E,-1,-1),vd(this.layoutVertexArray,S,E,1,-1),vd(this.layoutVertexArray,S,E,1,1),vd(this.layoutVertexArray,S,E,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+3,P+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,{},m)}}function Ps(l,o){for(let c=0;c<l.length;c++)if(Rs(o,l[c]))return!0;for(let c=0;c<o.length;c++)if(Rs(l,o[c]))return!0;return!!ku(l,o)}function Og(l,o,c){return!!Rs(l,o)||!!Ur(o,l,c)}function km(l,o){if(1===l.length)return Sm(o,l[0]);for(let c=0;c<o.length;c++){const h=o[c];for(let m=0;m<h.length;m++)if(Rs(l,h[m]))return!0}for(let c=0;c<l.length;c++)if(Sm(o,l[c]))return!0;for(let c=0;c<o.length;c++)if(ku(l,o[c]))return!0;return!1}function ei(l,o,c){if(l.length>1){if(ku(l,o))return!0;for(let h=0;h<o.length;h++)if(Ur(o[h],l,c))return!0}for(let h=0;h<l.length;h++)if(Ur(l[h],o,c))return!0;return!1}function ku(l,o){if(0===l.length||0===o.length)return!1;for(let c=0;c<l.length-1;c++){const h=l[c],m=l[c+1];for(let y=0;y<o.length-1;y++)if(zh(h,m,o[y],o[y+1]))return!0}return!1}function zh(l,o,c,h){return Xr(l,c,h)!==Xr(o,c,h)&&Xr(l,o,c)!==Xr(l,o,h)}function Ur(l,o,c){const h=c*c;if(1===o.length)return l.distSqr(o[0])<h;for(let m=1;m<o.length;m++)if(Fg(l,o[m-1],o[m])<h)return!0;return!1}function Fg(l,o,c){const h=o.distSqr(c);if(0===h)return l.distSqr(o);const m=((l.x-o.x)*(c.x-o.x)+(l.y-o.y)*(c.y-o.y))/h;return l.distSqr(m<0?o:m>1?c:c.sub(o)._mult(m)._add(o))}function Sm(l,o){let c,h,m,y=!1;for(let w=0;w<l.length;w++){c=l[w];for(let S=0,E=c.length-1;S<c.length;E=S++)h=c[S],m=c[E],h.y>o.y!=m.y>o.y&&o.x<(m.x-h.x)*(o.y-h.y)/(m.y-h.y)+h.x&&(y=!y)}return y}function Rs(l,o){let c=!1;for(let h=0,m=l.length-1;h<l.length;m=h++){const y=l[h],w=l[m];y.y>o.y!=w.y>o.y&&o.x<(w.x-y.x)*(o.y-y.y)/(w.y-y.y)+y.x&&(c=!c)}return c}function jo(l,o,c){const h=c[0],m=c[2];if(l.x<h.x&&o.x<h.x||l.x>m.x&&o.x>m.x||l.y<h.y&&o.y<h.y||l.y>m.y&&o.y>m.y)return!1;const y=Xr(l,o,c[0]);return y!==Xr(l,o,c[1])||y!==Xr(l,o,c[2])||y!==Xr(l,o,c[3])}function Su(l,o,c){const h=o.paint.get(l).value;return"constant"===h.kind?h.value:c.programConfigurations.get(o.id).getMaxValue(l)}function Lh(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Bh(l,o,c,h,m){if(!o[0]&&!o[1])return l;const y=ct.convert(o)._mult(m);"viewport"===c&&y._rotate(-h);const w=[];for(let S=0;S<l.length;S++)w.push(l[S].sub(y));return w}let Ua,Cm;Qe("CircleBucket",wm,{omit:["layers"]});var Gy={get paint(){return Cm=Cm||new Gn({"circle-radius":new ut(ke.paint_circle["circle-radius"]),"circle-color":new ut(ke.paint_circle["circle-color"]),"circle-blur":new ut(ke.paint_circle["circle-blur"]),"circle-opacity":new ut(ke.paint_circle["circle-opacity"]),"circle-translate":new rt(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new rt(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new rt(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new rt(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ut(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ut(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ut(ke.paint_circle["circle-stroke-opacity"])})},get layout(){return Ua=Ua||new Gn({"circle-sort-key":new ut(ke.layout_circle["circle-sort-key"])})}},Ir=1e-6,Cc=typeof Float32Array<"u"?Float32Array:Array;function Vh(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Ng(l,o,c){var h=o[0],m=o[1],y=o[2],w=o[3],S=o[4],E=o[5],I=o[6],P=o[7],F=o[8],L=o[9],j=o[10],H=o[11],W=o[12],J=o[13],ne=o[14],le=o[15],oe=c[0],pe=c[1],ge=c[2],Ee=c[3];return l[0]=oe*h+pe*S+ge*F+Ee*W,l[1]=oe*m+pe*E+ge*L+Ee*J,l[2]=oe*y+pe*I+ge*j+Ee*ne,l[3]=oe*w+pe*P+ge*H+Ee*le,l[4]=(oe=c[4])*h+(pe=c[5])*S+(ge=c[6])*F+(Ee=c[7])*W,l[5]=oe*m+pe*E+ge*L+Ee*J,l[6]=oe*y+pe*I+ge*j+Ee*ne,l[7]=oe*w+pe*P+ge*H+Ee*le,l[8]=(oe=c[8])*h+(pe=c[9])*S+(ge=c[10])*F+(Ee=c[11])*W,l[9]=oe*m+pe*E+ge*L+Ee*J,l[10]=oe*y+pe*I+ge*j+Ee*ne,l[11]=oe*w+pe*P+ge*H+Ee*le,l[12]=(oe=c[12])*h+(pe=c[13])*S+(ge=c[14])*F+(Ee=c[15])*W,l[13]=oe*m+pe*E+ge*L+Ee*J,l[14]=oe*y+pe*I+ge*j+Ee*ne,l[15]=oe*w+pe*P+ge*H+Ee*le,l}Math.hypot||(Math.hypot=function(){for(var l=0,o=arguments.length;o--;)l+=arguments[o]*arguments[o];return Math.sqrt(l)});var yt,zg=Ng;function Tm(l,o,c){var h=o[0],m=o[1],y=o[2],w=o[3];return l[0]=c[0]*h+c[4]*m+c[8]*y+c[12]*w,l[1]=c[1]*h+c[5]*m+c[9]*y+c[13]*w,l[2]=c[2]*h+c[6]*m+c[10]*y+c[14]*w,l[3]=c[3]*h+c[7]*m+c[11]*y+c[15]*w,l}yt=new Cc(4),Cc!=Float32Array&&(yt[0]=0,yt[1]=0,yt[2]=0,yt[3]=0);class $y extends Lo{constructor(o){super(o,Gy)}createBucket(o){return new wm(o)}queryRadius(o){const c=o;return Su("circle-radius",this,c)+Su("circle-stroke-width",this,c)+Lh(this.paint.get("circle-translate"))}queryIntersectsFeature(o,c,h,m,y,w,S,E){const I=Bh(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,S),P=this.paint.get("circle-radius").evaluate(c,h)+this.paint.get("circle-stroke-width").evaluate(c,h),F="map"===this.paint.get("circle-pitch-alignment"),L=F?I:(W=E,I.map(J=>Lg(J,W))),j=F?P*S:P;var W;for(const H of m)for(const W of H){const J=F?W:Lg(W,E);let ne=j;const le=Tm([],[W.x,W.y,0,1],E);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ne*=le[3]/w.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ne*=w.cameraToCenterDistance/le[3]),Og(L,J,ne))return!0}return!1}}function Lg(l,o){const c=Tm([],[l.x,l.y,0,1],o);return new ct(c[0]/c[3],c[1]/c[3])}class Bg extends wm{}let Em;Qe("HeatmapBucket",Bg,{omit:["layers"]});var yd={get paint(){return Em=Em||new Gn({"heatmap-radius":new ut(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ut(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new rt(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ja(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new rt(ke.paint_heatmap["heatmap-opacity"])})}};function Mm(l,{width:o,height:c},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==o*c*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${o*c*h}`)}else m=new Uint8Array(o*c*h);return l.width=o,l.height=c,l.data=m,l}function Vg(l,{width:o,height:c},h){if(o===l.width&&c===l.height)return;const m=Mm({},{width:o,height:c},h);Dm(l,m,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,o),height:Math.min(l.height,c)},h),l.width=o,l.height=c,l.data=m.data}function Dm(l,o,c,h,m,y){if(0===m.width||0===m.height)return o;if(m.width>l.width||m.height>l.height||c.x>l.width-m.width||c.y>l.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>o.width||m.height>o.height||h.x>o.width-m.width||h.y>o.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=l.data,S=o.data;if(w===S)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<m.height;E++){const I=((c.y+E)*l.width+c.x)*y,P=((h.y+E)*o.width+h.x)*y;for(let F=0;F<m.width*y;F++)S[P+F]=w[I+F]}return o}class Cu{constructor(o,c){Mm(this,o,1,c)}resize(o){Vg(this,o,1)}clone(){return new Cu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,h,m,y){Dm(o,c,h,m,y,1)}}class Ho{constructor(o,c){Mm(this,o,4,c)}resize(o){Vg(this,o,4)}replace(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Ho({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,h,m,y){Dm(o,c,h,m,y,4)}}function Pe(l){const o={},c=l.resolution||256,h=l.clips?l.clips.length:1,m=l.image||new Ho({width:c,height:h});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const y=(w,S,E)=>{o[l.evaluationKey]=E;const I=l.expression.evaluate(o);m.data[w+S+0]=Math.floor(255*I.r/I.a),m.data[w+S+1]=Math.floor(255*I.g/I.a),m.data[w+S+2]=Math.floor(255*I.b/I.a),m.data[w+S+3]=Math.floor(255*I.a)};if(l.clips)for(let w=0,S=0;w<h;++w,S+=4*c)for(let E=0,I=0;E<c;E++,I+=4){const P=E/(c-1),{start:F,end:L}=l.clips[w];y(S,I,F*(1-P)+L*P)}else for(let w=0,S=0;w<c;w++,S+=4)y(0,S,w/(c-1));return m}Qe("AlphaImage",Cu),Qe("RGBAImage",Ho);class pn extends Lo{createBucket(o){return new Bg(o)}constructor(o){super(o,yd),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Pe({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Ga;var zl={get paint(){return Ga=Ga||new Gn({"hillshade-illumination-direction":new rt(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new rt(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new rt(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new rt(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new rt(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new rt(ke.paint_hillshade["hillshade-accent-color"])})}};class Ar extends Lo{constructor(o){super(o,zl)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const jg=An([{name:"a_pos",components:2,type:"Int16"}],4),{members:Tu}=jg;var as={exports:{}};function bd(l,o,c){c=c||2;var h,m,y,w,S,E,I,P=o&&o.length,F=P?o[0]*c:l.length,L=jh(l,0,F,c,!0),j=[];if(!L||L.next===L.prev)return j;if(P&&(L=function(W,J,ne,le){var oe,pe,ge,Ee=[];for(oe=0,pe=J.length;oe<pe;oe++)(ge=jh(W,J[oe]*le,oe<pe-1?J[oe+1]*le:W.length,le,!1))===ge.next&&(ge.steiner=!0),Ee.push(qy(ge));for(Ee.sort(xd),oe=0;oe<Ee.length;oe++)ne=Wa(Ee[oe],ne);return ne}(l,o,L,c)),l.length>80*c){h=y=l[0],m=w=l[1];for(var H=c;H<F;H+=c)(S=l[H])<h&&(h=S),(E=l[H+1])<m&&(m=E),S>y&&(y=S),E>w&&(w=E);I=0!==(I=Math.max(y-h,w-m))?32767/I:0}return Hh(L,j,c,h,m,I,0),j}function jh(l,o,c,h,m){var y,w;if(m===Du(l,o,c,h)>0)for(y=o;y<c;y+=h)w=Pm(y,l[y],l[y+1],w);else for(y=c-h;y>=o;y-=h)w=Pm(y,l[y],l[y+1],w);return w&&Eu(w,w.next)&&(kd(w),w=w.next),w}function Tc(l,o){if(!l)return l;o||(o=l);var c,h=l;do{if(c=!1,h.steiner||!Eu(h,h.next)&&0!==oi(h.prev,h,h.next))h=h.next;else{if(kd(h),(h=o=h.prev)===h.next)break;c=!0}}while(c||h!==o);return o}function Hh(l,o,c,h,m,y,w){if(l){!w&&y&&function(P,F,L,j){var H=P;do{0===H.z&&(H.z=Uh(H.x,H.y,F,L,j)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next}while(H!==P);H.prevZ.nextZ=null,H.prevZ=null,function(W){var J,ne,le,oe,pe,ge,Ee,We,nt=1;do{for(ne=W,W=null,pe=null,ge=0;ne;){for(ge++,le=ne,Ee=0,J=0;J<nt&&(Ee++,le=le.nextZ);J++);for(We=nt;Ee>0||We>0&&le;)0!==Ee&&(0===We||!le||ne.z<=le.z)?(oe=ne,ne=ne.nextZ,Ee--):(oe=le,le=le.nextZ,We--),pe?pe.nextZ=oe:W=oe,oe.prevZ=pe,pe=oe;ne=le}pe.nextZ=null,nt*=2}while(ge>1)}(H)}(l,h,m,y);for(var S,E,I=l;l.prev!==l.next;)if(S=l.prev,E=l.next,y?ro(l,h,m,y):Hg(l))o.push(S.i/c|0),o.push(l.i/c|0),o.push(E.i/c|0),kd(l),l=E.next,I=E.next;else if((l=E)===I){w?1===w?Hh(l=$a(Tc(l),o,c),o,c,h,m,y,2):2===w&&Ug(l,o,c,h,m,y):Hh(Tc(l),o,c,h,m,y,1);break}}}function Hg(l){var o=l.prev,c=l,h=l.next;if(oi(o,c,h)>=0)return!1;for(var m=o.x,y=c.x,w=h.x,S=o.y,E=c.y,I=h.y,P=m<y?m<w?m:w:y<w?y:w,F=S<E?S<I?S:I:E<I?E:I,L=m>y?m>w?m:w:y>w?y:w,j=S>E?S>I?S:I:E>I?E:I,H=h.next;H!==o;){if(H.x>=P&&H.x<=L&&H.y>=F&&H.y<=j&&wd(m,S,y,E,w,I,H.x,H.y)&&oi(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function ro(l,o,c,h){var m=l.prev,y=l,w=l.next;if(oi(m,y,w)>=0)return!1;for(var S=m.x,E=y.x,I=w.x,P=m.y,F=y.y,L=w.y,j=S<E?S<I?S:I:E<I?E:I,H=P<F?P<L?P:L:F<L?F:L,W=S>E?S>I?S:I:E>I?E:I,J=P>F?P>L?P:L:F>L?F:L,ne=Uh(j,H,o,c,h),le=Uh(W,J,o,c,h),oe=l.prevZ,pe=l.nextZ;oe&&oe.z>=ne&&pe&&pe.z<=le;){if(oe.x>=j&&oe.x<=W&&oe.y>=H&&oe.y<=J&&oe!==m&&oe!==w&&wd(S,P,E,F,I,L,oe.x,oe.y)&&oi(oe.prev,oe,oe.next)>=0||(oe=oe.prevZ,pe.x>=j&&pe.x<=W&&pe.y>=H&&pe.y<=J&&pe!==m&&pe!==w&&wd(S,P,E,F,I,L,pe.x,pe.y)&&oi(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;oe&&oe.z>=ne;){if(oe.x>=j&&oe.x<=W&&oe.y>=H&&oe.y<=J&&oe!==m&&oe!==w&&wd(S,P,E,F,I,L,oe.x,oe.y)&&oi(oe.prev,oe,oe.next)>=0)return!1;oe=oe.prevZ}for(;pe&&pe.z<=le;){if(pe.x>=j&&pe.x<=W&&pe.y>=H&&pe.y<=J&&pe!==m&&pe!==w&&wd(S,P,E,F,I,L,pe.x,pe.y)&&oi(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function $a(l,o,c){var h=l;do{var m=h.prev,y=h.next.next;!Eu(m,y)&&Gh(m,h,h.next,y)&&Ec(m,y)&&Ec(y,m)&&(o.push(m.i/c|0),o.push(h.i/c|0),o.push(y.i/c|0),kd(h),kd(h.next),h=l=y),h=h.next}while(h!==l);return Tc(h)}function Ug(l,o,c,h,m,y){var w=l;do{for(var S=w.next.next;S!==w.prev;){if(w.i!==S.i&&Im(w,S)){var E=Am(w,S);return w=Tc(w,w.next),E=Tc(E,E.next),Hh(w,o,c,h,m,y,0),void Hh(E,o,c,h,m,y,0)}S=S.next}w=w.next}while(w!==l)}function xd(l,o){return l.x-o.x}function Wa(l,o){var c=function(m,y){var w,S=y,E=m.x,I=m.y,P=-1/0;do{if(I<=S.y&&I>=S.next.y&&S.next.y!==S.y){var F=S.x+(I-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(F<=E&&F>P&&(P=F,w=S.x<S.next.x?S:S.next,F===E))return w}S=S.next}while(S!==y);if(!w)return null;var L,j=w,H=w.x,W=w.y,J=1/0;S=w;do{E>=S.x&&S.x>=H&&E!==S.x&&wd(I<W?E:P,I,H,W,I<W?P:E,I,S.x,S.y)&&(L=Math.abs(I-S.y)/(E-S.x),Ec(S,m)&&(L<J||L===J&&(S.x>w.x||S.x===w.x&&Wy(w,S)))&&(w=S,J=L)),S=S.next}while(S!==j);return w}(l,o);if(!c)return o;var h=Am(c,l);return Tc(h,h.next),Tc(c,c.next)}function Wy(l,o){return oi(l.prev,l,o.prev)<0&&oi(o.next,l,l.next)<0}function Uh(l,o,c,h,m){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-c)*m|0)|l<<8))|l<<4))|l<<2))|l<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-h)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function qy(l){var o=l,c=l;do{(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next}while(o!==l);return c}function wd(l,o,c,h,m,y,w,S){return(m-w)*(o-S)>=(l-w)*(y-S)&&(l-w)*(h-S)>=(c-w)*(o-S)&&(c-w)*(y-S)>=(m-w)*(h-S)}function Im(l,o){return l.next.i!==o.i&&l.prev.i!==o.i&&!function(c,h){var m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==h.i&&m.next.i!==h.i&&Gh(m,m.next,c,h))return!0;m=m.next}while(m!==c);return!1}(l,o)&&(Ec(l,o)&&Ec(o,l)&&function(c,h){var m=c,y=!1,w=(c.x+h.x)/2,S=(c.y+h.y)/2;do{m.y>S!=m.next.y>S&&m.next.y!==m.y&&w<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next}while(m!==c);return y}(l,o)&&(oi(l.prev,l,o.prev)||oi(l,o.prev,o))||Eu(l,o)&&oi(l.prev,l,l.next)>0&&oi(o.prev,o,o.next)>0)}function oi(l,o,c){return(o.y-l.y)*(c.x-o.x)-(o.x-l.x)*(c.y-o.y)}function Eu(l,o){return l.x===o.x&&l.y===o.y}function Gh(l,o,c,h){var m=Mu(oi(l,o,c)),y=Mu(oi(l,o,h)),w=Mu(oi(c,h,l)),S=Mu(oi(c,h,o));return m!==y&&w!==S||!(0!==m||!$h(l,c,o))||!(0!==y||!$h(l,h,o))||!(0!==w||!$h(c,l,h))||!(0!==S||!$h(c,o,h))}function $h(l,o,c){return o.x<=Math.max(l.x,c.x)&&o.x>=Math.min(l.x,c.x)&&o.y<=Math.max(l.y,c.y)&&o.y>=Math.min(l.y,c.y)}function Mu(l){return l>0?1:l<0?-1:0}function Ec(l,o){return oi(l.prev,l,l.next)<0?oi(l,o,l.next)>=0&&oi(l,l.prev,o)>=0:oi(l,o,l.prev)<0||oi(l,l.next,o)<0}function Am(l,o){var c=new Wh(l.i,l.x,l.y),h=new Wh(o.i,o.x,o.y),m=l.next,y=o.prev;return l.next=o,o.prev=l,c.next=m,m.prev=c,h.next=c,c.prev=h,y.next=h,h.prev=y,h}function Pm(l,o,c,h){var m=new Wh(l,o,c);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function kd(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Wh(l,o,c){this.i=l,this.x=o,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Du(l,o,c,h){for(var m=0,y=o,w=c-h;y<c;y+=h)m+=(l[w]-l[y])*(l[y+1]+l[w+1]),w=y;return m}as.exports=bd,as.exports.default=bd,bd.deviation=function(l,o,c,h){var m=o&&o.length,y=Math.abs(Du(l,0,m?o[0]*c:l.length,c));if(m)for(var w=0,S=o.length;w<S;w++)y-=Math.abs(Du(l,o[w]*c,w<S-1?o[w+1]*c:l.length,c));var E=0;for(w=0;w<h.length;w+=3){var I=h[w]*c,P=h[w+1]*c,F=h[w+2]*c;E+=Math.abs((l[I]-l[F])*(l[P+1]-l[I+1])-(l[I]-l[P])*(l[F+1]-l[I+1]))}return 0===y&&0===E?0:Math.abs((E-y)/y)},bd.flatten=function(l){for(var o=l[0][0].length,c={vertices:[],holes:[],dimensions:o},h=0,m=0;m<l.length;m++){for(var y=0;y<l[m].length;y++)for(var w=0;w<o;w++)c.vertices.push(l[m][y][w]);m>0&&c.holes.push(h+=l[m-1].length)}return c};var Gg=be(as.exports);function Zy(l,o,c,h,m){Gr(l,o,c||0,h||l.length-1,m||_i)}function Gr(l,o,c,h,m){for(;h>c;){if(h-c>600){var y=h-c+1,w=o-c+1,S=Math.log(y),E=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*E*(y-E)/y)*(w-y/2<0?-1:1);Gr(l,o,Math.max(c,Math.floor(o-w*E/y+I)),Math.min(h,Math.floor(o+(y-w)*E/y+I)),m)}var P=l[o],F=c,L=h;for(Os(l,c,o),m(l[h],P)>0&&Os(l,c,h);F<L;){for(Os(l,F,L),F++,L--;m(l[F],P)<0;)F++;for(;m(l[L],P)>0;)L--}0===m(l[c],P)?Os(l,c,L):Os(l,++L,h),L<=o&&(c=L+1),o<=L&&(h=L-1)}}function Os(l,o,c){var h=l[o];l[o]=l[c],l[c]=h}function _i(l,o){return l<o?-1:l>o?1:0}function qh(l,o){const c=l.length;if(c<=1)return[l];const h=[];let m,y;for(let w=0;w<c;w++){const S=Do(l[w]);0!==S&&(l[w].area=Math.abs(S),void 0===y&&(y=S<0),y===S<0?(m&&h.push(m),m=[l[w]]):m.push(l[w]))}if(m&&h.push(m),o>1)for(let w=0;w<h.length;w++)h[w].length<=o||(Zy(h[w],o,1,h[w].length-1,Ky),h[w]=h[w].slice(0,o));return h}function Ky(l,o){return o.area-l.area}function Zh(l,o,c){const h=c.patternDependencies;let m=!1;for(const y of o){const w=y.paint.get(`${l}-pattern`);w.isConstant()||(m=!0);const S=w.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function Rm(l,o,c,h,m){const y=m.patternDependencies;for(const w of o){const S=w.paint.get(`${l}-pattern`).value;if("constant"!==S.kind){let E=S.evaluate({zoom:h-1},c,{},m.availableImages),I=S.evaluate({zoom:h},c,{},m.availableImages),P=S.evaluate({zoom:h+1},c,{},m.availableImages);E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,P=P&&P.name?P.name:P,y[E]=!0,y[I]=!0,y[P]=!0,c.patterns[w.id]={min:E,mid:I,max:P}}}return c}class Kh{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Nt,this.indexArray=new Vi,this.indexArray2=new Si,this.programConfigurations=new As(o.layers,o.zoom),this.segments=new vn,this.segments2=new vn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,h){this.hasPattern=Zh("fill",this.layers,c);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),w=[];for(const{feature:S,id:E,index:I,sourceLayerIndex:P}of o){const F=this.layers[0]._featureFilter.needGeometry,L=Sc(S,F);if(!this.layers[0]._featureFilter.filter(new gn(this.zoom),L,h))continue;const j=y?m.evaluate(L,{},h,c.availableImages):void 0,H={id:E,properties:S.properties,type:S.type,sourceLayerIndex:P,index:I,geometry:F?L.geometry:Nl(S),patterns:{},sortKey:j};w.push(H)}y&&w.sort((S,E)=>S.sortKey-E.sortKey);for(const S of w){const{geometry:E,index:I,sourceLayerIndex:P}=S;if(this.hasPattern){const F=Rm("fill",this.layers,S,this.zoom,c);this.patternFeatures.push(F)}else this.addFeature(S,E,I,h,{});c.featureIndex.insert(o[I].feature,E,I,P,this.index)}}update(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)}addFeatures(o,c,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Tu),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,c,h,m,y){for(const w of qh(c,500)){let S=0;for(const j of w)S+=j.length;const E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),I=E.vertexLength,P=[],F=[];for(const j of w){if(0===j.length)continue;j!==w[0]&&F.push(P.length/2);const H=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),W=H.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(W+j.length-1,W),P.push(j[0].x),P.push(j[0].y);for(let J=1;J<j.length;J++)this.layoutVertexArray.emplaceBack(j[J].x,j[J].y),this.indexArray2.emplaceBack(W+J-1,W+J),P.push(j[J].x),P.push(j[J].y);H.vertexLength+=j.length,H.primitiveLength+=j.length}const L=Gg(P,F);for(let j=0;j<L.length;j+=3)this.indexArray.emplaceBack(I+L[j],I+L[j+1],I+L[j+2]);E.vertexLength+=S,E.primitiveLength+=L.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,y,m)}}let Om,Iu;Qe("FillBucket",Kh,{omit:["layers","patternFeatures"]});var Ll={get paint(){return Iu=Iu||new Gn({"fill-antialias":new rt(ke.paint_fill["fill-antialias"]),"fill-opacity":new ut(ke.paint_fill["fill-opacity"]),"fill-color":new ut(ke.paint_fill["fill-color"]),"fill-outline-color":new ut(ke.paint_fill["fill-outline-color"]),"fill-translate":new rt(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new rt(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new _o(ke.paint_fill["fill-pattern"])})},get layout(){return Om=Om||new Gn({"fill-sort-key":new ut(ke.layout_fill["fill-sort-key"])})}};class Xy extends Lo{constructor(o){super(o,Ll)}recalculate(o,c){super.recalculate(o,c);const h=this.paint._values["fill-outline-color"];"constant"===h.value.kind&&void 0===h.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Kh(o)}queryRadius(){return Lh(this.paint.get("fill-translate"))}queryIntersectsFeature(o,c,h,m,y,w,S){return km(Bh(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,S),m)}isTileClipped(){return!0}}const Xh=An([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Qh=An([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Yh}=Xh;var ca={},$g=Eo,Fm=Sd;function Sd(l,o,c,h,m){this.properties={},this.extent=c,this.type=0,this._pbf=l,this._geometry=-1,this._keys=h,this._values=m,l.readFields(Cd,this,o)}function Cd(l,o,c){1==l?o.id=c.readVarint():2==l?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var w=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[w]=S}}(c,o):3==l?o.type=c.readVarint():4==l&&(o._geometry=c.pos)}function Au(l){for(var o,c,h=0,m=0,y=l.length,w=y-1;m<y;w=m++)h+=((c=l[w]).x-(o=l[m]).x)*(o.y+c.y);return h}Sd.types=["Unknown","Point","LineString","Polygon"],Sd.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var o,c=l.readVarint()+l.pos,h=1,m=0,y=0,w=0,S=[];l.pos<c;){if(m<=0){var E=l.readVarint();h=7&E,m=E>>3}if(m--,1===h||2===h)y+=l.readSVarint(),w+=l.readSVarint(),1===h&&(o&&S.push(o),o=[]),o.push(new $g(y,w));else{if(7!==h)throw new Error("unknown command "+h);o&&o.push(o[0].clone())}}return o&&S.push(o),S},Sd.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var o=l.readVarint()+l.pos,c=1,h=0,m=0,y=0,w=1/0,S=-1/0,E=1/0,I=-1/0;l.pos<o;){if(h<=0){var P=l.readVarint();c=7&P,h=P>>3}if(h--,1===c||2===c)(m+=l.readSVarint())<w&&(w=m),m>S&&(S=m),(y+=l.readSVarint())<E&&(E=y),y>I&&(I=y);else if(7!==c)throw new Error("unknown command "+c)}return[w,E,S,I]},Sd.prototype.toGeoJSON=function(l,o,c){var h,m,y=this.extent*Math.pow(2,c),w=this.extent*l,S=this.extent*o,E=this.loadGeometry(),I=Sd.types[this.type];function P(j){for(var H=0;H<j.length;H++){var W=j[H];j[H]=[360*(W.x+w)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(W.y+S)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(h=0;h<E.length;h++)F[h]=E[h][0];P(E=F);break;case 2:for(h=0;h<E.length;h++)P(E[h]);break;case 3:for(E=function(j){var H=j.length;if(H<=1)return[j];for(var W,J,ne=[],le=0;le<H;le++){var oe=Au(j[le]);0!==oe&&(void 0===J&&(J=oe<0),J===oe<0?(W&&ne.push(W),W=[j[le]]):W.push(j[le]))}return W&&ne.push(W),ne}(E),h=0;h<E.length;h++)for(m=0;m<E[h].length;m++)P(E[h][m])}1===E.length?E=E[0]:I="Multi"+I;var L={type:"Feature",geometry:{type:I,coordinates:E},properties:this.properties};return"id"in this&&(L.id=this.id),L};var Qy=Fm,Yy=Jh;function Jh(l,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(D1,this,o),this.length=this._features.length}function D1(l,o,c){15===l?o.version=c.readVarint():1===l?o.name=c.readString():5===l?o.extent=c.readVarint():2===l?o._features.push(c.pos):3===l?o._keys.push(c.readString()):4===l&&o._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var w=h.readVarint()>>3;m=1===w?h.readString():2===w?h.readFloat():3===w?h.readDouble():4===w?h.readVarint64():5===w?h.readVarint():6===w?h.readSVarint():7===w?h.readBoolean():null}return m}(c))}Jh.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var o=this._pbf.readVarint()+this._pbf.pos;return new Qy(this._pbf,o,this.extent,this._keys,this._values)};var Jy=Yy;function eb(l,o,c){if(3===l){var h=new Jy(c,c.readVarint()+c.pos);h.length&&(o[h.name]=h)}}ca.VectorTile=function(l,o){this.layers=l.readFields(eb,{},o)},ca.VectorTileFeature=Fm,ca.VectorTileLayer=Yy;const I1=ca.VectorTileFeature.types,Wg=Math.pow(2,13);function Mc(l,o,c,h,m,y,w,S){l.emplaceBack(o,c,2*Math.floor(h*Wg)+w,m*Wg*2,y*Wg*2,Math.round(S))}class Dc{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Ne,this.centroidVertexArray=new Le,this.indexArray=new Vi,this.programConfigurations=new As(o.layers,o.zoom),this.segments=new vn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,h){this.features=[],this.hasPattern=Zh("fill-extrusion",this.layers,c);for(const{feature:m,id:y,index:w,sourceLayerIndex:S}of o){const E=this.layers[0]._featureFilter.needGeometry,I=Sc(m,E);if(!this.layers[0]._featureFilter.filter(new gn(this.zoom),I,h))continue;const P={id:y,sourceLayerIndex:S,index:w,geometry:E?I.geometry:Nl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Rm("fill-extrusion",this.layers,P,this.zoom,c)):this.addFeature(P,P.geometry,w,h,{}),c.featureIndex.insert(m,P.geometry,w,S,this.index,!0)}}addFeatures(o,c,h){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,c,h)}}update(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Yh),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,Qh.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,c,h,m,y){const w={x:0,y:0,vertexCount:0};for(const S of qh(c,500)){let E=0;for(const H of S)E+=H.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const H of S){if(0===H.length||((l=H).every(o=>o.x<0)||l.every(o=>o.x>Ci)||l.every(o=>o.y<0)||l.every(o=>o.y>Ci)))continue;let W=0;for(let J=0;J<H.length;J++){const ne=H[J];if(J>=1){const le=H[J-1];if(!tb(ne,le)){I.vertexLength+4>vn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const oe=ne.sub(le)._perp()._unit(),pe=le.dist(ne);W+pe>32768&&(W=0),Mc(this.layoutVertexArray,ne.x,ne.y,oe.x,oe.y,0,0,W),Mc(this.layoutVertexArray,ne.x,ne.y,oe.x,oe.y,0,1,W),w.x+=2*ne.x,w.y+=2*ne.y,w.vertexCount+=2,W+=pe,Mc(this.layoutVertexArray,le.x,le.y,oe.x,oe.y,0,0,W),Mc(this.layoutVertexArray,le.x,le.y,oe.x,oe.y,0,1,W),w.x+=2*le.x,w.y+=2*le.y,w.vertexCount+=2;const ge=I.vertexLength;this.indexArray.emplaceBack(ge,ge+2,ge+1),this.indexArray.emplaceBack(ge+1,ge+2,ge+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+E>vn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),"Polygon"!==I1[o.type])continue;const P=[],F=[],L=I.vertexLength;for(const H of S)if(0!==H.length){H!==S[0]&&F.push(P.length/2);for(let W=0;W<H.length;W++){const J=H[W];Mc(this.layoutVertexArray,J.x,J.y,0,0,1,1,0),w.x+=J.x,w.y+=J.y,w.vertexCount+=1,P.push(J.x),P.push(J.y)}}const j=Gg(P,F);for(let H=0;H<j.length;H+=3)this.indexArray.emplaceBack(L+j[H],L+j[H+2],L+j[H+1]);I.primitiveLength+=j.length/3,I.vertexLength+=E}var l;for(let S=0;S<w.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(w.x/w.vertexCount),Math.floor(w.y/w.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,y,m)}}function tb(l,o){return l.x===o.x&&(l.x<0||l.x>Ci)||l.y===o.y&&(l.y<0||l.y>Ci)}let ep;Qe("FillExtrusionBucket",Dc,{omit:["layers","features"]});var tp={get paint(){return ep=ep||new Gn({"fill-extrusion-opacity":new rt(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ut(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new rt(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new rt(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _o(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ut(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ut(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new rt(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class A1 extends Lo{constructor(o){super(o,tp)}createBucket(o){return new Dc(o)}queryRadius(){return Lh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,c,h,m,y,w,S,E){const I=Bh(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,S),P=this.paint.get("fill-extrusion-height").evaluate(c,h),F=this.paint.get("fill-extrusion-base").evaluate(c,h),L=function(H,W,J,ne){const le=[];for(const oe of H){const pe=[oe.x,oe.y,0,1];Tm(pe,pe,W),le.push(new ct(pe[0]/pe[3],pe[1]/pe[3]))}return le}(I,E),j=function(H,W,J,ne){const le=[],oe=[],pe=ne[8]*W,ge=ne[9]*W,Ee=ne[10]*W,We=ne[11]*W,nt=ne[8]*J,Ge=ne[9]*J,He=ne[10]*J,Ve=ne[11]*J;for(const Ke of H){const je=[],Re=[];for(const lt of Ke){const tt=lt.x,Lt=lt.y,Pn=ne[0]*tt+ne[4]*Lt+ne[12],$n=ne[1]*tt+ne[5]*Lt+ne[13],Ni=ne[2]*tt+ne[6]*Lt+ne[14],bo=ne[3]*tt+ne[7]*Lt+ne[15],Rr=Ni+Ee,vi=bo+We,Ti=Pn+nt,ji=$n+Ge,zi=Ni+He,Wr=bo+Ve,Li=new ct((Pn+pe)/vi,($n+ge)/vi);Li.z=Rr/vi,je.push(Li);const Hi=new ct(Ti/Wr,ji/Wr);Hi.z=zi/Wr,Re.push(Hi)}le.push(je),oe.push(Re)}return[le,oe]}(m,F,P,E);return function(H,W,J){let ne=1/0;km(J,W)&&(ne=Nm(J,W[0]));for(let le=0;le<W.length;le++){const oe=W[le],pe=H[le];for(let ge=0;ge<oe.length-1;ge++){const Ee=oe[ge],We=[Ee,oe[ge+1],pe[ge+1],pe[ge],Ee];Ps(J,We)&&(ne=Math.min(ne,Nm(J,We)))}}return ne!==1/0&&ne}(j[0],j[1],L)}}function Td(l,o){return l.x*o.x+l.y*o.y}function Nm(l,o){if(1===l.length){let c=0;const h=o[c++];let m;for(;!m||h.equals(m);)if(m=o[c++],!m)return 1/0;for(;c<o.length;c++){const y=o[c],w=l[0],S=m.sub(h),E=y.sub(h),I=w.sub(h),P=Td(S,S),F=Td(S,E),L=Td(E,E),j=Td(I,S),H=Td(I,E),W=P*L-F*F,J=(L*j-F*H)/W,ne=(P*H-F*j)/W,le=h.z*(1-J-ne)+m.z*J+y.z*ne;if(isFinite(le))return le}return 1/0}{let c=1/0;for(const h of o)c=Math.min(c,h.z);return c}}const nb=An([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:da}=nb,ib=An([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:np}=ib,zm=ca.VectorTileFeature.types,qg=Math.cos(Math.PI/180*37.5),Ru=Math.pow(2,14)/.5;class Ou{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new ht,this.layoutVertexArray2=new ot,this.indexArray=new Vi,this.programConfigurations=new As(o.layers,o.zoom),this.segments=new vn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,h){this.hasPattern=Zh("line",this.layers,c);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),w=[];for(const{feature:S,id:E,index:I,sourceLayerIndex:P}of o){const F=this.layers[0]._featureFilter.needGeometry,L=Sc(S,F);if(!this.layers[0]._featureFilter.filter(new gn(this.zoom),L,h))continue;const j=y?m.evaluate(L,{},h):void 0,H={id:E,properties:S.properties,type:S.type,sourceLayerIndex:P,index:I,geometry:F?L.geometry:Nl(S),patterns:{},sortKey:j};w.push(H)}y&&w.sort((S,E)=>S.sortKey-E.sortKey);for(const S of w){const{geometry:E,index:I,sourceLayerIndex:P}=S;if(this.hasPattern){const F=Rm("line",this.layers,S,this.zoom,c);this.patternFeatures.push(F)}else this.addFeature(S,E,I,h,{});c.featureIndex.insert(o[I].feature,E,I,P,this.index)}}update(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)}addFeatures(o,c,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,np)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,da),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,c,h,m,y){const w=this.layers[0].layout,S=w.get("line-join").evaluate(o,{}),E=w.get("line-cap"),I=w.get("line-miter-limit"),P=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const F of c)this.addLine(F,o,S,E,I,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,y,m)}addLine(o,c,h,m,y,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<o.length-1;ne++)this.totalDistance+=o[ne].dist(o[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S="Polygon"===zm[c.type];let E=o.length;for(;E>=2&&o[E-1].equals(o[E-2]);)E--;let I=0;for(;I<E-1&&o[I].equals(o[I+1]);)I++;if(E<(S?3:2))return;"bevel"===h&&(y=1.05);const P=this.overscaling<=16?15*Ci/(512*this.overscaling):0,F=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let L,j,H,W,J;this.e1=this.e2=-1,S&&(L=o[E-2],J=o[I].sub(L)._unit()._perp());for(let ne=I;ne<E;ne++){if(H=ne===E-1?S?o[I+1]:void 0:o[ne+1],H&&o[ne].equals(H))continue;J&&(W=J),L&&(j=L),L=o[ne],J=H?H.sub(L)._unit()._perp():W,W=W||J;let le=W.add(J);0===le.x&&0===le.y||le._unit();const oe=W.x*J.x+W.y*J.y,pe=le.x*J.x+le.y*J.y,ge=0!==pe?1/pe:1/0,Ee=2*Math.sqrt(2-2*pe),We=pe<qg&&j&&H,nt=W.x*J.y-W.y*J.x>0;if(We&&ne>I){const Ve=L.dist(j);if(Ve>2*P){const Ke=L.sub(L.sub(j)._mult(P/Ve)._round());this.updateDistance(j,Ke),this.addCurrentVertex(Ke,W,0,0,F),j=Ke}}const Ge=j&&H;let He=Ge?h:S?"butt":m;if(Ge&&"round"===He&&(ge<w?He="miter":ge<=2&&(He="fakeround")),"miter"===He&&ge>y&&(He="bevel"),"bevel"===He&&(ge>2&&(He="flipbevel"),ge<y&&(He="miter")),j&&this.updateDistance(j,L),"miter"===He)le._mult(ge),this.addCurrentVertex(L,le,0,0,F);else if("flipbevel"===He){if(ge>100)le=J.mult(-1);else{const Ve=ge*W.add(J).mag()/W.sub(J).mag();le._perp()._mult(Ve*(nt?-1:1))}this.addCurrentVertex(L,le,0,0,F),this.addCurrentVertex(L,le.mult(-1),0,0,F)}else if("bevel"===He||"fakeround"===He){const Ve=-Math.sqrt(ge*ge-1),Ke=nt?Ve:0,je=nt?0:Ve;if(j&&this.addCurrentVertex(L,W,Ke,je,F),"fakeround"===He){const Re=Math.round(180*Ee/Math.PI/20);for(let lt=1;lt<Re;lt++){let tt=lt/Re;if(.5!==tt){const Pn=tt-.5;tt+=tt*Pn*(tt-1)*((1.0904+oe*(oe*(3.55645-1.43519*oe)-3.2452))*Pn*Pn+(.848013+oe*(.215638*oe-1.06021)))}const Lt=J.sub(W)._mult(tt)._add(W)._unit()._mult(nt?-1:1);this.addHalfVertex(L,Lt.x,Lt.y,!1,nt,0,F)}}H&&this.addCurrentVertex(L,J,-Ke,-je,F)}else if("butt"===He)this.addCurrentVertex(L,le,0,0,F);else if("square"===He){const Ve=j?1:-1;this.addCurrentVertex(L,le,Ve,Ve,F)}else"round"===He&&(j&&(this.addCurrentVertex(L,W,0,0,F),this.addCurrentVertex(L,W,1,1,F,!0)),H&&(this.addCurrentVertex(L,J,-1,-1,F,!0),this.addCurrentVertex(L,J,0,0,F)));if(We&&ne<E-1){const Ve=L.dist(H);if(Ve>2*P){const Ke=L.add(H.sub(L)._mult(P/Ve)._round());this.updateDistance(L,Ke),this.addCurrentVertex(Ke,J,0,0,F),L=Ke}}}}addCurrentVertex(o,c,h,m,y,w=!1){const S=c.y*m-c.x,E=-c.y-c.x*m;this.addHalfVertex(o,c.x+c.y*h,c.y-c.x*h,w,!1,h,y),this.addHalfVertex(o,S,E,w,!0,-m,y),this.distance>Ru/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,c,h,m,y,w))}addHalfVertex({x:o,y:c},h,m,y,w,S,E){const I=.5*(this.lineClips?this.scaledDistance*(Ru-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(y?1:0),(c<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(0===S?0:S<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),E.primitiveLength++),w?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,c){this.distance+=o.dist(c),this.updateScaledDistance()}}let Zg,Lm;Qe("LineBucket",Ou,{omit:["layers","patternFeatures"]});var Bm={get paint(){return Lm=Lm||new Gn({"line-opacity":new ut(ke.paint_line["line-opacity"]),"line-color":new ut(ke.paint_line["line-color"]),"line-translate":new rt(ke.paint_line["line-translate"]),"line-translate-anchor":new rt(ke.paint_line["line-translate-anchor"]),"line-width":new ut(ke.paint_line["line-width"]),"line-gap-width":new ut(ke.paint_line["line-gap-width"]),"line-offset":new ut(ke.paint_line["line-offset"]),"line-blur":new ut(ke.paint_line["line-blur"]),"line-dasharray":new zo(ke.paint_line["line-dasharray"]),"line-pattern":new _o(ke.paint_line["line-pattern"]),"line-gradient":new ja(ke.paint_line["line-gradient"])})},get layout(){return Zg=Zg||new Gn({"line-cap":new rt(ke.layout_line["line-cap"]),"line-join":new ut(ke.layout_line["line-join"]),"line-miter-limit":new rt(ke.layout_line["line-miter-limit"]),"line-round-limit":new rt(ke.layout_line["line-round-limit"]),"line-sort-key":new ut(ke.layout_line["line-sort-key"])})}};class Kg extends ut{possiblyEvaluate(o,c){return c=new gn(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(o,c)}evaluate(o,c,h,m){return c=qi({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(o,c,h,m)}}let Fu;class rb extends Lo{constructor(o){super(o,Bm),this.gradientVersion=0,Fu||(Fu=new Kg(Bm.paint.properties["line-width"].specification),Fu.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if("line-gradient"===o){const c=this.gradientExpression();this.stepInterpolant=!(void 0===c._styleExpression)&&c._styleExpression.expression instanceof Ia,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,c){super.recalculate(o,c),this.paint._values["line-floorwidth"]=Fu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Ou(o)}queryRadius(o){const c=o,h=Nu(Su("line-width",this,c),Su("line-gap-width",this,c)),m=Su("line-offset",this,c);return h/2+Math.abs(m)+Lh(this.paint.get("line-translate"))}queryIntersectsFeature(o,c,h,m,y,w,S){const E=Bh(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,S),I=S/2*Nu(this.paint.get("line-width").evaluate(c,h),this.paint.get("line-gap-width").evaluate(c,h)),P=this.paint.get("line-offset").evaluate(c,h);return P&&(m=function(F,L){const j=[];for(let H=0;H<F.length;H++){const W=F[H],J=[];for(let ne=0;ne<W.length;ne++){const le=W[ne-1],oe=W[ne],pe=W[ne+1],ge=0===ne?new ct(0,0):oe.sub(le)._unit()._perp(),Ee=ne===W.length-1?new ct(0,0):pe.sub(oe)._unit()._perp(),We=ge._add(Ee)._unit(),nt=We.x*Ee.x+We.y*Ee.y;0!==nt&&We._mult(1/nt),J.push(We._mult(L)._add(oe))}j.push(J)}return j}(m,P*S)),function(F,L,j){for(let H=0;H<L.length;H++){const W=L[H];if(F.length>=3)for(let J=0;J<W.length;J++)if(Rs(F,W[J]))return!0;if(ei(F,W,j))return!0}return!1}(E,m,I)}isTileClipped(){return!0}}function Nu(l,o){return o>0?o+2*l:l}const Ic=An([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ob=An([{name:"a_projected_pos",components:3,type:"Float32"}],4);An([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Xg=An([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);An([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Vm=An([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zu=An([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sb(l,o,c){return l.sections.forEach(h=>{h.text=function(m,y,w){const S=y.layout.get("text-transform").evaluate(w,{});return"uppercase"===S?m=m.toLocaleUpperCase():"lowercase"===S&&(m=m.toLocaleLowerCase()),wi.applyArabicShaping&&(m=wi.applyArabicShaping(m)),m}(h.text,o,c)}),l}An([{name:"triangle",components:3,type:"Uint16"}]),An([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),An([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),An([{type:"Float32",name:"offsetX"}]),An([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),An([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const tr={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Ri=24,Oi=yn,ip=function(l,o,c,h,m){var y,w,S=8*m-h-1,E=(1<<S)-1,I=E>>1,P=-7,F=c?m-1:0,L=c?-1:1,j=l[o+F];for(F+=L,y=j&(1<<-P)-1,j>>=-P,P+=S;P>0;y=256*y+l[o+F],F+=L,P-=8);for(w=y&(1<<-P)-1,y>>=-P,P+=h;P>0;w=256*w+l[o+F],F+=L,P-=8);if(0===y)y=1-I;else{if(y===E)return w?NaN:1/0*(j?-1:1);w+=Math.pow(2,h),y-=I}return(j?-1:1)*w*Math.pow(2,y-h)},Qg=function(l,o,c,h,m,y){var w,S,E,I=8*y-m-1,P=(1<<I)-1,F=P>>1,L=23===m?Math.pow(2,-24)-Math.pow(2,-77):0,j=h?0:y-1,H=h?1:-1,W=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(S=isNaN(o)?1:0,w=P):(w=Math.floor(Math.log(o)/Math.LN2),o*(E=Math.pow(2,-w))<1&&(w--,E*=2),(o+=w+F>=1?L/E:L*Math.pow(2,1-F))*E>=2&&(w++,E/=2),w+F>=P?(S=0,w=P):w+F>=1?(S=(o*E-1)*Math.pow(2,m),w+=F):(S=o*Math.pow(2,F-1)*Math.pow(2,m),w=0));m>=8;l[c+j]=255&S,j+=H,S/=256,m-=8);for(w=w<<m|S,I+=m;I>0;l[c+j]=255&w,j+=H,w/=256,I-=8);l[c+j-H]|=128*W};function yn(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}yn.Varint=0,yn.Fixed64=1,yn.Bytes=2,yn.Fixed32=5;var Ac=4294967296,Pc=1/Ac,Rc=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function yo(l){return l.type===yn.Bytes?l.readVarint()+l.pos:l.pos+1}function rp(l,o,c){var h=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));c.realloc(h);for(var m=c.pos-1;m>=l;m--)c.buf[m+h]=c.buf[m]}function Ed(l,o){for(var c=0;c<l.length;c++)o.writeVarint(l[c])}function P1(l,o){for(var c=0;c<l.length;c++)o.writeSVarint(l[c])}function ab(l,o){for(var c=0;c<l.length;c++)o.writeFloat(l[c])}function R1(l,o){for(var c=0;c<l.length;c++)o.writeDouble(l[c])}function O1(l,o){for(var c=0;c<l.length;c++)o.writeBoolean(l[c])}function F1(l,o){for(var c=0;c<l.length;c++)o.writeFixed32(l[c])}function N1(l,o){for(var c=0;c<l.length;c++)o.writeSFixed32(l[c])}function z1(l,o){for(var c=0;c<l.length;c++)o.writeFixed64(l[c])}function L1(l,o){for(var c=0;c<l.length;c++)o.writeSFixed64(l[c])}function qa(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+16777216*l[o+3]}function Md(l,o,c){l[c]=o,l[c+1]=o>>>8,l[c+2]=o>>>16,l[c+3]=o>>>24}function Yg(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+(l[o+3]<<24)}yn.prototype={destroy:function(){this.buf=null},readFields:function(l,o,c){for(c=c||this.length;this.pos<c;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,l(m,o,this),this.pos===y&&this.skip(h)}return o},readMessage:function(l,o){return this.readFields(l,o,this.readVarint()+this.pos)},readFixed32:function(){var l=qa(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=Yg(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=qa(this.buf,this.pos)+qa(this.buf,this.pos+4)*Ac;return this.pos+=8,l},readSFixed64:function(){var l=qa(this.buf,this.pos)+Yg(this.buf,this.pos+4)*Ac;return this.pos+=8,l},readFloat:function(){var l=ip(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=ip(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var o,c,h=this.buf;return o=127&(c=h[this.pos++]),c<128?o:(o|=(127&(c=h[this.pos++]))<<7,c<128?o:(o|=(127&(c=h[this.pos++]))<<14,c<128?o:(o|=(127&(c=h[this.pos++]))<<21,c<128?o:function(m,y,w){var S,E,I=w.buf;if(S=(112&(E=I[w.pos++]))>>4,E<128||(S|=(127&(E=I[w.pos++]))<<3,E<128)||(S|=(127&(E=I[w.pos++]))<<10,E<128)||(S|=(127&(E=I[w.pos++]))<<17,E<128)||(S|=(127&(E=I[w.pos++]))<<24,E<128)||(S|=(1&(E=I[w.pos++]))<<31,E<128))return function Oc(l,o,c){return c?4294967296*o+(l>>>0):4294967296*(o>>>0)+(l>>>0)}(m,S,y);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(c=h[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,o=this.pos;return this.pos=l,l-o>=12&&Rc?Rc.decode(this.buf.subarray(o,l)):function(c,h,m){for(var y="",w=h;w<m;){var S,E,I,P=c[w],F=null,L=P>239?4:P>223?3:P>191?2:1;if(w+L>m)break;1===L?P<128&&(F=P):2===L?128==(192&(S=c[w+1]))&&(F=(31&P)<<6|63&S)<=127&&(F=null):3===L?(E=c[w+2],128==(192&(S=c[w+1]))&&128==(192&E)&&((F=(15&P)<<12|(63&S)<<6|63&E)<=2047||F>=55296&&F<=57343)&&(F=null)):4===L&&(E=c[w+2],I=c[w+3],128==(192&(S=c[w+1]))&&128==(192&E)&&128==(192&I)&&((F=(15&P)<<18|(63&S)<<12|(63&E)<<6|63&I)<=65535||F>=1114112)&&(F=null)),null===F?(F=65533,L=1):F>65535&&(F-=65536,y+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),y+=String.fromCharCode(F),w+=L}return y}(this.buf,o,l)},readBytes:function(){var l=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,l);return this.pos=l,o},readPackedVarint:function(l,o){if(this.type!==yn.Bytes)return l.push(this.readVarint(o));var c=yo(this);for(l=l||[];this.pos<c;)l.push(this.readVarint(o));return l},readPackedSVarint:function(l){if(this.type!==yn.Bytes)return l.push(this.readSVarint());var o=yo(this);for(l=l||[];this.pos<o;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==yn.Bytes)return l.push(this.readBoolean());var o=yo(this);for(l=l||[];this.pos<o;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==yn.Bytes)return l.push(this.readFloat());var o=yo(this);for(l=l||[];this.pos<o;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==yn.Bytes)return l.push(this.readDouble());var o=yo(this);for(l=l||[];this.pos<o;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==yn.Bytes)return l.push(this.readFixed32());var o=yo(this);for(l=l||[];this.pos<o;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==yn.Bytes)return l.push(this.readSFixed32());var o=yo(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==yn.Bytes)return l.push(this.readFixed64());var o=yo(this);for(l=l||[];this.pos<o;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==yn.Bytes)return l.push(this.readSFixed64());var o=yo(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed64());return l},skip:function(l){var o=7&l;if(o===yn.Varint)for(;this.buf[this.pos++]>127;);else if(o===yn.Bytes)this.pos=this.readVarint()+this.pos;else if(o===yn.Fixed32)this.pos+=4;else{if(o!==yn.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(l,o){this.writeVarint(l<<3|o)},realloc:function(l){for(var o=this.length||16;o<this.pos+l;)o*=2;if(o!==this.length){var c=new Uint8Array(o);c.set(this.buf),this.buf=c,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Md(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Md(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Md(this.buf,-1&l,this.pos),Md(this.buf,Math.floor(l*Pc),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Md(this.buf,-1&l,this.pos),Md(this.buf,Math.floor(l*Pc),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(o,c){var h,m,y,S;if(o>=0?(h=o%4294967296|0,m=o/4294967296|0):(m=~(-o/4294967296),4294967295^(h=~(-o%4294967296))?h=h+1|0:(h=0,m=m+1|0)),o>=0x10000000000000000||o<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),y=h,(S=c).buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7),function(y,w){var S=(7&y)<<4;w.buf[w.pos++]|=S|((y>>>=3)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y)))))}(m,c)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var o=this.pos;this.pos=function(h,m,y){for(var w,S,E=0;E<m.length;E++){if((w=m.charCodeAt(E))>55295&&w<57344){if(!S){w>56319||E+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=w;continue}if(w<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=w;continue}w=S-55296<<10|w-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);w<128?h[y++]=w:(w<2048?h[y++]=w>>6|192:(w<65536?h[y++]=w>>12|224:(h[y++]=w>>18|240,h[y++]=w>>12&63|128),h[y++]=w>>6&63|128),h[y++]=63&w|128)}return y}(this.buf,l,this.pos);var c=this.pos-o;c>=128&&rp(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeFloat:function(l){this.realloc(4),Qg(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),Qg(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var o=l.length;this.writeVarint(o),this.realloc(o);for(var c=0;c<o;c++)this.buf[this.pos++]=l[c]},writeRawMessage:function(l,o){this.pos++;var c=this.pos;l(o,this);var h=this.pos-c;h>=128&&rp(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeMessage:function(l,o,c){this.writeTag(l,yn.Bytes),this.writeRawMessage(o,c)},writePackedVarint:function(l,o){o.length&&this.writeMessage(l,Ed,o)},writePackedSVarint:function(l,o){o.length&&this.writeMessage(l,P1,o)},writePackedBoolean:function(l,o){o.length&&this.writeMessage(l,O1,o)},writePackedFloat:function(l,o){o.length&&this.writeMessage(l,ab,o)},writePackedDouble:function(l,o){o.length&&this.writeMessage(l,R1,o)},writePackedFixed32:function(l,o){o.length&&this.writeMessage(l,F1,o)},writePackedSFixed32:function(l,o){o.length&&this.writeMessage(l,N1,o)},writePackedFixed64:function(l,o){o.length&&this.writeMessage(l,z1,o)},writePackedSFixed64:function(l,o){o.length&&this.writeMessage(l,L1,o)},writeBytesField:function(l,o){this.writeTag(l,yn.Bytes),this.writeBytes(o)},writeFixed32Field:function(l,o){this.writeTag(l,yn.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(l,o){this.writeTag(l,yn.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(l,o){this.writeTag(l,yn.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(l,o){this.writeTag(l,yn.Fixed64),this.writeSFixed64(o)},writeVarintField:function(l,o){this.writeTag(l,yn.Varint),this.writeVarint(o)},writeSVarintField:function(l,o){this.writeTag(l,yn.Varint),this.writeSVarint(o)},writeStringField:function(l,o){this.writeTag(l,yn.Bytes),this.writeString(o)},writeFloatField:function(l,o){this.writeTag(l,yn.Fixed32),this.writeFloat(o)},writeDoubleField:function(l,o){this.writeTag(l,yn.Fixed64),this.writeDouble(o)},writeBooleanField:function(l,o){this.writeVarintField(l,!!o)}};var Fi=be(Oi);const jm=3;function Lu(l,o,c){1===l&&c.readMessage(lb,o)}function lb(l,o,c){if(3===l){const{id:h,bitmap:m,width:y,height:w,left:S,top:E,advance:I}=c.readMessage(ls,{});o.push({id:h,bitmap:new Cu({width:y+2*jm,height:w+2*jm},m),metrics:{width:y,height:w,left:S,top:E,advance:I}})}}function ls(l,o,c){1===l?o.id=c.readVarint():2===l?o.bitmap=c.readBytes():3===l?o.width=c.readVarint():4===l?o.height=c.readVarint():5===l?o.left=c.readSVarint():6===l?o.top=c.readSVarint():7===l&&(o.advance=c.readVarint())}const Fc=jm;function Hm(l){let o=0,c=0;for(const w of l)o+=w.w*w.h,c=Math.max(c,w.w);l.sort((w,S)=>S.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),c),h:1/0}];let m=0,y=0;for(const w of l)for(let S=h.length-1;S>=0;S--){const E=h[S];if(!(w.w>E.w||w.h>E.h)){if(w.x=E.x,w.y=E.y,y=Math.max(y,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===E.w&&w.h===E.h){const I=h.pop();S<h.length&&(h[S]=I)}else w.h===E.h?(E.x+=w.w,E.w-=w.w):w.w===E.w?(E.y+=w.h,E.h-=w.h):(h.push({x:E.x+w.w,y:E.y,w:E.w-w.w,h:w.h}),E.y+=w.h,E.h-=w.h);break}}return{w:m,h:y,fill:o/(m*y)||0}}const pr=1;class Nc{constructor(o,{pixelRatio:c,version:h,stretchX:m,stretchY:y,content:w}){this.paddedRect=o,this.pixelRatio=c,this.stretchX=m,this.stretchY=y,this.content=w,this.version=h}get tl(){return[this.paddedRect.x+pr,this.paddedRect.y+pr]}get br(){return[this.paddedRect.x+this.paddedRect.w-pr,this.paddedRect.y+this.paddedRect.h-pr]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*pr)/this.pixelRatio,(this.paddedRect.h-2*pr)/this.pixelRatio]}}class Jg{constructor(o,c){const h={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(o,h,y),this.addImages(c,m,y);const{w,h:S}=Hm(y),E=new Ho({width:w||1,height:S||1});for(const I in o){const P=o[I],F=h[I].paddedRect;Ho.copy(P.data,E,{x:0,y:0},{x:F.x+pr,y:F.y+pr},P.data)}for(const I in c){const P=c[I],F=m[I].paddedRect,L=F.x+pr,j=F.y+pr,H=P.data.width,W=P.data.height;Ho.copy(P.data,E,{x:0,y:0},{x:L,y:j},P.data),Ho.copy(P.data,E,{x:0,y:W-1},{x:L,y:j-1},{width:H,height:1}),Ho.copy(P.data,E,{x:0,y:0},{x:L,y:j+W},{width:H,height:1}),Ho.copy(P.data,E,{x:H-1,y:0},{x:L-1,y:j},{width:1,height:W}),Ho.copy(P.data,E,{x:0,y:0},{x:L+H,y:j},{width:1,height:W})}this.image=E,this.iconPositions=h,this.patternPositions=m}addImages(o,c,h){for(const m in o){const y=o[m],w={x:0,y:0,w:y.data.width+2*pr,h:y.data.height+2*pr};h.push(w),c[m]=new Nc(w,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(o,c){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in o.updatedImages)this.patchUpdatedImage(this.iconPositions[h],o.getImage(h),c),this.patchUpdatedImage(this.patternPositions[h],o.getImage(h),c)}patchUpdatedImage(o,c,h){if(!o||!c||o.version===c.version)return;o.version=c.version;const[m,y]=o.tl;h.update(c.data,void 0,{x:m,y})}}var zc;Qe("ImagePosition",Nc),Qe("ImageAtlas",Jg),_.ai=void 0,(zc=_.ai||(_.ai={}))[zc.none=0]="none",zc[zc.horizontal=1]="horizontal",zc[zc.vertical=2]="vertical",zc[zc.horizontalOnly=3]="horizontalOnly";const Bu=-17;class op{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,c){const h=new op;return h.scale=o||1,h.fontStack=c,h}static forImage(o){const c=new op;return c.imageName=o,c}}class mr{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,c){const h=new mr;for(let m=0;m<o.sections.length;m++){const y=o.sections[m];y.image?h.addImageSection(y):h.addTextSection(y,c)}return h}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let c="";for(let h=0;h<o.length;h++){const m=o.charCodeAt(h+1)||null,y=o.charCodeAt(h-1)||null;c+=m&&jr(m)&&!tr[o[h+1]]||y&&jr(y)&&!tr[o[h-1]]||!tr[o[h]]?o[h]:tr[o[h]]}return c}(this.text)}trim(){let o=0;for(let h=0;h<this.text.length&&Za[this.text.charCodeAt(h)];h++)o++;let c=this.text.length;for(let h=this.text.length-1;h>=0&&h>=o&&Za[this.text.charCodeAt(h)];h--)c--;this.text=this.text.substring(o,c),this.sectionIndex=this.sectionIndex.slice(o,c)}substring(o,c){const h=new mr;return h.text=this.text.substring(o,c),h.sectionIndex=this.sectionIndex.slice(o,c),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,c)=>Math.max(o,this.sections[c].scale),0)}addTextSection(o,c){this.text+=o.text,this.sections.push(op.forText(o.scale,o.fontStack||c));const h=this.sections.length-1;for(let m=0;m<o.text.length;++m)this.sectionIndex.push(h)}addImageSection(o){const c=o.image?o.image.name:"";if(0===c.length)return void Zi("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(op.forImage(c)),this.sectionIndex.push(this.sections.length-1)):Zi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Dd(l,o,c,h,m,y,w,S,E,I,P,F,L,j,H,W){const J=mr.fromFeature(l,m);let ne;F===_.ai.vertical&&J.verticalizePunctuation();const{processBidirectionalText:le,processStyledBidirectionalText:oe}=wi;if(le&&1===J.sections.length){ne=[];const Ee=le(J.toString(),Gm(J,I,y,o,h,j,H));for(const We of Ee){const nt=new mr;nt.text=We,nt.sections=J.sections;for(let Ge=0;Ge<We.length;Ge++)nt.sectionIndex.push(0);ne.push(nt)}}else if(oe){ne=[];const Ee=oe(J.text,J.sectionIndex,Gm(J,I,y,o,h,j,H));for(const We of Ee){const nt=new mr;nt.text=We[0],nt.sectionIndex=We[1],nt.sections=J.sections,ne.push(nt)}}else ne=function(Ee,We){const nt=[],Ge=Ee.text;let He=0;for(const Ve of We)nt.push(Ee.substring(He,Ve)),He=Ve;return He<Ge.length&&nt.push(Ee.substring(He,Ge.length)),nt}(J,Gm(J,I,y,o,h,j,H));const pe=[],ge={positionedLines:pe,text:J.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(Ee,We,nt,Ge,He,Ve,Ke,je,Re,lt,tt,Lt){let Pn=0,$n=Bu,Ni=0,bo=0;const Rr="right"===je?1:"left"===je?0:.5;let vi=0;for(const Li of He){Li.trim();const Hi=Li.getMaxScale(),Or=(Hi-1)*Ri,fr={positionedGlyphs:[],lineOffset:0};Ee.positionedLines[vi]=fr;const Fr=fr.positionedGlyphs;let Ui=0;if(!Li.length()){$n+=Ve,++vi;continue}for(let yi=0;yi<Li.length();yi++){const Ht=Li.getSection(yi),_r=Li.getSectionIndex(yi),ir=Li.getCharCode(yi);let Wn=0,ds=null,zs=null,Ls=null,Qa=Ri;const us=!(Re===_.ai.horizontal||!tt&&!ia(ir)||tt&&(Za[ir]||(Ti=ir,Be.Arabic(Ti)||Be["Arabic Supplement"](Ti)||Be["Arabic Extended-A"](Ti)||Be["Arabic Presentation Forms-A"](Ti)||Be["Arabic Presentation Forms-B"](Ti))));if(Ht.imageName){const si=Ge[Ht.imageName];if(!si)continue;Ls=Ht.imageName,Ee.iconsInText=Ee.iconsInText||!0,zs=si.paddedRect;const ui=si.displaySize;Ht.scale=Ht.scale*Ri/Lt,ds={width:ui[0],height:ui[1],left:pr,top:-Fc,advance:us?ui[1]:ui[0]},Wn=Or+(Ri-ui[1]*Ht.scale),Qa=ds.advance;const Ya=us?ui[0]*Ht.scale-Ri*Hi:ui[1]*Ht.scale-Ri*Hi;Ya>0&&Ya>Ui&&(Ui=Ya)}else{const si=nt[Ht.fontStack],ui=si&&si[ir];if(ui&&ui.rect)zs=ui.rect,ds=ui.metrics;else{const Ya=We[Ht.fontStack],qu=Ya&&Ya[ir];if(!qu)continue;ds=qu.metrics}Wn=(Hi-Ht.scale)*Ri}us?(Ee.verticalizable=!0,Fr.push({glyph:ir,imageName:Ls,x:Pn,y:$n+Wn,vertical:us,scale:Ht.scale,fontStack:Ht.fontStack,sectionIndex:_r,metrics:ds,rect:zs}),Pn+=Qa*Ht.scale+lt):(Fr.push({glyph:ir,imageName:Ls,x:Pn,y:$n+Wn,vertical:us,scale:Ht.scale,fontStack:Ht.fontStack,sectionIndex:_r,metrics:ds,rect:zs}),Pn+=ds.advance*Ht.scale+lt)}0!==Fr.length&&(Ni=Math.max(Pn-lt,Ni),Wm(Fr,0,Fr.length-1,Rr,Ui)),Pn=0;const gr=Ve*Hi+Ui;fr.lineOffset=Math.max(Ui,Or),$n+=gr,bo=Math.max(gr,bo),++vi}var Ti;const ji=$n-Bu,{horizontalAlign:zi,verticalAlign:Wr}=$m(Ke);(function(Li,Hi,Or,fr,Fr,Ui,gr,yi,Ht){const _r=(Hi-Or)*Fr;let ir=0;ir=Ui!==gr?-yi*fr-Bu:(-fr*Ht+.5)*gr;for(const Wn of Li)for(const ds of Wn.positionedGlyphs)ds.x+=_r,ds.y+=ir})(Ee.positionedLines,Rr,zi,Wr,Ni,bo,Ve,ji,He.length),Ee.top+=-Wr*ji,Ee.bottom=Ee.top+ji,Ee.left+=-zi*Ni,Ee.right=Ee.left+Ni}(ge,o,c,h,ne,w,S,E,F,I,L,W),!function(Ee){for(const We of Ee)if(0!==We.positionedGlyphs.length)return!1;return!0}(pe)&&ge}const Za={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},B1={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Um(l,o,c,h,m,y){if(o.imageName){const w=h[o.imageName];return w?w.displaySize[0]*o.scale*Ri/y+m:0}{const w=c[o.fontStack],S=w&&w[l];return S?S.metrics.advance*o.scale+m:0}}function e_(l,o,c,h){const m=Math.pow(l-o,2);return h?l<o?m/2:2*m:m+Math.abs(c)*c}function cb(l,o,c){let h=0;return 10===l&&(h-=1e4),c&&(h+=150),40!==l&&65288!==l||(h+=50),41!==o&&65289!==o||(h+=50),h}function t_(l,o,c,h,m,y){let w=null,S=e_(o,c,m,y);for(const E of h){const I=e_(o-E.x,c,m,y)+E.badness;I<=S&&(w=E,S=I)}return{index:l,x:o,priorBreak:w,badness:S}}function n_(l){return l?n_(l.priorBreak).concat(l.index):[]}function Gm(l,o,c,h,m,y,w){if("point"!==y)return[];if(!l)return[];const S=[],E=function(L,j,H,W,J,ne){let le=0;for(let oe=0;oe<L.length();oe++){const pe=L.getSection(oe);le+=Um(L.getCharCode(oe),pe,W,J,j,ne)}return le/Math.max(1,Math.ceil(le/H))}(l,o,c,h,m,w),I=l.text.indexOf("\u200b")>=0;let P=0;for(let L=0;L<l.length();L++){const j=l.getSection(L),H=l.getCharCode(L);if(Za[H]||(P+=Um(H,j,h,m,o,w)),L<l.length()-1){const W=!((F=H)<11904||!(Be["Bopomofo Extended"](F)||Be.Bopomofo(F)||Be["CJK Compatibility Forms"](F)||Be["CJK Compatibility Ideographs"](F)||Be["CJK Compatibility"](F)||Be["CJK Radicals Supplement"](F)||Be["CJK Strokes"](F)||Be["CJK Symbols and Punctuation"](F)||Be["CJK Unified Ideographs Extension A"](F)||Be["CJK Unified Ideographs"](F)||Be["Enclosed CJK Letters and Months"](F)||Be["Halfwidth and Fullwidth Forms"](F)||Be.Hiragana(F)||Be["Ideographic Description Characters"](F)||Be["Kangxi Radicals"](F)||Be["Katakana Phonetic Extensions"](F)||Be.Katakana(F)||Be["Vertical Forms"](F)||Be["Yi Radicals"](F)||Be["Yi Syllables"](F)));(B1[H]||W||j.imageName)&&S.push(t_(L+1,P,E,S,cb(H,l.getCharCode(L+1),W&&I),!1))}}var F;return n_(t_(l.length(),P,E,S,0,!0))}function $m(l){let o=.5,c=.5;switch(l){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:o,verticalAlign:c}}function Wm(l,o,c,h,m){if(!h&&!m)return;const y=l[c],w=(l[c].x+y.metrics.advance*y.scale)*h;for(let S=o;S<=c;S++)l[S].x-=w,l[S].y+=m}function sp(l,o,c){const{horizontalAlign:h,verticalAlign:m}=$m(c),y=o[0]-l.displaySize[0]*h,w=o[1]-l.displaySize[1]*m;return{image:l,top:w,bottom:w+l.displaySize[1],left:y,right:y+l.displaySize[0]}}function i_(l,o,c,h,m,y){const w=l.image;let S;if(w.content){const J=w.content,ne=w.pixelRatio||1;S=[J[0]/ne,J[1]/ne,w.displaySize[0]-J[2]/ne,w.displaySize[1]-J[3]/ne]}const E=o.left*y,I=o.right*y;let P,F,L,j;"width"===c||"both"===c?(j=m[0]+E-h[3],F=m[0]+I+h[1]):(j=m[0]+(E+I-w.displaySize[0])/2,F=j+w.displaySize[0]);const H=o.top*y,W=o.bottom*y;return"height"===c||"both"===c?(P=m[1]+H-h[0],L=m[1]+W+h[2]):(P=m[1]+(H+W-w.displaySize[1])/2,L=P+w.displaySize[1]),{image:w,top:P,right:F,bottom:L,left:j,collisionPadding:S}}const Fs=255,ua=128,cs=Fs*ua;function r_(l,o){const{expression:c}=o;if("constant"===c.kind)return{kind:"constant",layoutSize:c.evaluate(new gn(l+1))};if("source"===c.kind)return{kind:"source"};{const{zoomStops:h,interpolationType:m}=c;let y=0;for(;y<h.length&&h[y]<=l;)y++;y=Math.max(0,y-1);let w=y;for(;w<h.length&&h[w]<l+1;)w++;w=Math.min(h.length-1,w);const S=h[y],E=h[w];return"composite"===c.kind?{kind:"composite",minZoom:S,maxZoom:E,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:E,minSize:c.evaluate(new gn(S)),maxSize:c.evaluate(new gn(E)),interpolationType:m}}}function ap(l,o,c){let h="never";const m=l.get(o);return m?h=m:l.get(c)&&(h="always"),h}const qm=ca.VectorTileFeature.types,lp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vu(l,o,c,h,m,y,w,S,E,I,P,F,L){const j=S?Math.min(cs,Math.round(S[0])):0,H=S?Math.min(cs,Math.round(S[1])):0;l.emplaceBack(o,c,Math.round(32*h),Math.round(32*m),y,w,(j<<1)+(E?1:0),H,16*I,16*P,256*F,256*L)}function Zm(l,o,c){l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c)}function db(l){for(const o of l.sections)if(fd(o.text))return!0;return!1}class Bl{constructor(o){this.layoutVertexArray=new zt,this.indexArray=new Vi,this.programConfigurations=o,this.segments=new vn,this.dynamicLayoutVertexArray=new Tt,this.opacityVertexArray=new Bt,this.hasVisibleVertices=!1,this.placedSymbolArray=new ae}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(o,c,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Ic.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,ob.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,lp,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Qe("SymbolBuffers",Bl);class Lc{constructor(o,c,h){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new h,this.segments=new vn,this.collisionVertexArray=new Sn}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,Xg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Qe("CollisionBuffers",Lc);class Id{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Vh([]),this.placementViewportMatrix=Vh([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=r_(this.zoom,c["text-size"]),this.iconSizeData=r_(this.zoom,c["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap="never"!==ap(h,"text-overlap","text-allow-overlap")||"never"!==ap(h,"icon-overlap","icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==y&&!m.isConstant(),this.sortFeaturesByY=("viewport-y"===y||"auto"===y&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===h.get("symbol-placement")&&(this.writingModes=h.get("text-writing-mode").map(w=>_.ai[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID}createArrays(){this.text=new Bl(new As(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new Bl(new As(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new de,this.lineVertexArray=new _e,this.symbolInstances=new te,this.textAnchorOffsets=new Ce}calculateGlyphDependencies(o,c,h,m,y){for(let w=0;w<o.length;w++)if(c[o.charCodeAt(w)]=!0,(h||m)&&y){const S=tr[o.charAt(w)];S&&(c[S.charCodeAt(0)]=!0)}}populate(o,c,h){const m=this.layers[0],y=m.layout,w=y.get("text-font"),S=y.get("text-field"),E=y.get("icon-image"),I=("constant"!==S.value.kind||S.value.value instanceof Ki&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),P="constant"!==E.value.kind||!!E.value.value||Object.keys(E.parameters).length>0,F=y.get("symbol-sort-key");if(this.features=[],!I&&!P)return;const L=c.iconDependencies,j=c.glyphDependencies,H=c.availableImages,W=new gn(this.zoom);for(const{feature:J,id:ne,index:le,sourceLayerIndex:oe}of o){const pe=m._featureFilter.needGeometry,ge=Sc(J,pe);if(!m._featureFilter.filter(W,ge,h))continue;let Ee,We;if(pe||(ge.geometry=Nl(J)),I){const Ge=m.getValueAndResolveTokens("text-field",ge,h,H),He=Ki.factory(Ge);db(He)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ra()||this.hasRTLText&&wi.isParsed())&&(Ee=sb(He,m,ge))}if(P){const Ge=m.getValueAndResolveTokens("icon-image",ge,h,H);We=Ge instanceof Xi?Ge:Xi.fromString(Ge)}if(!Ee&&!We)continue;const nt=this.sortFeaturesByKey?F.evaluate(ge,{},h):void 0;if(this.features.push({id:ne,text:Ee,icon:We,index:le,sourceLayerIndex:oe,geometry:ge.geometry,properties:J.properties,type:qm[J.type],sortKey:nt}),We&&(L[We.name]=!0),Ee){const Ge=w.evaluate(ge,{},h).join(","),He="viewport"!==y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_.ai.vertical)>=0;for(const Ve of Ee.sections)if(Ve.image)L[Ve.image.name]=!0;else{const Ke=Jt(Ee.toString()),je=Ve.fontStack||Ge,Re=j[je]=j[je]||{};this.calculateGlyphDependencies(Ve.text,Re,He,this.allowVerticalPlacement,Ke)}}}"line"===y.get("symbol-placement")&&(this.features=function(J){const ne={},le={},oe=[];let pe=0;function ge(Ge){oe.push(J[Ge]),pe++}function Ee(Ge,He,Ve){const Ke=le[Ge];return delete le[Ge],le[He]=Ke,oe[Ke].geometry[0].pop(),oe[Ke].geometry[0]=oe[Ke].geometry[0].concat(Ve[0]),Ke}function We(Ge,He,Ve){const Ke=ne[He];return delete ne[He],ne[Ge]=Ke,oe[Ke].geometry[0].shift(),oe[Ke].geometry[0]=Ve[0].concat(oe[Ke].geometry[0]),Ke}function nt(Ge,He,Ve){const Ke=Ve?He[0][He[0].length-1]:He[0][0];return`${Ge}:${Ke.x}:${Ke.y}`}for(let Ge=0;Ge<J.length;Ge++){const He=J[Ge],Ve=He.geometry,Ke=He.text?He.text.toString():null;if(!Ke){ge(Ge);continue}const je=nt(Ke,Ve),Re=nt(Ke,Ve,!0);if(je in le&&Re in ne&&le[je]!==ne[Re]){const lt=We(je,Re,Ve),tt=Ee(je,Re,oe[lt].geometry);delete ne[je],delete le[Re],le[nt(Ke,oe[tt].geometry,!0)]=tt,oe[lt].geometry=null}else je in le?Ee(je,Re,Ve):Re in ne?We(je,Re,Ve):(ge(Ge),ne[je]=pe-1,le[Re]=pe-1)}return oe.filter(Ge=>Ge.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((J,ne)=>J.sortKey-ne.sortKey)}update(o,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,c,this.layers,h),this.icon.programConfigurations.updatePaintArrays(o,c,this.layers,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,c){const h=this.lineVertexArray.length;if(void 0!==o.segment){let m=o.dist(c[o.segment+1]),y=o.dist(c[o.segment]);const w={};for(let S=o.segment+1;S<c.length;S++)w[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:m},S<c.length-1&&(m+=c[S+1].dist(c[S]));for(let S=o.segment||0;S>=0;S--)w[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:y},S>0&&(y+=c[S-1].dist(c[S]));for(let S=0;S<c.length;S++){const E=w[S];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(o,c,h,m,y,w,S,E,I,P,F,L){const j=o.indexArray,H=o.layoutVertexArray,W=o.segments.prepareSegment(4*c.length,H,j,this.canOverlap?w.sortKey:void 0),J=this.glyphOffsetArray.length,ne=W.vertexLength,le=this.allowVerticalPlacement&&S===_.ai.vertical?Math.PI/2:0,oe=w.text&&w.text.sections;for(let pe=0;pe<c.length;pe++){const{tl:ge,tr:Ee,bl:We,br:nt,tex:Ge,pixelOffsetTL:He,pixelOffsetBR:Ve,minFontScaleX:Ke,minFontScaleY:je,glyphOffset:Re,isSDF:lt,sectionIndex:tt}=c[pe],Lt=W.vertexLength,Pn=Re[1];Vu(H,E.x,E.y,ge.x,Pn+ge.y,Ge.x,Ge.y,h,lt,He.x,He.y,Ke,je),Vu(H,E.x,E.y,Ee.x,Pn+Ee.y,Ge.x+Ge.w,Ge.y,h,lt,Ve.x,He.y,Ke,je),Vu(H,E.x,E.y,We.x,Pn+We.y,Ge.x,Ge.y+Ge.h,h,lt,He.x,Ve.y,Ke,je),Vu(H,E.x,E.y,nt.x,Pn+nt.y,Ge.x+Ge.w,Ge.y+Ge.h,h,lt,Ve.x,Ve.y,Ke,je),Zm(o.dynamicLayoutVertexArray,E,le),j.emplaceBack(Lt,Lt+1,Lt+2),j.emplaceBack(Lt+1,Lt+2,Lt+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Re[0]),pe!==c.length-1&&tt===c[pe+1].sectionIndex||o.programConfigurations.populatePaintArrays(H.length,w,w.index,{},L,oe&&oe[tt])}o.placedSymbolArray.emplaceBack(E.x,E.y,J,this.glyphOffsetArray.length-J,ne,I,P,E.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,F)}_addCollisionDebugVertex(o,c,h,m,y,w){return c.emplaceBack(0,0),o.emplaceBack(h.x,h.y,m,y,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(o,c,h,m,y,w,S){const E=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),I=E.vertexLength,P=y.layoutVertexArray,F=y.collisionVertexArray,L=S.anchorX,j=S.anchorY;this._addCollisionDebugVertex(P,F,w,L,j,new ct(o,c)),this._addCollisionDebugVertex(P,F,w,L,j,new ct(h,c)),this._addCollisionDebugVertex(P,F,w,L,j,new ct(h,m)),this._addCollisionDebugVertex(P,F,w,L,j,new ct(o,m)),E.vertexLength+=4;const H=y.indexArray;H.emplaceBack(I,I+1),H.emplaceBack(I+1,I+2),H.emplaceBack(I+2,I+3),H.emplaceBack(I+3,I),E.primitiveLength+=4}addDebugCollisionBoxes(o,c,h,m){for(let y=o;y<c;y++){const w=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lc(Yn,Vm.members,Si),this.iconCollisionBox=new Lc(Yn,Vm.members,Si);for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(o,c,h,m,y,w,S,E,I){const P={};for(let F=c;F<h;F++){const L=o.get(F);P.textBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},P.textFeatureIndex=L.featureIndex;break}for(let F=m;F<y;F++){const L=o.get(F);P.verticalTextBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},P.verticalTextFeatureIndex=L.featureIndex;break}for(let F=w;F<S;F++){const L=o.get(F);P.iconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},P.iconFeatureIndex=L.featureIndex;break}for(let F=E;F<I;F++){const L=o.get(F);P.verticalIconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},P.verticalIconFeatureIndex=L.featureIndex;break}return P}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const h=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,c){const h=o.placedSymbolArray.get(c),m=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<m;y+=4)o.indexArray.emplaceBack(y,y+1,y+2),o.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const c=Math.sin(o),h=Math.cos(o),m=[],y=[],w=[];for(let S=0;S<this.symbolInstances.length;++S){w.push(S);const E=this.symbolInstances.get(S);m.push(0|Math.round(c*E.anchorX+h*E.anchorY)),y.push(E.featureIndex)}return w.sort((S,E)=>m[S]-m[E]||y[E]-y[S]),w}addToSortKeyRanges(o,c){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===c?h.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const h=this.symbolInstances.get(c);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,y,w)=>{m>=0&&w.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ub,Km;Qe("SymbolBucket",Id,{omit:["layers","collisionBoxArray","features","compareText"]}),Id.MAX_GLYPHS=65535,Id.addDynamicAttributes=Zm;var Xm={get paint(){return Km=Km||new Gn({"icon-opacity":new ut(ke.paint_symbol["icon-opacity"]),"icon-color":new ut(ke.paint_symbol["icon-color"]),"icon-halo-color":new ut(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new ut(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ut(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new rt(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new rt(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new ut(ke.paint_symbol["text-opacity"]),"text-color":new ut(ke.paint_symbol["text-color"],{runtimeType:Sr,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new ut(ke.paint_symbol["text-halo-color"]),"text-halo-width":new ut(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new ut(ke.paint_symbol["text-halo-blur"]),"text-translate":new rt(ke.paint_symbol["text-translate"]),"text-translate-anchor":new rt(ke.paint_symbol["text-translate-anchor"])})},get layout(){return ub=ub||new Gn({"symbol-placement":new rt(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new rt(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new rt(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ut(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new rt(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new rt(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new rt(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new rt(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new rt(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new rt(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new ut(ke.layout_symbol["icon-size"]),"icon-text-fit":new rt(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new rt(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new ut(ke.layout_symbol["icon-image"]),"icon-rotate":new ut(ke.layout_symbol["icon-rotate"]),"icon-padding":new ut(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new rt(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new ut(ke.layout_symbol["icon-offset"]),"icon-anchor":new ut(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new rt(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new rt(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new rt(ke.layout_symbol["text-rotation-alignment"]),"text-field":new ut(ke.layout_symbol["text-field"]),"text-font":new ut(ke.layout_symbol["text-font"]),"text-size":new ut(ke.layout_symbol["text-size"]),"text-max-width":new ut(ke.layout_symbol["text-max-width"]),"text-line-height":new rt(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new ut(ke.layout_symbol["text-letter-spacing"]),"text-justify":new ut(ke.layout_symbol["text-justify"]),"text-radial-offset":new ut(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new rt(ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ut(ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ut(ke.layout_symbol["text-anchor"]),"text-max-angle":new rt(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new rt(ke.layout_symbol["text-writing-mode"]),"text-rotate":new ut(ke.layout_symbol["text-rotate"]),"text-padding":new rt(ke.layout_symbol["text-padding"]),"text-keep-upright":new rt(ke.layout_symbol["text-keep-upright"]),"text-transform":new ut(ke.layout_symbol["text-transform"]),"text-offset":new ut(ke.layout_symbol["text-offset"]),"text-allow-overlap":new rt(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new rt(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new rt(ke.layout_symbol["text-ignore-placement"]),"text-optional":new rt(ke.layout_symbol["text-optional"])})}};class hb{constructor(o){if(void 0===o.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:ys,this.defaultValue=o}evaluate(o){if(o.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qe("FormatSectionOverride",hb,{omit:["defaultValue"]});class cp extends Lo{constructor(o){super(o,Xm)}recalculate(o,c){if(super.recalculate(o,c),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const y of h)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,c,h,m){const y=this.layout.get(o).evaluate(c,{},h,m),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||dd(w.value)||!y?y:(S=c.properties,y.replace(/{([^{}]+)}/g,(I,P)=>P in S?String(S[P]):""));var S}createBucket(o){return new Id(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of Xm.paint.overridableProperties){if(!cp.hasPaintOverride(this.layout,o))continue;const c=this.paint.get(o),h=new hb(c),m=new Tl(h,c.property.specification);let y=null;y="constant"===c.value.kind||"source"===c.value.kind?new cu("source",m):new gc("composite",m,c.value.zoomStops),this.paint._values[o]=new ki(c.property,y,c.parameters)}}_handleOverridablePaintPropertyUpdate(o,c,h){return!(!this.layout||c.isDataDriven()||h.isDataDriven())&&cp.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,c){const h=o.get("text-field"),m=Xm.paint.properties[c];let y=!1;const w=S=>{for(const E of S)if(m.overrides&&m.overrides.hasOverride(E))return void(y=!0)};if("constant"===h.value.kind&&h.value.value instanceof Ki)w(h.value.value.sections);else if("source"===h.value.kind){const S=I=>{y||(I instanceof xs&&Kn(I.value)===X?w(I.value.sections):I instanceof kl?w(I.sections):I.eachChild(S))},E=h.value;E._styleExpression&&S(E._styleExpression.expression)}return y}}let o_;var pb={get paint(){return o_=o_||new Gn({"background-color":new rt(ke.paint_background["background-color"]),"background-pattern":new zo(ke.paint_background["background-pattern"]),"background-opacity":new rt(ke.paint_background["background-opacity"])})}};class dp extends Lo{constructor(o){super(o,pb)}}let Qm;var mb={get paint(){return Qm=Qm||new Gn({"raster-opacity":new rt(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new rt(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new rt(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new rt(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new rt(ke.paint_raster["raster-saturation"]),"raster-contrast":new rt(ke.paint_raster["raster-contrast"]),"raster-resampling":new rt(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new rt(ke.paint_raster["raster-fade-duration"])})}};class s_ extends Lo{constructor(o){super(o,mb)}}class V1 extends Lo{constructor(o){super(o,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=o}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class a_{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const l_=6371008.8;class Vl{constructor(o,c){if(isNaN(o)||isNaN(c))throw new Error(`Invalid LngLat object: (${o}, ${c})`);if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Vl(xa(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const c=Math.PI/180,h=this.lat*c,m=o.lat*c,y=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((o.lng-this.lng)*c);return l_*Math.acos(Math.min(y,1))}static convert(o){if(o instanceof Vl)return o;if(Array.isArray(o)&&(2===o.length||3===o.length))return new Vl(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&"object"==typeof o&&null!==o)return new Vl(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const c_=2*Math.PI*l_;function up(l){return c_*Math.cos(l*Math.PI/180)}function fb(l){return(180+l)/360}function gb(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function hp(l,o){return l/up(o)}function d_(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class Ym{constructor(o,c,h=0){this.x=+o,this.y=+c,this.z=+h}static fromLngLat(o,c=0){const h=Vl.convert(o);return new Ym(fb(h.lng),gb(h.lat),hp(c,h.lat))}toLngLat(){return new Vl(360*this.x-180,d_(this.y))}toAltitude(){return this.z*up(d_(this.y))}meterInMercatorCoordinateUnits(){return 1/c_*(o=d_(this.y),1/Math.cos(o*Math.PI/180));var o}}function _b(l,o,c){var h=2*Math.PI*6378137/256/Math.pow(2,c);return[l*h-2*Math.PI*6378137/2,o*h-2*Math.PI*6378137/2]}class u_{constructor(o,c,h){if(o<0||o>25||h<0||h>=Math.pow(2,o)||c<0||c>=Math.pow(2,o))throw new Error(`x=${c}, y=${h}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=c,this.y=h,this.key=jl(0,o,o,c,h)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,c,h){const m=(w=this.y,S=this.z,E=_b(256*(y=this.x),256*(w=Math.pow(2,S)-w-1),S),I=_b(256*(y+1),256*(w+1),S),E[0]+","+E[1]+","+I[0]+","+I[1]);var y,w,S,E,I;const P=function(F,L,j){let H,W="";for(let J=F;J>0;J--)H=1<<J-1,W+=(L&H?1:0)+(j&H?2:0);return W}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===h?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,P).replace(/{bbox-epsg-3857}/g,m)}isChildOf(o){const c=this.z-o.z;return c>0&&o.x===this.x>>c&&o.y===this.y>>c}getTilePoint(o){const c=Math.pow(2,this.z);return new ct((o.x*c-this.x)*Ci,(o.y*c-this.y)*Ci)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vb{constructor(o,c){this.wrap=o,this.canonical=c,this.key=jl(o,c.z,c.z,c.x,c.y)}}class Uo{constructor(o,c,h,m,y){if(o<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${h}`);this.overscaledZ=o,this.wrap=c,this.canonical=new u_(h,+m,+y),this.key=jl(c,o,h,m,y)}clone(){return new Uo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-o;return o>this.canonical.z?new Uo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Uo(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(o,c){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-o;return o>this.canonical.z?jl(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y):jl(this.wrap*+c,o,o,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const c=this.canonical.z-o.canonical.z;return 0===o.overscaledZ||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c}children(o){if(this.overscaledZ>=o)return[new Uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Uo(c,this.wrap,c,h,m),new Uo(c,this.wrap,c,h+1,m),new Uo(c,this.wrap,c,h,m+1),new Uo(c,this.wrap,c,h+1,m+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Uo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new Ym(o.x-this.wrap,o.y))}}function jl(l,o,c,h,m){(l*=2)<0&&(l=-1*l-1);const y=1<<c;return(y*y*l+y*m+h).toString(36)+c.toString(36)+o.toString(36)}Qe("CanonicalTileID",u_),Qe("OverscaledTileID",Uo,{omit:["posMatrix"]});class ju{constructor(o,c,h,m=1,y=1,w=1,S=0){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Zi(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const E=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=y,this.blueFactor=w,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<E;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(E,I)]=this.data[this._idx(E-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,E)]=this.data[this._idx(I,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<E;I++)for(let P=0;P<E;P++){const F=this.get(I,P);F>this.max&&(this.max=F),F<this.min&&(this.min=F)}}get(o,c){const h=new Uint8Array(this.data.buffer),m=4*this._idx(o,c);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(o+1)}unpack(o,c,h){return o*this.redFactor+c*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ho({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,c,h){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let m=c*this.dim,y=c*this.dim+this.dim,w=h*this.dim,S=h*this.dim+this.dim;switch(c){case-1:m=y-1;break;case 1:y=m+1}switch(h){case-1:w=S-1;break;case 1:S=w+1}const E=-c*this.dim,I=-h*this.dim;for(let P=w;P<S;P++)for(let F=m;F<y;F++)this.data[this._idx(F,P)]=o.data[this._idx(F+E,P+I)]}}Qe("DEMData",ju);class Jm{constructor(o){this._stringToNumber={},this._numberToString=[];for(let c=0;c<o.length;c++){const h=o[c];this._stringToNumber[h]=c,this._numberToString[c]=h}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class ef{constructor(o,c,h,m,y){this.type="Feature",this._vectorTileFeature=o,o._z=c,o._x=h,o._y=m,this.properties=o.properties,this.id=y}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const c in this)"_geometry"!==c&&"_vectorTileFeature"!==c&&(o[c]=this[c]);return o}}class tf{constructor(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Al(Ci,16,0),this.grid3D=new Al(Ci,16,0),this.featureIndexArray=new Ie,this.promoteId=c}insert(o,c,h,m,y,w){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,y);const E=w?this.grid3D:this.grid;for(let I=0;I<c.length;I++){const P=c[I],F=[1/0,1/0,-1/0,-1/0];for(let L=0;L<P.length;L++){const j=P[L];F[0]=Math.min(F[0],j.x),F[1]=Math.min(F[1],j.y),F[2]=Math.max(F[2],j.x),F[3]=Math.max(F[3],j.y)}F[0]<Ci&&F[1]<Ci&&F[2]>=0&&F[3]>=0&&E.insert(S,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ca.VectorTile(new Fi(this.rawTileData)).layers,this.sourceLayerCoder=new Jm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,c,h,m){this.loadVTLayers();const y=o.params||{},w=Ci/o.tileSize/o.scale,S=hd(y.filter),E=o.queryGeometry,I=o.queryPadding*w,P=nf(E),F=this.grid.query(P.minX-I,P.minY-I,P.maxX+I,P.maxY+I),L=nf(o.cameraQueryGeometry),j=this.grid3D.query(L.minX-I,L.minY-I,L.maxX+I,L.maxY+I,(J,ne,le,oe)=>function(pe,ge,Ee,We,nt){for(const He of pe)if(ge<=He.x&&Ee<=He.y&&We>=He.x&&nt>=He.y)return!0;const Ge=[new ct(ge,Ee),new ct(ge,nt),new ct(We,nt),new ct(We,Ee)];if(pe.length>2)for(const He of Ge)if(Rs(pe,He))return!0;for(let He=0;He<pe.length-1;He++)if(jo(pe[He],pe[He+1],Ge))return!0;return!1}(o.cameraQueryGeometry,J-I,ne-I,le+I,oe+I));for(const J of j)F.push(J);F.sort(h_);const H={};let W;for(let J=0;J<F.length;J++){const ne=F[J];if(ne===W)continue;W=ne;const le=this.featureIndexArray.get(ne);let oe=null;this.loadMatchingFeature(H,le.bucketIndex,le.sourceLayerIndex,le.featureIndex,S,y.layers,y.availableImages,c,h,m,(pe,ge,Ee)=>(oe||(oe=Nl(pe)),ge.queryIntersectsFeature(E,pe,Ee,oe,this.z,o.transform,w,o.pixelPosMatrix)))}return H}loadMatchingFeature(o,c,h,m,y,w,S,E,I,P,F){const L=this.bucketLayerIDs[c];if(w&&!function(J,ne){for(let le=0;le<J.length;le++)if(ne.indexOf(J[le])>=0)return!0;return!1}(w,L))return;const j=this.sourceLayerCoder.decode(h),H=this.vtLayers[j].feature(m);if(y.needGeometry){const J=Sc(H,!0);if(!y.filter(new gn(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!y.filter(new gn(this.tileID.overscaledZ),H))return;const W=this.getId(H,j);for(let J=0;J<L.length;J++){const ne=L[J];if(w&&w.indexOf(ne)<0)continue;const le=E[ne];if(!le)continue;let oe={};W&&P&&(oe=P.getState(le.sourceLayer||"_geojsonTileLayer",W));const pe=qi({},I[ne]);pe.paint=Bc(pe.paint,le.paint,H,oe,S),pe.layout=Bc(pe.layout,le.layout,H,oe,S);const ge=!F||F(H,le,oe);if(!ge)continue;const Ee=new ef(H,this.z,this.x,this.y,W);Ee.layer=pe;let We=o[ne];void 0===We&&(We=o[ne]=[]),We.push({featureIndex:m,feature:Ee,intersectionZ:ge})}}lookupSymbolFeatures(o,c,h,m,y,w,S,E){const I={};this.loadVTLayers();const P=hd(y);for(const F of o)this.loadMatchingFeature(I,h,m,F,P,w,S,E,c);return I}hasLayer(o){for(const c of this.bucketLayerIDs)for(const h of c)if(o===h)return!0;return!1}getId(o,c){let h=o.id;return this.promoteId&&(h=o.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[c]],"boolean"==typeof h&&(h=Number(h))),h}}function Bc(l,o,c,h,m){return Zn(l,(y,w)=>{const S=o instanceof no?o.get(w):null;return S&&S.evaluate?S.evaluate(c,h,m):S})}function nf(l){let o=1/0,c=1/0,h=-1/0,m=-1/0;for(const y of l)o=Math.min(o,y.x),c=Math.min(c,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return{minX:o,minY:c,maxX:h,maxY:m}}function h_(l,o){return o-l}function Hu(l,o,c,h,m){const y=[];for(let w=0;w<l.length;w++){const S=l[w];let E;for(let I=0;I<S.length-1;I++){let P=S[I],F=S[I+1];P.x<o&&F.x<o||(P.x<o?P=new ct(o,P.y+(o-P.x)/(F.x-P.x)*(F.y-P.y))._round():F.x<o&&(F=new ct(o,P.y+(o-P.x)/(F.x-P.x)*(F.y-P.y))._round()),P.y<c&&F.y<c||(P.y<c?P=new ct(P.x+(c-P.y)/(F.y-P.y)*(F.x-P.x),c)._round():F.y<c&&(F=new ct(P.x+(c-P.y)/(F.y-P.y)*(F.x-P.x),c)._round()),P.x>=h&&F.x>=h||(P.x>=h?P=new ct(h,P.y+(h-P.x)/(F.x-P.x)*(F.y-P.y))._round():F.x>=h&&(F=new ct(h,P.y+(h-P.x)/(F.x-P.x)*(F.y-P.y))._round()),P.y>=m&&F.y>=m||(P.y>=m?P=new ct(P.x+(m-P.y)/(F.y-P.y)*(F.x-P.x),m)._round():F.y>=m&&(F=new ct(P.x+(m-P.y)/(F.y-P.y)*(F.x-P.x),m)._round()),E&&P.equals(E[E.length-1])||(E=[P],y.push(E)),E.push(F)))))}}return y}Qe("FeatureIndex",tf,{omit:["rawTileData","sourceLayerCoder"]});class Ns extends ct{constructor(o,c,h,m){super(o,c),this.angle=h,void 0!==m&&(this.segment=m)}clone(){return new Ns(this.x,this.y,this.angle,this.segment)}}function Ka(l,o,c,h,m){if(void 0===o.segment||0===c)return!0;let y=o,w=o.segment+1,S=0;for(;S>-c/2;){if(w--,w<0)return!1;S-=l[w].dist(y),y=l[w]}S+=l[w].dist(l[w+1]),w++;const E=[];let I=0;for(;S<c/2;){const P=l[w],F=l[w+1];if(!F)return!1;let L=l[w-1].angleTo(P)-P.angleTo(F);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:S,angleDelta:L}),I+=L;S-E[0].distance>h;)I-=E.shift().angleDelta;if(I>m)return!1;w++,S+=P.dist(F)}return!0}function p_(l){let o=0;for(let c=0;c<l.length-1;c++)o+=l[c].dist(l[c+1]);return o}function m_(l,o,c){return l?.6*o*c:0}function f_(l,o){return Math.max(l?l.right-l.left:0,o?o.right-o.left:0)}function g_(l,o,c,h,m,y){const w=m_(c,m,y),S=f_(c,h)*y;let E=0;const I=p_(l)/2;for(let P=0;P<l.length-1;P++){const F=l[P],L=l[P+1],j=F.dist(L);if(E+j>I){const H=(I-E)/j,W=ho.number(F.x,L.x,H),J=ho.number(F.y,L.y,H),ne=new Ns(W,J,L.angleTo(F),P);return ne._round(),!w||Ka(l,ne,S,w,o)?ne:void 0}E+=j}}function rf(l,o,c,h,m,y,w,S,E){const I=m_(h,y,w),P=f_(h,m),F=P*w,L=0===l[0].x||l[0].x===E||0===l[0].y||l[0].y===E;return o-F<o/4&&(o=F+o/4),__(l,L?o/2*S%o:(P/2+2*y)*w*S%o,o,I,c,F,L,!1,E)}function __(l,o,c,h,m,y,w,S,E){const I=y/2,P=p_(l);let F=0,L=o-c,j=[];for(let H=0;H<l.length-1;H++){const W=l[H],J=l[H+1],ne=W.dist(J),le=J.angleTo(W);for(;L+c<F+ne;){L+=c;const oe=(L-F)/ne,pe=ho.number(W.x,J.x,oe),ge=ho.number(W.y,J.y,oe);if(pe>=0&&pe<E&&ge>=0&&ge<E&&L-I>=0&&L+I<=P){const Ee=new Ns(pe,ge,le,H);Ee._round(),h&&!Ka(l,Ee,y,h,m)||j.push(Ee)}}F+=ne}return S||j.length||w||(j=__(l,F/2,c,h,m,y,w,!0,E)),j}Qe("Anchor",Ns);const Ad=pr;function v_(l,o,c,h){const m=[],y=l.image,w=y.pixelRatio,S=y.paddedRect.w-2*Ad,E=y.paddedRect.h-2*Ad,I=l.right-l.left,P=l.bottom-l.top,F=y.stretchX||[[0,S]],L=y.stretchY||[[0,E]],j=(Ve,Ke)=>Ve+Ke[1]-Ke[0],H=F.reduce(j,0),W=L.reduce(j,0),J=S-H,ne=E-W;let le=0,oe=H,pe=0,ge=W,Ee=0,We=J,nt=0,Ge=ne;if(y.content&&h){const Ve=y.content;le=Uu(F,0,Ve[0]),pe=Uu(L,0,Ve[1]),oe=Uu(F,Ve[0],Ve[2]),ge=Uu(L,Ve[1],Ve[3]),Ee=Ve[0]-le,nt=Ve[1]-pe,We=Ve[2]-Ve[0]-oe,Ge=Ve[3]-Ve[1]-ge}const He=(Ve,Ke,je,Re)=>{const lt=pp(Ve.stretch-le,oe,I,l.left),tt=Pr(Ve.fixed-Ee,We,Ve.stretch,H),Lt=pp(Ke.stretch-pe,ge,P,l.top),Pn=Pr(Ke.fixed-nt,Ge,Ke.stretch,W),$n=pp(je.stretch-le,oe,I,l.left),Ni=Pr(je.fixed-Ee,We,je.stretch,H),bo=pp(Re.stretch-pe,ge,P,l.top),Rr=Pr(Re.fixed-nt,Ge,Re.stretch,W),vi=new ct(lt,Lt),Ti=new ct($n,Lt),ji=new ct($n,bo),zi=new ct(lt,bo),Wr=new ct(tt/w,Pn/w),Li=new ct(Ni/w,Rr/w),Hi=o*Math.PI/180;if(Hi){const Fr=Math.sin(Hi),Ui=Math.cos(Hi),gr=[Ui,-Fr,Fr,Ui];vi._matMult(gr),Ti._matMult(gr),zi._matMult(gr),ji._matMult(gr)}const Or=Ve.stretch+Ve.fixed,fr=Ke.stretch+Ke.fixed;return{tl:vi,tr:Ti,bl:zi,br:ji,tex:{x:y.paddedRect.x+Ad+Or,y:y.paddedRect.y+Ad+fr,w:je.stretch+je.fixed-Or,h:Re.stretch+Re.fixed-fr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wr,pixelOffsetBR:Li,minFontScaleX:We/w/I,minFontScaleY:Ge/w/P,isSDF:c}};if(h&&(y.stretchX||y.stretchY)){const Ve=y_(F,J,H),Ke=y_(L,ne,W);for(let je=0;je<Ve.length-1;je++){const Re=Ve[je],lt=Ve[je+1];for(let tt=0;tt<Ke.length-1;tt++)m.push(He(Re,Ke[tt],lt,Ke[tt+1]))}}else m.push(He({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:E+1}));return m}function Uu(l,o,c){let h=0;for(const m of l)h+=Math.max(o,Math.min(c,m[1]))-Math.max(o,Math.min(c,m[0]));return h}function y_(l,o,c){const h=[{fixed:-Ad,stretch:0}];for(const[m,y]of l){const w=h[h.length-1];h.push({fixed:m-w.stretch,stretch:w.stretch}),h.push({fixed:m-w.stretch,stretch:w.stretch+(y-m)})}return h.push({fixed:o+Ad,stretch:c}),h}function pp(l,o,c,h){return l/o*c+h}function Pr(l,o,c,h){return l-o*c/h}class Pd{constructor(o,c,h,m,y,w,S,E,I,P){if(this.boxStartIndex=o.length,I){let F=w.top,L=w.bottom;const j=w.collisionPadding;j&&(F-=j[1],L+=j[3]);let H=L-F;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{let F=w.top*S-E[0],L=w.bottom*S+E[2],j=w.left*S-E[3],H=w.right*S+E[1];const W=w.collisionPadding;if(W&&(j-=W[0]*S,F-=W[1]*S,H+=W[2]*S,L+=W[3]*S),P){const J=new ct(j,F),ne=new ct(H,F),le=new ct(j,L),oe=new ct(H,L),pe=P*Math.PI/180;J._rotate(pe),ne._rotate(pe),le._rotate(pe),oe._rotate(pe),j=Math.min(J.x,ne.x,le.x,oe.x),H=Math.max(J.x,ne.x,le.x,oe.x),F=Math.min(J.y,ne.y,le.y,oe.y),L=Math.max(J.y,ne.y,le.y,oe.y)}o.emplaceBack(c.x,c.y,j,F,H,L,h,m,y)}this.boxEndIndex=o.length}}class b_{constructor(o=[],c=sf){if(this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const o=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:c,compare:h}=this,m=c[o];for(;o>0;){const y=o-1>>1,w=c[y];if(h(m,w)>=0)break;c[o]=w,o=y}c[o]=m}_down(o){const{data:c,compare:h}=this,m=this.length>>1,y=c[o];for(;o<m;){let w=1+(o<<1),S=c[w];const E=w+1;if(E<this.length&&h(c[E],S)<0&&(w=E,S=c[E]),h(S,y)>=0)break;c[o]=S,o=w}c[o]=y}}function sf(l,o){return l<o?-1:l>o?1:0}function $r(l,o=1,c=!1){let h=1/0,m=1/0,y=-1/0,w=-1/0;const S=l[0];for(let j=0;j<S.length;j++){const H=S[j];(!j||H.x<h)&&(h=H.x),(!j||H.y<m)&&(m=H.y),(!j||H.x>y)&&(y=H.x),(!j||H.y>w)&&(w=H.y)}const E=Math.min(y-h,w-m);let I=E/2;const P=new b_([],Gu);if(0===E)return new ct(h,m);for(let j=h;j<y;j+=E)for(let H=m;H<w;H+=E)P.push(new Vc(j+I,H+I,I,l));let F=function(j){let H=0,W=0,J=0;const ne=j[0];for(let le=0,oe=ne.length,pe=oe-1;le<oe;pe=le++){const ge=ne[le],Ee=ne[pe],We=ge.x*Ee.y-Ee.x*ge.y;W+=(ge.x+Ee.x)*We,J+=(ge.y+Ee.y)*We,H+=3*We}return new Vc(W/H,J/H,0,j)}(l),L=P.length;for(;P.length;){const j=P.pop();(j.d>F.d||!F.d)&&(F=j,c&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,L)),j.max-F.d<=o||(I=j.h/2,P.push(new Vc(j.p.x-I,j.p.y-I,I,l)),P.push(new Vc(j.p.x+I,j.p.y-I,I,l)),P.push(new Vc(j.p.x-I,j.p.y+I,I,l)),P.push(new Vc(j.p.x+I,j.p.y+I,I,l)),L+=4)}return c&&(console.log(`num probes: ${L}`),console.log(`best distance: ${F.d}`)),F.p}function Gu(l,o){return o.max-l.max}function Vc(l,o,c,h){this.p=new ct(l,o),this.h=c,this.d=function(m,y){let w=!1,S=1/0;for(let E=0;E<y.length;E++){const I=y[E];for(let P=0,F=I.length,L=F-1;P<F;L=P++){const j=I[P],H=I[L];j.y>m.y!=H.y>m.y&&m.x<(H.x-j.x)*(m.y-j.y)/(H.y-j.y)+j.x&&(w=!w),S=Math.min(S,Fg(m,j,H))}}return(w?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var nr;_.aq=void 0,(nr=_.aq||(_.aq={}))[nr.center=1]="center",nr[nr.left=2]="left",nr[nr.right=3]="right",nr[nr.top=4]="top",nr[nr.bottom=5]="bottom",nr[nr["top-left"]=6]="top-left",nr[nr["top-right"]=7]="top-right",nr[nr["bottom-left"]=8]="bottom-left",nr[nr["bottom-right"]=9]="bottom-right";const Hl=7,mp=Number.POSITIVE_INFINITY;function x_(l,o){return o[1]!==mp?function(c,h,m){let y=0,w=0;switch(h=Math.abs(h),m=Math.abs(m),c){case"top-right":case"top-left":case"top":w=m-Hl;break;case"bottom-right":case"bottom-left":case"bottom":w=-m+Hl}switch(c){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,w]}(l,o[0],o[1]):function(c,h){let m=0,y=0;h<0&&(h=0);const w=h/Math.SQRT2;switch(c){case"top-right":case"top-left":y=w-Hl;break;case"bottom-right":case"bottom-left":y=-w+Hl;break;case"bottom":y=-h+Hl;break;case"top":y=h-Hl}switch(c){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(l,o[0])}function af(l,o,c){var h;const m=l.layout,y=null===(h=m.get("text-variable-anchor-offset"))||void 0===h?void 0:h.evaluate(o,{},c);if(y){const S=y.values,E=[];for(let I=0;I<S.length;I+=2){const P=E[I]=S[I],F=S[I+1].map(L=>L*Ri);P.startsWith("top")?F[1]-=Hl:P.startsWith("bottom")&&(F[1]+=Hl),E[I+1]=F}return new uo(E)}const w=m.get("text-variable-anchor");if(w){let S;S=void 0!==l._unevaluatedLayout.getValue("text-radial-offset")?[m.get("text-radial-offset").evaluate(o,{},c)*Ri,mp]:m.get("text-offset").evaluate(o,{},c).map(I=>I*Ri);const E=[];for(const I of w)E.push(I,x_(I,S));return new uo(E)}return null}function lf(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function w_(l,o,c,h,m,y,w,S,E,I,P){let F=y.textMaxSize.evaluate(o,{});void 0===F&&(F=w);const L=l.layers[0].layout,j=L.get("icon-offset").evaluate(o,{},P),H=S_(c.horizontal),W=w/24,J=l.tilePixelRatio*W,ne=l.tilePixelRatio*F/24,le=l.tilePixelRatio*S,oe=l.tilePixelRatio*L.get("symbol-spacing"),pe=L.get("text-padding")*l.tilePixelRatio,ge=function(Re,lt,tt,Lt=1){const Pn=Re.get("icon-padding").evaluate(lt,{},tt),$n=Pn&&Pn.values;return[$n[0]*Lt,$n[1]*Lt,$n[2]*Lt,$n[3]*Lt]}(L,o,P,l.tilePixelRatio),Ee=L.get("text-max-angle")/180*Math.PI,We="viewport"!==L.get("text-rotation-alignment")&&"point"!==L.get("symbol-placement"),nt="map"===L.get("icon-rotation-alignment")&&"point"!==L.get("symbol-placement"),Ge=L.get("symbol-placement"),He=oe/2,Ve=L.get("icon-text-fit");let Ke;h&&"none"!==Ve&&(l.allowVerticalPlacement&&c.vertical&&(Ke=i_(h,c.vertical,Ve,L.get("icon-text-fit-padding"),j,W)),H&&(h=i_(h,H,Ve,L.get("icon-text-fit-padding"),j,W)));const je=(Re,lt)=>{lt.x<0||lt.x>=Ci||lt.y<0||lt.y>=Ci||function(tt,Lt,Pn,$n,Ni,bo,Rr,vi,Ti,ji,zi,Wr,Li,Hi,Or,fr,Fr,Ui,gr,yi,Ht,_r,ir,Wn,ds){const zs=tt.addToLineVertexArray(Lt,Pn);let Ls,Qa,us,si,ui=0,Ya=0,qu=0,T_=0,hf=-1,pf=-1;const Ja={};let mf=aa("");if(tt.allowVerticalPlacement&&$n.vertical){const qr=vi.layout.get("text-rotate").evaluate(Ht,{},Wn)+90;us=new Pd(Ti,Lt,ji,zi,Wr,$n.vertical,Li,Hi,Or,qr),Rr&&(si=new Pd(Ti,Lt,ji,zi,Wr,Rr,Fr,Ui,Or,qr))}if(Ni){const qr=vi.layout.get("icon-rotate").evaluate(Ht,{}),ps="none"!==vi.layout.get("icon-text-fit"),Gl=v_(Ni,qr,ir,ps),Bs=Rr?v_(Rr,qr,ir,ps):void 0;Qa=new Pd(Ti,Lt,ji,zi,Wr,Ni,Fr,Ui,!1,qr),ui=4*Gl.length;const Hc=tt.iconSizeData;let ha=null;"source"===Hc.kind?(ha=[ua*vi.layout.get("icon-size").evaluate(Ht,{})],ha[0]>cs&&Zi(`${tt.layerIds[0]}: Value for "icon-size" is >= ${Fs}. Reduce your "icon-size".`)):"composite"===Hc.kind&&(ha=[ua*_r.compositeIconSizes[0].evaluate(Ht,{},Wn),ua*_r.compositeIconSizes[1].evaluate(Ht,{},Wn)],(ha[0]>cs||ha[1]>cs)&&Zi(`${tt.layerIds[0]}: Value for "icon-size" is >= ${Fs}. Reduce your "icon-size".`)),tt.addSymbols(tt.icon,Gl,ha,yi,gr,Ht,_.ai.none,Lt,zs.lineStartIndex,zs.lineLength,-1,Wn),hf=tt.icon.placedSymbolArray.length-1,Bs&&(Ya=4*Bs.length,tt.addSymbols(tt.icon,Bs,ha,yi,gr,Ht,_.ai.vertical,Lt,zs.lineStartIndex,zs.lineLength,-1,Wn),pf=tt.icon.placedSymbolArray.length-1)}const E_=Object.keys($n.horizontal);for(const qr of E_){const ps=$n.horizontal[qr];if(!Ls){mf=aa(ps.text);const Bs=vi.layout.get("text-rotate").evaluate(Ht,{},Wn);Ls=new Pd(Ti,Lt,ji,zi,Wr,ps,Li,Hi,Or,Bs)}const Gl=1===ps.positionedLines.length;if(qu+=k_(tt,Lt,ps,bo,vi,Or,Ht,fr,zs,$n.vertical?_.ai.horizontal:_.ai.horizontalOnly,Gl?E_:[qr],Ja,hf,_r,Wn),Gl)break}$n.vertical&&(T_+=k_(tt,Lt,$n.vertical,bo,vi,Or,Ht,fr,zs,_.ai.vertical,["vertical"],Ja,pf,_r,Wn));const bb=Ls?Ls.boxStartIndex:tt.collisionBoxArray.length,xb=Ls?Ls.boxEndIndex:tt.collisionBoxArray.length,wb=us?us.boxStartIndex:tt.collisionBoxArray.length,yp=us?us.boxEndIndex:tt.collisionBoxArray.length,el=Qa?Qa.boxStartIndex:tt.collisionBoxArray.length,Zu=Qa?Qa.boxEndIndex:tt.collisionBoxArray.length,M_=si?si.boxStartIndex:tt.collisionBoxArray.length,D_=si?si.boxEndIndex:tt.collisionBoxArray.length;let hs=-1;const ff=(qr,ps)=>qr&&qr.circleDiameter?Math.max(qr.circleDiameter,ps):ps;hs=ff(Ls,hs),hs=ff(us,hs),hs=ff(Qa,hs),hs=ff(si,hs);const kb=hs>-1?1:0;kb&&(hs*=ds/Ri),tt.glyphOffsetArray.length>=Id.MAX_GLYPHS&&Zi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ht.sortKey&&tt.addToSortKeyRanges(tt.symbolInstances.length,Ht.sortKey);const j1=af(vi,Ht,Wn),[gf,_f]=function(qr,ps){const Gl=qr.length,Bs=ps?.values;if(Bs?.length>0)for(let Hc=0;Hc<Bs.length;Hc+=2){const ha=Bs[Hc+1];qr.emplaceBack(_.aq[Bs[Hc]],ha[0],ha[1])}return[Gl,qr.length]}(tt.textAnchorOffsets,j1);tt.symbolInstances.emplaceBack(Lt.x,Lt.y,Ja.right>=0?Ja.right:-1,Ja.center>=0?Ja.center:-1,Ja.left>=0?Ja.left:-1,Ja.vertical||-1,hf,pf,mf,bb,xb,wb,yp,el,Zu,M_,D_,ji,qu,T_,ui,Ya,kb,0,Li,hs,gf,_f)}(l,lt,Re,c,h,m,Ke,l.layers[0],l.collisionBoxArray,o.index,o.sourceLayerIndex,l.index,J,[pe,pe,pe,pe],We,E,le,ge,nt,j,o,y,I,P,w)};if("line"===Ge)for(const Re of Hu(o.geometry,0,0,Ci,Ci)){const lt=rf(Re,oe,Ee,c.vertical||H,h,24,ne,l.overscaling,Ci);for(const tt of lt)H&&cf(l,H.text,He,tt)||je(Re,tt)}else if("line-center"===Ge){for(const Re of o.geometry)if(Re.length>1){const lt=g_(Re,Ee,c.vertical||H,h,24,ne);lt&&je(Re,lt)}}else if("Polygon"===o.type)for(const Re of qh(o.geometry,0)){const lt=$r(Re,16);je(Re[0],new Ns(lt.x,lt.y,0))}else if("LineString"===o.type)for(const Re of o.geometry)je(Re,new Ns(Re[0].x,Re[0].y,0));else if("Point"===o.type)for(const Re of o.geometry)for(const lt of Re)je([lt],new Ns(lt.x,lt.y,0))}function k_(l,o,c,h,m,y,w,S,E,I,P,F,L,j,H){const W=function(le,oe,pe,ge,Ee,We,nt,Ge){const He=ge.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,Ve=[];for(const Ke of oe.positionedLines)for(const je of Ke.positionedGlyphs){if(!je.rect)continue;const Re=je.rect||{};let lt=Fc+1,tt=!0,Lt=1,Pn=0;const $n=(Ee||Ge)&&je.vertical,Ni=je.metrics.advance*je.scale/2;if(Ge&&oe.verticalizable&&(Pn=Ke.lineOffset/2-(je.imageName?-(Ri-je.metrics.width*je.scale)/2:(je.scale-1)*Ri)),je.imageName){const yi=nt[je.imageName];tt=yi.sdf,Lt=yi.pixelRatio,lt=pr/Lt}const bo=Ee?[je.x+Ni,je.y]:[0,0];let Rr=Ee?[0,0]:[je.x+Ni+pe[0],je.y+pe[1]-Pn],vi=[0,0];$n&&(vi=Rr,Rr=[0,0]);const Ti=je.metrics.isDoubleResolution?2:1,ji=(je.metrics.left-lt)*je.scale-Ni+Rr[0],zi=(-je.metrics.top-lt)*je.scale+Rr[1],Wr=ji+Re.w/Ti*je.scale/Lt,Li=zi+Re.h/Ti*je.scale/Lt,Hi=new ct(ji,zi),Or=new ct(Wr,zi),fr=new ct(ji,Li),Fr=new ct(Wr,Li);if($n){const yi=new ct(-Ni,Ni-Bu),Ht=-Math.PI/2,_r=Ri/2-Ni,ir=new ct(5-Bu-_r,-(je.imageName?_r:0)),Wn=new ct(...vi);Hi._rotateAround(Ht,yi)._add(ir)._add(Wn),Or._rotateAround(Ht,yi)._add(ir)._add(Wn),fr._rotateAround(Ht,yi)._add(ir)._add(Wn),Fr._rotateAround(Ht,yi)._add(ir)._add(Wn)}if(He){const yi=Math.sin(He),Ht=Math.cos(He),_r=[Ht,-yi,yi,Ht];Hi._matMult(_r),Or._matMult(_r),fr._matMult(_r),Fr._matMult(_r)}const Ui=new ct(0,0),gr=new ct(0,0);Ve.push({tl:Hi,tr:Or,bl:fr,br:Fr,tex:Re,writingMode:oe.writingMode,glyphOffset:bo,sectionIndex:je.sectionIndex,isSDF:tt,pixelOffsetTL:Ui,pixelOffsetBR:gr,minFontScaleX:0,minFontScaleY:0})}return Ve}(0,c,S,m,y,w,h,l.allowVerticalPlacement),J=l.textSizeData;let ne=null;"source"===J.kind?(ne=[ua*m.layout.get("text-size").evaluate(w,{})],ne[0]>cs&&Zi(`${l.layerIds[0]}: Value for "text-size" is >= ${Fs}. Reduce your "text-size".`)):"composite"===J.kind&&(ne=[ua*j.compositeTextSizes[0].evaluate(w,{},H),ua*j.compositeTextSizes[1].evaluate(w,{},H)],(ne[0]>cs||ne[1]>cs)&&Zi(`${l.layerIds[0]}: Value for "text-size" is >= ${Fs}. Reduce your "text-size".`)),l.addSymbols(l.text,W,ne,S,y,w,I,o,E.lineStartIndex,E.lineLength,L,H);for(const le of P)F[le]=l.text.placedSymbolArray.length-1;return 4*W.length}function S_(l){for(const o in l)return l[o];return null}function cf(l,o,c,h){const m=l.compareText;if(o in m){const y=m[o];for(let w=y.length-1;w>=0;w--)if(h.dist(y[w])<c)return!0}else m[o]=[];return m[o].push(h),!1}const fp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class df{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,h]=new Uint8Array(o,0,2);if(219!==c)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(1!==m)throw new Error(`Got v${m} data when expected v1.`);const y=fp[15&h];if(!y)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[S]=new Uint32Array(o,4,1);return new df(S,w,y,o)}constructor(o,c=64,h=Float64Array,m){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=h,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const y=fp.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,S=o*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-S%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+E,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+S+E),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+E,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=o)}add(o,c){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=o,this.coords[this._pos++]=c,h}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return jc(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,c,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:w,nodeSize:S}=this,E=[0,y.length-1,0],I=[];for(;E.length;){const P=E.pop()||0,F=E.pop()||0,L=E.pop()||0;if(F-L<=S){for(let J=L;J<=F;J++){const ne=w[2*J],le=w[2*J+1];ne>=o&&ne<=h&&le>=c&&le<=m&&I.push(y[J])}continue}const j=L+F>>1,H=w[2*j],W=w[2*j+1];H>=o&&H<=h&&W>=c&&W<=m&&I.push(y[j]),(0===P?o<=H:c<=W)&&(E.push(L),E.push(j-1),E.push(1-P)),(0===P?h>=H:m>=W)&&(E.push(j+1),E.push(F),E.push(1-P))}return I}within(o,c,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:w}=this,S=[0,m.length-1,0],E=[],I=h*h;for(;S.length;){const P=S.pop()||0,F=S.pop()||0,L=S.pop()||0;if(F-L<=w){for(let J=L;J<=F;J++)uf(y[2*J],y[2*J+1],o,c)<=I&&E.push(m[J]);continue}const j=L+F>>1,H=y[2*j],W=y[2*j+1];uf(H,W,o,c)<=I&&E.push(m[j]),(0===P?o-h<=H:c-h<=W)&&(S.push(L),S.push(j-1),S.push(1-P)),(0===P?o+h>=H:c+h>=W)&&(S.push(j+1),S.push(F),S.push(1-P))}return E}}function jc(l,o,c,h,m,y){if(m-h<=c)return;const w=h+m>>1;C_(l,o,w,h,m,y),jc(l,o,c,h,w-1,1-y),jc(l,o,c,w+1,m,1-y)}function C_(l,o,c,h,m,y){for(;m>h;){if(m-h>600){const I=m-h+1,P=c-h+1,F=Math.log(I),L=.5*Math.exp(2*F/3),j=.5*Math.sqrt(F*L*(I-L)/I)*(P-I/2<0?-1:1);C_(l,o,c,Math.max(h,Math.floor(c-P*L/I+j)),Math.min(m,Math.floor(c+(I-P)*L/I+j)),y)}const w=o[2*c+y];let S=h,E=m;for($u(l,o,h,c),o[2*m+y]>w&&$u(l,o,h,m);S<E;){for($u(l,o,S,E),S++,E--;o[2*S+y]<w;)S++;for(;o[2*E+y]>w;)E--}o[2*h+y]===w?$u(l,o,h,E):(E++,$u(l,o,E,m)),E<=c&&(h=E+1),c<=E&&(m=E-1)}}function $u(l,o,c,h){gp(l,c,h),gp(o,2*c,2*h),gp(o,2*c+1,2*h+1)}function gp(l,o,c){const h=l[o];l[o]=l[c],l[c]=h}function uf(l,o,c,h){const m=l-c,y=o-h;return m*m+y*y}var _p;_.bg=void 0,(_p=_.bg||(_.bg={})).create="create",_p.load="load",_p.fullLoad="fullLoad";let Xa=null,Ul=[];const vp=1e3/60,Wu="loadTime",Rd="fullLoadTime",yb={mark(l){performance.mark(l)},frame(l){const o=l;null!=Xa&&Ul.push(o-Xa),Xa=o},clearMetrics(){Xa=null,Ul=[],performance.clearMeasures(Wu),performance.clearMeasures(Rd);for(const l in _.bg)performance.clearMarks(_.bg[l])},getPerformanceMetrics(){performance.measure(Wu,_.bg.create,_.bg.load),performance.measure(Rd,_.bg.create,_.bg.fullLoad);const l=performance.getEntriesByName(Wu)[0].duration,o=performance.getEntriesByName(Rd)[0].duration,c=Ul.length,h=1/(Ul.reduce((y,w)=>y+w,0)/c/1e3),m=Ul.filter(y=>y>vp).reduce((y,w)=>y+(w-vp)/vp,0);return{loadTime:l,fullLoadTime:o,fps:h,percentDroppedFrames:m/(c+m)*100,totalFrames:c}}};_.$=function(l,o,c){var h,m,y,w,S,E,I,P,F,L,j,H,W=c[0],J=c[1],ne=c[2];return o===l?(l[12]=o[0]*W+o[4]*J+o[8]*ne+o[12],l[13]=o[1]*W+o[5]*J+o[9]*ne+o[13],l[14]=o[2]*W+o[6]*J+o[10]*ne+o[14],l[15]=o[3]*W+o[7]*J+o[11]*ne+o[15]):(m=o[1],y=o[2],w=o[3],S=o[4],E=o[5],I=o[6],P=o[7],F=o[8],L=o[9],j=o[10],H=o[11],l[0]=h=o[0],l[1]=m,l[2]=y,l[3]=w,l[4]=S,l[5]=E,l[6]=I,l[7]=P,l[8]=F,l[9]=L,l[10]=j,l[11]=H,l[12]=h*W+S*J+F*ne+o[12],l[13]=m*W+E*J+L*ne+o[13],l[14]=y*W+I*J+j*ne+o[14],l[15]=w*W+P*J+H*ne+o[15]),l},_.A=Cc,_.B=ho,_.C=class{constructor(l,o,c){this.receive=h=>{const m=h.data,y=m.id;if(y&&(!m.targetMapId||this.mapId===m.targetMapId))if("<cancel>"===m.type){delete this.tasks[y];const w=this.cancelCallbacks[y];delete this.cancelCallbacks[y],w&&w()}else Ii()||m.mustQueue?(this.tasks[y]=m,this.taskQueue.push(y),this.invoker.trigger()):this.processTask(y,m)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),m=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(h,m)},this.target=l,this.parent=o,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new a_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ii()?l:window}send(l,o,c,h,m=!1){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[y]=c);const w=[],S={id:y,type:l,hasCallback:!!c,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:na(o,w)};return this.target.postMessage(S,{transfer:w}),{cancel:()=>{c&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(l,o){if("<response>"===o.type){const c=this.callbacks[l];delete this.callbacks[l],c&&(o.error?c(za(o.error)):c(null,za(o.data)))}else{let c=!1;const h=[],m=o.hasCallback?(S,E)=>{c=!0,delete this.cancelCallbacks[l];const I={id:l,type:"<response>",sourceMapId:this.mapId,error:S?na(S):null,data:na(E,h)};this.target.postMessage(I,{transfer:h})}:S=>{c=!0};let y=null;const w=za(o.data);if(this.parent[o.type])y=this.parent[o.type](o.sourceMapId,w,m);else if("getWorkerSource"in this.parent){const S=o.type.split(".");y=this.parent.getWorkerSource(o.sourceMapId,S[0],w.source)[S[1]](w,m)}else m(new Error(`Could not find function ${o.type}`));!c&&y&&y.cancel&&(this.cancelCallbacks[l]=y.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},_.D=rt,_.E=yl,_.F=function(l,o){const c={};for(let h=0;h<o.length;h++){const m=o[h];m in l&&(c[m]=l[m])}return c},_.G=fb,_.H=gb,_.I=Nc,_.J=nd,_.K=Xo,_.L=Vl,_.M=_l,_.N=Ci,_.O=Uo,_.P=ct,_.Q=An,_.R=Ho,_.S=vn,_.T=yu,_.U=Ym,_.V=class extends Pl{},_.W=u_,_.X=function(l,o){const c=window.document.createElement("video");c.muted=!0,c.onloadstart=function(){o(null,c)};for(let h=0;h<l.length;h++){const m=window.document.createElement("source");Io(l[h])||(c.crossOrigin="Anonymous"),m.src=l[h],c.appendChild(m)}return{cancel:()=>{}}},_.Y=Fe,_.Z=function(){var l=new Cc(16);return Cc!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},_._=En,_.a=gl,_.a$=class extends V{},_.a0=function(l,o,c){var h=c[0],m=c[1],y=c[2];return l[0]=o[0]*h,l[1]=o[1]*h,l[2]=o[2]*h,l[3]=o[3]*h,l[4]=o[4]*m,l[5]=o[5]*m,l[6]=o[6]*m,l[7]=o[7]*m,l[8]=o[8]*y,l[9]=o[9]*y,l[10]=o[10]*y,l[11]=o[11]*y,l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l},_.a1=Ng,_.a2=function(){return fl++},_.a3=Q,_.a4=Id,_.a5=function(){wi.isLoading()||wi.isLoaded()||"deferred"!==ra()||li()},_.a6=hd,_.a7=Sc,_.a8=gn,_.a9=ef,_.aA=Mr,_.aB=function(l){l=l.slice();const o=Object.create(null);for(let c=0;c<l.length;c++)o[l[c].id]=l[c];for(let c=0;c<l.length;c++)"ref"in l[c]&&(l[c]=lo(l[c],o[l[c].ref]));return l},_.aC=function(l){if("custom"===l.type)return new V1(l);switch(l.type){case"background":return new dp(l);case"circle":return new $y(l);case"fill":return new Xy(l);case"fill-extrusion":return new A1(l);case"heatmap":return new pn(l);case"hillshade":return new Ar(l);case"line":return new rb(l);case"raster":return new s_(l);case"symbol":return new cp(l)}},_.aD=Lr,_.aE=function(l,o){if(!l)return[{command:rn.setStyle,args:[o]}];let c=[];try{if(!xn(l.version,o.version))return[{command:rn.setStyle,args:[o]}];xn(l.center,o.center)||c.push({command:rn.setCenter,args:[o.center]}),xn(l.zoom,o.zoom)||c.push({command:rn.setZoom,args:[o.zoom]}),xn(l.bearing,o.bearing)||c.push({command:rn.setBearing,args:[o.bearing]}),xn(l.pitch,o.pitch)||c.push({command:rn.setPitch,args:[o.pitch]}),xn(l.sprite,o.sprite)||c.push({command:rn.setSprite,args:[o.sprite]}),xn(l.glyphs,o.glyphs)||c.push({command:rn.setGlyphs,args:[o.glyphs]}),xn(l.transition,o.transition)||c.push({command:rn.setTransition,args:[o.transition]}),xn(l.light,o.light)||c.push({command:rn.setLight,args:[o.light]});const h={},m=[];!function(w,S,E,I){let P;for(P in S=S||{},w=w||{})Object.prototype.hasOwnProperty.call(w,P)&&(Object.prototype.hasOwnProperty.call(S,P)||bl(P,E,I));for(P in S)Object.prototype.hasOwnProperty.call(S,P)&&(Object.prototype.hasOwnProperty.call(w,P)?xn(w[P],S[P])||("geojson"===w[P].type&&"geojson"===S[P].type&&rc(w,S,P)?E.push({command:rn.setGeoJSONSourceData,args:[P,S[P].data]}):Ao(P,S,E,I)):co(P,S,E))}(l.sources,o.sources,m,h);const y=[];l.layers&&l.layers.forEach(w=>{h[w.source]?c.push({command:rn.removeLayer,args:[w.id]}):y.push(w)}),c=c.concat(m),function(w,S,E){S=S||[];const I=(w=w||[]).map(Xs),P=S.map(Xs),F=w.reduce(Ea,{}),L=S.reduce(Ea,{}),j=I.slice(),H=Object.create(null);let W,J,ne,le,oe,pe,ge;for(W=0,J=0;W<I.length;W++)ne=I[W],Object.prototype.hasOwnProperty.call(L,ne)?J++:(E.push({command:rn.removeLayer,args:[ne]}),j.splice(j.indexOf(ne,J),1));for(W=0,J=0;W<P.length;W++)ne=P[P.length-1-W],j[j.length-1-W]!==ne&&(Object.prototype.hasOwnProperty.call(F,ne)?(E.push({command:rn.removeLayer,args:[ne]}),j.splice(j.lastIndexOf(ne,j.length-J),1)):J++,pe=j[j.length-W],E.push({command:rn.addLayer,args:[L[ne],pe]}),j.splice(j.length-W,0,ne),H[ne]=!0);for(W=0;W<P.length;W++)if(ne=P[W],le=F[ne],oe=L[ne],!H[ne]&&!xn(le,oe))if(xn(le.source,oe.source)&&xn(le["source-layer"],oe["source-layer"])&&xn(le.type,oe.type)){for(ge in xl(le.layout,oe.layout,E,ne,null,rn.setLayoutProperty),xl(le.paint,oe.paint,E,ne,null,rn.setPaintProperty),xn(le.filter,oe.filter)||E.push({command:rn.setFilter,args:[ne,oe.filter]}),xn(le.minzoom,oe.minzoom)&&xn(le.maxzoom,oe.maxzoom)||E.push({command:rn.setLayerZoomRange,args:[ne,oe.minzoom,oe.maxzoom]}),le)Object.prototype.hasOwnProperty.call(le,ge)&&"layout"!==ge&&"paint"!==ge&&"filter"!==ge&&"metadata"!==ge&&"minzoom"!==ge&&"maxzoom"!==ge&&(0===ge.indexOf("paint.")?xl(le[ge],oe[ge],E,ne,ge.slice(6),rn.setPaintProperty):xn(le[ge],oe[ge])||E.push({command:rn.setLayerProperty,args:[ne,ge,oe[ge]]}));for(ge in oe)Object.prototype.hasOwnProperty.call(oe,ge)&&!Object.prototype.hasOwnProperty.call(le,ge)&&"layout"!==ge&&"paint"!==ge&&"filter"!==ge&&"metadata"!==ge&&"minzoom"!==ge&&"maxzoom"!==ge&&(0===ge.indexOf("paint.")?xl(le[ge],oe[ge],E,ne,ge.slice(6),rn.setPaintProperty):xn(le[ge],oe[ge])||E.push({command:rn.setLayerProperty,args:[ne,ge,oe[ge]]}))}else E.push({command:rn.removeLayer,args:[ne]}),pe=j[j.lastIndexOf(ne)+1],E.push({command:rn.addLayer,args:[oe,pe]})}(y,o.layers,c)}catch(h){console.warn("Unable to compute style diff:",h),c=[{command:rn.setStyle,args:[o]}]}return c},_.aF=function(l){const o=[],c=l.id;return void 0===c&&o.push({message:`layers.${c}: missing required property "id"`}),void 0===l.render&&o.push({message:`layers.${c}: missing required method "render"`}),l.renderingMode&&"2d"!==l.renderingMode&&"3d"!==l.renderingMode&&o.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),o},_.aG=function l(o,c){if(Array.isArray(o)){if(!Array.isArray(c)||o.length!==c.length)return!1;for(let h=0;h<o.length;h++)if(!l(o[h],c[h]))return!1;return!0}if("object"==typeof o&&null!==o&&null!==c){if("object"!=typeof c||Object.keys(o).length!==Object.keys(c).length)return!1;for(const h in o)if(!l(o[h],c[h]))return!1;return!0}return o===c},_.aH=Zn,_.aI=Yo,_.aJ=xi,_.aK=function(l){return l({pluginStatus:ft,pluginURL:fn}),xi.on("pluginStateChange",l),l},_.aL=class extends Fl{constructor(l,o){super(l,o),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},_.aM=_d,_.aN=class extends Fl{constructor(l,o){super(l,o),this.current=vm}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let o=1;o<16;o++)if(l[o]!==this.current[o]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},_.aO=bu,_.aP=class extends Fl{constructor(l,o){super(l,o),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},_.aQ=class extends Fl{constructor(l,o){super(l,o),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},_.aR=xu,_.aS=function(l,o,c,h,m,y,w){var S=1/(o-c),E=1/(h-m),I=1/(y-w);return l[0]=-2*S,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*E,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*I,l[11]=0,l[12]=(o+c)*S,l[13]=(m+h)*E,l[14]=(w+y)*I,l[15]=1,l},_.aT=on,_.aU=zg,_.aV=class extends p{},_.aW=zu,_.aX=class extends x{},_.aY=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},_.aZ=Pe,_.a_=Le,_.aa=function(l){const o={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,h,m,y)=>{const w=m||y;return o[h]=!w||w.toLowerCase(),""}),o["max-age"]){const c=parseInt(o["max-age"],10);isNaN(c)?delete o["max-age"]:o["max-age"]=c}return o},_.ab=function(l,o){const c=[];for(const h in l)h in o||c.push(h);return c},_.ac=function(l){if(null==wa){const o=l.navigator?l.navigator.userAgent:null;wa=!!l.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return wa},_.ad=Qo,_.ae=function(l,o,c){var h=Math.sin(c),m=Math.cos(c),y=o[0],w=o[1],S=o[2],E=o[3],I=o[4],P=o[5],F=o[6],L=o[7];return o!==l&&(l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=y*m+I*h,l[1]=w*m+P*h,l[2]=S*m+F*h,l[3]=E*m+L*h,l[4]=I*m-y*h,l[5]=P*m-w*h,l[6]=F*m-S*h,l[7]=L*m-E*h,l},_.af=function(l){var o=new Cc(16);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o[8]=l[8],o[9]=l[9],o[10]=l[10],o[11]=l[11],o[12]=l[12],o[13]=l[13],o[14]=l[14],o[15]=l[15],o},_.ag=Tm,_.ah=function(l,o){let c=0,h=0;if("constant"===l.kind)h=l.layoutSize;else if("source"!==l.kind){const{interpolationType:m,minZoom:y,maxZoom:w}=l,S=m?Qo(Jr.interpolationFactor(m,o,y,w),0,1):0;"camera"===l.kind?h=ho.number(l.minSize,l.maxSize,S):c=S}return{uSizeT:c,uSize:h}},_.aj=function(l,{uSize:o,uSizeT:c},{lowerSize:h,upperSize:m}){return"source"===l.kind?h/ua:"composite"===l.kind?ho.number(h/ua,m/ua,c):o},_.ak=Zm,_.al=function(l,o,c,h){const m=o.y-l.y,y=o.x-l.x,w=h.y-c.y,S=h.x-c.x,E=w*y-S*m;if(0===E)return null;const I=(S*(l.y-c.y)-w*(l.x-c.x))/E;return new ct(l.x+I*y,l.y+I*m)},_.am=Hu,_.an=Ps,_.ao=Vh,_.ap=Ri,_.ar=ap,_.as=function(l,o){var c=o[0],h=o[1],m=o[2],y=o[3],w=o[4],S=o[5],E=o[6],I=o[7],P=o[8],F=o[9],L=o[10],j=o[11],H=o[12],W=o[13],J=o[14],ne=o[15],le=c*S-h*w,oe=c*E-m*w,pe=c*I-y*w,ge=h*E-m*S,Ee=h*I-y*S,We=m*I-y*E,nt=P*W-F*H,Ge=P*J-L*H,He=P*ne-j*H,Ve=F*J-L*W,Ke=F*ne-j*W,je=L*ne-j*J,Re=le*je-oe*Ke+pe*Ve+ge*He-Ee*Ge+We*nt;return Re?(l[0]=(S*je-E*Ke+I*Ve)*(Re=1/Re),l[1]=(m*Ke-h*je-y*Ve)*Re,l[2]=(W*We-J*Ee+ne*ge)*Re,l[3]=(L*Ee-F*We-j*ge)*Re,l[4]=(E*He-w*je-I*Ge)*Re,l[5]=(c*je-m*He+y*Ge)*Re,l[6]=(J*pe-H*We-ne*oe)*Re,l[7]=(P*We-L*pe+j*oe)*Re,l[8]=(w*Ke-S*He+I*nt)*Re,l[9]=(h*He-c*Ke-y*nt)*Re,l[10]=(H*Ee-W*pe+ne*le)*Re,l[11]=(F*pe-P*Ee-j*le)*Re,l[12]=(S*Ge-w*Ve-E*nt)*Re,l[13]=(c*Ve-h*Ge+m*nt)*Re,l[14]=(W*oe-H*ge-J*le)*Re,l[15]=(P*ge-F*oe+L*le)*Re,l):null},_.at=lf,_.au=$m,_.av=df,_.aw=function(){const l={},o=ke.$version;for(const c in ke.$root){const h=ke.$root[c];if(h.required){let m=null;m="version"===c?o:"array"===h.type?[]:{},null!=m&&(l[c]=m)}}return l},_.ax=rn,_.ay=Je,_.az=sn,_.b=function(l,o){const c=new Blob([new Uint8Array(l)],{type:"image/png"});createImageBitmap(c).then(h=>{o(null,h)}).catch(h=>{o(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},_.b0=Vi,_.b1=function(l,o){var c=l[0],h=l[1],m=l[2],y=l[3],w=l[4],S=l[5],E=l[6],I=l[7],P=l[8],F=l[9],L=l[10],j=l[11],H=l[12],W=l[13],J=l[14],ne=l[15],le=o[0],oe=o[1],pe=o[2],ge=o[3],Ee=o[4],We=o[5],nt=o[6],Ge=o[7],He=o[8],Ve=o[9],Ke=o[10],je=o[11],Re=o[12],lt=o[13],tt=o[14],Lt=o[15];return Math.abs(c-le)<=Ir*Math.max(1,Math.abs(c),Math.abs(le))&&Math.abs(h-oe)<=Ir*Math.max(1,Math.abs(h),Math.abs(oe))&&Math.abs(m-pe)<=Ir*Math.max(1,Math.abs(m),Math.abs(pe))&&Math.abs(y-ge)<=Ir*Math.max(1,Math.abs(y),Math.abs(ge))&&Math.abs(w-Ee)<=Ir*Math.max(1,Math.abs(w),Math.abs(Ee))&&Math.abs(S-We)<=Ir*Math.max(1,Math.abs(S),Math.abs(We))&&Math.abs(E-nt)<=Ir*Math.max(1,Math.abs(E),Math.abs(nt))&&Math.abs(I-Ge)<=Ir*Math.max(1,Math.abs(I),Math.abs(Ge))&&Math.abs(P-He)<=Ir*Math.max(1,Math.abs(P),Math.abs(He))&&Math.abs(F-Ve)<=Ir*Math.max(1,Math.abs(F),Math.abs(Ve))&&Math.abs(L-Ke)<=Ir*Math.max(1,Math.abs(L),Math.abs(Ke))&&Math.abs(j-je)<=Ir*Math.max(1,Math.abs(j),Math.abs(je))&&Math.abs(H-Re)<=Ir*Math.max(1,Math.abs(H),Math.abs(Re))&&Math.abs(W-lt)<=Ir*Math.max(1,Math.abs(W),Math.abs(lt))&&Math.abs(J-tt)<=Ir*Math.max(1,Math.abs(J),Math.abs(tt))&&Math.abs(ne-Lt)<=Ir*Math.max(1,Math.abs(ne),Math.abs(Lt))},_.b2=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l},_.b3=function(l,o,c){return l[0]=o[0]*c[0],l[1]=o[1]*c[1],l[2]=o[2]*c[2],l[3]=o[3]*c[3],l},_.b4=function(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]+l[3]*o[3]},_.b5=xa,_.b6=vb,_.b7=hp,_.b8=function(l,o,c,h,m){var y,w=1/Math.tan(o/2);return l[0]=w/c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=w,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,null!=m&&m!==1/0?(l[10]=(m+h)*(y=1/(h-m)),l[14]=2*m*h*y):(l[10]=-1,l[14]=-2*h),l},_.b9=function(l,o,c){var h=Math.sin(c),m=Math.cos(c),y=o[4],w=o[5],S=o[6],E=o[7],I=o[8],P=o[9],F=o[10],L=o[11];return o!==l&&(l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[4]=y*m+I*h,l[5]=w*m+P*h,l[6]=S*m+F*h,l[7]=E*m+L*h,l[8]=I*m-y*h,l[9]=P*m-w*h,l[10]=F*m-S*h,l[11]=L*m-E*h,l},_.bA=Oi,_.bB=ud,_.bC=wi,_.ba=Mo,_.bb=vs,_.bc=function(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=o[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},_.bd=class extends fi{},_.be=l_,_.bf=yb,_.bh=Mn,_.bi=function(l,o,c=!1){if(ft===_u||ft===vu||ft===Qn)throw new Error("setRTLTextPlugin cannot be called multiple times.");fn=ka.resolveURL(l),ft=_u,Ye=o,La(),c||li()},_.bj=ra,_.bk=function(l,o){const c={};for(let m=0;m<l.length;m++){const y=o&&o[l[m].id]||Oa(l[m]);o&&(o[l[m].id]=y);let w=c[y];w||(w=c[y]=[]),w.push(l[m])}const h=[];for(const m in c)h.push(c[m]);return h},_.bl=Qe,_.bm=Jm,_.bn=tf,_.bo=Jg,_.bp=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Ci/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const o=l.bucket.layers[0],c=o.layout,h=o._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new gn(l.bucket.zoom+1),l.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new gn(l.bucket.zoom+1),l.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new gn(18))};if("composite"===l.bucket.textSizeData.kind){const{minZoom:I,maxZoom:P}=l.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new gn(I),l.canonical),h["text-size"].possiblyEvaluate(new gn(P),l.canonical)]}if("composite"===l.bucket.iconSizeData.kind){const{minZoom:I,maxZoom:P}=l.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new gn(I),l.canonical),h["icon-size"].possiblyEvaluate(new gn(P),l.canonical)]}const y=c.get("text-line-height")*Ri,w="viewport"!==c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),S=c.get("text-keep-upright"),E=c.get("text-size");for(const I of l.bucket.features){const P=c.get("text-font").evaluate(I,{},l.canonical).join(","),F=E.evaluate(I,{},l.canonical),L=m.layoutTextSize.evaluate(I,{},l.canonical),j=m.layoutIconSize.evaluate(I,{},l.canonical),H={horizontal:{},vertical:void 0},W=I.text;let J,ne=[0,0];if(W){const pe=W.toString(),ge=c.get("text-letter-spacing").evaluate(I,{},l.canonical)*Ri,Ee=Ai(pe)?ge:0,We=c.get("text-anchor").evaluate(I,{},l.canonical),nt=af(o,I,l.canonical);if(!nt){const je=c.get("text-radial-offset").evaluate(I,{},l.canonical);ne=je?x_(We,[je*Ri,mp]):c.get("text-offset").evaluate(I,{},l.canonical).map(Re=>Re*Ri)}let Ge=w?"center":c.get("text-justify").evaluate(I,{},l.canonical);const He=c.get("symbol-placement"),Ve="point"===He?c.get("text-max-width").evaluate(I,{},l.canonical)*Ri:0,Ke=()=>{l.bucket.allowVerticalPlacement&&Jt(pe)&&(H.vertical=Dd(W,l.glyphMap,l.glyphPositions,l.imagePositions,P,Ve,y,We,"left",Ee,ne,_.ai.vertical,!0,He,L,F))};if(!w&&nt){const je=new Set;if("auto"===Ge)for(let lt=0;lt<nt.values.length;lt+=2)je.add(lf(nt.values[lt]));else je.add(Ge);let Re=!1;for(const lt of je)if(!H.horizontal[lt])if(Re)H.horizontal[lt]=H.horizontal[0];else{const tt=Dd(W,l.glyphMap,l.glyphPositions,l.imagePositions,P,Ve,y,"center",lt,Ee,ne,_.ai.horizontal,!1,He,L,F);tt&&(H.horizontal[lt]=tt,Re=1===tt.positionedLines.length)}Ke()}else{"auto"===Ge&&(Ge=lf(We));const je=Dd(W,l.glyphMap,l.glyphPositions,l.imagePositions,P,Ve,y,We,Ge,Ee,ne,_.ai.horizontal,!1,He,L,F);je&&(H.horizontal[Ge]=je),Ke(),Jt(pe)&&w&&S&&(H.vertical=Dd(W,l.glyphMap,l.glyphPositions,l.imagePositions,P,Ve,y,We,Ge,Ee,ne,_.ai.vertical,!1,He,L,F))}}let le=!1;if(I.icon&&I.icon.name){const pe=l.imageMap[I.icon.name];pe&&(J=sp(l.imagePositions[I.icon.name],c.get("icon-offset").evaluate(I,{},l.canonical),c.get("icon-anchor").evaluate(I,{},l.canonical)),le=!!pe.sdf,void 0===l.bucket.sdfIcons?l.bucket.sdfIcons=le:l.bucket.sdfIcons!==le&&Zi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pe.pixelRatio!==l.bucket.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(l.bucket.iconsNeedLinear=!0))}const oe=S_(H.horizontal)||H.vertical;l.bucket.iconsInText=!!oe&&oe.iconsInText,(oe||J)&&w_(l.bucket,I,H,J,l.imageMap,m,L,j,ne,le,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},_.bq=Ou,_.br=Kh,_.bs=Dc,_.bt=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return 0===l.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},_.bu=Fi,_.bv=ca,_.bw=function(l,o,c,h,m){return En(this,void 0,void 0,function*(){if(Xo())try{return yield _l(l,o,c,h,m)}catch{}return function(y,w,S,E,I){const P=y.width,F=y.height;Jo&&Nn||(Jo=new OffscreenCanvas(P,F),Nn=Jo.getContext("2d",{willReadFrequently:!0})),Jo.width=P,Jo.height=F,Nn.drawImage(y,0,0,P,F);const L=Nn.getImageData(w,S,E,I);return Nn.clearRect(0,0,P,F),L.data}(l,o,c,h,m)})},_.bx=ju,_.by=be,_.bz=Eo,_.c=Sa,_.d=function(l,o){const c=new Image;c.onload=()=>{o(null,c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=bn})},c.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(l)],{type:"image/png"});c.src=l.byteLength?URL.createObjectURL(h):bn},_.e=qi,_.f=function(l,o){return es(qi(l,{type:"json"}),o)},_.g=ao,_.h=ka,_.i=Ii,_.j=Ta,_.k=Ks,_.l=ic,_.m=es,_.n=function(l){return new Fi(l).readFields(Lu,[])},_.o=function(l,o,c){if(!l.length)return c(null,[]);let h=l.length;const m=new Array(l.length);let y=null;l.forEach((w,S)=>{o(w,(E,I)=>{E&&(y=E),m[S]=I,0==--h&&c(y,m)})})},_.p=Hm,_.q=Cu,_.r=Gn,_.s=Io,_.t=_m,_.u=Be,_.v=ke,_.w=Zi,_.x=ri,_.y=is,_.z=function([l,o,c]){return o+=90,o*=Math.PI/180,c*=Math.PI/180,{x:l*Math.cos(o)*Math.sin(c),y:l*Math.sin(o)*Math.sin(c),z:l*Math.cos(c)}}}),eu(0,function(_){class En{constructor(z){this.keyCache={},z&&this.replace(z)}replace(z){this._layerConfigs={},this._layers={},this.update(z,[])}update(z,B){for(const Y of z){this._layerConfigs[Y.id]=Y;const ee=this._layers[Y.id]=_.aC(Y);ee._featureFilter=_.a6(ee.filter),this.keyCache[Y.id]&&delete this.keyCache[Y.id]}for(const Y of B)delete this.keyCache[Y],delete this._layerConfigs[Y],delete this._layers[Y];this.familiesBySource={};const G=_.bk(Object.values(this._layerConfigs),this.keyCache);for(const Y of G){const ee=Y.map(Te=>this._layers[Te.id]),he=ee[0];if("none"===he.visibility)continue;const se=he.source||"";let ie=this.familiesBySource[se];ie||(ie=this.familiesBySource[se]={});const ce=he.sourceLayer||"_geojsonTileLayer";let Se=ie[ce];Se||(Se=ie[ce]=[]),Se.push(ee)}}}class be{constructor(z){const B={},G=[];for(const se in z){const ie=z[se],ce=B[se]={};for(const Se in ie){const Te=ie[+Se];if(!Te||0===Te.bitmap.width||0===Te.bitmap.height)continue;const Me={x:0,y:0,w:Te.bitmap.width+2,h:Te.bitmap.height+2};G.push(Me),ce[Se]={rect:Me,metrics:Te.metrics}}}const{w:Y,h:ee}=_.p(G),he=new _.q({width:Y||1,height:ee||1});for(const se in z){const ie=z[se];for(const ce in ie){const Se=ie[+ce];if(!Se||0===Se.bitmap.width||0===Se.bitmap.height)continue;const Te=B[se][ce].rect;_.q.copy(Se.bitmap,he,{x:0,y:0},{x:Te.x+1,y:Te.y+1},Se.bitmap)}}this.image=he,this.positions=B}}_.bl("GlyphAtlas",be);class Eo{constructor(z){this.tileID=new _.O(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(z,B,G,Y,ee){this.status="parsing",this.data=z,this.collisionBoxArray=new _.a3;const he=new _.bm(Object.keys(z.layers).sort()),se=new _.bn(this.tileID,this.promoteId);se.bucketLayerIDs=[];const ie={},ce={featureIndex:se,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:G},Se=B.familiesBySource[this.source];for(const Yt in Se){const It=z.layers[Yt];if(!It)continue;1===It.version&&_.w(`Vector tile source "${this.source}" layer "${Yt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const sr=he.encode(Yt),Ot=[];for(let Un=0;Un<It.length;Un++){const zn=It.feature(Un),Ro=se.getId(zn,Yt);Ot.push({feature:zn,id:Ro,index:Un,sourceLayerIndex:sr})}for(const Un of Se[Yt]){const zn=Un[0];zn.source!==this.source&&_.w(`layer.source = ${zn.source} does not equal this.source = ${this.source}`),zn.minzoom&&this.zoom<Math.floor(zn.minzoom)||zn.maxzoom&&this.zoom>=zn.maxzoom||"none"!==zn.visibility&&(wr(Un,this.zoom,G),(ie[zn.id]=zn.createBucket({index:se.bucketLayerIDs.length,layers:Un,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sr,sourceID:this.source})).populate(Ot,ce,this.tileID.canonical),se.bucketLayerIDs.push(Un.map(Ro=>Ro.id)))}}let Te,Me,Xe,gt;const it=_.aH(ce.glyphDependencies,Yt=>Object.keys(Yt).map(Number));this.inFlightDependencies.forEach(Yt=>Yt?.cancel()),this.inFlightDependencies=[];const dt=++this.dependencySentinel;Object.keys(it).length?this.inFlightDependencies.push(Y.send("getGlyphs",{uid:this.uid,stacks:it,source:this.source,tileID:this.tileID,type:"glyphs"},(Yt,It)=>{dt===this.dependencySentinel&&(Te||(Te=Yt,Me=It,wn.call(this)))})):Me={};const xt=Object.keys(ce.iconDependencies);xt.length?this.inFlightDependencies.push(Y.send("getImages",{icons:xt,source:this.source,tileID:this.tileID,type:"icons"},(Yt,It)=>{dt===this.dependencySentinel&&(Te||(Te=Yt,Xe=It,wn.call(this)))})):Xe={};const an=Object.keys(ce.patternDependencies);function wn(){if(Te)return ee(Te);if(Me&&Xe&&gt){const Yt=new be(Me),It=new _.bo(Xe,gt);for(const sr in ie){const Ot=ie[sr];Ot instanceof _.a4?(wr(Ot.layers,this.zoom,G),_.bp({bucket:Ot,glyphMap:Me,glyphPositions:Yt.positions,imageMap:Xe,imagePositions:It.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ot.hasPattern&&(Ot instanceof _.bq||Ot instanceof _.br||Ot instanceof _.bs)&&(wr(Ot.layers,this.zoom,G),Ot.addFeatures(ce,this.tileID.canonical,It.patternPositions))}this.status="done",ee(null,{buckets:Object.values(ie).filter(sr=>!sr.isEmpty()),featureIndex:se,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yt.image,imageAtlas:It,glyphMap:this.returnDependencies?Me:null,iconMap:this.returnDependencies?Xe:null,glyphPositions:this.returnDependencies?Yt.positions:null})}}an.length?this.inFlightDependencies.push(Y.send("getImages",{icons:an,source:this.source,tileID:this.tileID,type:"patterns"},(Yt,It)=>{dt===this.dependencySentinel&&(Te||(Te=Yt,gt=It,wn.call(this)))})):gt={},wn.call(this)}}function wr(X,z,B){const G=new _.a8(z);for(const Y of X)Y.recalculate(G,B)}function ct(X,z){const B=_.l(X.request,(G,Y,ee,he)=>{if(G)z(G);else if(Y)try{const se=new _.bv.VectorTile(new _.bu(Y));z(null,{vectorTile:se,rawData:Y,cacheControl:ee,expires:he})}catch(se){const ie=new Uint8Array(Y);let ce=`Unable to parse the tile at ${X.request.url}, `;ce+=31===ie[0]&&139===ie[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${se.messge}`,z(new Error(ce))}});return()=>{B.cancel(),z()}}class _s{constructor(z,B,G,Y){this.actor=z,this.layerIndex=B,this.availableImages=G,this.loadVectorData=Y||ct,this.fetching={},this.loading={},this.loaded={}}loadTile(z,B){const G=z.uid;this.loading||(this.loading={});const Y=!!(z&&z.request&&z.request.collectResourceTiming)&&new _.bt(z.request),ee=this.loading[G]=new Eo(z);ee.abort=this.loadVectorData(z,(he,se)=>{if(delete this.loading[G],he||!se)return ee.status="done",this.loaded[G]=ee,B(he);const ie=se.rawData,ce={};se.expires&&(ce.expires=se.expires),se.cacheControl&&(ce.cacheControl=se.cacheControl);const Se={};if(Y){const Te=Y.finish();Te&&(Se.resourceTiming=JSON.parse(JSON.stringify(Te)))}ee.vectorTile=se.vectorTile,ee.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,(Te,Me)=>{if(delete this.fetching[G],Te||!Me)return B(Te);B(null,_.e({rawTileData:ie.slice(0)},Me,ce,Se))}),this.loaded=this.loaded||{},this.loaded[G]=ee,this.fetching[G]={rawTileData:ie,cacheControl:ce,resourceTiming:Se}})}reloadTile(z,B){const G=this.loaded,Y=z.uid;if(G&&G[Y]){const ee=G[Y];ee.showCollisionBoxes=z.showCollisionBoxes,"parsing"===ee.status?ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,(he,se)=>{if(he||!se)return B(he,se);let ie;if(this.fetching[Y]){const{rawTileData:ce,cacheControl:Se,resourceTiming:Te}=this.fetching[Y];delete this.fetching[Y],ie=_.e({rawTileData:ce.slice(0)},se,Se,Te)}else ie=se;B(null,ie)}):"done"===ee.status&&(ee.vectorTile?ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,B):B())}}abortTile(z,B){const G=this.loading,Y=z.uid;G&&G[Y]&&G[Y].abort&&(G[Y].abort(),delete G[Y]),B()}removeTile(z,B){const G=this.loaded,Y=z.uid;G&&G[Y]&&delete G[Y],B()}}class ml{constructor(){this.loaded={}}loadTile(z,B){return _._(this,void 0,void 0,function*(){const{uid:G,encoding:Y,rawImageData:ee,redFactor:he,greenFactor:se,blueFactor:ie,baseShift:ce}=z,Se=ee.width+2,Te=ee.height+2,Me=_.a(ee)?new _.R({width:Se,height:Te},yield _.bw(ee,-1,-1,Se,Te)):ee,Xe=new _.bx(G,Me,Y,he,se,ie,ce);this.loaded=this.loaded||{},this.loaded[G]=Xe,B(null,Xe)})}removeTile(z){const B=this.loaded,G=z.uid;B&&B[G]&&delete B[G]}}function qs(X,z){if(0!==X.length){kr(X[0],z);for(var B=1;B<X.length;B++)kr(X[B],!z)}}function kr(X,z){for(var B=0,G=0,Y=0,ee=X.length,he=ee-1;Y<ee;he=Y++){var se=(X[Y][0]-X[he][0])*(X[he][1]+X[Y][1]),ie=B+se;G+=Math.abs(B)>=Math.abs(se)?B-ie+se:se-ie+B,B=ie}B+G>=0!=!!z&&X.reverse()}var bi=_.by(function X(z,B){var G,Y=z&&z.type;if("FeatureCollection"===Y)for(G=0;G<z.features.length;G++)X(z.features[G],B);else if("GeometryCollection"===Y)for(G=0;G<z.geometries.length;G++)X(z.geometries[G],B);else if("Feature"===Y)X(z.geometry,B);else if("Polygon"===Y)qs(z.coordinates,B);else if("MultiPolygon"===Y)for(G=0;G<z.coordinates.length;G++)qs(z.coordinates[G],B);return z});const nd=_.bv.VectorTileFeature.prototype.toGeoJSON;var Xo={exports:{}},Mo=_.bz,vs=_.bv.VectorTileFeature,Qo=xa;function xa(X,z){this.options=z||{},this.features=X,this.length=X.length}function qi(X,z){this.id="number"==typeof X.id?X.id:void 0,this.type=X.type,this.rawGeometry=1===X.type?[X.geometry]:X.geometry,this.properties=X.tags,this.extent=z||4096}xa.prototype.feature=function(X){return new qi(this.features[X],this.options.extent)},qi.prototype.loadGeometry=function(){var X=this.rawGeometry;this.geometry=[];for(var z=0;z<X.length;z++){for(var B=X[z],G=[],Y=0;Y<B.length;Y++)G.push(new Mo(B[Y][0],B[Y][1]));this.geometry.push(G)}return this.geometry},qi.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var X=this.geometry,z=1/0,B=-1/0,G=1/0,Y=-1/0,ee=0;ee<X.length;ee++)for(var he=X[ee],se=0;se<he.length;se++){var ie=he[se];z=Math.min(z,ie.x),B=Math.max(B,ie.x),G=Math.min(G,ie.y),Y=Math.max(Y,ie.y)}return[z,G,B,Y]},qi.prototype.toGeoJSON=vs.prototype.toGeoJSON;var fl=_.bA,Zn=Qo;function Yo(X){var z=new fl;return function(B,G){for(var Y in B.layers)G.writeMessage(3,Lr,B.layers[Y])}(X,z),z.finish()}function Lr(X,z){var B;z.writeVarintField(15,X.version||1),z.writeStringField(1,X.name||""),z.writeVarintField(5,X.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<X.length;B++)G.feature=X.feature(B),z.writeMessage(2,Zs,G);var Y=G.keys;for(B=0;B<Y.length;B++)z.writeStringField(3,Y[B]);var ee=G.values;for(B=0;B<ee.length;B++)z.writeMessage(4,wa,ee[B])}function Zs(X,z){var B=X.feature;void 0!==B.id&&z.writeVarintField(1,B.id),z.writeMessage(2,Zi,X),z.writeVarintField(3,B.type),z.writeMessage(4,Ii,B)}function Zi(X,z){var B=X.feature,G=X.keys,Y=X.values,ee=X.keycache,he=X.valuecache;for(var se in B.properties){var ie=B.properties[se],ce=ee[se];if(null!==ie){void 0===ce&&(G.push(se),ee[se]=ce=G.length-1),z.writeVarint(ce);var Se=typeof ie;"string"!==Se&&"boolean"!==Se&&"number"!==Se&&(ie=JSON.stringify(ie));var Te=Se+":"+ie,Me=he[Te];void 0===Me&&(Y.push(ie),he[Te]=Me=Y.length-1),z.writeVarint(Me)}}}function Xr(X,z){return(z<<3)+(7&X)}function Do(X){return X<<1^X>>31}function Ii(X,z){for(var B=X.loadGeometry(),G=X.type,Y=0,ee=0,he=B.length,se=0;se<he;se++){var ie=B[se],ce=1;1===G&&(ce=ie.length),z.writeVarint(Xr(1,ce));for(var Se=3===G?ie.length-1:ie.length,Te=0;Te<Se;Te++){1===Te&&1!==G&&z.writeVarint(Xr(2,Se-1));var Me=ie[Te].x-Y,Xe=ie[Te].y-ee;z.writeVarint(Do(Me)),z.writeVarint(Do(Xe)),Y+=Me,ee+=Xe}3===G&&z.writeVarint(Xr(7,1))}}function wa(X,z){var B=typeof X;"string"===B?z.writeStringField(1,X):"boolean"===B?z.writeBooleanField(7,X):"number"===B&&(X%1!=0?z.writeDoubleField(3,X):X<0?z.writeSVarintField(6,X):z.writeVarintField(5,X))}Xo.exports=Yo,Xo.exports.fromVectorTileJs=Yo,Xo.exports.fromGeojsonVt=function(X,z){z=z||{};var B={};for(var G in X)B[G]=new Zn(X[G].features,z),B[G].name=G,B[G].version=z.version,B[G].extent=z.extent;return Yo({layers:B})},Xo.exports.GeoJSONWrapper=Zn;var gl=_.by(Xo.exports);const bn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:X=>X},_l=Math.fround||(Jo=new Float32Array(1),X=>(Jo[0]=+X,Jo[0]));var Jo;const Nn=3,Br=5,Zt=6;class ka{constructor(z){this.options=Object.assign(Object.create(bn),z),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(z){const{log:B,minZoom:G,maxZoom:Y}=this.options;B&&console.time("total time");const ee=`prepare ${z.length} points`;B&&console.time(ee),this.points=z;const he=[];for(let ie=0;ie<z.length;ie++){const ce=z[ie];if(!ce.geometry)continue;const[Se,Te]=ce.geometry.coordinates,Me=_l(sn(Se)),Xe=_l(ao(Te));he.push(Me,Xe,1/0,ie,-1,1),this.options.reduce&&he.push(0)}let se=this.trees[Y+1]=this._createTree(he);B&&console.timeEnd(ee);for(let ie=Y;ie>=G;ie--){const ce=+Date.now();se=this.trees[ie]=this._createTree(this._cluster(se,ie)),B&&console.log("z%d: %d clusters in %dms",ie,se.numItems,+Date.now()-ce)}return B&&console.timeEnd("total time"),this}getClusters(z,B){let G=((z[0]+180)%360+360)%360-180;const Y=Math.max(-90,Math.min(90,z[1]));let ee=180===z[2]?180:((z[2]+180)%360+360)%360-180;const he=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)G=-180,ee=180;else if(G>ee){const Te=this.getClusters([G,Y,180,he],B),Me=this.getClusters([-180,Y,ee,he],B);return Te.concat(Me)}const se=this.trees[this._limitZoom(B)],ie=se.range(sn(G),ao(he),sn(ee),ao(Y)),ce=se.data,Se=[];for(const Te of ie){const Me=this.stride*Te;Se.push(ce[Me+Br]>1?Sa(ce,Me,this.clusterProps):this.points[ce[Me+Nn]])}return Se}getChildren(z){const B=this._getOriginId(z),G=this._getOriginZoom(z),Y="No cluster with the specified id.",ee=this.trees[G];if(!ee)throw new Error(Y);const he=ee.data;if(B*this.stride>=he.length)throw new Error(Y);const se=this.options.radius/(this.options.extent*Math.pow(2,G-1)),ie=ee.within(he[B*this.stride],he[B*this.stride+1],se),ce=[];for(const Se of ie){const Te=Se*this.stride;he[Te+4]===z&&ce.push(he[Te+Br]>1?Sa(he,Te,this.clusterProps):this.points[he[Te+Nn]])}if(0===ce.length)throw new Error(Y);return ce}getLeaves(z,B,G){const Y=[];return this._appendLeaves(Y,z,B=B||10,G=G||0,0),Y}getTile(z,B,G){const Y=this.trees[this._limitZoom(z)],ee=Math.pow(2,z),{extent:he,radius:se}=this.options,ie=se/he,ce=(G-ie)/ee,Se=(G+1+ie)/ee,Te={features:[]};return this._addTileFeatures(Y.range((B-ie)/ee,ce,(B+1+ie)/ee,Se),Y.data,B,G,ee,Te),0===B&&this._addTileFeatures(Y.range(1-ie/ee,ce,1,Se),Y.data,ee,G,ee,Te),B===ee-1&&this._addTileFeatures(Y.range(0,ce,ie/ee,Se),Y.data,-1,G,ee,Te),Te.features.length?Te:null}getClusterExpansionZoom(z){let B=this._getOriginZoom(z)-1;for(;B<=this.options.maxZoom;){const G=this.getChildren(z);if(B++,1!==G.length)break;z=G[0].properties.cluster_id}return B}_appendLeaves(z,B,G,Y,ee){const he=this.getChildren(B);for(const se of he){const ie=se.properties;if(ie&&ie.cluster?ee+ie.point_count<=Y?ee+=ie.point_count:ee=this._appendLeaves(z,ie.cluster_id,G,Y,ee):ee<Y?ee++:z.push(se),z.length===G)break}return ee}_createTree(z){const B=new _.av(z.length/this.stride|0,this.options.nodeSize,Float32Array);for(let G=0;G<z.length;G+=this.stride)B.add(z[G],z[G+1]);return B.finish(),B.data=z,B}_addTileFeatures(z,B,G,Y,ee,he){for(const se of z){const ie=se*this.stride,ce=B[ie+Br]>1;let Se,Te,Me;if(ce)Se=Mn(B,ie,this.clusterProps),Te=B[ie],Me=B[ie+1];else{const it=this.points[B[ie+Nn]];Se=it.properties;const[dt,xt]=it.geometry.coordinates;Te=sn(dt),Me=ao(xt)}const Xe={type:1,geometry:[[Math.round(this.options.extent*(Te*ee-G)),Math.round(this.options.extent*(Me*ee-Y))]],tags:Se};let gt;gt=ce||this.options.generateId?B[ie+Nn]:this.points[B[ie+Nn]].id,void 0!==gt&&(Xe.id=gt),he.features.push(Xe)}}_limitZoom(z){return Math.max(this.options.minZoom,Math.min(Math.floor(+z),this.options.maxZoom+1))}_cluster(z,B){const{radius:G,extent:Y,reduce:ee,minPoints:he}=this.options,se=G/(Y*Math.pow(2,B)),ie=z.data,ce=[],Se=this.stride;for(let Te=0;Te<ie.length;Te+=Se){if(ie[Te+2]<=B)continue;ie[Te+2]=B;const Me=ie[Te],Xe=ie[Te+1],gt=z.within(ie[Te],ie[Te+1],se),it=ie[Te+Br];let dt=it;for(const xt of gt){const an=xt*Se;ie[an+2]>B&&(dt+=ie[an+Br])}if(dt>it&&dt>=he){let xt,an=Me*it,wn=Xe*it,Yt=-1;const It=((Te/Se|0)<<5)+(B+1)+this.points.length;for(const sr of gt){const Ot=sr*Se;if(ie[Ot+2]<=B)continue;ie[Ot+2]=B;const Un=ie[Ot+Br];an+=ie[Ot]*Un,wn+=ie[Ot+1]*Un,ie[Ot+4]=It,ee&&(xt||(xt=this._map(ie,Te,!0),Yt=this.clusterProps.length,this.clusterProps.push(xt)),ee(xt,this._map(ie,Ot)))}ie[Te+4]=It,ce.push(an/dt,wn/dt,1/0,It,-1,dt),ee&&ce.push(Yt)}else{for(let xt=0;xt<Se;xt++)ce.push(ie[Te+xt]);if(dt>1)for(const xt of gt){const an=xt*Se;if(!(ie[an+2]<=B)){ie[an+2]=B;for(let wn=0;wn<Se;wn++)ce.push(ie[an+wn])}}}}return ce}_getOriginId(z){return z-this.points.length>>5}_getOriginZoom(z){return(z-this.points.length)%32}_map(z,B,G){if(z[B+Br]>1){const he=this.clusterProps[z[B+Zt]];return G?Object.assign({},he):he}const Y=this.points[z[B+Nn]].properties,ee=this.options.map(Y);return G&&ee===Y?Object.assign({},ee):ee}}function Sa(X,z,B){return{type:"Feature",id:X[z+Nn],properties:Mn(X,z,B),geometry:{type:"Point",coordinates:[(G=X[z],360*(G-.5)),Dt(X[z+1])]}};var G}function Mn(X,z,B){const G=X[z+Br],Y=G>=1e4?`${Math.round(G/1e3)}k`:G>=1e3?Math.round(G/100)/10+"k":G,ee=X[z+Zt],he=-1===ee?{}:Object.assign({},B[ee]);return Object.assign(he,{cluster:!0,cluster_id:X[z+Nn],point_count:G,point_count_abbreviated:Y})}function sn(X){return X/360+.5}function ao(X){const z=Math.sin(X*Math.PI/180),B=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return B<0?0:B>1?1:B}function Dt(X){const z=(180-360*X)*Math.PI/180;return 360*Math.atan(Math.exp(z))/Math.PI-90}function es(X,z,B,G){for(var Y,ee=G,he=B-z>>1,se=B-z,ie=X[z],ce=X[z+1],Se=X[B],Te=X[B+1],Me=z+3;Me<B;Me+=3){var Xe=ic(X[Me],X[Me+1],ie,ce,Se,Te);if(Xe>ee)Y=Me,ee=Xe;else if(Xe===ee){var gt=Math.abs(Me-he);gt<se&&(Y=Me,se=gt)}}ee>G&&(Y-z>3&&es(X,z,Y,G),X[Y+2]=ee,B-Y>3&&es(X,Y,B,G))}function ic(X,z,B,G,Y,ee){var he=Y-B,se=ee-G;if(0!==he||0!==se){var ie=((X-B)*he+(z-G)*se)/(he*he+se*se);ie>1?(B=Y,G=ee):ie>0&&(B+=he*ie,G+=se*ie)}return(he=X-B)*he+(se=z-G)*se}function Io(X,z,B,G){var Y={id:void 0===X?null:X,type:z,geometry:B,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ee){var he=ee.geometry,se=ee.type;if("Point"===se||"MultiPoint"===se||"LineString"===se)vl(ee,he);else if("Polygon"===se||"MultiLineString"===se)for(var ie=0;ie<he.length;ie++)vl(ee,he[ie]);else if("MultiPolygon"===se)for(ie=0;ie<he.length;ie++)for(var ce=0;ce<he[ie].length;ce++)vl(ee,he[ie][ce])}(Y),Y}function vl(X,z){for(var B=0;B<z.length;B+=3)X.minX=Math.min(X.minX,z[B]),X.minY=Math.min(X.minY,z[B+1]),X.maxX=Math.max(X.maxX,z[B]),X.maxY=Math.max(X.maxY,z[B+1])}function Ca(X,z,B,G){if(z.geometry){var Y=z.geometry.coordinates,ee=z.geometry.type,he=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),se=[],ie=z.id;if(B.promoteId?ie=z.properties[B.promoteId]:B.generateId&&(ie=G||0),"Point"===ee)Ks(Y,se);else if("MultiPoint"===ee)for(var ce=0;ce<Y.length;ce++)Ks(Y[ce],se);else if("LineString"===ee)Ta(Y,se,he,!1);else if("MultiLineString"===ee){if(B.lineMetrics){for(ce=0;ce<Y.length;ce++)Ta(Y[ce],se=[],he,!1),X.push(Io(ie,"LineString",se,z.properties));return}yl(Y,se,he,!1)}else if("Polygon"===ee)yl(Y,se,he,!0);else{if("MultiPolygon"!==ee){if("GeometryCollection"===ee){for(ce=0;ce<z.geometry.geometries.length;ce++)Ca(X,{id:ie,geometry:z.geometry.geometries[ce],properties:z.properties},B,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ce=0;ce<Y.length;ce++){var Se=[];yl(Y[ce],Se,he,!0),se.push(Se)}}X.push(Io(ie,ee,se,z.properties))}}function Ks(X,z){z.push(ke(X[0])),z.push(Qr(X[1])),z.push(0)}function Ta(X,z,B,G){for(var Y,ee,he=0,se=0;se<X.length;se++){var ie=ke(X[se][0]),ce=Qr(X[se][1]);z.push(ie),z.push(ce),z.push(0),se>0&&(he+=G?(Y*ce-ie*ee)/2:Math.sqrt(Math.pow(ie-Y,2)+Math.pow(ce-ee,2))),Y=ie,ee=ce}var Se=z.length-3;z[2]=1,es(z,0,Se,B),z[Se+2]=1,z.size=Math.abs(he),z.start=0,z.end=z.size}function yl(X,z,B,G){for(var Y=0;Y<X.length;Y++){var ee=[];Ta(X[Y],ee,B,G),z.push(ee)}}function ke(X){return X/360+.5}function Qr(X){var z=Math.sin(X*Math.PI/180),B=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return B<0?0:B>1?1:B}function lo(X,z,B,G,Y,ee,he,se){if(G/=z,ee>=(B/=z)&&he<G)return X;if(he<B||ee>=G)return null;for(var ie=[],ce=0;ce<X.length;ce++){var Se=X[ce],Te=Se.geometry,Me=Se.type,Xe=0===Y?Se.minX:Se.minY,gt=0===Y?Se.maxX:Se.maxY;if(Xe>=B&&gt<G)ie.push(Se);else if(!(gt<B||Xe>=G)){var it=[];if("Point"===Me||"MultiPoint"===Me)xn(Te,it,B,G,Y);else if("LineString"===Me)rn(Te,it,B,G,Y,!1,se.lineMetrics);else if("MultiLineString"===Me)bl(Te,it,B,G,Y,!1);else if("Polygon"===Me)bl(Te,it,B,G,Y,!0);else if("MultiPolygon"===Me)for(var dt=0;dt<Te.length;dt++){var xt=[];bl(Te[dt],xt,B,G,Y,!0),xt.length&&it.push(xt)}if(it.length){if(se.lineMetrics&&"LineString"===Me){for(dt=0;dt<it.length;dt++)ie.push(Io(Se.id,Me,it[dt],Se.tags));continue}"LineString"!==Me&&"MultiLineString"!==Me||(1===it.length?(Me="LineString",it=it[0]):Me="MultiLineString"),"Point"!==Me&&"MultiPoint"!==Me||(Me=3===it.length?"Point":"MultiPoint"),ie.push(Io(Se.id,Me,it,Se.tags))}}}return ie.length?ie:null}function xn(X,z,B,G,Y){for(var ee=0;ee<X.length;ee+=3){var he=X[ee+Y];he>=B&&he<=G&&(z.push(X[ee]),z.push(X[ee+1]),z.push(X[ee+2]))}}function rn(X,z,B,G,Y,ee,he){for(var se,ie,ce=co(X),Se=0===Y?rc:xl,Te=X.start,Me=0;Me<X.length-3;Me+=3){var Xe=X[Me],gt=X[Me+1],it=X[Me+2],dt=X[Me+3],xt=X[Me+4],an=0===Y?Xe:gt,wn=0===Y?dt:xt,Yt=!1;he&&(se=Math.sqrt(Math.pow(Xe-dt,2)+Math.pow(gt-xt,2))),an<B?wn>B&&(ie=Se(ce,Xe,gt,dt,xt,B),he&&(ce.start=Te+se*ie)):an>G?wn<G&&(ie=Se(ce,Xe,gt,dt,xt,G),he&&(ce.start=Te+se*ie)):Ao(ce,Xe,gt,it),wn<B&&an>=B&&(ie=Se(ce,Xe,gt,dt,xt,B),Yt=!0),wn>G&&an<=G&&(ie=Se(ce,Xe,gt,dt,xt,G),Yt=!0),!ee&&Yt&&(he&&(ce.end=Te+se*ie),z.push(ce),ce=co(X)),he&&(Te+=se)}var It=X.length-3;Xe=X[It],gt=X[It+1],it=X[It+2],(an=0===Y?Xe:gt)>=B&&an<=G&&Ao(ce,Xe,gt,it),It=ce.length-3,ee&&It>=3&&(ce[It]!==ce[0]||ce[It+1]!==ce[1])&&Ao(ce,ce[0],ce[1],ce[2]),ce.length&&z.push(ce)}function co(X){var z=[];return z.size=X.size,z.start=X.start,z.end=X.end,z}function bl(X,z,B,G,Y,ee){for(var he=0;he<X.length;he++)rn(X[he],z,B,G,Y,ee,!1)}function Ao(X,z,B,G){X.push(z),X.push(B),X.push(G)}function rc(X,z,B,G,Y,ee){var he=(ee-z)/(G-z);return X.push(ee),X.push(B+(Y-B)*he),X.push(1),he}function xl(X,z,B,G,Y,ee){var he=(ee-B)/(Y-B);return X.push(z+(G-z)*he),X.push(ee),X.push(1),he}function Xs(X,z){for(var B=[],G=0;G<X.length;G++){var Y,ee=X[G],he=ee.type;if("Point"===he||"MultiPoint"===he||"LineString"===he)Y=Ea(ee.geometry,z);else if("MultiLineString"===he||"Polygon"===he){Y=[];for(var se=0;se<ee.geometry.length;se++)Y.push(Ea(ee.geometry[se],z))}else if("MultiPolygon"===he)for(Y=[],se=0;se<ee.geometry.length;se++){for(var ie=[],ce=0;ce<ee.geometry[se].length;ce++)ie.push(Ea(ee.geometry[se][ce],z));Y.push(ie)}B.push(Io(ee.id,he,Y,ee.tags))}return B}function Ea(X,z){var B=[];B.size=X.size,void 0!==X.start&&(B.start=X.start,B.end=X.end);for(var G=0;G<X.length;G+=3)B.push(X[G]+z,X[G+1],X[G+2]);return B}function Fe(X,z){if(X.transformed)return X;var B,G,Y,ee=1<<X.z,he=X.x,se=X.y;for(B=0;B<X.features.length;B++){var ie=X.features[B],ce=ie.geometry,Se=ie.type;if(ie.geometry=[],1===Se)for(G=0;G<ce.length;G+=2)ie.geometry.push(Po(ce[G],ce[G+1],z,ee,he,se));else for(G=0;G<ce.length;G++){var Te=[];for(Y=0;Y<ce[G].length;Y+=2)Te.push(Po(ce[G][Y],ce[G][Y+1],z,ee,he,se));ie.geometry.push(Te)}}return X.transformed=!0,X}function Po(X,z,B,G,Y,ee){return[Math.round(B*(X*G-Y)),Math.round(B*(z*G-ee))]}function ni(X,z,B,G,Y){for(var ee=z===Y.maxZoom?0:Y.tolerance/((1<<z)*Y.extent),he={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:G,z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},se=0;se<X.length;se++){he.numFeatures++,Qs(he,X[se],ee,Y);var ie=X[se].minX,ce=X[se].minY,Se=X[se].maxX,Te=X[se].maxY;ie<he.minX&&(he.minX=ie),ce<he.minY&&(he.minY=ce),Se>he.maxX&&(he.maxX=Se),Te>he.maxY&&(he.maxY=Te)}return he}function Qs(X,z,B,G){var Y=z.geometry,ee=z.type,he=[];if("Point"===ee||"MultiPoint"===ee)for(var se=0;se<Y.length;se+=3)he.push(Y[se]),he.push(Y[se+1]),X.numPoints++,X.numSimplified++;else if("LineString"===ee)ys(he,Y,X,B,!1,!1);else if("MultiLineString"===ee||"Polygon"===ee)for(se=0;se<Y.length;se++)ys(he,Y[se],X,B,"Polygon"===ee,0===se);else if("MultiPolygon"===ee)for(var ie=0;ie<Y.length;ie++){var ce=Y[ie];for(se=0;se<ce.length;se++)ys(he,ce[se],X,B,!0,0===se)}if(he.length){var Se=z.tags||null;if("LineString"===ee&&G.lineMetrics){for(var Te in Se={},z.tags)Se[Te]=z.tags[Te];Se.mapbox_clip_start=Y.start/Y.size,Se.mapbox_clip_end=Y.end/Y.size}var Me={geometry:he,type:"Polygon"===ee||"MultiPolygon"===ee?3:"LineString"===ee||"MultiLineString"===ee?2:1,tags:Se};null!==z.id&&(Me.id=z.id),X.features.push(Me)}}function ys(X,z,B,G,Y,ee){var he=G*G;if(G>0&&z.size<(Y?he:G))B.numPoints+=z.length/3;else{for(var se=[],ie=0;ie<z.length;ie+=3)(0===G||z[ie+2]>he)&&(B.numSimplified++,se.push(z[ie]),se.push(z[ie+1])),B.numPoints++;Y&&function(ce,Se){for(var Te=0,Me=0,Xe=ce.length,gt=Xe-2;Me<Xe;gt=Me,Me+=2)Te+=(ce[Me]-ce[gt])*(ce[Me+1]+ce[gt+1]);if(Te>0===Se)for(Me=0,Xe=ce.length;Me<Xe/2;Me+=2){var it=ce[Me],dt=ce[Me+1];ce[Me]=ce[Xe-2-Me],ce[Me+1]=ce[Xe-1-Me],ce[Xe-2-Me]=it,ce[Xe-1-Me]=dt}}(se,ee),X.push(se)}}function Ue(X,z){var B=(z=this.options=function(Y,ee){for(var he in ee)Y[he]=ee[he];return Y}(Object.create(this.options),z)).debug;if(B&&console.time("preprocess data"),z.maxZoom<0||z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(z.promoteId&&z.generateId)throw new Error("promoteId and generateId cannot be used together.");var Y,ee,he,se,ie,ce,G=function(Y,ee){var he=[];if("FeatureCollection"===Y.type)for(var se=0;se<Y.features.length;se++)Ca(he,Y.features[se],ee,se);else Ca(he,"Feature"===Y.type?Y:{geometry:Y},ee);return he}(X,z);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",z.indexMaxZoom,z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=Y=G,ie=lo(Y,1,-1-(he=(ee=z).buffer/ee.extent),he,0,-1,2,ee),ce=lo(Y,1,1-he,2+he,0,-1,2,ee),(ie||ce)&&(se=lo(Y,1,-he,1+he,0,-1,2,ee)||[],ie&&(se=Xs(ie,1).concat(se)),ce&&(se=se.concat(Xs(ce,-1)))),(G=se).length&&this.splitTile(G,0,0,0),B&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Rt(X,z,B){return 32*((1<<X)*B+z)+X}function bt(X,z){return z?X.properties[z]:X.id}function Sr(X,z){if(null==X)return!0;if("Feature"===X.type)return null!=bt(X,z);if("FeatureCollection"===X.type){const B=new Set;for(const G of X.features){const Y=bt(G,z);if(null==Y||B.has(Y))return!1;B.add(Y)}return!0}return!1}function ts(X,z){const B=new Map;if(null!=X)if("Feature"===X.type)B.set(bt(X,z),X);else for(const G of X.features)B.set(bt(G,z),G);return B}Ue.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ue.prototype.splitTile=function(X,z,B,G,Y,ee,he){for(var se=[X,z,B,G],ie=this.options,ce=ie.debug;se.length;){G=se.pop(),B=se.pop(),z=se.pop(),X=se.pop();var Se=1<<z,Te=Rt(z,B,G),Me=this.tiles[Te];if(!Me&&(ce>1&&console.time("creation"),Me=this.tiles[Te]=ni(X,z,B,G,ie),this.tileCoords.push({z,x:B,y:G}),ce)){ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",z,B,G,Me.numFeatures,Me.numPoints,Me.numSimplified),console.timeEnd("creation"));var Xe="z"+z;this.stats[Xe]=(this.stats[Xe]||0)+1,this.total++}if(Me.source=X,Y){if(z===ie.maxZoom||z===Y)continue;var gt=1<<Y-z;if(B!==Math.floor(ee/gt)||G!==Math.floor(he/gt))continue}else if(z===ie.indexMaxZoom||Me.numPoints<=ie.indexMaxPoints)continue;if(Me.source=null,0!==X.length){ce>1&&console.time("clipping");var it,dt,xt,an,wn,Yt,It=.5*ie.buffer/ie.extent,sr=.5-It,Ot=.5+It,Un=1+It;it=dt=xt=an=null,wn=lo(X,Se,B-It,B+Ot,0,Me.minX,Me.maxX,ie),Yt=lo(X,Se,B+sr,B+Un,0,Me.minX,Me.maxX,ie),X=null,wn&&(it=lo(wn,Se,G-It,G+Ot,1,Me.minY,Me.maxY,ie),dt=lo(wn,Se,G+sr,G+Un,1,Me.minY,Me.maxY,ie),wn=null),Yt&&(xt=lo(Yt,Se,G-It,G+Ot,1,Me.minY,Me.maxY,ie),an=lo(Yt,Se,G+sr,G+Un,1,Me.minY,Me.maxY,ie),Yt=null),ce>1&&console.timeEnd("clipping"),se.push(it||[],z+1,2*B,2*G),se.push(dt||[],z+1,2*B,2*G+1),se.push(xt||[],z+1,2*B+1,2*G),se.push(an||[],z+1,2*B+1,2*G+1)}}},Ue.prototype.getTile=function(X,z,B){var G=this.options,Y=G.extent,ee=G.debug;if(X<0||X>24)return null;var he=1<<X,se=Rt(X,z=(z%he+he)%he,B);if(this.tiles[se])return Fe(this.tiles[se],Y);ee>1&&console.log("drilling down to z%d-%d-%d",X,z,B);for(var ie,ce=X,Se=z,Te=B;!ie&&ce>0;)ce--,Se=Math.floor(Se/2),Te=Math.floor(Te/2),ie=this.tiles[Rt(ce,Se,Te)];return ie&&ie.source?(ee>1&&console.log("found parent tile z%d-%d-%d",ce,Se,Te),ee>1&&console.time("drilling down"),this.splitTile(ie.source,ce,Se,Te,X,z,B),ee>1&&console.timeEnd("drilling down"),this.tiles[se]?Fe(this.tiles[se],Y):null):null};class Mt extends _s{constructor(z,B,G,Y){super(z,B,G),this._dataUpdateable=new Map,this.loadGeoJSON=(ee,he)=>{const{promoteId:se}=ee;if(ee.request)return _.f(ee.request,(ie,ce,Se,Te)=>{this._dataUpdateable=Sr(ce,se)?ts(ce,se):void 0,he(ie,ce,Se,Te)});if("string"==typeof ee.data)try{const ie=JSON.parse(ee.data);this._dataUpdateable=Sr(ie,se)?ts(ie,se):void 0,he(null,ie)}catch{he(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`))}else ee.dataDiff?this._dataUpdateable?(function(ie,ce,Se){var Te,Me,Xe,gt;if(ce.removeAll&&ie.clear(),ce.remove)for(const it of ce.remove)ie.delete(it);if(ce.add)for(const it of ce.add){const dt=bt(it,Se);null!=dt&&ie.set(dt,it)}if(ce.update)for(const it of ce.update){let dt=ie.get(it.id);if(null==dt)continue;const xt=!it.removeAllProperties&&((null===(Te=it.removeProperties)||void 0===Te?void 0:Te.length)>0||(null===(Me=it.addOrUpdateProperties)||void 0===Me?void 0:Me.length)>0);if((it.newGeometry||it.removeAllProperties||xt)&&(dt=Object.assign({},dt),ie.set(it.id,dt),xt&&(dt.properties=Object.assign({},dt.properties))),it.newGeometry&&(dt.geometry=it.newGeometry),it.removeAllProperties)dt.properties={};else if((null===(Xe=it.removeProperties)||void 0===Xe?void 0:Xe.length)>0)for(const an of it.removeProperties)Object.prototype.hasOwnProperty.call(dt.properties,an)&&delete dt.properties[an];if((null===(gt=it.addOrUpdateProperties)||void 0===gt?void 0:gt.length)>0)for(const{key:an,value:wn}of it.addOrUpdateProperties)dt.properties[an]=wn}}(this._dataUpdateable,ee.dataDiff,se),he(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):he(new Error(`Cannot update existing geojson data in ${ee.source}`)):he(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Y&&(this.loadGeoJSON=Y)}loadGeoJSONTile(z,B){const G=z.tileID.canonical;if(!this._geoJSONIndex)return B(null,null);const Y=this._geoJSONIndex.getTile(G.z,G.x,G.y);if(!Y)return B(null,null);const ee=new class{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=_.N,this.length=se.length,this._features=se}feature(se){return new class{constructor(ie){this._feature=ie,this.extent=_.N,this.type=ie.type,this.properties=ie.tags,"id"in ie&&!isNaN(ie.id)&&(this.id=parseInt(ie.id,10))}loadGeometry(){if(1===this._feature.type){const ie=[];for(const ce of this._feature.geometry)ie.push([new _.P(ce[0],ce[1])]);return ie}{const ie=[];for(const ce of this._feature.geometry){const Se=[];for(const Te of ce)Se.push(new _.P(Te[0],Te[1]));ie.push(Se)}return ie}}toGeoJSON(ie,ce,Se){return nd.call(this,ie,ce,Se)}}(this._features[se])}}(Y.features);let he=gl(ee);0===he.byteOffset&&he.byteLength===he.buffer.byteLength||(he=new Uint8Array(he)),B(null,{vectorTile:ee,rawData:he.buffer})}loadData(z,B){var G;null===(G=this._pendingRequest)||void 0===G||G.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Y=!!(z&&z.request&&z.request.collectResourceTiming)&&new _.bt(z.request);this._pendingCallback=B,this._pendingRequest=this.loadGeoJSON(z,(ee,he)=>{if(delete this._pendingCallback,delete this._pendingRequest,ee||!he)return B(ee);if("object"!=typeof he)return B(new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`));{bi(he,!0);try{if(z.filter){const ie=_.bB(z.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ie.result)throw new Error(ie.value.map(Se=>`${Se.key}: ${Se.message}`).join(", "));he={type:"FeatureCollection",features:he.features.filter(Se=>ie.value.evaluate({zoom:0},Se))}}this._geoJSONIndex=z.cluster?new ka(function({superclusterOptions:ie,clusterProperties:ce}){if(!ce||!ie)return ie;const Se={},Te={},Me={accumulated:null,zoom:0},Xe={properties:null},gt=Object.keys(ce);for(const it of gt){const[dt,xt]=ce[it],an=_.bB(xt),wn=_.bB("string"==typeof dt?[dt,["accumulated"],["get",it]]:dt);Se[it]=an.value,Te[it]=wn.value}return ie.map=it=>{Xe.properties=it;const dt={};for(const xt of gt)dt[xt]=Se[xt].evaluate(Me,Xe);return dt},ie.reduce=(it,dt)=>{Xe.properties=dt;for(const xt of gt)Me.accumulated=it[xt],it[xt]=Te[xt].evaluate(Me,Xe)},ie}(z)).load(he.features):new Ue(ie=he,z.geojsonVtOptions)}catch(ie){return B(ie)}this.loaded={};const se={};if(Y){const ie=Y.finish();ie&&(se.resourceTiming={},se.resourceTiming[z.source]=JSON.parse(JSON.stringify(ie)))}B(null,se)}var ie})}reloadTile(z,B){const G=this.loaded;return G&&G[z.uid]?super.reloadTile(z,B):this.loadTile(z,B)}removeSource(z,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()}getClusterExpansionZoom(z,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(z.clusterId))}catch(G){B(G)}}getClusterChildren(z,B){try{B(null,this._geoJSONIndex.getChildren(z.clusterId))}catch(G){B(G)}}getClusterLeaves(z,B){try{B(null,this._geoJSONIndex.getLeaves(z.clusterId,z.limit,z.offset))}catch(G){B(G)}}}class bs{constructor(z){this.self=z,this.actor=new _.C(z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:_s,geojson:Mt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(B,G)=>{if(this.workerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.workerSourceTypes[B]=G},this.self.registerRTLTextPlugin=B=>{if(_.bC.isParsed())throw new Error("RTL text plugin already registered.");_.bC.applyArabicShaping=B.applyArabicShaping,_.bC.processBidirectionalText=B.processBidirectionalText,_.bC.processStyledBidirectionalText=B.processStyledBidirectionalText}}setReferrer(z,B){this.referrer=B}setImages(z,B,G){this.availableImages[z]=B;for(const Y in this.workerSources[z]){const ee=this.workerSources[z][Y];for(const he in ee)ee[he].availableImages=B}G()}setLayers(z,B,G){this.getLayerIndex(z).replace(B),G()}updateLayers(z,B,G){this.getLayerIndex(z).update(B.layers,B.removedIds),G()}loadTile(z,B,G){this.getWorkerSource(z,B.type,B.source).loadTile(B,G)}loadDEMTile(z,B,G){this.getDEMWorkerSource(z,B.source).loadTile(B,G)}reloadTile(z,B,G){this.getWorkerSource(z,B.type,B.source).reloadTile(B,G)}abortTile(z,B,G){this.getWorkerSource(z,B.type,B.source).abortTile(B,G)}removeTile(z,B,G){this.getWorkerSource(z,B.type,B.source).removeTile(B,G)}removeDEMTile(z,B){this.getDEMWorkerSource(z,B.source).removeTile(B)}removeSource(z,B,G){if(!this.workerSources[z]||!this.workerSources[z][B.type]||!this.workerSources[z][B.type][B.source])return;const Y=this.workerSources[z][B.type][B.source];delete this.workerSources[z][B.type][B.source],void 0!==Y.removeSource?Y.removeSource(B,G):G()}loadWorkerSource(z,B,G){try{this.self.importScripts(B.url),G()}catch(Y){G(Y.toString())}}syncRTLPluginState(z,B,G){try{_.bC.setState(B);const Y=_.bC.getPluginURL();if(_.bC.isLoaded()&&!_.bC.isParsed()&&null!=Y){this.self.importScripts(Y);const ee=_.bC.isParsed();G(ee?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Y}`),ee)}}catch(Y){G(Y.toString())}}getAvailableImages(z){let B=this.availableImages[z];return B||(B=[]),B}getLayerIndex(z){let B=this.layerIndexes[z];return B||(B=this.layerIndexes[z]=new En),B}getWorkerSource(z,B,G){return this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][B]||(this.workerSources[z][B]={}),this.workerSources[z][B][G]||(this.workerSources[z][B][G]=new this.workerSourceTypes[B]({send:(Y,ee,he)=>{this.actor.send(Y,ee,he,z)}},this.getLayerIndex(z),this.getAvailableImages(z))),this.workerSources[z][B][G]}getDEMWorkerSource(z,B){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][B]||(this.demWorkerSources[z][B]=new ml),this.demWorkerSources[z][B]}}return _.i()&&(self.worker=new bs(self)),bs}),eu(0,function(_){class be{static testProp(s){if(!be.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in be.docStyle)return s[d];return s[0]}static create(s,d,p){const g=window.document.createElement(s);return void 0!==d&&(g.className=d),p&&p.appendChild(g),g}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){be.docStyle&&be.selectProp&&(be.userSelect=be.docStyle[be.selectProp],be.docStyle[be.selectProp]="none")}static enableDrag(){be.docStyle&&be.selectProp&&(be.docStyle[be.selectProp]=be.userSelect)}static setTransform(s,d){s.style[be.transformProp]=d}static addEventListener(s,d,p,g={}){s.addEventListener(d,p,"passive"in g?g:g.capture)}static removeEventListener(s,d,p,g={}){s.removeEventListener(d,p,"passive"in g?g:g.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",be.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",be.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",be.suppressClickInternal,!0)},0)}static mousePos(s,d){const p=s.getBoundingClientRect();return new _.P(d.clientX-p.left-s.clientLeft,d.clientY-p.top-s.clientTop)}static touchPos(s,d){const p=s.getBoundingClientRect(),g=[];for(let x=0;x<d.length;x++)g.push(new _.P(d[x].clientX-p.left-s.clientLeft,d[x].clientY-p.top-s.clientTop));return g}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}be.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,be.selectProp=be.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),be.transformProp=be.testProp(["transform","WebkitTransform"]);const Eo={supported:!1,testSupport:function(v){!_s&&ct&&(ml?qs(v):wr=v)}};let wr,ct,_s=!1,ml=!1;function qs(v){const s=v.createTexture();v.bindTexture(v.TEXTURE_2D,s);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,ct),v.isContextLost())return;Eo.supported=!0}catch{}v.deleteTexture(s),_s=!0}var kr,bi,v;typeof document<"u"&&(ct=document.createElement("img"),ct.onload=function(){wr&&qs(wr),wr=null,ml=!0},ct.onerror=function(){_s=!0,wr=null},ct.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let s,d,p,g;v.resetRequestQueue=()=>{s=[],d=0,p=0,g={}},v.addThrottleControl=A=>{const R=p++;return g[R]=A,R},v.removeThrottleControl=A=>{delete g[A],T()},v.getImage=(A,R,O=!0)=>{Eo.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*");const V={requestParameters:A,supportImageRefresh:O,callback:R,cancelled:!1,completed:!1,cancel:()=>{V.completed||V.cancelled||(V.cancelled=!0,V.innerRequest&&(V.innerRequest.cancel(),d--),T())}};return s.push(V),T(),V};const x=A=>{const{requestParameters:R,supportImageRefresh:O,callback:V}=A;return _.e(R,{type:"image"}),(!1!==O||_.i()||_.g(R.url)||R.headers&&!Object.keys(R.headers).reduce((Z,q)=>Z&&"accept"===q,!0)?_.m:M)(R,(Z,q,Q,$)=>{C(A,V,Z,q,Q,$)})},C=(A,R,O,V,Z,q)=>{var Q,$;O?R(O):V instanceof HTMLImageElement||_.a(V)?R(null,V):V&&(Q=V,$=(Q,$)=>{null!=Q?R(Q):null!=$&&R(null,$,{cacheControl:Z,expires:q})},"function"==typeof createImageBitmap?_.b(Q,$):_.d(Q,$)),A.cancelled||(A.completed=!0,d--,T())},T=()=>{const A=(()=>{const R=Object.keys(g);let O=!1;if(R.length>0)for(const V of R)if(O=g[V](),O)break;return O})()?_.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:_.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=d;R<A&&s.length>0;R++){const O=s.shift();if(O.cancelled){R--;continue}const V=x(O);d++,O.innerRequest=V}},M=(A,R)=>{const O=new Image,V=A.url;let Z=!1;const q=A.credentials;return q&&"include"===q?O.crossOrigin="use-credentials":(q&&"same-origin"===q||!_.s(V))&&(O.crossOrigin="anonymous"),O.fetchPriority="high",O.onload=()=>{R(null,O),O.onerror=O.onload=null},O.onerror=()=>{Z||R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),O.onerror=O.onload=null},O.src=V,{cancel:()=>{Z=!0,O.src=""}}}}(kr||(kr={})),kr.resetRequestQueue(),(v=bi||(bi={})).Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown";class nd{constructor(s){this._transformRequestFn=s}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}normalizeSpriteURL(s,d,p){const g=function(x){const C=x.match(Xo);if(!C)throw new Error(`Unable to parse URL "${x}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(s);return g.path+=`${d}${p}`,function(x){const C=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${C}`}(g)}setTransformRequest(s){this._transformRequestFn=s}}const Xo=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Mo(v){var s=new _.A(3);return s[0]=v[0],s[1]=v[1],s[2]=v[2],s}var vs,Qo=function(v,s,d){return v[0]=s[0]-d[0],v[1]=s[1]-d[1],v[2]=s[2]-d[2],v};vs=new _.A(3),_.A!=Float32Array&&(vs[0]=0,vs[1]=0,vs[2]=0);var xa=function(v){var s=v[0],d=v[1];return s*s+d*d};function qi(v){const s=[];if("string"==typeof v)s.push({id:"default",url:v});else if(v&&v.length>0){const d=[];for(const{id:p,url:g}of v){const x=`${p}${g}`;-1===d.indexOf(x)&&(d.push(x),s.push({id:p,url:g}))}}return s}function fl(v,s,d,p,g){if(p)return void v(p);if(g!==Object.values(s).length||g!==Object.values(d).length)return;const x={};for(const C in s){x[C]={};const T=_.h.getImageCanvasContext(d[C]),M=s[C];for(const A in M){const{width:R,height:O,x:V,y:Z,sdf:q,pixelRatio:Q,stretchX:$,stretchY:ae,content:fe}=M[A];x[C][A]={data:null,pixelRatio:Q,sdf:q,stretchX:$,stretchY:ae,content:fe,spriteData:{width:R,height:O,x:V,y:Z,context:T}}}}v(null,x)}!function(){var v=new _.A(2);_.A!=Float32Array&&(v[0]=0,v[1]=0)}();class Zn{constructor(s,d,p,g){this.context=s,this.format=p,this.texture=s.gl.createTexture(),this.update(d,g)}update(s,d,p){const{width:g,height:x}=s,C=!(this.size&&this.size[0]===g&&this.size[1]===x||p),{context:T}=this,{gl:M}=T;if(this.useMipmap=!(!d||!d.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!d||!1!==d.premultiply)),C)this.size=[g,x],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||_.a(s)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,s):M.texImage2D(M.TEXTURE_2D,0,this.format,g,x,0,this.format,M.UNSIGNED_BYTE,s.data);else{const{x:A,y:R}=p||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||_.a(s)?M.texSubImage2D(M.TEXTURE_2D,0,A,R,M.RGBA,M.UNSIGNED_BYTE,s):M.texSubImage2D(M.TEXTURE_2D,0,A,R,g,x,M.RGBA,M.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(s,d,p){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),s!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,s),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||s),this.filter=s),d!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,d),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function Yo(v){const{userImage:s}=v;return!!(s&&s.render&&s.render())&&(v.data.replace(new Uint8Array(s.data.buffer)),!0)}class Lr extends _.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new _.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,callback:p}of this.requestors)this._notify(d,p);this.requestors=[]}}getImage(s){const d=this.images[s];if(d&&!d.data&&d.spriteData){const p=d.spriteData;d.data=new _.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let p=!0;const g=d.data||d.spriteData;return this._validateStretch(d.stretchX,g&&g.width)||(this.fire(new _.j(new Error(`Image "${s}" has invalid "stretchX" value`))),p=!1),this._validateStretch(d.stretchY,g&&g.height)||(this.fire(new _.j(new Error(`Image "${s}" has invalid "stretchY" value`))),p=!1),this._validateContent(d.content,d)||(this.fire(new _.j(new Error(`Image "${s}" has invalid "content" value`))),p=!1),p}_validateStretch(s,d){if(!s)return!0;let p=0;for(const g of s){if(g[0]<p||g[1]<g[0]||d<g[1])return!1;p=g[1]}return!0}_validateContent(s,d){if(!s)return!0;if(4!==s.length)return!1;const p=d.spriteData,g=p&&p.width||d.data.width,x=p&&p.height||d.data.height;return!(s[0]<0||g<s[0]||s[1]<0||x<s[1]||s[2]<0||g<s[2]||s[3]<0||x<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,p=!0){const g=this.getImage(s);if(p&&(g.data.width!==d.data.width||g.data.height!==d.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=g.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,d){let p=!0;if(!this.isLoaded())for(const g of s)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(s,d):this.requestors.push({ids:s,callback:d})}_notify(s,d){const p={};for(const g of s){let x=this.getImage(g);x||(this.fire(new _.k("styleimagemissing",{id:g})),x=this.getImage(g)),x?p[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!(!x.userImage||!x.userImage.render)}:_.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,p)}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],p=this.getImage(s);if(!p)return null;if(d&&d.position.version===p.version)return d.position;if(d)d.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new _.I(g,p);this.patterns[s]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Zn(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const x in this.patterns)s.push(this.patterns[x].bin);const{w:d,h:p}=_.p(s),g=this.atlasImage;g.resize({width:d||1,height:p||1});for(const x in this.patterns){const{bin:C}=this.patterns[x],T=C.x+1,M=C.y+1,A=this.getImage(x).data,R=A.width,O=A.height;_.R.copy(A,g,{x:0,y:0},{x:T,y:M},{width:R,height:O}),_.R.copy(A,g,{x:0,y:O-1},{x:T,y:M-1},{width:R,height:1}),_.R.copy(A,g,{x:0,y:0},{x:T,y:M+O},{width:R,height:1}),_.R.copy(A,g,{x:R-1,y:0},{x:T-1,y:M},{width:1,height:O}),_.R.copy(A,g,{x:0,y:0},{x:T+R,y:M},{width:1,height:O})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const p=this.getImage(d);p||_.w(`Image with ID: "${d}" was not found`),Yo(p)&&this.updateImage(d,p)}}}const Zs=1e20;function Zi(v,s,d,p,g,x,C,T,M){for(let A=s;A<s+p;A++)Xr(v,d*x+A,x,g,C,T,M);for(let A=d;A<d+g;A++)Xr(v,A*x+s,1,p,C,T,M)}function Xr(v,s,d,p,g,x,C){x[0]=0,C[0]=-Zs,C[1]=Zs,g[0]=v[s];for(let T=1,M=0,A=0;T<p;T++){g[T]=v[s+T*d];const R=T*T;do{const O=x[M];A=(g[T]-g[O]+R-O*O)/(T-O)/2}while(A<=C[M]&&--M>-1);M++,x[M]=T,C[M]=A,C[M+1]=Zs}for(let T=0,M=0;T<p;T++){for(;C[M+1]<T;)M++;const A=x[M],R=T-A;v[s+T*d]=g[A]+R*R}}class Do{constructor(s,d){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={}}setURL(s){this.url=s}getGlyphs(s,d){const p=[];for(const g in s)for(const x of s[g])p.push({stack:g,id:x});_.o(p,({stack:g,id:x},C)=>{let T=this.entries[g];T||(T=this.entries[g]={glyphs:{},requests:{},ranges:{}});let M=T.glyphs[x];if(void 0!==M)return void C(null,{stack:g,id:x,glyph:M});if(M=this._tinySDF(T,g,x),M)return T.glyphs[x]=M,void C(null,{stack:g,id:x,glyph:M});const A=Math.floor(x/256);if(256*A>65535)return void C(new Error("glyphs > 65535 not supported"));if(T.ranges[A])return void C(null,{stack:g,id:x,glyph:M});if(!this.url)return void C(new Error("glyphsUrl is not set"));let R=T.requests[A];R||(R=T.requests[A]=[],Do.loadGlyphRange(g,A,this.url,this.requestManager,(O,V)=>{if(V){for(const Z in V)this._doesCharSupportLocalGlyph(+Z)||(T.glyphs[+Z]=V[+Z]);T.ranges[A]=!0}for(const Z of R)Z(O,V);delete T.requests[A]})),R.push((O,V)=>{O?C(O):V&&C(null,{stack:g,id:x,glyph:V[x]||null})})},(g,x)=>{if(g)d(g);else if(x){const C={};for(const{stack:T,id:M,glyph:A}of x)(C[T]||(C[T]={}))[M]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};d(null,C)}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(_.u["CJK Unified Ideographs"](s)||_.u["Hangul Syllables"](s)||_.u.Hiragana(s)||_.u.Katakana(s))}_tinySDF(s,d,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let x=s.tinySDF;if(!x){let T="400";/bold/i.test(d)?T="900":/medium/i.test(d)?T="500":/light/i.test(d)&&(T="200"),x=s.tinySDF=new Do.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:T})}const C=x.draw(String.fromCharCode(p));return{id:p,bitmap:new _.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Do.loadGlyphRange=function(v,s,d,p,g){const x=256*s,C=x+255,T=p.transformRequest(d.replace("{fontstack}",v).replace("{range}",`${x}-${C}`),bi.Glyphs);_.l(T,(M,A)=>{if(M)g(M);else if(A){const R={};for(const O of _.n(A))R[O.id]=O;g(null,R)}})},Do.TinySDF=class{constructor({fontSize:v=24,buffer:s=3,radius:d=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:C="normal"}={}){this.buffer=s,this.cutoff=p,this.radius=d;const T=this.size=v+4*s,M=this._createCanvas(T),A=this.ctx=M.getContext("2d",{willReadFrequently:!0});A.font=`${C} ${x} ${v}px ${g}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(v){const s=document.createElement("canvas");return s.width=s.height=v,s}draw(v){const{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(v),C=Math.ceil(d),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),M=Math.min(this.size-this.buffer,C+Math.ceil(p)),A=T+2*this.buffer,R=M+2*this.buffer,O=Math.max(A*R,0),V=new Uint8ClampedArray(O),Z={data:V,width:A,height:R,glyphWidth:T,glyphHeight:M,glyphTop:C,glyphLeft:0,glyphAdvance:s};if(0===T||0===M)return Z;const{ctx:q,buffer:Q,gridInner:$,gridOuter:ae}=this;q.clearRect(Q,Q,T,M),q.fillText(v,Q,Q+C);const fe=q.getImageData(Q,Q,T,M);ae.fill(Zs,0,O),$.fill(0,0,O);for(let te=0;te<M;te++)for(let de=0;de<T;de++){const _e=fe.data[4*(te*T+de)+3]/255;if(0===_e)continue;const ve=(te+Q)*A+de+Q;if(1===_e)ae[ve]=0,$[ve]=Zs;else{const Ce=.5-_e;ae[ve]=Ce>0?Ce*Ce:0,$[ve]=Ce<0?Ce*Ce:0}}Zi(ae,0,0,A,R,A,this.f,this.v,this.z),Zi($,Q,Q,T,M,A,this.f,this.v,this.z);for(let te=0;te<O;te++){const de=Math.sqrt(ae[te])-Math.sqrt($[te]);V[te]=Math.round(255-255*(de/this.radius+this.cutoff))}return Z}};class Ii{constructor(){this.specification=_.v.light.position}possiblyEvaluate(s,d){return _.z(s.expression.evaluate(d))}interpolate(s,d,p){return{x:_.B.number(s.x,d.x,p),y:_.B.number(s.y,d.y,p),z:_.B.number(s.z,d.z,p)}}}let wa;class gl extends _.E{constructor(s){super(),wa=wa||new _.r({anchor:new _.D(_.v.light.anchor),position:new Ii,color:new _.D(_.v.light.color),intensity:new _.D(_.v.light.intensity)}),this._transitionable=new _.T(wa),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(_.t,s,d))for(const p in s){const g=s[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,p){return(!p||!1!==p.validate)&&_.x(this,s.call(_.y,_.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:_.v})))}}class bn{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){const p=s.join(",")+String(d);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(s,d)),this.dashEntry[p]}getDashRanges(s,d,p){const g=[];let x=s.length%2==1?-s[s.length-1]*p:0,C=s[0]*p,T=!0;g.push({left:x,right:C,isDash:T,zeroLength:0===s[0]});let M=s[0];for(let A=1;A<s.length;A++){T=!T;const R=s[A];x=M*p,M+=R,C=M*p,g.push({left:x,right:C,isDash:T,zeroLength:0===R})}return g}addRoundDash(s,d,p){const g=d/2;for(let x=-p;x<=p;x++){const C=this.width*(this.nextRow+p+x);let T=0,M=s[T];for(let A=0;A<this.width;A++){A/M.right>1&&(M=s[++T]);const R=Math.abs(A-M.left),O=Math.abs(A-M.right),V=Math.min(R,O);let Z;const q=x/p*(g+1);if(M.isDash){const Q=g-Math.abs(q);Z=Math.sqrt(V*V+Q*Q)}else Z=g-Math.sqrt(V*V+q*q);this.data[C+A]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(s){for(let T=s.length-1;T>=0;--T){const M=s[T],A=s[T+1];M.zeroLength?s.splice(T,1):A&&A.isDash===M.isDash&&(A.left=M.left,s.splice(T,1))}const d=s[0],p=s[s.length-1];d.isDash===p.isDash&&(d.left=p.left-this.width,p.right=d.right+this.width);const g=this.width*this.nextRow;let x=0,C=s[x];for(let T=0;T<this.width;T++){T/C.right>1&&(C=s[++x]);const M=Math.abs(T-C.left),A=Math.abs(T-C.right),R=Math.min(M,A);this.data[g+T]=Math.max(0,Math.min(255,(C.isDash?R:-R)+128))}}addDash(s,d){const p=d?7:0,g=2*p+1;if(this.nextRow+g>this.height)return _.w("LineAtlas out of space"),null;let x=0;for(let T=0;T<s.length;T++)x+=s[T];if(0!==x){const T=this.width/x,M=this.getDashRanges(s,this.width,T);d?this.addRoundDash(M,T,p):this.addRegularDash(M)}const C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:x};return this.nextRow+=g,this.dirty=!0,C}bind(s){const d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class _l{constructor(s,d,p){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let x=0;x<g.length;x++){const C=new _.C(g[x],d,p);C.name=`Worker ${x}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d,p){_.o(this.actors,(g,x)=>{g.send(s,d,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}}function Jo(v,s,d){const p=function(g,x){if(g)return d(g);if(x){const C=_.F(_.e(x,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(C.vectorLayers=x.vector_layers,C.vectorLayerIds=C.vectorLayers.map(T=>T.id)),d(null,C)}};return v.url?_.f(s.transformRequest(v.url,bi.Source),p):_.h.frame(()=>p(null,v))}class Nn{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof _.L?new _.L(s.lng,s.lat):_.L.convert(s),this}setSouthWest(s){return this._sw=s instanceof _.L?new _.L(s.lng,s.lat):_.L.convert(s),this}extend(s){const d=this._sw,p=this._ne;let g,x;if(s instanceof _.L)g=s,x=s;else{if(!(s instanceof Nn))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(Nn.convert(s)):this.extend(_.L.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(_.L.convert(s)):this;if(g=s._sw,x=s._ne,!g||!x)return this}return d||p?(d.lng=Math.min(g.lng,d.lng),d.lat=Math.min(g.lat,d.lat),p.lng=Math.max(x.lng,p.lng),p.lat=Math.max(x.lat,p.lat)):(this._sw=new _.L(g.lng,g.lat),this._ne=new _.L(x.lng,x.lat)),this}getCenter(){return new _.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new _.L(this.getWest(),this.getNorth())}getSouthEast(){return new _.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:d,lat:p}=_.L.convert(s);let g=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(s){return s instanceof Nn?s:s&&new Nn(s)}static fromLngLat(s,d=0){const p=360*d/40075017,g=p/Math.cos(Math.PI/180*s.lat);return new Nn(new _.L(s.lng-g,s.lat-p),new _.L(s.lng+g,s.lat+p))}}class Br{constructor(s,d,p){this.bounds=Nn.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=p||24}validateBounds(s){return Array.isArray(s)&&4===s.length?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),p=Math.floor(_.G(this.bounds.getWest())*d),g=Math.floor(_.H(this.bounds.getNorth())*d),x=Math.ceil(_.G(this.bounds.getEast())*d),C=Math.ceil(_.H(this.bounds.getSouth())*d);return s.x>=p&&s.x<x&&s.y>=g&&s.y<C}}class Zt extends _.E{constructor(s,d,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new _.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Jo(this._options,this.map._requestManager,(x,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),x?this.fire(new _.j(x)):C&&(_.e(this,C),C.bounds&&(this.tileBounds=new Br(C.bounds,this.minzoom,this.maxzoom)),this.fire(new _.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>_.e({},this._options),this.id=s,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,_.e(this,_.F(d,["url","scheme","tileSize","promoteId"])),this._options=_.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(s,d){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,bi.Tile),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(C,T){return delete s.request,s.aborted?d(null):C&&404!==C.status?d(C):(T&&T.resourceTiming&&(s.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&s.setExpiryData(T),s.loadVectorData(T,this.map.painter),d(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,s.actor&&"expired"!==s.state?"loading"===s.state?s.reloadCallback=d:s.request=s.actor.send("reloadTile",g,x.bind(this)):(s.actor=this.dispatcher.getActor(),s.request=s.actor.send("loadTile",g,x.bind(this)))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id},void 0)}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ka extends _.E{constructor(s,d,p,g){super(),this.id=s,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=_.e({type:"raster"},d),_.e(this,_.F(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new _.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Jo(this._options,this.map._requestManager,(s,d)=>{this._tileJSONRequest=null,this._loaded=!0,s?this.fire(new _.j(s)):d&&(_.e(this,d),d.bounds&&(this.tileBounds=new Br(d.bounds,this.minzoom,this.maxzoom)),this.fire(new _.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}serialize(){return _.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,d){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.request=kr.getImage(this.map._requestManager.transformRequest(p,bi.Tile),(g,x,C)=>{if(delete s.request,s.aborted)s.state="unloaded",d(null);else if(g)s.state="errored",d(g);else if(x){this.map._refreshExpiredTiles&&C&&s.setExpiryData(C);const T=this.map.painter.context,M=T.gl;s.texture=this.map.painter.getTileTexture(x.width),s.texture?s.texture.update(x,{useMipmap:!0}):(s.texture=new Zn(T,x,M.RGBA,{useMipmap:!0}),s.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),T.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax)),s.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(s,d){s.request&&(s.request.cancel(),delete s.request),d()}unloadTile(s,d){s.texture&&this.map.painter.saveTileTexture(s.texture),d()}hasTransition(){return!1}}class Sa extends ka{constructor(s,d,p,g){super(s,d,p,g),this.type="raster-dem",this.maxzoom=22,this._options=_.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s,d){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,bi.Tile);function x(C,T){C&&(s.state="errored",d(C)),T&&(s.dem=T,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded",d(null))}s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.request=kr.getImage(g,(C,T,M)=>_._(this,void 0,void 0,function*(){if(delete s.request,s.aborted)s.state="unloaded",d(null);else if(C)s.state="errored",d(C);else if(T){this.map._refreshExpiredTiles&&s.setExpiryData(M);const A=_.a(T)&&_.J()?T:yield function(O){return _._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&_.K()){const V=O.width+2,Z=O.height+2;try{return new _.R({width:V,height:Z},yield _.M(O,-1,-1,V,Z))}catch{}}return _.h.getImageData(O,1)})}(T),R={uid:s.uid,coord:s.tileID,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};s.actor&&"expired"!==s.state||(s.actor=this.dispatcher.getActor(),s.actor.send("loadDEMTile",R,x))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(s){const d=s.canonical,p=Math.pow(2,d.z),g=(d.x-1+p)%p,x=0===d.x?s.wrap-1:s.wrap,C=(d.x+1+p)%p,T=d.x+1===p?s.wrap+1:s.wrap,M={};return M[new _.O(s.overscaledZ,x,d.z,g,d.y).key]={backfilled:!1},M[new _.O(s.overscaledZ,T,d.z,C,d.y).key]={backfilled:!1},d.y>0&&(M[new _.O(s.overscaledZ,x,d.z,g,d.y-1).key]={backfilled:!1},M[new _.O(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},M[new _.O(s.overscaledZ,T,d.z,C,d.y-1).key]={backfilled:!1}),d.y+1<p&&(M[new _.O(s.overscaledZ,x,d.z,g,d.y+1).key]={backfilled:!1},M[new _.O(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},M[new _.O(s.overscaledZ,T,d.z,C,d.y+1).key]={backfilled:!1}),M}unloadTile(s){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&s.actor.send("removeDEMTile",{uid:s.uid,source:this.id})}}class Mn extends _.E{constructor(s,d,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>_.e({},this._options,{type:this.type,data:this._data}),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=d.data,this._options=_.e({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const x=_.N/this.tileSize;this.workerOptions=_.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*x,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*x,extent:_.N,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:_.N,radius:(d.clusterRadius||50)*x,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(void 0!==s.clusterRadius&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),void 0!==s.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:s,source:this.id},d),this}getClusterChildren(s,d){return this.actor.send("geojson.getClusterChildren",{clusterId:s,source:this.id},d),this}getClusterLeaves(s,d,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:s,limit:d,offset:p},g),this}_updateWorkerData(s){const d=_.e({},this.workerOptions);s?d.dataDiff=s:"string"==typeof this._data?(d.request=this.map._requestManager.transformRequest(_.h.resolveURL(this._data),bi.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new _.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new _.k("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new _.j(p));const C={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&_.e(C,{resourceTiming:x}),this.fire(new _.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new _.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return 0===this._pendingLoads}loadTile(s,d){const p=s.actor?"reloadTile":"loadTile";s.actor=this.actor;const g={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.request=this.actor.send(p,g,(x,C)=>(delete s.request,s.unloadVectorData(),s.aborted?d(null):x?d(x):(s.loadVectorData(C,this.map.painter,"reloadTile"===p),d(null))))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.aborted=!0}unloadTile(s){s.unloadVectorData(),this.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var sn=_.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ao extends _.E{constructor(s,d,p,g){super(),this.load=(x,C)=>{this._loaded=!1,this.fire(new _.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=kr.getImage(this.map._requestManager.transformRequest(this.url,bi.Image),(T,M)=>{this._request=null,this._loaded=!0,T?this.fire(new _.j(T)):M&&(this.image=M,x&&(this.coordinates=x),C&&C(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||!this.image)return;const x=this.map.painter.context,C=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=_.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Zn(x,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let T=!1;for(const M in this.tiles){const A=this.tiles[M];"loaded"!==A.state&&(A.state="loaded",A.texture=this.texture,T=!0)}T&&this.fire(new _.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=s,this.dispatcher=p,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=d}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=s.url,this.load(s.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new _.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(s){this.coordinates=s;const d=s.map(_.U.fromLngLat);this.tileID=function(g){let x=1/0,C=1/0,T=-1/0,M=-1/0;for(const V of g)x=Math.min(x,V.x),C=Math.min(C,V.y),T=Math.max(T,V.x),M=Math.max(M,V.y);const A=Math.max(T-x,M-C),R=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),O=Math.pow(2,R);return new _.W(R,Math.floor((x+T)/2*O),Math.floor((C+M)/2*O))}(d),this.minzoom=this.maxzoom=this.tileID.z;const p=d.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new _.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,_.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,_.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,_.N,_.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new _.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(s,d){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},d(null)):(s.state="errored",d(null))}hasTransition(){return!1}}class Dt extends ao{constructor(s,d,p,g){super(s,d,p,g),this.load=()=>{this._loaded=!1;const x=this.options;this.urls=[];for(const C of x.urls)this.urls.push(this.map._requestManager.transformRequest(C,bi.Source).url);_.X(this.urls,(C,T)=>{this._loaded=!0,C?this.fire(new _.j(C)):T&&(this.video=T,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const x=this.map.painter.context,C=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=_.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new Zn(x,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let T=!1;for(const M in this.tiles){const A=this.tiles[M];"loaded"!==A.state&&(A.state="loaded",A.texture=this.texture,T=!0)}T&&this.fire(new _.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new _.j(new _.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class es extends ao{constructor(s,d,p,g){super(s,d,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new _.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const C=this.map.painter.context,T=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=_.S.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Zn(C,this.canvas,T.RGBA,{premultiply:!0});let M=!1;for(const A in this.tiles){const R=this.tiles[A];"loaded"!==R.state&&(R.state="loaded",R.texture=this.texture,M=!0)}M&&this.fire(new _.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(x=>!Array.isArray(x)||2!==x.length||x.some(C=>"number"!=typeof C))||this.fire(new _.j(new _.Y(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new _.j(new _.Y(`sources.${s}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new _.j(new _.Y(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof HTMLCanvasElement||this.fire(new _.j(new _.Y(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new _.j(new _.Y(`sources.${s}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const ic={},Io=v=>{switch(v){case"geojson":return Mn;case"image":return ao;case"raster":return ka;case"raster-dem":return Sa;case"vector":return Zt;case"video":return Dt;case"canvas":return es}return ic[v]};function vl(v,s){const d=_.Z();return _.$(d,d,[1,1,0]),_.a0(d,d,[.5*v.width,.5*v.height,1]),_.a1(d,d,v.calculatePosMatrix(s.toUnwrapped()))}function Ca(v,s,d,p,g,x){const C=function(O,V,Z){if(O)for(const q of O){const Q=V[q];if(Q&&Q.source===Z&&"fill-extrusion"===Q.type)return!0}else for(const q in V){const Q=V[q];if(Q.source===Z&&"fill-extrusion"===Q.type)return!0}return!1}(g&&g.layers,s,v.id),T=x.maxPitchScaleFactor(),M=v.tilesIn(p,T,C);M.sort(Ks);const A=[];for(const O of M)A.push({wrappedTileID:O.tileID.wrapped().key,queryResults:O.tile.queryRenderedFeatures(s,d,v._state,O.queryGeometry,O.cameraQueryGeometry,O.scale,g,x,T,vl(v.transform,O.tileID))});const R=function(O){const V={},Z={};for(const q of O){const Q=q.queryResults,$=q.wrappedTileID,ae=Z[$]=Z[$]||{};for(const fe in Q){const te=Q[fe],de=ae[fe]=ae[fe]||{},_e=V[fe]=V[fe]||[];for(const ve of te)de[ve.featureIndex]||(de[ve.featureIndex]=!0,_e.push(ve))}}return V}(A);for(const O in R)R[O].forEach(V=>{const Z=V.feature,q=v.getFeatureState(Z.layer["source-layer"],Z.id);Z.source=Z.layer.source,Z.layer["source-layer"]&&(Z.sourceLayer=Z.layer["source-layer"]),Z.state=q});return R}function Ks(v,s){const d=v.tileID,p=s.tileID;return d.overscaledZ-p.overscaledZ||d.canonical.y-p.canonical.y||d.wrap-p.wrap||d.canonical.x-p.canonical.x}class Ta{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=_.a2(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const d=s+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(g,x){const C={};if(!x)return C;for(const T of g){const M=T.layerIds.map(A=>x.getLayer(A)).filter(Boolean);if(0!==M.length){T.layers=M,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(A=>M.filter(R=>R.id===A)[0]));for(const A of M)C[A.id]=T}}return C}(s.buckets,d.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof _.a4){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof _.a4&&x.hasRTLText){this.hasRTLText=!0,_.a5();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(g).queryRadius(x))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new _.a3}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(s)}const d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Zn(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Zn(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,p,g,x,C,T,M,A,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:C,tileSize:this.tileSize,pixelPosMatrix:R,transform:M,params:T,queryPadding:this.queryPadding*A},s,d,p):{}}querySourceFeatures(s,d){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),x=d&&d.sourceLayer?d.sourceLayer:"",C=g._geojsonTileLayer||g[x];if(!C)return;const T=_.a6(d&&d.filter),{z:M,x:A,y:R}=this.tileID.canonical,O={z:M,x:A,y:R};for(let V=0;V<C.length;V++){const Z=C.feature(V);if(T.needGeometry){const $=_.a7(Z,!0);if(!T.filter(new _.a8(this.tileID.overscaledZ),$,this.tileID.canonical))continue}else if(!T.filter(new _.a8(this.tileID.overscaledZ),Z))continue;const q=p.getId(Z,x),Q=new _.a9(Z,M,A,R,q);Q.tile=O,s.push(Q)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const d=this.expirationTime;if(s.cacheControl){const p=_.aa(s.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(d)if(this.expirationTime<d)g=!0;else{const x=this.expirationTime-d;x?this.expirationTime=p+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(s).length)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!d.style.hasLayer(g))continue;const x=this.buckets[g],C=x.layers[0].sourceLayer||"_geojsonTileLayer",T=p[C],M=s[C];if(!T||!M||0===Object.keys(M).length)continue;x.update(M,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const A=d&&d.style&&d.style.getLayer(g);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(x)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<_.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=_.h.now()+s}setDependencies(s,d){const p={};for(const g of d)p[g]=!0;this.dependencies[s]=p}hasDependency(s,d){for(const p of s){const g=this.dependencies[p];if(g)for(const x of d)if(g[x])return!0}return!1}}class yl{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(const s in this.data)for(const d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,p){const g=s.wrapped().key;void 0===this.data[g]&&(this.data[g]=[]);const x={value:d,timeout:void 0};if(void 0!==p&&(x.timeout=setTimeout(()=>{this.remove(s,x)},p)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),0===this.data[s].length&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){const d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;const p=s.wrapped().key,g=void 0===d?0:this.data[p].indexOf(d),x=this.data[p][g];return this.data[p].splice(g,1),x.timeout&&clearTimeout(x.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){const d=[];for(const p in this.data)for(const g of this.data[p])s(g.value)||d.push(g);for(const p of d)this.remove(p.value.tileID,p)}}class ke{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,p){const g=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][g]=this.stateChanges[s][g]||{},_.e(this.stateChanges[s][g],p),null===this.deletedStates[s]){this.deletedStates[s]={};for(const x in this.state[s])x!==g&&(this.deletedStates[s][x]=null)}else if(this.deletedStates[s]&&null===this.deletedStates[s][g]){this.deletedStates[s][g]={};for(const x in this.state[s][g])p[x]||(this.deletedStates[s][g][x]=null)}else for(const x in p)this.deletedStates[s]&&this.deletedStates[s][g]&&null===this.deletedStates[s][g][x]&&delete this.deletedStates[s][g][x]}removeFeatureState(s,d,p){if(null===this.deletedStates[s])return;const g=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},p&&void 0!==d)null!==this.deletedStates[s][g]&&(this.deletedStates[s][g]=this.deletedStates[s][g]||{},this.deletedStates[s][g][p]=null);else if(void 0!==d)if(this.stateChanges[s]&&this.stateChanges[s][g])for(p in this.deletedStates[s][g]={},this.stateChanges[s][g])this.deletedStates[s][g][p]=null;else this.deletedStates[s][g]=null;else this.deletedStates[s]=null}getState(s,d){const p=String(d),g=_.e({},(this.state[s]||{})[p],(this.stateChanges[s]||{})[p]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){const x=this.deletedStates[s][d];if(null===x)return{};for(const C in x)delete g[C]}return g}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),_.e(this.state[g][C],this.stateChanges[g][C]),x[C]=this.state[g][C];p[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(null===this.deletedStates[g])for(const C in this.state[g])x[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(null===this.deletedStates[g][C])this.state[g][C]={};else for(const T of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][T];x[C]=this.state[g][C]}p[g]=p[g]||{},_.e(p[g],x)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const g in s)s[g].setFeatureState(p,d)}}class Qr extends _.E{constructor(s,d,p){super(),this.id=s,this.dispatcher=p,this.on("data",g=>{"source"===g.dataType&&"metadata"===g.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===g.dataType&&"content"===g.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,x,C,T)=>{const M=new(Io(x.type))(g,x,C,T);if(M.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${M.id}`);return M})(s,d,p,this),this._tiles={},this._cache=new yl(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ke,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const d=this._tiles[s];if("loaded"!==d.state&&"errored"!==d.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d){return this._source.loadTile(s,d)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){this._source.abortTile&&this._source.abortTile(s,()=>{}),this._source.fire(new _.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const p=this._tiles[d];p.upload(s),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(lo).map(s=>s.key)}getRenderableIds(s){const d=[];for(const p in this._tiles)this._isIdRenderable(p,s)&&d.push(this._tiles[p]);return s?d.sort((p,g)=>{const x=p.tileID,C=g.tileID,T=new _.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),M=new _.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-C.overscaledZ||M.y-T.y||M.x-T.x}).map(p=>p.tileID.key):d.map(p=>p.tileID).sort(lo).map(p=>p.key)}hasRenderableParent(s){const d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)"errored"!==this._tiles[s].state&&this._reloadTile(s,"reloading")}}_reloadTile(s,d){const p=this._tiles[s];p&&("loading"!==p.state&&(p.state=d),this._loadTile(p,this._tileLoaded.bind(this,p,s,d)))}_tileLoaded(s,d,p,g){if(g)return s.state="errored",void(404!==g.status?this._source.fire(new _.j(g,{tile:s})):this.update(this.transform,this.terrain));s.timeAdded=_.h.now(),"expired"===p&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),"raster-dem"===this.getSource().type&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new _.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const d=this.getRenderableIds();for(let g=0;g<d.length;g++){const x=d[g];if(s.neighboringTiles&&s.neighboringTiles[x]){const C=this.getTileByID(x);p(s,C),p(C,s)}}function p(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=x.tileID.canonical.x-g.tileID.canonical.x;const T=x.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),A=x.tileID.key;0===C&&0===T||Math.abs(T)>1||(Math.abs(C)>1&&(1===Math.abs(C+M)?C+=M:1===Math.abs(C-M)&&(C-=M)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,C,T),g.neighboringTiles&&g.neighboringTiles[A]&&(g.neighboringTiles[A].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,p,g){for(const x in this._tiles){let C=this._tiles[x];if(g[x]||!C.hasData()||C.tileID.overscaledZ<=d||C.tileID.overscaledZ>p)continue;let T=C.tileID;for(;C&&C.tileID.overscaledZ>d+1;){const A=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[A.key],C&&C.hasData()&&(T=A)}let M=T;for(;M.overscaledZ>d;)if(M=M.scaledTo(M.overscaledZ-1),s[M.key]){g[T.key]=T;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){const p=this._loadedParentTiles[s.key];return p&&p.tileID.overscaledZ>=d?p:null}for(let p=s.overscaledZ-1;p>=d;p--){const g=s.scaledTo(p),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(s){const d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const d=Math.ceil(s.width/this._source.tileSize)+1,p=Math.ceil(s.height/this._source.tileSize)+1,g=Math.floor(d*p*(null===this._maxTileCacheZoomLevels?_.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(s){const d=Math.round((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,d){const p={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+d),p[x.tileID.key]=x}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(s,d){if(this.transform=s,this.terrain=d,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new _.O(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(p=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(p=p.filter(R=>this._source.hasTile(R)))):p=[];const g=s.coveringZoomLevel(this._source),x=Math.max(g-Qr.maxOverzooming,this._source.minzoom),C=Math.max(g+Qr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const O of p)if(O.canonical.z>this._source.minzoom){const V=O.scaledTo(O.canonical.z-1);R[V.key]=V;const Z=O.scaledTo(Math.max(this._source.minzoom,Math.min(O.canonical.z,5)));R[Z.key]=Z}p=p.concat(Object.values(R))}const T=0===p.length&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new _.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(p,g);if(xn(this._source.type)){const R={},O={},V=Object.keys(M),Z=_.h.now();for(const q of V){const Q=M[q],$=this._tiles[q];if(!$||0!==$.fadeEndTime&&$.fadeEndTime<=Z)continue;const ae=this.findLoadedParent(Q,x);ae&&(this._addTile(ae.tileID),R[ae.tileID.key]=ae.tileID),O[q]=Q}this._retainLoadedChildren(O,g,C,M);for(const q in R)M[q]||(this._coveredTiles[q]=!0,M[q]=R[q]);if(d){const q={},Q={};for(const $ of p)this._tiles[$.key].hasData()?q[$.key]=$:Q[$.key]=$;for(const $ in Q){const ae=Q[$].children(this._source.maxzoom);this._tiles[ae[0].key]&&this._tiles[ae[1].key]&&this._tiles[ae[2].key]&&this._tiles[ae[3].key]&&(q[ae[0].key]=M[ae[0].key]=ae[0],q[ae[1].key]=M[ae[1].key]=ae[1],q[ae[2].key]=M[ae[2].key]=ae[2],q[ae[3].key]=M[ae[3].key]=ae[3],delete Q[$])}for(const $ in Q){const ae=this.findLoadedParent(Q[$],this._source.minzoom);if(ae){q[ae.tileID.key]=M[ae.tileID.key]=ae.tileID;for(const fe in q)q[fe].isChildOf(ae.tileID)&&delete q[fe]}}for(const $ in this._tiles)q[$]||(this._coveredTiles[$]=!0)}}for(const R in M)this._tiles[R].clearFadeHold();const A=_.ab(this._tiles,M);for(const R of A){const O=this._tiles[R];O.hasSymbolBuckets&&!O.holdingForFade()?O.setHoldDuration(this.map._fadeDuration):O.hasSymbolBuckets&&!O.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){const p={},g={},x=Math.max(d-Qr.maxOverzooming,this._source.minzoom),C=Math.max(d+Qr.maxUnderzooming,this._source.minzoom),T={};for(const M of s){const A=this._addTile(M);p[M.key]=M,A.hasData()||d<this._source.maxzoom&&(T[M.key]=M)}this._retainLoadedChildren(T,d,C,p);for(const M of s){let A=this._tiles[M.key];if(A.hasData())continue;if(d+1>this._source.maxzoom){const O=M.children(this._source.maxzoom)[0],V=this.getTile(O);if(V&&V.hasData()){p[O.key]=O;continue}}else{const O=M.children(this._source.maxzoom);if(p[O[0].key]&&p[O[1].key]&&p[O[2].key]&&p[O[3].key])continue}let R=A.wasRequested();for(let O=M.overscaledZ-1;O>=x;--O){const V=M.scaledTo(O);if(g[V.key])break;if(g[V.key]=!0,A=this.getTile(V),!A&&R&&(A=this._addTile(V)),A){const Z=A.hasData();if((R||Z)&&(p[V.key]=V),R=A.wasRequested(),Z)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const d=[];let p,g=this._tiles[s].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}d.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;g=x}for(const x of d)this._loadedParentTiles[x]=p}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));const p=d;return d||(d=new Ta(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,s.key,d.state))),d.uses++,this._tiles[s.key]=d,p||this._source.fire(new _.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const p=d.getExpiryTimeout();p&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},p))}_removeTile(s){const d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&"reloading"!==d.state?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,p){const g=[],x=this.transform;if(!x)return g;const C=p?x.getCameraQueryGeometry(s):s,T=s.map(q=>x.pointCoordinate(q,this.terrain)),M=C.map(q=>x.pointCoordinate(q,this.terrain)),A=this.getIds();let R=1/0,O=1/0,V=-1/0,Z=-1/0;for(const q of M)R=Math.min(R,q.x),O=Math.min(O,q.y),V=Math.max(V,q.x),Z=Math.max(Z,q.y);for(let q=0;q<A.length;q++){const Q=this._tiles[A[q]];if(Q.holdingForFade())continue;const $=Q.tileID,ae=Math.pow(2,x.zoom-Q.tileID.overscaledZ),fe=d*Q.queryPadding*_.N/Q.tileSize/ae,te=[$.getTilePoint(new _.U(R,O)),$.getTilePoint(new _.U(V,Z))];if(te[0].x-fe<_.N&&te[0].y-fe<_.N&&te[1].x+fe>=0&&te[1].y+fe>=0){const de=T.map(ve=>$.getTilePoint(ve)),_e=M.map(ve=>$.getTilePoint(ve));g.push({tile:Q,tileID:$,queryGeometry:de,cameraQueryGeometry:_e,scale:ae})}}return g}getVisibleCoordinates(s){const d=this.getRenderableIds(s).map(p=>this._tiles[p].tileID);for(const p of d)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(xn(this._source.type)){const s=_.h.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setFeatureState(s,d,p){this._state.updateState(s=s||"_geojsonTileLayer",d,p)}removeFeatureState(s,d,p){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,p)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,p){const g=this._tiles[s];g&&g.setDependencies(d,p)}reloadTilesForDependencies(s,d){for(const p in this._tiles)this._tiles[p].hasDependency(s,d)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(s,d))}}function lo(v,s){const d=Math.abs(2*v.wrap)-+(v.wrap<0),p=Math.abs(2*s.wrap)-+(s.wrap<0);return v.overscaledZ-s.overscaledZ||p-d||s.canonical.y-v.canonical.y||s.canonical.x-v.canonical.x}function xn(v){return"raster"===v||"image"===v||"video"===v}Qr.maxOverzooming=10,Qr.maxUnderzooming=3;const rn="mapboxgl_preloaded_worker_pool";class co{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<co.workerCount;)this.workers.push(new Worker(_.c.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[rn]}numActive(){return Object.keys(this.active).length}}const bl=Math.floor(_.h.hardwareConcurrency/2);let Ao;function rc(){return Ao||(Ao=new co),Ao}co.workerCount=_.ac(globalThis)?Math.max(Math.min(bl,3),1):1;class xl{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(1===this.points.length)return this.points[0];s=_.ad(s,0,1);let d=1,p=this._distances[d];const g=s*this.paddedLength+this.padding;for(;p<g&&d<this._distances.length;)p=this._distances[++d];const x=d-1,C=this._distances[x],T=p-C,M=T>0?(g-C)/T:0;return this.points[x].mult(1-M).add(this.points[d].mult(M))}}function Xs(v,s){let d=!0;return"always"===v||"never"!==v&&"never"!==s||(d=!1),d}class Ea{constructor(s,d,p){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(s/p),this.yCellCount=Math.ceil(d/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,p,g,x){this._forEachCell(d,p,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(s,d,p,g){this._forEachCell(d-g,p-g,d+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(p),this.circles.push(g)}_insertBoxCell(s,d,p,g,x,C){this.boxCells[x].push(C)}_insertCircleCell(s,d,p,g,x,C){this.circleCells[x].push(C)}_query(s,d,p,g,x,C,T){if(p<0||s>this.width||g<0||d>this.height)return[];const M=[];if(s<=0&&d<=0&&this.width<=p&&this.height<=g){if(x)return[{key:null,x1:s,y1:d,x2:p,y2:g}];for(let A=0;A<this.boxKeys.length;A++)M.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){const R=this.circles[3*A],O=this.circles[3*A+1],V=this.circles[3*A+2];M.push({key:this.circleKeys[A],x1:R-V,y1:O-V,x2:R+V,y2:O+V})}}else this._forEachCell(s,d,p,g,this._queryCell,M,{hitTest:x,overlapMode:C,seenUids:{box:{},circle:{}}},T);return M}query(s,d,p,g){return this._query(s,d,p,g,!1,null)}hitTest(s,d,p,g,x,C){return this._query(s,d,p,g,!0,x,C).length>0}hitTestCircle(s,d,p,g,x){const C=s-p,T=s+p,M=d-p,A=d+p;if(T<0||C>this.width||A<0||M>this.height)return!1;const R=[];return this._forEachCell(C,M,T,A,this._queryCellCircle,R,{hitTest:!0,overlapMode:g,circle:{x:s,y:d,radius:p},seenUids:{box:{},circle:{}}},x),R.length>0}_queryCell(s,d,p,g,x,C,T,M){const{seenUids:A,hitTest:R,overlapMode:O}=T,V=this.boxCells[x];if(null!==V){const q=this.bboxes;for(const Q of V)if(!A.box[Q]){A.box[Q]=!0;const $=4*Q,ae=this.boxKeys[Q];if(s<=q[$+2]&&d<=q[$+3]&&p>=q[$+0]&&g>=q[$+1]&&(!M||M(ae))&&(!R||!Xs(O,ae.overlapMode))&&(C.push({key:ae,x1:q[$],y1:q[$+1],x2:q[$+2],y2:q[$+3]}),R))return!0}}const Z=this.circleCells[x];if(null!==Z){const q=this.circles;for(const Q of Z)if(!A.circle[Q]){A.circle[Q]=!0;const $=3*Q,ae=this.circleKeys[Q];if(this._circleAndRectCollide(q[$],q[$+1],q[$+2],s,d,p,g)&&(!M||M(ae))&&(!R||!Xs(O,ae.overlapMode))){const fe=q[$],te=q[$+1],de=q[$+2];if(C.push({key:ae,x1:fe-de,y1:te-de,x2:fe+de,y2:te+de}),R)return!0}}}return!1}_queryCellCircle(s,d,p,g,x,C,T,M){const{circle:A,seenUids:R,overlapMode:O}=T,V=this.boxCells[x];if(null!==V){const q=this.bboxes;for(const Q of V)if(!R.box[Q]){R.box[Q]=!0;const $=4*Q,ae=this.boxKeys[Q];if(this._circleAndRectCollide(A.x,A.y,A.radius,q[$+0],q[$+1],q[$+2],q[$+3])&&(!M||M(ae))&&!Xs(O,ae.overlapMode))return C.push(!0),!0}}const Z=this.circleCells[x];if(null!==Z){const q=this.circles;for(const Q of Z)if(!R.circle[Q]){R.circle[Q]=!0;const $=3*Q,ae=this.circleKeys[Q];if(this._circlesCollide(q[$],q[$+1],q[$+2],A.x,A.y,A.radius)&&(!M||M(ae))&&!Xs(O,ae.overlapMode))return C.push(!0),!0}}}_forEachCell(s,d,p,g,x,C,T,M){const A=this._convertToXCellCoord(s),R=this._convertToYCellCoord(d),O=this._convertToXCellCoord(p),V=this._convertToYCellCoord(g);for(let Z=A;Z<=O;Z++)for(let q=R;q<=V;q++)if(x.call(this,s,d,p,g,this.xCellCount*q+Z,C,T,M))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,p,g,x,C){const T=g-s,M=x-d,A=p+C;return A*A>T*T+M*M}_circleAndRectCollide(s,d,p,g,x,C,T){const M=(C-g)/2,A=Math.abs(s-(g+M));if(A>M+p)return!1;const R=(T-x)/2,O=Math.abs(d-(x+R));if(O>R+p)return!1;if(A<=M||O<=R)return!0;const V=A-M,Z=O-R;return V*V+Z*Z<=p*p}}function Fe(v,s,d,p,g){const x=_.Z();return s?(_.a0(x,x,[1/g,1/g,1]),d||_.ae(x,x,p.angle)):_.a1(x,p.labelPlaneMatrix,v),x}function Po(v,s,d,p,g){if(s){const x=_.af(v);return _.a0(x,x,[g,g,1]),d||_.ae(x,x,-p.angle),x}return p.glCoordMatrix}function ni(v,s,d){let p;d?(p=[v.x,v.y,d(v.x,v.y),1],_.ag(p,p,s)):(p=[v.x,v.y,0,1],Y(p,p,s));const g=p[3];return{point:new _.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function Qs(v,s){return.5+v/s*.5}function ys(v,s){const d=v[0]/v[3],p=v[1]/v[3];return d>=-s[0]&&d<=s[0]&&p>=-s[1]&&p<=s[1]}function Ue(v,s,d,p,g,x,C,T,M,A){const R=p?v.textSizeData:v.iconSizeData,O=_.ah(R,d.transform.zoom),V=[256/d.width*2+1,256/d.height*2+1],Z=p?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Z.clear();const q=v.lineVertexArray,Q=p?v.text.placedSymbolArray:v.icon.placedSymbolArray,$=d.transform.width/d.transform.height;let ae=!1;for(let fe=0;fe<Q.length;fe++){const te=Q.get(fe);if(te.hidden||te.writingMode===_.ai.vertical&&!ae){G(te.numGlyphs,Z);continue}let de;if(ae=!1,A?(de=[te.anchorX,te.anchorY,A(te.anchorX,te.anchorY),1],_.ag(de,de,s)):(de=[te.anchorX,te.anchorY,0,1],Y(de,de,s)),!ys(de,V)){G(te.numGlyphs,Z);continue}const _e=Qs(d.transform.cameraToCenterDistance,de[3]),ve=_.aj(R,O,te),Ce=C?ve/_e:ve*_e,Ae=new _.P(te.anchorX,te.anchorY),Ie=ni(Ae,g,A).point,Le={projections:{},offsets:{}},$e=Sr(te,Ce,!1,T,s,g,x,v.glyphOffsetArray,q,Z,Ie,Ae,Le,$,M,A);ae=$e.useVertical,($e.notEnoughRoom||ae||$e.needsFlipping&&Sr(te,Ce,!0,T,s,g,x,v.glyphOffsetArray,q,Z,Ie,Ae,Le,$,M,A).notEnoughRoom)&&G(te.numGlyphs,Z)}p?v.text.dynamicLayoutVertexBuffer.updateData(Z):v.icon.dynamicLayoutVertexBuffer.updateData(Z)}function Rt(v,s,d,p,g,x,C,T,M,A,R,O,V){const Z=T.glyphStartIndex+T.numGlyphs,q=T.lineStartIndex,Q=T.lineStartIndex+T.lineLength,$=s.getoffsetX(T.glyphStartIndex),ae=s.getoffsetX(Z-1),fe=z(v*$,d,p,g,x,C,T.segment,q,Q,M,A,R,O,V);if(!fe)return null;const te=z(v*ae,d,p,g,x,C,T.segment,q,Q,M,A,R,O,V);return te?{first:fe,last:te}:null}function bt(v,s,d,p){return v===_.ai.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*p?{useVertical:!0}:(v===_.ai.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function Sr(v,s,d,p,g,x,C,T,M,A,R,O,V,Z,q,Q){const $=s/24,ae=v.lineOffsetX*$,fe=v.lineOffsetY*$;let te;if(v.numGlyphs>1){const de=v.glyphStartIndex+v.numGlyphs,_e=v.lineStartIndex,ve=v.lineStartIndex+v.lineLength,Ce=Rt($,T,ae,fe,d,R,O,v,M,x,V,q,Q);if(!Ce)return{notEnoughRoom:!0};const Ae=ni(Ce.first.point,C,Q).point,Ie=ni(Ce.last.point,C,Q).point;if(p&&!d){const Le=bt(v.writingMode,Ae,Ie,Z);if(Le)return Le}te=[Ce.first];for(let Le=v.glyphStartIndex+1;Le<de-1;Le++)te.push(z($*T.getoffsetX(Le),ae,fe,d,R,O,v.segment,_e,ve,M,x,V,q,Q));te.push(Ce.last)}else{if(p&&!d){const _e=ni(O,g,Q).point,ve=v.lineStartIndex+v.segment+1,Ce=new _.P(M.getx(ve),M.gety(ve)),Ae=ni(Ce,g,Q),Ie=Ae.signedDistanceFromCamera>0?Ae.point:ts(O,Ce,_e,1,g,Q),Le=bt(v.writingMode,_e,Ie,Z);if(Le)return Le}const de=z($*T.getoffsetX(v.glyphStartIndex),ae,fe,d,R,O,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,M,x,V,q,Q);if(!de)return{notEnoughRoom:!0};te=[de]}for(const de of te)_.ak(A,de.point,de.angle);return{}}function ts(v,s,d,p,g,x){const C=ni(v.add(v.sub(s)._unit()),g,x).point,T=d.sub(C);return d.add(T._mult(p/T.mag()))}function Mt(v,s){const{projectionCache:d,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:C,getElevation:T,previousVertex:M,direction:A,absOffsetX:R}=s;if(d.projections[v])return d.projections[v];const O=new _.P(p.getx(v),p.gety(v)),V=ni(O,g,T);if(V.signedDistanceFromCamera>0)return d.projections[v]=V.point,V.point;const Z=v-A;return ts(0===C?x:new _.P(p.getx(Z),p.gety(Z)),O,M,R-C+1,g,T)}function bs(v,s,d){return v._unit()._perp()._mult(s*d)}function X(v,s,d,p,g,x,C,T){const{projectionCache:M,direction:A}=T;if(M.offsets[v])return M.offsets[v];const R=d.add(s);if(v+A<p||v+A>=g)return M.offsets[v]=R,R;const O=Mt(v+A,T),V=bs(O.sub(d),C,A),Z=d.add(V),q=O.add(V);return M.offsets[v]=_.al(x,R,Z,q)||R,M.offsets[v]}function z(v,s,d,p,g,x,C,T,M,A,R,O,V,Z){const q=p?v-s:v+s;let Q=q>0?1:-1,$=0;p&&(Q*=-1,$=Math.PI),Q<0&&($+=Math.PI);let ae,fe,te=Q>0?T+C:T+C+1,de=g,_e=g,ve=0,Ce=0;const Ae=Math.abs(q),Ie=[];let Le;for(;ve+Ce<=Ae;){if(te+=Q,te<T||te>=M)return null;ve+=Ce,_e=de,fe=ae;const Ne={projectionCache:O,lineVertexArray:A,labelPlaneMatrix:R,tileAnchorPoint:x,distanceFromAnchor:ve,getElevation:Z,previousVertex:_e,direction:Q,absOffsetX:Ae};if(de=Mt(te,Ne),0===d)Ie.push(_e),Le=de.sub(_e);else{let ht;const ot=de.sub(_e);ht=0===ot.mag()?bs(Mt(te+Q,Ne).sub(de),d,Q):bs(ot,d,Q),fe||(fe=_e.add(ht)),ae=X(te,ht,de,T,M,fe,d,Ne),Ie.push(fe),Le=ae.sub(fe)}Ce=Le.mag()}const $e=Le._mult((Ae-ve)/Ce)._add(fe||_e),Nt=$+Math.atan2(de.y-_e.y,de.x-_e.x);return Ie.push($e),{point:$e,angle:V?Nt:0,path:Ie}}const B=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function G(v,s){for(let d=0;d<v;d++){const p=s.length;s.resize(p+4),s.float32.set(B,3*p)}}function Y(v,s,d){const p=s[0],g=s[1];return v[0]=d[0]*p+d[4]*g+d[12],v[1]=d[1]*p+d[5]*g+d[13],v[3]=d[3]*p+d[7]*g+d[15],v}const ee=100;class he{constructor(s,d=new Ea(s.width+200,s.height+200,25),p=new Ea(s.width+200,s.height+200,25)){this.transform=s,this.grid=d,this.ignoredGrid=p,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+ee,this.screenBottomBoundary=s.height+ee,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,p,g,x,C){const T=this.projectAndGetPerspectiveRatio(g,s.anchorPointX,s.anchorPointY,C),M=p*T.perspectiveRatio,A=s.x1*M+T.point.x,R=s.y1*M+T.point.y,O=s.x2*M+T.point.x,V=s.y2*M+T.point.y;return!this.isInsideGrid(A,R,O,V)||"always"!==d&&this.grid.hitTest(A,R,O,V,d,x)||T.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[A,R,O,V],offscreen:this.isOffscreen(A,R,O,V)}}placeCollisionCircles(s,d,p,g,x,C,T,M,A,R,O,V,Z,q){const Q=[],$=new _.P(d.anchorX,d.anchorY),ae=ni($,C,q),fe=Qs(this.transform.cameraToCenterDistance,ae.signedDistanceFromCamera),te=(R?x/fe:x*fe)/_.ap,de=ni($,T,q).point,_e=Rt(te,g,d.lineOffsetX*te,d.lineOffsetY*te,!1,de,$,d,p,T,{projections:{},offsets:{}},!1,q);let ve=!1,Ce=!1,Ae=!0;if(_e){const Ie=.5*V*fe+Z,Le=new _.P(-100,-100),$e=new _.P(this.screenRightBoundary,this.screenBottomBoundary),Nt=new xl,Ne=_e.first,ht=_e.last;let ot=[];for(let Tt=Ne.path.length-1;Tt>=1;Tt--)ot.push(Ne.path[Tt]);for(let Tt=1;Tt<ht.path.length;Tt++)ot.push(ht.path[Tt]);const _n=2.5*Ie;if(M){const Tt=ot.map(Bt=>ni(Bt,M,q));ot=Tt.some(Bt=>Bt.signedDistanceFromCamera<=0)?[]:Tt.map(Bt=>Bt.point)}let zt=[];if(ot.length>0){const Tt=ot[0].clone(),Bt=ot[0].clone();for(let Yn=1;Yn<ot.length;Yn++)Tt.x=Math.min(Tt.x,ot[Yn].x),Tt.y=Math.min(Tt.y,ot[Yn].y),Bt.x=Math.max(Bt.x,ot[Yn].x),Bt.y=Math.max(Bt.y,ot[Yn].y);zt=Tt.x>=Le.x&&Bt.x<=$e.x&&Tt.y>=Le.y&&Bt.y<=$e.y?[ot]:Bt.x<Le.x||Tt.x>$e.x||Bt.y<Le.y||Tt.y>$e.y?[]:_.am([ot],Le.x,Le.y,$e.x,$e.y)}for(const Tt of zt){Nt.reset(Tt,.25*Ie);let Bt=0;Bt=Nt.length<=.5*Ie?1:Math.ceil(Nt.paddedLength/_n)+1;for(let Yn=0;Yn<Bt;Yn++){const Sn=Yn/Math.max(Bt-1,1),Vi=Nt.lerp(Sn),Si=Vi.x+ee,di=Vi.y+ee;Q.push(Si,di,Ie,0);const dr=Si-Ie,vn=di-Ie,Dr=Si+Ie,Vo=di+Ie;if(Ae=Ae&&this.isOffscreen(dr,vn,Dr,Vo),Ce=Ce||this.isInsideGrid(dr,vn,Dr,Vo),"always"!==s&&this.grid.hitTestCircle(Si,di,Ie,s,O)&&(ve=!0,!A))return{circles:[],offscreen:!1,collisionDetected:ve}}}}return{circles:!A&&ve||!Ce||fe<this.perspectiveRatioCutoff?[]:Q,offscreen:Ae,collisionDetected:ve}}queryRenderedSymbols(s){if(0===s.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let p=1/0,g=1/0,x=-1/0,C=-1/0;for(const R of s){const O=new _.P(R.x+ee,R.y+ee);p=Math.min(p,O.x),g=Math.min(g,O.y),x=Math.max(x,O.x),C=Math.max(C,O.y),d.push(O)}const T=this.grid.query(p,g,x,C).concat(this.ignoredGrid.query(p,g,x,C)),M={},A={};for(const R of T){const O=R.key;if(void 0===M[O.bucketInstanceId]&&(M[O.bucketInstanceId]={}),M[O.bucketInstanceId][O.featureIndex])continue;const V=[new _.P(R.x1,R.y1),new _.P(R.x2,R.y1),new _.P(R.x2,R.y2),new _.P(R.x1,R.y2)];_.an(d,V)&&(M[O.bucketInstanceId][O.featureIndex]=!0,void 0===A[O.bucketInstanceId]&&(A[O.bucketInstanceId]=[]),A[O.bucketInstanceId].push(O.featureIndex))}return A}insertCollisionBox(s,d,p,g,x,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:C,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,p,g,x,C){const T=p?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:x,collisionGroupID:C,overlapMode:d};for(let A=0;A<s.length;A+=4)T.insertCircle(M,s[A],s[A+1],s[A+2])}projectAndGetPerspectiveRatio(s,d,p,g){let x;return g?(x=[d,p,g(d,p),1],_.ag(x,x,s)):(x=[d,p,0,1],Y(x,x,s)),{point:new _.P((x[0]/x[3]+1)/2*this.transform.width+ee,(-x[1]/x[3]+1)/2*this.transform.height+ee),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(s,d,p,g){return p<ee||s>=this.screenRightBoundary||g<ee||d>this.screenBottomBoundary}isInsideGrid(s,d,p,g){return p>=0&&s<this.gridRightBoundary&&g>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=_.ao([]);return _.$(s,s,[-100,-100,0]),s}}function se(v,s,d){return s*(_.N/(v.tileSize*Math.pow(2,d-v.tileID.overscaledZ)))}class ie{constructor(s,d,p,g){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):g&&p?1:0,this.placed=p}isHidden(){return 0===this.opacity&&!this.placed}}class ce{constructor(s,d,p,g,x){this.text=new ie(s?s.text:null,d,p,x),this.icon=new ie(s?s.icon:null,d,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Se{constructor(s,d,p){this.text=s,this.icon=d,this.skipFade=p}}class Te{constructor(){this.invProjMatrix=_.Z(),this.viewportMatrix=_.Z(),this.circles=[]}}class Me{constructor(s,d,p,g,x){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=x}}class Xe{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:p=>p.collisionGroupID===d}}return this.collisionGroups[s]}}function gt(v,s,d,p,g){const{horizontalAlign:x,verticalAlign:C}=_.au(v);return new _.P(-(x-.5)*s+p[0]*g,-(C-.5)*d+p[1]*g)}function it(v,s,d,p,g,x){const{x1:C,x2:T,y1:M,y2:A,anchorPointX:R,anchorPointY:O}=v,V=new _.P(s,d);return p&&V._rotate(g?x:-x),{x1:C+V.x,y1:M+V.y,x2:T+V.x,y2:A+V.y,anchorPointX:R,anchorPointY:O}}class dt{constructor(s,d,p,g,x){this.transform=s.clone(),this.terrain=d,this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Xe(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,d,p,g){const x=p.getBucket(d),C=p.latestFeatureIndex;if(!x||!C||d.id!==x.layerIds[0])return;const T=p.collisionBoxArray,M=x.layers[0].layout,A=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),R=p.tileSize/_.N,O=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),V="map"===M.get("text-pitch-alignment"),Z="map"===M.get("text-rotation-alignment"),q=se(p,1,this.transform.zoom),Q=Fe(O,V,Z,this.transform,q);let $=null;if(V){const fe=Po(O,V,Z,this.transform,q);$=_.a1([],this.transform.labelPlaneMatrix,fe)}this.retainedQueryData[x.bucketInstanceId]=new Me(x.bucketInstanceId,C,x.sourceLayerIndex,x.index,p.tileID);const ae={bucket:x,layout:M,posMatrix:O,textLabelPlaneMatrix:Q,labelToScreenMatrix:$,scale:A,textPixelRatio:R,holdingForFade:p.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:_.ah(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const fe of x.sortKeyRanges){const{sortKey:te,symbolInstanceStart:de,symbolInstanceEnd:_e}=fe;s.push({sortKey:te,symbolInstanceStart:de,symbolInstanceEnd:_e,parameters:ae})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ae})}attemptAnchorPlacement(s,d,p,g,x,C,T,M,A,R,O,V,Z,q,Q,$){const ae=_.aq[s.textAnchor],fe=[s.textOffset0,s.textOffset1],te=gt(ae,p,g,fe,x),de=this.collisionIndex.placeCollisionBox(it(d,te.x,te.y,C,T,this.transform.angle),O,M,A,R.predicate,$);if((!Q||0!==this.collisionIndex.placeCollisionBox(it(Q,te.x,te.y,C,T,this.transform.angle),O,M,A,R.predicate,$).box.length)&&de.box.length>0){let _e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID].text&&(_e=this.prevPlacement.variableOffsets[V.crossTileID].anchor),0===V.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[V.crossTileID]={textOffset:fe,width:p,height:g,anchor:ae,textBoxScale:x,prevAnchor:_e},this.markUsedJustification(Z,ae,V,q),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,q,V),this.placedOrientations[V.crossTileID]=q),{shift:te,placedGlyphBoxes:de}}}placeLayerBucketPart(s,d,p){const{bucket:g,layout:x,posMatrix:C,textLabelPlaneMatrix:T,labelToScreenMatrix:M,textPixelRatio:A,holdingForFade:R,collisionBoxArray:O,partiallyEvaluatedTextSize:V,collisionGroup:Z}=s.parameters,q=x.get("text-optional"),Q=x.get("icon-optional"),$=_.ar(x,"text-overlap","text-allow-overlap"),ae="always"===$,fe=_.ar(x,"icon-overlap","icon-allow-overlap"),te="always"===fe,de="map"===x.get("text-rotation-alignment"),_e="map"===x.get("text-pitch-alignment"),ve="none"!==x.get("icon-text-fit"),Ce="viewport-y"===x.get("symbol-z-order"),Ae=ae&&(te||!g.hasIconData()||Q),Ie=te&&(ae||!g.hasTextData()||q);!g.collisionArrays&&O&&g.deserializeCollisionBoxes(O);const Le=this.retainedQueryData[g.bucketInstanceId].tileID,$e=this.terrain?(Ne,ht)=>this.terrain.getElevation(Le,Ne,ht):null,Nt=(Ne,ht)=>{var ot,_n;if(d[Ne.crossTileID])return;if(R)return void(this.placements[Ne.crossTileID]=new Se(!1,!1,!1));let zt=!1,Tt=!1,Bt=!0,Yn=null,Sn={box:null,offscreen:null},Vi={box:null,offscreen:null},Si=null,di=null,dr=null,vn=0,Dr=0,Vo=0;ht.textFeatureIndex?vn=ht.textFeatureIndex:Ne.useRuntimeCollisionCircles&&(vn=Ne.featureIndex),ht.verticalTextFeatureIndex&&(Dr=ht.verticalTextFeatureIndex);const Ha=ht.textBox;if(Ha){const ur=Jn=>{let Pi=_.ai.horizontal;if(g.allowVerticalPlacement&&!Jn&&this.prevPlacement){const hr=this.prevPlacement.placedOrientations[Ne.crossTileID];hr&&(this.placedOrientations[Ne.crossTileID]=hr,Pi=hr,this.markUsedOrientation(g,Pi,Ne))}return Pi},er=(Jn,Pi)=>{if(g.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&ht.verticalTextBox){for(const hr of g.writingModes)if(hr===_.ai.vertical?(Sn=Pi(),Vi=Sn):Sn=Jn(),Sn&&Sn.box&&Sn.box.length)break}else Sn=Jn()},Hr=Ne.textAnchorOffsetStartIndex,aa=Ne.textAnchorOffsetEndIndex;if(aa===Hr){const Jn=(Pi,hr)=>{const gi=this.collisionIndex.placeCollisionBox(Pi,$,A,C,Z.predicate,$e);return gi&&gi.box&&gi.box.length&&(this.markUsedOrientation(g,hr,Ne),this.placedOrientations[Ne.crossTileID]=hr),gi};er(()=>Jn(Ha,_.ai.horizontal),()=>{const Pi=ht.verticalTextBox;return g.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&Pi?Jn(Pi,_.ai.vertical):{box:null,offscreen:null}}),ur(Sn&&Sn.box&&Sn.box.length)}else{let Jn=_.aq[null===(_n=null===(ot=this.prevPlacement)||void 0===ot?void 0:ot.variableOffsets[Ne.crossTileID])||void 0===_n?void 0:_n.anchor];const Pi=(gi,Fl,_d)=>{const bu=gi.x2-gi.x1,xu=gi.y2-gi.y1,vm=Ne.textBoxScale,wu=ve&&"never"===fe?Fl:null;let rs={box:[],offscreen:!1},la="never"===$?1:2,os="never";Jn&&la++;for(let io=0;io<la;io++){for(let ss=Hr;ss<aa;ss++){const Nh=g.textAnchorOffsets.get(ss);if(Jn&&Nh.textAnchor!==Jn)continue;const As=this.attemptAnchorPlacement(Nh,gi,bu,xu,vm,de,_e,A,C,Z,os,Ne,g,_d,wu,$e);if(As&&(rs=As.placedGlyphBoxes,rs&&rs.box&&rs.box.length))return zt=!0,Yn=As.shift,rs}Jn?Jn=null:os=$}return rs};er(()=>Pi(Ha,ht.iconBox,_.ai.horizontal),()=>{const gi=ht.verticalTextBox;return g.allowVerticalPlacement&&!(Sn&&Sn.box&&Sn.box.length)&&Ne.numVerticalGlyphVertices>0&&gi?Pi(gi,ht.verticalIconBox,_.ai.vertical):{box:null,offscreen:null}}),Sn&&(zt=Sn.box,Bt=Sn.offscreen);const hr=ur(Sn&&Sn.box);if(!zt&&this.prevPlacement){const gi=this.prevPlacement.variableOffsets[Ne.crossTileID];gi&&(this.variableOffsets[Ne.crossTileID]=gi,this.markUsedJustification(g,gi.anchor,Ne,hr))}}}if(Si=Sn,zt=Si&&Si.box&&Si.box.length>0,Bt=Si&&Si.offscreen,Ne.useRuntimeCollisionCircles){const ur=g.text.placedSymbolArray.get(Ne.centerJustifiedTextSymbolIndex),er=_.aj(g.textSizeData,V,ur),Hr=x.get("text-padding");di=this.collisionIndex.placeCollisionCircles($,ur,g.lineVertexArray,g.glyphOffsetArray,er,C,T,M,p,_e,Z.predicate,Ne.collisionCircleDiameter,Hr,$e),di.circles.length&&di.collisionDetected&&!p&&_.w("Collisions detected, but collision boxes are not shown"),zt=ae||di.circles.length>0&&!di.collisionDetected,Bt=Bt&&di.offscreen}if(ht.iconFeatureIndex&&(Vo=ht.iconFeatureIndex),ht.iconBox){const ur=er=>{const Hr=ve&&Yn?it(er,Yn.x,Yn.y,de,_e,this.transform.angle):er;return this.collisionIndex.placeCollisionBox(Hr,fe,A,C,Z.predicate,$e)};Vi&&Vi.box&&Vi.box.length&&ht.verticalIconBox?(dr=ur(ht.verticalIconBox),Tt=dr.box.length>0):(dr=ur(ht.iconBox),Tt=dr.box.length>0),Bt=Bt&&dr.offscreen}const Ol=q||0===Ne.numHorizontalGlyphVertices&&0===Ne.numVerticalGlyphVertices,kc=Q||0===Ne.numIconVertices;if(Ol||kc?kc?Ol||(Tt=Tt&&zt):zt=Tt&&zt:Tt=zt=Tt&&zt,zt&&Si&&Si.box&&this.collisionIndex.insertCollisionBox(Si.box,$,x.get("text-ignore-placement"),g.bucketInstanceId,Vi&&Vi.box&&Dr?Dr:vn,Z.ID),Tt&&dr&&this.collisionIndex.insertCollisionBox(dr.box,fe,x.get("icon-ignore-placement"),g.bucketInstanceId,Vo,Z.ID),di&&(zt&&this.collisionIndex.insertCollisionCircles(di.circles,$,x.get("text-ignore-placement"),g.bucketInstanceId,vn,Z.ID),p)){const ur=g.bucketInstanceId;let er=this.collisionCircleArrays[ur];void 0===er&&(er=this.collisionCircleArrays[ur]=new Te);for(let Hr=0;Hr<di.circles.length;Hr+=4)er.circles.push(di.circles[Hr+0]),er.circles.push(di.circles[Hr+1]),er.circles.push(di.circles[Hr+2]),er.circles.push(di.collisionDetected?1:0)}if(0===Ne.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===g.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ne.crossTileID]=new Se(zt||Ae,Tt||Ie,Bt||g.justReloaded),d[Ne.crossTileID]=!0};if(Ce){if(0!==s.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Ne=g.getSortedSymbolIndexes(this.transform.angle);for(let ht=Ne.length-1;ht>=0;--ht){const ot=Ne[ht];Nt(g.symbolInstances.get(ot),g.collisionArrays[ot])}}else for(let Ne=s.symbolInstanceStart;Ne<s.symbolInstanceEnd;Ne++)Nt(g.symbolInstances.get(Ne),g.collisionArrays[Ne]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const Ne=this.collisionCircleArrays[g.bucketInstanceId];_.as(Ne.invProjMatrix,C),Ne.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(s,d,p,g){let x;x=g===_.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[_.at(d)];const C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const T of C)T>=0&&(s.text.placedSymbolArray.get(T).crossTileID=x>=0&&T!==x?0:p.crossTileID)}markUsedOrientation(s,d,p){const g=d===_.ai.horizontal||d===_.ai.horizontalOnly?d:0,x=d===_.ai.vertical?d:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const T of C)s.text.placedSymbolArray.get(T).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let p=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const g=d?d.symbolFadeChange(s):1,x=d?d.opacities:{},C=d?d.variableOffsets:{},T=d?d.placedOrientations:{};for(const M in this.placements){const A=this.placements[M],R=x[M];R?(this.opacities[M]=new ce(R,g,A.text,A.icon),p=p||A.text!==R.text.placed||A.icon!==R.icon.placed):(this.opacities[M]=new ce(null,g,A.text,A.icon,A.skipFade),p=p||A.text||A.icon)}for(const M in x){const A=x[M];if(!this.opacities[M]){const R=new ce(A,g,!1,!1);R.isHidden()||(this.opacities[M]=R,p=p||A.text.placed||A.icon.placed)}}for(const M in C)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=C[M]);for(const M in T)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=T[M]);if(d&&void 0===d.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=s:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const p={};for(const g of d){const x=g.getBucket(s);x&&g.latestFeatureIndex&&s.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,g.collisionBoxArray)}}updateBucketOpacities(s,d,p){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const g=s.layers[0],x=g.layout,C=new ce(null,0,!1,!1,!0),T=x.get("text-allow-overlap"),M=x.get("icon-allow-overlap"),A=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),R="map"===x.get("text-rotation-alignment"),O="map"===x.get("text-pitch-alignment"),V="none"!==x.get("icon-text-fit"),Z=new ce(null,0,T&&(M||!s.hasIconData()||x.get("icon-optional")),M&&(T||!s.hasTextData()||x.get("text-optional")),!0);!s.collisionArrays&&p&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(p);const q=(Q,$,ae)=>{for(let fe=0;fe<$/4;fe++)Q.opacityVertexArray.emplaceBack(ae);Q.hasVisibleVertices=Q.hasVisibleVertices||ae!==Ro};for(let Q=0;Q<s.symbolInstances.length;Q++){const $=s.symbolInstances.get(Q),{numHorizontalGlyphVertices:ae,numVerticalGlyphVertices:fe,crossTileID:te}=$;let de=this.opacities[te];d[te]?de=C:de||(de=Z,this.opacities[te]=de),d[te]=!0;const _e=$.numIconVertices>0,ve=this.placedOrientations[$.crossTileID],Ce=ve===_.ai.vertical,Ae=ve===_.ai.horizontal||ve===_.ai.horizontalOnly;if(ae>0||fe>0){const Ie=zn(de.text);q(s.text,ae,Ce?Ro:Ie),q(s.text,fe,Ae?Ro:Ie);const Le=de.text.isHidden();[$.rightJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.leftJustifiedTextSymbolIndex].forEach(Ne=>{Ne>=0&&(s.text.placedSymbolArray.get(Ne).hidden=Le||Ce?1:0)}),$.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get($.verticalPlacedTextSymbolIndex).hidden=Le||Ae?1:0);const $e=this.variableOffsets[$.crossTileID];$e&&this.markUsedJustification(s,$e.anchor,$,ve);const Nt=this.placedOrientations[$.crossTileID];Nt&&(this.markUsedJustification(s,"left",$,Nt),this.markUsedOrientation(s,Nt,$))}if(_e){const Ie=zn(de.icon),Le=!(V&&$.verticalPlacedIconSymbolIndex&&Ce);$.placedIconSymbolIndex>=0&&(q(s.icon,$.numIconVertices,Le?Ie:Ro),s.icon.placedSymbolArray.get($.placedIconSymbolIndex).hidden=de.icon.isHidden()),$.verticalPlacedIconSymbolIndex>=0&&(q(s.icon,$.numVerticalIconVertices,Le?Ro:Ie),s.icon.placedSymbolArray.get($.verticalPlacedIconSymbolIndex).hidden=de.icon.isHidden())}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const Ie=s.collisionArrays[Q];if(Ie){let Le=new _.P(0,0);if(Ie.textBox||Ie.verticalTextBox){let Nt=!0;if(A){const Ne=this.variableOffsets[te];Ne?(Le=gt(Ne.anchor,Ne.width,Ne.height,Ne.textOffset,Ne.textBoxScale),R&&Le._rotate(O?this.transform.angle:-this.transform.angle)):Nt=!1}Ie.textBox&&xt(s.textCollisionBox.collisionVertexArray,de.text.placed,!Nt||Ce,Le.x,Le.y),Ie.verticalTextBox&&xt(s.textCollisionBox.collisionVertexArray,de.text.placed,!Nt||Ae,Le.x,Le.y)}const $e=!(Ae||!Ie.verticalIconBox);Ie.iconBox&&xt(s.iconCollisionBox.collisionVertexArray,de.icon.placed,$e,V?Le.x:0,V?Le.y:0),Ie.verticalIconBox&&xt(s.iconCollisionBox.collisionVertexArray,de.icon.placed,!$e,V?Le.x:0,V?Le.y:0)}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const Q=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=Q.invProjMatrix,s.placementViewportMatrix=Q.viewportMatrix,s.collisionCircleArray=Q.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return 0===this.fadeDuration?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const p=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*p>s}setStale(){this.stale=!0}}function xt(v,s,d,p,g){v.emplaceBack(s?1:0,d?1:0,p||0,g||0),v.emplaceBack(s?1:0,d?1:0,p||0,g||0),v.emplaceBack(s?1:0,d?1:0,p||0,g||0),v.emplaceBack(s?1:0,d?1:0,p||0,g||0)}const an=Math.pow(2,25),wn=Math.pow(2,24),Yt=Math.pow(2,17),It=Math.pow(2,16),sr=Math.pow(2,9),Ot=Math.pow(2,8),Un=Math.pow(2,1);function zn(v){if(0===v.opacity&&!v.placed)return 0;if(1===v.opacity&&v.placed)return 4294967295;const s=v.placed?1:0,d=Math.floor(127*v.opacity);return d*an+s*wn+d*Yt+s*It+d*sr+s*Ot+d*Un+s}const Ro=0;class yh{constructor(s){this._sortAcrossTiles="viewport-y"!==s.layout.get("symbol-z-order")&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,p,g,x){const C=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(C,g,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((T,M)=>T.sortKey-M.sortKey));this._currentPartIndex<C.length;)if(d.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class Ma{constructor(s,d,p,g,x,C,T,M){this.placement=new dt(s,d,C,T,M),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(s,d,p){const g=_.h.now(),x=()=>!this._forceFullPlacement&&_.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=d[s[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if("symbol"===C.type&&(!C.minzoom||C.minzoom<=T)&&(!C.maxzoom||C.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new yh(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Ys=512/_.N/2;class bh{constructor(s,d,p){this.tileID=s,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let x=0;x<d.length;x++){const C=d.get(x),T=C.key,M=g.get(T);M?M.push(C):g.set(T,[C])}for(const[x,C]of g){const T={positions:C.map(M=>({x:Math.floor(M.anchorX*Ys),y:Math.floor(M.anchorY*Ys)})),crossTileIDs:C.map(M=>M.crossTileID)};if(T.positions.length>128){const M=new _.av(T.positions.length,16,Uint16Array);for(const{x:A,y:R}of T.positions)M.add(A,R);M.finish(),delete T.positions,T.index=M}this._symbolsByKey[x]=T}}getScaledCoordinates(s,d){const{x:p,y:g,z:x}=this.tileID.canonical,{x:C,y:T,z:M}=d.canonical,A=Ys/Math.pow(2,M-x),R=(T*_.N+s.anchorY)*A,O=g*_.N*Ys;return{x:Math.floor((C*_.N+s.anchorX)*A-p*_.N*Ys),y:Math.floor(R-O)}}findMatches(s,d,p){const g=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let x=0;x<s.length;x++){const C=s.get(x);if(C.crossTileID)continue;const T=this._symbolsByKey[C.key];if(!T)continue;const M=this.getScaledCoordinates(C,d);if(T.index){const A=T.index.range(M.x-g,M.y-g,M.x+g,M.y+g).sort();for(const R of A){const O=T.crossTileIDs[R];if(!p[O]){p[O]=!0,C.crossTileID=O;break}}}else if(T.positions)for(let A=0;A<T.positions.length;A++){const R=T.positions[A],O=T.crossTileIDs[A];if(Math.abs(R.x-M.x)<=g&&Math.abs(R.y-M.y)<=g&&!p[O]){p[O]=!0,C.crossTileID=O;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class on{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class tu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(0!==d)for(const p in this.indexes){const g=this.indexes[p],x={};for(const C in g){const T=g[C];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+d),x[T.tileID.key]=T}this.indexes[p]=x}this.lng=s}addBucket(s,d,p){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let x=0;x<d.symbolInstances.length;x++)d.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const g=this.usedCrossTileIDs[s.overscaledZ];for(const x in this.indexes){const C=this.indexes[x];if(Number(x)>s.overscaledZ)for(const T in C){const M=C[T];M.tileID.isChildOf(s)&&M.findMatches(d.symbolInstances,s,g)}else{const T=C[s.scaledTo(Number(x)).key];T&&T.findMatches(d.symbolInstances,s,g)}}for(let x=0;x<d.symbolInstances.length;x++){const C=d.symbolInstances.get(x);C.crossTileID||(C.crossTileID=p.generate(),g[C.crossTileID]=!0)}return void 0===this.indexes[s.overscaledZ]&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new bh(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const p of d.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[s][g]}removeStaleBuckets(s){let d=!1;for(const p in this.indexes){const g=this.indexes[p];for(const x in g)s[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[x]),delete g[x],d=!0)}return d}}class oc{constructor(){this.layerIndexes={},this.crossTileIDs=new on,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,p){let g=this.layerIndexes[s.id];void 0===g&&(g=this.layerIndexes[s.id]=new tu);let x=!1;const C={};g.handleWrapJump(p);for(const T of d){const M=T.getBucket(s);M&&s.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(T.tileID,M,this.crossTileIDs)&&(x=!0),C[M.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(x=!0),x}pruneUnusedLayers(s){const d={};s.forEach(p=>{d[p]=!0});for(const p in this.layerIndexes)d[p]||delete this.layerIndexes[p]}}const Ki=(v,s)=>_.x(v,s&&s.filter(d=>"source.canvas"!==d.identifier)),Yr=_.F(_.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),hm=_.F(_.ax,["setCenter","setZoom","setBearing","setPitch"]),uo=_.aw();class Xi extends _.E{constructor(s,d={}){super(),this.map=s,this.dispatcher=new _l(rc(),this,s._getMapId()),this.imageManager=new Lr,this.imageManager.setEventedParent(this),this.glyphManager=new Do(s._requestManager,d.localIdeographFontFamily),this.lineAtlas=new bn(256,512),this.crossTileSymbolIndex=new oc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new _.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",_.az());const p=this;this._rtlTextPluginCallback=Xi.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,C)=>{if(_.aA(x),C&&C.every(T=>T))for(const T in p.sourceCaches){const M=p.sourceCaches[T].getSource().type;"vector"!==M&&"geojson"!==M||p.sourceCaches[T].reload()}})}),this.on("data",g=>{if("source"!==g.dataType||"metadata"!==g.sourceDataType)return;const x=this.sourceCaches[g.sourceId];if(!x)return;const C=x.getSource();if(C&&C.vectorLayerIds)for(const T in this._layers){const M=this._layers[T];M.source===C.id&&this._validateLayer(M)}})}loadURL(s,d={},p){this.fire(new _.k("dataloading",{dataType:"style"})),d.validate="boolean"!=typeof d.validate||d.validate;const g=this.map._requestManager.transformRequest(s,bi.Style);this._request=_.f(g,(x,C)=>{this._request=null,x?this.fire(new _.j(x)):C&&this._load(C,d,p)})}loadJSON(s,d={},p){this.fire(new _.k("dataloading",{dataType:"style"})),this._request=_.h.frame(()=>{this._request=null,d.validate=!1!==d.validate,this._load(s,d,p)})}loadEmpty(){this.fire(new _.k("dataloading",{dataType:"style"})),this._load(uo,{validate:!1})}_load(s,d,p){var g;const x=d.transformStyle?d.transformStyle(p,s):s;if(!d.validate||!Ki(this,_.y(x))){this._loaded=!0,this.stylesheet=x;for(const C in x.sources)this.addSource(C,x.sources[C],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new gl(this.stylesheet.light),this.map.setTerrain(null!==(g=this.stylesheet.terrain)&&void 0!==g?g:null),this.fire(new _.k("data",{dataType:"style"})),this.fire(new _.k("style.load"))}}_createLayers(){const s=_.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",s),this._order=s.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of s){const p=_.aC(d);p.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=p}}_loadSprite(s,d=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,C,T){const M=qi(g),A=M.length,R=C>1?"@2x":"",O={},V={},Z={};for(const{id:q,url:Q}of M){const $=x.transformRequest(x.normalizeSpriteURL(Q,R,".json"),bi.SpriteJSON),ae=`${q}_${$.url}`;O[ae]=_.f($,(de,_e)=>{delete O[ae],V[q]=_e,fl(T,V,Z,de,A)});const fe=x.transformRequest(x.normalizeSpriteURL(Q,R,".png"),bi.SpriteImage),te=`${q}_${fe.url}`;O[te]=kr.getImage(fe,(de,_e)=>{delete O[te],Z[q]=_e,fl(T,V,Z,de,A)})}return{cancel(){for(const q of Object.values(O))q.cancel()}}}(s,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new _.j(g));else if(x)for(const C in x){this._spritesImagesIds[C]=[];const T=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(M=>!(M in x)):[];for(const M of T)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in x[C]){const A="default"===C?M:`${C}:${M}`;this._spritesImagesIds[C].push(A),A in this.imageManager.images?this.imageManager.updateImage(A,x[C][M],!1):this.imageManager.addImage(A,x[C][M]),d&&(this._changedImages[A]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.k("data",{dataType:"style"}))}_validateLayer(s){const d=this.sourceCaches[s.source];if(!d)return;const p=s.sourceLayer;if(!p)return;const g=d.getSource();("geojson"===g.type||g.vectorLayerIds&&-1===g.vectorLayerIds.indexOf(p))&&this.fire(new _.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s){const d=this._serializedAllLayers();if(!s||0===s.length)return Object.values(d);const p=[];for(const g of s)d[g]&&p.push(d[g]);return p}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const d=Object.keys(this._layers);for(const p of d){const g=this._layers[p];"custom"!==g.type&&(s[p]=g.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const d=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const C in this._updatedSources){const T=this._updatedSources[C];if("reload"===T)this._reloadSource(C);else{if("clear"!==T)throw new Error(`Invalid action ${T}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];p[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(s,this._availableImages),!x.isHidden(s.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in p){const x=this.sourceCaches[g];p[g]!==x.used&&x.fire(new _.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(s),this.z=s.zoom,d&&this.fire(new _.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(s),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){this._checkLoaded();const p=this.serialize();if(s=d.transformStyle?d.transformStyle(p,s):s,Ki(this,_.y(s)))return!1;(s=_.aD(s)).layers=_.aB(s.layers);const g=_.aE(p,s).filter(C=>!(C.command in hm));if(0===g.length)return!1;const x=g.filter(C=>!(C.command in Yr));if(x.length>0)throw new Error(`Unimplemented: ${x.map(C=>C.command).join(", ")}.`);for(const C of g)"setTransition"!==C.command&&this[C.command].apply(this,C.args);return this.stylesheet=s,this._serializedLayers=null,!0}addImage(s,d){if(this.getImage(s))return this.fire(new _.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new _.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,p={}){if(this._checkLoaded(),void 0!==this.sourceCaches[s])throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(_.y.source,`sources.${s}`,d,null,p))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const g=this.sourceCaches[s]=new Qr(s,d,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:s})),g.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===s)return this.fire(new _.j(new Error(`Source "${s}" cannot be removed while layer "${p}" is using it.`)));const d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new _.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error(`There is no source with this ID=${s}`);const p=this.sourceCaches[s].getSource();if("geojson"!==p.type)throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,p={}){this._checkLoaded();const g=s.id;if(this.getLayer(g))return void this.fire(new _.j(new Error(`Layer "${g}" already exists on this map.`)));let x;if("custom"===s.type){if(Ki(this,_.aF(s)))return;x=_.aC(s)}else{if("source"in s&&"object"==typeof s.source&&(this.addSource(g,s.source),s=_.aD(s),s=_.e(s,{source:g})),this._validate(_.y.layer,`layers.${g}`,s,{arrayIndex:-1},p))return;x=_.aC(s),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const C=d?this._order.indexOf(d):this._order.length;if(d&&-1===C)this.fire(new _.j(new Error(`Cannot add layer "${g}" before non-existing layer "${d}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&"custom"!==x.type){const T=this._removedLayers[g];delete this._removedLayers[g],T.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new _.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const p=this._order.indexOf(s);this._order.splice(p,1);const g=d?this._order.indexOf(d):this._order.length;d&&-1===g?this.fire(new _.j(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(g,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new _.j(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);const p=this._order.indexOf(s);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,p){this._checkLoaded();const g=this.getLayer(s);g?g.minzoom===d&&g.maxzoom===p||(null!=d&&(g.minzoom=d),null!=p&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new _.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,p={}){this._checkLoaded();const g=this.getLayer(s);if(g){if(!_.aG(g.filter,d))return null==d?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(_.y.filter,`layers.${g.id}.filter`,d,null,p)||(g.filter=_.aD(d),this._updateLayer(g)))}else this.fire(new _.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return _.aD(this.getLayer(s).filter)}setLayoutProperty(s,d,p,g={}){this._checkLoaded();const x=this.getLayer(s);x?_.aG(x.getLayoutProperty(d),p)||(x.setLayoutProperty(d,p,g),this._updateLayer(x)):this.fire(new _.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){const p=this.getLayer(s);if(p)return p.getLayoutProperty(d);this.fire(new _.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,p,g={}){this._checkLoaded();const x=this.getLayer(s);x?_.aG(x.getPaintProperty(d),p)||(x.setPaintProperty(d,p,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new _.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const p=s.source,g=s.sourceLayer,x=this.sourceCaches[p];if(void 0===x)return void this.fire(new _.j(new Error(`The source '${p}' does not exist in the map's style.`)));const C=x.getSource().type;"geojson"===C&&g?this.fire(new _.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==C||g?(void 0===s.id&&this.fire(new _.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,s.id,d)):this.fire(new _.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();const p=s.source,g=this.sourceCaches[p];if(void 0===g)return void this.fire(new _.j(new Error(`The source '${p}' does not exist in the map's style.`)));const x=g.getSource().type,C="vector"===x?s.sourceLayer:void 0;"vector"!==x||C?d&&"string"!=typeof s.id&&"number"!=typeof s.id?this.fire(new _.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,s.id,d):this.fire(new _.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const d=s.source,p=s.sourceLayer,g=this.sourceCaches[d];if(void 0!==g)return"vector"!==g.getSource().type||p?(void 0===s.id&&this.fire(new _.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,s.id)):void this.fire(new _.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new _.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return _.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=_.aH(this.sourceCaches,x=>x.serialize()),d=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return _.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:s,layers:d,terrain:p},x=>void 0!==x)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&"raster"!==this.sourceCaches[s.source].getSource().type&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const d=C=>"fill-extrusion"===this._layers[C].type,p={},g=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(d(T)){p[T]=C;for(const M of s){const A=M[T];if(A)for(const R of A)g.push(R)}}}g.sort((C,T)=>T.intersectionZ-C.intersectionZ);const x=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(d(T))for(let M=g.length-1;M>=0;M--){const A=g[M].feature;if(p[A.layer.id]<C)break;x.push(A),g.pop()}else for(const M of s){const A=M[T];if(A)for(const R of A)x.push(R.feature)}}return x}queryRenderedFeatures(s,d,p){d&&d.filter&&this._validate(_.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const g={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new _.j(new Error("parameters.layers must be an Array."))),[];for(const T of d.layers){const M=this._layers[T];if(!M)return this.fire(new _.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];g[M.source]=!0}}const x=[];d.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const T in this.sourceCaches)d.layers&&!g[T]||x.push(Ca(this.sourceCaches[T],this._layers,C,s,d,p));return this.placement&&x.push(function(T,M,A,R,O,V,Z){const q={},Q=V.queryRenderedSymbols(R),$=[];for(const ae of Object.keys(Q).map(Number))$.push(Z[ae]);$.sort(Ks);for(const ae of $){const fe=ae.featureIndex.lookupSymbolFeatures(Q[ae.bucketInstanceId],M,ae.bucketIndex,ae.sourceLayerIndex,O.filter,O.layers,O.availableImages,T);for(const te in fe){const de=q[te]=q[te]||[],_e=fe[te];_e.sort((ve,Ce)=>{const Ae=ae.featureSortOrder;if(Ae){const Ie=Ae.indexOf(ve.featureIndex);return Ae.indexOf(Ce.featureIndex)-Ie}return Ce.featureIndex-ve.featureIndex});for(const ve of _e)de.push(ve)}}for(const ae in q)q[ae].forEach(fe=>{const te=fe.feature,de=A[T[ae].source].getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=de});return q}(this._layers,C,this.sourceCaches,s,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(s,d){d&&d.filter&&this._validate(_.y.filter,"querySourceFeatures.filter",d.filter,null,d);const p=this.sourceCaches[s];return p?function(g,x){const C=g.getRenderableIds().map(A=>g.getTileByID(A)),T=[],M={};for(let A=0;A<C.length;A++){const R=C[A],O=R.tileID.canonical.key;M[O]||(M[O]=!0,R.querySourceFeatures(T,x))}return T}(p,d):[]}addSourceType(s,d,p){return Io(s)?p(new Error(`A source type called "${s}" already exists.`)):(ic[s]=d,d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:d.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const C in s)if(!_.aG(s[C],p[C])){g=!0;break}if(!g)return;const x={now:_.h.now(),transition:_.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(x)}_validate(s,d,p,g,x={}){return(!x||!1!==x.validate)&&Ki(this,s.call(_.y,_.e({key:d,style:this.serialize(),value:p,styleSpec:_.v},g)))}_remove(s=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),_.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const p=this.sourceCaches[d];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const d in this.sourceCaches)this.sourceCaches[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,p,g,x=!1){let C=!1,T=!1;const M={};for(const A of this._order){const R=this._layers[A];if("symbol"!==R.type)continue;if(!M[R.source]){const V=this.sourceCaches[R.source];M[R.source]=V.getRenderableIds(!0).map(Z=>V.getTileByID(Z)).sort((Z,q)=>q.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(q.tileID)?-1:1))}const O=this.crossTileSymbolIndex.addLayer(R,M[R.source],s.center.lng);C=C||O}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||0===p)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(_.h.now(),s.zoom))&&(this.pauseablePlacement=new Ma(s,this.map.terrain,this._order,x,d,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(_.h.now()),T=!0),C&&this.pauseablePlacement.placement.setStale()),T||C)for(const A of this._order){const R=this._layers[A];"symbol"===R.type&&this.placement.updateLayerOpacities(R,M[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(_.h.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d,p){this.imageManager.getImages(d.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[d.source];g&&g.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(s,d,p){this.glyphManager.getGlyphs(d.stacks,p);const g=this.sourceCaches[d.source];g&&g.setDependencies(d.tileID.key,d.type,[""])}getResource(s,d,p){return _.m(d,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(_.y.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,d,p={},g){this._checkLoaded();const x=[{id:s,url:d}],C=[...qi(this.stylesheet.sprite),...x];this._validate(_.y.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(x,!0,g))}removeSprite(s){this._checkLoaded();const d=qi(this.stylesheet.sprite);if(d.find(p=>p.id===s)){if(this._spritesImagesIds[s])for(const p of this._spritesImagesIds[s])this.imageManager.removeImage(p),this._changedImages[p]=!0;d.splice(d.findIndex(p=>p.id===s),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.k("data",{dataType:"style"}))}else this.fire(new _.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return qi(this.stylesheet.sprite)}setSprite(s,d={},p){this._checkLoaded(),s&&this._validate(_.y.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,p):(this._unloadSprite(),p&&p(null)))}}Xi.registerForPluginStateChange=_.aK;var sc=_.Q([{name:"a_pos",type:"Int16",components:2}]),wl="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Kn={prelude:vt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:vt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:vt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:vt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:vt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:vt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:vt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:vt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:vt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:vt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:vt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:vt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:vt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:vt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:vt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:vt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:vt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:vt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:vt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:vt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:vt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:vt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:vt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:vt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:vt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",wl),terrainDepth:vt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",wl),terrainCoords:vt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",wl)};function vt(v,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=s.match(/attribute ([\w]+) ([\w]+)/g),g=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=x?x.concat(g):g,T={};return{fragmentSource:v=v.replace(d,(M,A,R,O,V)=>(T[V]=!0,"define"===A?`\n#ifndef HAS_UNIFORM_u_${V}\nvarying ${R} ${O} ${V};\n#else\nuniform ${R} ${O} u_${V};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${V}\n    ${R} ${O} ${V} = u_${V};\n#endif\n`)),vertexSource:s=s.replace(d,(M,A,R,O,V)=>{const Z="float"===O?"vec2":"vec4",q=V.match(/color/)?"color":Z;return T[V]?"define"===A?`\n#ifndef HAS_UNIFORM_u_${V}\nuniform lowp float u_${V}_t;\nattribute ${R} ${Z} a_${V};\nvarying ${R} ${O} ${V};\n#else\nuniform ${R} ${O} u_${V};\n#endif\n`:"vec4"===q?`\n#ifndef HAS_UNIFORM_u_${V}\n    ${V} = a_${V};\n#else\n    ${R} ${O} ${V} = u_${V};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${V}\n    ${V} = unpack_mix_${q}(a_${V}, u_${V}_t);\n#else\n    ${R} ${O} ${V} = u_${V};\n#endif\n`:"define"===A?`\n#ifndef HAS_UNIFORM_u_${V}\nuniform lowp float u_${V}_t;\nattribute ${R} ${Z} a_${V};\n#else\nuniform ${R} ${O} u_${V};\n#endif\n`:"vec4"===q?`\n#ifndef HAS_UNIFORM_u_${V}\n    ${R} ${O} ${V} = a_${V};\n#else\n    ${R} ${O} ${V} = u_${V};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${V}\n    ${R} ${O} ${V} = unpack_mix_${q}(a_${V}, u_${V}_t);\n#else\n    ${R} ${O} ${V} = u_${V};\n#endif\n`}),staticAttributes:p,staticUniforms:C}}class xs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,p,g,x,C,T,M,A){this.context=s;let R=this.boundPaintVertexBuffers.length!==g.length;for(let O=0;!R&&O<g.length;O++)this.boundPaintVertexBuffers[O]!==g[O]&&(R=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==p||R||this.boundIndexBuffer!==x||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==A?this.freshBind(d,p,g,x,C,T,M,A):(s.bindVertexArray.set(this.vao),T&&T.bind(),x&&x.dynamicDraw&&x.bind(),M&&M.bind(),A&&A.bind())}freshBind(s,d,p,g,x,C,T,M){const A=s.numAttributes,R=this.context,O=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=M,d.enableAttributes(O,s);for(const V of p)V.enableAttributes(O,s);C&&C.enableAttributes(O,s),T&&T.enableAttributes(O,s),M&&M.enableAttributes(O,s),d.bind(),d.setVertexAttribPointers(O,s,x);for(const V of p)V.bind(),V.setVertexAttribPointers(O,s,x);C&&(C.bind(),C.setVertexAttribPointers(O,s,x)),g&&g.bind(),T&&(T.bind(),T.setVertexAttribPointers(O,s,x)),M&&(M.bind(),M.setVertexAttribPointers(O,s,x)),R.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function tn(v){const s=[];for(let d=0;d<v.length;d++){if(null===v[d])continue;const p=v[d].split(" ");s.push(p.pop())}return s}class mt{constructor(s,d,p,g,x,C){const T=s.gl;this.program=T.createProgram();const M=tn(d.staticAttributes),A=p?p.getBinderAttributes():[],R=M.concat(A),O=Kn.prelude.staticUniforms?tn(Kn.prelude.staticUniforms):[],V=d.staticUniforms?tn(d.staticUniforms):[],Z=p?p.getBinderUniforms():[],q=O.concat(V).concat(Z),Q=[];for(const ve of q)Q.indexOf(ve)<0&&Q.push(ve);const $=p?p.defines():[];x&&$.push("#define OVERDRAW_INSPECTOR;"),C&&$.push("#define TERRAIN3D;");const ae=$.concat(Kn.prelude.fragmentSource,d.fragmentSource).join("\n"),fe=$.concat(Kn.prelude.vertexSource,d.vertexSource).join("\n"),te=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(te,ae),T.compileShader(te),!T.getShaderParameter(te,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(te)}`);T.attachShader(this.program,te);const de=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(de,fe),T.compileShader(de),!T.getShaderParameter(de,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(de)}`);T.attachShader(this.program,de),this.attributes={};const _e={};this.numAttributes=R.length;for(let ve=0;ve<this.numAttributes;ve++)R[ve]&&(T.bindAttribLocation(this.program,ve,R[ve]),this.attributes[R[ve]]=ve);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(de),T.deleteShader(te);for(let ve=0;ve<Q.length;ve++){const Ce=Q[ve];if(Ce&&!_e[Ce]){const Ae=T.getUniformLocation(this.program,Ce);Ae&&(_e[Ce]=Ae)}}var ve,Ce;this.fixedUniforms=g(s,_e),this.terrainUniforms={u_depth:new _.aL(ve=s,(Ce=_e).u_depth),u_terrain:new _.aL(ve,Ce.u_terrain),u_terrain_dim:new _.aM(ve,Ce.u_terrain_dim),u_terrain_matrix:new _.aN(ve,Ce.u_terrain_matrix),u_terrain_unpack:new _.aO(ve,Ce.u_terrain_unpack),u_terrain_exaggeration:new _.aM(ve,Ce.u_terrain_exaggeration)},this.binderUniforms=p?p.getUniforms(s,_e):[]}draw(s,d,p,g,x,C,T,M,A,R,O,V,Z,q,Q,$,ae,fe){const te=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(p),s.setStencilMode(g),s.setColorMode(x),s.setCullFace(C),M){s.activeTexture.set(te.TEXTURE2),te.bindTexture(te.TEXTURE_2D,M.depthTexture),s.activeTexture.set(te.TEXTURE3),te.bindTexture(te.TEXTURE_2D,M.texture);for(const _e in this.terrainUniforms)this.terrainUniforms[_e].set(M[_e])}for(const _e in this.fixedUniforms)this.fixedUniforms[_e].set(T[_e]);Q&&Q.setUniforms(s,this.binderUniforms,Z,{zoom:q});let de=0;switch(d){case te.LINES:de=2;break;case te.TRIANGLES:de=3;break;case te.LINE_STRIP:de=1}for(const _e of V.get()){const ve=_e.vaos||(_e.vaos={});(ve[A]||(ve[A]=new xs)).bind(s,this,R,Q?Q.getPaintVertexBuffers():[],O,_e.vertexOffset,$,ae,fe),te.drawElements(d,_e.primitiveLength*de,te.UNSIGNED_SHORT,_e.primitiveOffset*de*2)}}}function Vr(v,s,d){const p=1/se(d,1,s.transform.tileZoom),g=Math.pow(2,d.tileID.overscaledZ),x=d.tileSize*Math.pow(2,s.transform.tileZoom)/g,C=x*(d.tileID.canonical.x+d.tileID.wrap*g),T=x*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[C>>16,T>>16],u_pixel_coord_lower:[65535&C,65535&T]}}const ac=(v,s,d,p)=>{const g=s.style.light,x=g.properties.get("position"),C=[x.x,x.y,x.z],T=(A=new _.A(9),_.A!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A);var A;"viewport"===g.properties.get("anchor")&&function(A,R){var O=Math.sin(R),V=Math.cos(R);A[0]=V,A[1]=O,A[2]=0,A[3]=-O,A[4]=V,A[5]=0,A[6]=0,A[7]=0,A[8]=1}(T,-s.transform.angle),function(A,R,O){var V=R[0],Z=R[1],q=R[2];A[0]=V*O[0]+Z*O[3]+q*O[6],A[1]=V*O[1]+Z*O[4]+q*O[7],A[2]=V*O[2]+Z*O[5]+q*O[8]}(C,C,T);const M=g.properties.get("color");return{u_matrix:v,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+d,u_opacity:p}},Qi=(v,s,d,p,g,x,C)=>_.e(ac(v,s,d,p),Vr(x,s,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),id=v=>({u_matrix:v}),nu=(v,s,d,p)=>_.e(id(v),Vr(d,s,p)),dn=(v,s)=>({u_matrix:v,u_world:s}),Da=(v,s,d,p,g)=>_.e(nu(v,s,d,p),{u_world:g}),Ln=(v,s,d,p)=>{const g=v.transform;let x,C;if("map"===p.paint.get("circle-pitch-alignment")){const T=se(d,1,g.zoom);x=!0,C=[T,T]}else x=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+("map"===p.paint.get("circle-pitch-scale")),u_matrix:v.translatePosMatrix(s.posMatrix,d,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:C}},lc=(v,s,d)=>{const p=se(d,1,s.zoom),g=Math.pow(2,s.zoom-d.tileID.overscaledZ),x=d.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[s.pixelsToGLUnits[0]/(p*g),s.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:x}},cc=(v,s,d=1)=>({u_matrix:v,u_color:s,u_overlay:0,u_overlay_scale:d}),kn=v=>({u_matrix:v}),Ct=(v,s,d,p)=>({u_matrix:v,u_extrude_scale:se(s,1,d),u_intensity:p});function dc(v,s){const d=Math.pow(2,s.canonical.z),p=s.canonical.y;return[new _.U(0,p/d).toLngLat().lat,new _.U(0,(p+1)/d).toLngLat().lat]}const uc=(v,s,d,p)=>{const g=v.transform;return{u_matrix:kt(v,s,d,p),u_ratio:1/se(s,1,g.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},pm=(v,s,d,p,g)=>_.e(uc(v,s,d,g),{u_image:0,u_image_height:p}),xh=(v,s,d,p,g)=>{const x=v.transform,C=hc(s,x);return{u_matrix:kt(v,s,d,g),u_texsize:s.imageAtlasTexture.size,u_ratio:1/se(s,1,x.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},xe=(v,s,d,p,g,x)=>{const C=v.lineAtlas,T=hc(s,v.transform),M="round"===d.layout.get("line-cap"),A=C.getDash(p.from,M),R=C.getDash(p.to,M),O=A.width*g.fromScale,V=R.width*g.toScale;return _.e(uc(v,s,d,x),{u_patternscale_a:[T/O,-A.height/2],u_patternscale_b:[T/V,-R.height/2],u_sdfgamma:C.width/(256*Math.min(O,V)*v.pixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:R.y,u_mix:g.t})};function hc(v,s){return 1/se(v,1,s.tileZoom)}function kt(v,s,d,p){return v.translatePosMatrix(p?p.posMatrix:s.tileID.posMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const mn=(v,s,d,p,g)=>{return{u_matrix:v,u_tl_parent:s,u_scale_parent:d,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:wh(g.paint.get("raster-hue-rotate"))};var x,C};function wh(v){v*=Math.PI/180;const s=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const kh=(v,s,d,p,g,x,C,T,M,A)=>{const R=g.transform;return{u_is_size_zoom_constant:+("constant"===v||"source"===v),u_is_size_feature_constant:+("constant"===v||"camera"===v),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:R.cameraToCenterDistance,u_pitch:R.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:R.width/R.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:C,u_coord_matrix:T,u_is_text:+M,u_pitch_with_map:+p,u_texsize:A,u_texture:0}},iu=(v,s,d,p,g,x,C,T,M,A,R)=>{const O=g.transform;return _.e(kh(v,s,d,p,g,x,C,T,M,A),{u_gamma_scale:p?Math.cos(O._pitch)*O.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+R})},ws=(v,s,d,p,g,x,C,T,M,A)=>_.e(iu(v,s,d,p,g,x,C,T,!0,M,!0),{u_texsize_icon:A,u_texture_icon:1}),ar=(v,s,d)=>({u_matrix:v,u_opacity:s,u_color:d}),Oo=(v,s,d,p,g,x)=>_.e(function(C,T,M,A){const R=M.imageManager.getPattern(C.from.toString()),O=M.imageManager.getPattern(C.to.toString()),{width:V,height:Z}=M.imageManager.getPixelSize(),q=Math.pow(2,A.tileID.overscaledZ),Q=A.tileSize*Math.pow(2,M.transform.tileZoom)/q,$=Q*(A.tileID.canonical.x+A.tileID.wrap*q),ae=Q*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[V,Z],u_mix:T.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/se(A,1,M.transform.tileZoom),u_pixel_coord_upper:[$>>16,ae>>16],u_pixel_coord_lower:[65535&$,65535&ae]}}(p,x,d,g),{u_matrix:v,u_opacity:s}),rd={fillExtrusion:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_lightpos:new _.aP(v,s.u_lightpos),u_lightintensity:new _.aM(v,s.u_lightintensity),u_lightcolor:new _.aP(v,s.u_lightcolor),u_vertical_gradient:new _.aM(v,s.u_vertical_gradient),u_opacity:new _.aM(v,s.u_opacity)}),fillExtrusionPattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_lightpos:new _.aP(v,s.u_lightpos),u_lightintensity:new _.aM(v,s.u_lightintensity),u_lightcolor:new _.aP(v,s.u_lightcolor),u_vertical_gradient:new _.aM(v,s.u_vertical_gradient),u_height_factor:new _.aM(v,s.u_height_factor),u_image:new _.aL(v,s.u_image),u_texsize:new _.aQ(v,s.u_texsize),u_pixel_coord_upper:new _.aQ(v,s.u_pixel_coord_upper),u_pixel_coord_lower:new _.aQ(v,s.u_pixel_coord_lower),u_scale:new _.aP(v,s.u_scale),u_fade:new _.aM(v,s.u_fade),u_opacity:new _.aM(v,s.u_opacity)}),fill:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix)}),fillPattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_image:new _.aL(v,s.u_image),u_texsize:new _.aQ(v,s.u_texsize),u_pixel_coord_upper:new _.aQ(v,s.u_pixel_coord_upper),u_pixel_coord_lower:new _.aQ(v,s.u_pixel_coord_lower),u_scale:new _.aP(v,s.u_scale),u_fade:new _.aM(v,s.u_fade)}),fillOutline:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_world:new _.aQ(v,s.u_world)}),fillOutlinePattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_world:new _.aQ(v,s.u_world),u_image:new _.aL(v,s.u_image),u_texsize:new _.aQ(v,s.u_texsize),u_pixel_coord_upper:new _.aQ(v,s.u_pixel_coord_upper),u_pixel_coord_lower:new _.aQ(v,s.u_pixel_coord_lower),u_scale:new _.aP(v,s.u_scale),u_fade:new _.aM(v,s.u_fade)}),circle:(v,s)=>({u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_scale_with_map:new _.aL(v,s.u_scale_with_map),u_pitch_with_map:new _.aL(v,s.u_pitch_with_map),u_extrude_scale:new _.aQ(v,s.u_extrude_scale),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_matrix:new _.aN(v,s.u_matrix)}),collisionBox:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_pixels_to_tile_units:new _.aM(v,s.u_pixels_to_tile_units),u_extrude_scale:new _.aQ(v,s.u_extrude_scale),u_overscale_factor:new _.aM(v,s.u_overscale_factor)}),collisionCircle:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_inv_matrix:new _.aN(v,s.u_inv_matrix),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_viewport_size:new _.aQ(v,s.u_viewport_size)}),debug:(v,s)=>({u_color:new _.aR(v,s.u_color),u_matrix:new _.aN(v,s.u_matrix),u_overlay:new _.aL(v,s.u_overlay),u_overlay_scale:new _.aM(v,s.u_overlay_scale)}),clippingMask:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix)}),heatmap:(v,s)=>({u_extrude_scale:new _.aM(v,s.u_extrude_scale),u_intensity:new _.aM(v,s.u_intensity),u_matrix:new _.aN(v,s.u_matrix)}),heatmapTexture:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_world:new _.aQ(v,s.u_world),u_image:new _.aL(v,s.u_image),u_color_ramp:new _.aL(v,s.u_color_ramp),u_opacity:new _.aM(v,s.u_opacity)}),hillshade:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_image:new _.aL(v,s.u_image),u_latrange:new _.aQ(v,s.u_latrange),u_light:new _.aQ(v,s.u_light),u_shadow:new _.aR(v,s.u_shadow),u_highlight:new _.aR(v,s.u_highlight),u_accent:new _.aR(v,s.u_accent)}),hillshadePrepare:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_image:new _.aL(v,s.u_image),u_dimension:new _.aQ(v,s.u_dimension),u_zoom:new _.aM(v,s.u_zoom),u_unpack:new _.aO(v,s.u_unpack)}),line:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_ratio:new _.aM(v,s.u_ratio),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_units_to_pixels:new _.aQ(v,s.u_units_to_pixels)}),lineGradient:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_ratio:new _.aM(v,s.u_ratio),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_units_to_pixels:new _.aQ(v,s.u_units_to_pixels),u_image:new _.aL(v,s.u_image),u_image_height:new _.aM(v,s.u_image_height)}),linePattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_texsize:new _.aQ(v,s.u_texsize),u_ratio:new _.aM(v,s.u_ratio),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_image:new _.aL(v,s.u_image),u_units_to_pixels:new _.aQ(v,s.u_units_to_pixels),u_scale:new _.aP(v,s.u_scale),u_fade:new _.aM(v,s.u_fade)}),lineSDF:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_ratio:new _.aM(v,s.u_ratio),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_units_to_pixels:new _.aQ(v,s.u_units_to_pixels),u_patternscale_a:new _.aQ(v,s.u_patternscale_a),u_patternscale_b:new _.aQ(v,s.u_patternscale_b),u_sdfgamma:new _.aM(v,s.u_sdfgamma),u_image:new _.aL(v,s.u_image),u_tex_y_a:new _.aM(v,s.u_tex_y_a),u_tex_y_b:new _.aM(v,s.u_tex_y_b),u_mix:new _.aM(v,s.u_mix)}),raster:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_tl_parent:new _.aQ(v,s.u_tl_parent),u_scale_parent:new _.aM(v,s.u_scale_parent),u_buffer_scale:new _.aM(v,s.u_buffer_scale),u_fade_t:new _.aM(v,s.u_fade_t),u_opacity:new _.aM(v,s.u_opacity),u_image0:new _.aL(v,s.u_image0),u_image1:new _.aL(v,s.u_image1),u_brightness_low:new _.aM(v,s.u_brightness_low),u_brightness_high:new _.aM(v,s.u_brightness_high),u_saturation_factor:new _.aM(v,s.u_saturation_factor),u_contrast_factor:new _.aM(v,s.u_contrast_factor),u_spin_weights:new _.aP(v,s.u_spin_weights)}),symbolIcon:(v,s)=>({u_is_size_zoom_constant:new _.aL(v,s.u_is_size_zoom_constant),u_is_size_feature_constant:new _.aL(v,s.u_is_size_feature_constant),u_size_t:new _.aM(v,s.u_size_t),u_size:new _.aM(v,s.u_size),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_pitch:new _.aM(v,s.u_pitch),u_rotate_symbol:new _.aL(v,s.u_rotate_symbol),u_aspect_ratio:new _.aM(v,s.u_aspect_ratio),u_fade_change:new _.aM(v,s.u_fade_change),u_matrix:new _.aN(v,s.u_matrix),u_label_plane_matrix:new _.aN(v,s.u_label_plane_matrix),u_coord_matrix:new _.aN(v,s.u_coord_matrix),u_is_text:new _.aL(v,s.u_is_text),u_pitch_with_map:new _.aL(v,s.u_pitch_with_map),u_texsize:new _.aQ(v,s.u_texsize),u_texture:new _.aL(v,s.u_texture)}),symbolSDF:(v,s)=>({u_is_size_zoom_constant:new _.aL(v,s.u_is_size_zoom_constant),u_is_size_feature_constant:new _.aL(v,s.u_is_size_feature_constant),u_size_t:new _.aM(v,s.u_size_t),u_size:new _.aM(v,s.u_size),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_pitch:new _.aM(v,s.u_pitch),u_rotate_symbol:new _.aL(v,s.u_rotate_symbol),u_aspect_ratio:new _.aM(v,s.u_aspect_ratio),u_fade_change:new _.aM(v,s.u_fade_change),u_matrix:new _.aN(v,s.u_matrix),u_label_plane_matrix:new _.aN(v,s.u_label_plane_matrix),u_coord_matrix:new _.aN(v,s.u_coord_matrix),u_is_text:new _.aL(v,s.u_is_text),u_pitch_with_map:new _.aL(v,s.u_pitch_with_map),u_texsize:new _.aQ(v,s.u_texsize),u_texture:new _.aL(v,s.u_texture),u_gamma_scale:new _.aM(v,s.u_gamma_scale),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_is_halo:new _.aL(v,s.u_is_halo)}),symbolTextAndIcon:(v,s)=>({u_is_size_zoom_constant:new _.aL(v,s.u_is_size_zoom_constant),u_is_size_feature_constant:new _.aL(v,s.u_is_size_feature_constant),u_size_t:new _.aM(v,s.u_size_t),u_size:new _.aM(v,s.u_size),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_pitch:new _.aM(v,s.u_pitch),u_rotate_symbol:new _.aL(v,s.u_rotate_symbol),u_aspect_ratio:new _.aM(v,s.u_aspect_ratio),u_fade_change:new _.aM(v,s.u_fade_change),u_matrix:new _.aN(v,s.u_matrix),u_label_plane_matrix:new _.aN(v,s.u_label_plane_matrix),u_coord_matrix:new _.aN(v,s.u_coord_matrix),u_is_text:new _.aL(v,s.u_is_text),u_pitch_with_map:new _.aL(v,s.u_pitch_with_map),u_texsize:new _.aQ(v,s.u_texsize),u_texsize_icon:new _.aQ(v,s.u_texsize_icon),u_texture:new _.aL(v,s.u_texture),u_texture_icon:new _.aL(v,s.u_texture_icon),u_gamma_scale:new _.aM(v,s.u_gamma_scale),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_is_halo:new _.aL(v,s.u_is_halo)}),background:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_opacity:new _.aM(v,s.u_opacity),u_color:new _.aR(v,s.u_color)}),backgroundPattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_opacity:new _.aM(v,s.u_opacity),u_image:new _.aL(v,s.u_image),u_pattern_tl_a:new _.aQ(v,s.u_pattern_tl_a),u_pattern_br_a:new _.aQ(v,s.u_pattern_br_a),u_pattern_tl_b:new _.aQ(v,s.u_pattern_tl_b),u_pattern_br_b:new _.aQ(v,s.u_pattern_br_b),u_texsize:new _.aQ(v,s.u_texsize),u_mix:new _.aM(v,s.u_mix),u_pattern_size_a:new _.aQ(v,s.u_pattern_size_a),u_pattern_size_b:new _.aQ(v,s.u_pattern_size_b),u_scale_a:new _.aM(v,s.u_scale_a),u_scale_b:new _.aM(v,s.u_scale_b),u_pixel_coord_upper:new _.aQ(v,s.u_pixel_coord_upper),u_pixel_coord_lower:new _.aQ(v,s.u_pixel_coord_lower),u_tile_units_to_pixels:new _.aM(v,s.u_tile_units_to_pixels)}),terrain:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_texture:new _.aL(v,s.u_texture),u_ele_delta:new _.aM(v,s.u_ele_delta)}),terrainDepth:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_ele_delta:new _.aM(v,s.u_ele_delta)}),terrainCoords:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_texture:new _.aL(v,s.u_texture),u_terrain_coords_id:new _.aM(v,s.u_terrain_coords_id),u_ele_delta:new _.aM(v,s.u_ele_delta)})};class ru{constructor(s,d,p){this.context=s;const g=s.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ou{constructor(s,d,p,g){this.length=d.length,this.attributes=p,this.itemSize=d.bytesPerElement,this.dynamicDraw=g,this.context=s;const x=s.gl;this.buffer=x.createBuffer(),s.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let p=0;p<this.attributes.length;p++){const g=d.attributes[this.attributes[p].name];void 0!==g&&s.enableVertexAttribArray(g)}}setVertexAttribPointers(s,d,p){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],C=d.attributes[x.name];void 0!==C&&s.vertexAttribPointer(C,x.components,s[Fo[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pc=new WeakMap;function Ia(v){var s;if(pc.has(v))return pc.get(v);{const d=null===(s=v.getParameter(v.VERSION))||void 0===s?void 0:s.startsWith("WebGL 2.0");return pc.set(v,d),d}}class Kt{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class od extends Kt{getDefault(){return _.aT.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class ho extends Kt{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Jr extends Kt{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Sh extends Kt{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Cr extends Kt{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class _t extends Kt{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Ch extends Kt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Th extends Kt{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class su extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class Ze extends Kt{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Eh extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class Dn extends Kt{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class mc extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class Mh extends Kt{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Aa extends Kt{getDefault(){return _.aT.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class mm extends Kt{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class sd extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class ad extends Kt{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class au extends Kt{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Dh extends Kt{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class fm extends Kt{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Gt extends Kt{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class kl extends Kt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class ld extends Kt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class lr extends Kt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Pa extends Kt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class gm extends Kt{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class In extends Kt{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;const p=this.gl;Ia(p)?p.bindVertexArray(s):null===(d=p.getExtension("OES_vertex_array_object"))||void 0===d||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class Ih extends Kt{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Sl extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class ze extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class ns extends Kt{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class Js extends ns{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class lu extends ns{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class fc extends ns{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class ln{constructor(s,d,p,g,x){this.context=s,this.width=d,this.height=p;const C=s.gl,T=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Js(s,T),g)this.depthAttachment=x?new fc(s,T):new lu(s,T);else if(x)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const p=this.depthAttachment.get();p&&s.deleteRenderbuffer(p)}s.deleteFramebuffer(this.framebuffer)}}class Bn{constructor(s,d,p){this.blendFunction=s,this.blendColor=d,this.mask=p}}Bn.Replace=[1,0],Bn.disabled=new Bn(Bn.Replace,_.aT.transparent,[!1,!1,!1,!1]),Bn.unblended=new Bn(Bn.Replace,_.aT.transparent,[!0,!0,!0,!0]),Bn.alphaBlended=new Bn([1,771],_.aT.transparent,[!0,!0,!0,!0]);class Rg{constructor(s){var d,p;if(this.gl=s,this.clearColor=new od(this),this.clearDepth=new ho(this),this.clearStencil=new Jr(this),this.colorMask=new Sh(this),this.depthMask=new Cr(this),this.stencilMask=new _t(this),this.stencilFunc=new Ch(this),this.stencilOp=new Th(this),this.stencilTest=new su(this),this.depthRange=new Ze(this),this.depthTest=new Eh(this),this.depthFunc=new Dn(this),this.blend=new mc(this),this.blendFunc=new Mh(this),this.blendColor=new Aa(this),this.blendEquation=new mm(this),this.cullFace=new sd(this),this.cullFaceSide=new ad(this),this.frontFace=new au(this),this.program=new Dh(this),this.activeTexture=new fm(this),this.viewport=new Gt(this),this.bindFramebuffer=new kl(this),this.bindRenderbuffer=new ld(this),this.bindTexture=new lr(this),this.bindVertexBuffer=new Pa(this),this.bindElementBuffer=new gm(this),this.bindVertexArray=new In(this),this.pixelStoreUnpack=new Ih(this),this.pixelStoreUnpackPremultiplyAlpha=new Sl(this),this.pixelStoreUnpackFlipY=new ze(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Ia(s)){this.HALF_FLOAT=s.HALF_FLOAT;const g=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(d=s.RGBA16F)&&void 0!==d?d:g?.RGBA16F_EXT,this.RGB16F=null!==(p=s.RGB16F)&&void 0!==p?p:g?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const g=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=g?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new ru(this,s,d)}createVertexBuffer(s,d,p){return new ou(this,s,d,p)}createRenderbuffer(s,d,p){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,s,d,p),this.bindRenderbuffer.set(null),x}createFramebuffer(s,d,p,g){return new ln(this,s,d,p,g)}clear({color:s,depth:d,stencil:p}){const g=this.gl;let x=0;s&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==p&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(x)}setCullFace(s){!1===s.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){_.aG(s.blendFunction,Bn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Ia(this.gl)?this.gl.createVertexArray():null===(s=this.gl.getExtension("OES_vertex_array_object"))||void 0===s?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return Ia(this.gl)?this.gl.deleteVertexArray(s):null===(d=this.gl.getExtension("OES_vertex_array_object"))||void 0===d?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class Xt{constructor(s,d,p){this.func=s,this.mask=d,this.range=p}}Xt.ReadOnly=!1,Xt.ReadWrite=!0,Xt.disabled=new Xt(519,Xt.ReadOnly,[0,1]);class ii{constructor(s,d,p,g,x,C){this.test=s,this.ref=d,this.mask=p,this.fail=g,this.depthFail=x,this.pass=C}}ii.disabled=new ii({func:519,mask:0},0,0,7680,7680,7680);class Xn{constructor(s,d,p){this.enable=s,this.mode=d,this.frontFace=p}}let ks;function cd(v,s,d,p,g,x,C){const T=v.context,M=T.gl,A=v.useProgram("collisionBox"),R=[];let O=0,V=0;for(let te=0;te<p.length;te++){const de=p[te],_e=s.getTile(de),ve=_e.getBucket(d);if(!ve)continue;let Ce=de.posMatrix;0===g[0]&&0===g[1]||(Ce=v.translatePosMatrix(de.posMatrix,_e,g,x));const Ae=C?ve.textCollisionBox:ve.iconCollisionBox,Ie=ve.collisionCircleArray;if(Ie.length>0){const Le=_.Z(),$e=Ce;_.aU(Le,ve.placementInvProjMatrix,v.transform.glCoordMatrix),_.aU(Le,Le,ve.placementViewportMatrix),R.push({circleArray:Ie,circleOffset:V,transform:$e,invTransform:Le,coord:de}),O+=Ie.length/4,V=O}Ae&&A.draw(T,M.LINES,Xt.disabled,ii.disabled,v.colorModeForRenderPass(),Xn.disabled,lc(Ce,v.transform,_e),v.style.map.terrain&&v.style.map.terrain.getTerrainData(de),d.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,null,v.transform.zoom,null,null,Ae.collisionVertexBuffer)}if(!C||!R.length)return;const Z=v.useProgram("collisionCircle"),q=new _.aV;q.resize(4*O),q._trim();let Q=0;for(const te of R)for(let de=0;de<te.circleArray.length/4;de++){const _e=4*de,ve=te.circleArray[_e+0],Ce=te.circleArray[_e+1],Ae=te.circleArray[_e+2],Ie=te.circleArray[_e+3];q.emplace(Q++,ve,Ce,Ae,Ie,0),q.emplace(Q++,ve,Ce,Ae,Ie,1),q.emplace(Q++,ve,Ce,Ae,Ie,2),q.emplace(Q++,ve,Ce,Ae,Ie,3)}(!ks||ks.length<2*O)&&(ks=function(te){const de=2*te,_e=new _.aX;_e.resize(de),_e._trim();for(let ve=0;ve<de;ve++){const Ce=6*ve;_e.uint16[Ce+0]=4*ve+0,_e.uint16[Ce+1]=4*ve+1,_e.uint16[Ce+2]=4*ve+2,_e.uint16[Ce+3]=4*ve+2,_e.uint16[Ce+4]=4*ve+3,_e.uint16[Ce+5]=4*ve+0}return _e}(O));const $=T.createIndexBuffer(ks,!0),ae=T.createVertexBuffer(q,_.aW.members,!0);for(const te of R){const de={u_matrix:te.transform,u_inv_matrix:te.invTransform,u_camera_to_center_distance:(fe=v.transform).cameraToCenterDistance,u_viewport_size:[fe.width,fe.height]};Z.draw(T,M.TRIANGLES,Xt.disabled,ii.disabled,v.colorModeForRenderPass(),Xn.disabled,de,v.style.map.terrain&&v.style.map.terrain.getTerrainData(te.coord),d.id,ae,$,_.S.simpleSegment(0,2*te.circleOffset,te.circleArray.length,te.circleArray.length/2),null,v.transform.zoom,null,null,null)}var fe;ae.destroy(),$.destroy()}Xn.disabled=new Xn(!1,1029,2305),Xn.backCCW=new Xn(!0,1029,2305);const Tl=_.ao(new Float32Array(16));function dd(v,s,d,p,g,x){const{horizontalAlign:C,verticalAlign:T}=_.au(v);return new _.P((-(C-.5)*s/g+p[0])*x,(-(T-.5)*d/g+p[1])*x)}function ud(v,s,d,p,g,x,C,T,M,A,R){const O=v.text.placedSymbolArray,V=v.text.dynamicLayoutVertexArray,Z=v.icon.dynamicLayoutVertexArray,q={};V.clear();for(let Q=0;Q<O.length;Q++){const $=O.get(Q),ae=$.hidden||!$.crossTileID||v.allowVerticalPlacement&&!$.placedOrientation?null:p[$.crossTileID];if(ae){const fe=new _.P($.anchorX,$.anchorY),te=ni(fe,d?C:x,R),de=Qs(g.cameraToCenterDistance,te.signedDistanceFromCamera);let _e=_.aj(v.textSizeData,M,$)*de/_.ap;d&&(_e*=v.tilePixelRatio/T);const{width:ve,height:Ce,anchor:Ae,textOffset:Ie,textBoxScale:Le}=ae,$e=dd(Ae,ve,Ce,Ie,Le,_e),Nt=d?ni(fe.add($e),x,R).point:te.point.add(s?$e.rotate(-g.angle):$e),Ne=v.allowVerticalPlacement&&$.placedOrientation===_.ai.vertical?Math.PI/2:0;for(let ht=0;ht<$.numGlyphs;ht++)_.ak(V,Nt,Ne);A&&$.associatedIconIndex>=0&&(q[$.associatedIconIndex]={shiftedAnchor:Nt,angle:Ne})}else G($.numGlyphs,V)}if(A){Z.clear();const Q=v.icon.placedSymbolArray;for(let $=0;$<Q.length;$++){const ae=Q.get($);if(ae.hidden)G(ae.numGlyphs,Z);else{const fe=q[$];if(fe)for(let te=0;te<ae.numGlyphs;te++)_.ak(Z,fe.shiftedAnchor,fe.angle);else G(ae.numGlyphs,Z)}}v.icon.dynamicLayoutVertexBuffer.updateData(Z)}v.text.dynamicLayoutVertexBuffer.updateData(V)}function cu(v,s,d){return d.iconsInText&&s?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function gc(v,s,d,p,g,x,C,T,M,A,R,O){const V=v.context,Z=V.gl,q=v.transform,Q="map"===T,$="map"===M,ae="viewport"!==T&&"point"!==d.layout.get("symbol-placement"),fe=Q&&!$&&!ae,te=!d.layout.get("symbol-sort-key").isConstant();let de=!1;const _e=v.depthModeForSublayer(0,Xt.ReadOnly),ve=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ce=[];for(const Ae of p){const Ie=s.getTile(Ae),Le=Ie.getBucket(d);if(!Le)continue;const $e=g?Le.text:Le.icon;if(!$e||!$e.segments.get().length||!$e.hasVisibleVertices)continue;const Nt=$e.programConfigurations.get(d.id),Ne=g||Le.sdfIcons,ht=g?Le.textSizeData:Le.iconSizeData,ot=$||0!==q.pitch,_n=v.useProgram(cu(Ne,g,Le),Nt),zt=_.ah(ht,q.zoom),Tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ae);let Bt,Yn,Sn,Vi,Si=[0,0],di=null;if(g)Yn=Ie.glyphAtlasTexture,Sn=Z.LINEAR,Bt=Ie.glyphAtlasTexture.size,Le.iconsInText&&(Si=Ie.imageAtlasTexture.size,di=Ie.imageAtlasTexture,Vi=ot||v.options.rotating||v.options.zooming||"composite"===ht.kind||"camera"===ht.kind?Z.LINEAR:Z.NEAREST);else{const Jn=1!==d.layout.get("icon-size").constantOr(0)||Le.iconsNeedLinear;Yn=Ie.imageAtlasTexture,Sn=Ne||v.options.rotating||v.options.zooming||Jn||ot?Z.LINEAR:Z.NEAREST,Bt=Ie.imageAtlasTexture.size}const dr=se(Ie,1,v.transform.zoom),vn=Fe(Ae.posMatrix,$,Q,v.transform,dr),Dr=Po(Ae.posMatrix,$,Q,v.transform,dr),Vo=ve&&Le.hasTextData(),Ha="none"!==d.layout.get("icon-text-fit")&&Vo&&Le.hasIconData();if(ae){const Jn=v.style.map.terrain?(hr,gi)=>v.style.map.terrain.getElevation(Ae,hr,gi):null,Pi="map"===d.layout.get("text-rotation-alignment");Ue(Le,Ae.posMatrix,v,g,vn,Dr,$,A,Pi,Jn)}const Ol=v.translatePosMatrix(Ae.posMatrix,Ie,x,C),kc=ae||g&&ve||Ha?Tl:vn,ur=v.translatePosMatrix(Dr,Ie,x,C,!0),er=Ne&&0!==d.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1);let Hr;Hr=Ne?Le.iconsInText?ws(ht.kind,zt,fe,$,v,Ol,kc,ur,Bt,Si):iu(ht.kind,zt,fe,$,v,Ol,kc,ur,g,Bt,!0):kh(ht.kind,zt,fe,$,v,Ol,kc,ur,g,Bt);const aa={program:_n,buffers:$e,uniformValues:Hr,atlasTexture:Yn,atlasTextureIcon:di,atlasInterpolation:Sn,atlasInterpolationIcon:Vi,isSDF:Ne,hasHalo:er};if(te&&Le.canOverlap){de=!0;const Jn=$e.segments.get();for(const Pi of Jn)Ce.push({segments:new _.S([Pi]),sortKey:Pi.sortKey,state:aa,terrainData:Tt})}else Ce.push({segments:$e.segments,sortKey:0,state:aa,terrainData:Tt})}de&&Ce.sort((Ae,Ie)=>Ae.sortKey-Ie.sortKey);for(const Ae of Ce){const Ie=Ae.state;if(V.activeTexture.set(Z.TEXTURE0),Ie.atlasTexture.bind(Ie.atlasInterpolation,Z.CLAMP_TO_EDGE),Ie.atlasTextureIcon&&(V.activeTexture.set(Z.TEXTURE1),Ie.atlasTextureIcon&&Ie.atlasTextureIcon.bind(Ie.atlasInterpolationIcon,Z.CLAMP_TO_EDGE)),Ie.isSDF){const Le=Ie.uniformValues;Ie.hasHalo&&(Le.u_is_halo=1,ea(Ie.buffers,Ae.segments,d,v,Ie.program,_e,R,O,Le,Ae.terrainData)),Le.u_is_halo=0}ea(Ie.buffers,Ae.segments,d,v,Ie.program,_e,R,O,Ie.uniformValues,Ae.terrainData)}}function ea(v,s,d,p,g,x,C,T,M,A){const R=p.context;g.draw(R,R.gl.TRIANGLES,x,C,T,Xn.disabled,M,A,d.id,v.layoutVertexBuffer,v.indexBuffer,s,d.paint,p.transform.zoom,v.programConfigurations.get(d.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function _c(v,s,d,p,g){if(!d||!p||!p.imageAtlas)return;const x=p.imageAtlas.patternPositions;let C=x[d.to.toString()],T=x[d.from.toString()];if(!C||!T){const M=g.getPaintProperty(s);C=x[M],T=x[M]}C&&T&&v.setConstantPatternPositions(C,T)}function po(v,s,d,p,g,x,C){const T=v.context.gl,M="fill-pattern",A=d.paint.get(M),R=A&&A.constantOr(1),O=d.getCrossfadeParameters();let V,Z,q,Q,$;C?(Z=R&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=T.LINES):(Z=R?"fillPattern":"fill",V=T.TRIANGLES);const ae=A.constantOr(null);for(const fe of p){const te=s.getTile(fe);if(R&&!te.patternsLoaded())continue;const de=te.getBucket(d);if(!de)continue;const _e=de.programConfigurations.get(d.id),ve=v.useProgram(Z,_e),Ce=v.style.map.terrain&&v.style.map.terrain.getTerrainData(fe);R&&(v.context.activeTexture.set(T.TEXTURE0),te.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),_e.updatePaintBuffers(O)),_c(_e,M,ae,te,d);const Ae=Ce?fe:null,Ie=v.translatePosMatrix(Ae?Ae.posMatrix:fe.posMatrix,te,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(C){Q=de.indexBuffer2,$=de.segments2;const Le=[T.drawingBufferWidth,T.drawingBufferHeight];q="fillOutlinePattern"===Z&&R?Da(Ie,v,O,te,Le):dn(Ie,Le)}else Q=de.indexBuffer,$=de.segments,q=R?nu(Ie,v,O,te):id(Ie);ve.draw(v.context,V,g,v.stencilModeForClipping(fe),x,Xn.disabled,q,Ce,d.id,de.layoutVertexBuffer,Q,$,d.paint,v.transform.zoom,_e)}}function vc(v,s,d,p,g,x,C){const T=v.context,M=T.gl,A="fill-extrusion-pattern",R=d.paint.get(A),O=R.constantOr(1),V=d.getCrossfadeParameters(),Z=d.paint.get("fill-extrusion-opacity"),q=R.constantOr(null);for(const Q of p){const $=s.getTile(Q),ae=$.getBucket(d);if(!ae)continue;const fe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Q),te=ae.programConfigurations.get(d.id),de=v.useProgram(O?"fillExtrusionPattern":"fillExtrusion",te);O&&(v.context.activeTexture.set(M.TEXTURE0),$.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),te.updatePaintBuffers(V)),_c(te,A,q,$,d);const _e=v.translatePosMatrix(Q.posMatrix,$,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ve=d.paint.get("fill-extrusion-vertical-gradient"),Ce=O?Qi(_e,v,ve,Z,Q,V,$):ac(_e,v,ve,Z);de.draw(T,T.gl.TRIANGLES,g,x,C,Xn.backCCW,Ce,fe,d.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,d.paint,v.transform.zoom,te,v.style.map.terrain&&ae.centroidVertexBuffer)}}function Oe(v,s,d,p,g,x,C){const T=v.context,M=T.gl,A=d.fbo;if(!A)return;const R=v.useProgram("hillshade"),O=v.style.map.terrain&&v.style.map.terrain.getTerrainData(s);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,A.colorAttachment.get()),R.draw(T,M.TRIANGLES,g,x,C,Xn.disabled,((V,Z,q,Q)=>{const $=q.paint.get("hillshade-shadow-color"),ae=q.paint.get("hillshade-highlight-color"),fe=q.paint.get("hillshade-accent-color");let te=q.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===q.paint.get("hillshade-illumination-anchor")&&(te-=V.transform.angle);const de=!V.options.moving;return{u_matrix:Q?Q.posMatrix:V.transform.calculatePosMatrix(Z.tileID.toUnwrapped(),de),u_image:0,u_latrange:dc(0,Z.tileID),u_light:[q.paint.get("hillshade-exaggeration"),te],u_shadow:$,u_highlight:ae,u_accent:fe}})(v,d,p,O?s:null),O,p.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function hd(v,s,d,p,g,x){const C=v.context,T=C.gl,M=s.dem;if(M&&M.data){const A=M.dim,R=M.stride,O=M.getPixels();if(C.activeTexture.set(T.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||v.getTileTexture(R),s.demTexture){const Z=s.demTexture;Z.update(O,{premultiply:!1}),Z.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else s.demTexture=new Zn(C,O,T.RGBA,{premultiply:!1}),s.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);C.activeTexture.set(T.TEXTURE0);let V=s.fbo;if(!V){const Z=new Zn(C,{width:A,height:A,data:null},T.RGBA);Z.bind(T.LINEAR,T.CLAMP_TO_EDGE),V=s.fbo=C.createFramebuffer(A,A,!0,!1),V.colorAttachment.set(Z.texture)}C.bindFramebuffer.set(V.framebuffer),C.viewport.set([0,0,A,A]),v.useProgram("hillshadePrepare").draw(C,T.TRIANGLES,p,g,x,Xn.disabled,((Z,q)=>{const Q=q.stride,$=_.Z();return _.aS($,0,_.N,-_.N,0,0,1),_.$($,$,[0,-_.N,0]),{u_matrix:$,u_image:1,u_dimension:[Q,Q],u_zoom:Z.overscaledZ,u_unpack:q.getUnpackVector()}})(s.tileID,M),null,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function qe(v,s,d,p,g,x){const C=p.paint.get("raster-fade-duration");if(!x&&C>0){const T=_.h.now(),M=(T-v.timeAdded)/C,A=s?(T-s.timeAdded)/C:-1,R=d.getSource(),O=g.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),V=!s||Math.abs(s.tileID.overscaledZ-O)>Math.abs(v.tileID.overscaledZ-O),Z=V&&v.refreshedUponExpiration?1:_.ad(V?M:1-A,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}const yc=new _.aT(1,0,0,1),El=new _.aT(0,1,0,1),Ra=new _.aT(0,0,1,1),Ah=new _.aT(1,0,1,1),Ph=new _.aT(0,1,1,1);function bc(v,s,d,p){Oa(v,0,s+d/2,v.transform.width,d,p)}function mo(v,s,d,p){Oa(v,s-d/2,0,d,v.transform.height,p)}function Oa(v,s,d,p,g,x){const C=v.context,T=C.gl;T.enable(T.SCISSOR_TEST),T.scissor(s*v.pixelRatio,d*v.pixelRatio,p*v.pixelRatio,g*v.pixelRatio),C.clear({color:x}),T.disable(T.SCISSOR_TEST)}function eo(v,s,d){const p=v.context,g=p.gl,x=d.posMatrix,C=v.useProgram("debug"),T=Xt.disabled,M=ii.disabled,A=v.colorModeForRenderPass(),R="$debug",O=v.style.map.terrain&&v.style.map.terrain.getTerrainData(d);p.activeTexture.set(g.TEXTURE0);const V=s.getTileByID(d.key).latestRawTileData,Z=Math.floor((V&&V.byteLength||0)/1024),q=s.getTile(d).tileSize,Q=512/Math.min(q,512)*(d.overscaledZ/v.transform.zoom)*.5;let $=d.canonical.toString();d.overscaledZ!==d.canonical.z&&($+=` => ${d.overscaledZ}`),function(ae,fe){ae.initDebugOverlayCanvas();const te=ae.debugOverlayCanvas,de=ae.context.gl,_e=ae.debugOverlayCanvas.getContext("2d");_e.clearRect(0,0,te.width,te.height),_e.shadowColor="white",_e.shadowBlur=2,_e.lineWidth=1.5,_e.strokeStyle="white",_e.textBaseline="top",_e.font="bold 36px Open Sans, sans-serif",_e.fillText(fe,5,5),_e.strokeText(fe,5,5),ae.debugOverlayTexture.update(te),ae.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)}(v,`${$} ${Z}kB`),C.draw(p,g.TRIANGLES,T,M,Bn.alphaBlended,Xn.disabled,cc(x,_.aT.transparent,Q),null,R,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),C.draw(p,g.LINE_STRIP,T,M,A,Xn.disabled,cc(x,_.aT.red),O,R,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function un(v,s,d){const p=v.context,g=p.gl,x=v.colorModeForRenderPass(),C=new Xt(g.LEQUAL,Xt.ReadWrite,v.depthRangeFor3D),T=v.useProgram("terrain"),M=s.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,v.width,v.height]);for(const A of d){const R=v.renderToTexture.getTexture(A),O=s.getTerrainData(A.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,R.texture);const V={u_matrix:v.transform.calculatePosMatrix(A.tileID.toUnwrapped()),u_texture:0,u_ele_delta:s.getMeshFrameDelta(v.transform.zoom)};T.draw(p,g.TRIANGLES,C,ii.disabled,x,Xn.backCCW,V,O,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Wt{constructor(s,d){this.context=new Rg(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:_.Z(),renderTime:0},this.setup(),this.numSublayers=Qr.maxUnderzooming+Qr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new oc}resize(s,d,p){if(this.width=Math.floor(s*p),this.height=Math.floor(d*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const s=this.context,d=new _.a_;d.emplaceBack(0,0),d.emplaceBack(_.N,0),d.emplaceBack(0,_.N),d.emplaceBack(_.N,_.N),this.tileExtentBuffer=s.createVertexBuffer(d,sc.members),this.tileExtentSegments=_.S.simpleSegment(0,0,4,2);const p=new _.a_;p.emplaceBack(0,0),p.emplaceBack(_.N,0),p.emplaceBack(0,_.N),p.emplaceBack(_.N,_.N),this.debugBuffer=s.createVertexBuffer(p,sc.members),this.debugSegments=_.S.simpleSegment(0,0,4,5);const g=new _.V;g.emplaceBack(0,0,0,0),g.emplaceBack(_.N,0,_.N,0),g.emplaceBack(0,_.N,0,_.N),g.emplaceBack(_.N,_.N,_.N,_.N),this.rasterBoundsBuffer=s.createVertexBuffer(g,sn.members),this.rasterBoundsSegments=_.S.simpleSegment(0,0,4,2);const x=new _.a_;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(x,sc.members),this.viewportSegments=_.S.simpleSegment(0,0,4,2);const C=new _.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(C);const T=new _.b0;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(T);const M=this.context.gl;this.stencilClearMode=new ii({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=_.Z();_.aS(p,0,this.width,this.height,0,0,1),_.a0(p,p,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,d.TRIANGLES,Xt.disabled,this.stencilClearMode,Bn.disabled,Xn.disabled,kn(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source;const p=this.context,g=p.gl;this.nextStencilID+d.length>256&&this.clearStencil(),p.setColorMode(Bn.disabled),p.setDepthMode(Xt.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of d){const T=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);x.draw(p,g.TRIANGLES,Xt.disabled,new ii({func:g.ALWAYS,mask:0},T,255,g.KEEP,g.KEEP,g.REPLACE),Bn.disabled,Xn.disabled,kn(C.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new ii({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){const d=this.context.gl;return new ii({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){const d=this.context.gl,p=s.sort((C,T)=>T.overscaledZ-C.overscaledZ),g=p[p.length-1].overscaledZ,x=p[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const C={};for(let T=0;T<x;T++)C[T+g]=new ii({func:d.GEQUAL,mask:255},T+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=x,[C,p]}return[{[g]:ii.disabled},p]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Bn([s.CONSTANT_COLOR,s.ONE],new _.aT(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Bn.unblended:Bn.alphaBlended}depthModeForSublayer(s,d,p){if(!this.opaquePassEnabledForLayer())return Xt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Xt(p||this.context.gl.LEQUAL,d,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(_.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,x={},C={},T={};for(const M in g){const A=g[M];A.used&&A.prepare(this.context),x[M]=A.getVisibleCoordinates(),C[M]=x[M].slice().reverse(),T[M]=A.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<p.length;M++)if(this.style._layers[p[M]].is3D()){this.opaquePassCutoff=M;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const M=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!_.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||M.length)&&(_.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(A,R){const O=A.context,V=O.gl,Z=Bn.unblended,q=new Xt(V.LEQUAL,Xt.ReadWrite,[0,1]),Q=R.getTerrainMesh(),$=R.sourceCache.getRenderableTiles(),ae=A.useProgram("terrainDepth");O.bindFramebuffer.set(R.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),O.clear({color:_.aT.transparent,depth:1});for(const fe of $){const te=R.getTerrainData(fe.tileID),de={u_matrix:A.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_ele_delta:R.getMeshFrameDelta(A.transform.zoom)};ae.draw(O,V.TRIANGLES,q,ii.disabled,Z,Xn.backCCW,de,te,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain),function(A,R){const O=A.context,V=O.gl,Z=Bn.unblended,q=new Xt(V.LEQUAL,Xt.ReadWrite,[0,1]),Q=R.getTerrainMesh(),$=R.getCoordsTexture(),ae=R.sourceCache.getRenderableTiles(),fe=A.useProgram("terrainCoords");O.bindFramebuffer.set(R.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),O.clear({color:_.aT.transparent,depth:1}),R.coordsIndex=[];for(const te of ae){const de=R.getTerrainData(te.tileID);O.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,$.texture);const _e={u_matrix:A.transform.calculatePosMatrix(te.tileID.toUnwrapped()),u_terrain_coords_id:(255-R.coordsIndex.length)/255,u_texture:0,u_ele_delta:R.getMeshFrameDelta(A.transform.zoom)};fe.draw(O,V.TRIANGLES,q,ii.disabled,Z,Xn.backCCW,_e,de,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),R.coordsIndex.push(te.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const M of p){const A=this.style._layers[M];if(!A.hasOffscreenPass()||A.isHidden(this.transform.zoom))continue;const R=C[A.source];("custom"===A.type||R.length)&&this.renderLayer(this,g[A.source],A,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?_.aT.black:_.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[p[this.currentLayer]],A=g[M.source],R=x[M.source];this._renderTileClippingMasks(M,R),this.renderLayer(this,A,M,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const M=this.style._layers[p[this.currentLayer]],A=g[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const R=("symbol"===M.type?T:C)[M.source];this._renderTileClippingMasks(M,x[M.source]),this.renderLayer(this,A,M,R)}if(this.options.showTileBoundaries){const M=function(A,R){let O=null;const V=Object.values(A._layers).flatMap($=>$.source&&!$.isHidden(R)?[A.sourceCaches[$.source]]:[]),Z=V.filter($=>"vector"===$.getSource().type),q=V.filter($=>"vector"!==$.getSource().type),Q=$=>{(!O||O.getSource().maxzoom<$.getSource().maxzoom)&&(O=$)};return Z.forEach($=>Q($)),O||q.forEach($=>Q($)),O}(this.style,this.transform.zoom);M&&function(A,R,O){for(let V=0;V<O.length;V++)eo(A,R,O[V])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const A=M.transform.padding;bc(M,M.transform.height-(A.top||0),3,yc),bc(M,A.bottom||0,3,El),mo(M,A.left||0,3,Ra),mo(M,M.transform.width-(A.right||0),3,Ah);const R=M.transform.centerPoint;var O,V,Z,q;Oa(O=M,(V=R.x)-1,(Z=M.transform.height-R.y)-10,2,20,q=Ph),Oa(O,V-10,Z-1,20,2,q)}(this),this.context.setDefault()}renderLayer(s,d,p,g){if(!p.isHidden(this.transform.zoom)&&("background"===p.type||"custom"===p.type||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":!function(x,C,T,M,A){if("translucent"!==x.renderPass)return;const R=ii.disabled,O=x.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(V,Z,q,Q,$,ae,fe){const te=Z.transform,de="map"===$,_e="map"===ae;for(const ve of V){const Ce=Q.getTile(ve),Ae=Ce.getBucket(q);if(!Ae||!Ae.text||!Ae.text.segments.get().length)continue;const Ie=_.ah(Ae.textSizeData,te.zoom),Le=se(Ce,1,Z.transform.zoom),$e=Fe(ve.posMatrix,_e,de,Z.transform,Le),Nt="none"!==q.layout.get("icon-text-fit")&&Ae.hasIconData();if(Ie){const Ne=Math.pow(2,te.zoom-Ce.tileID.overscaledZ);ud(Ae,de,_e,fe,te,$e,ve.posMatrix,Ne,Ie,Nt,Z.style.map.terrain?(ht,ot)=>Z.style.map.terrain.getElevation(ve,ht,ot):null)}}}(M,x,T,C,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),A),0!==T.paint.get("icon-opacity").constantOr(1)&&gc(x,C,T,M,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),R,O),0!==T.paint.get("text-opacity").constantOr(1)&&gc(x,C,T,M,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),R,O),C.map.showCollisionBoxes&&(cd(x,C,T,M,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),!0),cd(x,C,T,M,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),!1))}(s,d,p,g,this.style.placement.variableOffsets);break;case"circle":!function(x,C,T,M){if("translucent"!==x.renderPass)return;const A=T.paint.get("circle-opacity"),R=T.paint.get("circle-stroke-width"),O=T.paint.get("circle-stroke-opacity"),V=!T.layout.get("circle-sort-key").isConstant();if(0===A.constantOr(1)&&(0===R.constantOr(1)||0===O.constantOr(1)))return;const Z=x.context,q=Z.gl,Q=x.depthModeForSublayer(0,Xt.ReadOnly),$=ii.disabled,ae=x.colorModeForRenderPass(),fe=[];for(let te=0;te<M.length;te++){const de=M[te],_e=C.getTile(de),ve=_e.getBucket(T);if(!ve)continue;const Ce=ve.programConfigurations.get(T.id),Ae=x.useProgram("circle",Ce),Ie=ve.layoutVertexBuffer,Le=ve.indexBuffer,$e=x.style.map.terrain&&x.style.map.terrain.getTerrainData(de),Nt={programConfiguration:Ce,program:Ae,layoutVertexBuffer:Ie,indexBuffer:Le,uniformValues:Ln(x,de,_e,T),terrainData:$e};if(V){const Ne=ve.segments.get();for(const ht of Ne)fe.push({segments:new _.S([ht]),sortKey:ht.sortKey,state:Nt})}else fe.push({segments:ve.segments,sortKey:0,state:Nt})}V&&fe.sort((te,de)=>te.sortKey-de.sortKey);for(const te of fe){const{programConfiguration:de,program:_e,layoutVertexBuffer:ve,indexBuffer:Ce,uniformValues:Ae,terrainData:Ie}=te.state;_e.draw(Z,q.TRIANGLES,Q,$,ae,Xn.disabled,Ae,Ie,T.id,ve,Ce,te.segments,T.paint,x.transform.zoom,de)}}(s,d,p,g);break;case"heatmap":!function(x,C,T,M){if(0!==T.paint.get("heatmap-opacity"))if("offscreen"===x.renderPass){const A=x.context,R=A.gl,O=ii.disabled,V=new Bn([R.ONE,R.ONE],_.aT.transparent,[!0,!0,!0,!0]);(function(Z,q,Q){const $=Z.gl;Z.activeTexture.set($.TEXTURE1),Z.viewport.set([0,0,q.width/4,q.height/4]);let ae=Q.heatmapFbo;if(ae)$.bindTexture($.TEXTURE_2D,ae.colorAttachment.get()),Z.bindFramebuffer.set(ae.framebuffer);else{const fe=$.createTexture();$.bindTexture($.TEXTURE_2D,fe),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),ae=Q.heatmapFbo=Z.createFramebuffer(q.width/4,q.height/4,!1,!1),function(te,de,_e,ve){var Ce,Ae;const Ie=te.gl,Le=null!==(Ce=te.HALF_FLOAT)&&void 0!==Ce?Ce:Ie.UNSIGNED_BYTE,$e=null!==(Ae=te.RGBA16F)&&void 0!==Ae?Ae:Ie.RGBA;Ie.texImage2D(Ie.TEXTURE_2D,0,$e,de.width/4,de.height/4,0,Ie.RGBA,Le,null),ve.colorAttachment.set(_e)}(Z,q,fe,ae)}})(A,x,T),A.clear({color:_.aT.transparent});for(let Z=0;Z<M.length;Z++){const q=M[Z];if(C.hasRenderableParent(q))continue;const Q=C.getTile(q),$=Q.getBucket(T);if(!$)continue;const ae=$.programConfigurations.get(T.id),fe=x.useProgram("heatmap",ae),{zoom:te}=x.transform;fe.draw(A,R.TRIANGLES,Xt.disabled,O,V,Xn.disabled,Ct(q.posMatrix,Q,te,T.paint.get("heatmap-intensity")),null,T.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,T.paint,x.transform.zoom,ae)}A.viewport.set([0,0,x.width,x.height])}else"translucent"===x.renderPass&&(x.context.setColorMode(x.colorModeForRenderPass()),function(A,R){const O=A.context,V=O.gl,Z=R.heatmapFbo;if(!Z)return;O.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,Z.colorAttachment.get()),O.activeTexture.set(V.TEXTURE1);let q=R.colorRampTexture;q||(q=R.colorRampTexture=new Zn(O,R.colorRamp,V.RGBA)),q.bind(V.LINEAR,V.CLAMP_TO_EDGE),A.useProgram("heatmapTexture").draw(O,V.TRIANGLES,Xt.disabled,ii.disabled,A.colorModeForRenderPass(),Xn.disabled,((Q,$,ae,fe)=>{const te=_.Z();_.aS(te,0,Q.width,Q.height,0,0,1);const de=Q.context.gl;return{u_matrix:te,u_world:[de.drawingBufferWidth,de.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:$.paint.get("heatmap-opacity")}})(A,R),null,R.id,A.viewportBuffer,A.quadTriangleIndexBuffer,A.viewportSegments,R.paint,A.transform.zoom)}(x,T))}(s,d,p,g);break;case"line":!function(x,C,T,M){if("translucent"!==x.renderPass)return;const A=T.paint.get("line-opacity"),R=T.paint.get("line-width");if(0===A.constantOr(1)||0===R.constantOr(1))return;const O=x.depthModeForSublayer(0,Xt.ReadOnly),V=x.colorModeForRenderPass(),Z=T.paint.get("line-dasharray"),q=T.paint.get("line-pattern"),Q=q.constantOr(1),$=T.paint.get("line-gradient"),ae=T.getCrossfadeParameters(),fe=Q?"linePattern":Z?"lineSDF":$?"lineGradient":"line",te=x.context,de=te.gl;let _e=!0;for(const ve of M){const Ce=C.getTile(ve);if(Q&&!Ce.patternsLoaded())continue;const Ae=Ce.getBucket(T);if(!Ae)continue;const Ie=Ae.programConfigurations.get(T.id),Le=x.context.program.get(),$e=x.useProgram(fe,Ie),Nt=_e||$e.program!==Le,Ne=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ve),ht=q.constantOr(null);if(ht&&Ce.imageAtlas){const zt=Ce.imageAtlas,Tt=zt.patternPositions[ht.to.toString()],Bt=zt.patternPositions[ht.from.toString()];Tt&&Bt&&Ie.setConstantPatternPositions(Tt,Bt)}const ot=Ne?ve:null,_n=Q?xh(x,Ce,T,ae,ot):Z?xe(x,Ce,T,Z,ae,ot):$?pm(x,Ce,T,Ae.lineClipsArray.length,ot):uc(x,Ce,T,ot);if(Q)te.activeTexture.set(de.TEXTURE0),Ce.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Ie.updatePaintBuffers(ae);else if(Z&&(Nt||x.lineAtlas.dirty))te.activeTexture.set(de.TEXTURE0),x.lineAtlas.bind(te);else if($){const zt=Ae.gradients[T.id];let Tt=zt.texture;if(T.gradientVersion!==zt.version){let Bt=256;if(T.stepInterpolant){const Yn=C.getSource().maxzoom,Sn=ve.canonical.z===Yn?Math.ceil(1<<x.transform.maxZoom-ve.canonical.z):1;Bt=_.ad(_.aY(Ae.maxLineLength/_.N*1024*Sn),256,te.maxTextureSize)}zt.gradient=_.aZ({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:Bt,image:zt.gradient||void 0,clips:Ae.lineClipsArray}),zt.texture?zt.texture.update(zt.gradient):zt.texture=new Zn(te,zt.gradient,de.RGBA),zt.version=T.gradientVersion,Tt=zt.texture}te.activeTexture.set(de.TEXTURE0),Tt.bind(T.stepInterpolant?de.NEAREST:de.LINEAR,de.CLAMP_TO_EDGE)}$e.draw(te,de.TRIANGLES,O,x.stencilModeForClipping(ve),V,Xn.disabled,_n,Ne,T.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,T.paint,x.transform.zoom,Ie,Ae.layoutVertexBuffer2),_e=!1}}(s,d,p,g);break;case"fill":!function(x,C,T,M){const A=T.paint.get("fill-color"),R=T.paint.get("fill-opacity");if(0===R.constantOr(1))return;const O=x.colorModeForRenderPass(),V=T.paint.get("fill-pattern"),Z=x.opaquePassEnabledForLayer()&&!V.constantOr(1)&&1===A.constantOr(_.aT.transparent).a&&1===R.constantOr(0)?"opaque":"translucent";if(x.renderPass===Z){const q=x.depthModeForSublayer(1,"opaque"===x.renderPass?Xt.ReadWrite:Xt.ReadOnly);po(x,C,T,M,q,O,!1)}if("translucent"===x.renderPass&&T.paint.get("fill-antialias")){const q=x.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Xt.ReadOnly);po(x,C,T,M,q,O,!0)}}(s,d,p,g);break;case"fill-extrusion":!function(x,C,T,M){const A=T.paint.get("fill-extrusion-opacity");if(0!==A&&"translucent"===x.renderPass){const R=new Xt(x.context.gl.LEQUAL,Xt.ReadWrite,x.depthRangeFor3D);if(1!==A||T.paint.get("fill-extrusion-pattern").constantOr(1))vc(x,C,T,M,R,ii.disabled,Bn.disabled),vc(x,C,T,M,R,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const O=x.colorModeForRenderPass();vc(x,C,T,M,R,ii.disabled,O)}}}(s,d,p,g);break;case"hillshade":!function(x,C,T,M){if("offscreen"!==x.renderPass&&"translucent"!==x.renderPass)return;const A=x.context,R=x.depthModeForSublayer(0,Xt.ReadOnly),O=x.colorModeForRenderPass(),[V,Z]="translucent"===x.renderPass?x.stencilConfigForOverlap(M):[{},M];for(const q of Z){const Q=C.getTile(q);void 0!==Q.needsHillshadePrepare&&Q.needsHillshadePrepare&&"offscreen"===x.renderPass?hd(x,Q,T,R,ii.disabled,O):"translucent"===x.renderPass&&Oe(x,q,Q,T,R,V[q.overscaledZ],O)}A.viewport.set([0,0,x.width,x.height])}(s,d,p,g);break;case"raster":!function(x,C,T,M){if("translucent"!==x.renderPass||0===T.paint.get("raster-opacity")||!M.length)return;const A=x.context,R=A.gl,O=C.getSource(),V=x.useProgram("raster"),Z=x.colorModeForRenderPass(),[q,Q]=O instanceof ao?[{},M]:x.stencilConfigForOverlap(M),$=Q[Q.length-1].overscaledZ,ae=!x.options.moving;for(const fe of Q){const te=x.depthModeForSublayer(fe.overscaledZ-$,1===T.paint.get("raster-opacity")?Xt.ReadWrite:Xt.ReadOnly,R.LESS),de=C.getTile(fe);de.registerFadeDuration(T.paint.get("raster-fade-duration"));const _e=C.findLoadedParent(fe,0),ve=qe(de,_e,C,T,x.transform,x.style.map.terrain);let Ce,Ae;const Ie="nearest"===T.paint.get("raster-resampling")?R.NEAREST:R.LINEAR;A.activeTexture.set(R.TEXTURE0),de.texture.bind(Ie,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),A.activeTexture.set(R.TEXTURE1),_e?(_e.texture.bind(Ie,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Ce=Math.pow(2,_e.tileID.overscaledZ-de.tileID.overscaledZ),Ae=[de.tileID.canonical.x*Ce%1,de.tileID.canonical.y*Ce%1]):de.texture.bind(Ie,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const Le=x.style.map.terrain&&x.style.map.terrain.getTerrainData(fe),$e=Le?fe:null,Nt=$e?$e.posMatrix:x.transform.calculatePosMatrix(fe.toUnwrapped(),ae),Ne=mn(Nt,Ae||[0,0],Ce||1,ve,T);O instanceof ao?V.draw(A,R.TRIANGLES,te,ii.disabled,Z,Xn.disabled,Ne,Le,T.id,O.boundsBuffer,x.quadTriangleIndexBuffer,O.boundsSegments):V.draw(A,R.TRIANGLES,te,q[fe.overscaledZ],Z,Xn.disabled,Ne,Le,T.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}}(s,d,p,g);break;case"background":!function(x,C,T,M){const A=T.paint.get("background-color"),R=T.paint.get("background-opacity");if(0===R)return;const O=x.context,V=O.gl,Z=x.transform,q=Z.tileSize,Q=T.paint.get("background-pattern");if(x.isPatternMissing(Q))return;const $=!Q&&1===A.a&&1===R&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==$)return;const ae=ii.disabled,fe=x.depthModeForSublayer(0,"opaque"===$?Xt.ReadWrite:Xt.ReadOnly),te=x.colorModeForRenderPass(),de=x.useProgram(Q?"backgroundPattern":"background"),_e=M||Z.coveringTiles({tileSize:q,terrain:x.style.map.terrain});Q&&(O.activeTexture.set(V.TEXTURE0),x.imageManager.bind(x.context));const ve=T.getCrossfadeParameters();for(const Ce of _e){const Ae=M?Ce.posMatrix:x.transform.calculatePosMatrix(Ce.toUnwrapped()),Ie=Q?Oo(Ae,R,x,Q,{tileID:Ce,tileSize:q},ve):ar(Ae,R,A),Le=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ce);de.draw(O,V.TRIANGLES,fe,ae,te,Xn.disabled,Ie,Le,T.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}(s,0,p,g);break;case"custom":!function(x,C,T){const M=x.context,A=T.implementation;if("offscreen"===x.renderPass){const R=A.prerender;R&&(x.setCustomLayerDefaults(),M.setColorMode(x.colorModeForRenderPass()),R.call(A,M.gl,x.transform.customLayerMatrix()),M.setDirty(),x.setBaseState())}else if("translucent"===x.renderPass){x.setCustomLayerDefaults(),M.setColorMode(x.colorModeForRenderPass()),M.setStencilMode(ii.disabled);const R="3d"===A.renderingMode?new Xt(x.context.gl.LEQUAL,Xt.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,Xt.ReadOnly);M.setDepthMode(R),A.render(M.gl,x.transform.customLayerMatrix()),M.setDirty(),x.setBaseState(),M.bindFramebuffer.set(null)}}(s,0,p)}}translatePosMatrix(s,d,p,g,x){if(!p[0]&&!p[1])return s;const C=x?"map"===g?this.transform.angle:0:"viewport"===g?-this.transform.angle:0;if(C){const A=Math.sin(C),R=Math.cos(C);p=[p[0]*R-p[1]*A,p[0]*A+p[1]*R]}const T=[x?p[0]:se(d,p[0],this.transform.zoom),x?p[1]:se(d,p[1],this.transform.zoom),0],M=new Float32Array(16);return _.$(M,s,T),M}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const d=this.imageManager.getPattern(s.from.toString()),p=this.imageManager.getPattern(s.to.toString());return!d||!p}useProgram(s,d){this.cache=this.cache||{};const p=s+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new mt(this.context,Kn[s],d,rd[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Zn(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}class Yi{constructor(s,d){this.points=s,this.planes=d}static fromInvProjectionMatrix(s,d,p){const g=Math.pow(2,p),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const M=1/(T=_.ag([],T,s))[3]/d*g;return _.b3(T,T,[M,M,1/T[3],M])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const M=function(V,Z){var q=Z[0],Q=Z[1],$=Z[2],ae=q*q+Q*Q+$*$;return ae>0&&(ae=1/Math.sqrt(ae)),V[0]=Z[0]*ae,V[1]=Z[1]*ae,V[2]=Z[2]*ae,V}([],(V=[],Z=Qo([],x[T[0]],x[T[1]]),q=Qo([],x[T[2]],x[T[1]]),Q=Z[0],fe=q[0],V[0]=($=Z[1])*(de=q[2])-(ae=Z[2])*(te=q[1]),V[1]=ae*fe-Q*de,V[2]=Q*te-$*fe,V)),A=-((R=M)[0]*(O=x[T[1]])[0]+R[1]*O[1]+R[2]*O[2]);var V,Z,q,Q,$,ae,fe,te,de,R,O;return M.concat(A)});return new Yi(x,C)}}class ta{constructor(s,d){var p,g,x;this.min=s,this.max=d,this.center=function(p,g,x){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],((p=[])[0]=(g=this.min)[0]+(x=this.max)[0],p[1]=g[1]+x[1],p[2]=g[2]+x[2],p))}quadrant(s){const d=[s%2==0,s<2],p=Mo(this.min),g=Mo(this.max);for(let x=0;x<d.length;x++)p[x]=d[x]?this.min[x]:this.center[x],g[x]=d[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new ta(p,g)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<s.planes.length;g++){const x=s.planes[g];let C=0;for(let T=0;T<d.length;T++)_.b4(x,d[T])>=0&&C++;if(0===C)return 0;C!==d.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let T=0;T<s.points.length;T++){const M=s.points[T][g]-this.min[g];x=Math.min(x,M),C=Math.max(C,M)}if(C<0||x>this.max[g]-this.min[g])return 0}return 1}}class Fa{constructor(s=0,d=0,p=0,g=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=p,this.right=g}interpolate(s,d,p){return null!=d.top&&null!=s.top&&(this.top=_.B.number(s.top,d.top,p)),null!=d.bottom&&null!=s.bottom&&(this.bottom=_.B.number(s.bottom,d.bottom,p)),null!=d.left&&null!=s.left&&(this.left=_.B.number(s.left,d.left,p)),null!=d.right&&null!=s.right&&(this.right=_.B.number(s.right,d.right,p)),this}getCenter(s,d){const p=_.ad((this.left+s-this.right)/2,0,s),g=_.ad((this.top+d-this.bottom)/2,0,d);return new _.P(p,g)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Fa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class xc{constructor(s,d,p,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===x||!!x,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new _.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Fa,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const s=new xc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this._minEleveationForCurrentTile=s._minEleveationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){void 0===s?s=!0:null===s&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new _.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const d=-_.b5(s,-180,180)*Math.PI/180;var p;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(p=new _.A(4),_.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),function(p,g,x){var C=g[0],T=g[1],M=g[2],A=g[3],R=Math.sin(x),O=Math.cos(x);p[0]=C*O+M*R,p[1]=T*O+A*R,p[2]=C*-R+M*O,p[3]=T*-R+A*O}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const d=_.ad(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,p){this._unmodified=!1,this._edgeInsets.interpolate(s,d,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){const d=[new _.b6(0,s)];if(this._renderWorldCopies){const p=this.pointCoordinate(new _.P(0,0)),g=this.pointCoordinate(new _.P(this.width,0)),x=this.pointCoordinate(new _.P(this.width,this.height)),C=this.pointCoordinate(new _.P(0,this.height)),T=Math.floor(Math.min(p.x,g.x,x.x,C.x)),M=Math.floor(Math.max(p.x,g.x,x.x,C.x)),A=1;for(let R=T-A;R<=M+A;R++)0!==R&&d.push(new _.b6(R,s))}return d}coveringTiles(s){var d,p;let g=this.coveringZoomLevel(s);const x=g;if(void 0!==s.minzoom&&g<s.minzoom)return[];void 0!==s.maxzoom&&g>s.maxzoom&&(g=s.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),T=_.U.fromLngLat(this.center),M=Math.pow(2,g),A=[M*C.x,M*C.y,0],R=[M*T.x,M*T.y,0],O=Yi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let V=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(V=g);const Z=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,q=te=>({aabb:new ta([te*M,0,0],[(te+1)*M,M,0]),zoom:0,x:0,y:0,wrap:te,fullyVisible:!1}),Q=[],$=[],ae=g,fe=s.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let te=1;te<=3;te++)Q.push(q(-te)),Q.push(q(te));for(Q.push(q(0));Q.length>0;){const te=Q.pop(),de=te.x,_e=te.y;let ve=te.fullyVisible;if(!ve){const $e=te.aabb.intersects(O);if(0===$e)continue;ve=2===$e}const Ce=s.terrain?A:R,Ae=te.aabb.distanceX(Ce),Ie=te.aabb.distanceY(Ce),Le=Math.max(Math.abs(Ae),Math.abs(Ie));if(te.zoom===ae||Le>Z+(1<<ae-te.zoom)-2&&te.zoom>=V){const $e=ae-te.zoom,Nt=A[0]-.5-(de<<$e),Ne=A[1]-.5-(_e<<$e);$.push({tileID:new _.O(te.zoom===ae?fe:te.zoom,te.wrap,te.zoom,de,_e),distanceSq:xa([R[0]-.5-de,R[1]-.5-_e]),tileDistanceToCamera:Math.sqrt(Nt*Nt+Ne*Ne)})}else for(let $e=0;$e<4;$e++){const Nt=(de<<1)+$e%2,Ne=(_e<<1)+($e>>1),ht=te.zoom+1;let ot=te.aabb.quadrant($e);if(s.terrain){const _n=new _.O(ht,te.wrap,ht,Nt,Ne),zt=s.terrain.getMinMaxElevation(_n),Tt=null!==(d=zt.minElevation)&&void 0!==d?d:this.elevation,Bt=null!==(p=zt.maxElevation)&&void 0!==p?p:this.elevation;ot=new ta([ot.min[0],ot.min[1],Tt],[ot.max[0],ot.max[1],Bt])}Q.push({aabb:ot,zoom:ht,x:Nt,y:Ne,wrap:te.wrap,fullyVisible:ve})}}return $.sort((te,de)=>te.distanceSq-de.distanceSq).map(te=>te.tileID)}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const d=_.ad(s.lat,-this.maxValidLatitude,this.maxValidLatitude);return new _.P(_.G(s.lng)*this.worldSize,_.H(d)*this.worldSize)}unproject(s){return new _.U(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const d=this.pointLocation(this.centerPoint,s),p=s.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),x=_.U.fromLngLat(g.lngLat,g.altitude),C=_.U.fromLngLat(d,p),T=x.x-C.x,M=x.y-C.y,A=x.z-C.z,R=Math.sqrt(T*T+M*M+A*A),O=this.scaleZoom(this.cameraToCenterDistance/R/this.tileSize);this._elevation=p,this._center=d,this.zoom=O}setLocationAtPoint(s,d){const p=this.pointCoordinate(d),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(s),C=new _.U(x.x-(p.x-g.x),x.y-(p.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,d){return d?this.coordinatePoint(this.locationCoordinate(s),d.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,d){return this.coordinateLocation(this.pointCoordinate(s,d))}locationCoordinate(s){return _.U.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,d){if(d){const V=d.pointCoordinate(s);if(null!=V)return V}const p=[s.x,s.y,0,1],g=[s.x,s.y,1,1];_.ag(p,p,this.pixelMatrixInverse),_.ag(g,g,this.pixelMatrixInverse);const x=p[3],C=g[3],T=p[1]/x,M=g[1]/C,A=p[2]/x,R=g[2]/C,O=A===R?0:(0-A)/(R-A);return new _.U(_.B.number(p[0]/x,g[0]/C,O)/this.worldSize,_.B.number(T,M,O)/this.worldSize)}coordinatePoint(s,d=0,p=this.pixelMatrix){const g=[s.x*this.worldSize,s.y*this.worldSize,d,1];return _.ag(g,g,p),new _.P(g[0]/g[3],g[1]/g[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return(new Nn).extend(this.pointLocation(new _.P(0,s))).extend(this.pointLocation(new _.P(this.width,s))).extend(this.pointLocation(new _.P(this.width,this.height))).extend(this.pointLocation(new _.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Nn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(s,d=!1){const p=s.key,g=d?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const x=s.canonical,C=this.worldSize/this.zoomScale(x.z),T=x.x+Math.pow(2,x.z)*s.wrap,M=_.ao(new Float64Array(16));return _.$(M,M,[T*C,x.y*C,0]),_.a0(M,M,[C/_.N,C/_.N,1]),_.a1(M,d?this.alignedProjMatrix:this.projMatrix,M),g[p]=new Float32Array(M),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s,d,p,g,x=-90,C=90,T=-180,M=180;const A=this.size,R=this._unmodified;if(this.latRange){const Z=this.latRange;x=_.H(Z[1])*this.worldSize,C=_.H(Z[0])*this.worldSize,s=C-x<A.y?A.y/(C-x):0}if(this.lngRange){const Z=this.lngRange;T=_.b5(_.G(Z[0])*this.worldSize,0,this.worldSize),M=_.b5(_.G(Z[1])*this.worldSize,0,this.worldSize),M<T&&(M+=this.worldSize),d=M-T<A.x?A.x/(M-T):0}const O=this.point,V=Math.max(d||0,s||0);if(V)return this.center=this.unproject(new _.P(d?(M+T)/2:O.x,s?(C+x)/2:O.y)),this.zoom+=this.scaleZoom(V),this._unmodified=R,void(this._constraining=!1);if(this.latRange){const Z=O.y,q=A.y/2;Z-q<x&&(g=x+q),Z+q>C&&(g=C-q)}if(this.lngRange){const Z=(T+M)/2,q=_.b5(O.x,Z-this.worldSize/2,Z+this.worldSize/2),Q=A.x/2;q-Q<T&&(p=T+Q),q+Q>M&&(p=M-Q)}void 0===p&&void 0===g||(this.center=this.unproject(new _.P(void 0!==p?p:O.x,void 0!==g?g:O.y)).wrap()),this._unmodified=R,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,d=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=_.b7(1,this.center.lat)*this.worldSize;let g=_.ao(new Float64Array(16));_.a0(g,g,[this.width/2,-this.height/2,1]),_.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=_.ao(new Float64Array(16)),_.a0(g,g,[1,-1,1]),_.$(g,g,[-1,-1,0]),_.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),T=x-C*this._pixelPerMeter/Math.cos(this._pitch),M=C<0?T:x,A=Math.PI/2+this._pitch,R=this._fov*(.5+s.y/this.height),O=Math.sin(R)*M/Math.sin(_.ad(Math.PI-A-R,.01,Math.PI-.01)),V=this.getHorizon(),Z=2*Math.atan(V/this.cameraToCenterDistance)*(.5+s.y/(2*V)),q=Math.sin(Z)*M/Math.sin(_.ad(Math.PI-A-Z,.01,Math.PI-.01)),Q=Math.min(O,q),$=1.01*(Math.cos(Math.PI/2-this._pitch)*Q+M),ae=this.height/50;g=new Float64Array(16),_.b8(g,this._fov,this.width/this.height,ae,$),g[8]=2*-s.x/this.width,g[9]=2*s.y/this.height,_.a0(g,g,[1,-1,1]),_.$(g,g,[0,0,-this.cameraToCenterDistance]),_.b9(g,g,this._pitch),_.ae(g,g,this.angle),_.$(g,g,[-d,-p,0]),this.mercatorMatrix=_.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),_.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=_.a1(new Float64Array(16),this.labelPlaneMatrix,g),_.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=_.as([],g),this.pixelMatrix3D=_.a1(new Float64Array(16),this.labelPlaneMatrix,g);const fe=this.width%2/2,te=this.height%2/2,de=Math.cos(this.angle),_e=Math.sin(this.angle),ve=d-Math.round(d)+de*fe+_e*te,Ce=p-Math.round(p)+de*te+_e*fe,Ae=new Float64Array(g);if(_.$(Ae,Ae,[ve>.5?ve-1:ve,Ce>.5?Ce-1:Ce,0]),this.alignedProjMatrix=Ae,g=_.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new _.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return _.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new _.P(0,s))}getCameraQueryGeometry(s){const d=this.getCameraPoint();if(1===s.length)return[s[0],d];{let p=d.x,g=d.y,x=d.x,C=d.y;for(const T of s)p=Math.min(p,T.x),g=Math.min(g,T.y),x=Math.max(x,T.x),C=Math.max(C,T.y);return[new _.P(p,g),new _.P(x,g),new _.P(x,C),new _.P(p,C),new _.P(p,g)]}}}function Tr(v,s){let d,p=!1,g=null,x=null;const C=()=>{g=null,p&&(v.apply(x,d),g=setTimeout(C,s),p=!1)};return(...T)=>(p=!0,x=this,d=T,g||C(),g)}class Ss{constructor(s){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let p;return d.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:p,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=Tr(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(s){const d=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),C=Math.round(d.lng*x)/x,T=Math.round(d.lat*x)/x,M=this._map.getBearing(),A=this._map.getPitch();let R="";if(R+=s?`/${C}/${T}/${p}`:`${p}/${T}/${C}`,(M||A)&&(R+="/"+Math.round(10*M)/10),A&&(R+=`/${Math.round(A)}`),this._hashName){const O=this._hashName;let V=!1;const Z=window.location.hash.slice(1).split("&").map(q=>{const Q=q.split("=")[0];return Q===O?(V=!0,`${Q}=${R}`):q}).filter(q=>q);return V||Z.push(`${O}=${R}`),`#${Z.join("&")}`}return`#${R}`}}const Na={linearity:.3,easing:_.ba(0,0,.3,1)},du=_.e({deceleration:2500,maxSpeed:1400},Na),pd=_.e({deceleration:20,maxSpeed:1400},Na),uu=_.e({deceleration:1e3,maxSpeed:360},Na),hu=_.e({deceleration:1e3,maxSpeed:90},Na);class Ml{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:_.h.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=_.h.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new _.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)d.zoom+=x.zoomDelta||0,d.bearing+=x.bearingDelta||0,d.pitch+=x.pitchDelta||0,x.panDelta&&d.pan._add(x.panDelta),x.around&&(d.around=x.around),x.pinchAround&&(d.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(d.pan.mag()){const x=Dl(d.pan.mag(),p,_.e({},du,s||{}));g.offset=d.pan.mult(x.amount/d.pan.mag()),g.center=this._map.transform.center,No(g,x)}if(d.zoom){const x=Dl(d.zoom,p,pd);g.zoom=this._map.transform.zoom+x.amount,No(g,x)}if(d.bearing){const x=Dl(d.bearing,p,uu);g.bearing=this._map.transform.bearing+_.ad(x.amount,-179,179),No(g,x)}if(d.pitch){const x=Dl(d.pitch,p,hu);g.pitch=this._map.transform.pitch+x.amount,No(g,x)}if(g.zoom||g.bearing){const x=void 0===d.pinchAround?d.around:d.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),_.e(g,{noMoveStart:!0})}}function No(v,s){(!v.duration||v.duration<s.duration)&&(v.duration=s.duration,v.easing=s.easing)}function Dl(v,s,d){const{maxSpeed:p,linearity:g,deceleration:x}=d,C=_.ad(v*g/(s/1e3),-p,p),T=Math.abs(C)/(x*g);return{easing:d.easing,duration:1e3*T,amount:C*(T/2)}}class to extends _.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,p,g={}){const x=be.mousePos(d.getCanvasContainer(),p),C=d.unproject(x);super(s,_.e({point:x,lngLat:C,originalEvent:p},g)),this._defaultPrevented=!1,this.target=d}}class Il extends _.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,p){const g="touchend"===s?p.changedTouches:p.touches,x=be.touchPos(d.getCanvasContainer(),g),C=x.map(M=>d.unproject(M)),T=x.reduce((M,A,R,O)=>M.add(A.div(O.length)),new _.P(0,0));super(s,{points:x,point:T,lngLats:C,lngLat:d.unproject(T),originalEvent:p}),this._defaultPrevented=!1}}class Rh extends _.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,p){super(s,{originalEvent:p}),this._defaultPrevented=!1}}class Oh{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Rh(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new to(s.type,this._map,s))}mouseup(s){this._map.fire(new to(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new to(s.type,this._map,s))}dblclick(s){return this._firePreventable(new to(s.type,this._map,s))}mouseover(s){this._map.fire(new to(s.type,this._map,s))}mouseout(s){this._map.fire(new to(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Il(s.type,this._map,s))}touchmove(s){this._map.fire(new Il(s.type,this._map,s))}touchend(s){this._map.fire(new Il(s.type,this._map,s))}touchcancel(s){this._map.fire(new Il(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fo{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new to(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new to("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new to(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cs{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(_.P.convert(s),this._map.terrain)}}class pu{constructor(s,d){this._map=s,this._tr=new Cs(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&0===s.button&&(be.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const p=d;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=be.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const x=Math.min(g.x,p.x),C=Math.max(g.x,p.x),T=Math.min(g.y,p.y),M=Math.max(g.y,p.y);be.setTransform(this._box,`translate(${x}px,${T}px)`),this._box.style.width=C-x+"px",this._box.style.height=M-T+"px"}mouseupWindow(s,d){if(!this._active||0!==s.button)return;const p=this._startPos,g=d;if(this.reset(),be.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new _.k("boxzoomend",{originalEvent:s})),{cameraAnimation:x=>x.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&27===s.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(be.remove(this._box),this._box=null),be.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new _.k(s,{originalEvent:d}))}}function go(v,s){if(v.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${s.length}`);const d={};for(let p=0;p<v.length;p++)d[v[p].identifier]=s[p];return d}class Ts{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=s.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const x=new _.P(0,0);for(const C of g)x._add(C);return x.div(g.length)}(d),this.touches=go(p,d)))}touchmove(s,d,p){if(this.aborted||!this.centroid)return;const g=go(p,d);for(const x in this.touches){const C=g[x];(!C||C.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(s,d,p){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),0===p.length){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class md{constructor(s){this.singleTap=new Ts(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,p){this.singleTap.touchstart(s,d,p)}touchmove(s,d,p){this.singleTap.touchmove(s,d,p)}touchend(s,d,p){const g=this.singleTap.touchend(s,d,p);if(g){const x=s.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(x&&C||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Es{constructor(s){this._tr=new Cs(s),this._zoomIn=new md({numTouches:1,numTaps:2}),this._zoomOut=new md({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,p){this._zoomIn.touchstart(s,d,p),this._zoomOut.touchstart(s,d,p)}touchmove(s,d,p){this._zoomIn.touchmove(s,d,p),this._zoomOut.touchmove(s,d,p)}touchend(s,d,p){const g=this._zoomIn.touchend(s,d,p),x=this._zoomOut.touchend(s,d,p),C=this._tr;return g?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:s})}):x?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(x)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class is{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const g=d.length?d[0]:d;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&be.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _m={0:1,2:2};class mu{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const d=be.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(d,p){const g=_m[p];return void 0===d.buttons||(d.buttons&g)!==g}(s,this._eventButton)}isValidEndEvent(s){return be.mouseButton(s)===this._eventButton}}class Fh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return 1===s.targetTouches.length}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}const ri=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(s){s.preventDefault()}},Al=({enable:v,clickTolerance:s,bearingDegreesPerPixelMoved:d=.8})=>{const p=new mu({checkCorrectEvent:g=>0===be.mouseButton(g)&&g.ctrlKey||2===be.mouseButton(g)});return new is({clickTolerance:s,move:(g,x)=>({bearingDelta:(x.x-g.x)*d}),moveStateManager:p,enable:v,assignEvents:ri})},Ms=({enable:v,clickTolerance:s,pitchDegreesPerPixelMoved:d=-.5})=>{const p=new mu({checkCorrectEvent:g=>0===be.mouseButton(g)&&g.ctrlKey||2===be.mouseButton(g)});return new is({clickTolerance:s,move:(g,x)=>({pitchDelta:(x.y-g.y)*d}),moveStateManager:p,enable:v,assignEvents:ri})};class Qe{constructor(s,d){this._minTouches=s.cooperativeGestures?2:1,this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new _.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(s,d,p){return this._calculateTransform(s,d,p)}touchmove(s,d,p){if(this._map._cooperativeGestures&&(2===this._minTouches&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(s,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return s.preventDefault(),this._calculateTransform(s,d,p)}touchend(s,d,p){this._calculateTransform(s,d,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,p){p.length>0&&(this._active=!0);const g=go(p,d),x=new _.P(0,0),C=new _.P(0,0);let T=0;for(const A in g){const R=g[A],O=this._touches[A];O&&(x._add(R),C._add(R.sub(O)),T++,g[A]=R)}if(this._touches=g,T<this._minTouches||!C.mag())return;const M=C.div(T);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(T),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,p){if(!this._firstTwoTouches)return;s.preventDefault();const[g,x]=this._firstTwoTouches,C=na(p,d,g),T=na(p,d,x);if(!C||!T)return;const M=this._aroundCenter?null:C.add(T).div(2);return this._move([C,T],M,s)}touchend(s,d,p){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,C=na(p,d,g),T=na(p,d,x);C&&T||(this._active&&be.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&"center"===s.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function na(v,s,d){for(let p=0;p<v.length;p++)if(v[p].identifier===d)return s[p]}function za(v,s){return Math.log(v/s)/Math.LN2}class Je extends Vn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const p=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(za(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:za(this._distance,p),pinchAround:d}}}function Be(v,s){return 180*v.angleWith(s)/Math.PI}class Jt extends Vn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d){const p=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Be(this._vector,p),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,p=Be(s,this._startVector);return Math.abs(p)<d}}function Ai(v){return Math.abs(v.y)>Math.abs(v.x)}class Er extends Vn{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,p){super.touchstart(s,d,p),this._currentTouchCount=p.length}_start(s){this._lastPoints=s,Ai(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=s[0].sub(this._lastPoints[0]),x=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,p.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,p){if(void 0!==this._valid)return this._valid;const g=s.mag()>=2,x=d.mag()>=2;if(!g&&!x)return;if(!g||!x)return void 0===this._firstMove&&(this._firstMove=p),p-this._firstMove<100&&void 0;const C=s.y>0==d.y>0;return Ai(s)&&Ai(d)&&C}}const ia={panStep:100,bearingStep:15,pitchStep:10};class jr{constructor(s){this._tr=new Cs(s);const d=ia;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,p=0,g=0,x=0,C=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?p=-1:(s.preventDefault(),x=-1);break;case 39:s.shiftKey?p=1:(s.preventDefault(),x=1);break;case 38:s.shiftKey?g=1:(s.preventDefault(),C=-1);break;case 40:s.shiftKey?g=-1:(s.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:T=>{const M=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:fu,zoom:d?Math.round(M.zoom)+d*(s.shiftKey?2:1):M.zoom,bearing:M.bearing+p*this._bearingStep,pitch:M.pitch+g*this._pitchStep,offset:[-x*this._panStep,-C*this._panStep],center:M.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fu(v){return v*(2-v)}const gu=4.000244140625;class fd{constructor(s,d){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=s,this._tr=new Cs(s),this._el=s.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&"center"===s.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!s[this._map._metaKey])return;s.preventDefault()}let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const p=_.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,0!==d&&d%gu==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(g*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=be.mousePos(this._el,s),p=this._tr;this._around=_.L.convert(this._aroundCenter?p.center:p.unproject(d)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(0!==this._delta){const T="wheel"===this._type&&Math.abs(this._delta)>gu?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&0!==M&&(M=1/M);const A="number"==typeof this._targetZoom?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(A*M))),"wheel"===this._type&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d="number"==typeof this._targetZoom?this._targetZoom:s.zoom,p=this._startZoom,g=this._easing;let x,C=!1;if("wheel"===this._type&&p&&g){const T=Math.min((_.h.now()-this._lastWheelEventTime)/200,1),M=g(T);x=_.B.number(p,d,M),T<1?this._frameId||(this._frameId=!0):C=!0}else x=d,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:x-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=_.bb;if(this._prevEase){const p=this._prevEase,g=(_.h.now()-p.start)/p.duration,x=p.easing(g+.01)-p.easing(g),C=.27/Math.sqrt(x*x+1e-4)*.01,T=Math.sqrt(.0729-C*C);d=_.ba(C,T,.25,1)}return this._prevEase={start:_.h.now(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class _u{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vu{constructor(s){this._tr=new Cs(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qn{constructor(){this._tap=new md({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,p){if(!this._swipePoint)if(this._tapTime){const g=d[0],x=s.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;x&&C?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(s,d,p)}touchmove(s,d,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=d[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,s.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(s,d,p)}touchend(s,d,p){if(this._tapTime)this._swipePoint&&0===p.length&&this.reset();else{const g=this._tap.touchend(s,d,p);g&&(this._tapTime=s.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ye{constructor(s,d,p){this._el=s,this._mousePan=d,this._touchPan=p}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ft{constructor(s,d,p){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class fn{constructor(s,d,p,g){this._el=s,this._touchZoom=d,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Mr=v=>v.zoom||v.drag||v.pitch||v.rotate;class La extends _.k{}function xi(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class ra{constructor(s,d){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if("blur"===g.type)return void this.stop(!0);this._updatingCamera=!0;const C="renderFrame"===g.type?void 0:g,T={needsRenderFrame:!1},M={},A={},R=g.touches,O=R?this._getMapTouches(R):void 0,V=O?be.touchPos(this._el,O):be.mousePos(this._el,g);for(const{handlerName:Q,handler:$,allowed:ae}of this._handlers){if(!$.isEnabled())continue;let fe;this._blockedByActive(A,ae,Q)?$.reset():$[x||g.type]&&(fe=$[x||g.type](g,V,O),this.mergeHandlerResult(T,M,fe,Q,C),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||$.isActive())&&(A[Q]=$)}const Z={};for(const Q in this._previousActiveHandlers)A[Q]||(Z[Q]=C);this._previousActiveHandlers=A,(Object.keys(Z).length||xi(T))&&(this._changes.push([T,M,Z]),this._triggerRenderFrame()),(Object.keys(A).length||xi(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=T;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ml(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,C]of this._listeners)be.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[s,d,p]of this._listeners)be.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(s){const d=this._map,p=d.getCanvasContainer();this._add("mapEvent",new Oh(d,s));const g=d.boxZoom=new pu(d,s);this._add("boxZoom",g),s.interactive&&s.boxZoom&&g.enable();const x=new Es(d),C=new vu(d);d.doubleClickZoom=new _u(C,x),this._add("tapZoom",x),this._add("clickZoom",C),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();const T=new Qn;this._add("tapDragZoom",T);const M=d.touchPitch=new Er(d);this._add("touchPitch",M),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);const A=Al(s),R=Ms(s);d.dragRotate=new ft(s,A,R),this._add("mouseRotate",A,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();const O=(({enable:ae,clickTolerance:fe})=>{const te=new mu({checkCorrectEvent:de=>0===be.mouseButton(de)&&!de.ctrlKey});return new is({clickTolerance:fe,move:(de,_e)=>({around:_e,panDelta:_e.sub(de)}),activateOnStart:!0,moveStateManager:te,enable:ae,assignEvents:ri})})(s),V=new Qe(s,d);d.dragPan=new Ye(p,O,V),this._add("mousePan",O),this._add("touchPan",V,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);const Z=new Jt,q=new Je;d.touchZoomRotate=new fn(p,q,Z,T),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",q,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate);const Q=d.scrollZoom=new fd(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Q,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);const $=d.keyboard=new jr(d);this._add("keyboard",$),s.interactive&&s.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new fo(d))}_add(s,d,p){this._handlers.push({handlerName:s,handler:d,allowed:p}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Mr(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,p){for(const g in s)if(g!==p&&(!d||d.indexOf(g)<0))return!0;return!1}_getMapTouches(s){const d=[];for(const p of s)this._el.contains(p.target)&&d.push(p);return d}mergeHandlerResult(s,d,p,g,x){if(!p)return;_.e(s,p);const C={handlerName:g,originalEvent:p.originalEvent||x};void 0!==p.zoomDelta&&(d.zoom=C),void 0!==p.panDelta&&(d.drag=C),void 0!==p.pitchDelta&&(d.pitch=C),void 0!==p.bearingDelta&&(d.rotate=C)}_applyChanges(){const s={},d={},p={};for(const[g,x,C]of this._changes)g.panDelta&&(s.panDelta=(s.panDelta||new _.P(0,0))._add(g.panDelta)),g.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+g.pitchDelta),void 0!==g.around&&(s.around=g.around),void 0!==g.pinchAround&&(s.pinchAround=g.pinchAround),g.noInertia&&(s.noInertia=g.noInertia),_.e(d,x),_.e(p,C);this._updateMapTransform(s,d,p),this._changes=[]}_updateMapTransform(s,d,p){const g=this._map,x=g._getTransformForUpdate(),C=g.terrain;if(!(xi(s)||C&&this._terrainMovement))return this._fireEvents(d,p,!0);let{panDelta:T,zoomDelta:M,bearingDelta:A,pitchDelta:R,around:O,pinchAround:V}=s;void 0!==V&&(O=V),g._stop(!0),O=O||g.transform.centerPoint;const Z=x.pointLocation(T?O.sub(T):O);A&&(x.bearing+=A),R&&(x.pitch+=R),M&&(x.zoom+=M),C?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(T)):x.setLocationAtPoint(Z,O):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(Z,O),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(Z,O),g._applyUpdatedTransform(x),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,p,!0)}_fireEvents(s,d,p){const g=Mr(this._eventsInProgress),x=Mr(s),C={};for(const R in s){const{originalEvent:O}=s[R];this._eventsInProgress[R]||(C[`${R}start`]=O),this._eventsInProgress[R]=s[R]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const R in C)this._fireEvent(R,C[R]);x&&this._fireEvent("move",x.originalEvent);for(const R in s){const{originalEvent:O}=s[R];this._fireEvent(R,O)}const T={};let M;for(const R in this._eventsInProgress){const{handlerName:O,originalEvent:V}=this._eventsInProgress[R];this._handlersById[O].isActive()||(delete this._eventsInProgress[R],M=d[O]||V,T[`${R}end`]=M)}for(const R in T)this._fireEvent(R,T[R]);const A=Mr(this._eventsInProgress);if(p&&(g||x)&&!A){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),O=V=>0!==V&&-this._bearingSnap<V&&V<this._bearingSnap;!R||!R.essential&&_.h.prefersReducedMotion?(this._map.fire(new _.k("moveend",{originalEvent:M})),O(this._map.getBearing())&&this._map.resetNorth()):(O(R.bearing||this._map.getBearing())&&(R.bearing=0),R.freezeElevation=!0,this._map.easeTo(R,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new _.k(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new La("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class li extends _.E{constructor(s,d){super(),this._renderFrameCallback=()=>{const p=Math.min((_.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new _.L(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,p){return s=_.P.convert(s).mult(-1),this.panTo(this.transform.center,_.e({offset:s},d),p)}panTo(s,d,p){return this.easeTo(_.e({center:s},d),p)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,p){return this.easeTo(_.e({zoom:s},d),p)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,p){return this.easeTo(_.e({bearing:s},d),p)}resetNorth(s,d){return this.rotateTo(0,_.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(_.e({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=Nn.convert(s);const p=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),p,d)}_cameraForBoxAndBearing(s,d,p,g){const x={top:0,bottom:0,right:0,left:0};if("number"==typeof(g=_.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding){const _e=g.padding;g.padding={top:_e,bottom:_e,right:_e,left:_e}}g.padding=_.e(x,g.padding);const C=this.transform,T=C.padding,M=C.project(_.L.convert(s)),A=C.project(_.L.convert(d)),R=M.rotate(-p*Math.PI/180),O=A.rotate(-p*Math.PI/180),V=new _.P(Math.max(R.x,O.x),Math.max(R.y,O.y)),Z=new _.P(Math.min(R.x,O.x),Math.min(R.y,O.y)),q=V.sub(Z),Q=(C.width-(T.left+T.right+g.padding.left+g.padding.right))/q.x,$=(C.height-(T.top+T.bottom+g.padding.top+g.padding.bottom))/q.y;if($<0||Q<0)return void _.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ae=Math.min(C.scaleZoom(C.scale*Math.min(Q,$)),g.maxZoom),fe=_.P.convert(g.offset),te=new _.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),de=fe.add(te).mult(C.scale/C.zoomScale(ae));return{center:C.unproject(M.add(A).div(2).sub(de)),zoom:ae,bearing:p}}fitBounds(s,d,p){return this._fitInternal(this.cameraForBounds(s,d),d,p)}fitScreenCoordinates(s,d,p,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(_.P.convert(s)),this.transform.pointLocation(_.P.convert(d)),p,g),g,x)}_fitInternal(s,d,p){return s?(delete(d=_.e(s,d)).padding,d.linear?this.easeTo(d,p):this.flyTo(d,p)):this}jumpTo(s,d){this.stop();const p=this._getTransformForUpdate();let g=!1,x=!1,C=!1;return"zoom"in s&&p.zoom!==+s.zoom&&(g=!0,p.zoom=+s.zoom),void 0!==s.center&&(p.center=_.L.convert(s.center)),"bearing"in s&&p.bearing!==+s.bearing&&(x=!0,p.bearing=+s.bearing),"pitch"in s&&p.pitch!==+s.pitch&&(C=!0,p.pitch=+s.pitch),null==s.padding||p.isPaddingEqual(s.padding)||(p.padding=s.padding),this._applyUpdatedTransform(p),this.fire(new _.k("movestart",d)).fire(new _.k("move",d)),g&&this.fire(new _.k("zoomstart",d)).fire(new _.k("zoom",d)).fire(new _.k("zoomend",d)),x&&this.fire(new _.k("rotatestart",d)).fire(new _.k("rotate",d)).fire(new _.k("rotateend",d)),C&&this.fire(new _.k("pitchstart",d)).fire(new _.k("pitch",d)).fire(new _.k("pitchend",d)),this.fire(new _.k("moveend",d))}calculateCameraOptionsFromTo(s,d,p,g=0){const x=_.U.fromLngLat(s,d),C=_.U.fromLngLat(p,g),T=C.x-x.x,M=C.y-x.y,A=C.z-x.z,R=Math.hypot(T,M,A);if(0===R)throw new Error("Can't calculate camera options with same From and To");const O=Math.hypot(T,M),V=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),Z=180*Math.atan2(T,-M)/Math.PI;let q=180*Math.acos(O/R)/Math.PI;return q=A<0?90-q:90+q,{center:C.toLngLat(),zoom:V,pitch:q,bearing:Z}}easeTo(s,d){this._stop(!1,s.easeId),(!1===(s=_.e({offset:[0,0],duration:500,easing:_.bb},s)).animate||!s.essential&&_.h.prefersReducedMotion)&&(s.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),C=this.getPitch(),T=this.getPadding(),M="zoom"in s?+s.zoom:g,A="bearing"in s?this._normalizeBearing(s.bearing,x):x,R="pitch"in s?+s.pitch:C,O="padding"in s?s.padding:p.padding,V=_.P.convert(s.offset);let Z=p.centerPoint.add(V);const q=p.pointLocation(Z),Q=_.L.convert(s.center||q);this._normalizeCenter(Q);const $=p.project(q),ae=p.project(Q).sub($),fe=p.zoomScale(M-g);let te,de;s.around&&(te=_.L.convert(s.around),de=p.locationPoint(te));const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==g,this._rotating=this._rotating||x!==A,this._pitching=this._pitching||R!==C,this._padding=!p.isPaddingEqual(O),this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,_e),this.terrain&&this._prepareElevation(Q),this._ease(ve=>{if(this._zooming&&(p.zoom=_.B.number(g,M,ve)),this._rotating&&(p.bearing=_.B.number(x,A,ve)),this._pitching&&(p.pitch=_.B.number(C,R,ve)),this._padding&&(p.interpolatePadding(T,O,ve),Z=p.centerPoint.add(V)),this.terrain&&!s.freezeElevation&&this._updateElevation(ve),te)p.setLocationAtPoint(te,de);else{const Ce=p.zoomScale(p.zoom-g),Ae=M>g?Math.min(2,fe):Math.max(.5,fe),Ie=Math.pow(Ae,1-ve),Le=p.unproject($.add(ae.mult(ve*Ie)).mult(Ce));p.setLocationAtPoint(p.renderWorldCopies?Le.wrap():Le,Z)}this._applyUpdatedTransform(p),this._fireMoveEvents(d)},ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,ve)},s),this}_prepareEase(s,d,p={}){this._moving=!0,d||p.moving||this.fire(new _.k("movestart",s)),this._zooming&&!p.zooming&&this.fire(new _.k("zoomstart",s)),this._rotating&&!p.rotating&&this.fire(new _.k("rotatestart",s)),this._pitching&&!p.pitching&&this.fire(new _.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(p-(d-(p*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.elevation=_.B.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(s){if(!this.transformCameraUpdate)return;const d=s.clone(),{center:p,zoom:g,pitch:x,bearing:C,elevation:T}=this.transformCameraUpdate(d);p&&(d.center=p),void 0!==g&&(d.zoom=g),void 0!==x&&(d.pitch=x),void 0!==C&&(d.bearing=C),void 0!==T&&(d.elevation=T),this.transform.apply(d)}_fireMoveEvents(s){this.fire(new _.k("move",s)),this._zooming&&this.fire(new _.k("zoom",s)),this._rotating&&this.fire(new _.k("rotate",s)),this._pitching&&this.fire(new _.k("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const p=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new _.k("zoomend",s)),g&&this.fire(new _.k("rotateend",s)),x&&this.fire(new _.k("pitchend",s)),this.fire(new _.k("moveend",s))}flyTo(s,d){if(!s.essential&&_.h.prefersReducedMotion){const ot=_.F(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ot,d)}this.stop(),s=_.e({offset:[0,0],speed:1.2,curve:1.42,easing:_.bb},s);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),C=this.getPitch(),T=this.getPadding(),M="zoom"in s?_.ad(+s.zoom,p.minZoom,p.maxZoom):g,A="bearing"in s?this._normalizeBearing(s.bearing,x):x,R="pitch"in s?+s.pitch:C,O="padding"in s?s.padding:p.padding,V=p.zoomScale(M-g),Z=_.P.convert(s.offset);let q=p.centerPoint.add(Z);const Q=p.pointLocation(q),$=_.L.convert(s.center||Q);this._normalizeCenter($);const ae=p.project(Q),fe=p.project($).sub(ae);let te=s.curve;const de=Math.max(p.width,p.height),_e=de/V,ve=fe.mag();if("minZoom"in s){const ot=_.ad(Math.min(s.minZoom,g,M),p.minZoom,p.maxZoom),_n=de/p.zoomScale(ot-g);te=Math.sqrt(_n/ve*2)}const Ce=te*te;function Ae(ot){const _n=(_e*_e-de*de+(ot?-1:1)*Ce*Ce*ve*ve)/(2*(ot?_e:de)*Ce*ve);return Math.log(Math.sqrt(_n*_n+1)-_n)}function Ie(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Le(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const $e=Ae(!1);let Nt=function(ot){return Le($e)/Le($e+te*ot)},Ne=function(ot){return de*((Le($e)*(Ie(_n=$e+te*ot)/Le(_n))-Ie($e))/Ce)/ve;var _n},ht=(Ae(!0)-$e)/te;if(Math.abs(ve)<1e-6||!isFinite(ht)){if(Math.abs(de-_e)<1e-6)return this.easeTo(s,d);const ot=_e<de?-1:1;ht=Math.abs(Math.log(_e/de))/te,Ne=function(){return 0},Nt=function(_n){return Math.exp(ot*te*_n)}}return s.duration="duration"in s?+s.duration:1e3*ht/("screenSpeed"in s?+s.screenSpeed/te:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=x!==A,this._pitching=R!==C,this._padding=!p.isPaddingEqual(O),this._prepareEase(d,!1),this.terrain&&this._prepareElevation($),this._ease(ot=>{const _n=ot*ht,zt=1/Nt(_n);p.zoom=1===ot?M:g+p.scaleZoom(zt),this._rotating&&(p.bearing=_.B.number(x,A,ot)),this._pitching&&(p.pitch=_.B.number(C,R,ot)),this._padding&&(p.interpolatePadding(T,O,ot),q=p.centerPoint.add(Z)),this.terrain&&!s.freezeElevation&&this._updateElevation(ot);const Tt=1===ot?$:p.unproject(ae.add(fe.mult(Ne(_n))).mult(zt));p.setLocationAtPoint(p.renderWorldCopies?Tt.wrap():Tt,q),this._applyUpdatedTransform(p),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,d)}if(!s){const p=this.handlers;p&&p.stop(!1)}return this}_ease(s,d,p){!1===p.animate||0===p.duration?(s(1),d()):(this._easeStart=_.h.now(),this._easeOptions=p,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=_.b5(s,-180,180);const p=Math.abs(s-d);return Math.abs(s-360-d)<p&&(s-=360),Math.abs(s+360-d)<p&&(s+=360),s}_normalizeCenter(s){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const p=s.lng-d.center.lng;s.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(_.L.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}class wi{constructor(s={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType&&"terrain"!==d.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options&&this.options.compact,this._container=be.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=be.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=be.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){be.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const p=this._map._getUIString(`AttributionControl.${d}`);s.title=p,s.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(g=>"string"!=typeof g?"":g)):"string"==typeof this.options.customAttribution&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const d=this._map.style.sourceCaches;for(const g in d){const x=d[g];if(x.used||x.usedForTerrain){const C=x.getSource();C.attribution&&s.indexOf(C.attribution)<0&&s.push(C.attribution)}}s=s.filter(g=>String(g).trim()),s.sort((g,x)=>g.length-x.length),s=s.filter((g,x)=>{for(let C=x+1;C<s.length;C++)if(s[C].indexOf(g)>=0)return!1;return!0});const p=s.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,s.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class gn{constructor(s={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const p=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=be.create("div","maplibregl-ctrl");const d=be.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){be.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class St{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,p=d?this._queue.concat(d):this._queue;for(const g of p)if(g.id===s)return void(g.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const p of d)if(!p.cancelled&&(p.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ba={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var yu=_.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Va extends _.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];const p={};for(const g of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),_.aS(g.posMatrix,0,_.N,0,_.N,0,1),this._tiles[g.key]=new Ta(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(s){for(const d in this._tiles){const p=this._tiles[d];(!s||p.tileID.equals(s)||p.tileID.isChildOf(s)||s.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const d={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(s.canonical)){const x=s.clone();x.posMatrix=new Float64Array(16),_.aS(x.posMatrix,0,_.N,0,_.N,0,1),d[p]=x}else if(g.canonical.isChildOf(s.canonical)){const x=s.clone();x.posMatrix=new Float64Array(16);const C=g.canonical.z-s.canonical.z,T=g.canonical.x-(g.canonical.x>>C<<C),M=g.canonical.y-(g.canonical.y>>C<<C),A=_.N>>C;_.aS(x.posMatrix,0,A,0,A,0,1),_.$(x.posMatrix,x.posMatrix,[-T*A,-M*A,0]),d[p]=x}else if(s.canonical.isChildOf(g.canonical)){const x=s.clone();x.posMatrix=new Float64Array(16);const C=s.canonical.z-g.canonical.z,T=s.canonical.x-(s.canonical.x>>C<<C),M=s.canonical.y-(s.canonical.y>>C<<C),A=_.N>>C;_.aS(x.posMatrix,0,_.N,0,_.N,0,1),_.$(x.posMatrix,x.posMatrix,[T*A,M*A,0]),_.a0(x.posMatrix,x.posMatrix,[1/2**C,1/2**C,0]),d[p]=x}}return d}getSourceTile(s,d){const p=this.sourceCache._source;let g=s.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!x||!x.dem)&&d)for(;g>=p.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(s.scaledTo(g--).key);return x}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=s)}}class ci{constructor(s,d,p){this.painter=s,this.sourceCache=new Va(d),this.options=p,this.exaggeration="number"==typeof p.exaggeration?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,p,g=_.N){var x;if(!(d>=0&&d<g&&p>=0&&p<g))return 0;const C=this.getTerrainData(s),T=null===(x=C.tile)||void 0===x?void 0:x.dem;if(!T)return 0;const M=((q=[])[0]=($=C.u_terrain_matrix)[0]*(ae=(Q=[d/g*_.N,p/g*_.N])[0])+$[4]*(fe=Q[1])+$[12],q[1]=$[1]*ae+$[5]*fe+$[13],q),A=[M[0]*T.dim,M[1]*T.dim],R=Math.floor(A[0]),O=Math.floor(A[1]),V=A[0]-R,Z=A[1]-O;var q,Q,$,ae,fe;return T.get(R,O)*(1-V)*(1-Z)+T.get(R+1,O)*V*(1-Z)+T.get(R,O+1)*(1-V)*Z+T.get(R+1,O+1)*V*Z}getElevationForLngLatZoom(s,d){const{tileID:p,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(p,g%_.N,x%_.N,_.N)}getElevation(s,d,p,g=_.N){return this.getDEMElevation(s,d,p,g)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const g=this.painter.context,x=new _.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Zn(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Zn(g,new _.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=_.ao([])}const d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const g=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new Zn(g,d.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),d.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const p=d&&d+d.tileID.key+s.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=g?x=s.canonical.z-g:_.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=s.canonical.x-(s.canonical.x>>x<<x),T=s.canonical.y-(s.canonical.y>>x<<x),M=_.bc(new Float64Array(16),[1/(_.N<<x),1/(_.N<<x),0]);_.$(M,M,[C*_.N,T*_.N,0]),this._demMatrixCache[s.key]={matrix:M,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){const d=this.painter,p=d.width/devicePixelRatio,g=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Zn(d.context,{width:p,height:g,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Zn(d.context,{width:p,height:g,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set("coords"===s?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,C=0;x<this._coordsTextureSize;x++)for(let T=0;T<this._coordsTextureSize;T++,C+=4)d[C+0]=255&T,d[C+1]=255&x,d[C+2]=T>>8<<4|x>>8,d[C+3]=0;const p=new _.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),g=new Zn(s,p,s.gl.RGBA,{premultiply:!1});return g.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(s){const d=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,d),p.bindFramebuffer.set(null);const x=d[0]+(d[2]>>4<<8),C=d[1]+((15&d[2])<<8),T=this.coordsIndex[255-d[3]],M=T&&this.sourceCache.getTileByID(T);if(!M)return null;const A=this._coordsTextureSize,R=(1<<M.tileID.canonical.z)*A;return new _.U((M.tileID.canonical.x*A+x)/R,(M.tileID.canonical.y*A+C)/R,this.getElevation(M.tileID,x,C,A))}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.painter.context,d=new _.bd,p=new _.b0,g=this.meshSize,x=_.N/g,C=g*g;for(let O=0;O<=g;O++)for(let V=0;V<=g;V++)d.emplaceBack(V*x,O*x,0);for(let O=0;O<C;O+=g+1)for(let V=0;V<g;V++)p.emplaceBack(V+O,g+V+O+1,g+V+O+2),p.emplaceBack(V+O,g+V+O+2,V+O+1);const T=d.length,M=T+2*(g+1);for(const O of[0,1])for(let V=0;V<=g;V++)for(const Z of[0,1])d.emplaceBack(V*x,O*_.N,Z);for(let O=0;O<2*g;O+=2)p.emplaceBack(M+O,M+O+1,M+O+3),p.emplaceBack(M+O,M+O+3,M+O+2),p.emplaceBack(T+O,T+O+3,T+O+1),p.emplaceBack(T+O,T+O+2,T+O+3);const A=d.length,R=A+2*(g+1);for(const O of[0,1])for(let V=0;V<=g;V++)for(const Z of[0,1])d.emplaceBack(O*_.N,V*x,Z);for(let O=0;O<2*g;O+=2)p.emplaceBack(A+O,A+O+1,A+O+3),p.emplaceBack(A+O,A+O+3,A+O+2),p.emplaceBack(R+O,R+O+3,R+O+1),p.emplaceBack(R+O,R+O+2,R+O+3);return this._mesh={indexBuffer:s.createIndexBuffer(p),vertexBuffer:s.createVertexBuffer(d,yu.members),segments:_.S.simpleSegment(0,0,d.length,p.length)},this._mesh}getMeshFrameDelta(s){return 2*Math.PI*_.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,d){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(s,d);return null!==(p=this.getMinMaxElevation(g).minElevation)&&void 0!==p?p:0}getMinMaxElevation(s){const d=this.getTerrainData(s).tile,p={minElevation:null,maxElevation:null};return d&&d.dem&&(p.minElevation=d.dem.min*this.exaggeration,p.maxElevation=d.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(s,d){const p=_.U.fromLngLat(s.wrap()),g=(1<<d)*_.N,x=p.x*g,C=p.y*g,T=Math.floor(x/_.N),M=Math.floor(C/_.N);return{tileID:new _.O(d,0,d,T,M),mercatorX:x,mercatorY:C}}}class wc{constructor(s,d,p){this._context=s,this._size=d,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Zn(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(p.texture),{id:s,fbo:d,texture:p,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>s.id!==d),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(s=>!s.inUse)}}const ki={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class no{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new wc(s.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(p=>!s._layers[p].isHidden(d)),this._coordsDescendingInv={};for(const p in s.sourceCaches){this._coordsDescendingInv[p]={};const g=s.sourceCaches[p].getVisibleCoordinates();for(const x of g){const C=this.terrain.sourceCache.getTerrainCoords(x);for(const T in C)this._coordsDescendingInv[p][T]||(this._coordsDescendingInv[p][T]=[]),this._coordsDescendingInv[p][T].push(C[T])}}this._coordsDescendingInvStr={};for(const p of s._order){const g=s._layers[p],x=g.source;if(ki[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const C in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][C]=this._coordsDescendingInv[x][C].map(T=>T.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][p.tileID.key];x&&x!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;const d=s.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(ki[d]&&(this._prevType&&ki[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(s.id),!g))return!0;if(ki[this._prevType]||ki[d]&&g){this._prevType=d;const x=this._stacks.length-1,C=this._stacks[x]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(un(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[x]){const A=this.pool.getObjectForId(T.rtt[x].id);if(A.stamp===T.rtt[x].stamp){this.pool.useObject(A);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),T.rtt[x]={id:M.id,stamp:M.stamp},p.context.bindFramebuffer.set(M.fbo.framebuffer),p.context.clear({color:_.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let A=0;A<C.length;A++){const R=p.style._layers[C[A]],O=R.source?this._coordsDescendingInv[R.source][T.tileID.key]:[T.tileID];p.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),p._renderTileClippingMasks(R,O),p.renderLayer(p,p.style.sourceCaches[R.source],R,O),R.source&&(T.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][T.tileID.key])}}return un(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ki[d]}return!1}}const ut={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:_.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},_o=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},zo={showCompass:!0,showZoom:!0,visualizePitch:!1};class ja{constructor(s,d,p=!1){this.mousedown=C=>{this.startMouse(_.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),be.mousePos(this.element,C)),be.addEventListener(window,"mousemove",this.mousemove),be.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,be.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{1!==C.targetTouches.length?this.reset():(this._startPos=this._lastPos=be.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),be.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),be.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{1!==C.targetTouches.length?this.reset():(this._lastPos=be.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{0===C.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=s.dragRotate._mouseRotate.getClickTolerance(),x=s.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Al({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:T,bearingDegreesPerPixelMoved:M=.8})=>{const A=new Fh;return new is({clickTolerance:T,move:(R,O)=>({bearingDelta:(O.x-R.x)*M}),moveStateManager:A,enable:C,assignEvents:_o})})({clickTolerance:g,enable:!0}),this.map=s,p&&(this.mousePitch=Ms({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:T,pitchDegreesPerPixelMoved:M=-.5})=>{const A=new Fh;return new is({clickTolerance:T,move:(R,O)=>({pitchDelta:(O.y-R.y)*M}),moveStateManager:A,enable:C,assignEvents:_o})})({clickTolerance:x,enable:!0})),be.addEventListener(d,"mousedown",this.mousedown),be.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),be.addEventListener(d,"touchcancel",this.reset)}startMouse(s,d){this.mouseRotate.dragStart(s,d),this.mousePitch&&this.mousePitch.dragStart(s,d),be.disableDrag()}startTouch(s,d){this.touchRotate.dragStart(s,d),this.touchPitch&&this.touchPitch.dragStart(s,d),be.disableDrag()}moveMouse(s,d){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(s,d)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(s,d)||{};x&&p.setPitch(p.getPitch()+x)}}moveTouch(s,d){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(s,d)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(s,d)||{};x&&p.setPitch(p.getPitch()+x)}}off(){const s=this.element;be.removeEventListener(s,"mousedown",this.mousedown),be.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),be.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),be.removeEventListener(window,"touchend",this.touchend),be.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){be.enableDrag(),be.removeEventListener(window,"mousemove",this.mousemove),be.removeEventListener(window,"mouseup",this.mouseup),be.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),be.removeEventListener(window,"touchend",this.touchend)}}let Gn;function $t(v,s,d){if(v=new _.L(v.lng,v.lat),s){const p=new _.L(v.lng-360,v.lat),g=new _.L(v.lng+360,v.lat),x=d.locationPoint(v).distSqr(s);d.locationPoint(p).distSqr(s)<x?v=p:d.locationPoint(g).distSqr(s)<x&&(v=g)}for(;Math.abs(v.lng-d.center.lng)>180;){const p=d.locationPoint(v);if(p.x>=0&&p.y>=0&&p.x<=d.width&&p.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v}const Lo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gd(v,s,d){const p=v.classList;for(const g in Lo)p.remove(`maplibregl-${d}-anchor-${g}`);p.add(`maplibregl-${d}-anchor-${s}`)}class oa extends _.E{constructor(s){if(super(),this._onKeyPress=d=>{const p=d.code,g=d.charCode||d.keyCode;"Space"!==p&&"Enter"!==p&&32!==g&&13!==g||this.togglePopup()},this._onMapClick=d=>{const p=d.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();("terrain"===d?.type||"render"===d?.type&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=$t(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?g=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?x="rotateX(0deg)":"map"===this._pitchAlignment&&(x=`rotateX(${this._map.getPitch()}deg)`),d&&"moveend"!==d.type||(this._pos=this._pos.round()),be.setTransform(this._element,`${Lo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),T=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*T?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new _.k("dragstart"))),this.fire(new _.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new _.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&"auto"!==s.pitchAlignment?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=_.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=be.create("div"),this._element.setAttribute("aria-label","Map marker");const d=be.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${p}px`),d.setAttributeNS(null,"width",`${g}px`),d.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const x=be.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const C=be.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const T=be.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ae of M){const fe=be.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ae.rx),fe.setAttributeNS(null,"ry",ae.ry),T.appendChild(fe)}const A=be.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill",this._color);const R=be.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),A.appendChild(R);const O=be.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"opacity","0.25"),O.setAttributeNS(null,"fill","#000000");const V=be.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),O.appendChild(V);const Z=be.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");const q=be.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Q=be.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#000000"),Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962");const $=be.createNS("http://www.w3.org/2000/svg","circle");$.setAttributeNS(null,"fill","#FFFFFF"),$.setAttributeNS(null,"cx","5.5"),$.setAttributeNS(null,"cy","5.5"),$.setAttributeNS(null,"r","5.4999962"),q.appendChild(Q),q.appendChild($),C.appendChild(T),C.appendChild(A),C.appendChild(O),C.appendChild(Z),C.appendChild(q),d.appendChild(C),d.setAttributeNS(null,"height",p*this._scale+"px"),d.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(d),this._offset=_.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),gd(this._element,this._anchor,"marker"),s&&s.className)for(const d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),be.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=_.L.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const g=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(24.6+g)],"bottom-right":[-g,-1*(24.6+g)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=s,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?s.remove():s.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(s){return this._offset=_.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&"auto"!==s?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let An=0,Bo=!1;const Ds={maxWidth:100,unit:"metric"};function fi(v,s,d){const p=d&&d.maxWidth||100,g=v._container.clientHeight/2,x=v.unproject([0,g]),C=v.unproject([p,g]),T=x.distanceTo(C);if(d&&"imperial"===d.unit){const M=3.2808*T;M>5280?Pl(s,p,M/5280,v._getUIString("ScaleControl.Miles")):Pl(s,p,M,v._getUIString("ScaleControl.Feet"))}else d&&"nautical"===d.unit?Pl(s,p,T/1852,v._getUIString("ScaleControl.NauticalMiles")):T>=1e3?Pl(s,p,T/1e3,v._getUIString("ScaleControl.Kilometers")):Pl(s,p,T,v._getUIString("ScaleControl.Meters"))}function Pl(v,s,d,p){const g=function(x){const C=Math.pow(10,`${Math.floor(x)}`.length-1);let T=x/C;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(M){const A=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*A)/A}(T),C*T}(d);v.style.width=s*(g/d)+"px",v.innerHTML=`${g}&nbsp;${p}`}const cr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ji=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function sa(v){if(v){if("number"==typeof v){const s=Math.round(Math.abs(v)/Math.SQRT2);return{center:new _.P(0,0),top:new _.P(0,v),"top-left":new _.P(s,s),"top-right":new _.P(-s,s),bottom:new _.P(0,-v),"bottom-left":new _.P(s,-s),"bottom-right":new _.P(-s,-s),left:new _.P(v,0),right:new _.P(-v,0)}}if(v instanceof _.P||Array.isArray(v)){const s=_.P.convert(v);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:_.P.convert(v.center||[0,0]),top:_.P.convert(v.top||[0,0]),"top-left":_.P.convert(v["top-left"]||[0,0]),"top-right":_.P.convert(v["top-right"]||[0,0]),bottom:_.P.convert(v.bottom||[0,0]),"bottom-left":_.P.convert(v["bottom-left"]||[0,0]),"bottom-right":_.P.convert(v["bottom-right"]||[0,0]),left:_.P.convert(v.left||[0,0]),right:_.P.convert(v.right||[0,0])}}return sa(new _.P(0,0))}const Is={extend:(v,...s)=>_.e(v,...s),run(v){v()},logToElement(v,s=!1,d="log"){const p=window.document.getElementById(d);p&&(s&&(p.innerHTML=""),p.innerHTML+=`<br>${v}`)}};class Ft{static get version(){return"3.5.2"}static get workerCount(){return co.workerCount}static set workerCount(s){co.workerCount=s}static get maxParallelImageRequests(){return _.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(s){_.c.MAX_PARALLEL_IMAGE_REQUESTS=s}static get workerUrl(){return _.c.WORKER_URL}static set workerUrl(s){_.c.WORKER_URL=s}static addProtocol(s,d){_.c.REGISTERED_PROTOCOLS[s]=d}static removeProtocol(s){delete _.c.REGISTERED_PROTOCOLS[s]}}return Ft.Map=class extends li{constructor(v){if(_.bf.mark(_.bg.create),null!=(v=_.e({},ut,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new xc(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._cooperativeGesturesOnWheel=s=>{this._onCooperativeGesture(s,s[this._metaKey],1)},this._contextLost=s=>{s.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new _.k("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new _.k("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._cooperativeGestures=v.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new St,this._controls=[],this._mapId=_.a2(),this._locale=_.e({},Ba,v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=kr.addThrottleControl(()=>this.isMoving()),this._requestManager=new nd(v.transformRequest),"string"==typeof v.container){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const d=Tr(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{s?d(p):s=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ra(this,v),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=v.hash&&new Ss("string"==typeof v.hash&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,_.e({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new wi({customAttribution:v.customAttribution})),v.maplibreLogo&&this.addControl(new gn,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update("style"===s.dataType),this.fire(new _.k(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new _.k(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new _.k("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(v,s){if(void 0===s&&(s=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new _.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[s];return-1!==s.indexOf("bottom")?p.insertBefore(d,p.firstChild):p.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new _.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(v);return s>-1&&this._controls.splice(s,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,s,d,p){return null==p&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,s,d,p)}resize(v){var s;const d=this._containerDimensions(),p=d[0],g=d[1],x=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,x),this.painter.resize(p,g,x),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const M=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,M),this.painter.resize(p,g,M)}this.transform.resize(p,g),null===(s=this._requestedCameraState)||void 0===s||s.resize(p,g);const C=!this._moving;return C&&(this.stop(),this.fire(new _.k("movestart",v)).fire(new _.k("move",v))),this.fire(new _.k("resize",v)),C&&this.fire(new _.k("moveend",v)),this}_getClampedPixelRatio(v,s){const{0:d,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),x=v*g,C=s*g;return Math.min(x>d?d/x:1,C>p?p/C:1)*g}getPixelRatio(){var v;return null!==(v=this._overridePixelRatio)&&void 0!==v?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Nn.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(v){return this.transform.locationPoint(_.L.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(_.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||(null===(v=this.handlers)||void 0===v?void 0:v.isMoving())}isZooming(){var v;return this._zooming||(null===(v=this.handlers)||void 0===v?void 0:v.isZooming())}isRotating(){var v;return this._rotating||(null===(v=this.handlers)||void 0===v?void 0:v.isRotating())}_createDelegatedListener(v,s,d){if("mouseenter"===v||"mouseover"===v){let p=!1;return{layer:s,listener:d,delegates:{mousemove:x=>{const C=this.getLayer(s)?this.queryRenderedFeatures(x.point,{layers:[s]}):[];C.length?p||(p=!0,d.call(this,new to(v,this,x.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if("mouseleave"===v||"mouseout"===v){let p=!1;return{layer:s,listener:d,delegates:{mousemove:C=>{(this.getLayer(s)?this.queryRenderedFeatures(C.point,{layers:[s]}):[]).length?p=!0:p&&(p=!1,d.call(this,new to(v,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,d.call(this,new to(v,this,C.originalEvent)))}}}}{const p=g=>{const x=this.getLayer(s)?this.queryRenderedFeatures(g.point,{layers:[s]}):[];x.length&&(g.features=x,d.call(this,g),delete g.features)};return{layer:s,listener:d,delegates:{[v]:p}}}}on(v,s,d){if(void 0===d)return super.on(v,s);const p=this._createDelegatedListener(v,s,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(v,s,d){if(void 0===d)return super.once(v,s);const p=this._createDelegatedListener(v,s,d);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(v,s,d){return void 0===d?super.off(v,s):(this._delegatedListeners&&this._delegatedListeners[v]&&(p=>{const g=this._delegatedListeners[v];for(let x=0;x<g.length;x++){const C=g[x];if(C.layer===s&&C.listener===d){for(const T in C.delegates)this.off(T,C.delegates[T]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(v,s){if(!this.style)return[];let d;const p=v instanceof _.P||Array.isArray(v),g=p?v:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(p?{}:v)||{},g instanceof _.P||"number"==typeof g[0])d=[_.P.convert(g)];else{const x=_.P.convert(g[0]),C=_.P.convert(g[1]);d=[x,new _.P(C.x,x.y),C,new _.P(x.x,C.y),x]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(v,s){return this.style.querySourceFeatures(v,s)}setStyle(v,s){return!1!==(s=_.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(v,s))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const s=this._locale[v];if(null==s)throw new Error(`Missing UI string '${v}'`);return s}_updateStyle(v,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,s));const d=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Xi(this,s||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof v?this.style.loadURL(v,s,d):this.style.loadJSON(v,s,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Xi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,s){if("string"==typeof v){const d=this._requestManager.transformRequest(v,bi.Style);_.f(d,(p,g)=>{p?this.fire(new _.j(p)):g&&this._updateDiff(g,s)})}else"object"==typeof v&&this._updateDiff(v,s)}_updateDiff(v,s){try{this.style.setState(v,s)&&this._update(!0)}catch(d){_.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(v,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():_.w("There is no style added to the map.")}addSource(v,s){return this._lazyInitEmptyStyle(),this.style.addSource(v,s),this._update(!0)}isSourceLoaded(v){const s=this.style&&this.style.sourceCaches[v];if(void 0!==s)return s.loaded();this.fire(new _.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const s=this.style.sourceCaches[v.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);for(const d in this.style._layers){const p=this.style._layers[d];"hillshade"===p.type&&p.source===v.source&&_.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ci(this.painter,s,v),this.painter.renderToTexture=new no(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{"style"===d.dataType?this.terrain.sourceCache.freeRtt():"source"===d.dataType&&d.tile&&(d.sourceId!==v.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new _.k("terrain",{terrain:v})),this}getTerrain(){var v,s;return null!==(s=null===(v=this.terrain)||void 0===v?void 0:v.options)&&void 0!==s?s:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const s in v){const d=v[s]._tiles;for(const p in d){const g=d[p];if("loaded"!==g.state&&"errored"!==g.state)return!1}}return!0}addSourceType(v,s,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,s,d)}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,s,d={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:x,stretchY:C,content:T}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||_.a(s))){if(void 0===s.width||void 0===s.height)return this.fire(new _.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:M,height:A,data:R}=s,O=s;return this.style.addImage(v,{data:new _.R({width:M,height:A},new Uint8Array(R)),pixelRatio:p,stretchX:x,stretchY:C,content:T,sdf:g,version:0,userImage:O}),O.onAdd&&O.onAdd(this,v),this}}{const{width:M,height:A,data:R}=_.h.getImageData(s);this.style.addImage(v,{data:new _.R({width:M,height:A},R),pixelRatio:p,stretchX:x,stretchY:C,content:T,sdf:g,version:0})}}updateImage(v,s){const d=this.style.getImage(v);if(!d)return this.fire(new _.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=s instanceof HTMLImageElement||_.a(s)?_.h.getImageData(s):s,{width:g,height:x,data:C}=p;if(void 0===g||void 0===x)return this.fire(new _.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==d.data.width||x!==d.data.height)return this.fire(new _.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(s instanceof HTMLImageElement||_.a(s));return d.data.replace(C,T),this.style.updateImage(v,d),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new _.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,s){kr.getImage(this._requestManager.transformRequest(v,bi.Image),s)}listImages(){return this.style.listImages()}addLayer(v,s){return this._lazyInitEmptyStyle(),this.style.addLayer(v,s),this._update(!0)}moveLayer(v,s){return this.style.moveLayer(v,s),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,s,d){return this.style.setLayerZoomRange(v,s,d),this._update(!0)}setFilter(v,s,d={}){return this.style.setFilter(v,s,d),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,s,d,p={}){return this.style.setPaintProperty(v,s,d,p),this._update(!0)}getPaintProperty(v,s){return this.style.getPaintProperty(v,s)}setLayoutProperty(v,s,d,p={}){return this.style.setLayoutProperty(v,s,d,p),this._update(!0)}getLayoutProperty(v,s){return this.style.getLayoutProperty(v,s)}setGlyphs(v,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,s,d,p=>{p||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,s,d=>{d||this._update(!0)}),this}setLight(v,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,s),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,s){return this.style.setFeatureState(v,s),this._update()}removeFeatureState(v,s){return this.style.removeFeatureState(v,s),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,s=0;return this._container&&(v=this._container.clientWidth||400,s=this._container.clientHeight||300),[v,s]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const s=this._canvasContainer=be.create("div","maplibregl-canvas-container",v);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=be.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),p=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],p);const g=this._controlContainer=be.create("div","maplibregl-control-container",v),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{x[C]=be.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=be.create("div","maplibregl-cooperative-gesture-screen",this._container);let v="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(v="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${v}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){be.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(v,s,d){this._canvas.width=Math.floor(d*v),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let s=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{s={requestedAttributes:v},p&&(s.statusMessage=p.statusMessage,s.type=p.type)},{once:!0});const d=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!d){const p="Failed to initialize WebGL";throw s?(s.message=p,new Error(JSON.stringify(s))):new Error(p)}this.painter=new Wt(d,this.transform),Eo.testSupport(d)}_onCooperativeGesture(v,s,d){return!s&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=_.h.now();this.style.zoomHistory.update(g,x);const C=new _.a8(g,{now:x,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=C.crossFadingFactor();1===T&&T===this._crossFadingFactor||(d=!0,this._crossFadingFactor=T),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new _.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,_.bf.mark(_.bg.load),this.fire(new _.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new _.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,_.bf.mark(_.bg.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),kr.removeThrottleControl(this._imageQueueHandle),null===(v=this._resizeObserver)||void 0===v||v.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),be.remove(this._canvasContainer),be.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),_.bf.clearMetrics(),this._removed=!0,this.fire(new _.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=_.h.frame(v=>{_.bf.frame(v),this._frame=null,this._render(v)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return"3.5.2"}getCameraTargetElevation(){return this.transform.elevation}},Ft.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const s=this._map.getZoom(),d=s===this._map.getMaxZoom(),p=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,d)=>{const p=this._map._getUIString(`NavigationControl.${d}`);s.title=p,s.setAttribute("aria-label",p)},this.options=_.e({},zo,v),this._container=be.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),be.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),be.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=be.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ja(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){be.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,s){const d=be.create("button",v,this._container);return d.type="button",d.addEventListener("click",s),d}},Ft.GeolocateControl=class extends _.E{constructor(v){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new _.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(s),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new _.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{const d=new _.L(s.coords.longitude,s.coords.latitude),p=s.coords.accuracy,g=this._map.getBearing(),x=_.e({bearing:g},this.options.fitBoundsOptions),C=Nn.fromLngLat(d,p);this._map.fitBounds(C,x,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const d=new _.L(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(1===s.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===s.code&&Bo)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new _.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=s=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=be.create("button","maplibregl-ctrl-geolocate",this._container),be.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===s){_.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=be.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new oa({element:this._dotElement}),this._circleElement=be.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||"ACTIVE_LOCK"!==this._watchState||d.originalEvent&&"resize"===d.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new _.k("trackuserlocationend")))})}},this.options=_.e({},hn,v)}onAdd(v){return this._map=v,this._container=be.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(s,d=!1){void 0===Gn||d?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(p=>{Gn="denied"!==p.state,s(Gn)}).catch(()=>{Gn=!!window.navigator.geolocation,s(Gn)}):(Gn=!!window.navigator.geolocation,s(Gn)):s(Gn)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),be.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,An=0,Bo=!1}_isOutOfMapMaxBounds(v){const s=this._map.getMaxBounds(),d=v.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),s=v.getSouthEast(),d=v.getNorthEast(),p=s.distanceTo(d),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return _.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new _.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":An--,Bo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new _.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new _.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),An++,An>1?(v={maximumAge:6e5,timeout:0},Bo=!0):(v=this.options.positionOptions,Bo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Ft.AttributionControl=wi,Ft.LogoControl=gn,Ft.ScaleControl=class{constructor(v){this._onMove=()=>{fi(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,fi(this._map,this._container,this.options)},this.options=_.e({},Ds,v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=be.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){be.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Ft.FullscreenControl=class extends _.E{constructor(v={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:_.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=be.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){be.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=be.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);be.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new _.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new _.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Ft.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=v}onAdd(v){return this._map=v,this._container=be.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=be.create("button","maplibregl-ctrl-terrain",this._container),be.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){be.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Ft.Popup=class extends _.E{constructor(v){super(),this.remove=()=>(this._content&&be.remove(this._content),this._container&&(be.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new _.k("close")),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=be.create("div","maplibregl-popup",this._map.getContainer()),this._tip=be.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=$t(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!s)return;const d=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);let p=this.options.anchor;const g=sa(this.options.offset);if(!p){const C=this._container.offsetWidth,T=this._container.offsetHeight;let M;M=d.y+g.bottom.y<T?["top"]:d.y>this._map.transform.height-T?["bottom"]:[],d.x<C/2?M.push("left"):d.x>this._map.transform.width-C/2&&M.push("right"),p=0===M.length?"bottom":M.join("-")}const x=d.add(g[p]).round();be.setTransform(this._container,`${Lo[p]} translate(${x.x}px,${x.y}px)`),gd(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=_.e(Object.create(cr),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new _.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=_.L.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const s=document.createDocumentFragment(),d=document.createElement("body");let p;for(d.innerHTML=v;p=d.firstChild,p;)s.appendChild(p);return this.setDOMContent(s)}getMaxWidth(){var v;return null===(v=this._container)||void 0===v?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=be.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}_createCloseButton(){this.options.closeButton&&(this._closeButton=be.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Ji);v&&v.focus()}},Ft.Marker=oa,Ft.Style=Xi,Ft.LngLat=_.L,Ft.LngLatBounds=Nn,Ft.Point=_.P,Ft.MercatorCoordinate=_.U,Ft.Evented=_.E,Ft.AJAXError=_.bh,Ft.config=_.c,Ft.CanvasSource=es,Ft.GeoJSONSource=Mn,Ft.ImageSource=ao,Ft.RasterDEMTileSource=Sa,Ft.RasterTileSource=ka,Ft.VectorTileSource=Zt,Ft.VideoSource=Dt,Ft.setRTLTextPlugin=_.bi,Ft.getRTLTextPluginStatus=_.bj,Ft.prewarm=function(){rc().acquire(rn)},Ft.clearPrewarmedResources=function(){const v=Ao;v&&(v.isPreloaded()&&1===v.numActive()?(v.release(rn),Ao=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Is.extend(Ft,{isSafari:_.ac,getPerformanceMetrics:_.bf.getPerformanceMetrics}),Ft}),nn}()}},dm=>{dm(dm.s=496)}]);