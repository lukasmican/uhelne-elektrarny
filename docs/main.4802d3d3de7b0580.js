(self.webpackChunkhvt_uhelne_elektrarny=self.webpackChunkhvt_uhelne_elektrarny||[]).push([[179],{135:(lm,Jc,ed)=>{"use strict";function tn(t){return"function"==typeof t}function Jd(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const cm=Jd(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function _(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class En{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(tn(i))try{i()}catch(a){n=a instanceof cm?a.errors:[a]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const a of r)try{xr(a)}catch(u){n=n??[],u instanceof cm?n=[...n,...u.errors]:n.push(u)}}if(n)throw new cm(n)}}add(n){var e;if(n&&n!==this)if(this.closed)xr(n);else{if(n instanceof En){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&_(e,n)}remove(n){const{_finalizers:e}=this;e&&_(e,n),n instanceof En&&n._removeParent(this)}}En.EMPTY=(()=>{const t=new En;return t.closed=!0,t})();const be=En.EMPTY;function Eo(t){return t instanceof En||t&&"closed"in t&&tn(t.remove)&&tn(t.add)&&tn(t.unsubscribe)}function xr(t){tn(t)?t():t.unsubscribe()}const ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},vs={setTimeout(t,n,...e){const{delegate:i}=vs;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=vs;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function pl(t){vs.setTimeout(()=>{const{onUnhandledError:n}=ct;if(!n)throw t;n(t)})}function Zs(){}const wr=Qo("C",void 0,void 0);function Qo(t,n,e){return{kind:t,value:n,error:e}}let Mo=null;function ys(t){if(ct.useDeprecatedSynchronousErrorHandling){const n=!Mo;if(n&&(Mo={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=Mo;if(Mo=null,e)throw i}}else t()}class wa extends En{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Eo(n)&&n.add(this)):this.destination=Xr}static create(n,e,i){return new Jo(n,e,i)}next(n){this.isStopped?Wi(function td(t){return Qo("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Wi(function xi(t){return Qo("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Wi(wr,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $i=Function.prototype.bind;function ml(t,n){return $i.call(t,n)}class Zn{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){zr(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){zr(i)}else zr(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){zr(e)}}}class Jo extends wa{constructor(n,e,i){let r;if(super(),tn(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let a;this&&ct.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&ml(n.next,a),error:n.error&&ml(n.error,a),complete:n.complete&&ml(n.complete,a)}):r=n}this.destination=new Zn(r)}}function zr(t){ct.useDeprecatedSynchronousErrorHandling?function Yo(t){ct.useDeprecatedSynchronousErrorHandling&&Mo&&(Mo.errorThrown=!0,Mo.error=t)}(t):pl(t)}function Wi(t,n){const{onStoppedNotification:e}=ct;e&&vs.setTimeout(()=>e(t,n))}const Xr={closed:!0,next:Zs,error:function Ks(t){throw t},complete:Zs},Do="function"==typeof Symbol&&Symbol.observable||"@@observable";function Di(t){return t}function fl(t){return 0===t.length?Di:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}let yn=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const a=function Nn(t){return t&&t instanceof wa||function es(t){return t&&tn(t.next)&&tn(t.error)&&tn(t.complete)}(t)&&Eo(t)}(e)?e:new Jo(e,i,r);return ys(()=>{const{operator:u,source:f}=this;a.add(u?u.call(a,f):f?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=gl(i))((r,a)=>{const u=new Jo({next:f=>{try{e(f)}catch(b){a(b),u.unsubscribe()}},error:a,complete:r});this.subscribe(u)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Do](){return this}pipe(...e){return fl(e)(this)}toPromise(e){return new(e=gl(e))((i,r)=>{let a;this.subscribe(u=>a=u,u=>r(u),()=>i(a))})}}return t.create=n=>new t(n),t})();function gl(t){var n;return null!==(n=t??ct.Promise)&&void 0!==n?n:Promise}const Br=Jd(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Zt=(()=>{class t extends yn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Ca(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new Br}next(e){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:a}=this;return i||r?be:(this.currentObservers=null,a.push(e),new En(()=>{this.currentObservers=null,_(a,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){const e=new yn;return e.source=this,e}}return t.create=(n,e)=>new Ca(n,e),t})();class Ca extends Zt{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:be}}function Ta(t){return tn(t?.lift)}function Mn(t){return n=>{if(Ta(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function sn(t,n,e,i,r){return new lo(t,n,e,i,r)}class lo extends wa{constructor(n,e,i,r,a,u){super(n),this.onFinalize=a,this.shouldUnsubscribe=u,this._next=e?function(f){try{e(f)}catch(b){n.error(b)}}:super._next,this._error=r?function(f){try{r(f)}catch(b){n.error(b)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function It(t,n){return Mn((e,i)=>{let r=0;e.subscribe(sn(i,a=>{i.next(t.call(n,a,r++))}))})}function Fe(t){return this instanceof Fe?(this.v=t,this):new Fe(t)}function Ys(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function Ao(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=t[a]&&function(u){return new Promise(function(f,b){!function r(a,u,f,b){Promise.resolve(b).then(function(S){a({value:S,done:f})},u)}(f,b,(u=t[a](u)).done,u.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const G=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Y(t){return tn(t?.then)}function ee(t){return tn(t[Do])}function he(t){return Symbol.asyncIterator&&tn(t?.[Symbol.asyncIterator])}function se(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ce=function ie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ce(t){return tn(t?.[ce])}function ke(t){return function Po(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),a=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(H){i[H]&&(r[H]=function(K){return new Promise(function(re,ue){a.push([H,K,re,ue])>1||f(H,K)})})}function f(H,K){try{!function b(H){H.value instanceof Fe?Promise.resolve(H.value.v).then(S,D):N(a[0][2],H)}(i[H](K))}catch(re){N(a[0][3],re)}}function S(H){f("next",H)}function D(H){f("throw",H)}function N(H,K){H(K),a.shift(),a.length&&f(a[0][0],a[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield Fe(e.read());if(r)return yield Fe(void 0);yield yield Fe(i)}}finally{e.releaseLock()}})}function Me(t){return tn(t?.getReader)}function Xe(t){if(t instanceof yn)return t;if(null!=t){if(ee(t))return function _t(t){return new yn(n=>{const e=t[Do]();if(tn(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(G(t))return function it(t){return new yn(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Y(t))return function dt(t){return new yn(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,pl)})}(t);if(he(t))return an(t);if(Ce(t))return function wt(t){return new yn(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(Me(t))return function xn(t){return an(ke(t))}(t)}throw se(t)}function an(t){return new yn(n=>{(function Yt(t,n){var e,i,r,a;return function bn(t,n,e,i){return new(e||(e=Promise))(function(a,u){function f(D){try{S(i.next(D))}catch(N){u(N)}}function b(D){try{S(i.throw(D))}catch(N){u(N)}}function S(D){D.done?a(D.value):function r(a){return a instanceof e?a:new e(function(u){u(a)})}(D.value).then(f,b)}S((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Ys(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(u){r={error:u}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function At(t,n,e,i=0,r=!1){const a=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function Ft(t,n,e=1/0){return tn(n)?Ft((i,r)=>It((a,u)=>n(i,a,r,u))(Xe(t(i,r))),e):("number"==typeof n&&(e=n),Mn((i,r)=>function rr(t,n,e,i,r,a,u,f){const b=[];let S=0,D=0,N=!1;const H=()=>{N&&!b.length&&!S&&n.complete()},K=ue=>S<i?re(ue):b.push(ue),re=ue=>{a&&n.next(ue),S++;let we=!1;Xe(e(ue,D++)).subscribe(sn(n,De=>{r?.(De),a?K(De):n.next(De)},()=>{we=!0},void 0,()=>{if(we)try{for(S--;b.length&&S<i;){const De=b.shift();u?At(n,u,()=>re(De)):re(De)}H()}catch(De){n.error(De)}}))};return t.subscribe(sn(n,K,()=>{N=!0,H()})),()=>{f?.()}}(i,r,t,e)))}function Hn(t=1/0){return Ft(Di,t)}const Ln=new yn(t=>t.complete());function Da(t){return t&&tn(t.schedule)}function Js(t){return t[t.length-1]}function vh(t){return tn(Js(t))?t.pop():void 0}function rn(t){return Da(Js(t))?t.pop():void 0}function nc(t,n=0){return Mn((e,i)=>{e.subscribe(sn(i,r=>At(i,t,()=>i.next(r),n),()=>At(i,t,()=>i.complete(),n),r=>At(i,t,()=>i.error(r),n)))})}function qi(t,n=0){return Mn((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function ic(t,n){if(!t)throw new Error("Iterable cannot be null");return new yn(e=>{At(e,n,()=>{const i=t[Symbol.asyncIterator]();At(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function yt(t,n){return n?function Kn(t,n){if(null!=t){if(ee(t))return function Yr(t,n){return Xe(t).pipe(qi(n),nc(n))}(t,n);if(G(t))return function ho(t,n){return new yn(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(Y(t))return function dm(t,n){return Xe(t).pipe(qi(n),nc(n))}(t,n);if(he(t))return ic(t,n);if(Ce(t))return function Zi(t,n){return new yn(e=>{let i;return At(e,n,()=>{i=t[ce](),At(e,n,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(u){return void e.error(u)}a?e.complete():e.next(r)},0,!0)}),()=>tn(i?.return)&&i.return()})}(t,n);if(Me(t))return function xl(t,n){return ic(ke(t),n)}(t,n)}throw se(t)}(t,n):Xe(t)}function ws(...t){const n=rn(t),e=function eu(t,n){return"number"==typeof Js(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?Xe(i[0]):Hn(e)(yt(i,n)):Ln}class en extends Zt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function mt(...t){return yt(t,rn(t))}function Vr(t={}){const{connector:n=(()=>new Zt),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return a=>{let u,f,b,S=0,D=!1,N=!1;const H=()=>{f?.unsubscribe(),f=void 0},K=()=>{H(),u=b=void 0,D=N=!1},re=()=>{const ue=u;K(),ue?.unsubscribe()};return Mn((ue,we)=>{S++,!N&&!D&&H();const De=b=b??n();we.add(()=>{S--,0===S&&!N&&!D&&(f=rc(re,r))}),De.subscribe(we),!u&&S>0&&(u=new Jo({next:ye=>De.next(ye),error:ye=>{N=!0,H(),f=rc(K,e,ye),De.error(ye)},complete:()=>{D=!0,H(),f=rc(K,i),De.complete()}}),Xe(ue).subscribe(u))})(a)}}function rc(t,n,...e){if(!0===n)return void t();if(!1===n)return;const i=new Jo({next:()=>{i.unsubscribe(),t()}});return Xe(n(...e)).subscribe(i)}function Ki(t,n){return Mn((e,i)=>{let r=null,a=0,u=!1;const f=()=>u&&!r&&i.complete();e.subscribe(sn(i,b=>{r?.unsubscribe();let S=0;const D=a++;Xe(t(b,D)).subscribe(r=sn(i,N=>i.next(n?n(b,N,D,S++):N),()=>{r=null,f()}))},()=>{u=!0,f()}))})}function nd(t,n=Di){return t=t??tu,Mn((e,i)=>{let r,a=!0;e.subscribe(sn(i,u=>{const f=n(u);(a||!t(r,f))&&(a=!1,r=f,i.next(u))}))})}function tu(t,n){return t===n}function cn(t){for(let n in t)if(t[n]===cn)return n;throw Error("Could not find renamed property on target object.")}function Ia(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function zn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(zn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function oc(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const sc=cn({__forward_ref__:cn});function wn(t){return t.__forward_ref__=wn,t.toString=function(){return zn(this())},t}function kt(t){return ac(t)?t():t}function ac(t){return"function"==typeof t&&t.hasOwnProperty(sc)&&t.__forward_ref__===wn}function lc(t){return t&&!!t.\u0275providers}const yh="https://g.co/ng/security#xss";class xe extends Error{constructor(n,e){super(function cc(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function Ct(t){return"string"==typeof t?t:null==t?"":String(t)}function Ss(t,n){throw new xe(-201,!1)}function Cr(t,n){null==t&&function vt(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}(n,t,null,"!=")}function Ze(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function uc(t){return Pa(t,sd)||Pa(t,Eh)}function Pa(t,n){return t.hasOwnProperty(n)?t[n]:null}function od(t){return t&&(t.hasOwnProperty(su)||t.hasOwnProperty(pm))?t[su]:null}const sd=cn({\u0275prov:cn}),su=cn({\u0275inj:cn}),Eh=cn({ngInjectableDef:cn}),pm=cn({ngInjectorDef:cn});var Gt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Gt||{});let wl;function sr(t){const n=wl;return wl=t,n}function Ra(t,n,e){const i=uc(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Gt.Optional?null:void 0!==n?n:void Ss(zn(t))}const In=globalThis;class Le{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Ze({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Cs={},ld="__NG_DI_FLAG__",Tl="ngTempTokenPath",dd=/\n/gm,pc="__source";let ta;function mo(t){const n=ta;return ta=t,n}function fc(t,n=Gt.Default){if(void 0===ta)throw new xe(-203,!1);return null===ta?Ra(t,void 0,n):ta.get(t,n&Gt.Optional?null:void 0,n)}function Oe(t,n=Gt.Default){return(function ad(){return wl}()||fc)(kt(t),n)}function qe(t,n=Gt.Default){return Oe(t,gc(n))}function gc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kl(t){const n=[];for(let e=0;e<t.length;e++){const i=kt(t[e]);if(Array.isArray(i)){if(0===i.length)throw new xe(900,!1);let r,a=Gt.Default;for(let u=0;u<i.length;u++){const f=i[u],b=Dh(f);"number"==typeof b?-1===b?r=f.token:a|=b:r=f}n.push(Oe(r,a))}else n.push(Oe(i))}return n}function Oa(t,n){return t[ld]=n,t.prototype[ld]=n,t}function Dh(t){return t[ld]}function fo(t){return{toString:t}.toString()}var Fa=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Fa||{}),eo=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(eo||{});const dn={},Wt=[],Xi=cn({\u0275cmp:cn}),na=cn({\u0275dir:cn}),Na=cn({\u0275pipe:cn}),vc=cn({\u0275mod:cn}),Tr=cn({\u0275fac:cn}),Ts=cn({__NG_ELEMENT_ID__:cn}),La=cn({__NG_ENV_ID__:cn});function cu(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=n.length;if(r+a===i||t.charCodeAt(r+a)<=32)return r}e=r+1}}function hd(t,n,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const a=e[i++],u=e[i++],f=e[i++];t.setAttribute(n,u,f,a)}else{const a=r,u=e[++i];uu(a)?t.setProperty(n,a,u):t.setAttribute(n,a,u),i++}}return i}function du(t){return 3===t||4===t||6===t}function uu(t){return 64===t.charCodeAt(0)}function El(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||No(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function No(t,n,e,i,r){let a=0,u=t.length;if(-1===n)u=-1;else for(;a<t.length;){const f=t[a++];if("number"==typeof f){if(f===n){u=-1;break}if(f>n){u=a-1;break}}}for(;a<t.length;){const f=t[a];if("number"==typeof f)break;if(f===e){if(null===i)return void(null!==r&&(t[a+1]=r));if(i===t[a+1])return void(t[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==u&&(t.splice(u,0,n),a=u+1),t.splice(a++,0,e),null!==i&&t.splice(a++,0,i),null!==r&&t.splice(a++,0,r)}const Ml="ng-template";function to(t,n,e){let i=0,r=!0;for(;i<t.length;){let a=t[i++];if("string"==typeof a&&r){const u=t[i++];if(e&&"class"===a&&-1!==cu(u.toLowerCase(),n,0))return!0}else{if(1===a){for(;i<t.length&&"string"==typeof(a=t[i++]);)if(a.toLowerCase()===n)return!0;return!1}"number"==typeof a&&(r=!1)}}return!1}function Dl(t){return 4===t.type&&t.value!==Ml}function Ah(t,n,e){return n===(4!==t.type||e?t.value:Ml)}function Ph(t,n,e){let i=4;const r=t.attrs||[],a=function Es(t){for(let n=0;n<t.length;n++)if(du(t[n]))return n;return t.length}(r);let u=!1;for(let f=0;f<n.length;f++){const b=n[f];if("number"!=typeof b){if(!u)if(4&i){if(i=2|1&i,""!==b&&!Ah(t,b,e)||""===b&&1===n.length){if(go(i))return!1;u=!0}}else{const S=8&i?b:n[++f];if(8&i&&null!==t.attrs){if(!to(t.attrs,S,e)){if(go(i))return!1;u=!0}continue}const N=ks(8&i?"class":b,r,Dl(t),e);if(-1===N){if(go(i))return!1;u=!0;continue}if(""!==S){let H;H=N>a?"":r[N+1].toLowerCase();const K=8&i?H:null;if(K&&-1!==cu(K,S,0)||2&i&&S!==H){if(go(i))return!1;u=!0}}}}else{if(!u&&!go(i)&&!go(b))return!1;if(u&&go(b))continue;u=!1,i=b|1&i}}return go(i)||u}function go(t){return 0==(1&t)}function ks(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let a=!1;for(;r<n.length;){const u=n[r];if(u===t)return r;if(3===u||6===u)a=!0;else{if(1===u||2===u){let f=n[++r];for(;"string"==typeof f;)f=n[++r];continue}if(4===u)break;if(0===u){r+=4;continue}}r+=a?1:2}return-1}return function pd(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function hu(t,n,e=!1){for(let i=0;i<n.length;i++)if(Ph(t,n[i],e))return!0;return!1}function Ms(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function rs(t,n){return t?":not("+n.trim()+")":n}function fm(t){let n=t[0],e=1,i=2,r="",a=!1;for(;e<t.length;){let u=t[e];if("string"==typeof u)if(2&i){const f=t[++e];r+="["+u+(f.length>0?'="'+f+'"':"")+"]"}else 8&i?r+="."+u:4&i&&(r+=" "+u);else""!==r&&!go(u)&&(n+=rs(a,r),r=""),i=u,a=a||!go(i);e++}return""!==r&&(n+=rs(a,r)),n}function ai(t){return fo(()=>{const n=mu(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Fa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||eo.Emulated,styles:t.styles||Wt,_:null,schemas:t.schemas||null,tView:null,id:""};fu(e);const i=t.dependencies;return e.directiveDefs=md(i,!1),e.pipeDefs=md(i,!0),e.id=function _u(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of e)n=Math.imul(31,n)+r.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(e),e})}function Ds(t){return Jt(t)||Ii(t)}function Qe(t){return null!==t}function Vn(t){return fo(()=>({type:t.type,bootstrap:t.bootstrap||Wt,declarations:t.declarations||Wt,imports:t.imports||Wt,exports:t.exports||Wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function za(t,n){if(null==t)return dn;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=i,n&&(n[r]=a)}return e}function Je(t){return fo(()=>{const n=mu(t);return fu(n),n})}function Jt(t){return t[Xi]||null}function Ii(t){return t[na]||null}function kr(t){return t[Na]||null}function jr(t,n){const e=t[vc]||null;if(!e&&!0===n)throw new Error(`Type ${zn(t)} does not have '\u0275mod' property.`);return e}function mu(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||dn,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:za(t.inputs,n),outputs:za(t.outputs)}}function fu(t){t.features?.forEach(n=>n(t))}function md(t,n){if(!t)return null;const e=n?kr:Ds;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(Qe)}const Qn=0,Ye=1,ft=2,mn=3,Er=4,Ba=5,wi=6,oa=7,li=8,Si=9,fn=10,Tt=11,Va=12,vu=13,ja=14,ci=15,yc=16,Ci=17,no=18,rt=19,ut=20,vo=21,Lo=22,Ua=23,Gn=24,$t=25,fd=1,sa=2,un=7,Bo=9,gi=11;function ar(t){return Array.isArray(t)&&"object"==typeof t[fd]}function Qi(t){return Array.isArray(t)&&!0===t[fd]}function aa(t){return 0!=(4&t.flags)}function As(t){return t.componentOffset>-1}function Pl(t){return 1==(1&t.flags)}function Nt(t){return!!t.template}function v(t){return 0!=(512&t[ft])}function Te(t,n){return t.hasOwnProperty(Tr)?t[Tr]:null}let $e=null,Lt=!1;function Ne(t){const n=$e;return $e=t,n}const ht={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function gn(t){if(!_n(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Vi(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Vt(t){t.dirty=!0,function zt(t){if(void 0===t.liveConsumerNode)return;const n=Lt;Lt=!0;try{for(const e of t.liveConsumerNode)e.dirty||Vt(e)}finally{Lt=n}}(t),t.consumerMarkedDirty?.(t)}function Yn(t){return t&&(t.nextProducerIndex=0),Ne(t)}function Sn(t,n){if(Ne(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(_n(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)lr(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Vi(t){Mr(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(gn(e),i!==e.version))return!0}return!1}function Ti(t){if(Mr(t),_n(t))for(let n=0;n<t.producerNode.length;n++)lr(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function lr(t,n){if(function Vo(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Mr(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)lr(t.producerNode[i],t.producerIndexOfThis[i]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[n],r=t.liveConsumerNode[n];Mr(r),r.producerIndexOfThis[i]=n}}function _n(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Mr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let la=null;const io=()=>{},as=(()=>({...ht,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:io}))();class Ps{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function yo(){return _m}function _m(t){return t.type.prototype.ngOnChanges&&(t.setInput=vm),ki}function ki(){const t=Fl(this),n=t?.current;if(n){const e=t.previous;if(e===dn)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function vm(t,n,e,i){const r=this.declaredInputs[e],a=Fl(t)||function xc(t,n){return t[ym]=n}(t,{previous:dn,current:null}),u=a.current||(a.current={}),f=a.previous,b=f[r];u[r]=new Ps(b&&b.currentValue,n,f===dn),t[i]=n}yo.ngInherit=!0;const ym="__ngSimpleChanges__";function Fl(t){return t[ym]||null}const Rs=function(t,n,e){};function ei(t){for(;Array.isArray(t);)t=t[Qn];return t}function Fh(t,n){return ei(n[t])}function Hr(t,n){return ei(n[t.index])}function wm(t,n){return t.data[n]}function jo(t,n){const e=n[t];return ar(e)?e:e[Qn]}function Ga(t,n){return null==n?null:t[n]}function Sm(t){t[Ci]=0}function jy(t){1024&t[ft]||(t[ft]|=1024,wc(t,1))}function Dr(t){1024&t[ft]&&(t[ft]&=-1025,wc(t,-1))}function wc(t,n){let e=t[mn];if(null===e)return;e[Ba]+=n;let i=e;for(e=e[mn];null!==e&&(1===n&&1===i[Ba]||-1===n&&0===i[Ba]);)e[Ba]+=n,i=e,e=e[mn]}const bt={lFrame:Im(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Tm(){return bt.bindingsEnabled}function vd(){return null!==bt.skipHydrationRootTNode}function Pe(){return bt.lFrame.lView}function hn(){return bt.lFrame.tView}function Nl(t){return bt.lFrame.contextLView=t,t[li]}function Sc(t){return bt.lFrame.contextLView=null,t}function Ir(){let t=Vg();for(;null!==t&&64===t.type;)t=t.parent;return t}function Vg(){return bt.lFrame.currentTNode}function ls(t,n){const e=bt.lFrame;e.currentTNode=t,e.isParent=n}function yd(){return bt.lFrame.isParent}function Bh(){bt.lFrame.isParent=!1}function bd(){return bt.lFrame.bindingIndex++}function Wa(t){const n=bt.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Gy(t,n){const e=bt.lFrame;e.bindingIndex=e.bindingRootIndex=t,Mm(n)}function Mm(t){bt.lFrame.currentDirectiveIndex=t}function ri(t){const n=bt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function ku(){return bt.lFrame.currentQueryIndex}function Uh(t){bt.lFrame.currentQueryIndex=t}function Hh(t){const n=t[Ye];return 2===n.type?n.declTNode:1===n.type?t[wi]:null}function Eu(t,n,e){if(e&Gt.SkipSelf){let r=n,a=t;for(;!(r=r.parent,null!==r||e&Gt.Host||(r=Hh(a),null===r||(a=a[ja],10&r.type))););if(null===r)return!1;n=r,t=a}const i=bt.lFrame=Dm();return i.currentTNode=n,i.lView=t,!0}function Tc(t){const n=Dm(),e=t[Ye];bt.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Dm(){const t=bt.lFrame,n=null===t?null:t.child;return null===n?Im(t):n}function Im(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function wd(){const t=bt.lFrame;return bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Gh=wd;function Mu(){const t=wd();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Gr(){return bt.lFrame.selectedIndex}function Fs(t){bt.lFrame.selectedIndex=t}function vi(){const t=bt.lFrame;return wm(t.tView,t.selectedIndex)}let Pm=!0;function Du(){return Pm}function Ll(t){Pm=t}function Zh(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:f,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:D}=a;u&&(t.contentHooks??=[]).push(-e,u),f&&((t.contentHooks??=[]).push(e,f),(t.contentCheckHooks??=[]).push(e,f)),b&&(t.viewHooks??=[]).push(-e,b),S&&((t.viewHooks??=[]).push(e,S),(t.viewCheckHooks??=[]).push(e,S)),null!=D&&(t.destroyHooks??=[]).push(e,D)}}function Kh(t,n,e){Gg(t,n,3,e)}function Xh(t,n,e,i){(3&t[ft])===e&&Gg(t,n,e,i)}function da(t,n){let e=t[ft];(3&e)===n&&(e&=8191,e+=1,t[ft]=e)}function Gg(t,n,e,i){const a=i??-1,u=n.length-1;let f=0;for(let b=void 0!==i?65535&t[Ci]:0;b<u;b++)if("number"==typeof n[b+1]){if(f=n[b],null!=i&&f>=i)break}else n[b]<0&&(t[Ci]+=65536),(f<a||-1==a)&&(Sd(t,e,n,b),t[Ci]=(4294901760&t[Ci])+b+2),b++}function Rm(t,n){Rs(4,t,n);const e=Ne(null);try{n.call(t)}finally{Ne(e),Rs(5,t,n)}}function Sd(t,n,e,i){const r=e[i]<0,a=e[i+1],f=t[r?-e[i]:e[i]];r?t[ft]>>13<t[Ci]>>16&&(3&t[ft])===n&&(t[ft]+=8192,Rm(f,a)):Rm(f,a)}const Cd=-1;class Iu{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function kc(t){return t!==Cd}function Ec(t){return 32767&t}function Au(t,n){let e=function Yy(t){return t>>16}(t),i=n;for(;e>0;)i=i[ja],e--;return i}let Yh=!0;function Jh(t){const n=Yh;return Yh=t,n}const Td=255,Om=5;let Jy=0;const ua={};function ep(t,n){const e=Wg(t,n);if(-1!==e)return e;const i=n[Ye];i.firstCreatePass&&(t.injectorIndex=n.length,Fm(i.data,t),Fm(n,null),Fm(i.blueprint,null));const r=Pu(t,n),a=t.injectorIndex;if(kc(r)){const u=Ec(r),f=Au(r,n),b=f[Ye].data;for(let S=0;S<8;S++)n[a+S]=f[u+S]|b[u+S]}return n[a+8]=r,a}function Fm(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Wg(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Pu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){if(i=vn(r),null===i)return Cd;if(e++,r=r[ja],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return Cd}function Ru(t,n,e){!function eb(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Ts)&&(i=e[Ts]),null==i&&(i=e[Ts]=Jy++);const r=i&Td;n.data[t+(r>>Om)]|=1<<r}(t,n,e)}function Nm(t,n,e){if(e&Gt.Optional||void 0!==t)return t;Ss()}function Lm(t,n,e,i){if(e&Gt.Optional&&void 0===i&&(i=null),!(e&(Gt.Self|Gt.Host))){const r=t[Si],a=sr(void 0);try{return r?r.get(n,i,e&Gt.Optional):Ra(n,i,e&Gt.Optional)}finally{sr(a)}}return Nm(i,0,e)}function Zg(t,n,e,i=Gt.Default,r){if(null!==t){if(2048&n[ft]&&!(i&Gt.Self)){const u=function Xg(t,n,e,i,r){let a=t,u=n;for(;null!==a&&null!==u&&2048&u[ft]&&!(512&u[ft]);){const f=Ou(a,u,e,i|Gt.Self,ua);if(f!==ua)return f;let b=a.parent;if(!b){const S=u[ut];if(S){const D=S.get(e,ua,i);if(D!==ua)return D}b=vn(u),u=u[ja]}a=b}return r}(t,n,e,i,ua);if(u!==ua)return u}const a=Ou(t,n,e,i,ua);if(a!==ua)return a}return Lm(n,e,i,r)}function Ou(t,n,e,i,r){const a=function nb(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ts)?t[Ts]:void 0;return"number"==typeof n?n>=0?n&Td:Pi:n}(e);if("function"==typeof a){if(!Eu(n,t,i))return i&Gt.Host?Nm(r,0,i):Lm(n,e,i,r);try{let u;if(u=a(i),null!=u||i&Gt.Optional)return u;Ss()}finally{Gh()}}else if("number"==typeof a){let u=null,f=Wg(t,n),b=Cd,S=i&Gt.Host?n[ci][wi]:null;for((-1===f||i&Gt.SkipSelf)&&(b=-1===f?Pu(t,n):n[f+8],b!==Cd&&zm(i,!1)?(u=n[Ye],f=Ec(b),n=Au(b,n)):f=-1);-1!==f;){const D=n[Ye];if(Kg(a,f,D.data)){const N=tb(f,n,e,u,i,S);if(N!==ua)return N}b=n[f+8],b!==Cd&&zm(i,n[Ye].data[f+8]===S)&&Kg(a,f,n)?(u=D,f=Ec(b),n=Au(b,n)):f=-1}}return r}function tb(t,n,e,i,r,a){const u=n[Ye],f=u.data[t+8],D=Fu(f,u,e,null==i?As(f)&&Yh:i!=u&&0!=(3&f.type),r&Gt.Host&&a===f);return null!==D?Mc(n,u,D,f):ua}function Fu(t,n,e,i,r){const a=t.providerIndexes,u=n.data,f=1048575&a,b=t.directiveStart,D=a>>20,H=r?f+D:t.directiveEnd;for(let K=i?f:f+D;K<H;K++){const re=u[K];if(K<b&&e===re||K>=b&&re.type===e)return K}if(r){const K=u[b];if(K&&Nt(K)&&K.type===e)return b}return null}function Mc(t,n,e,i){let r=t[e];const a=n.data;if(function Zy(t){return t instanceof Iu}(r)){const u=r;u.resolving&&function bh(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new xe(-200,`Circular dependency in DI detected for ${t}${e}`)}(function pn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ct(t)}(a[e]));const f=Jh(u.canSeeViewProviders);u.resolving=!0;const S=u.injectImpl?sr(u.injectImpl):null;Eu(t,i,Gt.Default);try{r=t[e]=u.factory(void 0,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&function qy(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=n.type.prototype;if(i){const u=_m(n);(e.preOrderHooks??=[]).push(t,u),(e.preOrderCheckHooks??=[]).push(t,u)}r&&(e.preOrderHooks??=[]).push(0-t,r),a&&((e.preOrderHooks??=[]).push(t,a),(e.preOrderCheckHooks??=[]).push(t,a))}(e,a[e],n)}finally{null!==S&&sr(S),Jh(f),u.resolving=!1,Gh()}}return r}function Kg(t,n,e){return!!(e[n+(t>>Om)]&1<<t)}function zm(t,n){return!(t&Gt.Self||t&Gt.Host&&n)}class Ji{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return Zg(this._tNode,this._lView,n,gc(i),e)}}function Pi(){return new Ji(Ir(),Pe())}function Ri(t){return fo(()=>{const n=t.prototype.constructor,e=n[Tr]||tp(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const a=r[Tr]||tp(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function tp(t){return ac(t)?()=>{const n=tp(kt(t));return n&&n()}:Te(t)}function vn(t){const n=t[Ye],e=n.type;return 2===e?n.declTNode:1===e?t[wi]:null}const Ac="__parameters__";function kd(t,n,e){return fo(()=>{const i=function np(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...a){if(this instanceof r)return i.apply(this,a),this;const u=new r(...a);return f.annotation=u,f;function f(b,S,D){const N=b.hasOwnProperty(Ac)?b[Ac]:Object.defineProperty(b,Ac,{value:[]})[Ac];for(;N.length<=D;)N.push(null);return(N[D]=N[D]||[]).push(u),b}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function Rc(t,n){t.forEach(e=>Array.isArray(e)?Rc(e,n):n(e))}function Vm(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function ur(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Oc(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function hr(t,n,e){let i=Za(t,n);return i>=0?t[1|i]=e:(i=~i,function zu(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function Md(t,n){const e=Za(t,n);if(e>=0)return t[1|e]}function Za(t,n){return function jm(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const a=i+(r-i>>1),u=t[a<<e];if(n===u)return a<<e;u>n?r=a:i=a+1}return~(r<<e)}(t,n,1)}const Ns=Oa(kd("Optional"),8),ds=Oa(kd("SkipSelf"),4);function ju(t){return 128==(128&t.flags)}var Ka=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ka||{});const tf=new Map;let g_=0;const nf="__ngContext__";function $r(t,n){ar(n)?(t[nf]=n[rt],function __(t){tf.set(t[rt],t)}(n)):t[nf]=n}let af;function pp(t,n){return af(t,n)}function Bc(t){const n=t[mn];return Qi(n)?n[mn]:n}function mp(t){return fp(t[Va])}function cf(t){return fp(t[Er])}function fp(t){for(;null!==t&&!Qi(t);)t=t[Er];return t}function Xa(t,n,e,i,r){if(null!=i){let a,u=!1;Qi(i)?a=i:ar(i)&&(u=!0,i=i[Qn]);const f=ei(i);0===t&&null!==e?null==r?U(n,e,f):j(n,e,f,r||null,!0):1===t&&null!==e?j(n,e,f,r||null,!0):2===t?function je(t,n,e){const i=le(t,n);i&&function J(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}(n,f,u):3===t&&n.destroyNode(f),null!=a&&function $n(t,n,e,i,r){const a=e[un];a!==ei(e)&&Xa(n,t,i,a,r);for(let f=gi;f<e.length;f++){const b=e[f];et(b[Ye],b,t,n,i,a)}}(n,t,a,e,r)}}function Pd(t,n,e){return t.createElement(n,e)}function y(t,n){const e=t[Bo],i=e.indexOf(n);Dr(n),e.splice(i,1)}function w(t,n){if(t.length<=gi)return;const e=gi+n,i=t[e];if(i){const r=i[yc];null!==r&&r!==t&&y(r,i),n>0&&(t[e-1][Er]=i[Er]);const a=ur(t,gi+n);!function gb(t,n){et(t,n,n[Tt],2,null,null),n[Qn]=null,n[wi]=null}(i[Ye],i);const u=a[no];null!==u&&u.detachView(a[Ye]),i[mn]=null,i[Er]=null,i[ft]&=-129}return i}function C(t,n){if(!(256&n[ft])){const e=n[Tt];n[Ua]&&Ti(n[Ua]),n[Gn]&&Ti(n[Gn]),e.destroyNode&&et(t,n,e,3,null,null),function c(t){let n=t[Va];if(!n)return E(t[Ye],t);for(;n;){let e=null;if(ar(n))e=n[Va];else{const i=n[gi];i&&(e=i)}if(!e){for(;n&&!n[Er]&&n!==t;)ar(n)&&E(n[Ye],n),n=n[mn];null===n&&(n=t),ar(n)&&E(n[Ye],n),e=n&&n[Er]}n=e}}(n)}}function E(t,n){if(!(256&n[ft])){n[ft]&=-129,n[ft]|=256,function P(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof Iu)){const a=e[i+1];if(Array.isArray(a))for(let u=0;u<a.length;u+=2){const f=r[a[u]],b=a[u+1];Rs(4,f,b);try{b.call(f)}finally{Rs(5,f,b)}}else{Rs(4,r,a);try{a.call(r)}finally{Rs(5,r,a)}}}}}(t,n),function I(t,n){const e=t.cleanup,i=n[oa];if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const u=e[a+3];u>=0?i[u]():i[-u].unsubscribe(),a+=2}else e[a].call(i[e[a+1]]);null!==i&&(n[oa]=null);const r=n[vo];if(null!==r){n[vo]=null;for(let a=0;a<r.length;a++)(0,r[a])()}}(t,n),1===n[Ye].type&&n[Tt].destroy();const e=n[yc];if(null!==e&&Qi(n[mn])){e!==n[mn]&&y(e,n);const i=n[no];null!==i&&i.detachView(t)}!function v_(t){tf.delete(t[rt])}(n)}}function F(t,n,e){return function z(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[Qn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:a}=t.data[i.directiveStart+r];if(a===eo.None||a===eo.Emulated)return null}return Hr(i,e)}}(t,n.parent,e)}function j(t,n,e,i,r){t.insertBefore(n,e,i,r)}function U(t,n,e){t.appendChild(n,e)}function W(t,n,e,i,r){null!==i?j(t,n,e,i,r):U(t,n,e)}function le(t,n){return t.parentNode(n)}function pe(t,n,e){return Ee(t,n,e)}let We,Ei,pr,Ee=function ge(t,n,e){return 40&t.type?Hr(t,e):null};function Ge(t,n,e,i){const r=F(t,i,n),a=n[Tt],f=pe(i.parent||n[wi],i,n);if(null!=r)if(Array.isArray(e))for(let b=0;b<e.length;b++)W(a,r,e[b],f,!1);else W(a,r,e,f,!1);void 0!==We&&We(a,i,n,e,r)}function Ue(t,n){if(null!==n){const e=n.type;if(3&e)return Hr(n,t);if(4&e)return Ke(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return Ue(t,i);{const r=t[n.index];return Qi(r)?Ke(-1,r):ei(r)}}if(32&e)return pp(n,t)()||ei(t[n.index]);{const i=Ve(t,n);return null!==i?Array.isArray(i)?i[0]:Ue(Bc(t[ci]),i):Ue(t,n.next)}}return null}function Ve(t,n){return null!==n?t[ci][wi].projection[n.projection]:null}function Ke(t,n){const e=gi+t+1;if(e<n.length){const i=n[e],r=i[Ye].firstChild;if(null!==r)return Ue(i,r)}return n[un]}function lt(t,n,e,i,r,a,u){for(;null!=e;){const f=i[e.index],b=e.type;if(u&&0===n&&(f&&$r(ei(f),i),e.flags|=2),32!=(32&e.flags))if(8&b)lt(t,n,e.child,i,r,a,!1),Xa(n,t,r,f,a);else if(32&b){const S=pp(e,i);let D;for(;D=S();)Xa(n,t,r,D,a);Xa(n,t,r,f,a)}else 16&b?Pn(t,n,i,e,r,a):Xa(n,t,r,f,a);e=u?e.projectionNext:e.next}}function et(t,n,e,i,r,a){lt(e,i,t.firstChild,n,r,a,!1)}function Pn(t,n,e,i,r,a){const u=e[ci],b=u[wi].projection[i.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)Xa(n,t,r,b[S],a);else{let S=b;const D=u[mn];ju(i)&&(S.flags|=128),lt(t,n,S,D,r,a,!0)}}function Pr(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function yi(t,n,e){const{mergedAttrs:i,classes:r,styles:a}=e;null!==i&&hd(t,n,i),null!==r&&Pr(t,n,r),null!==a&&function xo(t,n,e){t.setAttribute(n,"style",e)}(t,n,a)}function Ni(t){return function ji(){if(void 0===Ei&&(Ei=null,In.trustedTypes))try{Ei=In.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ei}()?.createHTML(t)||t}class Wn{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yh})`}}class us extends Wn{getTypeName(){return"HTML"}}class zs extends Wn{getTypeName(){return"Style"}}class Bs extends Wn{getTypeName(){return"Script"}}class Qa extends Wn{getTypeName(){return"URL"}}class hs extends Wn{getTypeName(){return"ResourceURL"}}function oi(t){return t instanceof Wn?t.changingThisBreaksApplicationSecurity:t}function ui(t,n){const e=function Ya(t){return t instanceof Wn&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${yh})`)}return e===n}class k_{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Ni(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class _b{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=Ni(n),e}}const yb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function _p(t){return(t=String(t)).match(yb)?t:"unsafe:"+t}function el(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function qu(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const E_=el("area,br,col,hr,img,wbr"),M_=el("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ps=el("rp,rt"),mf=qu(E_,qu(M_,el("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qu(ps,el("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qu(ps,M_)),ff=el("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Hl=qu(ff,el("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),el("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vs=el("script,style,template");class Vc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!mf.hasOwnProperty(e))return this.sanitizedSomething=!0,!Vs.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const a=i.item(r),u=a.name,f=u.toLowerCase();if(!Hl.hasOwnProperty(f)){this.sanitizedSomething=!0;continue}let b=a.value;ff[f]&&(b=_p(b)),this.buf.push(" ",u,'="',j1(b),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();mf.hasOwnProperty(e)&&!E_.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(j1(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const pa=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,I2=/([^\#-~ |!])/g;function j1(t){return t.replace(/&/g,"&amp;").replace(pa,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(I2,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let D_;function U1(t,n){let e=null;try{D_=D_||function hf(t){const n=new _b(t);return function vb(){try{return!!(new window.DOMParser).parseFromString(Ni(""),"text/html")}catch{return!1}}()?new k_(n):n}(t);let i=n?String(n):"";e=D_.getInertBodyElement(i);let r=5,a=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=a,a=e.innerHTML,e=D_.getInertBodyElement(i)}while(i!==a);return Ni((new Vc).sanitizeChildren(xb(e)||e))}finally{if(e){const i=xb(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function xb(t){return"content"in t&&function A2(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var oo=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(oo||{});const _f=new Le("ENVIRONMENT_INITIALIZER"),W1=new Le("INJECTOR",-1),q1=new Le("INJECTOR_DEF_TYPES");class wb{get(n,e=Cs){if(e===Cs){const i=new Error(`NullInjectorError: No provider for ${zn(n)}!`);throw i.name="NullInjectorError",i}return e}}function z2(...t){return{\u0275providers:K1(0,t),\u0275fromNgModule:!0}}function K1(t,...n){const e=[],i=new Set;let r;const a=u=>{e.push(u)};return Rc(n,u=>{const f=u;I_(f,a,[],i)&&(r||=[],r.push(f))}),void 0!==r&&X1(r,a),e}function X1(t,n){for(let e=0;e<t.length;e++){const{ngModule:i,providers:r}=t[e];Sb(r,a=>{n(a,i)})}}function I_(t,n,e,i){if(!(t=kt(t)))return!1;let r=null,a=od(t);const u=!a&&Jt(t);if(a||u){if(u&&!u.standalone)return!1;r=t}else{const b=t.ngModule;if(a=od(b),!a)return!1;r=b}const f=i.has(r);if(u){if(f)return!1;if(i.add(r),u.dependencies){const b="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const S of b)I_(S,n,e,i)}}else{if(!a)return!1;{if(null!=a.imports&&!f){let S;i.add(r);try{Rc(a.imports,D=>{I_(D,n,e,i)&&(S||=[],S.push(D))})}finally{}void 0!==S&&X1(S,n)}if(!f){const S=Te(r)||(()=>new r);n({provide:r,useFactory:S,deps:Wt},r),n({provide:q1,useValue:r,multi:!0},r),n({provide:_f,useValue:()=>Oe(r),multi:!0},r)}const b=a.providers;if(null!=b&&!f){const S=t;Sb(b,D=>{n(D,S)})}}}return r!==t&&void 0!==t.providers}function Sb(t,n){for(let e of t)lc(e)&&(e=e.\u0275providers),Array.isArray(e)?Sb(e,n):n(e)}const B2=cn({provide:String,useValue:cn});function Cb(t){return null!==t&&"object"==typeof t&&B2 in t}function Zu(t){return"function"==typeof t}const Tb=new Le("Set Injector scope."),A_={},j2={};let kb;function P_(){return void 0===kb&&(kb=new wb),kb}class ma{}class vp extends ma{get destroyed(){return this._destroyed}constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mb(n,u=>this.processProvider(u)),this.records.set(W1,yp(void 0,this)),r.has("environment")&&this.records.set(ma,yp(void 0,this));const a=this.records.get(Tb);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(q1.multi,Wt,Gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of n)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=mo(this),i=sr(void 0);try{return n()}finally{mo(e),sr(i)}}get(n,e=Cs,i=Gt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(La))return n[La](this);i=gc(i);const a=mo(this),u=sr(void 0);try{if(!(i&Gt.SkipSelf)){let b=this.records.get(n);if(void 0===b){const S=function W2(t){return"function"==typeof t||"object"==typeof t&&t instanceof Le}(n)&&uc(n);b=S&&this.injectableDefInScope(S)?yp(Eb(n),A_):null,this.records.set(n,b)}if(null!=b)return this.hydrate(n,b)}return(i&Gt.Self?P_():this.parent).get(n,e=i&Gt.Optional&&e===Cs?null:e)}catch(f){if("NullInjectorError"===f.name){if((f[Tl]=f[Tl]||[]).unshift(zn(n)),a)throw f;return function Ih(t,n,e,i){const r=t[Tl];throw n[pc]&&r.unshift(n[pc]),t.message=function _c(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=zn(n);if(Array.isArray(n))r=n.map(zn).join(" -> ");else if("object"==typeof n){let a=[];for(let u in n)if(n.hasOwnProperty(u)){let f=n[u];a.push(u+":"+("string"==typeof f?JSON.stringify(f):zn(f)))}r=`{${a.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(dd,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[Tl]=null,t}(f,n,"R3InjectorError",this.source)}throw f}finally{sr(u),mo(a)}}resolveInjectorInitializers(){const n=mo(this),e=sr(void 0);try{const r=this.get(_f.multi,Wt,Gt.Self);for(const a of r)a()}finally{mo(n),sr(e)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(zn(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(n){let e=Zu(n=kt(n))?n:kt(n&&n.provide);const i=function H2(t){return Cb(t)?yp(void 0,t.useValue):yp(J1(t),A_)}(n);if(Zu(n)||!0!==n.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=yp(void 0,A_,!0),r.factory=()=>kl(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e){return e.value===A_&&(e.value=j2,e.value=e.factory()),"object"==typeof e.value&&e.value&&function $2(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=kt(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function Eb(t){const n=uc(t),e=null!==n?n.factory:Te(t);if(null!==e)return e;if(t instanceof Le)throw new xe(204,!1);if(t instanceof Function)return function U2(t){const n=t.length;if(n>0)throw Oc(n,"?"),new xe(204,!1);const e=function hm(t){return t&&(t[sd]||t[Eh])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new xe(204,!1)}function J1(t,n,e){let i;if(Zu(t)){const r=kt(t);return Te(r)||Eb(r)}if(Cb(t))i=()=>kt(t.useValue);else if(function Y1(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...kl(t.deps||[]));else if(function Q1(t){return!(!t||!t.useExisting)}(t))i=()=>Oe(kt(t.useExisting));else{const r=kt(t&&(t.useClass||t.provide));if(!function G2(t){return!!t.deps}(t))return Te(r)||Eb(r);i=()=>new r(...kl(t.deps))}return i}function yp(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Mb(t,n){for(const e of t)Array.isArray(e)?Mb(e,n):e&&lc(e)?Mb(e.\u0275providers,n):n(e)}const R_=new Le("AppId",{providedIn:"root",factory:()=>q2}),q2="ng",eS=new Le("Platform Initializer"),Rd=new Le("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Gl=new Le("AnimationModuleType"),Db=new Le("CSP nonce",{providedIn:"root",factory:()=>function Hi(){if(void 0!==pr)return pr;if(typeof document<"u")return document;throw new xe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let tS=(t,n,e)=>null;function Lb(t,n,e=!1){return tS(t,n,e)}class iP{}class rS{}class oP{resolveComponentFactory(n){throw function rP(t){const n=Error(`No component factory found for ${zn(t)}.`);return n.ngComponent=t,n}(n)}}let B_=(()=>{class t{static#e=this.NULL=new oP}return t})();function sP(){return wp(Ir(),Pe())}function wp(t,n){return new Rn(Hr(t,n))}let Rn=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=sP}return t})();function aP(t){return t instanceof Rn?t.nativeElement:t}class bf{}let cP=(()=>{class t{static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>null})}return t})();class Ku{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const dP=new Ku("16.2.11"),Vb={};function cS(t,n=null,e=null,i){const r=dS(t,n,e,i);return r.resolveInjectorInitializers(),r}function dS(t,n=null,e=null,i,r=new Set){const a=[e||Wt,z2(t)];return i=i||("object"==typeof t?void 0:zn(t)),new vp(a,n||P_(),i||null,r)}let fs=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Cs;static#t=this.NULL=new wb;static create(e,i){if(Array.isArray(e))return cS({name:""},i,e,"");{const r=e.name??"";return cS({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Ze({token:t,providedIn:"any",factory:()=>Oe(W1)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();function Ub(t){return t.ngOriginalError}class fa{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&Ub(n);for(;e&&Ub(e);)e=Ub(e);return e||null}}function Gb(t){return n=>{setTimeout(t,void 0,n)}}const tt=class _P extends Zt{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){let r=n,a=e||(()=>null),u=i;if(n&&"object"==typeof n){const b=n;r=b.next?.bind(b),a=b.error?.bind(b),u=b.complete?.bind(b)}this.__isAsync&&(a=Gb(a),r&&(r=Gb(r)),u&&(u=Gb(u)));const f=super.subscribe({next:r,error:a,complete:u});return n instanceof En&&n.add(f),f}};function hS(...t){}class Pt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tt(!1),this.onMicrotaskEmpty=new tt(!1),this.onStable=new tt(!1),this.onError=new tt(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function vP(){const t="function"==typeof In.requestAnimationFrame;let n=In[t?"requestAnimationFrame":"setTimeout"],e=In[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function xP(t){const n=()=>{!function bP(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(In,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Wb(t),t.isCheckStableRunning=!0,$b(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Wb(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,a,u,f)=>{if(function SP(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(f))return e.invokeTask(r,a,u,f);try{return pS(t),e.invokeTask(r,a,u,f)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&n(),mS(t)}},onInvoke:(e,i,r,a,u,f,b)=>{try{return pS(t),e.invoke(r,a,u,f,b)}finally{t.shouldCoalesceRunChangeDetection&&n(),mS(t)}},onHasTask:(e,i,r,a)=>{e.hasTask(r,a),i===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,Wb(t),$b(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,i,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pt.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(Pt.isInAngularZone())throw new xe(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const a=this._inner,u=a.scheduleEventTask("NgZoneEvent: "+r,n,yP,hS,hS);try{return a.runTask(u,e,i)}finally{a.cancelTask(u)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const yP={};function $b(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Wb(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function pS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mS(t){t._nesting--,$b(t)}class wP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tt,this.onMicrotaskEmpty=new tt,this.onStable=new tt,this.onError=new tt}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}const fS=new Le("",{providedIn:"root",factory:gS});function gS(){const t=qe(Pt);let n=!0;return ws(new yn(r=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(n),r.complete()})}),new yn(r=>{let a;t.runOutsideAngular(()=>{a=t.onStable.subscribe(()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,r.next(!0))})})});const u=t.onUnstable.subscribe(()=>{Pt.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{a.unsubscribe(),u.unsubscribe()}}).pipe(Vr()))}function Uc(t){return t instanceof Function?t():t}let qb=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>new t})}return t})();function xf(t){for(;t;){t[ft]|=64;const n=Bc(t);if(v(t)&&!n)return t;t=n}return null}const xS=new Le("",{providedIn:"root",factory:()=>!1});let j_=null;function TS(t,n){return t[n]??MS()}function kS(t,n){const e=MS();e.producerNode?.length&&(t[n]=j_,e.lView=t,j_=ES())}const RP={...ht,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{xf(t.lView)},lView:null};function ES(){return Object.create(RP)}function MS(){return j_??=ES(),j_}const Ht={};function on(t){DS(hn(),Pe(),Gr()+t,!1)}function DS(t,n,e,i){if(!i)if(3==(3&n[ft])){const a=t.preOrderCheckHooks;null!==a&&Kh(n,a,e)}else{const a=t.preOrderHooks;null!==a&&Xh(n,a,0,e)}Fs(e)}function me(t,n=Gt.Default){const e=Pe();return null===e?Oe(t,n):Zg(Ir(),e,kt(t),n)}function Zb(){throw new Error("invalid")}function U_(t,n,e,i,r,a,u,f,b,S,D){const N=n.blueprint.slice();return N[Qn]=r,N[ft]=140|i,(null!==S||t&&2048&t[ft])&&(N[ft]|=2048),Sm(N),N[mn]=N[ja]=t,N[li]=e,N[fn]=u||t&&t[fn],N[Tt]=f||t&&t[Tt],N[Si]=b||t&&t[Si]||null,N[wi]=a,N[rt]=function Id(){return g_++}(),N[Lo]=D,N[ut]=S,N[ci]=2==n.type?t[ci]:N,N}function Tp(t,n,e,i,r){let a=t.data[n];if(null===a)a=function Kb(t,n,e,i,r){const a=Vg(),u=yd(),b=t.data[n]=function jP(t,n,e,i,r,a){let u=n?n.injectorIndex:-1,f=0;return vd()&&(f|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:u,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:f,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?a:a&&a.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=b),null!==a&&(u?null==a.child&&null!==b.parent&&(a.child=b):null===a.next&&(a.next=b,b.prev=a)),b}(t,n,e,i,r),function Hy(){return bt.lFrame.inI18n}()&&(a.flags|=32);else if(64&a.type){a.type=e,a.value=i,a.attrs=r;const u=function Tu(){const t=bt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();a.injectorIndex=null===u?-1:u.injectorIndex}return ls(a,!0),a}function wf(t,n,e,i){if(0===e)return-1;const r=n.length;for(let a=0;a<e;a++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function IS(t,n,e,i,r){const a=TS(n,Ua),u=Gr(),f=2&i;try{Fs(-1),f&&n.length>$t&&DS(t,n,$t,!1),Rs(f?2:0,r);const S=f?a:null,D=Yn(S);try{null!==S&&(S.dirty=!1),e(i,r)}finally{Sn(S,D)}}finally{f&&null===n[Ua]&&kS(n,Ua),Fs(u),Rs(f?3:1,r)}}function Xb(t,n,e){if(aa(n)){const i=Ne(null);try{const a=n.directiveEnd;for(let u=n.directiveStart;u<a;u++){const f=t.data[u];f.contentQueries&&f.contentQueries(1,e[u],u)}}finally{Ne(i)}}}function Qb(t,n,e){Tm()&&(function ZP(t,n,e,i){const r=e.directiveStart,a=e.directiveEnd;As(e)&&function tR(t,n,e){const i=Hr(n,t),r=AS(e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const f=H_(t,U_(t,r,null,u,i,n,null,t[fn].rendererFactory.createRenderer(i,e),null,null,null));t[n.index]=f}(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||ep(e,n),$r(i,n);const u=e.initialInputs;for(let f=r;f<a;f++){const b=t.data[f],S=Mc(n,t,f,e);$r(S,n),null!==u&&nR(0,f-r,S,b,0,u),Nt(b)&&(jo(e.index,n)[li]=Mc(n,t,f,e))}}(t,n,e,Hr(e,n)),64==(64&e.flags)&&NS(t,n,e))}function Yb(t,n,e=Hr){const i=n.localNames;if(null!==i){let r=n.index+1;for(let a=0;a<i.length;a+=2){const u=i[a+1],f=-1===u?e(n,t):t[u];t[r++]=f}}}function AS(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Jb(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function Jb(t,n,e,i,r,a,u,f,b,S,D){const N=$t+i,H=N+r,K=function FP(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Ht);return e}(N,H),re="function"==typeof S?S():S;return K[Ye]={type:t,blueprint:K,template:e,queries:null,viewQuery:f,declTNode:n,data:K.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:b,consts:re,incompleteFirstPass:!1,ssrId:D}}let PS=t=>null;function RS(t,n,e,i){for(let r in t)if(t.hasOwnProperty(r)){e=null===e?{}:e;const a=t[r];null===i?OS(e,n,r,a):i.hasOwnProperty(r)&&OS(e,n,i[r],a)}return e}function OS(t,n,e,i){t.hasOwnProperty(e)?t[e].push(n,i):t[e]=[n,i]}function js(t,n,e,i,r,a,u,f){const b=Hr(n,e);let D,S=n.inputs;!f&&null!=S&&(D=S[i])?(o0(t,e,D,i,r),As(n)&&function GP(t,n){const e=jo(n,t);16&e[ft]||(e[ft]|=64)}(e,n.index)):3&n.type&&(i=function HP(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=u?u(r,n.value||"",i):r,a.setProperty(b,i,r))}function e0(t,n,e,i){if(Tm()){const r=null===i?null:{"":-1},a=function XP(t,n){const e=t.directiveRegistry;let i=null,r=null;if(e)for(let a=0;a<e.length;a++){const u=e[a];if(hu(n,u.selectors,!1))if(i||(i=[]),Nt(u))if(null!==u.findHostDirectiveDefs){const f=[];r=r||new Map,u.findHostDirectiveDefs(u,f,r),i.unshift(...f,u),t0(t,n,f.length)}else i.unshift(u),t0(t,n,0);else r=r||new Map,u.findHostDirectiveDefs?.(u,i,r),i.push(u)}return null===i?null:[i,r]}(t,e);let u,f;null===a?u=f=null:[u,f]=a,null!==u&&FS(t,n,e,u,r,f),r&&function QP(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const a=e[n[r+1]];if(null==a)throw new xe(-301,!1);i.push(n[r],a)}}}(e,i,r)}e.mergedAttrs=El(e.mergedAttrs,e.attrs)}function FS(t,n,e,i,r,a){for(let S=0;S<i.length;S++)Ru(ep(e,n),t,i[S].type);!function JP(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let S=0;S<i.length;S++){const D=i[S];D.providersResolver&&D.providersResolver(D)}let u=!1,f=!1,b=wf(t,n,i.length,null);for(let S=0;S<i.length;S++){const D=i[S];e.mergedAttrs=El(e.mergedAttrs,D.hostAttrs),eR(t,e,n,b,D),YP(b,D,r),null!==D.contentQueries&&(e.flags|=4),(null!==D.hostBindings||null!==D.hostAttrs||0!==D.hostVars)&&(e.flags|=64);const N=D.type.prototype;!u&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),u=!0),!f&&(N.ngOnChanges||N.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),f=!0),b++}!function UP(t,n,e){const r=n.directiveEnd,a=t.data,u=n.attrs,f=[];let b=null,S=null;for(let D=n.directiveStart;D<r;D++){const N=a[D],H=e?e.get(N):null,re=H?H.outputs:null;b=RS(N.inputs,D,b,H?H.inputs:null),S=RS(N.outputs,D,S,re);const ue=null===b||null===u||Dl(n)?null:iR(b,D,u);f.push(ue)}null!==b&&(b.hasOwnProperty("class")&&(n.flags|=8),b.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=f,n.inputs=b,n.outputs=S}(t,e,a)}function NS(t,n,e){const i=e.directiveStart,r=e.directiveEnd,a=e.index,u=function xd(){return bt.lFrame.currentDirectiveIndex}();try{Fs(a);for(let f=i;f<r;f++){const b=t.data[f],S=n[f];Mm(f),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&KP(b,S)}}finally{Fs(-1),Mm(u)}}function KP(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function t0(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function YP(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Nt(n)&&(e[""]=t)}}function eR(t,n,e,i,r){t.data[i]=r;const a=r.factory||(r.factory=Te(r.type)),u=new Iu(a,Nt(r),me);t.blueprint[i]=u,e[i]=u,function WP(t,n,e,i,r){const a=r.hostBindings;if(a){let u=t.hostBindingOpCodes;null===u&&(u=t.hostBindingOpCodes=[]);const f=~n.index;(function qP(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(u)!=f&&u.push(f),u.push(e,i,a)}}(t,n,i,wf(t,e,r.hostVars,Ht),r)}function $l(t,n,e,i,r,a){const u=Hr(t,n);!function n0(t,n,e,i,r,a,u){if(null==a)t.removeAttribute(n,r,e);else{const f=null==u?Ct(a):u(a,i||"",r);t.setAttribute(n,r,f,e)}}(n[Tt],u,a,t.value,e,i,r)}function nR(t,n,e,i,r,a){const u=a[n];if(null!==u)for(let f=0;f<u.length;)LS(i,e,u[f++],u[f++],u[f++])}function LS(t,n,e,i,r){const a=Ne(null);try{const u=t.inputTransforms;null!==u&&u.hasOwnProperty(i)&&(r=u[i].call(n,r)),null!==t.setInput?t.setInput(n,r,e,i):n[i]=r}finally{Ne(a)}}function iR(t,n,e){let i=null,r=0;for(;r<e.length;){const a=e[r];if(0!==a)if(5!==a){if("number"==typeof a)break;if(t.hasOwnProperty(a)){null===i&&(i=[]);const u=t[a];for(let f=0;f<u.length;f+=2)if(u[f]===n){i.push(a,u[f+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function zS(t,n,e,i){return[t,!0,!1,n,null,0,i,e,null,null,null]}function BS(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const a=e[i+1];if(-1!==a){const u=t.data[a];Uh(e[i]),u.contentQueries(2,n[a],a)}}}function H_(t,n){return t[Va]?t[vu][Er]=n:t[Va]=n,t[vu]=n,n}function r0(t,n,e){Uh(0);const i=Ne(null);try{n(t,e)}finally{Ne(i)}}function VS(t){return t[oa]||(t[oa]=[])}function jS(t){return t.cleanup||(t.cleanup=[])}function US(t,n,e){return(null===t||Nt(t))&&(e=function wu(t){for(;Array.isArray(t);){if("object"==typeof t[fd])return t;t=t[Qn]}return null}(e[n.index])),e[Tt]}function HS(t,n){const e=t[Si],i=e?e.get(fa,null):null;i&&i.handleError(n)}function o0(t,n,e,i,r){for(let a=0;a<e.length;){const u=e[a++],f=e[a++];LS(t.data[u],n[u],i,f,r)}}function rR(t,n){const e=jo(n,t),i=e[Ye];!function oR(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(i,e);const r=e[Qn];null!==r&&null===e[Lo]&&(e[Lo]=Lb(r,e[Si])),s0(i,e,e[li])}function s0(t,n,e){Tc(n);try{const i=t.viewQuery;null!==i&&r0(1,i,e);const r=t.template;null!==r&&IS(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&BS(t,n),t.staticViewQueries&&r0(2,t.viewQuery,e);const a=t.components;null!==a&&function sR(t,n){for(let e=0;e<n.length;e++)rR(t,n[e])}(n,a)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[ft]&=-5,Mu()}}let GS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(e,i,r){const a=typeof Zone>"u"?null:Zone.current,u=function ss(t,n,e){const i=Object.create(as);e&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=n;const r=u=>{i.cleanupFn=u};return i.ref={notify:()=>Vt(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Vi(i))return;i.hasRun=!0;const u=Yn(i);try{i.cleanupFn(),i.cleanupFn=io,i.fn(r)}finally{Sn(i,u)}},cleanup:()=>i.cleanupFn()},i.ref}(e,S=>{this.all.has(S)&&this.queue.set(S,a)},r);let f;this.all.add(u),u.notify();const b=()=>{u.cleanup(),f?.(),this.all.delete(u),this.queue.delete(u)};return f=i?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[e,i]of this.queue)this.queue.delete(e),i?i.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>new t})}return t})();function G_(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==n)for(let u=0;u<n.length;u++){const f=n[u];"number"==typeof f?a=f:1==a?r=oc(r,f):2==a&&(i=oc(i,f+": "+n[++u]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function Sf(t,n,e,i,r=!1){for(;null!==e;){const a=n[e.index];null!==a&&i.push(ei(a)),Qi(a)&&$S(a,i);const u=e.type;if(8&u)Sf(t,n,e.child,i);else if(32&u){const f=pp(e,n);let b;for(;b=f();)i.push(b)}else if(16&u){const f=Ve(n,e);if(Array.isArray(f))i.push(...f);else{const b=Bc(n[ci]);Sf(b[Ye],b,f,i,!0)}}e=r?e.projectionNext:e.next}return i}function $S(t,n){for(let e=gi;e<t.length;e++){const i=t[e],r=i[Ye].firstChild;null!==r&&Sf(i[Ye],i,r,n)}t[un]!==t[Qn]&&n.push(t[un])}function $_(t,n,e,i=!0){const r=n[fn],a=r.rendererFactory,u=r.afterRenderEventManager;a.begin?.(),u?.begin();try{WS(t,n,t.template,e)}catch(b){throw i&&HS(n,b),b}finally{a.end?.(),r.effectManager?.flush(),u?.end()}}function WS(t,n,e,i){const r=n[ft];if(256!=(256&r)){n[fn].effectManager?.flush(),Tc(n);try{Sm(n),function Ug(t){return bt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&IS(t,n,e,2,i);const u=3==(3&r);if(u){const S=t.preOrderCheckHooks;null!==S&&Kh(n,S,null)}else{const S=t.preOrderHooks;null!==S&&Xh(n,S,0,null),da(n,0)}if(function cR(t){for(let n=mp(t);null!==n;n=cf(n)){if(!n[sa])continue;const e=n[Bo];for(let i=0;i<e.length;i++){jy(e[i])}}}(n),qS(n,2),null!==t.contentQueries&&BS(t,n),u){const S=t.contentCheckHooks;null!==S&&Kh(n,S)}else{const S=t.contentHooks;null!==S&&Xh(n,S,1),da(n,1)}!function OP(t,n){const e=t.hostBindingOpCodes;if(null===e)return;const i=TS(n,Gn);try{for(let r=0;r<e.length;r++){const a=e[r];if(a<0)Fs(~a);else{const u=a,f=e[++r],b=e[++r];Gy(f,u),i.dirty=!1;const S=Yn(i);try{b(2,n[u])}finally{Sn(i,S)}}}}finally{null===n[Gn]&&kS(n,Gn),Fs(-1)}}(t,n);const f=t.components;null!==f&&KS(n,f,0);const b=t.viewQuery;if(null!==b&&r0(2,b,i),u){const S=t.viewCheckHooks;null!==S&&Kh(n,S)}else{const S=t.viewHooks;null!==S&&Xh(n,S,2),da(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[ft]&=-73,Dr(n)}finally{Mu()}}}function qS(t,n){for(let e=mp(t);null!==e;e=cf(e))for(let i=gi;i<e.length;i++)ZS(e[i],n)}function dR(t,n,e){ZS(jo(n,t),e)}function ZS(t,n){if(!function Nh(t){return 128==(128&t[ft])}(t))return;const e=t[Ye],i=t[ft];if(80&i&&0===n||1024&i||2===n)WS(e,t,e.template,t[li]);else if(t[Ba]>0){qS(t,1);const r=e.components;null!==r&&KS(t,r,1)}}function KS(t,n,e){for(let i=0;i<n.length;i++)dR(t,n[i],e)}class Cf{get rootNodes(){const n=this._lView,e=n[Ye];return Sf(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[li]}set context(n){this._lView[li]=n}get destroyed(){return 256==(256&this._lView[ft])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[mn];if(Qi(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(w(n,i),ur(e,i))}this._attachedToViewContainer=!1}C(this._lView[Ye],this._lView)}onDestroy(n){!function zh(t,n){if(256==(256&t[ft]))throw new xe(911,!1);null===t[vo]&&(t[vo]=[]),t[vo].push(n)}(this._lView,n)}markForCheck(){xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[ft]&=-129}reattach(){this._lView[ft]|=128}detectChanges(){$_(this._lView[Ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function o(t,n){et(t,n,n[Tt],2,null,null)}(this._lView[Ye],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=n}}class uR extends Cf{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;$_(n[Ye],n,n[li],!1)}checkNoChanges(){}get context(){return null}}class XS extends B_{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Jt(n);return new Tf(e,this.ngModule)}}function QS(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class pR{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=gc(i);const r=this.injector.get(n,Vb,i);return r!==Vb||e===Vb?r:this.parentInjector.get(n,e,i)}}class Tf extends rS{get inputs(){const n=this.componentDef,e=n.inputTransforms,i=QS(n.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return QS(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function pu(t){return t.map(fm).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,r){let a=(r=r||this.ngModule)instanceof ma?r:r?.injector;a&&null!==this.componentDef.getStandaloneInjector&&(a=this.componentDef.getStandaloneInjector(a)||a);const u=a?new pR(n,a):n,f=u.get(bf,null);if(null===f)throw new xe(407,!1);const N={rendererFactory:f,sanitizer:u.get(cP,null),effectManager:u.get(GS,null),afterRenderEventManager:u.get(qb,null)},H=f.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",re=i?function NP(t,n,e,i){const a=i.get(xS,!1)||e===eo.ShadowDom,u=t.selectRootElement(n,a);return function LP(t){PS(t)}(u),u}(H,i,this.componentDef.encapsulation,u):Pd(H,K,function hR(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(K)),De=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ye=null;null!==re&&(ye=Lb(re,u,!0));const st=Jb(0,null,null,1,0,null,null,null,null,null,null),at=U_(null,st,null,De,null,null,N,H,u,null,ye);let jt,ti;Tc(at);try{const fi=this.componentDef;let ao,Ws=null;fi.findHostDirectiveDefs?(ao=[],Ws=new Map,fi.findHostDirectiveDefs(fi,ao,Ws),ao.push(fi)):ao=[fi];const hl=function fR(t,n){const e=t[Ye],i=$t;return t[i]=n,Tp(e,i,2,"#host",null)}(at,re),By=function gR(t,n,e,i,r,a,u){const f=r[Ye];!function _R(t,n,e,i){for(const r of t)n.mergedAttrs=El(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&(G_(n,n.mergedAttrs,!0),null!==e&&yi(i,e,n))}(i,t,n,u);let b=null;null!==n&&(b=Lb(n,r[Si]));const S=a.rendererFactory.createRenderer(n,e);let D=16;e.signals?D=4096:e.onPush&&(D=64);const N=U_(r,AS(e),null,D,r[t.index],t,a,S,null,null,b);return f.firstCreatePass&&t0(f,t,i.length-1),H_(r,N),r[t.index]=N}(hl,re,fi,ao,at,N,H);ti=wm(st,$t),re&&function yR(t,n,e,i){if(i)hd(t,e,["ng-version",dP.full]);else{const{attrs:r,classes:a}=function Rh(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let a=t[i];if("string"==typeof a)2===r?""!==a&&n.push(a,t[++i]):8===r&&e.push(a);else{if(!go(r))break;r=a}i++}return{attrs:n,classes:e}}(n.selectors[0]);r&&hd(t,e,r),a&&a.length>0&&Pr(t,e,a.join(" "))}}(H,fi,re,i),void 0!==e&&function bR(t,n,e){const i=t.projection=[];for(let r=0;r<n.length;r++){const a=e[r];i.push(null!=a?Array.from(a):null)}}(ti,this.ngContentSelectors,e),jt=function vR(t,n,e,i,r,a){const u=Ir(),f=r[Ye],b=Hr(u,r);FS(f,r,u,e,null,i);for(let D=0;D<e.length;D++)$r(Mc(r,f,u.directiveStart+D,u),r);NS(f,r,u),b&&$r(b,r);const S=Mc(r,f,u.directiveStart+u.componentOffset,u);if(t[li]=r[li]=S,null!==a)for(const D of a)D(S,n);return Xb(f,u,t),S}(By,fi,ao,Ws,at,[xR]),s0(st,at,null)}finally{Mu()}return new mR(this.componentType,jt,wp(ti,at),at,ti)}}class mR extends iP{constructor(n,e,i,r,a){super(),this.location=i,this._rootLView=r,this._tNode=a,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new uR(r),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const a=this._rootLView;o0(a[Ye],a,r,n,e),this.previousInputValues.set(n,e),xf(jo(this._tNode.index,a))}}get injector(){return new Ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function xR(){const t=Ir();Zh(Pe()[Ye],t)}function Qt(t){let n=function YS(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(Nt(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new xe(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);const u=t;u.inputs=W_(t.inputs),u.inputTransforms=W_(t.inputTransforms),u.declaredInputs=W_(t.declaredInputs),u.outputs=W_(t.outputs);const f=r.hostBindings;f&&TR(t,f);const b=r.viewQuery,S=r.contentQueries;if(b&&SR(t,b),S&&CR(t,S),Ia(t.inputs,r.inputs),Ia(t.declaredInputs,r.declaredInputs),Ia(t.outputs,r.outputs),null!==r.inputTransforms&&(null===u.inputTransforms&&(u.inputTransforms={}),Ia(u.inputTransforms,r.inputTransforms)),Nt(r)&&r.data.animation){const D=t.data;D.animation=(D.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let u=0;u<a.length;u++){const f=a[u];f&&f.ngInherit&&f(t),f===Qt&&(e=!1)}}n=Object.getPrototypeOf(n)}!function wR(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=El(r.hostAttrs,e=El(e,r.hostAttrs))}}(i)}function W_(t){return t===dn?{}:t===Wt?[]:t}function SR(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function CR(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,a)=>{n(i,r,a),e(i,r,a)}:n}function TR(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}function q_(t){return!!function a0(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function wo(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Fr(t,n,e,i){const r=Pe();return wo(r,bd(),n)&&(hn(),$l(vi(),r,t,n,e,i)),Fr}function Mi(t,n,e,i,r,a,u,f){const b=Pe(),S=hn(),D=t+$t,N=S.firstCreatePass?function XR(t,n,e,i,r,a,u,f,b){const S=n.consts,D=Tp(n,t,4,u||null,Ga(S,f));e0(n,e,D,Ga(S,b)),Zh(n,D);const N=D.tView=Jb(2,D,i,r,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,S,null);return null!==n.queries&&(n.queries.template(n,D),N.queries=n.queries.embeddedTView(D)),D}(D,S,b,n,e,i,r,a,u):S.data[D];ls(N,!1);const H=fC(S,b,N,t);Du()&&Ge(S,b,H,N),$r(H,b),H_(b,b[D]=zS(H,b,H,N)),Pl(N)&&Qb(S,b,N),null!=u&&Yb(b,N,f)}let fC=function gC(t,n,e,i){return Ll(!0),n[Tt].createComment("")};function tl(t){return function Os(t,n){return t[n]}(function Cc(){return bt.lFrame.contextLView}(),$t+t)}function hi(t,n,e){const i=Pe();return wo(i,bd(),n)&&js(hn(),vi(),i,t,n,i[Tt],e,!1),hi}function p0(t,n,e,i,r){const u=r?"class":"style";o0(t,e,n.inputs[u],u,i)}function gt(t,n,e,i){const r=Pe(),a=hn(),u=$t+t,f=r[Tt],b=a.firstCreatePass?function eO(t,n,e,i,r,a){const u=n.consts,b=Tp(n,t,2,i,Ga(u,r));return e0(n,e,b,Ga(u,a)),null!==b.attrs&&G_(b,b.attrs,!1),null!==b.mergedAttrs&&G_(b,b.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,b),b}(u,a,r,n,e,i):a.data[u],S=_C(a,r,b,f,n,t);r[u]=S;const D=Pl(b);return ls(b,!0),yi(f,S,b),32!=(32&b.flags)&&Du()&&Ge(a,r,S,b),0===function Uy(){return bt.lFrame.elementDepthCount}()&&$r(S,r),function Lg(){bt.lFrame.elementDepthCount++}(),D&&(Qb(a,r,b),Xb(a,b,r)),null!==i&&Yb(r,b),gt}function Mt(){let t=Ir();yd()?Bh():(t=t.parent,ls(t,!1));const n=t;(function km(t){return bt.skipHydrationRootTNode===t})(n)&&function Uo(){bt.skipHydrationRootTNode=null}(),function zg(){bt.lFrame.elementDepthCount--}();const e=hn();return e.firstCreatePass&&(Zh(e,t),aa(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Xy(t){return 0!=(8&t.flags)}(n)&&p0(e,n,Pe(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Qy(t){return 0!=(16&t.flags)}(n)&&p0(e,n,Pe(),n.stylesWithoutHost,!1),Mt}function Nr(t,n,e,i){return gt(t,n,e,i),Mt(),Nr}let _C=(t,n,e,i,r,a)=>(Ll(!0),Pd(i,r,function qh(){return bt.lFrame.currentNamespace}()));function If(){return Pe()}function Af(t){return!!t&&"function"==typeof t.then}function bC(t){return!!t&&"function"==typeof t.subscribe}function zi(t,n,e,i){const r=Pe(),a=hn(),u=Ir();return xC(a,r,r[Tt],u,t,n,i),zi}function g0(t,n){const e=Ir(),i=Pe(),r=hn();return xC(r,i,US(ri(r.data),e,i),e,t,n),g0}function xC(t,n,e,i,r,a,u){const f=Pl(i),S=t.firstCreatePass&&jS(t),D=n[li],N=VS(n);let H=!0;if(3&i.type||u){const ue=Hr(i,n),we=u?u(ue):ue,De=N.length,ye=u?at=>u(ei(at[i.index])):i.index;let st=null;if(!u&&f&&(st=function sO(t,n,e,i){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const u=r[a];if(u===e&&r[a+1]===i){const f=n[oa],b=r[a+2];return f.length>b?f[b]:null}"string"==typeof u&&(a+=2)}return null}(t,n,r,i.index)),null!==st)(st.__ngLastListenerFn__||st).__ngNextListenerFn__=a,st.__ngLastListenerFn__=a,H=!1;else{a=SC(i,n,D,a,!1);const at=e.listen(we,r,a);N.push(a,at),S&&S.push(r,ye,De,De+1)}}else a=SC(i,n,D,a,!1);const K=i.outputs;let re;if(H&&null!==K&&(re=K[r])){const ue=re.length;if(ue)for(let we=0;we<ue;we+=2){const jt=n[re[we]][re[we+1]].subscribe(a),ti=N.length;N.push(a,jt),S&&S.push(r,i.index,ti,-(ti+1))}}}function wC(t,n,e,i){try{return Rs(6,n,e),!1!==e(i)}catch(r){return HS(t,r),!1}finally{Rs(7,n,e)}}function SC(t,n,e,i,r){return function a(u){if(u===Function)return i;xf(t.componentOffset>-1?jo(t.index,n):n);let b=wC(n,e,i,u),S=a.__ngNextListenerFn__;for(;S;)b=wC(n,e,S,u)&&b,S=S.__ngNextListenerFn__;return r&&!1===b&&u.preventDefault(),b}}function Go(t=1){return function Hg(t){return(bt.lFrame.contextLView=function $y(t,n){for(;t>0;)n=n[ja],t--;return n}(t,bt.lFrame.contextLView))[li]}(t)}function aO(t,n){let e=null;const i=function _o(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const a=n[r];if("*"!==a){if(null===i?hu(t,a,!0):Ms(i,a))return r}else e=r}return e}function $o(t){const n=Pe()[ci][wi];if(!n.projection){const i=n.projection=Oc(t?t.length:1,null),r=i.slice();let a=n.child;for(;null!==a;){const u=t?aO(a,t):0;null!==u&&(r[u]?r[u].projectionNext=a:i[u]=a,r[u]=a),a=a.next}}}function Cn(t,n=0,e){const i=Pe(),r=hn(),a=Tp(r,$t+t,16,null,e||null);null===a.projection&&(a.projection=n),Bh(),(!i[Lo]||vd())&&32!=(32&a.flags)&&function Bt(t,n,e){Pn(n[Tt],0,n,e,F(t,e,n),pe(e.parent||n[wi],e,n))}(r,i,a)}function Y_(t,n){return t<<17|n<<2}function Od(t){return t>>17&32767}function v0(t){return 2|t}function Qu(t){return(131068&t)>>2}function y0(t,n){return-131069&t|n<<2}function b0(t){return 1|t}function RC(t,n,e,i,r){const a=t[e+1],u=null===n;let f=i?Od(a):Qu(a),b=!1;for(;0!==f&&(!1===b||u);){const D=t[f+1];pO(t[f],n)&&(b=!0,t[f+1]=i?b0(D):v0(D)),f=i?Od(D):Qu(D)}b&&(t[e+1]=i?v0(a):b0(a))}function pO(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Za(t,n)>=0}const Lr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function OC(t){return t.substring(Lr.key,Lr.keyEnd)}function mO(t){return t.substring(Lr.value,Lr.valueEnd)}function NC(t,n){const e=Lr.textEnd;let i=Lr.key=Fp(t,n,e);return e===i?-1:(i=Lr.keyEnd=function vO(t,n,e){let i;for(;n<e&&(45===(i=t.charCodeAt(n))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)n++;return n}(t,i,e),i=zC(t,i,e),i=Lr.value=Fp(t,i,e),i=Lr.valueEnd=function yO(t,n,e){let i=-1,r=-1,a=-1,u=n,f=u;for(;u<e;){const b=t.charCodeAt(u++);if(59===b)return f;34===b||39===b?f=u=BC(t,b,u,e):n===u-4&&85===a&&82===r&&76===i&&40===b?f=u=BC(t,41,u,e):b>32&&(f=u),a=r,r=i,i=-33&b}return f}(t,i,e),zC(t,i,e))}function Fp(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function zC(t,n,e,i){return(n=Fp(t,n,e))<e&&n++,n}function BC(t,n,e,i){let r=-1,a=e;for(;a<i;){const u=t.charCodeAt(a++);if(u==n&&92!==r)return a;r=92==u&&92===r?0:u}throw new Error}function x0(t,n,e){return il(t,n,e,!1),x0}function nr(t,n){return il(t,n,null,!0),nr}function nl(t){!function rl(t,n,e,i){const r=hn(),a=Wa(2);r.firstUpdatePass&&jC(r,null,a,i);const u=Pe();if(e!==Ht&&wo(u,a,e)){const f=r.data[Gr()];if($C(f,i)&&!VC(r,a)){let b=i?f.classesWithoutHost:f.stylesWithoutHost;null!==b&&(e=oc(b,e||"")),p0(r,f,u,e,i)}else!function MO(t,n,e,i,r,a,u,f){r===Ht&&(r=Wt);let b=0,S=0,D=0<r.length?r[0]:null,N=0<a.length?a[0]:null;for(;null!==D||null!==N;){const H=b<r.length?r[b+1]:void 0,K=S<a.length?a[S+1]:void 0;let ue,re=null;D===N?(b+=2,S+=2,H!==K&&(re=N,ue=K)):null===N||null!==D&&D<N?(b+=2,re=D):(S+=2,re=N,ue=K),null!==re&&HC(t,n,e,i,re,ue,u,f),D=b<r.length?r[b]:null,N=S<a.length?a[S]:null}}(r,f,u,u[Tt],u[a+1],u[a+1]=function kO(t,n,e){if(null==e||""===e)return Wt;const i=[],r=oi(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(i,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(i,a,r[a]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,a)}}(UC,bO,t,!1)}function bO(t,n){for(let e=function gO(t){return function LC(t){Lr.key=0,Lr.keyEnd=0,Lr.value=0,Lr.valueEnd=0,Lr.textEnd=t.length}(t),NC(t,Fp(t,0,Lr.textEnd))}(n);e>=0;e=NC(n,e))UC(t,OC(n),mO(n))}function il(t,n,e,i){const r=Pe(),a=hn(),u=Wa(2);a.firstUpdatePass&&jC(a,t,u,i),n!==Ht&&wo(r,u,n)&&HC(a,a.data[Gr()],r,r[Tt],t,r[u+1]=function DO(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=zn(oi(t)))),t}(n,e),i,u)}function VC(t,n){return n>=t.expandoStartIndex}function jC(t,n,e,i){const r=t.data;if(null===r[e+1]){const a=r[Gr()],u=VC(t,e);$C(a,i)&&null===n&&!u&&(n=!1),n=function wO(t,n,e,i){const r=ri(t);let a=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=Pf(e=w0(null,t,n,e,i),n.attrs,i),a=null);else{const u=n.directiveStylingLast;if(-1===u||t[u]!==r)if(e=w0(r,t,n,e,i),null===a){let b=function SO(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==Qu(i))return t[Od(i)]}(t,n,i);void 0!==b&&Array.isArray(b)&&(b=w0(null,t,n,b[1],i),b=Pf(b,n.attrs,i),function CO(t,n,e,i){t[Od(e?n.classBindings:n.styleBindings)]=i}(t,n,i,b))}else a=function TO(t,n,e){let i;const r=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<r;a++)i=Pf(i,t[a].hostAttrs,e);return Pf(i,n.attrs,e)}(t,n,i)}return void 0!==a&&(i?n.residualClasses=a:n.residualStyles=a),e}(r,a,n,i),function uO(t,n,e,i,r,a){let u=a?n.classBindings:n.styleBindings,f=Od(u),b=Qu(u);t[i]=e;let D,S=!1;if(Array.isArray(e)?(D=e[1],(null===D||Za(e,D)>0)&&(S=!0)):D=e,r)if(0!==b){const H=Od(t[f+1]);t[i+1]=Y_(H,f),0!==H&&(t[H+1]=y0(t[H+1],i)),t[f+1]=function cO(t,n){return 131071&t|n<<17}(t[f+1],i)}else t[i+1]=Y_(f,0),0!==f&&(t[f+1]=y0(t[f+1],i)),f=i;else t[i+1]=Y_(b,0),0===f?f=i:t[b+1]=y0(t[b+1],i),b=i;S&&(t[i+1]=v0(t[i+1])),RC(t,D,i,!0),RC(t,D,i,!1),function hO(t,n,e,i,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof n&&Za(a,n)>=0&&(e[i+1]=b0(e[i+1]))}(n,D,t,i,a),u=Y_(f,b),a?n.classBindings=u:n.styleBindings=u}(r,a,n,e,u,i)}}function w0(t,n,e,i,r){let a=null;const u=e.directiveEnd;let f=e.directiveStylingLast;for(-1===f?f=e.directiveStart:f++;f<u&&(a=n[f],i=Pf(i,a.hostAttrs,r),a!==t);)f++;return null!==t&&(e.directiveStylingLast=f),i}function Pf(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let a=0;a<n.length;a++){const u=n[a];"number"==typeof u?r=u:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),hr(t,u,!!e||n[++a]))}return void 0===t?null:t}function UC(t,n,e){hr(t,n,oi(e))}function HC(t,n,e,i,r,a,u,f){if(!(3&n.type))return;const b=t.data,S=b[f+1],D=function dO(t){return 1==(1&t)}(S)?GC(b,n,e,r,Qu(S),u):void 0;J_(D)||(J_(a)||function lO(t){return 2==(2&t)}(S)&&(a=GC(b,null,e,r,f,u)),function Fi(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let a=-1===i.indexOf("-")?void 0:Ka.DashCase;null==r?t.removeStyle(e,i,a):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),a|=Ka.Important),t.setStyle(e,i,r,a))}}(i,u,Fh(Gr(),e),r,a))}function GC(t,n,e,i,r,a){const u=null===n;let f;for(;r>0;){const b=t[r],S=Array.isArray(b),D=S?b[1]:b,N=null===D;let H=e[r+1];H===Ht&&(H=N?Wt:void 0);let K=N?Md(H,i):D===i?H:void 0;if(S&&!J_(K)&&(K=Md(b,i)),J_(K)&&(f=K,u))return f;const re=t[r+1];r=u?Od(re):Qu(re)}if(null!==n){let b=a?n.residualClasses:n.residualStyles;null!=b&&(f=Md(b,i))}return f}function J_(t){return void 0!==t}function $C(t,n){return 0!=(t.flags&(n?8:16))}function Tn(t,n=""){const e=Pe(),i=hn(),r=t+$t,a=i.firstCreatePass?Tp(i,r,1,n,null):i.data[r],u=WC(i,e,a,n,t);e[r]=u,Du()&&Ge(i,e,u,a),ls(a,!1)}let WC=(t,n,e,i,r)=>(Ll(!0),function Ul(t,n){return t.createText(n)}(n[Tt],i));function ev(t){return so("",t,""),ev}function so(t,n,e){const i=Pe(),r=function Ep(t,n,e,i){return wo(t,bd(),e)?n+Ct(e)+i:Ht}(i,t,n,e);return r!==Ht&&function Hc(t,n,e){const i=Fh(n,t);!function gp(t,n,e){t.setValue(n,e)}(t[Tt],i,e)}(i,Gr(),r),so}function S0(t,n,e){const i=Pe();if(wo(i,bd(),n)){const a=hn(),u=vi();js(a,u,i,t,n,US(ri(a.data),u,i),e,!0)}return S0}const Lp="en-US";let pT=Lp;function k0(t,n,e,i,r){if(t=kt(t),Array.isArray(t))for(let a=0;a<t.length;a++)k0(t[a],n,e,i,r);else{const a=hn(),u=Pe(),f=Ir();let b=Zu(t)?t:kt(t.provide);const S=J1(t),D=1048575&f.providerIndexes,N=f.directiveStart,H=f.providerIndexes>>20;if(Zu(t)||!t.multi){const K=new Iu(S,r,me),re=M0(b,n,r?D:D+H,N);-1===re?(Ru(ep(f,u),a,b),E0(a,t,n.length),n.push(b),f.directiveStart++,f.directiveEnd++,r&&(f.providerIndexes+=1048576),e.push(K),u.push(K)):(e[re]=K,u[re]=K)}else{const K=M0(b,n,D+H,N),re=M0(b,n,D,D+H),we=re>=0&&e[re];if(r&&!we||!r&&!(K>=0&&e[K])){Ru(ep(f,u),a,b);const De=function XF(t,n,e,i,r){const a=new Iu(t,e,me);return a.multi=[],a.index=n,a.componentProviders=0,zT(a,r,i&&!e),a}(r?KF:ZF,e.length,r,i,S);!r&&we&&(e[re].providerFactory=De),E0(a,t,n.length,0),n.push(b),f.directiveStart++,f.directiveEnd++,r&&(f.providerIndexes+=1048576),e.push(De),u.push(De)}else E0(a,t,K>-1?K:re,zT(e[r?re:K],S,!r&&i));!r&&i&&we&&e[re].componentProviders++}}}function E0(t,n,e,i){const r=Zu(n),a=function V2(t){return!!t.useClass}(n);if(r||a){const b=(a?kt(n.useClass):n).prototype.ngOnDestroy;if(b){const S=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const D=S.indexOf(e);-1===D?S.push(e,[i,b]):S[D+1].push(i,b)}else S.push(e,b)}}}function zT(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function M0(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function ZF(t,n,e,i){return D0(this.multi,[])}function KF(t,n,e,i){const r=this.multi;let a;if(this.providerFactory){const u=this.providerFactory.componentProviders,f=Mc(e,e[Ye],this.providerFactory.index,i);a=f.slice(0,u),D0(r,a);for(let b=u;b<f.length;b++)a.push(f[b])}else a=[],D0(r,a);return a}function D0(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function jn(t,n=[]){return e=>{e.providersResolver=(i,r)=>function qF(t,n,e){const i=hn();if(i.firstCreatePass){const r=Nt(t);k0(e,i.data,i.blueprint,r,!0),k0(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class Ju{}class BT{}class I0 extends Ju{constructor(n,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new XS(this);const r=jr(n);this._bootstrapComponents=Uc(r.bootstrap),this._r3Injector=dS(n,e,[{provide:Ju,useValue:this},{provide:B_,useValue:this.componentFactoryResolver},...i],zn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class A0 extends BT{constructor(n){super(),this.moduleType=n}create(n){return new I0(this.moduleType,n,[])}}class VT extends Ju{constructor(n){super(),this.componentFactoryResolver=new XS(this),this.instance=null;const e=new vp([...n.providers,{provide:Ju,useValue:this},{provide:B_,useValue:this.componentFactoryResolver}],n.parent||P_(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function P0(t,n,e=null){return new VT({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}let JF=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=K1(0,e.type),r=i.length>0?P0([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ze({token:t,providedIn:"environment",factory:()=>new t(Oe(ma))})}return t})();function jT(t){t.getStandaloneInjector=n=>n.get(JF).getOrCreateStandaloneInjector(t)}function O0(t,n,e){const i=function ro(){const t=bt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}()+t,r=Pe();return r[i]===Ht?function Wl(t,n,e){return t[n]=e}(r,i,e?n.call(e):n()):function kf(t,n){return t[n]}(r,i)}function CN(){return this._results[Symbol.iterator]()}class zp{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new tt)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=zp.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=CN)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=function cs(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function ob(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],a=n[i];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function kN(t,n,e,i=!0){const r=n[Ye];if(function h(t,n,e,i){const r=gi+i,a=e.length;i>0&&(e[r-1][Er]=n),i<a-gi?(n[Er]=e[r],Vm(e,gi+i,n)):(e.push(n),n[Er]=null),n[mn]=e;const u=n[yc];null!==u&&e!==u&&function m(t,n){const e=t[Bo];n[ci]!==n[mn][mn][ci]&&(t[sa]=!0),null===e?t[Bo]=[n]:e.push(n)}(u,n);const f=n[no];null!==f&&f.insertView(t),n[ft]|=128}(r,n,t,e),i){const a=Ke(e,t),u=n[Tt],f=le(u,t[un]);null!==f&&function l(t,n,e,i,r,a){i[Qn]=r,i[wi]=n,et(t,i,e,1,r,a)}(r,t[wi],u,n,f,a)}}let Gc=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=DN}return t})();const EN=Gc,MN=class extends EN{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){const r=function TN(t,n,e,i){const r=n.tView,f=U_(t,r,e,4096&t[ft]?4096:16,null,n,null,null,null,i?.injector??null,i?.hydrationInfo??null);f[yc]=t[n.index];const S=t[no];return null!==S&&(f[no]=S.createEmbeddedView(r)),s0(r,f,e),f}(this._declarationLView,this._declarationTContainer,n,{injector:e,hydrationInfo:i});return new Cf(r)}};function DN(){return ov(Ir(),Pe())}function ov(t,n){return 4&t.type?new MN(n,t,wp(t,n)):null}let ol=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=FN}return t})();function FN(){return ok(Ir(),Pe())}const NN=ol,ik=class extends NN{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return wp(this._hostTNode,this._hostLView)}get injector(){return new Ji(this._hostTNode,this._hostLView)}get parentInjector(){const n=Pu(this._hostTNode,this._hostLView);if(kc(n)){const e=Au(n,this._hostLView),i=Ec(n);return new Ji(e[Ye].data[i+8],e)}return new Ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=rk(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-gi}createEmbeddedView(n,e,i){let r,a;"number"==typeof i?r=i:null!=i&&(r=i.index,a=i.injector);const f=n.createEmbeddedViewImpl(e||{},a,null);return this.insertImpl(f,r,false),f}createComponent(n,e,i,r,a){const u=n&&!function Lu(t){return"function"==typeof t}(n);let f;if(u)f=e;else{const ue=e||{};f=ue.index,i=ue.injector,r=ue.projectableNodes,a=ue.environmentInjector||ue.ngModuleRef}const b=u?n:new Tf(Jt(n)),S=i||this.parentInjector;if(!a&&null==b.ngModule){const we=(u?S:this.parentInjector).get(ma,null);we&&(a=we)}Jt(b.componentType??{});const K=b.create(S,r,null,a);return this.insertImpl(K.hostView,f,false),K}insert(n,e){return this.insertImpl(n,e,!1)}insertImpl(n,e,i){const r=n._lView;if(function Lh(t){return Qi(t[mn])}(r)){const b=this.indexOf(n);if(-1!==b)this.detach(b);else{const S=r[mn],D=new ik(S,S[wi],S[mn]);D.detach(D.indexOf(n))}}const u=this._adjustIndex(e),f=this._lContainer;return kN(f,r,u,!i),n.attachToViewContainerRef(),Vm(F0(f),u,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=rk(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=w(this._lContainer,e);i&&(ur(F0(this._lContainer),e),C(i[Ye],i))}detach(n){const e=this._adjustIndex(n,-1),i=w(this._lContainer,e);return i&&null!=ur(F0(this._lContainer),e)?new Cf(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function rk(t){return t[8]}function F0(t){return t[8]||(t[8]=[])}function ok(t,n){let e;const i=n[t.index];return Qi(i)?e=i:(e=zS(i,n,null,t),n[t.index]=e,H_(n,e)),sk(e,n,t,i),new ik(e,t,n)}let sk=function ak(t,n,e,i){if(t[un])return;let r;r=8&e.type?ei(i):function LN(t,n){const e=t[Tt],i=e.createComment(""),r=Hr(n,t);return j(e,le(e,r),i,function oe(t,n){return t.nextSibling(n)}(e,r),!1),i}(n,e),t[un]=r};class N0{constructor(n){this.queryList=n,this.matches=null}clone(){return new N0(this.queryList)}setDirty(){this.queryList.setDirty()}}class L0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let a=0;a<i;a++){const u=e.getByIndex(a);r.push(this.queries[u.indexInDeclarationView].clone())}return new L0(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==hk(n,e).matches&&this.queries[e].setDirty()}}class lk{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class z0{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,a=this.getByIndex(i).embeddedTView(n,r);a&&(a.indexInDeclarationView=i,null!==e?e.push(a):e=[a])}return null!==e?new z0(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class B0{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new B0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];this.matchTNodeWithReadOption(n,e,VN(e,a)),this.matchTNodeWithReadOption(n,e,Fu(e,n,a,!1,!1))}else i===Gc?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Fu(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Rn||r===ol||r===Gc&&4&e.type)this.addMatch(e.index,-2);else{const a=Fu(e,n,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function VN(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function UN(t,n,e,i){return-1===e?function jN(t,n){return 11&t.type?wp(t,n):4&t.type?ov(t,n):null}(n,t):-2===e?function HN(t,n,e){return e===Rn?wp(n,t):e===Gc?ov(n,t):e===ol?ok(n,t):void 0}(t,n,i):Mc(t,t[Ye],e,n)}function ck(t,n,e,i){const r=n[no].queries[i];if(null===r.matches){const a=t.data,u=e.matches,f=[];for(let b=0;b<u.length;b+=2){const S=u[b];f.push(S<0?null:UN(n,a[S],u[b+1],e.metadata.read))}r.matches=f}return r.matches}function V0(t,n,e,i){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const u=ck(t,n,r,e);for(let f=0;f<a.length;f+=2){const b=a[f];if(b>0)i.push(u[f/2]);else{const S=a[f+1],D=n[-b];for(let N=gi;N<D.length;N++){const H=D[N];H[yc]===H[mn]&&V0(H[Ye],H,S,i)}if(null!==D[Bo]){const N=D[Bo];for(let H=0;H<N.length;H++){const K=N[H];V0(K[Ye],K,S,i)}}}}}return i}function gr(t){const n=Pe(),e=hn(),i=ku();Uh(i+1);const r=hk(e,i);if(t.dirty&&function Su(t){return 4==(4&t[ft])}(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?V0(e,n,i,[]):ck(e,n,r,i);t.reset(a,aP),t.notifyOnChanges()}return!0}return!1}function Fd(t,n,e){const i=hn();i.firstCreatePass&&(uk(i,new lk(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),dk(i,Pe(),n)}function Us(t,n,e,i){const r=hn();if(r.firstCreatePass){const a=Ir();uk(r,new lk(n,e,i),a.index),function $N(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}dk(r,Pe(),e)}function _r(){return function GN(t,n){return t[no].queries[n].queryList}(Pe(),ku())}function dk(t,n,e){const i=new zp(4==(4&e));(function VP(t,n,e,i){const r=VS(n);r.push(e),t.firstCreatePass&&jS(t).push(i,r.length-1)})(t,n,i,i.destroy),null===n[no]&&(n[no]=new L0),n[no].queries.push(new N0(i))}function uk(t,n,e){null===t.queries&&(t.queries=new z0),t.queries.track(new B0(n,e))}function hk(t,n){return t.queries.getByIndex(n)}const W0=new Le("Application Initializer");let q0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=qe(W0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const a=r();if(Af(a))e.push(a);else if(bC(a)){const u=new Promise((f,b)=>{a.subscribe({complete:f,error:b})});e.push(u)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Dk=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Zl=new Le("LocaleId",{providedIn:"root",factory:()=>qe(Zl,Gt.Optional|Gt.SkipSelf)||function hL(){return typeof $localize<"u"&&$localize.locale||Lp}()});let Ik=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new en(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class fL{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let Ak=(()=>{class t{compileModuleSync(e){return new A0(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),a=Uc(jr(e).declarations).reduce((u,f)=>{const b=Jt(f);return b&&u.push(new Tf(b)),u},[]);return new fL(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Fk=new Le(""),dv=new Le("");let Y0,X0=(()=>{class t{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Y0||(function LL(t){Y0=t}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==a),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Pt),Oe(Q0),Oe(dv))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})(),Q0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Y0?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Nd=null;const Nk=new Le("AllowMultipleToken"),J0=new Le("PlatformDestroyListeners"),ex=new Le("appBootstrapListener");class zk{constructor(n,e){this.name=n,this.token=e}}function Vk(t,n,e=[]){const i=`Platform: ${n}`,r=new Le(i);return(a=[])=>{let u=tx();if(!u||u.injector.get(Nk,!1)){const f=[...e,...a,{provide:r,useValue:!0}];t?t(f):function VL(t){if(Nd&&!Nd.get(Nk,!1))throw new xe(400,!1);(function Lk(){!function Ai(t){la=t}(()=>{throw new xe(600,!1)})})(),Nd=t;const n=t.get(Uk);(function Bk(t){t.get(eS,null)?.forEach(e=>e())})(t)}(function jk(t=[],n){return fs.create({name:n,providers:[{provide:Tb,useValue:"platform"},{provide:J0,useValue:new Set([()=>Nd=null])},...t]})}(f,i))}return function UL(t){const n=tx();if(!n)throw new xe(401,!1);return n}()}}function tx(){return Nd?.get(Uk)??null}let Uk=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function HL(t="zone.js",n){return"noop"===t?new wP:"zone.js"===t?new Pt(n):t}(i?.ngZone,function Hk(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const a=function YF(t,n,e){return new I0(t,n,e)}(e.moduleType,this.injector,function Zk(t){return[{provide:Pt,useFactory:t},{provide:_f,multi:!0,useFactory:()=>{const n=qe($L,{optional:!0});return()=>n.initialize()}},{provide:qk,useFactory:GL},{provide:fS,useFactory:gS}]}(()=>r)),u=a.injector.get(fa,null);return r.runOutsideAngular(()=>{const f=r.onError.subscribe({next:b=>{u.handleError(b)}});a.onDestroy(()=>{uv(this._modules,a),f.unsubscribe()})}),function Gk(t,n,e){try{const i=e();return Af(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(u,r,()=>{const f=a.injector.get(q0);return f.runInitializers(),f.donePromise.then(()=>(function mT(t){Cr(t,"Expected localeId to be defined"),"string"==typeof t&&(pT=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Zl,Lp)||Lp),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,i=[]){const r=$k({},i);return function zL(t,n,e){const i=new A0(e);return Promise.resolve(i)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const i=e.injector.get(eh);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new xe(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(J0,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(fs))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function $k(t,n){return Array.isArray(n)?n.reduce($k,t):{...t,...n}}let eh=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qe(qk),this.zoneIsStable=qe(fS),this.componentTypes=[],this.components=[],this.isStable=qe(Ik).hasPendingTasks.pipe(Ki(e=>e?mt(!1):this.zoneIsStable),nd(),Vr()),this._injector=qe(ma)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof rS;if(!this._injector.get(q0).done)throw!r&&function ra(t){const n=Jt(t)||Ii(t)||kr(t);return null!==n&&n.standalone}(e),new xe(405,!1);let u;u=r?e:this._injector.get(B_).resolveComponentFactory(e),this.componentTypes.push(u.componentType);const f=function BL(t){return t.isBoundToModule}(u)?void 0:this._injector.get(Ju),S=u.create(fs.NULL,[],i||u.selector,f),D=S.location.nativeElement,N=S.injector.get(Fk,null);return N?.registerApplication(D),S.onDestroy(()=>{this.detachView(S.hostView),uv(this.components,S),N?.unregisterApplication(D)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;uv(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(ex,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>uv(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new xe(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uv(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const qk=new Le("",{providedIn:"root",factory:()=>qe(fa).handleError.bind(void 0)});function GL(){const t=qe(Pt),n=qe(fa);return e=>t.runOutsideAngular(()=>n.handleError(e))}let $L=(()=>{class t{constructor(){this.zone=qe(Pt),this.applicationRef=qe(eh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Ld=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=qL}return t})();function qL(t){return function ZL(t,n,e){if(As(t)&&!e){const i=jo(t.index,n);return new Cf(i,i)}return 47&t.type?new Cf(n[ci],n):null}(Ir(),Pe(),16==(16&t))}class Yk{constructor(){}supports(n){return q_(n)}create(n){return new ez(n)}}const JL=(t,n)=>n;class ez{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||JL}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){const u=!i||e&&e.currentIndex<eE(i,r,a)?e:i,f=eE(u,r,a),b=u.currentIndex;if(u===i)r--,i=i._nextRemoved;else if(e=e._next,null==u.previousIndex)r++;else{a||(a=[]);const S=f-r,D=b-r;if(S!=D){for(let H=0;H<S;H++){const K=H<a.length?a[H]:a[H]=0,re=K+H;D<=re&&re<S&&(a[H]=K+1)}a[u.previousIndex]=D-S}}f!==b&&n(u,f,b)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!q_(n))throw new xe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,a,u,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let f=0;f<this.length;f++)a=n[f],u=this._trackByFn(f,a),null!==e&&Object.is(e.trackById,u)?(i&&(e=this._verifyReinsertion(e,a,u,f)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,u,f),i=!0),e=e._next}else r=0,function PR(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,f=>{u=this._trackByFn(r,f),null!==e&&Object.is(e.trackById,u)?(i&&(e=this._verifyReinsertion(e,f,u,r)),Object.is(e.item,f)||this._addIdentityChange(e,f)):(e=this._mismatch(e,f,u,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,a,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,a,r)):n=this._addAfter(new tz(e,i),a,r),n}_verifyReinsertion(n,e,i,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?n=this._reinsertAfter(a,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,a=n._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new Jk),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Jk),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class tz{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nz{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class Jk{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new nz,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function eE(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}function nE(){return new mv([new Yk])}let mv=(()=>{class t{static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:nE});constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||nE()),deps:[[t,new ds,new Ns]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new xe(901,!1)}}return t})();const az=Vk(null,"core",[]);let lz=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(eh))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})(),ax=null;function zd(){return ax}class wz{}const Un=new Le("DocumentToken");let lx=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(Cz)},providedIn:"platform"})}return t})();const Sz=new Le("Location Initialized");let Cz=(()=>{class t extends lx{constructor(){super(),this._doc=qe(Un),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zd().getBaseHref(this._doc)}onPopState(e){const i=zd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=zd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function cx(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function hE(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function $c(t){return t&&"?"!==t[0]?"?"+t:t}let nh=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(mE)},providedIn:"root"})}return t})();const pE=new Le("appBaseHref");let mE=(()=>{class t extends nh{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??qe(Un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return cx(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+$c(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const u=this.prepareExternalUrl(r+$c(a));this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,a){const u=this.prepareExternalUrl(r+$c(a));this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(lx),Oe(pE,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tz=(()=>{class t extends nh{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=cx(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let u=this.prepareExternalUrl(r+$c(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,a){let u=this.prepareExternalUrl(r+$c(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(lx),Oe(pE,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})(),dx=(()=>{class t{constructor(e){this._subject=new tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function Mz(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(hE(fE(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+$c(i))}normalize(e){return t.stripTrailingSlash(function Ez(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,fE(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$c(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$c(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=$c;static#t=this.joinWithSlash=cx;static#n=this.stripTrailingSlash=hE;static#i=this.\u0275fac=function(i){return new(i||t)(Oe(nh))};static#r=this.\u0275prov=Ze({token:t,factory:function(){return function kz(){return new dx(Oe(nh))}()},providedIn:"root"})}return t})();function fE(t){return t.replace(/\/index.html$/,"")}class g3{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kE=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,u)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new g3(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===a?void 0:a);else if(null!==a){const f=i.get(a);i.move(f,u),EE(f,r)}});for(let r=0,a=i.length;r<a;r++){const f=i.get(r).context;f.index=r,f.count=a,f.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{EE(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(me(ol),me(Gc),me(mv))};static#t=this.\u0275dir=Je({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function EE(t,n){t.context.$implicit=n.item}let kv=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new _3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ME("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ME("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(me(ol),me(Gc))};static#t=this.\u0275dir=Je({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class _3{constructor(){this.$implicit=null,this.ngIf=null}}function ME(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${zn(n)}'.`)}let $f=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})();const PE="browser";function Ev(t){return t===PE}function RE(t){return"server"===t}let q3=(()=>{class t{static#e=this.\u0275prov=Ze({token:t,providedIn:"root",factory:()=>new Z3(Oe(Un),window)})}return t})();class Z3{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function K3(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const u=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class yB extends wz{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ex extends yB{static makeCurrent(){!function xz(t){ax||(ax=t)}(new Ex)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function bB(){return qf=qf||document.querySelector("base"),qf?qf.getAttribute("href"):null}();return null==e?null:function xB(t){Iv=Iv||document.createElement("a"),Iv.setAttribute("href",t);const n=Iv.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){qf=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function p3(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let Iv,qf=null,SB=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const Mx=new Le("EventManagerPlugins");let zE=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(a=>a.supports(e)),!i)throw new xe(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Mx),Oe(Pt))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();class BE{constructor(n){this._doc=n}}const Dx="ng-app-id";let VE=(()=>{class t{constructor(e,i,r,a={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=RE(a),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${Dx}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const a=r.get(e);return a.usage+=i,a.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,a=r?.get(i);if(a?.parentNode===e)return r.delete(i),a.removeAttribute(Dx),a;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=i,this.platformIsServer&&u.setAttribute(Dx,this.appId),u}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const a=this.styleRef,u=a.get(i)?.elements;u?u.push(r):a.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Un),Oe(R_),Oe(Db,8),Oe(Rd))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const Ix={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ax=/%COMP%/g,EB=new Le("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function UE(t,n){return n.map(e=>e.replace(Ax,t))}let Px=(()=>{class t{constructor(e,i,r,a,u,f,b,S=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=a,this.doc=u,this.platformId=f,this.ngZone=b,this.nonce=S,this.rendererByCompId=new Map,this.platformIsServer=RE(f),this.defaultRenderer=new Rx(e,u,b,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===eo.ShadowDom&&(i={...i,encapsulation:eo.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof GE?r.applyToHost(e):r instanceof Ox&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let a=r.get(i.id);if(!a){const u=this.doc,f=this.ngZone,b=this.eventManager,S=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,N=this.platformIsServer;switch(i.encapsulation){case eo.Emulated:a=new GE(b,S,i,this.appId,D,u,f,N);break;case eo.ShadowDom:return new AB(b,S,e,i,u,f,this.nonce,N);default:a=new Ox(b,S,i,D,u,f,N)}r.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(zE),Oe(VE),Oe(R_),Oe(EB),Oe(Un),Oe(Rd),Oe(Pt),Oe(Db))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();class Rx{constructor(n,e,i,r){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(Ix[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(HE(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(HE(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new xe(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const a=Ix[r];a?n.setAttributeNS(a,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=Ix[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Ka.DashCase|Ka.Important)?n.style.setProperty(e,i,r&Ka.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Ka.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=zd().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function HE(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class AB extends Rx{constructor(n,e,i,r,a,u,f,b){super(n,a,u,b),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const S=UE(r.id,r.styles);for(const D of S){const N=document.createElement("style");f&&N.setAttribute("nonce",f),N.textContent=D,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ox extends Rx{constructor(n,e,i,r,a,u,f,b){super(n,a,u,f),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=b?UE(b,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class GE extends Ox{constructor(n,e,i,r,a,u,f,b){const S=r+"-"+i.id;super(n,e,i,a,u,f,b,S),this.contentAttr=function MB(t){return"_ngcontent-%COMP%".replace(Ax,t)}(S),this.hostAttr=function DB(t){return"_nghost-%COMP%".replace(Ax,t)}(S)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let PB=(()=>{class t extends BE{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Un))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const $E=["alt","control","meta","shift"],RB={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let FB=(()=>{class t extends BE{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const a=t.parseEventName(i),u=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zd().onAndCancel(e,a.domEventName,u))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(i.pop());let u="",f=i.indexOf("code");if(f>-1&&(i.splice(f,1),u="code."),$E.forEach(S=>{const D=i.indexOf(S);D>-1&&(i.splice(D,1),u+=S+".")}),u+=a,0!=i.length||0===a.length)return null;const b={};return b.domEventName=r,b.fullKey=u,b}static matchEventFullKeyCode(e,i){let r=RB[e.key]||e.key,a="";return i.indexOf("code.")>-1&&(r=e.code,a="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),$E.forEach(u=>{u!==r&&(0,OB[u])(e)&&(a+=u+".")}),a+=r,a===i)}static eventCallback(e,i,r){return a=>{t.matchEventFullKeyCode(a,e)&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Un))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const BB=Vk(az,"browser",[{provide:Rd,useValue:PE},{provide:eS,useValue:function NB(){Ex.makeCurrent()},multi:!0},{provide:Un,useFactory:function zB(){return function Or(t){pr=t}(document),document},deps:[]}]),VB=new Le(""),ZE=[{provide:dv,useClass:class wB{addToWindow(n){In.getAngularTestability=(i,r=!0)=>{const a=n.findTestabilityInTree(i,r);if(null==a)throw new xe(5103,!1);return a},In.getAllAngularTestabilities=()=>n.getAllTestabilities(),In.getAllAngularRootElements=()=>n.getAllRootElements(),In.frameworkStabilizers||(In.frameworkStabilizers=[]),In.frameworkStabilizers.push(i=>{const r=In.getAllAngularTestabilities();let a=r.length,u=!1;const f=function(b){u=u||b,a--,0==a&&i(u)};r.forEach(b=>{b.whenStable(f)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?zd().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:Fk,useClass:X0,deps:[Pt,Q0,dv]},{provide:X0,useClass:X0,deps:[Pt,Q0,dv]}],KE=[{provide:Tb,useValue:"root"},{provide:fa,useFactory:function LB(){return new fa},deps:[]},{provide:Mx,useClass:PB,multi:!0,deps:[Un,Pt,Rd]},{provide:Mx,useClass:FB,multi:!0,deps:[Un]},Px,VE,zE,{provide:bf,useExisting:Px},{provide:class X3{},useClass:SB,deps:[]},[]];let XE=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:R_,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(VB,12))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({providers:[...KE,...ZE],imports:[$f,lz]})}return t})(),QE=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Un))};static#t=this.\u0275prov=Ze({token:t,factory:function(i){let r=null;return r=i?new i:function UB(){return new QE(Oe(Un))}(),r},providedIn:"root"})}return t})();typeof window<"u"&&window;let Nx=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(i){let r=null;return r=i?new(i||t):Oe(eM),r},providedIn:"root"})}return t})(),eM=(()=>{class t extends Nx{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case oo.NONE:return i;case oo.HTML:return ui(i,"HTML")?oi(i):U1(this._doc,String(i)).toString();case oo.STYLE:return ui(i,"Style")?oi(i):i;case oo.SCRIPT:if(ui(i,"Script"))return oi(i);throw new xe(5200,!1);case oo.URL:return ui(i,"URL")?oi(i):_p(String(i));case oo.RESOURCE_URL:if(ui(i,"ResourceURL"))return oi(i);throw new xe(5201,!1);default:throw new xe(5202,!1)}}bypassSecurityTrustHtml(e){return function Wu(t){return new us(t)}(e)}bypassSecurityTrustStyle(e){return function T_(t){return new zs(t)}(e)}bypassSecurityTrustScript(e){return function df(t){return new Bs(t)}(e)}bypassSecurityTrustUrl(e){return function uf(t){return new Qa(t)}(e)}bypassSecurityTrustResourceUrl(e){return function Ja(t){return new hs(t)}(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Un))};static#t=this.\u0275prov=Ze({token:t,factory:function(i){let r=null;return r=i?new i:function WB(t){return new eM(t.get(Un))}(Oe(fs)),r},providedIn:"root"})}return t})();function nM(t,n,e,i,r,a,u){try{var f=t[a](u),b=f.value}catch(S){return void e(S)}f.done?n(b):Promise.resolve(b).then(i,r)}function iM(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var a=t.apply(n,e);function u(b){nM(a,i,r,u,f,"next",b)}function f(b){nM(a,i,r,u,f,"throw",b)}u(void 0)})}}var Av=ed(624);class rM extends Zt{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(n){const{hasError:e,_hasValue:i,_value:r,thrownError:a,isStopped:u,_isComplete:f}=this;e?n.error(a):(u||f)&&(i&&n.next(r),n.complete())}next(n){this.isStopped||(this._value=n,this._hasValue=!0)}complete(){const{_hasValue:n,_value:e,_isComplete:i}=this;i||(this._isComplete=!0,n&&super.next(e),super.complete())}}const Pv=Jd(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Zr(t,n){return Mn((e,i)=>{let r=0;e.subscribe(sn(i,a=>t.call(n,a,r++)&&i.next(a)))})}function ll(t){return t<=0?()=>Ln:Mn((n,e)=>{let i=0;n.subscribe(sn(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function Rv(t){return Mn((n,e)=>{let i=!1;n.subscribe(sn(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function oM(t=qB){return Mn((n,e)=>{let i=!1;n.subscribe(sn(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function qB(){return new Pv}function Vd(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Zr((r,a)=>t(r,a,i)):Di,ll(1),e?Rv(n):oM(()=>new Pv))}const ZB=["container"];let aM=(()=>{class t{constructor(e){this.zone=e,this.mapCreated=new rM,this.mapLoaded=new rM,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new En,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(e){this.zone.onStable.pipe(Vd()).subscribe(()=>{this.createMap(e.mapOptions),this.hookEvents(e.mapEvents),this.mapEvents=e.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),e.mapOptions.terrain&&this.mapInstance.on("load",()=>{this.updateTerrain(e.mapOptions.terrain)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(e)})}updateMaxZoom(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(e)})}updateMinPitch(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(e)})}updateMaxPitch(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(e)})}updateRenderWorldCopies(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(e)})}updateScrollZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(e)})}updateMaxBounds(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(e)})}updateTerrain(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setTerrain(e)})}getTerrain(){return this.zone.runOutsideAngular(()=>this.mapInstance.getTerrain())}changeCanvasCursor(e){this.mapInstance.getCanvasContainer().style.cursor=e}queryRenderedFeatures(e,i){return this.mapInstance.queryRenderedFeatures(e,i)}panTo(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(e,i)})}move(e,i,r,a,u,f){return this.zone.runOutsideAngular(()=>{this.mapInstance[e]({...i,zoom:r??this.mapInstance.getZoom(),center:a??this.mapInstance.getCenter(),bearing:u??this.mapInstance.getBearing(),pitch:f??this.mapInstance.getPitch()})})}addLayer(e,i,r){this.zone.runOutsideAngular(()=>{Object.keys(e.layerOptions).forEach(a=>{void 0===e.layerOptions[a]&&delete e.layerOptions[a]}),this.mapInstance.addLayer(e.layerOptions,r),i&&(e.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerClick.emit(a)})}),e.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerDblClick.emit(a)})}),e.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseDown.emit(a)})}),e.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseUp.emit(a)})}),e.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseEnter.emit(a)})}),e.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseLeave.emit(a)})}),e.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseMove.emit(a)})}),e.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseOver.emit(a)})}),e.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerMouseOut.emit(a)})}),e.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerContextMenu.emit(a)})}),e.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerTouchStart.emit(a)})}),e.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerTouchEnd.emit(a)})}),e.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",e.layerOptions.id,a=>{this.zone.run(()=>{e.layerEvents.layerTouchCancel.emit(a)})}))})}removeLayer(e){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(e)&&this.mapInstance.removeLayer(e)})}addMarker(e){const i={offset:e.markersOptions.offset,anchor:e.markersOptions.anchor,draggable:!!e.markersOptions.draggable,rotationAlignment:e.markersOptions.rotationAlignment,pitchAlignment:e.markersOptions.pitchAlignment,clickTolerance:e.markersOptions.clickTolerance};e.markersOptions.element.childNodes.length>0&&(i.element=e.markersOptions.element);const r=new Av.Marker(i);return e.markersEvents.markerDragStart.observers.length&&r.on("dragstart",u=>{if(u){const{target:f}=u;this.zone.run(()=>{e.markersEvents.markerDragStart.emit(f)})}}),e.markersEvents.markerDrag.observers.length&&r.on("drag",u=>{if(u){const{target:f}=u;this.zone.run(()=>{e.markersEvents.markerDrag.emit(f)})}}),e.markersEvents.markerDragEnd.observers.length&&r.on("dragend",u=>{if(u){const{target:f}=u;this.zone.run(()=>{e.markersEvents.markerDragEnd.emit(f)})}}),r.setLngLat(e.markersOptions.feature?e.markersOptions.feature.geometry.coordinates:e.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(r.addTo(this.mapInstance),r))}removeMarker(e){this.markersToRemove.push(e)}createPopup(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(e.popupOptions).forEach(a=>void 0===e.popupOptions[a]&&delete e.popupOptions[a]);const r=new Av.Popup(e.popupOptions);return r.setDOMContent(i),e.popupEvents.popupClose.observers.length&&r.on("close",()=>{this.zone.run(()=>{e.popupEvents.popupClose.emit()})}),e.popupEvents.popupOpen.observers.length&&r.on("open",()=>{this.zone.run(()=>{e.popupEvents.popupOpen.emit()})}),r})}addPopupToMap(e,i,r=!1){return this.zone.runOutsideAngular(()=>{r&&e._listeners&&delete e._listeners.open,e.setLngLat(i),e.addTo(this.mapInstance)})}addPopupToMarker(e,i){return this.zone.runOutsideAngular(()=>{e.setPopup(i)})}removePopupFromMap(e,i=!1){i&&e._listeners&&delete e._listeners.close,this.popupsToRemove.push(e)}removePopupFromMarker(e){return this.zone.runOutsideAngular(()=>{e.setPopup(void 0)})}addControl(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(e,i)})}removeControl(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(e)})}loadAndAddImage(e,i,r){var a=this;return iM(function*(){return a.zone.runOutsideAngular(()=>new Promise((u,f)=>{a.mapInstance.loadImage(i,(b,S)=>{b?f(b):(a.addImage(e,S,r),u())})}))})()}addImage(e,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(e,i,r)})}removeImage(e){this.imageIdsToRemove.push(e)}addSource(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>void 0===i[r]&&delete i[r]),this.mapInstance.addSource(e,i)})}getSource(e){return this.mapInstance.getSource(e)}removeSource(e){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(e).forEach(i=>this.mapInstance.removeLayer(i.id)),this.mapInstance.removeSource(e)})}setAllLayerPaintProperty(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>{this.mapInstance.setPaintProperty(e,r,i[r])})})}setAllLayerLayoutProperty(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>{this.mapInstance.setLayoutProperty(e,r,i[r])})})}setLayerFilter(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(e,i)})}setLayerBefore(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(e,i)})}setLayerZoomRange(e,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(e,i||0,r||20)})}fitBounds(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(e,i)})}fitScreenCoordinates(e,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(e[0],e[1],i,r)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(e){Pt.assertNotInAngularZone(),Object.keys(e).forEach(r=>{void 0===e[r]&&delete e[r]}),this.mapInstance=new Av.Map(e),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(e.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const e of this.markersToRemove)e.remove();this.markersToRemove=[]}removePopups(){for(const e of this.popupsToRemove)e.remove();this.popupsToRemove=[]}removeImages(){for(const e of this.imageIdsToRemove)this.mapInstance.removeImage(e);this.imageIdsToRemove=[]}findLayersBySourceId(e){const i=this.mapInstance.getStyle().layers;return null==i?[]:i.filter(r=>"source"in r&&r.source===e)}hookEvents(e){this.mapInstance.on("load",i=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{e.mapLoad.emit(i.target)})}),e.mapResize.observers.length&&this.mapInstance.on("resize",i=>this.zone.run(()=>{e.mapResize.emit(i)})),e.mapRemove.observers.length&&this.mapInstance.on("remove",i=>this.zone.run(()=>{e.mapRemove.emit(i)})),e.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",i=>this.zone.run(()=>{e.mapMouseDown.emit(i)})),e.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",i=>this.zone.run(()=>{e.mapMouseUp.emit(i)})),e.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",i=>this.zone.run(()=>{e.mapMouseMove.emit(i)})),e.mapClick.observers.length&&this.mapInstance.on("click",i=>this.zone.run(()=>{e.mapClick.emit(i)})),e.mapDblClick.observers.length&&this.mapInstance.on("dblclick",i=>this.zone.run(()=>{e.mapDblClick.emit(i)})),e.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",i=>this.zone.run(()=>{e.mapMouseOver.emit(i)})),e.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",i=>this.zone.run(()=>{e.mapMouseOut.emit(i)})),e.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",i=>this.zone.run(()=>{e.mapContextMenu.emit(i)})),e.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",i=>this.zone.run(()=>{e.mapTouchStart.emit(i)})),e.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",i=>this.zone.run(()=>{e.mapTouchEnd.emit(i)})),e.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",i=>this.zone.run(()=>{e.mapTouchMove.emit(i)})),e.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",i=>this.zone.run(()=>{e.mapTouchCancel.emit(i)})),e.mapWheel.observers.length&&this.mapInstance.on("wheel",i=>this.zone.run(()=>{e.mapWheel.emit(i)})),e.moveStart.observers.length&&this.mapInstance.on("movestart",i=>this.zone.run(()=>e.moveStart.emit(i))),e.move.observers.length&&this.mapInstance.on("move",i=>this.zone.run(()=>e.move.emit(i))),e.moveEnd.observers.length&&this.mapInstance.on("moveend",i=>this.zone.run(()=>e.moveEnd.emit(i))),e.mapDragStart.observers.length&&this.mapInstance.on("dragstart",i=>this.zone.run(()=>{e.mapDragStart.emit(i)})),e.mapDrag.observers.length&&this.mapInstance.on("drag",i=>this.zone.run(()=>{e.mapDrag.emit(i)})),e.mapDragEnd.observers.length&&this.mapInstance.on("dragend",i=>this.zone.run(()=>{e.mapDragEnd.emit(i)})),e.zoomStart.observers.length&&this.mapInstance.on("zoomstart",i=>this.zone.run(()=>e.zoomStart.emit(i))),e.zoomEvt.observers.length&&this.mapInstance.on("zoom",i=>this.zone.run(()=>e.zoomEvt.emit(i))),e.zoomEnd.observers.length&&this.mapInstance.on("zoomend",i=>this.zone.run(()=>e.zoomEnd.emit(i))),e.rotateStart.observers.length&&this.mapInstance.on("rotatestart",i=>this.zone.run(()=>e.rotateStart.emit(i))),e.rotate.observers.length&&this.mapInstance.on("rotate",i=>this.zone.run(()=>e.rotate.emit(i))),e.rotateEnd.observers.length&&this.mapInstance.on("rotateend",i=>this.zone.run(()=>e.rotateEnd.emit(i))),e.pitchStart.observers.length&&this.mapInstance.on("pitchstart",i=>this.zone.run(()=>e.pitchStart.emit(i))),e.pitchEvt.observers.length&&this.mapInstance.on("pitch",i=>this.zone.run(()=>e.pitchEvt.emit(i))),e.pitchEnd.observers.length&&this.mapInstance.on("pitchend",i=>this.zone.run(()=>e.pitchEnd.emit(i))),e.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",i=>this.zone.run(()=>e.boxZoomStart.emit(i))),e.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",i=>this.zone.run(()=>e.boxZoomEnd.emit(i))),e.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",i=>this.zone.run(()=>e.boxZoomCancel.emit(i))),e.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",i=>this.zone.run(()=>e.webGlContextLost.emit(i))),e.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",i=>this.zone.run(()=>e.webGlContextRestored.emit(i))),e.render.observers.length&&this.mapInstance.on("render",i=>this.zone.run(()=>e.render.emit(i))),e.mapError.observers.length&&this.mapInstance.on("error",i=>this.zone.run(()=>{e.mapError.emit(i)})),e.data.observers.length&&this.mapInstance.on("data",i=>this.zone.run(()=>e.data.emit(i))),e.styleData.observers.length&&this.mapInstance.on("styledata",i=>this.zone.run(()=>e.styleData.emit(i))),e.sourceData.observers.length&&this.mapInstance.on("sourcedata",i=>this.zone.run(()=>e.sourceData.emit(i))),e.dataLoading.observers.length&&this.mapInstance.on("dataloading",i=>this.zone.run(()=>e.dataLoading.emit(i))),e.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",i=>this.zone.run(()=>e.styleDataLoading.emit(i))),e.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",i=>this.zone.run(()=>e.sourceDataLoading.emit(i))),e.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",i=>this.zone.run(()=>e.styleImageMissing.emit(i))),e.idle.observers.length&&this.mapInstance.on("idle",i=>this.zone.run(()=>e.idle.emit(i)))}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Pt))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})(),JB=(()=>{class t{get mapInstance(){return this.mapService.mapInstance}constructor(e){this.mapService=e,this.movingMethod="flyTo",this.mapResize=new tt,this.mapRemove=new tt,this.mapMouseDown=new tt,this.mapMouseUp=new tt,this.mapMouseMove=new tt,this.mapClick=new tt,this.mapDblClick=new tt,this.mapMouseOver=new tt,this.mapMouseOut=new tt,this.mapContextMenu=new tt,this.mapTouchStart=new tt,this.mapTouchEnd=new tt,this.mapTouchMove=new tt,this.mapTouchCancel=new tt,this.mapWheel=new tt,this.moveStart=new tt,this.move=new tt,this.moveEnd=new tt,this.mapDragStart=new tt,this.mapDrag=new tt,this.mapDragEnd=new tt,this.zoomStart=new tt,this.zoomEvt=new tt,this.zoomEnd=new tt,this.rotateStart=new tt,this.rotate=new tt,this.rotateEnd=new tt,this.pitchStart=new tt,this.pitchEvt=new tt,this.pitchEnd=new tt,this.boxZoomStart=new tt,this.boxZoomEnd=new tt,this.boxZoomCancel=new tt,this.webGlContextLost=new tt,this.webGlContextRestored=new tt,this.mapLoad=new tt,this.idle=new tt,this.render=new tt,this.mapError=new tt,this.data=new tt,this.styleData=new tt,this.sourceData=new tt,this.dataLoading=new tt,this.styleDataLoading=new tt,this.sourceDataLoading=new tt,this.styleImageMissing=new tt}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,terrain:this.terrain},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(e){var i=this;return iM(function*(){yield i.mapService.mapCreated$.toPromise(),e.cursorStyle&&!e.cursorStyle.isFirstChange()&&i.mapService.changeCanvasCursor(e.cursorStyle.currentValue),e.minZoom&&!e.minZoom.isFirstChange()&&i.mapService.updateMinZoom(e.minZoom.currentValue),e.maxZoom&&!e.maxZoom.isFirstChange()&&i.mapService.updateMaxZoom(e.maxZoom.currentValue),e.minPitch&&!e.minPitch.isFirstChange()&&i.mapService.updateMinPitch(e.minPitch.currentValue),e.maxPitch&&!e.maxPitch.isFirstChange()&&i.mapService.updateMaxPitch(e.maxPitch.currentValue),e.renderWorldCopies&&!e.renderWorldCopies.isFirstChange()&&i.mapService.updateRenderWorldCopies(e.renderWorldCopies.currentValue),e.scrollZoom&&!e.scrollZoom.isFirstChange()&&i.mapService.updateScrollZoom(e.scrollZoom.currentValue),e.dragRotate&&!e.dragRotate.isFirstChange()&&i.mapService.updateDragRotate(e.dragRotate.currentValue),e.touchPitch&&!e.touchPitch.isFirstChange()&&i.mapService.updateTouchPitch(e.touchPitch.currentValue),e.touchZoomRotate&&!e.touchZoomRotate.isFirstChange()&&i.mapService.updateTouchZoomRotate(e.touchZoomRotate.currentValue),e.doubleClickZoom&&!e.doubleClickZoom.isFirstChange()&&i.mapService.updateDoubleClickZoom(e.doubleClickZoom.currentValue),e.keyboard&&!e.keyboard.isFirstChange()&&i.mapService.updateKeyboard(e.keyboard.currentValue),e.dragPan&&!e.dragPan.isFirstChange()&&i.mapService.updateDragPan(e.dragPan.currentValue),e.boxZoom&&!e.boxZoom.isFirstChange()&&i.mapService.updateBoxZoom(e.boxZoom.currentValue),e.style&&!e.style.isFirstChange()&&i.mapService.updateStyle(e.style.currentValue),e.maxBounds&&!e.maxBounds.isFirstChange()&&i.mapService.updateMaxBounds(e.maxBounds.currentValue),e.fitBounds&&e.fitBounds.currentValue&&!e.fitBounds.isFirstChange()&&i.mapService.fitBounds(e.fitBounds.currentValue,i.fitBoundsOptions),e.fitScreenCoordinates&&e.fitScreenCoordinates.currentValue&&((i.center||i.zoom||i.pitch||i.fitBounds)&&e.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-maplibre-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),i.mapService.fitScreenCoordinates(e.fitScreenCoordinates.currentValue,i.bearing?i.bearing[0]:0,i.movingOptions)),!i.centerWithPanTo||!e.center||e.center.isFirstChange()||e.zoom||e.bearing||e.pitch?(e.center&&!e.center.isFirstChange()||e.zoom&&!e.zoom.isFirstChange()||e.bearing&&!e.bearing.isFirstChange()&&!e.fitScreenCoordinates||e.pitch&&!e.pitch.isFirstChange())&&i.mapService.move(i.movingMethod,i.movingOptions,e.zoom&&i.zoom?i.zoom[0]:void 0,e.center?i.center:void 0,e.bearing&&i.bearing?i.bearing[0]:void 0,e.pitch&&i.pitch?i.pitch[0]:void 0):i.mapService.panTo(i.center,i.panToOptions),e.terrain&&!e.terrain.isFirstChange()&&i.mapService.updateTerrain(e.terrain.currentValue)})()}static#e=this.\u0275fac=function(i){return new(i||t)(me(aM))};static#t=this.\u0275cmp=ai({type:t,selectors:[["mgl-map"]],viewQuery:function(i,r){if(1&i&&Fd(ZB,7),2&i){let a;gr(a=_r())&&(r.mapContainer=a.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",terrain:"terrain",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[jn([aM]),yo],decls:2,vars:0,consts:[["container",""]],template:function(i,r){1&i&&Nr(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}return t})(),e5=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[$f]})}return t})();const{isArray:n5}=Array,{getPrototypeOf:r5,prototype:o5,keys:s5}=Object;function lM(t){if(1===t.length){const n=t[0];if(n5(n))return{args:n,keys:null};if(function a5(t){return t&&"object"==typeof t&&r5(t)===o5}(n)){const e=s5(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:l5}=Array;function Lx(t){return It(n=>function c5(t,n){return l5(n)?t(...n):t(n)}(t,n))}function cM(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function Ov(...t){const n=rn(t),e=vh(t),{args:i,keys:r}=lM(t);if(0===i.length)return yt([],n);const a=new yn(function d5(t,n,e=Di){return i=>{dM(n,()=>{const{length:r}=t,a=new Array(r);let u=r,f=r;for(let b=0;b<r;b++)dM(n,()=>{const S=yt(t[b],n);let D=!1;S.subscribe(sn(i,N=>{a[b]=N,D||(D=!0,f--),f||i.next(e(a.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,n,r?u=>cM(r,u):Di));return e?a.pipe(Lx(e)):a}function dM(t,n,e){t?At(e,t,n):n()}function Fv(...t){return function u5(){return Hn(1)}()(yt(t,rn(t)))}function uM(t){return new yn(n=>{Xe(t()).subscribe(n)})}function Hp(t,n){const e=tn(t)?t:()=>t,i=r=>r.error(e());return new yn(n?r=>n.schedule(i,0,r):i)}function zx(){return Mn((t,n)=>{let e=null;t._refCount++;const i=sn(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class hM extends yn{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Ta(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new En;const e=this.getSubject();n.add(this.source.subscribe(sn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=En.EMPTY)}return n}refCount(){return zx()(this)}}function Nv(...t){const n=rn(t);return Mn((e,i)=>{(n?Fv(t,e,n):Fv(t,e)).subscribe(i)})}function Gp(t,n){return tn(n)?Ft(t,n,1):Ft(t,1)}function yr(t,n,e){const i=tn(t)||n||e?{next:t,error:n,complete:e}:t;return i?Mn((r,a)=>{var u;null===(u=i.subscribe)||void 0===u||u.call(i);let f=!0;r.subscribe(sn(a,b=>{var S;null===(S=i.next)||void 0===S||S.call(i,b),a.next(b)},()=>{var b;f=!1,null===(b=i.complete)||void 0===b||b.call(i),a.complete()},b=>{var S;f=!1,null===(S=i.error)||void 0===S||S.call(i,b),a.error(b)},()=>{var b,S;f&&(null===(b=i.unsubscribe)||void 0===b||b.call(i)),null===(S=i.finalize)||void 0===S||S.call(i)}))}):Di}function jd(t){return Mn((n,e)=>{let a,i=null,r=!1;i=n.subscribe(sn(e,void 0,void 0,u=>{a=Xe(t(u,jd(t)(n))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function Bx(t){return t<=0?()=>Ln:Mn((n,e)=>{let i=[];n.subscribe(sn(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Vx(t){return It(()=>t)}function Lv(t){return Mn((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function Ko(t){return Mn((n,e)=>{Xe(t).subscribe(sn(e,()=>e.complete(),Zs)),!e.closed&&n.subscribe(e)})}const qt="primary",Zf=Symbol("RouteTitle");class f5{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function $p(t){return new f5(t)}function g5(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let a=0;a<i.length;a++){const u=i[a],f=t[a];if(u.startsWith(":"))r[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Kl(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!pM(t[r],n[r]))return!1;return!0}function pM(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,a)=>i[a]===r)}return t===n}function mM(t){return t.length>0?t[t.length-1]:null}function Ud(t){return function t5(t){return!!t&&(t instanceof yn||tn(t.lift)&&tn(t.subscribe))}(t)?t:Af(t)?yt(Promise.resolve(t)):mt(t)}const v5={exact:function _M(t,n,e){if(!ih(t.segments,n.segments)||!zv(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!_M(t.children[i],n.children[i],e))return!1;return!0},subset:vM},fM={exact:function y5(t,n){return Kl(t,n)},subset:function b5(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>pM(t[e],n[e]))},ignored:()=>!0};function gM(t,n,e){return v5[e.paths](t.root,n.root,e.matrixParams)&&fM[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function vM(t,n,e){return yM(t,n,n.segments,e)}function yM(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!ih(r,e)||n.hasChildren()||!zv(r,e,i))}if(t.segments.length===e.length){if(!ih(t.segments,e)||!zv(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!vM(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(ih(t.segments,r)&&zv(t.segments,r,i)&&t.children[qt])&&yM(t.children[qt],n,a,i)}}function zv(t,n,e){return n.every((i,r)=>fM[e](t[r].parameters,i.parameters))}class Wp{constructor(n=new qn([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$p(this.queryParams)),this._queryParamMap}toString(){return S5.serialize(this)}}class qn{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bv(this)}}class Kf{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=$p(this.parameters)),this._parameterMap}toString(){return wM(this)}}function ih(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let Xf=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return new jx},providedIn:"root"})}return t})();class jx{parse(n){const e=new O5(n);return new Wp(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Qf(n.root,!0)}`,i=function k5(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${Vv(e)}=${Vv(r)}`).join("&"):`${Vv(e)}=${Vv(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function C5(t){return encodeURI(t)}(n.fragment)}`:""}`}}const S5=new jx;function Bv(t){return t.segments.map(n=>wM(n)).join("/")}function Qf(t,n){if(!t.hasChildren())return Bv(t);if(n){const e=t.children[qt]?Qf(t.children[qt],!1):"",i=[];return Object.entries(t.children).forEach(([r,a])=>{r!==qt&&i.push(`${r}:${Qf(a,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function w5(t,n){let e=[];return Object.entries(t.children).forEach(([i,r])=>{i===qt&&(e=e.concat(n(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==qt&&(e=e.concat(n(r,i)))}),e}(t,(i,r)=>r===qt?[Qf(t.children[qt],!1)]:[`${r}:${Qf(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[qt]?`${Bv(t)}/${e[0]}`:`${Bv(t)}/(${e.join("//")})`}}function bM(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vv(t){return bM(t).replace(/%3B/gi,";")}function Ux(t){return bM(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jv(t){return decodeURIComponent(t)}function xM(t){return jv(t.replace(/\+/g,"%20"))}function wM(t){return`${Ux(t.path)}${function T5(t){return Object.keys(t).map(n=>`;${Ux(n)}=${Ux(t[n])}`).join("")}(t.parameters)}`}const E5=/^[^\/()?;#]+/;function Hx(t){const n=t.match(E5);return n?n[0]:""}const M5=/^[^\/()?;=#]+/,I5=/^[^=?&#]+/,P5=/^[^&#]+/;class O5{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qn([],{}):new qn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[qt]=new qn(n,e)),i}parseSegment(){const n=Hx(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new xe(4009,!1);return this.capture(n),new Kf(jv(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function D5(t){const n=t.match(M5);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Hx(this.remaining);r&&(i=r,this.capture(i))}n[jv(e)]=jv(i)}parseQueryParam(n){const e=function A5(t){const n=t.match(I5);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const u=function R5(t){const n=t.match(P5);return n?n[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=xM(e),a=xM(i);if(n.hasOwnProperty(r)){let u=n[r];Array.isArray(u)||(u=[u],n[r]=u),u.push(a)}else n[r]=a}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Hx(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new xe(4010,!1);let a;i.indexOf(":")>-1?(a=i.slice(0,i.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=qt);const u=this.parseChildren();e[a]=1===Object.keys(u).length?u[qt]:new qn([],u),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new xe(4011,!1)}}function SM(t){return t.segments.length>0?new qn([],{[qt]:t}):t}function CM(t){const n={};for(const i of Object.keys(t.children)){const a=CM(t.children[i]);if(i===qt&&0===a.segments.length&&a.hasChildren())for(const[u,f]of Object.entries(a.children))n[u]=f;else(a.segments.length>0||a.hasChildren())&&(n[i]=a)}return function F5(t){if(1===t.numberOfChildren&&t.children[qt]){const n=t.children[qt];return new qn(t.segments.concat(n.segments),n.children)}return t}(new qn(t.segments,n))}function rh(t){return t instanceof Wp}function TM(t){let n;const r=SM(function e(a){const u={};for(const b of a.children){const S=e(b);u[b.outlet]=S}const f=new qn(a.url,u);return a===t&&(n=f),f}(t.root));return n??r}function kM(t,n,e,i){let r=t;for(;r.parent;)r=r.parent;if(0===n.length)return Gx(r,r,r,e,i);const a=function L5(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new MM(!0,0,t);let n=0,e=!1;const i=t.reduce((r,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([b,S])=>{f[b]="string"==typeof S?S.split("/"):S}),[...r,{outlets:f}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===u?(a.split("/").forEach((f,b)=>{0==b&&"."===f||(0==b&&""===f?e=!0:".."===f?n++:""!=f&&r.push(f))}),r):[...r,a]},[]);return new MM(e,n,i)}(n);if(a.toRoot())return Gx(r,r,new qn([],{}),e,i);const u=function z5(t,n,e){if(t.isAbsolute)return new Hv(n,!0,0);if(!e)return new Hv(n,!1,NaN);if(null===e.parent)return new Hv(e,!0,0);const i=Uv(t.commands[0])?0:1;return function B5(t,n,e){let i=t,r=n,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new xe(4005,!1);r=i.segments.length}return new Hv(i,!1,r-a)}(e,e.segments.length-1+i,t.numberOfDoubleDots)}(a,r,t),f=u.processChildren?Jf(u.segmentGroup,u.index,a.commands):DM(u.segmentGroup,u.index,a.commands);return Gx(r,u.segmentGroup,f,e,i)}function Uv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Yf(t){return"object"==typeof t&&null!=t&&t.outlets}function Gx(t,n,e,i,r){let u,a={};i&&Object.entries(i).forEach(([b,S])=>{a[b]=Array.isArray(S)?S.map(D=>`${D}`):`${S}`}),u=t===n?e:EM(t,n,e);const f=SM(CM(u));return new Wp(f,a,r)}function EM(t,n,e){const i={};return Object.entries(t.children).forEach(([r,a])=>{i[r]=a===n?e:EM(a,n,e)}),new qn(t.segments,i)}class MM{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Uv(i[0]))throw new xe(4003,!1);const r=i.find(Yf);if(r&&r!==mM(i))throw new xe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hv{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function DM(t,n,e){if(t||(t=new qn([],{})),0===t.segments.length&&t.hasChildren())return Jf(t,n,e);const i=function j5(t,n,e){let i=0,r=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return a;const u=t.segments[r],f=e[i];if(Yf(f))break;const b=`${f}`,S=i<e.length-1?e[i+1]:null;if(r>0&&void 0===b)break;if(b&&S&&"object"==typeof S&&void 0===S.outlets){if(!AM(b,S,u))return a;i+=2}else{if(!AM(b,{},u))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const a=new qn(t.segments.slice(0,i.pathIndex),{});return a.children[qt]=new qn(t.segments.slice(i.pathIndex),t.children),Jf(a,0,r)}return i.match&&0===r.length?new qn(t.segments,{}):i.match&&!t.hasChildren()?$x(t,n,e):i.match?Jf(t,0,r):$x(t,n,e)}function Jf(t,n,e){if(0===e.length)return new qn(t.segments,{});{const i=function V5(t){return Yf(t[0])?t[0].outlets:{[qt]:t}}(e),r={};if(Object.keys(i).some(a=>a!==qt)&&t.children[qt]&&1===t.numberOfChildren&&0===t.children[qt].segments.length){const a=Jf(t.children[qt],n,e);return new qn(t.segments,a.children)}return Object.entries(i).forEach(([a,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(r[a]=DM(t.children[a],n,u))}),Object.entries(t.children).forEach(([a,u])=>{void 0===i[a]&&(r[a]=u)}),new qn(t.segments,r)}}function $x(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const a=e[r];if(Yf(a)){const b=U5(a.outlets);return new qn(i,b)}if(0===r&&Uv(e[0])){i.push(new Kf(t.segments[n].path,IM(e[0]))),r++;continue}const u=Yf(a)?a.outlets[qt]:`${a}`,f=r<e.length-1?e[r+1]:null;u&&f&&Uv(f)?(i.push(new Kf(u,IM(f))),r+=2):(i.push(new Kf(u,{})),r++)}return new qn(i,{})}function U5(t){const n={};return Object.entries(t).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[e]=$x(new qn([],{}),0,i))}),n}function IM(t){const n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function AM(t,n,e){return t==e.path&&Kl(n,e.parameters)}const eg="imperative";class Xl{constructor(n,e){this.id=n,this.url=e}}class Gv extends Xl{constructor(n,e,i="imperative",r=null){super(n,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hd extends Xl{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tg extends Xl{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qp extends Xl{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=16}}class $v extends Xl{constructor(n,e,i,r){super(n,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class PM extends Xl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H5 extends Xl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G5 extends Xl{constructor(n,e,i,r,a){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $5 extends Xl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W5 extends Xl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class q5{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Z5{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class K5{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X5{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q5{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y5{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RM{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Wx{}class qx{constructor(n){this.url=n}}class J5{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ng,this.attachRef=null}}let ng=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new J5,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class OM{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Zx(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=Zx(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Kx(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return Kx(n,this._root).map(e=>e.value)}}function Zx(t,n){if(t===n.value)return n;for(const e of n.children){const i=Zx(t,e);if(i)return i}return null}function Kx(t,n){if(t===n.value)return[n];for(const e of n.children){const i=Kx(t,e);if(i.length)return i.unshift(n),i}return[]}class Zc{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Zp(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class FM extends OM{constructor(n,e){super(n),this.snapshot=e,Xx(this,n)}toString(){return this.snapshot.toString()}}function NM(t,n){const e=function eV(t,n){const u=new Wv([],{},{},"",{},qt,n,null,{});return new zM("",new Zc(u,[]))}(0,n),i=new en([new Kf("",{})]),r=new en({}),a=new en({}),u=new en({}),f=new en(""),b=new Kp(i,r,u,f,a,qt,n,e.root);return b.snapshot=e.root,new FM(new Zc(b,[]),e)}class Kp{constructor(n,e,i,r,a,u,f,b){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=a,this.outlet=u,this.component=f,this._futureSnapshot=b,this.title=this.dataSubject?.pipe(It(S=>S[Zf]))??mt(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(It(n=>$p(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(It(n=>$p(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function LM(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function tV(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Wv{get title(){return this.data?.[Zf]}constructor(n,e,i,r,a,u,f,b,S){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=u,this.component=f,this.routeConfig=b,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$p(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$p(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zM extends OM{constructor(n,e){super(e),this.url=n,Xx(this,e)}toString(){return BM(this._root)}}function Xx(t,n){n.value._routerState=t,n.children.forEach(e=>Xx(t,e))}function BM(t){const n=t.children.length>0?` { ${t.children.map(BM).join(", ")} } `:"";return`${t.value}${n}`}function Qx(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Kl(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),Kl(n.params,e.params)||t.paramsSubject.next(e.params),function _5(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Kl(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.urlSubject.next(e.url),Kl(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Yx(t,n){const e=Kl(t.params,n.params)&&function x5(t,n){return ih(t,n)&&t.every((e,i)=>Kl(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Yx(t.parent,n.parent))}let Jx=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new tt,this.deactivateEvents=new tt,this.attachEvents=new tt,this.detachEvents=new tt,this.parentContexts=qe(ng),this.location=qe(ol),this.changeDetector=qe(Ld),this.environmentInjector=qe(ma),this.inputBinder=qe(qv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xe(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new xe(4013,!1);this._activatedRoute=e;const r=this.location,u=e.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,b=new nV(e,f,r.injector);this.activated=r.createComponent(u,{index:r.length,injector:b,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yo]})}return t})();class nV{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===Kp?this.route:n===ng?this.childContexts:this.parent.get(n,e)}}const qv=new Le("");let VM=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=Ov([i.queryParams,i.params,i.data]).pipe(Ki(([a,u,f],b)=>(f={...a,...u,...f},0===b?mt(f):Promise.resolve(f)))).subscribe(a=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const u=function bz(t){const n=Jt(t);if(!n)return null;const e=new Tf(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(u)for(const{templateName:f}of u.inputs)e.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();function ig(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function rV(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return ig(t,i,r);return ig(t,i)})}(t,n,e);return new Zc(i,r)}{if(t.shouldAttach(n.value)){const a=t.retrieve(n.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=n.value,u.children=n.children.map(f=>ig(t,f)),u}}const i=function oV(t){return new Kp(new en(t.url),new en(t.params),new en(t.queryParams),new en(t.fragment),new en(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(a=>ig(t,a));return new Zc(i,r)}}const ew="ngNavigationCancelingError";function jM(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=rh(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=UM(!1,0,n);return r.url=e,r.navigationBehaviorOptions=i,r}function UM(t,n,e){const i=new Error("NavigationCancelingError: "+(t||""));return i[ew]=!0,i.cancellationCode=n,e&&(i.url=e),i}function HM(t){return t&&t[ew]}let GM=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=ai({type:t,selectors:[["ng-component"]],standalone:!0,features:[jT],decls:1,vars:0,template:function(i,r){1&i&&Nr(0,"router-outlet")},dependencies:[Jx],encapsulation:2})}return t})();function tw(t){const n=t.children&&t.children.map(tw),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==qt&&(e.component=GM),e}function cl(t){return t.outlet||qt}function rg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class pV{constructor(n,e,i,r,a){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=a}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Qx(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=Zp(e);n.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,r[u],i),delete r[u]}),Object.values(r).forEach(a=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(r===a)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(n,e,u.children)}else this.deactivateChildRoutes(n,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=Zp(n);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],r);if(i&&i.outlet){const u=i.outlet.detach(),f=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:u,route:n,contexts:f})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=Zp(n);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){const r=Zp(e);n.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new Y5(a.value.snapshot))}),n.children.length&&this.forwardEvent(new X5(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(Qx(r),r===a)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,u.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const f=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),Qx(f.route.value),this.activateChildRoutes(n,null,u.children)}else{const f=rg(r.snapshot);u.attachRef=null,u.route=r,u.injector=f,u.outlet&&u.outlet.activateWith(r,u.injector),this.activateChildRoutes(n,null,u.children)}}else this.activateChildRoutes(n,null,i)}}class $M{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Zv{constructor(n,e){this.component=n,this.route=e}}function mV(t,n,e){const i=t._root;return og(i,n?n._root:null,e,[i.value])}function Xp(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function kh(t){return null!==uc(t)}(t)?n.get(t):t:i}function og(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=Zp(n);return t.children.forEach(u=>{(function gV(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,u=n?n.value:null,f=e?e.getContext(t.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const b=function _V(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!ih(t.url,n.url);case"pathParamsOrQueryParamsChange":return!ih(t.url,n.url)||!Kl(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yx(t,n)||!Kl(t.queryParams,n.queryParams);default:return!Yx(t,n)}}(u,a,a.routeConfig.runGuardsAndResolvers);b?r.canActivateChecks.push(new $M(i)):(a.data=u.data,a._resolvedData=u._resolvedData),og(t,n,a.component?f?f.children:null:e,i,r),b&&f&&f.outlet&&f.outlet.isActivated&&r.canDeactivateChecks.push(new Zv(f.outlet.component,u))}else u&&sg(n,f,r),r.canActivateChecks.push(new $M(i)),og(t,null,a.component?f?f.children:null:e,i,r)})(u,a[u.value.outlet],e,i.concat([u.value]),r),delete a[u.value.outlet]}),Object.entries(a).forEach(([u,f])=>sg(f,e.getContext(u),r)),r}function sg(t,n,e){const i=Zp(t),r=t.value;Object.entries(i).forEach(([a,u])=>{sg(u,r.component?n?n.children.getContext(a):null:n,e)}),e.canDeactivateChecks.push(new Zv(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}function ag(t){return"function"==typeof t}function WM(t){return t instanceof Pv||"EmptyError"===t?.name}const Kv=Symbol("INITIAL_VALUE");function Qp(){return Ki(t=>Ov(t.map(n=>n.pipe(ll(1),Nv(Kv)))).pipe(It(n=>{for(const e of n)if(!0!==e){if(e===Kv)return Kv;if(!1===e||e instanceof Wp)return e}return!0}),Zr(n=>n!==Kv),ll(1)))}function qM(t){return function Sa(...t){return fl(t)}(yr(n=>{if(rh(n))throw jM(0,n)}),It(n=>!0===n))}class Xv{constructor(n){this.segmentGroup=n||null}}class ZM{constructor(n){this.urlTree=n}}function Yp(t){return Hp(new Xv(t))}function KM(t){return Hp(new ZM(t))}class LV{constructor(n,e){this.urlSerializer=n,this.urlTree=e}noMatchError(n){return new xe(4002,!1)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return mt(i);if(r.numberOfChildren>1||!r.children[qt])return Hp(new xe(4e3,!1));r=r.children[qt]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreateUrlTree(n,e,i,r){const a=this.createSegmentGroup(n,e.root,i,r);return new Wp(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Object.entries(n).forEach(([r,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);i[r]=e[f]}else i[r]=a}),i}createSegmentGroup(n,e,i,r){const a=this.createSegments(n,e.segments,i,r);let u={};return Object.entries(e.children).forEach(([f,b])=>{u[f]=this.createSegmentGroup(n,b,i,r)}),new qn(a,u)}createSegments(n,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,r):this.findOrReturn(a,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new xe(4001,!1);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}const nw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zV(t,n,e,i,r){const a=iw(t,n,e);return a.matched?(i=function aV(t,n){return t.providers&&!t._injector&&(t._injector=P0(t.providers,n,`Route: ${t.path}`)),t._injector??n}(n,i),function OV(t,n,e,i){const r=n.canMatch;return r&&0!==r.length?mt(r.map(u=>{const f=Xp(u,t);return Ud(function SV(t){return t&&ag(t.canMatch)}(f)?f.canMatch(n,e):t.runInContext(()=>f(n,e)))})).pipe(Qp(),qM()):mt(!0)}(i,n,e).pipe(It(u=>!0===u?a:{...nw}))):mt(a)}function iw(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...nw}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(n.matcher||g5)(e,t,n);if(!r)return{...nw};const a={};Object.entries(r.posParams??{}).forEach(([f,b])=>{a[f]=b.path});const u=r.consumed.length>0?{...a,...r.consumed[r.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:u,positionalParamSegments:r.posParams??{}}}function XM(t,n,e,i){return e.length>0&&function jV(t,n,e){return e.some(i=>Qv(t,n,i)&&cl(i)!==qt)}(t,e,i)?{segmentGroup:new qn(n,VV(i,new qn(e,t.children))),slicedSegments:[]}:0===e.length&&function UV(t,n,e){return e.some(i=>Qv(t,n,i))}(t,e,i)?{segmentGroup:new qn(t.segments,BV(t,0,e,i,t.children)),slicedSegments:e}:{segmentGroup:new qn(t.segments,t.children),slicedSegments:e}}function BV(t,n,e,i,r){const a={};for(const u of i)if(Qv(t,e,u)&&!r[cl(u)]){const f=new qn([],{});a[cl(u)]=f}return{...r,...a}}function VV(t,n){const e={};e[qt]=n;for(const i of t)if(""===i.path&&cl(i)!==qt){const r=new qn([],{});e[cl(i)]=r}return e}function Qv(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class WV{constructor(n,e,i,r,a,u,f){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=a,this.paramsInheritanceStrategy=u,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new LV(this.urlSerializer,this.urlTree)}noMatchError(n){return new xe(4002,!1)}recognize(){const n=XM(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,qt).pipe(jd(e=>{if(e instanceof ZM)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof Xv?this.noMatchError(e):e}),It(e=>{const i=new Wv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,{}),r=new Zc(i,e),a=new zM("",r),u=function N5(t,n,e=null,i=null){return kM(TM(t),n,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(a._root),{state:a,tree:u}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,qt).pipe(jd(i=>{throw i instanceof Xv?this.noMatchError(i):i}))}inheritParamsAndData(n){const e=n.value,i=LM(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i):this.processSegment(n,e,i,i.segments,r,!0)}processChildren(n,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return yt(r).pipe(Gp(a=>{const u=i.children[a],f=function uV(t,n){const e=t.filter(i=>cl(i)===n);return e.push(...t.filter(i=>cl(i)!==n)),e}(e,a);return this.processSegmentGroup(n,f,u,a)}),function p5(t,n){return Mn(function h5(t,n,e,i,r){return(a,u)=>{let f=e,b=n,S=0;a.subscribe(sn(u,D=>{const N=S++;b=f?t(b,D,N):(f=!0,D),i&&u.next(b)},r&&(()=>{f&&u.next(b),u.complete()})))}}(t,n,arguments.length>=2,!0))}((a,u)=>(a.push(...u),a)),Rv(null),function m5(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Zr((r,a)=>t(r,a,i)):Di,Bx(1),e?Rv(n):oM(()=>new Pv))}(),Ft(a=>{if(null===a)return Yp(i);const u=QM(a);return function qV(t){t.sort((n,e)=>n.value.outlet===qt?-1:e.value.outlet===qt?1:n.value.outlet.localeCompare(e.value.outlet))}(u),mt(u)}))}processSegment(n,e,i,r,a,u){return yt(e).pipe(Gp(f=>this.processSegmentAgainstRoute(f._injector??n,e,f,i,r,a,u).pipe(jd(b=>{if(b instanceof Xv)return mt(null);throw b}))),Vd(f=>!!f),jd(f=>{if(WM(f))return function GV(t,n,e){return 0===n.length&&!t.children[e]}(i,r,a)?mt([]):Yp(i);throw f}))}processSegmentAgainstRoute(n,e,i,r,a,u,f){return function HV(t,n,e,i){return!!(cl(t)===i||i!==qt&&Qv(n,e,t))&&("**"===t.path||iw(n,t,e).matched)}(i,r,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,r,i,a,u,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,e,i,a,u):Yp(r):Yp(r)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const a=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?KM(a):this.applyRedirects.lineralizeSegments(i,a).pipe(Ft(u=>{const f=new qn(u,{});return this.processSegment(n,e,f,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,u){const{matched:f,consumedSegments:b,remainingSegments:S,positionalParamSegments:D}=iw(e,r,a);if(!f)return Yp(e);const N=this.applyRedirects.applyRedirectCommands(b,r.redirectTo,D);return r.redirectTo.startsWith("/")?KM(N):this.applyRedirects.lineralizeSegments(r,N).pipe(Ft(H=>this.processSegment(n,i,e,H.concat(S),u,!1)))}matchSegmentAgainstRoute(n,e,i,r,a,u){let f;if("**"===i.path){const b=r.length>0?mM(r).parameters:{};f=mt({snapshot:new Wv(r,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YM(i),cl(i),i.component??i._loadedComponent??null,i,JM(i)),consumedSegments:[],remainingSegments:[]}),e.children={}}else f=zV(e,i,r,n).pipe(It(({matched:b,consumedSegments:S,remainingSegments:D,parameters:N})=>b?{snapshot:new Wv(S,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YM(i),cl(i),i.component??i._loadedComponent??null,i,JM(i)),consumedSegments:S,remainingSegments:D}:null));return f.pipe(Ki(b=>null===b?Yp(e):this.getChildConfig(n=i._injector??n,i,r).pipe(Ki(({routes:S})=>{const D=i._loadedInjector??n,{snapshot:N,consumedSegments:H,remainingSegments:K}=b,{segmentGroup:re,slicedSegments:ue}=XM(e,H,K,S);if(0===ue.length&&re.hasChildren())return this.processChildren(D,S,re).pipe(It(De=>null===De?null:[new Zc(N,De)]));if(0===S.length&&0===ue.length)return mt([new Zc(N,[])]);const we=cl(i)===a;return this.processSegment(D,S,re,ue,we?qt:a,!0).pipe(It(De=>[new Zc(N,De)]))}))))}getChildConfig(n,e,i){return e.children?mt({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?mt({routes:e._loadedRoutes,injector:e._loadedInjector}):function RV(t,n,e,i){const r=n.canLoad;return void 0===r||0===r.length?mt(!0):mt(r.map(u=>{const f=Xp(u,t);return Ud(function yV(t){return t&&ag(t.canLoad)}(f)?f.canLoad(n,e):t.runInContext(()=>f(n,e)))})).pipe(Qp(),qM())}(n,e,i).pipe(Ft(r=>r?this.configLoader.loadChildren(n,e).pipe(yr(a=>{e._loadedRoutes=a.routes,e._loadedInjector=a.injector})):function NV(t){return Hp(UM(!1,3))}())):mt({routes:[],injector:n})}}function ZV(t){const n=t.value.routeConfig;return n&&""===n.path}function QM(t){const n=[],e=new Set;for(const i of t){if(!ZV(i)){n.push(i);continue}const r=n.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=QM(i.children);n.push(new Zc(i.value,r))}return n.filter(i=>!e.has(i))}function YM(t){return t.data||{}}function JM(t){return t.resolve||{}}function eD(t){return"string"==typeof t.title||null===t.title}function rw(t){return Ki(n=>{const e=t(n);return e?yt(e).pipe(It(()=>n)):mt(n)})}const Jp=new Le("ROUTES");let ow=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=qe(Ak)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return mt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Ud(e.loadComponent()).pipe(It(tD),yr(a=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=a}),Lv(()=>{this.componentLoaders.delete(e)})),r=new hM(i,()=>new Zt).pipe(zx());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return mt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const a=function t4(t,n,e,i){return Ud(t.loadChildren()).pipe(It(tD),Ft(r=>r instanceof BT||Array.isArray(r)?mt(r):yt(n.compileModuleAsync(r))),It(r=>{i&&i(t);let a,u,f=!1;return Array.isArray(r)?(u=r,!0):(a=r.create(e).injector,u=a.get(Jp,[],{optional:!0,self:!0}).flat()),{routes:u.map(tw),injector:a}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(Lv(()=>{this.childrenLoaders.delete(i)})),u=new hM(a,()=>new Zt).pipe(zx());return this.childrenLoaders.set(i,u),u}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tD(t){return function n4(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Yv=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Zt,this.transitionAbortSubject=new Zt,this.configLoader=qe(ow),this.environmentInjector=qe(ma),this.urlSerializer=qe(Xf),this.rootContexts=qe(ng),this.inputBindingEnabled=null!==qe(qv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>mt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Z5(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new q5(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new en({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:eg,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zr(a=>0!==a.id),It(a=>({...a,extractedUrl:e.urlHandlingStrategy.extract(a.rawUrl)})),Ki(a=>{this.currentTransition=a;let u=!1,f=!1;return mt(a).pipe(yr(b=>{this.currentNavigation={id:b.id,initialUrl:b.rawUrl,extractedUrl:b.extractedUrl,trigger:b.source,extras:b.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ki(b=>{const S=b.currentBrowserUrl.toString(),D=!e.navigated||b.extractedUrl.toString()!==S||S!==b.currentUrlTree.toString();if(!D&&"reload"!==(b.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const H="";return this.events.next(new qp(b.id,this.urlSerializer.serialize(b.rawUrl),H,0)),b.resolve(null),Ln}if(e.urlHandlingStrategy.shouldProcessUrl(b.rawUrl))return mt(b).pipe(Ki(H=>{const K=this.transitions?.getValue();return this.events.next(new Gv(H.id,this.urlSerializer.serialize(H.extractedUrl),H.source,H.restoredState)),K!==this.transitions?.getValue()?Ln:Promise.resolve(H)}),function KV(t,n,e,i,r,a){return Ft(u=>function $V(t,n,e,i,r,a,u="emptyOnly"){return new WV(t,n,e,i,r,u,a).recognize()}(t,n,e,i,u.extractedUrl,r,a).pipe(It(({state:f,tree:b})=>({...u,targetSnapshot:f,urlAfterRedirects:b}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),yr(H=>{a.targetSnapshot=H.targetSnapshot,a.urlAfterRedirects=H.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:H.urlAfterRedirects};const K=new PM(H.id,this.urlSerializer.serialize(H.extractedUrl),this.urlSerializer.serialize(H.urlAfterRedirects),H.targetSnapshot);this.events.next(K)}));if(D&&e.urlHandlingStrategy.shouldProcessUrl(b.currentRawUrl)){const{id:H,extractedUrl:K,source:re,restoredState:ue,extras:we}=b,De=new Gv(H,this.urlSerializer.serialize(K),re,ue);this.events.next(De);const ye=NM(0,this.rootComponentType).snapshot;return this.currentTransition=a={...b,targetSnapshot:ye,urlAfterRedirects:K,extras:{...we,skipLocationChange:!1,replaceUrl:!1}},mt(a)}{const H="";return this.events.next(new qp(b.id,this.urlSerializer.serialize(b.extractedUrl),H,1)),b.resolve(null),Ln}}),yr(b=>{const S=new H5(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}),It(b=>(this.currentTransition=a={...b,guards:mV(b.targetSnapshot,b.currentSnapshot,this.rootContexts)},a)),function TV(t,n){return Ft(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:u}}=e;return 0===u.length&&0===a.length?mt({...e,guardsResult:!0}):function kV(t,n,e,i){return yt(t).pipe(Ft(r=>function PV(t,n,e,i,r){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?mt(a.map(f=>{const b=rg(n)??r,S=Xp(f,b);return Ud(function wV(t){return t&&ag(t.canDeactivate)}(S)?S.canDeactivate(t,n,e,i):b.runInContext(()=>S(t,n,e,i))).pipe(Vd())})).pipe(Qp()):mt(!0)}(r.component,r.route,e,n,i)),Vd(r=>!0!==r,!0))}(u,i,r,t).pipe(Ft(f=>f&&function vV(t){return"boolean"==typeof t}(f)?function EV(t,n,e,i){return yt(n).pipe(Gp(r=>Fv(function DV(t,n){return null!==t&&n&&n(new K5(t)),mt(!0)}(r.route.parent,i),function MV(t,n){return null!==t&&n&&n(new Q5(t)),mt(!0)}(r.route,i),function AV(t,n,e){const i=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(u=>function fV(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(u)).filter(u=>null!==u).map(u=>uM(()=>mt(u.guards.map(b=>{const S=rg(u.node)??e,D=Xp(b,S);return Ud(function xV(t){return t&&ag(t.canActivateChild)}(D)?D.canActivateChild(i,t):S.runInContext(()=>D(i,t))).pipe(Vd())})).pipe(Qp())));return mt(a).pipe(Qp())}(t,r.path,e),function IV(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return mt(!0);const r=i.map(a=>uM(()=>{const u=rg(n)??e,f=Xp(a,u);return Ud(function bV(t){return t&&ag(t.canActivate)}(f)?f.canActivate(n,t):u.runInContext(()=>f(n,t))).pipe(Vd())}));return mt(r).pipe(Qp())}(t,r.route,e))),Vd(r=>!0!==r,!0))}(i,a,t,n):mt(f)),It(f=>({...e,guardsResult:f})))})}(this.environmentInjector,b=>this.events.next(b)),yr(b=>{if(a.guardsResult=b.guardsResult,rh(b.guardsResult))throw jM(0,b.guardsResult);const S=new G5(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot,!!b.guardsResult);this.events.next(S)}),Zr(b=>!!b.guardsResult||(this.cancelNavigationTransition(b,"",3),!1)),rw(b=>{if(b.guards.canActivateChecks.length)return mt(b).pipe(yr(S=>{const D=new $5(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(D)}),Ki(S=>{let D=!1;return mt(S).pipe(function XV(t,n){return Ft(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return mt(e);let a=0;return yt(r).pipe(Gp(u=>function QV(t,n,e,i){const r=t.routeConfig,a=t._resolve;return void 0!==r?.title&&!eD(r)&&(a[Zf]=r.title),function YV(t,n,e,i){const r=function JV(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return mt({});const a={};return yt(r).pipe(Ft(u=>function e4(t,n,e,i){const r=rg(n)??i,a=Xp(t,r);return Ud(a.resolve?a.resolve(n,e):r.runInContext(()=>a(n,e)))}(t[u],n,e,i).pipe(Vd(),yr(f=>{a[u]=f}))),Bx(1),Vx(a),jd(u=>WM(u)?Ln:Hp(u)))}(a,t,n,i).pipe(It(u=>(t._resolvedData=u,t.data=LM(t,e).resolve,r&&eD(r)&&(t.data[Zf]=r.title),null)))}(u.route,i,t,n)),yr(()=>a++),Bx(1),Ft(u=>a===r.length?mt(e):Ln))})}(e.paramsInheritanceStrategy,this.environmentInjector),yr({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(S,"",2)}}))}),yr(S=>{const D=new W5(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(D)}))}),rw(b=>{const S=D=>{const N=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&N.push(this.configLoader.loadComponent(D.routeConfig).pipe(yr(H=>{D.component=H}),It(()=>{})));for(const H of D.children)N.push(...S(H));return N};return Ov(S(b.targetSnapshot.root)).pipe(Rv(),ll(1))}),rw(()=>this.afterPreactivation()),It(b=>{const S=function iV(t,n,e){const i=ig(t,n._root,e?e._root:void 0);return new FM(i,n)}(e.routeReuseStrategy,b.targetSnapshot,b.currentRouterState);return this.currentTransition=a={...b,targetRouterState:S},a}),yr(()=>{this.events.next(new Wx)}),((t,n,e,i)=>It(r=>(new pV(n,r.targetRouterState,r.currentRouterState,e,i).activate(t),r)))(this.rootContexts,e.routeReuseStrategy,b=>this.events.next(b),this.inputBindingEnabled),ll(1),yr({next:b=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hd(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects))),e.titleStrategy?.updateTitle(b.targetRouterState.snapshot),b.resolve(!0)},complete:()=>{u=!0}}),Ko(this.transitionAbortSubject.pipe(yr(b=>{throw b}))),Lv(()=>{u||f||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),jd(b=>{if(f=!0,HM(b))this.events.next(new tg(a.id,this.urlSerializer.serialize(a.extractedUrl),b.message,b.cancellationCode)),function sV(t){return HM(t)&&rh(t.url)}(b)?this.events.next(new qx(b.url)):a.resolve(!1);else{this.events.next(new $v(a.id,this.urlSerializer.serialize(a.extractedUrl),b,a.targetSnapshot??void 0));try{a.resolve(e.errorHandler(b))}catch(S){a.reject(S)}}return Ln}))}))}cancelNavigationTransition(e,i,r){const a=new tg(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(a),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nD(t){return t!==eg}let iD=(()=>{class t{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(a=>a.outlet===qt);return i}getResolvedTitleForRoute(e){return e.data[Zf]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(i4)},providedIn:"root"})}return t})(),i4=(()=>{class t extends iD{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(QE))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),r4=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(s4)},providedIn:"root"})}return t})();class o4{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let s4=(()=>{class t extends o4{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ri(t)))(r||t)}}();static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Jv=new Le("",{providedIn:"root",factory:()=>({})});let a4=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:function(){return qe(l4)},providedIn:"root"})}return t})(),l4=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var lg=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(lg||{});function rD(t,n){t.events.pipe(Zr(e=>e instanceof Hd||e instanceof tg||e instanceof $v||e instanceof qp),It(e=>e instanceof Hd||e instanceof qp?lg.COMPLETE:e instanceof tg&&(0===e.code||1===e.code)?lg.REDIRECTING:lg.FAILED),Zr(e=>e!==lg.REDIRECTING),ll(1)).subscribe(()=>{n()})}function c4(t){throw t}function d4(t,n,e){return n.parse("/")}const u4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},h4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ya=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=qe(Dk),this.isNgZoneEnabled=!1,this._events=new Zt,this.options=qe(Jv,{optional:!0})||{},this.pendingTasks=qe(Ik),this.errorHandler=this.options.errorHandler||c4,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||d4,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=qe(a4),this.routeReuseStrategy=qe(r4),this.titleStrategy=qe(iD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qe(Jp,{optional:!0})?.flat()??[],this.navigationTransitions=qe(Yv),this.urlSerializer=qe(Xf),this.location=qe(dx),this.componentInputBindingEnabled=!!qe(qv,{optional:!0}),this.eventsSubscription=new En,this.isNgZoneEnabled=qe(Pt)instanceof Pt&&Pt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Wp,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NM(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(oD(i)&&this._events.next(i));if(i instanceof Gv)nD(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof qp)this.rawUrlTree=r.rawUrl;else if(i instanceof PM){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(a,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof Wx)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof tg)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof qx){const a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||nD(r.source)};this.scheduleNavigation(a,eg,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof $v&&this.restoreHistory(r,!0),i instanceof Hd&&(this.navigated=!0),oD(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),eg,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const a={replaceUrl:!0},u=r?.navigationId?r:null;if(r){const b={...r};delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(a.state=b)}const f=this.parseUrl(e);this.scheduleNavigation(f,i,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(tw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:u,queryParamsHandling:f,preserveFragment:b}=i,S=b?this.currentUrlTree.fragment:u;let N,D=null;switch(f){case"merge":D={...this.currentUrlTree.queryParams,...a};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}null!==D&&(D=this.removeEmptyProps(D));try{N=TM(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),N=this.currentUrlTree.root}return kM(N,e,D,S??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=rh(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,eg,null,i)}navigate(e,i={skipLocationChange:!1}){return function p4(t){for(let n=0;n<t.length;n++)if(null==t[n])throw new xe(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...u4}:!1===i?{...h4}:i,rh(e))return gM(this.currentUrlTree,e,r);const a=this.parseUrl(e);return gM(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}scheduleNavigation(e,i,r,a,u){if(this.disposed)return Promise.resolve(!1);let f,b,S;u?(f=u.resolve,b=u.reject,S=u.promise):S=new Promise((N,H)=>{f=N,b=H});const D=this.pendingTasks.add();return rD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:a,resolve:f,reject:b,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(N=>Promise.reject(N))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const u={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",u)}else{const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",a)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oD(t){return!(t instanceof Wx||t instanceof qx)}class sD{}let g4=(()=>{class t{constructor(e,i,r,a,u){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Zr(e=>e instanceof Hd),Gp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i){a.providers&&!a._injector&&(a._injector=P0(a.providers,e,`Route: ${a.path}`));const u=a._injector??e,f=a._loadedInjector??u;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&r.push(this.preloadConfig(u,a)),(a.children||a._loadedRoutes)&&r.push(this.processRoutes(f,a.children??a._loadedRoutes))}return yt(r).pipe(Hn())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):mt(null);const a=r.pipe(Ft(u=>null===u?mt(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes(u.injector??e,u.routes))));return i.loadComponent&&!i._loadedComponent?yt([a,this.loader.loadComponent(i)]).pipe(Hn()):a})}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(ya),Oe(Ak),Oe(ma),Oe(sD),Oe(ow))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const aw=new Le("");let aD=(()=>{class t{constructor(e,i,r,a,u={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=a,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Gv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Hd?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof qp&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof RM&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new RM(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){Zb()};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();function Kc(t,n){return{\u0275kind:t,\u0275providers:n}}function cD(){const t=qe(fs);return n=>{const e=t.get(eh);if(n!==e.components[0])return;const i=t.get(ya),r=t.get(dD);1===t.get(lw)&&i.initialNavigation(),t.get(uD,null,Gt.Optional)?.setUpPreloading(),t.get(aw,null,Gt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const dD=new Le("",{factory:()=>new Zt}),lw=new Le("",{providedIn:"root",factory:()=>1}),uD=new Le("");function b4(t){return Kc(0,[{provide:uD,useExisting:g4},{provide:sD,useExisting:t}])}const hD=new Le("ROUTER_FORROOT_GUARD"),w4=[dx,{provide:Xf,useClass:jx},ya,ng,{provide:Kp,useFactory:function lD(t){return t.routerState.root},deps:[ya]},ow,[]];function S4(){return new zk("Router",ya)}let pD=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[w4,[],{provide:Jp,multi:!0,useValue:e},{provide:hD,useFactory:E4,deps:[[ya,new Ns,new ds]]},{provide:Jv,useValue:i||{}},i?.useHash?{provide:nh,useClass:Tz}:{provide:nh,useClass:mE},{provide:aw,useFactory:()=>{const t=qe(q3),n=qe(Pt),e=qe(Jv),i=qe(Yv),r=qe(Xf);return e.scrollOffset&&t.setOffset(e.scrollOffset),new aD(r,i,t,n,e)}},i?.preloadingStrategy?b4(i.preloadingStrategy).\u0275providers:[],{provide:zk,multi:!0,useFactory:S4},i?.initialNavigation?M4(i):[],i?.bindToComponentInputs?Kc(8,[VM,{provide:qv,useExisting:VM}]).\u0275providers:[],[{provide:mD,useFactory:cD},{provide:ex,multi:!0,useExisting:mD}]]}}static forChild(e){return{ngModule:t,providers:[{provide:Jp,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(hD,8))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})();function E4(t){return"guarded"}function M4(t){return["disabled"===t.initialNavigation?Kc(3,[{provide:W0,multi:!0,useFactory:()=>{const n=qe(ya);return()=>{n.setUpLocationChangeListener()}}},{provide:lw,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Kc(2,[{provide:lw,useValue:0},{provide:W0,multi:!0,deps:[fs],useFactory:n=>{const e=n.get(Sz,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=n.get(ya),a=n.get(dD);rD(r,()=>{i(!0)}),n.get(Yv).afterPreactivation=()=>(i(!0),a.closed?mt(void 0):a),r.initialNavigation()}))}}]).\u0275providers:[]]}const mD=new Le(""),I4=JSON.parse('{"R":[{"type":"Feature","properties":{"icon":"industry","name":"Rychnov na Falknovsku","place":"Sokolov","years_in_service":"1907-1968","power":"500kw, 1.5MW(1909), 10MW(1926), 18,9MW(1936)","sources1":"https://vary.rozhlas.cz/elektrarna-v-dolnim-rychnove-rozsvitila-sokolovsko-ve-30-letech-patrila-k-8791627, https://www.sokolov-vychod.cz/elektrarna-j-d-starck","sources2":"","type":"Uhl\xed","owner":"\u010cEZ","description_short":"Elektr\xe1rnu na v\xfdchodn\xedm okraji Sokolova vystav\u011bla spole\u010dnost \u201eDolov\xe9 a pr\u016fmyslov\xe9 z\xe1vody,\xa0 d\u0159\xedve Johan David Starck\u201c v\xa0roce 1907. Po\u010d\xe1tky elektr\xe1rny sahaj\xed v\u0161ak ji\u017e do roku\xa0 1886, kdy bylo instalov\xe1no osv\u011btlovac\xed dynamo pro osv\u011btlen\xed nakl\xe1dac\xed lampy a dolu Boghead. V\xa0roce 1903 bylo instalov\xe1no v\u011bt\u0161\xed dynamo\xa0\xa0 o v\xfdkonu 20 ko\u0148sk\xfdch sil a roku 1907, kter\xfd je pova\u017eov\xe1n za rok zalo\u017een\xed\xa0 elektr\xe1rny, byla postavena chladic\xed v\u011b\u017e a turbogener\xe1tor o v\xfdkonu 500 kW.","description1":"Roku 1909 byl instalov\xe1n druh\xfd parn\xed turbogener\xe1tor s\xa0v\xfdkonem 1000 kW a dal\u0161\xed chladic\xed v\u011b\u017e. Energie ji\u017e bylo dostatek nejen pro elektrifikaci \u010derp\xe1n\xed d\u016fln\xedch vod, ale i pro zaveden\xed elekt\u0159iny ve Falknov\u011b (dne\u0161n\xed Sokolov), Doln\xedm Rychnov\u011b a Tisov\xe9.","description2":"V\xa0roce 1923 se za\u010dalo stav\u011bt dal\u0161\xed veden\xed ji\u017en\xedm sm\u011brem na B\u0159ezovou a Kamenici., n\xe1sledovaly kyn\u0161persk\xe9 doly, p\u0159esto\u017ee kyn\u0161persk\xe1 briket\xe1rna m\u011bla svoji elektr\xe1rnu.\xa0 V\xa0roce 1926 do\u0161lo k\xa0v\xfdznamn\xe9 zm\u011bn\u011b \u2013 elektr\xe1rna dostala sv\xe9 vlastn\xed veden\xed a p\u0159estala podl\xe9hat dolu Luitpold (Anton\xedn), pokra\u010dovalo se v\xa0budov\xe1n\xed dal\u0161\xedch veden\xed, v\xa0turb\xednov\xe9 hale se\xa0 instalovala je\u0159\xe1bov\xe1 dr\xe1ha, odstavily se dva slab\u0161\xed turbogener\xe1tory (v\xfdkon 500 a 1000 kW) a osadil se nov\xfd o v\xfdkonu 10\xa0000 kW.","description3":"Rekonstrukce elektr\xe1rny byla dokon\u010dena v\xa0roce 1931 vybudov\xe1n\xedm \xfapravny vod s\xa0laborato\u0159\xed, instalac\xed dal\u0161\xedho strmotrubn\xe9ho kotle, roz\u0161\xed\u0159en\xedm vel\xedna a rozvodny, instalac\xed nov\xe9ho sp\xednac\xedho za\u0159\xedzen\xed a stavbou druh\xe9ho a t\u0159et\xedho kom\xedna. Roku 1936 byly p\u0159istav\u011bny kancel\xe1\u0159e a d\xedlny. V\xa0roce 1936 byla elektr\xe1rna vybavena t\u0159emi turbogener\xe1tory o celkov\xe9m v\xfdkonu 18\xa0900 kW, dev\xedti velk\xfdmi transform\xe1tory, p\u011bti strmotrubn\xfdmi a dv\u011bma star\xfdmi kotli.","description4":"Po v\xe1lce p\u0159evzala elektr\xe1rnu spole\u010dnost Mostecko-sokolovsk\xe9 elektr\xe1rny, pozd\u011bji \u010cEZ. V\xfdroba elekt\u0159iny prob\xedhala v\xa0sokolovsk\xe9 elektr\xe1rn\u011b a\u017e do roku 1968.","description5":"","description6":""},"geometry":{"coordinates":[12.6367839,50.2680642],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Mari\xe1nsk\xe9 L\xe1zn\u011b","place":"Mari\xe1nsk\xe9 l\xe1zn\u011b","years_in_service":"1888-1945","power":"50kW(1889), 1000HP(1904), ","sources1":"hamelika.cz","sources2":"https://www.hamelika.cz/?cz_hamelika-historie-marianskolazenske-elektrarny,77","type":"Uhl\xed","owner":"M\u011bsto Mari\xe1nsk\xe9 l\xe1zn\u011b","description_short":"V roce 1888 prob\xedhala stavba novobarokn\xed litinov\xe9 kolon\xe1dy podle projektu v\xedde\u0148sk\xfdch stavitel\u016f Miksche a Niedzielsk\xe9ho. P\u016fvodn\u011b m\u011bla mari\xe1nskol\xe1ze\u0148sk\xe1 elektr\xe1rna t\u0159i parn\xed dynama typu Westinghouse po 80 PS, ale v kr\xe1tk\xe9 dob\u011b dost\xe1v\xe1 nov\xe1 za\u0159\xedzen\xed sp\u0159a\u017een\xe9ho st\u0159\xeddav\xe9ho proudu. P\u0159i v\xfdkonu 50 kW p\u0159i 500 ot\xe1\u010dk\xe1ch v minut\u011b se vyr\xe1b\u011bl jednof\xe1zov\xfd st\u0159\xeddan\xfd proud o 2000 voltech a 42 period\xe1ch.","description1":"Dne 14.listopadu 1888 prob\u011bhlo zku\u0161ebn\xed osv\u011btlen\xed kolon\xe1dy a p\u0159ilehl\xe9 ulice od domu LIPSKO dol\u016f k hotelu KLINGER \u010dty\u0159mi obloukov\xfdmi lampami.","description2":"V roce 1904 bylo nutno zakoupit a instalovat na m\xedsto mal\xe9ho stroje o 100 PS parn\xed turbinu se 1000 PS (HP). Byla to tehdy jedine\u010dnost, nebo\u0165 \u0161lo o \u010dtvrtou nejv\u011bt\u0161\xed parn\xed turbinu v Rakousko-Uhersku.","description3":"Nov\xe1 za\u0159\xedzen\xed 1925-1926. V roce 1925 byla z\u0159\xedzena vlastn\xed po\u010d\xedta\u010dov\xe1 stanice a elektr\xe1rna st\xe1la p\u0159ed dal\u0161\xedmi v\xfdznamn\xfdmi zm\u011bnami p\u0159i roz\u0161\xed\u0159en\xed kapacity v\xfdroby, kter\xe9 nebylo mo\u017eno d\xe1le oddalovat. Roku 1926 vzrostl v\xfdkon dvou star\u0161\xedch parn\xedch stroj\u016f 2x300 PS (HP) provedenou rekonstrukc\xed na 2 x 500","description4":"U kotl\u016f \u0160koda a dal\u0161\xedch zlep\u0161en\xedch bylo mo\u017eno udr\u017eet norm\xe1ln\xed v\xfdkon 1700 kW.","description5":"Proto\u017ee elektr\xe1rna v Mari\xe1nsk\xfdch L\xe1zn\xedch si uchov\xe1vala od po\u010d\xe1tku s\xed\u0165ovou frekvenci 43 Hertz\u016f, muselo doj\xedt ke zv\xfd\u0161en\xed n\xe1klad\u016f v d\u016fsledku pot\u0159ebn\xe9ho m\u011bni\u010de frekvence p\u0159i odb\u011bru proudu nebo p\u0159ed\xe1v\xe1n\xed proudu do d\xe1lkov\xe9ho veden\xed. Proto\u017ee p\u0159i 43 Hz nebylo mo\u017eno dos\xe1hnout normovan\xfdch ot\xe1\u010dek motor\u016f nap\u0159. 2880 nebo 1440, nebo\u0165 le\u017eely o 14 % n\xed\u017ee, bylo pou\u017e\xedv\xe1n\xed stroj\u016f a za\u0159\xedzen\xed, poh\xe1n\u011bn\xfdch pevn\u011b p\u0159ipojen\xfdmi motory nemo\u017en\xe9. Bylo proto nyn\xed nutno v\u0161ude pou\u017e\xedvat mezipohonov\xfdch \xfastroj\xed - \u0159emeny, p\u0159evodovky.","description6":"\\nM\u011bstsk\xe1 elektr\xe1rna byla v provozu a\u017e do roku 1972, kdy byla zru\u0161ena, a v roce 1973 byla uvedena do provozu M\u011bstsk\xe1 tepl\xe1rna, pou\u017e\xedvaj\xedc\xed jako paliva mazutu o v\xfdkonu 25 tun p\xe1ry za hodinu. Za\u010dalo pokl\xe1d\xe1n\xed parovodu a budov\xe1n\xed v\xfdm\u011bn\xedkov\xfdch stanic."},"geometry":{"coordinates":[17.7025342,49.9604419],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Kraslice","place":"Kraslice","years_in_service":"1903-1945","power":"250kW(1903),  538kW(1911)","sources1":"pamatkovykatalog","sources2":"https://www.pamatkovykatalog.cz/elektrarna-15333378","type":"kombinace uhl\xed,voda","owner":"","description_short":"Tepeln\xe1 elektr\xe1rna byla za\u0159\xedzena na spalov\xe1n\xed hn\u011bd\xe9ho uhl\xed z dol\u016f Marie, Union a Ane\u017eka v mno\u017estv\xed 4500 t ro\u010dn\u011b. V koteln\u011b byly osazeny 2 kotle Cornwall s rovinn\xfdmi ro\u0161ty, kter\xe9 poh\xe1n\u011bly 2 svisl\xe9 parostroje o v\xfdkonu 140 ks ka\u017ed\xfd a 1 kompaundn\xed parn\xed stroj s kondenzac\xed o v\xfdkonu 385 ks.","description1":"Stejnosm\u011brn\xfd proud vyr\xe1b\u011blo celkem 5 dynam o r\u016fzn\xfdch v\xfdkonech: 1. dynamo o v\xfdkonu 62 kW z roku 1903 od firmy Waldek-Wagner, 2. dynamo o v\xfdkonu 82 kW z roku 1903 a firmy Waldek-Wagner, 3. dynamo o v\xfdkonu 82 kW z roku 1903 a firmy Waldek-Wagner, 4. dynamo o v\xfdkonu 24 kW z roku 1903 a firmy Berg a 5. dynamo o v\xfdkonu 288 kW z roku 1911 a firmy Siemens a Schuckert.","description2":"Akumul\xe1tor m\u011bl 278 \u010dl\xe1nk\u016f a kapacitu 435 Amph. Vodn\xed s\xedla Svatavy byla zu\u017eitkov\xe1na sp\xe1dem o v\xfd\u0161ce 3,2 m 2 turb\xednami o celkov\xe9m v\xfdkonu 135 ks.","description3":"V\xfdroba elekt\u0159iny v elektr\xe1rn\u011b skon\u010dila v roce 1945, od pades\xe1t\xfdch let minul\xe9ho stolet\xed elekt\u0159inu dod\xe1v\xe1 do Kraslic elektr\xe1rna Tisov\xe1 u Sokolova. V roce 1952 byl zbo\u0159en kom\xedn elektr\xe1rny. Z elektr\xe1rny se dochovala pouze v roce 1995 rekonstruovan\xe1 transformovna a spr\xe1vn\xed objekt \u010dp. 636.","description4":"","description5":"","description6":""},"geometry":{"coordinates":[12.5163728,50.3184772],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Horn\xed J\xed\u0159et\xedn","place":"Horn\xed J\xed\u0159et\xedn","years_in_service":"1908-1945","power":"480kW","sources1":"tovarnikominy.cz","sources2":"https://www.tovarnikominy.cz/kominy.75","type":"uheln\xe1","owner":"Soukrom\xfd majitel","description_short":"M\u011bsto Horn\xed Ji\u0159et\xedn si v roce 1908 postavilo pro sv\xe9 pot\u0159eby a pot\u0159eby okoln\xedch obc\xed parn\xed elektr\xe1rnu. Ta byla je\u0161t\u011b v letech 1911\u20131914\xa0roz\u0161\xed\u0159ena a v t\xe9to podob\u011b se a\u017e na drobn\xe9 zm\u011bny souvisej\xedc\xed s rekonstrukc\xed pro nov\xe9 vyu\u017eit\xed dochovala dodnes.\xa0","description1":"Drobn\xfd objekt byl jednotn\u011b pojat\xfd v historizuj\xedc\xedm slohu kombinuj\xedc\xedm om\xedtan\xe9 plochy s \u010derven\xfdm re\u017en\xfdm zdivem. P\u0159ed objektem byl karlovarskou specializovanou spole\u010dnost\xed Sch\xf6berl a spol.\xa0postaven tov\xe1rn\xed kom\xedn v\xfd\u0161ky 30 metr\u016f a sv\u011btlost\xed 120 centimetr\u016f. Ten slou\u017eil k odvodu spalin z parn\xedch kotl\u016f \u2013 v roce 1934 jsou uv\xe1d\u011bny celkem t\u0159i instalovan\xe9 kotle o celkov\xe9 v\xfdh\u0159evn\xe9 plo\u0161e 570 m2. Kotle dod\xe1valy p\xe1ru dv\u011bma parn\xedm stroj\u016fm po 300 HP, celkov\xfd elektrick\xfd v\xfdkon elektr\xe1rny byl 480 kW.","description2":"Po roce 1945 byla elektr\xe1rna vy\u0159azena z provozu.\xa0Do dne\u0161n\xedch dn\u016f si i p\u0159es opravy zachov\xe1v\xe1 p\u016fvodn\xed r\xe1z a soukrom\xfd majitel ji vyu\u017e\xedv\xe1 pro vlastn\xed pot\u0159ebu. Na kom\xedn\u011b je osazen ochoz s telekomunika\u010dn\xed technologi\xed, nicm\xe9n\u011b um\xedst\u011bn\xedm ochozu t\u011bsn\u011b pod hlavic\xed je siln\u011b naru\u0161en vizu\xe1ln\xed dojem z architektonicky kvalitn\u011b proveden\xe9ho kom\xedna.","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[13.546553333333334,50.572028333333336],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Mydlovary","place":"Mydlovary","years_in_service":"1926-1998","power":"25MW","sources1":"http://www.encyklopedie.c-budejovice.cz/clanek/elektrarny","sources2":"https://cs.wikipedia.org/wiki/Zanikl%C3%A9_elektr%C3%A1rny_v_%C4%8Cesku#Elektr%C3%A1rna_Mydlovary","type":"uheln\xe1","owner":"Mydlovary","description_short":"Jednalo se o\xa0prvn\xed za\u0159\xedzen\xed v\xa0\u010cSR, kter\xe9 m\u011blo ov\u011b\u0159it mo\u017enosti spalov\xe1n\xed\xa0lignitu, jen\u017e se hojn\u011b vyskytoval v\xa0okol\xed\xa0Mydlovar. Prvn\xed experiment\xe1ln\xed elektr\xe1rna m\u011bla v\xfdkon 2 \xd7 400\xa0kW, zprovozn\u011bna byla roku 1922, odstavena byla pak v\xa0roce 1927, o rok d\u0159\xedve v\u0161ak za\u010dala ji\u017e b\u011b\u017eet definitivn\xed elektr\xe1rna s\xa0pr\xe1\u0161kov\xfdmi kotly a TG1 o\xa0v\xfdkonu 3\xa0MW. V\xa0roce 1928 najely do provozu dal\u0161\xed kotle K3 a K4 a TG2 o\xa0v\xfdkonu 6\xa0MW.","description1":"Dal\u0161\xed roz\u0161\xed\u0159en\xed p\u0159i\u0161lo v\xa0roce 1935 (kotel K5), v\xa0roce 1939 nov\xe9 TG 3 o\xa0v\xfdkonu 10\xa0MW, v\xa0roce 1940 kotel K6. Dal\u0161\xed rozvoj n\xe1sledoval a\u017e v\xa0roce 1965 s\xa0tepl\xe1rensk\xfdm kotlem K7 a TG 4 o\xa0v\xfdkonu 6\xa0MW.","description2":"Z\xe1rove\u0148 se spu\u0161t\u011bn\xedm tohoto kotle byly definitivn\u011b odstaveny nejstar\u0161\xed kotle K1-K4 a TG 1 a rovn\u011b\u017e v\xa0tomto roce byl postaven 100\xa0m vysok\xfd kom\xedn. V\xa0roce 1973 p\u0159e\u0161la elektr\xe1rna na spalov\xe1n\xed sokolovsk\xe9ho hruboprachu.","description3":"Z\xa0elektr\xe1rny se stala sp\xed\u0161e tepl\xe1rna (z\xe1sobovala MAPE Mydlovary a m\u011bsto \u010cesk\xe9 Bud\u011bjovice) a z\xa0toho d\u016fvodu byly odstaveny postupn\u011b TG 2 (1976), TG 3 (1984), posledn\xed TG 4 o\xa0v\xfdkonu 6\xa0MW byl odstaven v\xa0roce 1998, \u010d\xedm\u017e zanikla v\xa0tomto m\xedst\u011b v\xfdroba elekt\u0159iny nep\u0159etr\u017eit\u011b zde trvaj\xedc\xed od roku 1922.","description4":"","description5":"","description6":""},"geometry":{"coordinates":[14.361852257486733,49.08449219316303],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"\u010cesko Bud\u011bjovick\xe1","place":"v Novohradsk\xe9 ulici","years_in_service":"1920-1948","power":"neuvedeno","sources1":"http://www.encyklopedie.c-budejovice.cz/clanek/elektrarny","sources2":"","type":"uheln\xe1","owner":"Jiho\u010desk\xe9 elektr\xe1rny pod sebou 12,7 MW (hodn\u011b vodn\xedch)","description_short":"Roku 1920\xa0byly za\xa0\xfa\u010delem systematick\xe9 elektrifikace ji\u017en\xedch \u010cech ustaveny\xa0Jiho\u010desk\xe9 elektr\xe1rny, akciov\xe1 spole\u010dnost se\xa0s\xeddlem v\xa0\u010cesk\xfdch Bud\u011bjovic\xedch (J\u010cE). Spole\u010dnost se\xa0rozhodla vybudovat na\xa0lignitov\xe9m lo\u017eisku v\xa0Mydlovarech tepelnou elektr\xe1rnu, z\xa0n\xed\u017e by byl dod\xe1v\xe1n do\xa0m\u011bsta proud prim\xe1rn\xedm veden\xedm 22\xa0kV\xa0(1922).","description1":"T\xe9\u017e koupila od\xa0rakousk\xe9 spole\u010dnosti 15.\xa06.\xa01925\xa0parn\xed elektr\xe1rna\xa0v\xa0Novohradsk\xe9 ulici, k\xa0jej\xed\u017e likvidaci do\u0161lo 1948.\xa0Od\xa0t\xe9 doby objekt slou\u017e\xed jako\xa0tepl\xe1rna.","description2":"","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[14.4852089,48.9678],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Such\xe1","place":"Obec Such\xe1 u Polsk\xfdch hranic","years_in_service":"1916-????","power":"???","sources1":"Nothing","sources2":"","type":"uheln\xe1","owner":"???","description_short":"","description1":"","description2":"","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[18.475749999999998,49.80025],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Plze\u0148","place":"p\u016fvodn\xed pivovarsk\xfd park","years_in_service":"1907-1986","power":"neuveden","sources1":"https://www.prazdroj.cz/1563-bsval-pivovarsk-elektr-rna-plze-sk-ho-prazdroje-otije-inspirativn-mi-peedn-ikami-27-listopadu-bude-hostit-patn-ctou-pechakucha-night-plze","sources2":"","type":"uheln\xe1","owner":"Plze\u0148sk\xfd Prazdroj","description_short":"\u201eElektr\xe1rna byla uvedena do provozu ji\u017e na p\u0159elomu let 1907/1908 a jej\xed energie nap\xe1jela 134 motor\u016f, 120 obloukov\xfdch lamp a zhruba 6 200 \u017e\xe1rovek. Mimo vlastn\xed pot\u0159ebu pivovaru dod\xe1vala elektr\xe1rna proud tak\xe9 do obc\xed Doubravka, \xdajezd, Hr\xe1dek a kr\xe1tce tak\xe9 na Letnou","description1":"Elektr\xe1rna slou\u017eila i\xa0p\u0159es zna\u010dn\xe1 v\xe1le\u010dn\xe1 poni\u010den\xed a\xa0\u0159adu rekonstrukc\xed a\u017e do\xa0roku 1986, kdy byl cel\xfd pivovarsk\xfd z\xe1vod napojen na plze\u0148skou tepl\xe1rnu.","description2":"","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[13.3885039,49.7482872],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Pardubice","place":"ulice Arno\u0161ta z Pardubic","years_in_service":"1904","power":"(15 MW)","sources1":"pamatkov\xfdkatalog","sources2":"https://pamatkovykatalog.cz/elektrarna-mesta-pardubic-24537972","type":"\u010derno uheln\xe1","owner":"Franti\u0161ek K\u0159i\u017e\xedk -> m\u011bsto Pardubice-> \u010cEZ","description_short":"Postavena firmou Fr. K\u0159i\u017e\xedka, uvdena do provozu roku 1905. V roce 1911 ji vykupoupilo m\u011bsto Pardubice a st\xe1v\xe1 se m\u011bstskou elektr\xe1rnou, tedy slou\u017e\xed pro elektrifikaci Pardubic. Po vzniku \u010cSR a p\u0159ijet\xed elektrifika\u010dn\xedho z\xe1kona \u010d. 438/1919 Sb. a na\u0159. R\u010cS se st\xe1v\xe1 elektr\xe1rnou svazovou z\xe1sobuj\xedc\xed \u0161irok\xe9 okol\xed. Postupn\u011b (ve 20. a 30. letech proch\xe1z\xed elektr\xe1rna modernizac\xed. Po druh\xe9 sv\u011btov\xe9 v\xe1lce byla pou\u017e\xedv\xe1na jako tepl\xe1rna a p\u0159estav\u011bna na spalov\xe1n\xed mazutu, v souvislosti s v\xfdrobou v Paramu (mazut odpadn\xed produkt).","description1":"Elktr\xe1rna byla vybavena 8 parn\xedmi kotly kter\xe9 z\xe1sobovali parou 3 turb\xedny s v\xfdkonem v sou\u010dtu 10680 (7964 kW) a 3 parn\xed stroje o v\xfdkonech 2x200hp (149 kW) a 1x400hp (298 kW). Elekt\u0159inu vyr\xe1b\u011bla 3 dynama o v\xfdkonu 2x100 kW a 1x270 kW rozvod elkt\u0159iny byl tedy stejnosm\u011brn\xfd. V letech 1912 a 1916 byly osazeny dva turogener\xe1tory o v\xfdkonech 1000 a 1100 kW (st\u0159\xeddav\xe9), p\u0159i modernizaci ve 20. letech p\u0159ibyl v roce 1924 turbogener\xe1tor o v\xfdkonu 5 MW. P\u0159ibyly tak\xe9 sychronn\xed konvertory pro transformaci stejnosm\u011brn\xe9ho proudu z dynam na st\u0159\xeddav\xfd do tehdej\u0161\xedho rozvodu. V roce 1937 elektr\xe1rn\u011b p\u0159ibyla tepl\xe1rensk\xe1 funkce a z\xe1sobovala telep \u010d\xe1st Parbubic. Po druh\xe9 sv\u011btov\xe9 v\xe1lce p\u0159e\u0161la pln\u011b na tepl\xe1renskou funkci, kterou plnila do roku 2001. Z\xe1sobov\xe1n\xed Pardubic teplem je realizov\xe1no v elektr\xe1rny/tepl\xe1rny Opatovice.","description2":"V sou\u010dasn\xe9 dob\u011b v are\xe1liu s\xeddl\xed n\u011bkolik spole\u010dnost\xed. V b\xfdvyl\xe9 elktr\xe1rn\u011b se nach\xe1z\xed plynov\xfd kotel a slou\u017e\xed jako z\xe1lo\u017en\xed zdroj pro vyt\xe1p\u011bn\xed Pardubic. Je pod spr\xe1vou spole\u010dnosti \u010cEZ. ","description3":"V odstavci jsem ozna\u010dil slovo mod\u0159e, bylo by tam dobr\xe9 ud\u011blat odkaz na Opatovice","description4":"","description5":"","description6":""},"geometry":{"coordinates":[15.7775633,50.0328394],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Kol\xedn, p\u016fvodn\xed","place":"K\u0159i\u017e\xedkova, lev\xfd b\u0159eh Labe","years_in_service":"1916-193x","power":"Nen\xed zn\xe1mo","sources1":"https://www.cestyapamatky.cz/kolinsko/kolin/tepelna-elektrarna","sources2":"","type":"Uhl\xed","owner":"Franti\u0161ek K\u0159i\u017e\xedk -> ESSO","description_short":"Elektr\xe1rna byla v Kol\xedn\u011b postavena pro nap\xe1jen\xed obloukov\xfdch lamp nach\xe1zej\xedc\xedch se nejprve v prostor\xe1ch Horsk\xe9ho cukrovaru, aby nahradila malou podnikovou elktr\xe1rni\u010dku. B\\\\la postavena firmou Franti\u0161ka K\u0159i\u017e\xedka v letech 1911-1912 v prostoru mezi ulicemi  Pod Hroby a Zengrova (dnesn\xed pr\u016fmyslov\xe1 z\xf3na). Na elektr\xe1rnu bylo postupn\u011b p\u0159ipojeno 37 obc\xed. V roce 1916 prodal Fr, K\u0159i\u017e\xedk elektr\xe1rnu spole\u010dnosti ESSO (Elektr\xe1rensk\xfd svaz st\u0159edolabsk\xfdch okres\u016f), kter\xe1 ji v letech 1916-18 zmodernizovala. Ve 20. letech zv\xfd\u0161ila spot\u0159eba el. energie na tolik, \u017ee ji\u017e tato elktr\xe1rna v\xfdkonem nesta\u010dila a tak v letech 1930-32byal vybudov\xe1na spole\u010dnost\xed ESSO nov\xe1 elktr\xe1rna na druh\xe9m b\u0159ehu Labe.","description1":"V odstavci jsem ozna\u010dil slovo mod\u0159e, bylo by tam dobr\xe9 ud\u011blat odkaz na Kol\xedn, sou\u010dasn\xe1","description2":"","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[15.2145008,50.0234172],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Kol\xedn, sou\u010dasn\xe1","place":"prav\xfd b\u0159eh Labe","years_in_service":"1932-doposud","power":"239,7 MW","sources1":"https://www.cestyapamatky.cz/kolinsko/kolin/tepelna-elektrarna","sources2":"","type":"Uhl\xed","owner":"p\u016fvodn\u011b ESSO, nyn\xed Veolia","description_short":"Elekr\xe1rna byla vybudov\xe1na na m\xedst\u011b b\xfdval\xe9ho Horsk\xe9ho cukrovaru na prav\xe9m b\u0159ehu Labe v \u010d\xedsti Z\xe1lab\xed. Je \u010dasto citov\xe1na fako architektonick\xe1 pam\xe1tka postaven\xe1 ve stylu funkcionalismu architektem Jaroslavem Fragnerem. P\u016fvodn\u011b byl navr\u017een a postaven d\u011bn\xfd kom\xedn vysok\xfd 117 m a \u0161irok\xfd 5 m, kter\xfd byl tehdy nejvy\u0161\u0161\xedm kom\xednem v Evrop\u011b. Elketr\xe1rna byla osozena uheln\xfdmi kotli a 3 parn\xedmi turb\xednami (st\u0159\xeddav\xfd proud). Po roce 1948 baly zn\xe1rodn\u011bna a byla p\u0159id\xe1na do Tepl\xe1rensk\xfdch z\xe1vod\u016f Praha - Hole\u0161ovice, p\u0159e\u0161la \u010d\xe1ste\u010dn\u011b na tepl\xe1rensk\xfd provoz a bylo v jedn\xe1ni jej\xed zru\u0161en\xed. V 60. letech bylo rozhodnuto o jej\xedm z\xe1niku byl rozhodnuto o zru\u0161en\xed v\u0161ech 3 turb\xedn a p\u0159e\u0161la na tepl\xe1rensk\xfd provoz. Elektr\xe1rnu na \u010das zachr\xe1nila op\u011bt stoupaj\xedc\xed popt\xe1vka o elektrickou energii, kdy v roce 1984 byl zprovozn\u011bn kotel na hn\u011bd\xe9 uhl\xed. \xdapln\xe9 odstaven\xed elektr\xe1rny (i tepl\xe1rny) bylo pl\xe1nov\xe1no na rok 1989 v souvislosti s v\xfdstavbou parn\xedho nap\xe1je\u010de z el. Chvaletice. Na\u0161t\u011b\u0161n\xed (pro elektr\xe1rnu) do\u0161lo ke zm\u011bn\u011b politick\xfdch a spole\u010densk\xfdch pom\u011br\u016f. V roce 1992 vznikla akciov\xe1 spole\u010dnostElektr\xe1rna Kol\xedn, bylo rozhodnuto k n\xe1vrtu k v\xfdrob\u011b elekt\u0159iny a v roce 1994 byl spu\u0161t\u011bn provoz kotle K6 pro spalov\xe1n\xed plynu. Elekr\xe1rna do sou\u010dasnostije\u0161t\u011b n\u011bkolikr\xe1t zm\u011bnila majitele a v roce 2003 v n\xed byl uveden do provozu sou\u010dasn\xfd hlavn\xed zdroj hn\u011bdouheln\xfd kotel K8. V sou\u010dasnosti je majitelem spole\u010dnosti Veolia.       ","description1":"V odstavci jsem ozna\u010dil slovo mod\u0159e, bylo by tam dobr\xe9 ud\u011blat odkaz na Kol\xedn, p\u016fvodn\xed","description2":"","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[15.209115,50.0303975],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Chvaletice","place":"Chvaletice, Trn\xe1vka (n\u011bkde mezi)","years_in_service":"1979-doposud","power":"820","sources1":"","sources2":"","type":"uheln\xe1","owner":"V sou\u010dasnoti 7 energy","description_short":"Postavena v letch 1973-1979 na m\xedst\u011b po t\u011b\u017eb\u011b pyritu. Do roku 2021 \u0161lo o nejlad\u0161\xed uhelnou elektr\xe1rnu v \u010cR. M\xe1 4 hm\u011bdouhlen\xe9 kotle a 4 rovnotlak\xe9 kondenza\u010dn\xed turb\xedny, nap\u011bt\xed na svork\xe1ch gener\xe1toru je 15,75 kV a je pomoc\xed blokov\xfdch transform\xe1tor\u016f p\u0159ev\xe1d\u011bno a p\u0159ipojeno na linku 400 kW. Elketr\xe1rna je typick\xe1 sv\xfdm 300 m vysok\xfdm kom\xednem a 4 100 m vysok\xfdmi a 60 m  v r\u016fm\u011bu m\u011b\u0159ic\xedmi chladic\xedmi v\u011b\u017eemi. Po roce 1989 byla elektr\xe1rna provozov\xe1na spole\u010dnost\xed \u010cEZ. V roce 2011 bylo uva\u017eov\xe1no  zru\u0161en\xed elektr\xe1rny,p\u0159\xedpadn\u011b jej\xedm prodeji, jedn\xedm z d\u016fvod\u016f byl n\xe1kup emes\xedch povolenek a obecn\u011b problematika vypou\u0161t\u011bn\xfdch emis\xed. Elektr\xe1rna se nakonec dostala spole\u010dnosti Sev.en EC, kter\xe1 v roce 2016 zah\xe1jila jej\xed modernizaci ke sn\xed\u017een\xed vypou\u0161t\u011bn\xfdch emis\xed. Krom\u011b elekr\xe1rensk\xe9ho provozu je odpadn\xed teplo vyu\u017e\xedv\xe1no k dod\xe1vk\xe1m tepla do m\u011bsta Chvaletice, obce Trn\xe1vka, dvou pr\u016fmyslov\xfdch are\xe1l\u016f mezi m\u011bstem a elektr\xe1rnou a pro vlastn\xed provoz elektr\xe1rny. Od pl\xe1novan\xe9ho parovodu do Kol\xedna bylo nakonec upu\u0161t\u011bno, byl by neefektivn\xed.   ","description1":"V odstavci jsem ozna\u010dil slovo mod\u0159e, bylo by tam dobr\xe9 ud\u011blat odkaz na Kol\xedn, sou\u010dasn\xe1","description2":"","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[15.452777777777778,50.02861111111111],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Opatovice","place":"","years_in_service":"1959-doposud","power":"360","sources1":"https://www.eop.cz/historie-soustavy","sources2":"https://pardubicky.denik.cz/zpravy_region/uhli-v-opatovicich-chteli-soudruzi-nahradit-uranem-20191020.html","type":"Vedeno jako kogenera\u010dn\xed uheln\xe1 elektr\xe1rna","owner":"EOP","description_short":"Uvedena do provozu roku 1959 (prvn\xed blok), od za\u010d\xe1tku pojektov\xe1na pro elektr\xe1rensk\xfd i tepl\xe1rensk\xfd provoz. Skl\xe1d\xe1 se z 6 blok\u016f, kter\xe9 byly v\u0161echny uvedeny do provozu do roku 1960. V roce 1969 byla schv\xe1lena studie CZT (centr\xe1ln\xed z\xe1sobov\xe1n\xed teplem) a elektr\xe1rna byla postupn\u011b p\u0159ipojov\xe1na jako tepl\xe1rna pro z\xe1sobov\xe1n\xed teplem Pardubic, Hradce Kr\xe1lov\xe9 a okol\xed. Pro v\xfdrobu el. energie je vybavena kotli s pr\xe1\u0161kov\xfdm spalov\xe1n\xedm a 3 kondenza\u010dn\xedmi, 2 odb\u011brov\xfdmi a 1 protitlakou turb\xednou. V sou\u010dasn\xe9 dob\u011b je v pl\xe1nu p\u0159estav\u011bn\xed elektr\xe1rny pro spalov\xe1n\xed plynu.","description1":"V roce 1980 byla zah\xe1jena p\u0159\xedprava na hled\xe1n\xed lokality nov\xe9 jadern\xe9 elektr\xe1rny v\xfdchodn\xed \u010dechy, kde hr\xe1lo um\xedst\u011bn\xed stav\xe1j\xedc\xed elektr\xe1rny zna\u010dnou roli. Pl\xe1n uva\u017eoval s postaven\xedm JE v m\xedstech st\xe1vaj\xedc\xed uheln\xe9 s v\xfdkonem 2x1GW. Stavba by byla pl\xe1nov\xe1na v letech 1994-2000. Ov\u0161em po nehod\u011b v \u010cernobylu a n\xe1sledn\xe9 zm\u011bn\u011b politick\xe9ho re\u017eimu v zemi bylo um\xedst\u011bn\xed v bl\xedzkosti m\u011bst Pardubice a Hrdec Kr\xe1lov\xe9 vyhodnoceno jako nevhodn\xe9 a tyto pl\xe1ny kompletn\u011b zanikly.","description2":"","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[15.7909706,50.1269586],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"M\u011bln\xedk I","place":"P\u0159ibli\u017en\u011b 13 km pod sooutokem Labe a Vltavy  ","years_in_service":"1960","power":"240","sources1":"https://www.svetenergie.cz/cz/energetika-zblizka/uhelne-elektrarny/uhelne-elektrarny-cez/elektrarna-melnik","sources2":"","type":"hn\u011bdouheln\xe1","owner":"Od roku 1993 Energotrans, 2012 100% akciov\xfd pod\xedl \u010cEZ","description_short":"Stavba byla zah\xe1jena v roce 1956 a do provozu byla uvedena v roce 1960. V osmdes\xe1t\xfdch letech za\u010dala p\u0159estavba na tepl\xe1rnu sou\u010dasn\u011b byla zah\xe1jena v\xfdstavba tepeln\xe9ho napaje\u010de do Pra\u017esk\xe9 tepeln\xe9 soustavy. Dod\xe1vka tepla pro Prahu byla zah\xe1jena roku 1995.  ","description1":"4 Kotle na spalov\xe1n\xed hn\u011bd\xe9ho uhl\xed s parn\xedmi turb\xednami poh\xe1n\u011bj\xedc\xedmi 4 turbogener\xe1tory \xe1 60MW. ","description2":"M\u011bln\xedk I, II, III tu m\xe1me rozd\u011blen, ale je to jeden are\xe1l tak\u017ee bych to dal do jednoho","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[14.4172844,50.4138506],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"M\u011bln\xedk II","place":"","years_in_service":"1966","power":"220","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr/elektrarna-melnik-58183","sources2":"","type":"hn\u011bdouheln\xe1","owner":"Od roku 1993 Energotrans, 2012 100% akciov\xfd pod\xedl \u010cEZ","description_short":"V roce 1971 uvedeny do provozu 4 bloky po 110 MW. V 80. letech postupn\u011b modernizov\xe1ny elektroduhlova\u010de. ","description1":"V r\xe1mci realizace \xfatlumov\xe9ho programu zdroj\u016f \u010cEZ do\u0161lo k rozhodnut\xed provozovat po nabyt\xed nov\xe9 ekologick\xe9 legislativy (od 1. 1. 1999) pouze dva bloky.","description2":"V letech 1994-1996 pro\u0161ly dva pokra\u010duj\xedc\xed bloku celkovou rekonstrukc\xed. Byly naistalovan\xe9 nov\xe9 turb\xedny s mo\u017enost\xed odb\u011bru tepla i v hork\xe9 vod\u011b. Prim\xe1rn\xedm c\xedlem bylo sn\xed\u017een\xed emis\xed NOx. V roce 1998 bylo pokra\u010dov\xe1no v modernizaci hlavn\u011b z hlediska odsi\u0159ov\xe1n\xed.","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[14.4172844,50.4138506],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"M\u011bln\xedk III","place":"","years_in_service":"1981","power":"500","sources1":"https://www.svetenergie.cz/cz/energetika-zblizka/uhelne-elektrarny/uhelne-elektrarny-cez/elektrarna-melnik","sources2":"","type":"hn\u011bdouheln\xe1","owner":"Od roku 1993 Energotrans, 2012 100% akciov\xfd pod\xedl \u010cEZ","description_short":"Elektr\xe1rna s jedn\xedm blokem 500 MW uvedena do trval\xe9ho provozu v roce 1981, ve sv\xe9 dob\u011b to byl blok s nejv\u011bt\u0161\xedm v\xfdkon v republice. Pro\u0161el v pr\u016fb\u011bhu rekonstrukcemi pro zlep\u0161en\xed ekologi\u010dnosti a ekomom\u010dnosti provozu, d\xedky tomu bylo v leteh 1994-1998 rozhodnuto o prodlou\u017een\xed \u017eivotnosti elketr\xe1rny o dal\u0161\xedch nejm\xe9n\u011b 20 let.","description1":"Pro vyu\u017eit\xed vyt\xe9kaj\xedc\xed vody z elektr\xe1rny byla v are\xe1lu postavena MVE.","description2":"","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[14.4172844,50.4138506],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"T\u0159ebovice","place":"ostrava","years_in_service":"1933-sou\u010dasnost","power":"2x 21 MW, zni\u010dena nem\u011bckou arm\xe1dou; 65MW 1939; 285,5MW 1955; ","sources1":"https://www.historickaostrava.cz/elektrarna-v-ostrave-trebovicich/","sources2":"","type":"uheln\xe1","owner":"Veolia Energie \u010cR","description_short":"V roce 1920 byla zalo\u017eena spole\u010dnost Moravskoslezsk\xe9 elektr\xe1rny se s\xeddlem v Moravsk\xe9 Ostrav\u011b s p\u016fvodn\xedm akciov\xfdm kapit\xe1lem 15 mil. K\u010ds. Tato spole\u010dnost m\u011bla na starost obvod \u017eupy moravskoslezsk\xe9, tedy skoro cel\xe9 Opavsko, T\u011b\u0161\xednsko a v\xfdchodn\xed Moravu a\u017e po Radho\u0161\u0165 a B\u011blot\xedn. Z\xe1sobovac\xed oblast MSE tvo\u0159ilo \xfazem\xed o rozloze 4560 km2, ve kter\xe9m bylo 28 soudn\xedch okres\u016f s 511 obcemi a celkem 845.000 obyvateli.\xa0","description1":"Z po\u010d\xe1tku MSE nakupovala elekt\u0159inu od d\u016fln\xedch elektr\xe1ren, v pr\u016fb\u011bhu let v\u0161ak pl\xe1novala postavit vlastn\xed parn\xed elektr\xe1rnu v ostravsk\xe9m kamenouheln\xe9m rev\xedru. Na popud Ing. Lista se ob\u011b elektr\xe1rensk\xe9 spole\u010dnosti (MSE i SME) dohodly na spole\u010dn\xe9 v\xfdstavb\u011b parn\xed elektr\xe1rny v T\u0159ebovic\xedch.","description2":"T\u0159ebovick\xe1 elektr\xe1rna byla vyprojektov\xe1na ji\u017e ve 20.letech 20. stolet\xed, ale k zah\xe1jen\xed v\xfdstavby do\u0161lo v roce\xa01929, kdy byla vyps\xe1na sout\u011b\u017e na v\xfdstavbu \xfast\u0159edny 40, p\u0159\xedpadn\u011b 100 atm. a v\xedce. S ohledem na nejhospod\xe1rn\u011bj\u0161\xed \u0159e\u0161en\xed bylo rozhodnuto o v\xfdstavb\u011b vysokotlak\xe9 \xfast\u0159edny 130 atm., kter\xe1 ze v\u0161ech sout\u011b\u017en\xedch projekt\u016f slibovala nejp\u0159\xedzniv\u011bj\u0161\xed vyu\u017eit\xed tepla. O um\xedst\u011bn\xed elektr\xe1rny v T\u0159ebovic\xedch rozhodla bl\xedzkost uheln\xfdch dol\u016f, dostupn\xe1 voda z \u0159eky Opavy i dostate\u010dn\xfd prostor pro p\u0159\xedpadn\xe9 roz\u0161i\u0159ov\xe1n\xed.\xa0","description3":"V\xfdstavba elektr\xe1rny za\u010dala v roce\xa01931. Hlavn\xed halu tvo\u0159\xed ocelov\xe1 konstrukce s vyzd\xedvkou z re\u017en\xe9ho zdiva. V are\xe1lu byly postaveny dv\u011b n\xe1dr\u017ee na vodu, proto\u017ee bl\xedzk\xe1 \u0159eka m\u011bla hlavn\u011b v l\xe9t\u011b n\xedzk\xfd pr\u016ftok vody. V elektr\xe1rn\u011b byly vnit\u0159n\xed rozvody na 22kV pro pot\u0159eby MSE a dom\xe1c\xed rozvodny na 3000V a 380V. Vedle budov elektr\xe1rny byla postavena venkovn\xed nekryt\xe1 rozvodna na 110kV, odkud vych\xe1zela dv\u011b d\xe1lkov\xe1 veden\xed sm\u011brem na P\u0159erov a \u017dilinu.\xa0\xa0N\xe1klady na v\xfdstavbu dos\xe1hly \u010d\xe1stky zhruba 80 milionu K\u010ds.\xa0","description4":"T\u0159ebovick\xe1 elektr\xe1rna byla spu\u0161t\u011bna dne\xa01. \u010dervence 1933. Po spu\u0161t\u011bn\xed provozu se jednalo o nejsiln\u011bj\u0161\xed vysokotlakou elektrickou \xfast\u0159ednu na sv\u011bt\u011b, nejv\u011bt\u0161\xed elektr\xe1rnu na Morav\u011b a z\xe1rove\u0148 nejmodern\u011bj\u0161\xed ve st\u0159edn\xed Evrop\u011b. Prvn\xed etapa v\xfdstavby byla dokon\u010dena v roce\xa01939, elektr\xe1rna m\u011bla tehdy v\xfdkon 65 MW.","description5":"A\u010dkoliv elektr\xe1rna pracovala s nejhor\u0161\xedm ostravsk\xfdm uhl\xedm, cel\xe9 za\u0159\xedzen\xed se vyzna\u010dovalo p\u0159ekvapuj\xedc\xed \u010distotou. Uhl\xed se automaticky v\xe1\u017eilo a pomoc\xed mechanick\xfdch dopravn\xedk\u016f bylo dopraveno do ml\xfdnice. Ohromn\xe9 ml\xfdny uhl\xed pohltily a semlely na prach, kter\xfd ventil\xe1tory nafoukaly do z\xe1sobn\xedk\u016f, um\xedst\u011bn\xfdch vysoko pod st\u0159echou kotelny. Kotelna byla 35 metr\u016f vysok\xe1 budova v n\xed\u017e bylo \u010disto a topi\u010d v\u0161e ovl\xe1dat pomoc\xed p\u0159\xedstroj\u016f, kter\xe9 informovaly o prob\xedhaj\xedc\xedch procesech.\xa0Struska a pop\xedlek koteln\xedch agreg\xe1t\u016f se odplavuje do jam na strusku, le\u017e\xedc\xedch mimo budovu, odkud se nakl\xe1d\xe1 do vagonu a pot\xe9 odv\xe1\u017e\xed na skl\xe1dky v okol\xed.","description6":"B\u011bhem druh\xe9 etapy v\xfdstavby v letech\xa01950 a\u017e 1955\xa0byl v\xfdkon elektr\xe1rny zv\xfd\u0161en na 285,5 MW. V t\xe9to etap\u011b byl tak\xe9 postaven t\u0159et\xed kom\xedn, pozd\u011bji tak\xe9 t\u0159i nov\xe9 chlad\xedc\xed v\u011b\u017ee.\xa0"},"geometry":{"coordinates":[18.2116,49.8316],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"V\xedtkovice","place":"ostrava","years_in_service":"v\xedc jak 1947- sou\u010dasnost","power":"3x342","sources1":"https://cs.wikipedia.org/wiki/Elektr\xe1rna_V\xedtkovice","sources2":"","type":"\u010dernouheln\xe1","owner":"\u010dez a.s.","description_short":"V elektr\xe1rn\u011b jsou um\xedst\u011bny t\u0159i koteln\xed jednotky s tepeln\xfdm v\xfdkonem 342\xa0MW. Tyto kotly vyprodukuj\xed 4000\xa0TJ\xa0p\xe1ry\xa0za rok. Tato p\xe1ra slou\u017e\xed z 55\xa0% k produkci elektrick\xe9 energie, zb\xfdvaj\xedc\xed \u010d\xe1st energie se vyu\u017e\xedv\xe1 pro v\xfdrobu tepla, jeho\u017e ro\u010dn\xed produkce je 210 000\xa0MWh.[1]","description1":"Pod tento z\xe1vod spad\xe1 tak\xe9 mobiln\xed v\xfdtopna na zemn\xed plyn, kter\xe1 je um\xedst\u011bna ve firm\u011b\xa0V\xedtkovice Steel. Tato v\xfdtopna disponuj\xedc\xed tepeln\xfdm v\xfdkonem 18 MW a ro\u010dn\xed produkc\xed 200 TJ slou\u017e\xed k v\xfdrob\u011b p\xe1ry pro pot\u0159ebu vakuov\xe9ho lit\xed oceli.[1]","description2":"Provozovatelem tohoto energetick\xe9ho zdroje byla od roku 2000 spole\u010dnost Energetika V\xedtkovice, a.s., jeho\u017e jedin\xfdm akcion\xe1\u0159em byla Severomoravsk\xe1 energetika, a.s. 26. \u0159\xedjna 2007 se jedin\xfdm akcion\xe1\u0159em t\xe9to firmy stala spole\u010dnost \u010cEZ. 1. \u0159\xedjna 2008 spole\u010dnost Energetika V\xedtkovice zanikla bez likvidace, nebo\u0165\xa0f\xfazovala\xa0s mate\u0159skou spole\u010dnost\xed \u010cEZ.[2]","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[18.273899999999998,49.8161],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Na Z\xe1most\xed","place":"ostrava","years_in_service":"1896-1945","power":"do 1MW nejsp\xed\u0161","sources1":"https://www.historickaostrava.cz/stara-elektrarna-na-zamosti/","sources2":"","type":"uheln\xe1","owner":"??","description_short":"Obecn\xed elektr\xe1rna ve Slezsk\xe9 Ostrav\u011b byla vybudov\xe1na v roce 1896. Elektr\xe1rna nap\xe1jela \u010derpac\xed stanici vod\xe1rny, s\xed\u0165 ve\u0159ejn\xe9ho elektrick\xe9ho osv\u011btlen\xed a pozd\u011bji i \xfazkorozchodnou tramvajovou tra\u0165 do Mich\xe1lkovic a Hru\u0161ova.","description1":"V souvislost se stavbou nov\xe9ho vodojemu na Hladnov\u011b do\u0161lo k postaven\xed v\u016fbec prvn\xed elektr\xe1rny na Ostravsku. Do vodojemu v elektr\xe1rn\u011b na Z\xe1most\xed byla samosp\xe1dem p\u0159iv\xe1d\u011bna voda\xa0z lesa D\u016fl\u0148\xe1ku. Z vodojemu v elektr\xe1rn\u011b byla voda p\u0159e\u010derp\xe1v\xe1na \u010derpadly do zemn\xedho vodojemu na Jaklovci.\xa0","description2":"Tehdej\u0161\xed obci Polsk\xe1 Ostrava byla 28. \u0159\xedjna 1895 ud\u011blena koncese na stavbu a provozov\xe1n\xed elektr\xe1rny.\xa0Projekt a stavbu provedl m\xedstn\xed, n\xe1rodnostn\u011b \u010desk\xfd architekt a stavitel Bohumil \u017didlick\xfd. Strojn\xed vybaven\xed (kotle a rychlob\u011b\u017en\xe9 parn\xed stroje) dodaly adamovsk\xe9 stroj\xedrny Bromovsk\xfd, Schulz & Sohr. V budov\u011b elektrick\xe9 centr\xe1ly byla kotelna, strojovna, vod\xe1rensk\xe1 m\xedstnost, skladi\u0161t\u011b a d\xedlna. Ve vedlej\u0161\xed budov\u011b byly kancel\xe1\u0159e. Sou\u010d\xe1st\xed elektr\xe1rny byl tak\xe9 kom\xedn vysok\xfd 35 metr\u016f.","description3":"Elektr\xe1rna vyr\xe1b\u011bla stejnosm\u011brn\xfd proud 2x 150V. P\u016fvodn\u011b dod\xe1vala proud 80 odb\u011bratel\u016fm, v\u010detn\u011b J\xe1my Terezie a koksovny J\xe1my Trojice.\xa0","description4":"\u010cerpac\xed stanice vodovodu byla um\xedst\u011bna v \u201eCentr\xe1ln\xed stanici pro elektrick\xe9 osv\u011btlen\xed\u201c pravd\u011bpodobn\u011b z \xfasporn\xfdch d\u016fvod\u016f, proto\u017ee obsluha elektr\xe1rny a vod\xe1rny byla spojena. Elektrick\xe1 energie byla vyu\u017e\xedv\xe1na pro pohon p\xedstov\xe9ho \u010derpadla.\xa0","description5":"V roce 1911 byly p\u0159istav\u011bny suter\xe9nn\xed prostory pro akumul\xe1tor, kter\xfd nap\xe1jel tramvajovou tra\u0165 do Mich\xe1lkovic a po roz\u0161\xed\u0159en\xed o dal\u0161\xed kotel a parn\xed stoj o v\xfdkonu 200 kon\xed i tramvajovou tra\u0165 do Hru\u0161ova.\xa0","description6":"V roce 1914 byl parn\xed pohon p\u0159em\u011bn\u011bn na pohon elektrick\xfd. Ve stejn\xe9m roce byla postavena elektr\xe1rna na koksovn\u011b Karolina a transforma\u010dn\xed stanice na dole Terezie.\xa0"},"geometry":{"coordinates":[18.297148882264935,49.839471541854834],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Moravsk\xe1 Ostrava","place":"ostrava","years_in_service":"1896-1967","power":"28,7 MW????","sources1":"https://www.historickaostrava.cz/elektrarna-moel/","sources2":"","type":"Uheln\xe1","owner":"Karol\xedna","description_short":"Historie elektr\xe1rny za\u010d\xedn\xe1 v kv\u011btnu roku 1896, kdy m\u011bsto Moravsk\xe1 Ostrava ud\u011blilo budape\u0161\u0165sk\xe9 firm\u011b Ganz&Comp. koncesi na v\xfdstavbu a provozov\xe1n\xed m\u011bstsk\xe9 elektr\xe1rny a to na dobu pades\xe1ti let. V prosinci t\xe9ho\u017e roku byly dokon\u010den\xe9 dva kotle s parn\xedm strojem a 600kW gener\xe1torem a byl zah\xe1jen zku\u0161ebn\xed provoz. V lednu 1898 byla elektr\xe1rna i s rozvodnou dokon\u010dena a zprovozn\u011bna.","description1":"V roce 1900 spole\u010dnost Ganz&Comp. zakl\xe1d\xe1 Moravskoostravskou elektr\xe1renskou akciovou spole\u010dnost (odtud MOEL) se z\xe1kladn\xedm kapit\xe1lem 2,5 milionu korun, kter\xe1 elektr\xe1rnu p\u0159evzala.","description2":"Na p\u0159elomu stolet\xed neust\xe1le rostla spot\u0159eba energie, obzvl\xe1\u0161t\u011b v souvislosti s budov\xe1n\xedm m\xedstn\xedch drah s elektrick\xfdm nap\xe1jen\xedm. V kv\u011btnu 1901 zde byl zah\xe1jen provoz patn\xe1cti elektrick\xfdch tramvaj\xed.","description3":"Po roce 1918 se akcion\xe1\u0159em elektr\xe1rny stalo m\u011bsto Moravsk\xe1 Ostrava. Elektr\xe1rna i dal\u0161\xed provozy se modernizuj\xed a roz\u0161i\u0159uj\xed. V meziv\xe1le\u010dn\xe9 dob\u011b vzrostl akciov\xfd kapit\xe1l spole\u010dnosti a\u017e na 11 milion\u016f K\u010d.","description4":"V roce 1959 byla elektr\xe1rna upravena na v\xfdtopnu pro budovan\xe9 s\xeddli\u0161t\u011b Jind\u0159i\u0161ka. V\xfdroba elekt\u0159iny st\xe1le klesala a v roce 1961 byla zastavena trvale. B\xfdval\xe1 elektr\xe1rna pak byla p\u0159ejmenov\xe1na na Tepl\xe1rnu Ostrava.","description5":"Nejstar\u0161\xed ostravsk\xe1 elektr\xe1rna MOEL ukon\u010dila provoz 9/11 1967.","description6":"Rozvodna na rozd\xedl od elektr\xe1rny v\u0161ak fungovala st\xe1le. V 80t\xfdch letech byla modernizov\xe1na v souvislosti s p\u0159echodem m\u011bsta z nap\u011bn\xed 6kV na 22kV. Od roku 1996 slou\u017eila jen jako provozn\xed z\xe1loha."},"geometry":{"coordinates":[18.282809508970043,49.835383379906155],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"P\u0159erov","place":"m\u011bsto P\u0159erov","years_in_service":"1919-1965","power":"do 10 MW, 1929- 30 MW?","sources1":"https://issuu.com/vkol/docs/krok_03-2022_oba_lka_www3_1_/s/16645659","sources2":"","type":"uheln\xe1","owner":"St\u0159edomoravsk\xe1 elektr\xe1rna, spole\u010dnost s ru\u010den\xedm omezen\xfdm v P\u0159erov\u011b","description_short":" Jde o unik\xe1tn\xed industri\xe1ln\xed stavbu vystav\u011bnou v duchu geometrick\xe9 moderny podle n\xe1vrhu pra\u017esk\xe9ho architekta Ladislava Sk\u0159iv\xe1nka a do provozu byla uvedena v roce 1920.","description1":"Rostouc\xed spot\u0159eba elekt\u0159iny si vynutila roz\u0161\xed\u0159en\xed p\u0159erovsk\xe9 elektr\xe1rny v l. 1927 \u2013 1929 o dal\u0161\xed turbogener\xe1tory, t\xedm v\u0161ak byly jej\xed v\xfdrobn\xed rezervy vy\u010derp\xe1ny.","description2":"V \u0159\xedjnu 1938, po odstoupen\xed severomoravsk\xfdch \xfazem\xed Sudet N\u011bmecku, byla na p\u0159\xedkaz \u0159\xed\u0161sk\xe9ho ministerstva hospod\xe1\u0159stv\xed z\u0159\xedzena v Opav\u011b spole\u010dnost\xed Elektrowerke, A. G. Berlin d\u016fv\u011brnick\xe1 spr\xe1va v\xfdroben elekt\u0159iny a rozvodn\xfdch za\u0159\xedzen\xed SME le\u017e\xedc\xedch v oblasti Sudet. Elektrowerke, resp. Reichselektrowerke A. G. Berlin pak, op\u011bt na p\u0159\xedkaz \u0159\xed\u0161sk\xe9ho ministerstva hospod\xe1\u0159stv\xed, zah\xe1jila jedn\xe1n\xed o koupi elektr\xe1rny v T\u0159ebovic\xedch, v\u010detn\u011b p\u0159\xedslu\u0161n\xfdch rozvodn\xfdch za\u0159\xedzen\xed. Odprodej elektr\xe1rny, resp. jej\xed ide\xe1ln\xed poloviny pat\u0159\xedc\xed SME, byl schv\xe1len na XIX. \u0159\xe1dn\xe9 valn\xe9 hromad\u011b 19. 7. 1940. Sou\u010dasn\u011b v\u0161ak musela b\xfdt uzav\u0159ena smlouva o odb\u011bru elekt\u0159iny z t\u0159ebovick\xe9 elektr\xe1rny, proto\u017ee vodn\xed elektr\xe1rna ve Str\u017ei u Krom\u011b\u0159\xed\u017ee mohla kr\xfdt jen nepatrnou pot\u0159ebu proudu pro z\xe1sobov\xe1n\xed \xfazem\xed v p\u016fsobnosti SME i p\u0159esto, \u017ee se zmen\u0161ilo t\xe9m\u011b\u0159 o polovinu. P\u016fvodn\xed p\u0159erovsk\xe1 elektr\xe1rna byla schopna vykr\xfdvat pouze tzv. odb\u011brov\xe9 \u0161pi\u010dky. Takto dod\xe1van\xe1 elekt\u0159ina m\u011bla b\xfdt hrazena odpo\u010dty z pod\xedlu kupn\xed ceny za elektr\xe1rnu v T\u0159ebovic\xedch, kter\xfd n\xe1le\u017eel SME.","description3":"Kontakty s Moravsko-slezsk\xfdmi elektr\xe1rnami Moravsk\xe1 Ostrava zapo\u010dat\xe9 p\u0159i v\xfdstavb\u011b a vyu\u017e\xedv\xe1n\xed elektr\xe1rny v T\u0159ebovic\xedch vy\xfastily v r. 1941 ve f\xfazi obou firem. F\xfazi schv\xe1lila mimo\u0159\xe1dn\xe1 valn\xe1 hromada 12. 9. 1941, sou\u010dasn\u011b do\u0161lo i ke zm\u011bn\u011b n\xe1zvu firmy na \u201eV\xfdchodomoravsk\xe9 elektr\xe1rny, akciov\xe1 spole\u010dnost v P\u0159erov\u011b\u201c. Do obchodn\xedho rejst\u0159\xedku Krajsk\xe9ho soudu v Olomouci byla zm\u011bna zaps\xe1na 25. 11. 1941 (d\xe1le viz archivn\xed fond \u201eV\xfdchodomoravsk\xe9 elektr\xe1rny, akciov\xe1 spole\u010dnost v P\u0159erov\u011b\u201c, \u010d. NAD: 2291*).","description4":"Tepeln\xe1 elektr\xe1rna P\u0159erova odeb\xedrala ostravsk\xe9 uhl\xed z dol\u016f Anselm, Betyna, \u0160alamoun a \u017dofie v mno\u017estv\xed 7260 t/rok. V koteln\u011b bylo instalov\xe1ny 4 strmotrubn\xe9 kotle s ro\u0161ty Weck v\xfdroby Sl\xe1dek/Spojen\xe9 stroj\xedrny. P\xe1ra rozt\xe1\u010dela 2 parn\xed turb\xedny o v\xfdkonech 2000 a 7200 ks. Elekt\u0159inu vyr\xe1b\u011bly 2 gener\xe1tory o v\xfdkonu 1200 kW z roku 1919 od firmy BBC a o v\xfdkonu 4550 kW z roku 1921 od firmy \u010cMK. Dopl\u0148uj\xedc\xedm strojem byl 1 motorgener\xe1tor o v\xfdkonu 23 kW. Z\xe1lo\u017en\xedm zdrojem byla 63 \u010dl\xe1nkov\xfd akumul\xe1tor o kapacit\u011b 135 Amp/h. V rozvodn\u011b byly osazeny dva transform\xe1tory o v\xfdkonu 4000 kVA z roku 1921 od firmy \u010cMK.","description5":"Elektr\xe1rna m\xe1 vysok\xfd region\xe1ln\xed v\xfdznam v r\xe1mci historick\xe9ho v\xfdvoje elektrizace Moravy jako sou\u010d\xe1sti celkov\xe9 koncepce soustavn\xe9 elektrizace \u010ceskoslovensk\xe9 republiky, kter\xe1 vych\xe1zela ze z\xe1kona ze dne 22. 7. 1919, \u010d. 438 Sb., o st\xe1tn\xed podpo\u0159e p\u0159i zah\xe1jen\xed soustavn\xe9 elektrizace. Jedine\u010dn\xe9 architektonick\xe9 \u0159e\u0161en\xed spo\u010d\xedv\xe1 v kombinaci funk\u010dn\xed stavby s reprezentativn\xed architektonickou formou a detailem. Mimo\u0159\xe1dn\xe9 je zachov\xe1n\xed autentick\xe9 podoby architektury zejm. provozon\u011b administrativn\xed budovy, v\u010detn\u011b zachovan\xfdch architektonick\xfdch detail\u016f, jako jsou nap\u0159\xedklad detail zobo\u0159ezu na fas\xe1d\xe1ch, kontrastn\xed u\u017eit\xed \u010derven\xfdch p\xe1len\xfdch a re\u017en\xfdch cihel atd. Nesporn\xe1 je urbanistick\xe1 hodnota, nebo\u0165 se jedn\xe1 o v\xfdznamnou dominantu P\u0159erova, kter\xe1 je ned\xedlnou sou\u010d\xe1st\xed historicky ust\xe1len\xfdch panoramatick\xfdch pohled\u016f na m\u011bsto. Kom\xedny z tmav\xfdch cihel s kovov\xfdmi skru\u017eemi jsou charakteristick\xfdm vizu\xe1ln\xedm znakem m\u011bsta v bl\xedzk\xfdch i d\xe1lkov\xfdch pohledech.","description6":"Ve m\u011bst\u011b ale ji\u017e p\u016fsobil za\u0159izuj\xedc\xed v\xfdbor pro elektrick\xe9 osv\u011btlen\xed, jeho\u017e \u010dlenov\xe9 po\u017e\xe1dali v roce 1896 o povolen\xed v\xe9st s\xedt\u011b elektrick\xfdch dr\xe1t\u016f po ulic\xedch a ve\u0159ejn\xfdch m\xedstech. Z\xe1rove\u0148 se jednalo o v\xfdstavb\u011b elektrick\xe9 centr\xe1ly, jako staveni\u0161t\u011b bylo p\u016fvodn\u011b vybr\xe1no n\xe1m\u011bst\xed Na Marku."},"geometry":{"coordinates":[17.45111111111111,49.455555555555556],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Tu\u0161imice I","place":"v obci\xa0Tu\u0161imice\xa0v\xa0okrese Chomutov","years_in_service":"1964-1998","power":"6x110, odstaveno v r\xe1mci utlumov\xe9ho programu","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Stejn\u011b jako ETU I, kter\xe1 ji\u017e doslou\u017eila, byla i\xa0Elektr\xe1rna Tu\u0161imice II postavena p\u0159\xedmo u\xa0zdroje paliva - Doly N\xe1stup Tu\u0161imice. Um\xedst\u011bn\xed elektr\xe1rny v\xa0centru v\xfdskytu hn\u011bd\xe9ho uhl\xed s\xa0p\xe1sovou dopravou od t\u011b\u017eebn\xedch stroj\u016f a\u017e do elektr\xe1rny byly a\xa0jsou hlavn\xed p\u0159ednost\xed lokality Tu\u0161imice, nebo\u0165 zcela odpadaj\xed n\xe1klady za dopravu uhl\xed po \u017eeleznici. To v\xfdznamn\u011b sni\u017euje v\xfdrobn\xed n\xe1klady a\xa0\u0159ad\xed elektr\xe1rnu mezi nejefektivn\u011bj\u0161\xed provozy v\xa0\u010cesk\xe9 republice. Proto byla a\xa0je elektr\xe1rna od doby sv\xe9ho spu\u0161t\u011bn\xed v\u017edy maxim\xe1ln\u011b vyu\u017e\xedv\xe1na. ETU I\xa0s\xa0pln\xfdm instalovan\xfdm v\xfdkonem pracovala a\u017e do za\u010d\xe1tku 90. let, pot\xe9 bylo v\u0161ech 6 blok\u016f v\xa0r\xe1mci \xfatlumov\xe9ho programu odstaveno. Kom\xedn elektr\xe1rny padl k\xa0zemi v\xa0listopadu 2005, byl to dosud nejvy\u0161\u0161\xed \u017eelezobetonov\xfd kom\xedn (196 metr\u016f) v\xa0\u010cR, kter\xfd byl takto odst\u0159elen.","description1":"P\u0159i stavb\u011b, stejn\u011b jako u sousedn\xed elektr\xe1rny Tu\u0161imice II, byly odkryty stopy po\xa0prav\u011bk\xe9\xa0t\u011b\u017eb\u011b\xa0k\u0159emence. \u0160lo o des\xedtky[6]\xa0prehistorick\xfdch t\u011b\u017eebn\xedch objekt\u016f z\xa0mlad\u0161\xed doby kamenn\xe9, prvn\xed a unik\xe1tn\xed n\xe1lez tohoto druhu v tehdej\u0161\xed\xa0\u010cSSR[7].","description2":"V 10. letech 21. stolet\xed byly na plo\u0161e po zru\u0161en\xe9 elektr\xe1rn\u011b otev\u0159eny sklen\xedky pro p\u011bstov\xe1n\xed zeleniny (nap\u0159. raj\u010dat), sklen\xedky pou\u017e\xedvaj\xed odpadn\xed teplo z ETU II.[4][5]","description3":"","description4":"","description5":"","description6":""},"geometry":{"coordinates":[13.333958333333333,50.38636388888889],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Tu\u0161imice II","place":"v obci\xa0Tu\u0161imice\xa0v\xa0okrese Chomutov","years_in_service":"1975-sou\u010dasnost","power":"4x200","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Stejn\u011b jako ETU I, kter\xe1 ji\u017e doslou\u017eila, byla i\xa0Elektr\xe1rna Tu\u0161imice II postavena p\u0159\xedmo u\xa0zdroje paliva - Doly N\xe1stup Tu\u0161imice. Um\xedst\u011bn\xed elektr\xe1rny v\xa0centru v\xfdskytu hn\u011bd\xe9ho uhl\xed s\xa0p\xe1sovou dopravou od t\u011b\u017eebn\xedch stroj\u016f a\u017e do elektr\xe1rny byly a\xa0jsou hlavn\xed p\u0159ednost\xed lokality Tu\u0161imice, nebo\u0165 zcela odpadaj\xed n\xe1klady za dopravu uhl\xed po \u017eeleznici. To v\xfdznamn\u011b sni\u017euje v\xfdrobn\xed n\xe1klady a\xa0\u0159ad\xed elektr\xe1rnu mezi nejefektivn\u011bj\u0161\xed provozy v\xa0\u010cesk\xe9 republice. Proto byla a\xa0je elektr\xe1rna od doby sv\xe9ho spu\u0161t\u011bn\xed v\u017edy maxim\xe1ln\u011b vyu\u017e\xedv\xe1na. ETU I\xa0s\xa0pln\xfdm instalovan\xfdm v\xfdkonem pracovala a\u017e do za\u010d\xe1tku 90. let, pot\xe9 bylo v\u0161ech 6 blok\u016f v\xa0r\xe1mci \xfatlumov\xe9ho programu odstaveno. Kom\xedn elektr\xe1rny padl k\xa0zemi v\xa0listopadu 2005, byl to dosud nejvy\u0161\u0161\xed \u017eelezobetonov\xfd kom\xedn (196 metr\u016f) v\xa0\u010cR, kter\xfd byl takto odst\u0159elen.","description1":"Elektr\xe1rna Tu\u0161imice II\xa0se \u010dty\u0159mi 200 MW bloky zah\xe1jila provoz v\xa0letech 1974 \u2013 1975. Postavena byla, shodn\u011b jako prvn\xed, p\u0159\xedmo u\xa0zdroje paliva Dol\u016f N\xe1stup Tu\u0161imice, odkud p\u0159ich\xe1z\xed palivo p\xe1sovou dopravou a\u017e do kotelny.\xa0Spole\u010dnost\xa0\u010cEZ Tepl\xe1rensk\xe1, a.s.\xa0dod\xe1v\xe1 teplo vyroben\xe9 v\xa0elektr\xe1rn\u011b \xa0sv\xfdm z\xe1kazn\xedk\u016fm v\xa0nejbli\u017e\u0161\xedm okol\xed a\xa0z\xe1sobuje teplem m\u011bsto Kada\u0148. Celkov\xe1 ro\u010dn\xed dod\xe1vka tepla odb\u011bratel\u016fm je cca 500 TJ p\u0159i maxim\xe1ln\xedm tepeln\xe9m v\xfdkonu 85 MWt.","description2":"Mezi roky 2007 a\xa02012 elektr\xe1rna Tu\u0161imice II\xa0 pro\u0161la grandi\xf3zn\xed komplexn\xed obnovou, kter\xe1 zajistila jej\xed budouc\xed provoz podle sou\u010dasn\xfdch evropsk\xfdch standard\u016f p\u0159ibli\u017en\u011b do roku 2035, kdy se p\u0159edpokl\xe1d\xe1\xa0vyt\u011b\u017een\xed sousedn\xedho dolu Libou\u0161. \xda\u010dinnost elektr\xe1rny se zv\xfd\u0161ila o\xa06\xa0% \u010d\xedm\u017e do\u0161lo k\xa014% \xfaspo\u0159e paliva na vyrobenou MWh. Modernizovan\xe1 technologie umo\u017e\u0148uje spalovat v\xa0budoucnu i\xa0m\xe9n\u011b kvalitn\xed palivo z\xa0dolu Libou\u0161. Modernizovan\xe9 je i\xa0odsi\u0159ovac\xed za\u0159\xedzen\xed postaven\xe9 v\xa0letech 1994\u20131997. Nyn\xed je p\u0159ipraveno plnit ty nejp\u0159\xedsn\u011bj\u0161\xed limity v\xa0oblasti vypou\u0161t\u011bn\xed emis\xed po roce 2016. Emise oxid\u016f dus\xedku se poda\u0159ilo sn\xed\u017eit o\xa070\xa0%, emise oxidu si\u0159i\u010dit\xe9ho o\xa079\xa0% a\xa0emise tuh\xfdch zne\u010di\u0161\u0165uj\xedc\xedch l\xe1tek o\xa087\xa0%.\xa0 (Prvn\xed ekologizac\xed v\u0161ak ji\u017e elektr\xe1rna pro\u0161la v\xa0devades\xe1t\xfdch letech, kdy se v\xa0prvn\xed vln\u011b sn\xed\u017eily jej\xed emise o\xa0v\xedce ne\u017e 90 procent!) Vedlej\u0161\xed energetick\xe9 produkty (pop\xedlek, struska a\xa0depon\xe1t) vznikaj\xedc\xed v\xa0Elektr\xe1rn\u011b Tu\u0161imice II jsou certifikovan\xfdmi v\xfdrobky. Depon\xe1t slou\u017e\xed k\xa0revitalizaci krajiny po d\u016fln\xed \u010dinnosti, certifikovan\xe1 struska je vyu\u017e\xedv\xe1na k\xa0asanaci b\xfdval\xe9ho slo\u017ei\u0161t\u011b Tu\u0161imice a\xa0pop\xedlek se prod\xe1v\xe1 pro vyu\u017eit\xed ve stavebnictv\xed. Komplexn\xed obnova v\xa0hodnot\u011b 26 miliard korun tak\xe9 pomohla p\u0159ekonat ekonomickou krizi v\xa0lokalit\u011b a\xa0prodlou\u017een\xed provozu o\xa025 let umo\u017enilo zachovat tis\xedce pracovn\xedch m\xedst.","description3":"Pod veden\xedm gener\xe1ln\xedho dodavatele \u0160KODA PRAHA Invest do\u0161lo k\xa0v\xfdm\u011bn\u011b \u010dty\u0159 p\u016fvodn\xedch kotl\u016f, rekonstrukci elektroodlu\u010dova\u010d\u016f, vybudov\xe1n\xed nov\xe9ho ods\xed\u0159en\xed a\xa0rekonstrukci vodn\xedho hospod\xe1\u0159stv\xed elektr\xe1rny. Na upraven\xfdch turb\xednov\xfdch stolic\xedch jsou nyn\xed nainstalov\xe1ny \u010dty\u0159i nov\xe9 t\u0159\xedt\u011blesov\xe9 turb\xedny, ka\u017ed\xe1 o\xa0v\xfdkonu 200 MW. \u010cty\u0159i gener\xe1tory pro strojovnu, komplexn\xed za\u0159\xedzen\xed pro elektro\u010d\xe1st a\xa0syst\xe9m automatizovan\xe9ho \u0159\xedzen\xed technologick\xfdch proces\u016f dodala spole\u010dnost Siemens. Dosa\u017een\xe9 parametry odpov\xeddaj\xed hodnot\xe1m p\u0159edepsan\xfdm pro tzv. BAT (Best Available Technology, kter\xe9 p\u0159edstavuj\xed sv\u011btov\u011b uzn\xe1van\xfd standard dosa\u017een\xed emisn\xedch limit\u016f a\xa0zv\xfd\u0161en\xed \xfa\u010dinnosti\xa0 modernizovan\xfdch zdroj\u016f.","description4":"","description5":"","description6":""},"geometry":{"coordinates":[13.333958333333333,50.38636388888889],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Prun\xe9\u0159ov I","place":"z\xe1padn\xedm okraji severo\u010desk\xe9 hn\u011bdouheln\xe9 p\xe1nve mezi Chomutovem a\xa0Kl\xe1\u0161tercem nad Oh\u0159\xed.","years_in_service":"1967-2020","power":"660, pak sn\xed\u017eeno na 4x110 v r\xe1mci \xfatlumov\xe9ho programu","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Elektr\xe1rna Prun\xe9\u0159ov\xa0le\u017e\xed na z\xe1padn\xedm okraji severo\u010desk\xe9 hn\u011bdouheln\xe9 p\xe1nve mezi Chomutovem a\xa0Kl\xe1\u0161tercem nad Oh\u0159\xed. P\u016fvodn\u011b byla organiza\u010dn\u011b spojeny s\xa0Elektr\xe1rnou Tu\u0161imice I\xa0a\xa0Tu\u0161imice II v\xa0Elektr\xe1rn\xe1ch SSM, pozd\u011bji v\xa0Podkru\u0161nohorsk\xfdch elektr\xe1rn\xe1ch. Samostatnou organiza\u010dn\xed jednotkou \u010cEZ,\xa0a.\xa0s., se staly v\xa0roce 1993. V\xa0sou\u010dasn\xe9 dob\u011b op\u011bt tvo\u0159\xed spole\u010dnou organiza\u010dn\xed jednotku s\xa0Elektr\xe1rnou Tu\u0161imice.","description1":"Elektr\xe1rny Prun\xe9\u0159ov pat\u0159\xed k\xa0nejv\u011bt\u0161\xedm dodavatel\u016fm elekt\u0159iny. Z\xe1rove\u0148 prost\u0159ednictv\xedm spole\u010dnosti \u010cEZ Tepl\xe1rensk\xe1, a.s., dod\xe1vaj\xed teplo do Chomutova, Jirkova a\xa0Kl\xe1\u0161terce nad Oh\u0159\xed. Instalovan\xfd v\xfdkon pro dod\xe1vku tepla dosahuje 500 MW. Ro\u010dn\xed dod\xe1vka tepla pro v\u0161echna t\u0159i m\u011bsta \u010din\xed 920 TJ.","description2":"Dodavatelem za\u0159\xedzen\xed pro Elektr\xe1rnu Prun\xe9\u0159ov I\xa0byla n\u011bmeck\xe1 firma Bischoff, GmbH a\xa0za\u0159\xedzen\xed bylo dokon\u010deno a\xa0uvedeno do pln\xe9ho provozu koncem roku 1995.","description3":"Provoz Elektr\xe1rny Prun\xe9\u0159ov\xa0I\xa0byl ukon\u010den 30.\xa0\u010dervna 2020. Firma \u010cEZ hodlala n\xe1sledn\u011b vyu\u017e\xedt are\xe1l k\xa0v\xfdstavb\u011b paroplynov\xe9ho cyklu, plynov\xe9 kotelny, sol\xe1rn\xedho parku, bateriov\xe9ho \xfalo\u017ei\u0161t\u011b \u010di jin\xfdm zp\u016fsobem.[17]\xa0Likvidace elektr\xe1rny za\u010dala 13.\xa0kv\u011btna 2022 zah\xe1jen\xedm demolice chladic\xedch v\u011b\u017e\xed. Dv\u011b st\u011b metr\u016f vysok\xfd kom\xedn byl odst\u0159elen 23.\xa0\u010dervna 2023.[18][19]\xa0Odst\u0159el prob\u011bhl v\xa010.56, p\u0159i\u010dem\u017e po\u010det minut symbolizuje 56 let existence elektr\xe1rny.[20]","description4":"V devades\xe1t\xfdch letech byl v\xfdkon EPRU I v r\xe1mci \xfatlumov\xe9ho programu sn\xed\u017een o t\u0159etinu. V letech 1995 a 1996 byly ob\u011b elektr\xe1rny vybaveny\xa0odsi\u0159ovac\xedm\xa0za\u0159\xedzen\xedm pot\xe9, kdy v d\u016fsledku nekontrolovateln\xe9ho vypou\u0161t\u011bn\xed\xa0oxid\u016f s\xedry\xa0do\xa0ovzdu\u0161\xed\xa0a n\xe1sledn\xfdch\xa0kysel\xfdch de\u0161\u0165\u016f\xa0doch\xe1zelo k rozs\xe1hl\xe9 likvidaci\xa0lesn\xedho\xa0porostu p\u0159ilehl\xfdch\xa0Kru\u0161n\xfdch hor. N\xe1sledky t\xe9to devastace\xa0p\u0159\xedrody\xa0jsou patrn\xe9 dodnes a n\xe1vrat k norm\xe1lu bude je\u0161t\u011b dlouh\xfd proces. V evropsk\xe9m \u017eeb\u0159\xed\u010dku sleduj\xedc\xedm nejvy\u0161\u0161\xed emise\xa0oxidu uhli\u010dit\xe9ho\xa0elektr\xe1ren ve vztahu k vyroben\xe9mu mno\u017estv\xed elektrick\xe9 energie skon\u010dily elektr\xe1rny na dvan\xe1ct\xe9m m\xedst\u011b (co do absolutn\xedho objemu emis\xed CO2\xa0je Prun\xe9\u0159ov a\u017e na dvac\xe1t\xe9m m\xedst\u011b v Evrop\u011b).[2]\xa0V r\xe1mci \u010cesk\xe9 republiky jsou elektr\xe1rny nejv\u011bt\u0161\xedm zdrojem emis\xed oxidu uhli\u010dit\xe9ho, v roce 2007 emitovaly 10,1 milion\u016f tun.","description5":"","description6":""},"geometry":{"coordinates":[13.259,50.418],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Prun\xe9\u0159ov II","place":"z\xe1padn\xedm okraji severo\u010desk\xe9 hn\u011bdouheln\xe9 p\xe1nve mezi Chomutovem a\xa0Kl\xe1\u0161tercem nad Oh\u0159\xed.","years_in_service":"1982-sou\u010dasnost","power":"1050, 3x250","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Elektr\xe1rna Prun\xe9\u0159ov II\xa0je nejmlad\u0161\xed uhelnou elektr\xe1rnou \u010cEZ,\xa0a.\xa0s. P\u016fvodn\u011b m\u011bla p\u011bt 210 MW blok\u016f, kter\xe9 byly postupn\u011b uvedeny do provozu v\xa0letech 1981 a\u017e 1982.\xa0Po komplexn\xed obnov\u011b\xa0(2012 \u2013 2016)\xa0m\xe1\xa0instalovan\xfd v\xfdkon 3 x 250 MW.\xa0Star\u0161\xed Elektr\xe1rna Prun\xe9\u0159ov I\xa0s\xa0v\xfdkonem 440 MW\xa0 byla v\xa0\u010dervnu 2020 po v\xedce ne\u017e 50 letech odstavena z\xa0provozu. \u010cEZ\xa0tak\xa0pokra\u010duje v\xa0napl\u0148ov\xe1n\xed sv\xe9 strategie postupn\xe9ho p\u0159echodu k\xa0n\xedzkoemisn\xed a\u017e bezemisn\xed v\xfdrob\u011b elekt\u0159iny postaven\xe9 na obnoviteln\xfdch zdroj\xedch a\xa0jadern\xe9 energetice.","description1":"Elektr\xe1rny Prun\xe9\u0159ov pat\u0159\xed k\xa0nejv\u011bt\u0161\xedm dodavatel\u016fm elekt\u0159iny. Z\xe1rove\u0148 prost\u0159ednictv\xedm spole\u010dnosti \u010cEZ Tepl\xe1rensk\xe1, a.s., dod\xe1vaj\xed teplo do Chomutova, Jirkova a\xa0Kl\xe1\u0161terce nad Oh\u0159\xed. Instalovan\xfd v\xfdkon pro dod\xe1vku tepla dosahuje 500 MW. Ro\u010dn\xed dod\xe1vka tepla pro v\u0161echna t\u0159i m\u011bsta \u010din\xed 920 TJ.","description2":"Elektr\xe1rna Prun\xe9\u0159ov II\xa0m\xe1 po komplexn\xed obnov\u011b kotle o\xa0v\xfdkonu 660 t/h, s\xa0parametry p\xe1ry 18,2 MPa/575/580 \xb0C. Kotle jsou dvoutahov\xe9, s\xa0granula\u010dn\xedm topeni\u0161t\u011bm, pr\u016ftla\u010dn\xe9, s\xa0p\u0159ih\u0159\xedv\xe1n\xedm p\xe1ry. Jejich dodavatelem byly V\xedtkovice Power Engineering. Turb\xedny 250 MW typ \u0160koda KT \u2013 250 \u2013 17,66\xa0 jsou dvout\u011blesov\xe9, rovnotlak\xe9 kondenza\u010dn\xed\xa0 s\xa0p\u0159ih\u0159\xedv\xe1n\xedm p\xe1ry za VT d\xedlem, s\xa0jedn\xedm kombinovan\xfdm VT-ST d\xedlem a\xa0jedn\xedm dvouproudov\xfdm NT d\xedlem. Ka\u017ed\xe1 turb\xedna je vybavena 8 neregulovan\xfdmi odb\u011bry p\xe1ry pro regeneraci, topen\xed nap\xe1jec\xed n\xe1dr\u017ee a\xa0oh\u0159\xedv\xe1n\xed topn\xe9 vody v\xa0OTV a\xa0jedn\xedm regulovan\xfdm odb\u011brem p\xe1ry\xa0 pro regulaci teploty v\xa0OTV3 a\xa0dod\xe1vku p\xe1ry do NTO5. V\xfdvody jednotliv\xfdch blok\u016f jsou p\u0159es v\xfdvodov\xe9 transform\xe1tory 300 MVA, 15,75/420 kV p\u0159ipojeny do p\u0159enosov\xe9 soustavy 400 kV linkami V465 a\xa0V466, do rozvodny Hradec u\xa0Kadan\u011b.","description3":"V\xa0druh\xe9m p\u0159\xedpad\u011b realizovalo dod\xe1vku \\"na kl\xed\u010d\\" konsorcium japonsk\xfdch firem Mitsubishi Heavy Industries, Mitsubishi Corporation ve spolupr\xe1ci se ZVU Hradec Kr\xe1lov\xe9, a. s. Odsi\u0159ovac\xed za\u0159\xedzen\xed bylo uvedeno do provozu v\xa0l\xe9t\u011b roku 1996.","description4":"V devades\xe1t\xfdch letech byl v\xfdkon EPRU I v r\xe1mci \xfatlumov\xe9ho programu sn\xed\u017een o t\u0159etinu. V letech 1995 a 1996 byly ob\u011b elektr\xe1rny vybaveny\xa0odsi\u0159ovac\xedm\xa0za\u0159\xedzen\xedm pot\xe9, kdy v d\u016fsledku nekontrolovateln\xe9ho vypou\u0161t\u011bn\xed\xa0oxid\u016f s\xedry\xa0do\xa0ovzdu\u0161\xed\xa0a n\xe1sledn\xfdch\xa0kysel\xfdch de\u0161\u0165\u016f\xa0doch\xe1zelo k rozs\xe1hl\xe9 likvidaci\xa0lesn\xedho\xa0porostu p\u0159ilehl\xfdch\xa0Kru\u0161n\xfdch hor. N\xe1sledky t\xe9to devastace\xa0p\u0159\xedrody\xa0jsou patrn\xe9 dodnes a n\xe1vrat k norm\xe1lu bude je\u0161t\u011b dlouh\xfd proces. V evropsk\xe9m \u017eeb\u0159\xed\u010dku sleduj\xedc\xedm nejvy\u0161\u0161\xed emise\xa0oxidu uhli\u010dit\xe9ho\xa0elektr\xe1ren ve vztahu k vyroben\xe9mu mno\u017estv\xed elektrick\xe9 energie skon\u010dily elektr\xe1rny na dvan\xe1ct\xe9m m\xedst\u011b (co do absolutn\xedho objemu emis\xed CO2\xa0je Prun\xe9\u0159ov a\u017e na dvac\xe1t\xe9m m\xedst\u011b v Evrop\u011b).[2]\xa0V r\xe1mci \u010cesk\xe9 republiky jsou elektr\xe1rny nejv\u011bt\u0161\xedm zdrojem emis\xed oxidu uhli\u010dit\xe9ho, v roce 2007 emitovaly 10,1 milion\u016f tun.","description5":"","description6":""},"geometry":{"coordinates":[13.259,50.418],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"D\u011btmarovice","place":"u\xa0Ostravy, v\xa0t\u011bsn\xe9 bl\xedzkosti polsk\xfdch hranic a\xa0hned vedle hlavn\xed \u017eelezni\u010dn\xed trat\u011b Bohum\xedn\u2013\u017dilina","years_in_service":"1976-sou\u010dasnost","power":"600 (d\u0159\xedve 800) - sn\xed\u017eeno o jeden blok 2020,  v\u017edy 200MW/blok","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr","sources2":"","type":"\u010dernouheln\xe1","owner":"\u010dez a.s.","description_short":"St\xe1ty Evropsk\xe9 unie odsouhlasily v roce 2019 program naz\xfdvan\xfd European Green Deal a p\u0159ihl\xe1sily se k z\xe1vazku vytvo\u0159it z Evropy uhl\xedkov\u011b neutr\xe1ln\xed kontinent. Konec spalov\xe1n\xed uhl\xed pro energetick\xe9 \xfa\u010dely je p\u0159irozen\xfd proces, kter\xfd je nezbytn\xfd k napln\u011bn\xed tohoto z\xe1vazku. Na za\u010d\xe1tku roku se celkov\xfd instalovan\xfd elektrick\xfd v\xfdkon sn\xed\u017eil o 200 MW jednoho uheln\xe9ho bloku. Aktu\xe1ln\xed ceny elektrick\xe9 energie a emisn\xedch povolenek neumo\u017e\u0148uj\xed jej\xed ekonomicky opodstatn\u011bnou v\xfdrobu z \u010dern\xe9ho uhl\xed. Spole\u010dnost Elektr\xe1rna D\u011btmarovice, a.s., proto pl\xe1nuje odstavit zb\xfdvaj\xedc\xed t\u0159i uheln\xe9 bloky o celkov\xe9m v\xfdkonu 600 MW na konci roku 2022 nebo nejpozd\u011bji po topn\xe9 sez\xf3n\u011b 2022-2023. M\xedsto nich je pl\xe1nov\xe1no instalovat vysoce \xfa\u010dinn\xe9 kogenera\u010dn\xed jednotky o celkov\xe9m v\xfdkonu 45 MWe a 40 MWt, kter\xe9 zajist\xed kombinovanou v\xfdrobu elekt\u0159iny a tepla z plynu. To umo\u017en\xed pokra\u010dovat i v budoucnu v dod\xe1vk\xe1ch tepla do Orlov\xe9 a Bohum\xedna.","description1":"Stav\u011bt se za\u010dalo v\xa0roce 1971, bloky byly postupn\u011b p\u0159if\xe1zov\xe1ny do s\xedt\u011b od kv\u011btna 1975 a\u017e do listopadu 1976. Gener\xe1ln\xedm projektantem stavby byl Energoprojekt Praha, dodavatelem stavebn\xed \u010d\xe1sti \u010cOLD Ostrava, technologie \u0160koda Plze\u0148.","description2":"Elektr\xe1rna ro\u010dn\u011b vyrob\xed okolo 2 TWh elektrick\xe9 energie a\xa0v\xedce ne\u017e 650 TJ tepla, kter\xe9 se dod\xe1v\xe1 do Orlov\xe9, Bohum\xedna a\xa0od roku 2018 i\xa0do sklen\xedk\u016f pro p\u011bstov\xe1n\xed zeleniny v\xa0Doln\xed Lutyni.","description3":"Elektr\xe1rna spaluje \u010dern\xe9 uhl\xed s\xa0pr\u016fm\u011brnou v\xfdh\u0159evnost\xed 22 MJ/kg a\xa0obsahem s\xedry pod 1\xa0%. Pou\u017e\xedv\xe1 se uhl\xed z\xa0Ostravsko-karvinsk\xe9 p\xe1nve, ale i\xa0z\xa0dal\u0161\xedch t\u011b\u017eebn\xedch lokalit. V\xa0ED\u011a jsou instalov\xe1ny 3 v\xfdrobn\xed bloky, ka\u017ed\xfd o\xa0elektrick\xe9m v\xfdkonu 200 MW. V\xfdkon t\u011bchto blok\u016f je distribuov\xe1n do okoln\xedch rozvoden velmi vysok\xe9ho nap\u011bt\xed. Pr\u016fm\u011brn\xe1 denn\xed spot\u0159eba paliva na jeden blok je cca 1600 tun uhl\xed, co\u017e p\u0159edstavuje cca 32 \u017eelezni\u010dn\xedch vagon\u016f. Uhl\xed se po rozemlet\xed na velmi jemnou frakci spaluje v\xa0celkem 4 kotl\xedch o\xa0v\xfdkonu 650 t p\xe1ry/hod. Kotle jsou z\xa0produkce podniku V\xedtkovice, jsou pr\u016ftla\u010dn\xe9, dvoutahov\xe9, s\xa0granula\u010dn\xed spalovac\xed komorou, \xfa\u010dinnost se pohybuje okolo 90\xa0%, nejvy\u0161\u0161\xed teplota v\xa0kotli je 1400 stup\u0148\u016f Celsia. Ka\u017ed\xfd kotel m\xe1 mlec\xed za\u0159\xedzen\xed, kter\xe9\xa0se skl\xe1d\xe1 ze \u010dty\u0159 mlec\xedch okruh\u016f s\xa0krou\u017ekov\xfdmi ml\xfdny o\xa0v\xfdkonu 36 t/h. Kotle se \\"naj\xed\u017ed\u011bj\xed\\" zemn\xedm plynem, k\xa0zap\xe1len\xed plynov\xfdch\xa0ho\u0159\xe1k\u016f se pou\u017e\xedv\xe1 elektrick\xe1 jiskra. V\xa0zadn\xed \u010d\xe1sti kotle na samostatn\xe9 konstrukci jsou instalov\xe1ny regenera\u010dn\xed oh\u0159\xedv\xe1ky typu Ljungstrom. Ka\u017ed\xfd kotel je opat\u0159en \u010dty\u0159mi elektrostatick\xfdmi odlu\u010dova\u010di typu Lurgi a\xa0dv\u011bma kou\u0159ov\xfdmi ventil\xe1tory. Za\u0159\xedzen\xed ods\xed\u0159en\xed je dod\xe1vkou firmy Mitsubishi. Sest\xe1v\xe1 ze dvou absorb\xe9r\u016f (v\u017edy jeden pro dva v\xfdrobn\xed bloky). V\xa0provozu je od b\u0159ezna 1998.","description4":"Elektr\xe1rna D\u011btmarovice krom\u011b v\xfdroby elektrick\xe9 energie produkuje i\xa0teplo. Spole\u010dn\xe1 v\xfdroba elektrick\xe9 energie a\xa0tepla v\xa0jednom cyklu, tzv. kogenerace, sni\u017euje spot\u0159ebu paliva na vyrobenou jednotku energie a\xa0t\xedm \u0161et\u0159\xed i\xa0\u017eivotn\xed prost\u0159ed\xed.\xa0Dod\xe1vky tepla z\xa0elektr\xe1rny do Orlov\xe9 a\xa0Bohum\xedna zaji\u0161\u0165uje spole\u010dnost\xa0\u010cEZ Tepl\xe1rensk\xe1, a.s.","description5":"Na z\xe1klad\u011b v\xedt\u011bzstv\xed ve ve\u0159ejn\xe9 sout\u011b\u017ei za\u010dala v\xa0kv\u011btnu 2009 v\xfdstavba p\u0159ivad\u011b\u010de tepla do Bohum\xedna. Horkovodem bude proudit teplo z\xa0elektr\xe1rny D\u011btmarovice do Bohum\xedna po dobu minim\xe1ln\u011b dvaceti let. Prvn\xed dod\xe1vky za\u010daly na podzim 2010. N\xe1klady na v\xfdstavbu ve v\xfd\u0161i 500 milion\u016f korun hradila Skupina \u010cEZ.","description6":"Ze spalovac\xedch proces\u016f prob\xedhaj\xedc\xedch p\u0159i v\xfdrob\u011b elekt\u0159iny a\xa0tepla\xa0vznikaj\xed vedlej\u0161\xed energetick\xe9 produkty, kter\xe9 se st\xe1vaj\xed za p\u0159edpokladu spln\u011bn\xed technick\xfdch a\xa0z\xe1konn\xfdch podm\xednek surovinou pro dal\u0161\xed zpracov\xe1n\xed a\xa0v\xfdrobu."},"geometry":{"coordinates":[18.469199999999997,49.9031],"type":"Point"}},{"type":"Feature","properties":{"icon":"industry","name":"Ledvice","place":"\xfapat\xed v\xfdchodn\xed \u010d\xe1sti Kru\u0161n\xfdch hor, mezi l\xe1ze\u0148sk\xfdmi m\u011bsty Teplice a\xa0B\xedlina","years_in_service":"1969-sou\u010dasnost","power":"5bl - 640, nyn\xed 660","sources1":"https://www.cez.cz/cs/o-cez/vyrobni-zdroje/uhelne-elektrarny-a-teplarny/uhelne-elektrarny-a-teplarny-cez-v-cr","sources2":"","type":"hn\u011bdouheln\xe1","owner":"\u010dez a.s.","description_short":"Elektr\xe1rna Ledvice le\u017e\xed na \xfapat\xed v\xfdchodn\xed \u010d\xe1sti Kru\u0161n\xfdch hor, mezi l\xe1ze\u0148sk\xfdmi m\u011bsty Teplice a\xa0B\xedlina. Po\u010d\xe1tek stavby sah\xe1 a\u017e do roku 1961 a\xa0p\u016fvodn\u011b byla tvo\u0159ena 5 v\xfdrobn\xedmi bloky o\xa0celkov\xe9m v\xfdkonu 640 MW, kter\xe9 byly postupn\u011b zprovozn\u011bny v\xa0letech 1966 \u2013 69. Z\xa0d\u016fvodu nov\xfdch p\u0159\xedsn\xfdch po\u017eadavk\u016f na pln\u011bn\xed emisn\xedch limit\u016f byly v\xa090. letech 20. stolet\xed z\xa0provozu odstaveny bloky 1 a\xa05, bloky 2 a\xa03 pro\u0161ly gener\xe1ln\xedmi opravami a\xa0ekologick\xfdm programem zam\u011b\u0159en\xfdm zejm\xe9na na ods\xed\u0159en\xed, deNOx a\xa0redukci tuh\xfdch zne\u010di\u0161\u0165uj\xedc\xedch l\xe1tek ve spalin\xe1ch. V\xfdrobn\xed blok \u010d. 4 pro\u0161el z\xe1sadn\u011bj\u0161\xed rekonstrukc\xed \xa0- p\u016fvodn\xed granula\u010dn\xed kotel byl nahrazen v\xa0roce 1998 kotlem s\xa0fluidn\xedm spalov\xe1n\xedm spl\u0148uj\xedc\xedm v\u0161echny tehdy nov\xe9 legislativn\xed po\u017eadavky a\xa0n\xe1sledn\u011b byla v\xa0roce 2007 u\xa0tohoto bloku vym\u011bn\u011bna i\xa0turb\xedna. Ta je optimalizov\xe1na zejm\xe9na pro tepl\xe1rensk\xfd provoz, elektrick\xfd v\xfdkon z\u016fstal 110 MW. B\u011bhem v\xfdstavby\xa0 nov\xe9ho v\xfdrobn\xedho bloku 6 byly bloky 2 a\xa03 trvale odstaveny z\xa0provozu a\xa0to v\xa0letech 2013, respektive 2015. Blok 4 s\xa0fluidn\xedm kotlem a\xa0novou turb\xednou, kter\xfd pln\xed v\u0161echny v\xa0sou\u010dasnosti platn\xe9 emisn\xed limity je provozov\xe1n d\xe1le\xa0a\xa0z\xe1rove\u0148 je od roku 2017 v\xa0trval\xe9m provozu i\xa0posledn\xed postaven\xfd v\xfdrobn\xed blok 6 s\xa0kotlem se superkritick\xfdmi parametry p\xe1ry a\xa0elektrick\xfdm v\xfdkonem 660 MW.","description1":"Blok 6 je vyprojektov\xe1n, postaven a\xa0provozov\xe1n dle po\u017eadavk\u016f a\xa0princip\u016f BAT (best available technologies \u2013 nejlep\u0161\xed dostupn\xe9 technologie) s\xa0c\xedlem dosa\u017een\xed vysok\xe9 \xfa\u010dinnosti p\u0159i v\xfdrob\u011b elektrick\xe9 a\xa0tepeln\xe9 energie. Je tak jednou z\xa0nejmodern\u011bj\u0161\xedch klasick\xfdch elektr\xe1ren ve st\u0159edn\xed Evrop\u011b a\xa0d\xedky pou\u017eit\xed technologie BAT pro dan\xfd projekt do\u0161lo tak\xe9 k\xa0v\xfdrazn\xe9mu sn\xed\u017een\xed ve\u0161ker\xfdch sledovan\xfdch emis\xed v\xa0lokalit\u011b. Hodnota instalovan\xe9ho elektrick\xe9ho v\xfdkonu 660 MW \xa0byla zvolena jako pr\u016fnik parametr\u016f a\xa0mo\u017enost\xed pou\u017eit\xfdch v\xfdrobn\xedch technologi\xed (nadkritick\xe9 parametry p\xe1ry a\xa0velk\xe9 jednotkov\xe9 v\xfdkony ke zv\xfd\u0161en\xed energetick\xe9 \xfa\u010dinnosti), vyu\u017eiteln\xfdch z\xe1sob energetick\xe9ho uhl\xed v\xa0dole B\xedlina na dobu projektov\xe9 \u017eivotnosti bloku, prostorov\xfdch podm\xednek a\xa0velikost\xed v\xfdkonu z\xa0hlediska spolehliv\xe9ho provozu p\u0159enosov\xe9 soustavy \u010cR. V\xa0r\xe1mci v\xfdstavby byly nov\u011b postaveny a\xa0uvedeny do provozu spole\u010dn\xe9 technologie nutn\xe9 k\xa0zaji\u0161t\u011bn\xed provozu st\xe1vaj\xedc\xedch blok\u016f\xa0 - \xa0chemick\xe1 \xfapravna vody s\xa0p\u0159\xedslu\u0161enstv\xedm,\xa0zauhlov\xe1n\xed s\xa0novou skl\xe1dkou uhl\xed a\xa0dal\u0161\xed.","description2":"V Elektr\xe1rn\u011b Ledvice je spalov\xe1no hn\u011bd\xe9 uhl\xed z\xa0Dol\u016f B\xedlina. Uhl\xed je dopravov\xe1no p\u0159\xedmo p\xe1sov\xfdmi dopravn\xedky ze sousedn\xed \xdapravny uhl\xed Ledvice, a\xa0to bu\u010f do z\xe1sobn\xedk\u016f paliva jednotliv\xfdch kotl\u016f, nebo na manipula\u010dn\xed skl\xe1dku.","description3":"Zprovozn\u011bn\xedm Nov\xe9ho zdroje zavr\u0161ila Skupina \u010cEZ rozs\xe1hl\xfd ekologick\xfd program zapo\u010dat\xfd ji\u017e v\xa0roce 1992. Tehdy se jednalo o\xa01. vlnu ekologizace, kter\xe1 do konce roku 1998 p\u0159inesla ods\xed\u0159en\xed a\xa0denitrifikaci v\u0161ech uheln\xfdch v\xfdrobn\xedch zdroj\u016f spole\u010dnosti v\xa0\u010cesk\xe9 republice, co\u017e znamenalo sn\xed\u017een\xed emis\xed oxid\u016f s\xedry a\xa0pop\xedlku o\xa090 a\xa0oxidu dus\xedku o\xa050 procent. Druh\xe1 vlna ekologizace v\xa0tomto trendu v\xa0souvislosti se zp\u0159\xedsn\u011bn\xedm limit\u016f v\xa0r\xe1mci evropsk\xe9 legislativy pokra\u010dovala sn\xed\u017een\xedm ve\u0161ker\xfdch emis\xed o\xa0dal\u0161\xedch cca 50 procent, p\u0159i\u010dem\u017e krom\u011b v\xfdstavby Nov\xe9ho zdroje v\xa0Ledvic\xedch obn\xe1\u0161ela rovn\u011b\u017e komplexn\xed modernizaci elektr\xe1ren Tu\u0161imice II a\xa0Prun\xe9\u0159ov II a\xa0realizaci nov\xe9ho Paroplynov\xe9ho cyklu Po\u010derady.","description4":"Hlavn\xedm zdrojem vody pot\u0159ebn\xe9 pro v\xfdrobu je \u0159eka Labe. Voda je dod\xe1v\xe1na \u010derpac\xed stanic\xed v\xa0Doln\xedch Z\xe1lezlech a\xa0do elektr\xe1rny je dopravov\xe1na prost\u0159ednictv\xedm p\u0159ivad\u011b\u010de dlouh\xe9ho cca 25 km. Jedn\xe1 se o\xa0unik\xe1tn\xed a\xa0velmi spolehlivou technologii postavenou ji\u017e v\xa0pr\u016fb\u011bhu 2.sv\u011btov\xe9 v\xe1lky. Jako z\xe1lo\u017en\xed zdroj slou\u017e\xed n\xe1dr\u017e V\u0161echlapy z\xa060.let minul\xe9ho stolet\xed. Filtrace a\xa0\xfaprava vody demineralizac\xed potom prob\xedh\xe1 v\xa0modern\xed chemick\xe9 \xfapravn\u011b vody postaven\xe9 v\xa0r\xe1mci v\xfdstavby bloku 6.","description5":"Nov\xfd zdroj Elektr\xe1rny Ledvice je i\xa0zaj\xedmav\xfdm c\xedlem pro p\u0159\xedznivce industri\xe1ln\xed turistiky a\xa0rozhleden. Jeho 140 m vysok\xe1 kotelna je v\xa0sou\u010dasn\xe9 dob\u011b nejvy\u0161\u0161\xed pr\u016fmyslovou stavbou na \xfazem\xed \u010ceska. Dv\u011b podp\u016frn\xe9 v\u011b\u017ee kotelny, takzvan\xe1 ledvick\xe1 dvoj\u010data, jsou je\u0161t\u011b o\xa0n\u011bco vy\u0161\u0161\xed. Na vrcholu severn\xed v\u011b\u017ee je proto prosklen\xe1 rozhledna s\xa0mo\u017enost\xed vystoupit na ochoz ve v\xfd\u0161ce 140 metr\u016f. Na ofici\xe1ln\u011b nejvy\u0161\u0161\xed rozhlednu v\xa0\u010cR se lze dostat v\xa0r\xe1mci exkurze po p\u0159edchoz\xed prohl\xeddce Informa\u010dn\xedho centra klasick\xe9 energetiky, kter\xe9 je rovn\u011b\u017e jedin\xe9 sv\xe9ho druhu v\xa0republice. Infocentrum nab\xedz\xed \u0159adu interaktivn\xedch z\xe1\u017eitk\u016f, v\u010detn\u011b 3D filmu o\xa0historick\xe9m v\xfdvoji Zem\u011b a\xa0tud\xed\u017e i\xa0v\xfdrob\u011b elekt\u0159iny, on-line m\u011b\u0159en\xed fotosynt\xe9zy \u017eiv\xe9ho stromu nebo detailn\xedch popis\u016f technologie nov\xe9ho uheln\xe9ho elektr\xe1rensk\xe9ho bloku s\xa0mo\u017enost\xed virtu\xe1ln\xedho nahl\xe9dnut\xed do jednotliv\xfdch provoz\u016f.","description6":""},"geometry":{"coordinates":[13.780800000000001,50.5767],"type":"Point"}}]}'),em={UKNOWN:"Unknown"},cw={CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari",OPERA:"Opera",IE:"IE",MS_EDGE:"MS-Edge",MS_EDGE_CHROMIUM:"MS-Edge-Chromium",FB_MESSANGER:"FB-Messanger",SAMSUNG:"Samsung",UCBROWSER:"UC-Browser",UNKNOWN:em.UKNOWN},ey={HTC:/HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\bEVO\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel/,NEXUS_PHONE:/Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6/,DELL:/Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\b001DL\b|\b101DL\b|\bGS01\b/,MOTOROLA:new RegExp("Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|\n      A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|\n      MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|\n      ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|\n      WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|\n      XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|\n      XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052"),SAMSUNG:new RegExp("\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|\n      GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|\n      GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|\n      GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|\n      GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|\n      GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|\n      GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|\n      GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|\n      GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|\n      GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|\n      GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|\n      GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|\n      GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|\n      GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|\n      GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|\n      GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|\n      GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|\n      GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|\n      SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|\n      SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|\n      SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|\n      SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|\n      SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|\n      SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|\n      SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|\n      SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|\n      SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|\n      SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|\n      SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|\n      SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|\n      SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|\n      SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|\n      SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|\n      SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|\n      SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|\n      SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|\n      SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|\n      SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|\n      SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|\n      SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|\n      SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|\n      SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|\n      SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|\n      SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|\n      SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|\n      SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|\n      SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|\n      SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|\n      SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|\n      GT-N7105|SCH-I535|SM-N900A|SM-N900T|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|\n      GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|\n      GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|\n      SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|\n      SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|\n      SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F"),LG:new RegExp("\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|\n      LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|\n      C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|\n      LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|\n      VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|\n      MS323|M257)"),SONY:/SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533/,ASUS:/Asus.*Galaxy|PadFone.*Mobile/,NOKIA_LUMIA:/Lumia [0-9]{3,4}/,MICROMAX:/Micromax.*\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\b/,PALM:/PalmSource|Palm/,VERTU:/Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature/,PANTECH:new RegExp("PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|\n        IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|\n        IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|\n        CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|\n        P2000|P7040|P7000|C790"),FLY:/IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250/,WIKO:new RegExp("KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|\n        SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|\n        CINK KING|CINK PEAX|CINK SLIM|SUBLIM"),I_MOBILE:/i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)/,SIMVALLEY:/\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\b/,WOLFGANG:/AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q/,ALCATEL:/Alcatel|Mobile; rv:49.0|Mobile; ALCATEL 4052R; rv:48.0/,NINTENDO:/Nintendo (3DS|Switch)/,AMOI:/Amoi/,INQ:/INQ/,VITA:/\bVita\b/,BLACKBERRY:/\bBlackBerry\b|\bBB10\b|rim[0-9]+/,FIREFOX_OS:/\bFirefox-OS\b/,IPHONE:/\biPhone\b/,iPod:/\biPod\b/,ANDROID:/\bAndroid\b/,WINDOWS_PHONE:/\bWindows-Phone\b/,GENERIC_PHONE:new RegExp("Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|\n        up.link|vodafone|\\bwap\\b|nokia|Nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser")},tm={iPad:/iPad|iPad.*Mobile/,NexusTablet:/Android.*Nexus[\s]+(7|9|10)/,GoogleTablet:/Android.*Pixel C/,SamsungTablet:new RegExp("SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|\n        GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|\n        SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|\n        GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|\n        SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|\n        GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|\n        SHV-E230S|SHW-M180K|SHW-M180L|SM-T865|SM-T290|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|\n        SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|\n        GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T385M|SM-P585M|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|\n        SM-P601|SM-P605|SM-P615|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|\n        GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|\n        SM-T510|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|\n        SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T500|SM-T330|\n        SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|\n        SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|\n        SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|\n        SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|\n        SM-T719|SM-T725|SM-T813|SM-T819|SM-T580|SM-T590|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|\n        SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-P585Y|SM-X200|SM-T970"),Kindle:new RegExp("Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|\n        KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome        /[0-9.]+ (?!Mobile)"),SurfaceTablet:/Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)/,HPTablet:/HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10/,AsusTablet:new RegExp("^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|\n        TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|\n        Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|\n        ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|\n        ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b"),BlackBerryTablet:/PlayBook|RIM Tablet/,HTCtablet:/HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410/,MotorolaTablet:/xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617/,NookTablet:/Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2/,AcerTablet:new RegExp("Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|\n        W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\n        \\bA3-A20\\b|\\bA3-A30"),ToshibaTablet:/Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO/,LGTablet:/\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\b/,FujitsuTablet:/Android.*\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\b/,PrestigioTablet:new RegExp("PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|\n        PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|\n        PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|\n        PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|\n        PMT5887|PMT5001|PMT5002"),LenovoTablet:new RegExp("Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|\n        YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|\n        B8000|B8080)(-|)(FL|F|HV|H|)|TB-X606F|TB-X103F|TB-X304F|TB-X304L|TB-X704F|TB-8703F|Tab2A7-10F|TB2-X30L|TB-8504F"),DellTablet:/Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7/,YarvikTablet:new RegExp("Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|\n        TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|\n        TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|\n        TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|\n        TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b"),MedionTablet:/Android.*\bOYO\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB/,ArnovaTablet:/97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2/,IntensoTablet:/INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004/,IRUTablet:/M702pro/,MegafonTablet:/MegaFon V9|\bZTE V9\b|Android.*\bMT7A\b/,EbodaTablet:/E-Boda (Supreme|Impresspeed|Izzycomm|Essential)/,AllViewTablet:/Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)/,ArchosTablet:new RegExp("\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10|\n         Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b"),AinolTablet:/NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark/,NokiaLumiaTablet:/Lumia 2520/,SonyTablet:new RegExp("Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|\n        SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|\n        EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|\n        SGP612|SGP712"),PhilipsTablet:/\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\b/,CubeTablet:/Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT/,CobyTablet:new RegExp("MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|\n        MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010"),MIDTablet:new RegExp("M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|\n        MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|\n        MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10"),MSITablet:new RegExp("MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|\n        Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b"),SMiTTablet:/Android.*(\bMID\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)/,RockChipTablet:/Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A/,FlyTablet:/IQ310|Fly Vision/,bqTablet:new RegExp("Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|\n        Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))|Maxwell.*Lite|Maxwell.*Plus"),HuaweiTablet:new RegExp("MediaPad|MediaPad 7 Youth|MediaPad T3 10|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|\n        S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-W09|AGS-L09"),NecTablet:/\bN-06D|\bN-08D/,PantechTablet:/Pantech.*P4100/,BronchoTablet:/Broncho.*(N701|N708|N802|a710)/,VersusTablet:/TOUCHPAD.*[78910]|\bTOUCHTAB\b/,ZyncTablet:/z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900/,PositivoTablet:/TB07STA|TB10STA|TB07FTA|TB10FTA/,NabiTablet:/Android.*\bNabi/,KoboTablet:/Kobo Touch|\bK080\b|\bVox\b Build|\bArc\b Build/,DanewTablet:/DSlide.*\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\b/,TexetTablet:new RegExp("NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|\n        TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|\n        TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|\n        TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|\n        TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|\n        TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|\n        TB-436|TB-416|TB-146SE|TB-126SE"),PlaystationTablet:/Playstation.*(Portable|Vita)/,TrekstorTablet:/ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab/,PyleAudioTablet:/\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\b/,AdvanTablet:new RegExp("Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|\n        T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b"),DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|\n        Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:/Android.*\bG1\b(?!\))/,MicromaxTablet:/Funbook|Micromax.*\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\b/,KarbonnTablet:/Android.*\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\b/,AllFineTablet:/Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide/,PROSCANTablet:new RegExp("\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|\n        PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|\n        PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|\n        PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b"),YONESTablet:/BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026/,ChangJiaTablet:new RegExp("TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|\n        TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|\n        TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|\n        TPC10111|TPC10203|TPC10205|TPC10503"),GUTablet:/TX-A1301|TX-M9002|Q702|kf026/,PointOfViewTablet:new RegExp("TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|\n        TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|\n        TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|\n        TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10"),OvermaxTablet:new RegExp("OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|\n        MagicTab|Stream|TB-08|TB-09)|Qualcore 1027"),HCLTablet:/HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync/,DPSTablet:/DPS Dream 9|DPS Dual 7/,VistureTablet:/V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10/,CrestaTablet:/CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989/,MediatekTablet:/\bMT8125|MT8389|MT8135|MT8377\b/,ConcordeTablet:/Concorde([ ]+)?Tab|ConCorde ReadMan/,GoCleverTablet:new RegExp("GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|\n        TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|\n        GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|\n        TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|\n        TAB R104|TAB R83.3|TAB A1042"),ModecomTablet:new RegExp("FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|\n        FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|\n        FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003"),VoninoTablet:new RegExp("\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|\n        Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|\n        Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b"),ECSTablet:/V07OT2|TM105A|S10OT1|TR10CS1/,StorexTablet:/eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab/,VodafoneTablet:/SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497/,EssentielBTablet:/Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2/,RossMoorTablet:/RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711/,iMobileTablet:/i-mobile i-note/,TolinoTablet:/tolino tab [0-9.]+|tolino shine/,AudioSonicTablet:/\bC-22Q|T7-QC|T-17B|T-17P\b/,AMPETablet:/Android.* A78 /,SkkTablet:/Android.* (SKYPAD|PHOENIX|CYCLOPS)/,TecnoTablet:/TECNO P9|TECNO DP8D/,JXDTablet:new RegExp("Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|\n        S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|\n        P1000|P300|S18|S6600|S9100)\\b"),iJoyTablet:new RegExp("Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|\n        Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|\n        Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|\n        Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|\n        Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)"),FX2Tablet:/FX2 PAD7|FX2 PAD10/,XoroTablet:new RegExp("KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|\n        PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|\n        PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|\n        TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151"),ViewsonicTablet:/ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a/,VerizonTablet:/QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1/,OdysTablet:/LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\bXELIO\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10/,CaptivaTablet:/CAPTIVA PAD/,IconbitTablet:new RegExp("NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|\n        NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S"),TeclastTablet:new RegExp("T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\n        \\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\n        \\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\n        \\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\n        \\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\n        \\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\n        \\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\n        \\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\n        \\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi"),OndaTablet:new RegExp("\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|\n        V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|\n        V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|\n        Vi40)\\b[s]+|V10 \\b4G\\b"),JaytechTablet:/TPC-PA762/,BlaupunktTablet:/Endeavour 800NG|Endeavour 1010/,DigmaTablet:/\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\b/,EvolioTablet:/ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\bEvotab\b|\bNeura\b/,LavaTablet:/QPAD E704|\bIvoryS\b|E-TAB IVORY|\bE-TAB\b/,AocTablet:/MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712/,MpmanTablet:new RegExp("MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\n        \\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|\n        MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010"),CelkonTablet:/CT695|CT888|CT[\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\bCT-1\b/,WolderTablet:new RegExp("miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|\n        POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|\n        FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b"),MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:/\bMI PAD\b|\bHM NOTE 1W\b/,NibiruTablet:/Nibiru M1|Nibiru Jupiter One/,NexoTablet:/NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI/,LeaderTablet:new RegExp("TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|\n        TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100"),UbislateTablet:/UbiSlate[\s]?7C/,PocketBookTablet:/Pocketbook/,KocasoTablet:/\b(TB-1207)\b/,HisenseTablet:/\b(F5281|E2371)\b/,Hudl:/Hudl HT7S3|Hudl 2/,TelstraTablet:/T-Hub2/,Honeywell:/RT10A/,GenericTablet:new RegExp("Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|\n        A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|\n        Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107")},Gd={BLACKBERRY:"Blackberry",FIREFOX_OS:"Firefox-OS",CHROME_BOOK:"Chrome-Book",WINDOWS_PHONE:"Windows-Phone",VITA:"Vita",PS4:"PS4",MAC:"Macintosh",CHROMECAST:"Chromecast",APPLE_TV:"Apple-TV",GOOGLE_TV:"Google-TV",ANDROID:"Android",Tesla:"Tesla",iPad:"iPad",IPHONE:"iPhone",iPod:"iPod",UNKNOWN:em.UKNOWN,HTC:"HTC",NEXUS_PHONE:"Nexus Phone",NexusTablet:"Nexus Tablet",DELL:"Dell",MOTOROLA:"Motorola",SAMSUNG:"Samsung",LG:"LG",SONY:"Sony",ASUS:"Asus",NOKIA_LUMIA:"Nokia Lumia",MICROMAX:"Micromax",PALM:"Palm",VERTU:"Vertu",PANTECH:"PANTECH",FLY:"Fly",WIKO:"WIKO",I_MOBILE:"i-mobile",SIMVALLEY:"Simvalley",WOLFGANG:"Wolfgang",ALCATEL:"Alcatel",HONEYWELL:"Honeywell",NINTENDO:"Nintendo",AMOI:"Amoi",INQ:"INQ",GENERIC_PHONE:"Generic Phone",MI_SE_9:"Mi SE 9"},fD=[Gd.PS4,Gd.CHROME_BOOK,Gd.MAC,Gd.DELL,Gd.ASUS,Gd.UNKNOWN],A4={WINDOWS:"Windows",MAC:"Mac",IOS:"iOS",ANDROID:"Android",LINUX:"Linux",UNIX:"Unix",FIREFOX_OS:"Firefox-OS",CHROME_OS:"Chrome-OS",WINDOWS_PHONE:"Windows-Phone",UNKNOWN:em.UKNOWN},P4={WINDOWS_3_11:"windows-3-11",WINDOWS_95:"windows-95",WINDOWS_ME:"windows-me",WINDOWS_98:"windows-98",WINDOWS_CE:"windows-ce",WINDOWS_2000:"windows-2000",WINDOWS_XP:"windows-xp",WINDOWS_SERVER_2003:"windows-server-2003",WINDOWS_VISTA:"windows-vista",WINDOWS_7:"windows-7",WINDOWS_8_1:"windows-8-1",WINDOWS_8:"windows-8",WINDOWS_10:"windows-10",WINDOWS_PHONE_7_5:"windows-phone-7-5",WINDOWS_PHONE_8_1:"windows-phone-8-1",WINDOWS_PHONE_10:"windows-phone-10",WINDOWS_NT_4_0:"windows-nt-4-0",MACOSX_11_0:"mac-os-x-11-0",MACOSX_16:"mac-os-x-16",MACOSX_15:"mac-os-x-15",MACOSX_14:"mac-os-x-14",MACOSX_13:"mac-os-x-13",MACOSX_12:"mac-os-x-12",MACOSX_11:"mac-os-x-11",MACOSX_10:"mac-os-x-10",MACOSX_9:"mac-os-x-9",MACOSX_8:"mac-os-x-8",MACOSX_7:"mac-os-x-7",MACOSX_6:"mac-os-x-6",MACOSX_5:"mac-os-x-5",MACOSX_4:"mac-os-x-4",MACOSX_3:"mac-os-x-3",MACOSX_2:"mac-os-x-2",MACOSX:"mac-os-x",iOS:"iOS",ANDROID_9:"android-9",UNKNOWN:em.UKNOWN.toLowerCase()},gD={WINDOWS:{and:[{or:[/\bWindows|(Win\d\d)\b/,/\bWin 9x\b/]},{not:/\bWindows Phone\b/}]},MAC:{and:[/\bMac OS\b/,{not:{or:[/\biPhone\b/,/\biPad\b/,/\biPod\b/,/\bWindows Phone\b/]}}]},IOS:{and:[{or:[/\biPad\b/,/\biPhone\b/,/\biPod\b/]},{not:/\bWindows Phone\b/}]},ANDROID:{and:[/\bAndroid\b/,{not:/\bWindows Phone\b/}]},LINUX:/\bLinux\b/,UNIX:/\bUNIX\b/,FIREFOX_OS:{and:[/\bFirefox\b/,/Mobile\b/]},CHROME_OS:/\bCrOS\b/,WINDOWS_PHONE:{or:[/\bIEMobile\b/,/\bWindows Phone\b/]},PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/},O4={...ey,...tm,...gD,FIREFOX_OS:{and:[/\bFirefox\b/,/\bMobile\b/]},CHROME_BOOK:/\bCrOS\b/,PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,CHROMECAST:/\bCrKey\b/,APPLE_TV:/^iTunes-AppleTV\/4.1$/,GOOGLE_TV:/\bGoogleTV\b/,Tesla:/Tesla\/([0-9]{4}.[0-9]{1,2}.?[0-9]{0,2}.?[0-9]{0,2})-(.{7})/,MI_SE_9:/\bXiaomi\b/,MAC:{and:[/\bMac OS\b/,{not:{or:[/\biPhone\b/,/\biPad\b/,/\biPod\b/,/\bWindows Phone\b/]}}]}},dw={WINDOWS_3_11:/Win16/,WINDOWS_95:/(Windows 95|Win95|Windows_95)/,WINDOWS_ME:/(Win 9x 4.90|Windows ME)/,WINDOWS_98:/(Windows 98|Win98)/,WINDOWS_CE:/Windows CE/,WINDOWS_2000:/(Windows NT 5.0|Windows 2000)/,WINDOWS_XP:/(Windows NT 5.1|Windows XP)/,WINDOWS_SERVER_2003:/Windows NT 5.2/,WINDOWS_VISTA:/Windows NT 6.0/,WINDOWS_7:/(Windows 7|Windows NT 6.1)/,WINDOWS_8_1:/(Windows 8.1|Windows NT 6.3)/,WINDOWS_8:/(Windows 8|Windows NT 6.2)/,WINDOWS_10:/(Windows NT 10.0)/,WINDOWS_PHONE_7_5:/(Windows Phone OS 7.5)/,WINDOWS_PHONE_8_1:/(Windows Phone 8.1)/,WINDOWS_PHONE_10:/(Windows Phone 10)/,WINDOWS_NT_4_0:{and:[/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/,{not:/Windows NT 10.0/}]},MACOSX:/(MAC OS X\s*[^ 0-9])/,MACOSX_3:/(Darwin 10.3|Mac OS X 10.3)/,MACOSX_4:/(Darwin 10.4|Mac OS X 10.4)/,MACOSX_5:/(Mac OS X 10.5)/,MACOSX_6:/(Mac OS X 10.6)/,MACOSX_7:/(Mac OS X 10.7)/,MACOSX_8:/(Mac OS X 10.8)/,MACOSX_9:/(Mac OS X 10.9)/,MACOSX_10:/(Mac OS X 10.10)/,MACOSX_11:/(Mac OS X 10.11)/,MACOSX_12:/(Mac OS X 10.12)/,MACOSX_13:/(Mac OS X 10.13)/,MACOSX_14:/(Mac OS X 10.14)/,MACOSX_15:/(Mac OS X 10.15)/,MACOSX_16:/(Mac OS X 10.16)/,MACOSX_11_0:{or:[/11_0 like Mac OS X/,/Mac OS X 11/]},iOS:/(iPhone OS\s*[0-9_]+)/,ANDROID_9:/(Android 9)/},uw={CHROME:[/\bChrome\/([\d\.]+)\b/,/\bCriOS\/([\d\.]+)\b/,/\bHeadlessChrome\/([\d\.]+)\b/],FIREFOX:[/\bFirefox\/([\d\.]+)\b/,/\bFxiOS\/([\d\.]+)\b/],SAFARI:[/\bVersion\/([\d\.]+)\b/,/\bSafari\/([\d\.]+)\b/],OPERA:[/\bVersion\/([\d\.]+)\b/,/\bOPR\/([\d\.]+)\b/],IE:[/\bMSIE ([\d\.]+\w?)\b/,/\brv:([\d\.]+\w?)\b/],MS_EDGE:/\bEdg(?:e|A|iOS)\/([\d\.]+)\b/,MS_EDGE_CHROMIUM:/\bEdg\/([\d\.]+)\b/,SAMSUNG:/\bSamsungBrowser\/([\d\.]+)\b/,UCBROWSER:/\bUCBrowser\/([\d\.]+)\b/},F4=Object.keys(dw).reduce((t,n)=>(t[n]=dw[n],t),{}),_D=Object.keys(uw).reduce((t,n)=>(t[cw[n]]=uw[n],t),{});var Ql=Object.freeze({__proto__:null,BROWSERS:cw,BROWSERS_RE:{CHROME:{and:[{or:[/\bChrome\b/,/\bCriOS\b/,/\bHeadlessChrome\b/]},{not:{or:[/\bOPR\b/,/\bEdg(e|A|iOS)\b/,/\bEdg\/\b/,/\bSamsungBrowser\b/,/\bUCBrowser\b/]}}]},FIREFOX:{or:[/\bFirefox\b/,/\bFxiOS\b/]},SAFARI:{and:[/^((?!CriOS).)*\Safari\b.*$/,{not:{or:[/\bOPR\b/,/\bEdg(e|A|iOS)\b/,/\bEdg\/\b/,/\bWindows Phone\b/,/\bSamsungBrowser\b/,/\bUCBrowser\b/]}}]},OPERA:{or:[/Opera\b/,/\bOPR\b/]},IE:{or:[/\bMSIE\b/,/\bTrident\b/,/^Mozilla\/5\.0 \(Windows NT 10\.0; Win64; x64\)$/]},MS_EDGE:{or:[/\bEdg(e|A|iOS)\b/]},MS_EDGE_CHROMIUM:/\bEdg\/\b/,PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/,FB_MESSANGER:/\bFBAN\/MessengerForiOS\b/,SAMSUNG:/\bSamsungBrowser\b/,UCBROWSER:/\bUCBrowser\b/},BROWSER_VERSIONS_RE:_D,BROWSER_VERSIONS_RE_MAP:uw,DESKTOP_DEVICES:fD,DEVICES:Gd,DEVICES_RE:O4,GENERAL:em,MOBILES_RE:ey,OS:A4,OS_RE:gD,OS_VERSIONS:P4,OS_VERSIONS_RE:F4,OS_VERSIONS_RE_MAP:dw,TABLETS_RE:tm});class N4{constructor(){}test(n,e){return"string"==typeof e&&(e=new RegExp(e)),e instanceof RegExp?e.test(n):e&&Array.isArray(e.and)?e.and.every(i=>this.test(n,i)):e&&Array.isArray(e.or)?e.or.some(i=>this.test(n,i)):!(!e||!e.not||this.test(n,e.not))}exec(n,e){return"string"==typeof e&&(e=new RegExp(e)),e instanceof RegExp?e.exec(n):e&&Array.isArray(e)?e.reduce((i,r)=>i||this.exec(n,r),null):null}}var cg=function(t){return t.Mobile="mobile",t.Tablet="tablet",t.Desktop="desktop",t.Unknown="unknown",t}(cg||{}),hw=function(t){return t.Portrait="portrait",t.Landscape="landscape",t}(hw||{});const pw="iPad";let mw,L4=(()=>{class t{constructor(e){this.platformId=e,this.ua="",this.userAgent="",this.os="",this.browser="",this.device="",this.os_version="",this.browser_version="",this.reTree=new N4,this.deviceType="",this.orientation="",Ev(this.platformId)&&typeof window<"u"&&(this.userAgent=window.navigator.userAgent),this.setDeviceInfo(this.userAgent)}setDeviceInfo(e=this.userAgent){e!==this.userAgent&&(this.userAgent=e);const i=[{const:"OS",prop:"os"},{const:"BROWSERS",prop:"browser"},{const:"DEVICES",prop:"device"},{const:"OS_VERSIONS",prop:"os_version"}];if(i.forEach(r=>{this[r.prop]=Object.keys(Ql[r.const]).reduce((a,u)=>"device"===Ql[r.const][u]&&Ev(this.platformId)&&(this.reTree.test(this.userAgent,tm[pw])||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)?(a[Ql[r.const][u]]=pw,Object):(a[Ql[r.const][u]]=this.reTree.test(e,Ql[`${r.const}_RE`][u]),a),{})}),i.forEach(r=>{this[r.prop]=Object.keys(Ql[r.const]).map(a=>Ql[r.const][a]).reduce((a,u)=>"device"===r.prop&&a===Ql[r.const].ANDROID?this[r.prop][u]?u:a:a===Ql[r.const].UNKNOWN&&this[r.prop][u]?u:a,Ql[r.const].UNKNOWN)}),this.browser_version="0",this.browser!==cw.UNKNOWN){const a=this.reTree.exec(e,_D[this.browser]);a&&(this.browser_version=a[1])}this.orientation=typeof window<"u"&&window.matchMedia?window.matchMedia("(orientation: landscape)").matches?hw.Landscape:hw.Portrait:em.UKNOWN,this.deviceType=this.isTablet()?cg.Tablet:this.isMobile(this.userAgent)?cg.Mobile:this.isDesktop(this.userAgent)?cg.Desktop:cg.Unknown}getDeviceInfo(){return{userAgent:this.userAgent,os:this.os,browser:this.browser,device:this.device,os_version:this.os_version,browser_version:this.browser_version,deviceType:this.deviceType,orientation:this.orientation}}isMobile(e=this.userAgent){return!this.isTablet(e)&&!!Object.keys(ey).find(r=>this.reTree.test(e,ey[r]))}isTablet(e=this.userAgent){return!(!Ev(this.platformId)||!(this.reTree.test(this.userAgent,tm[pw])||typeof navigator<"u"&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1))||!!Object.keys(tm).find(r=>!!this.reTree.test(e,tm[r]))}isDesktop(e=this.userAgent){return(this.device!==Gd.UNKNOWN||!this.isMobile(e)&&!this.isTablet(e))&&fD.indexOf(this.device)>-1}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Rd))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();try{mw=typeof Intl<"u"&&Intl.v8BreakIterator}catch{mw=!1}let dg,ny,oh,fw,So=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Ev(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!mw)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Rd))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ty(t){return function z4(){if(null==dg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>dg=!0}))}finally{dg=dg||!1}return dg}()?t:!!t.capture}function ug(){if("object"!=typeof document||!document)return 0;if(null==ny){const t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",t.appendChild(e),document.body.appendChild(t),ny=0,0===t.scrollLeft&&(t.scrollLeft=1,ny=0===t.scrollLeft?1:2),t.remove()}return ny}function im(t){return t.composedPath?t.composedPath()[0]:t.target}class dj extends En{constructor(n,e){super()}schedule(n,e=0){return this}}const iy={setInterval(t,n,...e){const{delegate:i}=iy;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=iy;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};class _w extends dj{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(a,this.id,e),this}requestAsyncId(n,e,i=0){return iy.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&iy.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(a){i=!0,r=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,_(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}const bD={now:()=>(bD.delegate||Date).now(),delegate:void 0};class hg{constructor(n,e=hg.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}hg.now=bD.now;class vw extends hg{constructor(n,e=hg.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const yw=new vw(_w),uj=yw;function ry(t,n=yw){return Mn((e,i)=>{let r=null,a=null,u=null;const f=()=>{if(r){r.unsubscribe(),r=null;const S=a;a=null,i.next(S)}};function b(){const S=u+t,D=n.now();if(D<S)return r=this.schedule(void 0,S-D),void i.add(r);f()}e.subscribe(sn(i,S=>{a=S,u=n.now(),r||(r=n.schedule(b,t),i.add(r))},()=>{f(),i.complete()},void 0,()=>{a=r=null}))})}function xD(t){return Zr((n,e)=>t<=e)}function br(t){return null!=t&&"false"!=`${t}`}function wD(t,n=0){return function hj(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):n}function SD(t){return Array.isArray(t)?t:[t]}function sh(t){return t instanceof Rn?t.nativeElement:t}const CD=new Set;let ah,pj=(()=>{class t{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):fj}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function mj(t,n){if(!CD.has(t))try{ah||(ah=document.createElement("style"),n&&(ah.nonce=n),ah.setAttribute("type","text/css"),document.head.appendChild(ah)),ah.sheet&&(ah.sheet.insertRule(`@media ${t} {body{ }}`,0),CD.add(t))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(So),Oe(Db,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fj(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let gj=(()=>{class t{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Zt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return TD(SD(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let a=Ov(TD(SD(e)).map(u=>this._registerQuery(u).observable));return a=Fv(a.pipe(ll(1)),a.pipe(xD(1),ry(0))),a.pipe(It(u=>{const f={matches:!1,breakpoints:{}};return u.forEach(({matches:b,query:S})=>{f.matches=f.matches||b,f.breakpoints[S]=b}),f}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),a={observable:new yn(u=>{const f=b=>this._zone.run(()=>u.next(b));return i.addListener(f),()=>{i.removeListener(f)}}).pipe(Nv(i),It(({matches:u})=>({query:e,matches:u})),Ko(this._destroySubject)),mql:i};return this._queries.set(e,a),a}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(pj),Oe(Pt))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TD(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}let MD=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function wj(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function xj(t){try{return t.frameElement}catch{return null}}(function Ij(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(i&&(-1===ID(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),a=ID(e);return e.hasAttribute("contenteditable")?-1!==a:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Mj(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==a:"video"===r?-1!==a&&(null!==a||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function Dj(t){return!function Cj(t){return function kj(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function Sj(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function Tj(t){return function Ej(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||DD(t))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(So))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function DD(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function ID(t){if(!DD(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class Aj{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,i,r,a=!1){this._element=n,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(ll(1)).subscribe(n)}}let Pj=(()=>{class t{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new Aj(e,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(MD),Oe(Pt),Oe(Un))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function AD(t){return 0===t.buttons||0===t.detail}function PD(t){const n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const Rj=new Le("cdk-input-modality-detector-options"),Oj={ignoreKeys:[18,17,224,91,16]},rm=ty({passive:!0,capture:!0});let Fj=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(e,i,r,a){this._platform=e,this._mostRecentTarget=null,this._modality=new en(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(f=>f===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=im(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(AD(u)?"keyboard":"mouse"),this._mostRecentTarget=im(u))},this._onTouchstart=u=>{PD(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=im(u))},this._options={...Oj,...a},this.modalityDetected=this._modality.pipe(xD(1)),this.modalityChanged=this.modalityDetected.pipe(nd()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,rm),r.addEventListener("mousedown",this._onMousedown,rm),r.addEventListener("touchstart",this._onTouchstart,rm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,rm),document.removeEventListener("mousedown",this._onMousedown,rm),document.removeEventListener("touchstart",this._onTouchstart,rm))}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(So),Oe(Pt),Oe(Un),Oe(Rj,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Lj=new Le("cdk-focus-monitor-default-options"),oy=ty({passive:!0,capture:!0});let OD=(()=>{class t{constructor(e,i,r,a,u){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Zt,this._rootNodeFocusAndBlurListener=f=>{for(let S=im(f);S;S=S.parentElement)"focus"===f.type?this._onFocus(f,S):this._onBlur(f,S)},this._document=a,this._detectionMode=u?.detectionMode||0}monitor(e,i=!1){const r=sh(e);if(!this._platform.isBrowser||1!==r.nodeType)return mt();const a=function j4(t){if(function V4(){if(null==fw){const t=typeof document<"u"?document.head:null;fw=!(!t||!t.createShadowRoot&&!t.attachShadow)}return fw}()){const n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(r)||this._getDocument(),u=this._elementInfo.get(r);if(u)return i&&(u.checkChildren=!0),u.subject;const f={checkChildren:i,subject:new Zt,rootNode:a};return this._elementInfo.set(r,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(e){const i=sh(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const a=sh(e);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([f,b])=>this._originChanged(f,i,b)):(this._setOrigin(i),"function"==typeof a.focus&&a.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),a=im(e);!r||!r.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,oy),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,oy)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ko(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,oy),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,oy),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,a)=>{(a===e||r.checkChildren&&a.contains(e))&&i.push([a,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const a=e.labels;if(a)for(let u=0;u<a.length;u++)if(a[u].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Pt),Oe(So),Oe(Fj),Oe(Un,8),Oe(Lj,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const FD="cdk-high-contrast-black-on-white",ND="cdk-high-contrast-white-on-black",bw="cdk-high-contrast-active";let zj=(()=>{class t{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=qe(gj).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,a=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(bw,FD,ND),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(bw,FD):2===i&&e.add(bw,ND)}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(So),Oe(Un))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Bj=new Le("cdk-dir-doc",{providedIn:"root",factory:function Vj(){return qe(Un)}}),jj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let LD=(()=>{class t{constructor(e){this.value="ltr",this.change=new tt,e&&(this.value=function Uj(t){const n=t?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?jj.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Bj,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zD=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})();const Gj=new Le("mat-sanity-checks",{providedIn:"root",factory:function Hj(){return!0}});let Co=(()=>{class t{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!function H4(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(zj),Oe(Gj,8),Oe(Un))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[zD,zD]})}return t})();function $j(t){return class extends t{get disabled(){return this._disabled}set disabled(n){this._disabled=br(n)}constructor(...n){super(...n),this._disabled=!1}}}function xw(t,n){return class extends t{get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...e){super(...e),this.defaultColor=n,this.color=n}}}function Wj(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=br(n)}constructor(...n){super(...n),this._disableRipple=!1}}}class Zj{constructor(n,e,i,r=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const jD=ty({passive:!0,capture:!0});class Kj{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=im(n);e&&this._events.get(n.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(a=>a.handleEvent(n))})}}addHandler(n,e,i,r){const a=this._events.get(e);if(a){const u=a.get(i);u?u.add(r):a.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,jD)})}removeHandler(n,e,i){const r=this._events.get(n);if(!r)return;const a=r.get(e);a&&(a.delete(i),0===a.size&&r.delete(e),0===r.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,jD)))}}const UD={enterDuration:225,exitDuration:150},HD=ty({passive:!0,capture:!0}),GD=["mousedown","touchstart"],$D=["mouseup","mouseleave","touchend","touchcancel"];class mg{static#e=this._eventManager=new Kj;constructor(n,e,i,r){this._target=n,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=sh(i))}fadeInRipple(n,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...UD,...i.animation};i.centered&&(n=r.left+r.width/2,e=r.top+r.height/2);const u=i.radius||function Qj(t,n,e){const i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+r*r)}(n,e,r),f=n-r.left,b=e-r.top,S=a.enterDuration,D=document.createElement("div");D.classList.add("mat-ripple-element"),D.style.left=f-u+"px",D.style.top=b-u+"px",D.style.height=2*u+"px",D.style.width=2*u+"px",null!=i.color&&(D.style.backgroundColor=i.color),D.style.transitionDuration=`${S}ms`,this._containerElement.appendChild(D);const N=window.getComputedStyle(D),K=N.transitionDuration,re="none"===N.transitionProperty||"0s"===K||"0s, 0s"===K||0===r.width&&0===r.height,ue=new Zj(this,D,i,re);D.style.transform="scale3d(1, 1, 1)",ue.state=0,i.persistent||(this._mostRecentTransientRipple=ue);let we=null;return!re&&(S||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const De=()=>this._finishRippleTransition(ue),ye=()=>this._destroyRipple(ue);D.addEventListener("transitionend",De),D.addEventListener("transitioncancel",ye),we={onTransitionEnd:De,onTransitionCancel:ye}}),this._activeRipples.set(ue,we),(re||!S)&&this._finishRippleTransition(ue),ue}fadeOutRipple(n){if(2===n.state||3===n.state)return;const e=n.element,i={...UD,...n.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=sh(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,GD.forEach(i=>{mg._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{$D.forEach(e=>{this._triggerElement.addEventListener(e,this,HD)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=1,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel)),n.element.remove()}_onMousedown(n){const e=AD(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!PD(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(GD.forEach(e=>mg._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&$D.forEach(e=>n.removeEventListener(e,this,HD)))}}const fg=new Le("mat-ripple-global-options");let Yj=(()=>{class t{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,a,u){this._elementRef=e,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new mg(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(Pt),me(So),me(fg,8),me(Gl,8))};static#t=this.\u0275dir=Je({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&nr("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})(),WD=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Co,Co]})}return t})(),Jj=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Co]})}return t})();const qD={capture:!0},ZD=["focus","click","mouseenter","touchstart"],ww="mat-ripple-loader-uninitialized",Sw="mat-ripple-loader-class-name",KD="mat-ripple-loader-centered",sy="mat-ripple-loader-disabled";let e6=(()=>{class t{constructor(){this._document=qe(Un,{optional:!0}),this._animationMode=qe(Gl,{optional:!0}),this._globalRippleOptions=qe(fg,{optional:!0}),this._platform=qe(So),this._ngZone=qe(Pt),this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;const r=e.target.closest(`[${ww}]`);r&&this.createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const e of ZD)this._document?.addEventListener(e,this._onInteraction,qD)})}ngOnDestroy(){for(const e of ZD)this._document?.removeEventListener(e,this._onInteraction,qD)}configureRipple(e,i){e.setAttribute(ww,""),(i.className||!e.hasAttribute(Sw))&&e.setAttribute(Sw,i.className||""),i.centered&&e.setAttribute(KD,""),i.disabled&&e.setAttribute(sy,"")}getRipple(e){return e.matRipple?e.matRipple:this.createRipple(e)}setDisabled(e,i){const r=e.matRipple;r?r.disabled=i:i?e.setAttribute(sy,""):e.removeAttribute(sy)}createRipple(e){if(!this._document)return;e.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(Sw)),e.append(i);const r=new Yj(new Rn(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=e,r.centered=e.hasAttribute(KD),r.disabled=e.hasAttribute(sy),this.attachRipple(e,r),r}attachRipple(e,i){e.removeAttribute(ww),e.matRipple=i}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const t6=["mat-button",""],n6=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],i6=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],o6=["mat-icon-button",""],s6=["*"],a6=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],l6=xw($j(Wj(class{constructor(t){this._elementRef=t}})));let XD=(()=>{class t extends l6{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=br(e),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=br(e),this._updateRippleDisabled()}constructor(e,i,r,a){super(e),this._platform=i,this._ngZone=r,this._animationMode=a,this._focusMonitor=qe(OD),this._rippleLoader=qe(e6),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const u=e.nativeElement.classList;for(const f of a6)this._hasHostAttributes(f.selector)&&f.mdcClasses.forEach(b=>{u.add(b)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...e){return e.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){Zb()};static#t=this.\u0275dir=Je({type:t,features:[Qt]})}return t})(),d6=(()=>{class t extends XD{constructor(e,i,r,a){super(e,i,r,a)}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(So),me(Pt),me(Gl,8))};static#t=this.\u0275cmp=ai({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(Fr("disabled",r.disabled||null),nr("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Qt],attrs:t6,ngContentSelectors:i6,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&($o(n6),Nr(0,"span",0),Cn(1),gt(2,"span",1),Cn(3,1),Mt(),Cn(4,2),Nr(5,"span",2)(6,"span",3)),2&i&&nr("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),h6=(()=>{class t extends XD{constructor(e,i,r,a){super(e,i,r,a),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(So),me(Pt),me(Gl,8))};static#t=this.\u0275cmp=ai({type:t,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(Fr("disabled",r.disabled||null),nr("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Qt],attrs:o6,ngContentSelectors:s6,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&($o(),Nr(0,"span",0),Cn(1),Nr(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),p6=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Co,WD,Co]})}return t})();const m6=["addListener","removeListener"],f6=["addEventListener","removeEventListener"],g6=["on","off"];function gg(t,n,e,i){if(tn(e)&&(i=e,e=void 0),i)return gg(t,n,e).pipe(Lx(i));const[r,a]=function y6(t){return tn(t.addEventListener)&&tn(t.removeEventListener)}(t)?f6.map(u=>f=>t[u](n,f,e)):function _6(t){return tn(t.addListener)&&tn(t.removeListener)}(t)?m6.map(QD(t,n)):function v6(t){return tn(t.on)&&tn(t.off)}(t)?g6.map(QD(t,n)):[];if(!r&&G(t))return Ft(u=>gg(u,n,e))(Xe(t));if(!r)throw new TypeError("Invalid event target");return new yn(u=>{const f=(...b)=>u.next(1<b.length?b:b[0]);return r(f),()=>a(f)})}function QD(t,n){return e=>i=>t[e](n,i)}const _g={schedule(t){let n=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=_g;i&&(n=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=n(a=>{e=void 0,t(a)});return new En(()=>e?.(r))},requestAnimationFrame(...t){const{delegate:n}=_g;return(n?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:n}=_g;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class x6 extends vw{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;n=n||i.shift();do{if(r=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}}(class b6 extends _w{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=_g.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:a}=n;null!=e&&(null===(r=a[a.length-1])||void 0===r?void 0:r.id)!==e&&(_g.cancelAnimationFrame(e),n._scheduled=void 0)}});let Cw,S6=1;const ay={};function YD(t){return t in ay&&(delete ay[t],!0)}const C6={setImmediate(t){const n=S6++;return ay[n]=!0,Cw||(Cw=Promise.resolve()),Cw.then(()=>YD(n)&&t()),n},clearImmediate(t){YD(t)}},{setImmediate:T6,clearImmediate:k6}=C6,ly={setImmediate(...t){const{delegate:n}=ly;return(n?.setImmediate||T6)(...t)},clearImmediate(t){const{delegate:n}=ly;return(n?.clearImmediate||k6)(t)},delegate:void 0};new class M6 extends vw{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;n=n||i.shift();do{if(r=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,r){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw r}}}(class E6 extends _w{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=ly.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:a}=n;null!=e&&(null===(r=a[a.length-1])||void 0===r?void 0:r.id)!==e&&(ly.clearImmediate(e),n._scheduled===e&&(n._scheduled=void 0))}});function JD(t,n=yw){return function I6(t){return Mn((n,e)=>{let i=!1,r=null,a=null,u=!1;const f=()=>{if(a?.unsubscribe(),a=null,i){i=!1;const S=r;r=null,e.next(S)}u&&e.complete()},b=()=>{a=null,u&&e.complete()};n.subscribe(sn(e,S=>{i=!0,r=S,a||Xe(t(S)).subscribe(a=sn(e,f,b))},()=>{u=!0,(!i||!a||a.closed)&&e.complete()}))})}(()=>function P6(t=0,n,e=uj){let i=-1;return null!=n&&(Da(n)?e=n:i=n),new yn(r=>{let a=function A6(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let u=0;return e.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},a)})}(t,n))}let eI=(()=>{class t{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Zt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new yn(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(JD(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):mt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Zr(a=>!a||r.indexOf(a)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,a)=>{this._scrollableContainsElement(a,e)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=sh(i),a=e.getElementRef().nativeElement;do{if(r==a)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>gg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Pt),Oe(So),Oe(Un,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tw=(()=>{class t{constructor(e,i,r,a){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=a,this._destroyed=new Zt,this._elementScrolled=new yn(u=>this.ngZone.runOutsideAngular(()=>gg(this.elementRef.nativeElement,"scroll").pipe(Ko(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=ug()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==ug()?e.left=e.right:1==ug()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;!function B4(){if(null==oh){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return oh=!1,oh;if("scrollBehavior"in document.documentElement.style)oh=!0;else{const t=Element.prototype.scrollTo;oh=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return oh}()?(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left)):i.scrollTo(e)}measureScrollOffset(e){const i="left",r="right",a=this.elementRef.nativeElement;if("top"==e)return a.scrollTop;if("bottom"==e)return a.scrollHeight-a.clientHeight-a.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==e?e=u?r:i:"end"==e&&(e=u?i:r),u&&2==ug()?e==i?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:u&&1==ug()?e==i?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:e==i?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(eI),me(Pt),me(LD,8))};static#t=this.\u0275dir=Je({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return t})(),F6=(()=>{class t{constructor(e,i,r){this._platform=e,this._change=new Zt,this._changeListener=a=>{this._change.next(a)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,a=r.getBoundingClientRect();return{top:-a.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-a.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(JD(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(So),Oe(Pt),Oe(Un,8))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tI=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({})}return t})();class nI{}class N6{}const Xc="*";function L6(t,n){return{type:7,name:t,definitions:n,options:{}}}function iI(t,n=null){return{type:4,styles:n,timings:t}}function rI(t,n=null){return{type:2,steps:t,options:n}}function cy(t){return{type:6,styles:t,offset:null}}function oI(t,n,e){return{type:0,name:t,styles:n,options:e}}function sI(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}class vg{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class aI{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,r=0;const a=this.players.length;0==a?queueMicrotask(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==a&&this._onFinish()}),u.onDestroy(()=>{++i==a&&this._onDestroy()}),u.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,f)=>Math.max(u,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const lI=["*"],z6=["content"];function B6(t,n){if(1&t){const e=If();gt(0,"div",2),zi("click",function(){return Nl(e),Sc(Go()._onBackdropClicked())}),Mt()}2&t&&nr("mat-drawer-shown",Go()._isShowingBackdrop())}function V6(t,n){1&t&&(gt(0,"mat-drawer-content"),Cn(1,2),Mt())}const j6=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],U6=["mat-drawer","mat-drawer-content","*"],H6={transformDrawer:L6("transform",[oI("open, open-instant",cy({transform:"none",visibility:"visible"})),oI("void",cy({"box-shadow":"none",visibility:"hidden"})),sI("void => open-instant",iI("0ms")),sI("void <=> open, open-instant => void",iI("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},G6=new Le("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function $6(){return!1}}),cI=new Le("MAT_DRAWER_CONTAINER");let Ew=(()=>{class t extends Tw{constructor(e,i,r,a,u){super(r,a,u),this._changeDetectorRef=e,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(i){return new(i||t)(me(Ld),me(wn(()=>uI)),me(Rn),me(eI),me(Pt))};static#t=this.\u0275cmp=ai({type:t,selectors:[["mat-drawer-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,r){2&i&&x0("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[jn([{provide:Tw,useExisting:t}]),Qt],ngContentSelectors:lI,decls:1,vars:0,template:function(i,r){1&i&&($o(),Cn(0))},encapsulation:2,changeDetection:0})}return t})(),dI=(()=>{class t{get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=br(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=br(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(br(e))}constructor(e,i,r,a,u,f,b,S){this._elementRef=e,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=a,this._ngZone=u,this._interactivityChecker=f,this._doc=b,this._container=S,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Zt,this._animationEnd=new Zt,this._animationState="void",this.openedChange=new tt(!0),this._openedStream=this.openedChange.pipe(Zr(D=>D),It(()=>{})),this.openedStart=this._animationStarted.pipe(Zr(D=>D.fromState!==D.toState&&0===D.toState.indexOf("open")),Vx(void 0)),this._closedStream=this.openedChange.pipe(Zr(D=>!D),It(()=>{})),this.closedStart=this._animationStarted.pipe(Zr(D=>D.fromState!==D.toState&&"void"===D.toState),Vx(void 0)),this._destroyed=new Zt,this.onPositionChanged=new tt,this._modeChanged=new Zt,this.openedChange.subscribe(D=>{D?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{gg(this._elementRef.nativeElement,"keydown").pipe(Zr(D=>27===D.keyCode&&!this.disableClose&&!function gw(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(D)),Ko(this._destroyed)).subscribe(D=>this._ngZone.run(()=>{this.close(),D.stopPropagation(),D.preventDefault()}))}),this._animationEnd.pipe(nd((D,N)=>D.fromState===N.fromState&&D.toState===N.toState)).subscribe(D=>{const{fromState:N,toState:H}=D;(0===H.indexOf("open")&&"void"===N||"void"===H&&0===N.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,i){e&&i&&(this._openedVia=i);const r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,i,r){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(a=>{this.openedChange.pipe(ll(1)).subscribe(u=>a(u?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(e){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(Pj),me(OD),me(So),me(Pt),me(MD),me(Un,8),me(cI,8))};static#t=this.\u0275cmp=ai({type:t,selectors:[["mat-drawer"]],viewQuery:function(i,r){if(1&i&&Fd(z6,5),2&i){let a;gr(a=_r())&&(r._content=a.first)}},hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer"],hostVars:12,hostBindings:function(i,r){1&i&&g0("@transform.start",function(u){return r._animationStarted.next(u)})("@transform.done",function(u){return r._animationEnd.next(u)}),2&i&&(Fr("align",null),S0("@transform",r._animationState),nr("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:lI,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,r){1&i&&($o(),gt(0,"div",0,1),Cn(2),Mt())},dependencies:[Tw],encapsulation:2,data:{animation:[H6.transformDrawer]},changeDetection:0})}return t})(),uI=(()=>{class t{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=br(e)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=null==e?null:br(e)}get scrollable(){return this._userContent||this._content}constructor(e,i,r,a,u,f=!1,b){this._dir=e,this._element=i,this._ngZone=r,this._changeDetectorRef=a,this._animationMode=b,this._drawers=new zp,this.backdropClick=new tt,this._destroyed=new Zt,this._doCheckSubject=new Zt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Zt,e&&e.change.pipe(Ko(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),u.change().pipe(Ko(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=f}ngAfterContentInit(){this._allDrawers.changes.pipe(Nv(this._allDrawers),Ko(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Nv(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(ry(10),Ko(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();e+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,e-=r}e=e||null,i=i||null,(e!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:e,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(Zr(i=>i.fromState!==i.toState),Ko(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(Ko(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e&&e.onPositionChanged.pipe(Ko(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(ll(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(Ko(ws(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return null!=e&&e.opened}_drawerHasBackdrop(e){return null==this._backdropOverride?!!e&&"side"!==e.mode:this._backdropOverride}static#e=this.\u0275fac=function(i){return new(i||t)(me(LD,8),me(Rn),me(Pt),me(Ld),me(F6),me(G6),me(Gl,8))};static#t=this.\u0275cmp=ai({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(i,r,a){if(1&i&&(Us(a,Ew,5),Us(a,dI,5)),2&i){let u;gr(u=_r())&&(r._content=u.first),gr(u=_r())&&(r._allDrawers=u)}},viewQuery:function(i,r){if(1&i&&Fd(Ew,5),2&i){let a;gr(a=_r())&&(r._userContent=a.first)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,r){2&i&&nr("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[jn([{provide:cI,useExisting:t}])],ngContentSelectors:U6,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){1&i&&($o(j6),Mi(0,B6,1,2,"div",0),Cn(1),Cn(2,1),Mi(3,V6,2,0,"mat-drawer-content",1)),2&i&&(hi("ngIf",r.hasBackdrop),on(3),hi("ngIf",!r._content))},dependencies:[kv,Ew],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return t})(),W6=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[$f,Co,tI,tI,Co]})}return t})();class Mw{}class Qc{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),a=r.toLowerCase(),u=e.slice(i+1).trim();this.maybeSetNormalizedName(r,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Qc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Qc;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Qc?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const r=("a"===n.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const a=n.value;if(a){let u=this.headers.get(e);if(!u)return;u=u.filter(f=>-1===a.indexOf(f)),0===u.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,u)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(a=>a.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class q6{encodeKey(n){return pI(n)}encodeValue(n){return pI(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const K6=/%(\d[a-f0-9])/gi,X6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pI(t){return encodeURIComponent(t).replace(K6,(n,e)=>X6[e]??n)}function dy(t){return`${t}`}class $d{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new q6,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Z6(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const a=r.indexOf("="),[u,f]=-1==a?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,a)),n.decodeValue(r.slice(a+1))],b=e.get(u)||[];b.push(f),e.set(u,b)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],r=Array.isArray(i)?i.map(dy):[dy(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(a=>{e.push({param:i,value:a,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new $d({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(dy(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(dy(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class Q6{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function mI(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function fI(t){return typeof Blob<"u"&&t instanceof Blob}function gI(t){return typeof FormData<"u"&&t instanceof FormData}class yg{constructor(n,e,i,r){let a;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function Y6(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,a=r):a=i,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Qc),this.context||(this.context=new Q6),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+u}}else this.params=new $d,this.urlWithParams=e}serializeBody(){return null===this.body?null:mI(this.body)||fI(this.body)||gI(this.body)||function J6(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $d?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||gI(this.body)?null:fI(this.body)?this.body.type||null:mI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $d?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,a=void 0!==n.body?n.body:this.body,u=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,f=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let b=n.headers||this.headers,S=n.params||this.params;const D=n.context??this.context;return void 0!==n.setHeaders&&(b=Object.keys(n.setHeaders).reduce((N,H)=>N.set(H,n.setHeaders[H]),b)),n.setParams&&(S=Object.keys(n.setParams).reduce((N,H)=>N.set(H,n.setParams[H]),S)),new yg(e,i,a,{params:S,headers:b,context:D,reportProgress:f,responseType:r,withCredentials:u})}}var Iw=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Iw||{});class e8{constructor(n,e=200,i="OK"){this.headers=n.headers||new Qc,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class bg extends e8{constructor(n={}){super(n),this.type=Iw.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new bg({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}function Aw(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Pw=(()=>{class t{constructor(e){this.handler=e}request(e,i,r={}){let a;if(e instanceof yg)a=e;else{let b,S;b=r.headers instanceof Qc?r.headers:new Qc(r.headers),r.params&&(S=r.params instanceof $d?r.params:new $d({fromObject:r.params})),a=new yg(e,i,void 0!==r.body?r.body:null,{headers:b,context:r.context,params:S,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const u=mt(a).pipe(Gp(b=>this.handler.handle(b)));if(e instanceof yg||"events"===r.observe)return u;const f=u.pipe(Zr(b=>b instanceof bg));switch(r.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe(It(b=>{if(null!==b.body&&!(b.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return b.body}));case"blob":return f.pipe(It(b=>{if(null!==b.body&&!(b.body instanceof Blob))throw new Error("Response is not a Blob.");return b.body}));case"text":return f.pipe(It(b=>{if(null!==b.body&&"string"!=typeof b.body)throw new Error("Response is not a string.");return b.body}));default:return f.pipe(It(b=>b.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new $d).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Aw(r,i))}post(e,i,r={}){return this.request("POST",e,Aw(r,i))}put(e,i,r={}){return this.request("PUT",e,Aw(r,i))}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Mw))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();const b8=["*"];let py;function xg(t){return function x8(){if(void 0===py&&(py=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(py=t.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return py}()?.createHTML(t)||t}function kI(t){return Error(`Unable to find icon with the name "${t}"`)}function EI(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function MI(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class ch{constructor(n,e,i){this.url=n,this.svgText=e,this.options=i}}let my=(()=>{class t{constructor(e,i,r,a){this._httpClient=e,this._sanitizer=i,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,a){return this._addSvgIconConfig(e,i,new ch(r,null,a))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,a){const u=this._sanitizer.sanitize(oo.HTML,r);if(!u)throw MI(r);const f=xg(u);return this._addSvgIconConfig(e,i,new ch("",f,a))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new ch(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const a=this._sanitizer.sanitize(oo.HTML,i);if(!a)throw MI(i);const u=xg(a);return this._addSvgIconSetConfig(e,new ch("",u,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(oo.RESOURCE_URL,e);if(!i)throw EI(e);const r=this._cachedIconsByUrl.get(i);return r?mt(fy(r)):this._loadSvgIconFromConfig(new ch(e,null)).pipe(yr(a=>this._cachedIconsByUrl.set(i,a)),It(a=>fy(a)))}getNamedSvgIcon(e,i=""){const r=DI(i,e);let a=this._svgIconConfigs.get(r);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(i,e),a)return this._svgIconConfigs.set(r,a),this._getSvgFromConfig(a);const u=this._iconSetConfigs.get(i);return u?this._getSvgFromIconSetConfigs(e,u):Hp(kI(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?mt(fy(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(It(i=>fy(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?mt(r):function hI(...t){const n=vh(t),{args:e,keys:i}=lM(t),r=new yn(a=>{const{length:u}=e;if(!u)return void a.complete();const f=new Array(u);let b=u,S=u;for(let D=0;D<u;D++){let N=!1;Xe(e[D]).subscribe(sn(a,H=>{N||(N=!0,S--),f[D]=H},()=>b--,void 0,()=>{(!b||!N)&&(S||a.next(i?cM(i,f):f),a.complete())}))}});return n?r.pipe(Lx(n)):r}(i.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(jd(f=>{const S=`Loading icon set URL: ${this._sanitizer.sanitize(oo.RESOURCE_URL,u.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(S)),mt(null)})))).pipe(It(()=>{const u=this._extractIconWithNameFromAnySet(e,i);if(!u)throw kI(e);return u}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const a=i[r];if(a.svgText&&a.svgText.toString().indexOf(e)>-1){const u=this._svgElementFromConfig(a),f=this._extractSvgIconFromSet(u,e,a.options);if(f)return f}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(yr(i=>e.svgText=i),It(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?mt(null):this._fetchIcon(e).pipe(yr(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const a=e.querySelector(`[id="${i}"]`);if(!a)return null;const u=a.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,r);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),r);const f=this._svgElementFromString(xg("<svg></svg>"));return f.appendChild(u),this._setSvgAttributes(f,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(xg("<svg></svg>")),r=e.attributes;for(let a=0;a<r.length;a++){const{name:u,value:f}=r[a];"id"!==u&&i.setAttribute(u,f)}for(let a=0;a<e.childNodes.length;a++)e.childNodes[a].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[a].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,a=r?.withCredentials??!1;if(!this._httpClient)throw function w8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const u=this._sanitizer.sanitize(oo.RESOURCE_URL,i);if(!u)throw EI(i);const f=this._inProgressUrlFetches.get(u);if(f)return f;const b=this._httpClient.get(u,{responseType:"text",withCredentials:a}).pipe(It(S=>xg(S)),Lv(()=>this._inProgressUrlFetches.delete(u)),Vr());return this._inProgressUrlFetches.set(u,b),b}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(DI(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const a=this._resolvers[r](i,e);if(a)return C8(a)?new ch(a.url,null,a.options):new ch(a,null)}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Pw,8),Oe(Nx),Oe(Un,8),Oe(fa))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fy(t){return t.cloneNode(!0)}function DI(t,n){return t+":"+n}function C8(t){return!(!t.url||!t.options)}const T8=xw(class{constructor(t){this._elementRef=t}}),k8=new Le("MAT_ICON_DEFAULT_OPTIONS"),E8=new Le("mat-icon-location",{providedIn:"root",factory:function M8(){const t=qe(Un),n=t?t.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),II=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],D8=II.map(t=>`[${t}]`).join(", "),I8=/^url\(['"]?#(.*?)['"]?\)$/;let A8=(()=>{class t extends T8{get inline(){return this._inline}set inline(e){this._inline=br(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(e,i,r,a,u,f){super(e),this._iconRegistry=i,this._location=a,this._errorHandler=u,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=En.EMPTY,f&&(f.color&&(this.color=this.defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,a)=>{r.forEach(u=>{a.setAttribute(u.name,`url('${e}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(D8),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<i.length;a++)II.forEach(u=>{const f=i[a],b=f.getAttribute(u),S=b?b.match(I8):null;if(S){let D=r.get(f);D||(D=[],r.set(f,D)),D.push({name:u,value:S[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(ll(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${a.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(my),function Dc(t){return function qg(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const a=e[r];if(du(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(a===n)return e[r+1];r+=2}}}return null}(Ir(),t)}("aria-hidden"),me(E8),me(fa),me(k8,8))};static#t=this.\u0275cmp=ai({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Fr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),nr("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Qt],ngContentSelectors:b8,decls:1,vars:0,template:function(i,r){1&i&&($o(),Cn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return t})(),P8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Co,Co]})}return t})();const R8=["*",[["mat-toolbar-row"]]],O8=["*","mat-toolbar-row"],F8=xw(class{constructor(t){this._elementRef=t}});let N8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return t})(),L8=(()=>{class t extends F8{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(So),me(Un))};static#t=this.\u0275cmp=ai({type:t,selectors:[["mat-toolbar"]],contentQueries:function(i,r,a){if(1&i&&Us(a,N8,5),2&i){let u;gr(u=_r())&&(r._toolbarRows=u)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(i,r){2&i&&nr("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Qt],ngContentSelectors:O8,decls:2,vars:0,template:function(i,r){1&i&&($o(R8),Cn(0),Cn(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return t})(),z8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Co,Co]})}return t})(),AI=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),B8=(()=>{class t{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=sh(e);return new yn(r=>{const u=this._observeElement(i).subscribe(r);return()=>{u.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Zt,r=this._mutationObserverFactory.create(a=>i.next(a));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(AI))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),PI=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=br(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=wD(e),this._subscribe()}constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new tt,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(ry(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)(me(B8),me(Rn),me(Pt))};static#t=this.\u0275dir=Je({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return t})(),V8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({providers:[AI]})}return t})(),j8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Co,Co]})}return t})();const LA=["*"],BA=["unscopedContent"],VU=["text"],jU=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],UU=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],VA=new Le("ListOption");let t1=(()=>{class t{constructor(e){this._elementRef=e}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn))};static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return t})(),jA=(()=>{class t{constructor(e){this._elementRef=e}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn))};static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return t})(),sH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return t})(),UA=(()=>{class t{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}static#e=this.\u0275fac=function(i){return new(i||t)(me(VA,8))};static#t=this.\u0275dir=Je({type:t,hostVars:4,hostBindings:function(i,r){2&i&&nr("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return t})(),aH=(()=>{class t extends UA{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ri(t)))(r||t)}}();static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Qt]})}return t})(),lH=(()=>{class t extends UA{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ri(t)))(r||t)}}();static#t=this.\u0275dir=Je({type:t,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Qt]})}return t})();const cH=new Le("MAT_LIST_CONFIG");let sm=(()=>{class t{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=qe(cH,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=br(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=br(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,hostVars:1,hostBindings:function(i,r){2&i&&Fr("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return t})(),n1=(()=>{class t{set lines(e){this._explicitLines=wD(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=br(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=br(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,i,r,a,u,f){this._elementRef=e,this._ngZone=i,this._listBase=r,this._platform=a,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new En,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=u||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===f,r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new mg(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(ws(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();const i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===i),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===i),this._hasUnscopedTextContent){const a=0===this._titles.length&&1===i;r.classList.toggle("mdc-list-item__primary-text",a),r.classList.toggle("mdc-list-item__secondary-text",!a)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!(!e.textContent||!e.textContent.trim()))}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(Pt),me(sm,8),me(So),me(fg,8),me(Gl,8))};static#t=this.\u0275dir=Je({type:t,contentQueries:function(i,r,a){if(1&i&&(Us(a,aH,4),Us(a,lH,4)),2&i){let u;gr(u=_r())&&(r._avatars=u),gr(u=_r())&&(r._icons=u)}},hostVars:4,hostBindings:function(i,r){2&i&&(Fr("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),nr("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return t})(),dH=(()=>{class t extends sm{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=Ri(t)))(r||t)}}();static#t=this.\u0275cmp=ai({type:t,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[jn([{provide:sm,useExisting:t}]),Qt],ngContentSelectors:LA,decls:1,vars:0,template:function(i,r){1&i&&($o(),Cn(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0})}return t})(),uH=(()=>{class t extends n1{get activated(){return this._activated}set activated(e){this._activated=br(e)}constructor(e,i,r,a,u,f){super(e,i,r,a,u,f),this._activated=!1}_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}static#e=this.\u0275fac=function(i){return new(i||t)(me(Rn),me(Pt),me(sm,8),me(So),me(fg,8),me(Gl,8))};static#t=this.\u0275cmp=ai({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,a){if(1&i&&(Us(a,jA,5),Us(a,t1,5),Us(a,sH,5)),2&i){let u;gr(u=_r())&&(r._lines=u),gr(u=_r())&&(r._titles=u),gr(u=_r())&&(r._meta=u)}},viewQuery:function(i,r){if(1&i&&(Fd(BA,5),Fd(VU,5)),2&i){let a;gr(a=_r())&&(r._unscopedContent=a.first),gr(a=_r())&&(r._itemText=a.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(i,r){2&i&&(Fr("aria-current",r._getAriaCurrent()),nr("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",0!==r._avatars.length)("mdc-list-item--with-leading-icon",0!==r._icons.length)("mdc-list-item--with-trailing-meta",0!==r._meta.length)("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[Qt],ngContentSelectors:UU,decls:10,vars:0,consts:[[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],[1,"mat-mdc-focus-indicator"]],template:function(i,r){1&i&&($o(jU),Cn(0),gt(1,"span",0),Cn(2,1),Cn(3,2),gt(4,"span",1,2),zi("cdkObserveContent",function(){return r._updateItemLines(!0)}),Cn(6,3),Mt()(),Cn(7,4),Cn(8,5),Nr(9,"div",3))},dependencies:[PI],encapsulation:2,changeDetection:0})}return t})(),pH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-mdc-subheader","mdc-list-group__subheader"]})}return t})(),_H=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[V8,$f,Co,WD,Jj,j8]})}return t})();const vH=["*"],SH=new Le("MAT_CARD_CONFIG");let GA=(()=>{class t{constructor(e){this.appearance=e?.appearance||"raised"}static#e=this.\u0275fac=function(i){return new(i||t)(me(SH,8))};static#t=this.\u0275cmp=ai({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){2&i&&nr("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:vH,decls:1,vars:0,template:function(i,r){1&i&&($o(),Cn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return t})(),$A=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Je({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})(),kH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[Co,$f,Co]})}return t})();const EH=["detailcard"];function MH(t,n){if(1&t){const e=If();gt(0,"mat-list-item")(1,"div",26),zi("click",function(){const a=Nl(e).$implicit,u=Go(),f=tl(3);return u.isMobile&&f.close(),Sc(u.mapShowPowerPlant(a))}),gt(2,"a")(3,"button",27)(4,"span"),Tn(5),Mt()()()()()}if(2&t){const e=n.$implicit;on(5),ev(e.name)}}function DH(t,n){1&t&&(gt(0,"div")(1,"mat-icon"),Tn(2,"expand_less"),Mt(),Tn(3," v\xedce "),gt(4,"mat-icon"),Tn(5,"expand_less"),Mt()())}function IH(t,n){1&t&&(gt(0,"div")(1,"mat-icon"),Tn(2,"expand_more"),Mt(),Tn(3," m\xe9n\u011b "),gt(4,"mat-icon"),Tn(5,"expand_more"),Mt()())}function AH(t,n){if(1&t){const e=If();gt(0,"div",28),zi("click",function(){return Nl(e),Sc(Go().detailsToggleClicked())}),Mi(1,DH,6,0,"div",29),Mi(2,IH,6,0,"div",29),Mt()}if(2&t){const e=Go();on(1),hi("ngIf",!e.detail_card_expanded),on(1),hi("ngIf",e.detail_card_expanded)}}function PH(t,n){if(1&t&&(gt(0,"div",30)(1,"div",31)(2,"h2"),Tn(3),Mt(),gt(4,"p")(5,"b"),Tn(6),Mt()(),gt(7,"p"),Tn(8),Mt(),gt(9,"p"),Tn(10),Mt(),gt(11,"p"),Tn(12),Mt(),gt(13,"p"),Tn(14),Mt(),gt(15,"p"),Tn(16),Mt(),gt(17,"p"),Tn(18),Mt(),gt(19,"p"),Tn(20),Mt(),gt(21,"p"),Tn(22),Mt(),gt(23,"p"),Tn(24),Mt(),gt(25,"p"),Tn(26),Mt(),gt(27,"p"),Tn(28),Mt(),gt(29,"div")(30,"h5"),Tn(31,"Zdroje:"),Mt(),gt(32,"p"),Tn(33),Nr(34,"br"),Tn(35),Mt()()(),gt(36,"div",32),Nr(37,"img",33),Mt()()),2&t){const e=Go();on(3),ev(e.powerplant_details.name),on(3),so("M\xedsto: ",e.powerplant_details.place,""),on(2),so("Roky v provozu: ",e.powerplant_details.years_in_service,""),on(2),so("V\xfdkon: ",e.powerplant_details.power,""),on(2),so("Druh: ",e.powerplant_details.type,""),on(2),so("Vlastn\xedk: ",e.powerplant_details.owner,""),on(2),so(" ",e.powerplant_details.description_short," "),on(2),so(" ",e.powerplant_details.description1," "),on(2),so(" ",e.powerplant_details.description2," "),on(2),so(" ",e.powerplant_details.description3," "),on(2),so(" ",e.powerplant_details.description4," "),on(2),so(" ",e.powerplant_details.description5," "),on(2),so(" ",e.powerplant_details.description6," "),on(5),so(" ",e.powerplant_details.sources1,""),on(2),so(" ",e.powerplant_details.sources2," ")}}function RH(t,n){1&t&&(gt(0,"div",34),Tn(1," Vyberte elektr\xe1rnu z mapy nebo ze seznamu "),Mt())}const OH=function(){return[6.4]},FH=function(){return[15.5,49.8]},NH=[{path:"",component:(()=>{class t{constructor(e,i){this.changeDetector=e,this.deviceService=i,this.map=null,this.detail_card_expanded=!1,this.powerplants=[],this.deviceInfo=null,this.isMobile=!1;for(const r of I4.R)this.powerplants.push(r.properties),this.powerplants[this.powerplants.length-1].coordinates=[r.geometry.coordinates[0],r.geometry.coordinates[1]];this.powerplants.sort((r,a)=>r.name.localeCompare(a.name)),this.deviceInfo=this.deviceService.getDeviceInfo(),this.isMobile=this.deviceService.isMobile()}mapLoaded(e){this.map=e,this.map.on("click","elektrarny",i=>{var a=i.features[0].geometry;this.powerplant_details=i.features[0].properties,this.powerplant_details.coordinates=[a.coordinates[0],a.coordinates[1]],this.mapShowPopup(this.powerplant_details)}),this.map.on("mouseenter","elektrarny",()=>{this.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave","elektrarny",()=>{this.map.getCanvas().style.cursor=""})}mapShowPopup(e){null!=this.popup&&(this.popup.remove(),this.popup=null),null!=this.marker&&(this.marker.remove(),this.marker=null),this.marker=new Av.Marker({draggable:!0}).setLngLat(e.coordinates).addTo(this.map),this.changeDetector.detectChanges()}mapShowPowerPlant(e){this.powerplant_details=e,this.mapShowPopup(e),this.mapFlyTo(e.coordinates)}mapFlyTo(e){this.map.flyTo({center:e,zoom:8,bearing:0,speed:2,curve:1,easing:i=>i,essential:!0})}detailsToggleClicked(){this.detail_card.nativeElement.classList.contains("detail-card-up")?(this.detail_card_expanded=!1,this.detail_card.nativeElement.classList.remove("detail-card-up"),this.detail_card.nativeElement.classList.add("detail-card-down")):(this.detail_card_expanded=!0,this.detail_card.nativeElement.classList.remove("detail-card-down"),this.detail_card.nativeElement.classList.add("detail-card-up")),this.changeDetector.detectChanges()}static#e=this.\u0275fac=function(i){return new(i||t)(me(Ld),me(L4))};static#t=this.\u0275cmp=ai({type:t,selectors:[["app-main-page"]],viewQuery:function(i,r){if(1&i&&Fd(EH,5),2&i){let a;gr(a=_r())&&(r.detail_card=a.first)}},decls:43,vars:11,consts:[[1,"main-page"],[1,"page-container"],[1,"sidenav-container",3,"mode"],["drawer",""],[1,"menu-container"],["mat-subheader","",1,"menu-headline"],[4,"ngFor","ngForOf"],[1,"content-container"],[1,"top-toolbar"],["mat-icon-button","","color","secondary","aria-label","List of powerplants",1,"drawer-button",3,"click"],["mat-icon-button","","color","secondary",1,"info-button",3,"click"],[1,"map-container"],[3,"zoom","center","mapLoad"],["mapa",""],[1,"detail-card-wrapper"],["detailcard",""],[1,"detail-card"],["class","detail-card-icons-wrapper",3,"click",4,"ngIf"],[1,"detail-card-content-wrapper"],["class","detail-card-content",4,"ngIf"],["class","no-selected-powerplant-info",4,"ngIf"],[1,"info-card-enabled"],["infocardwrapper",""],[1,"info-card"],[1,"info-card-icons-wrapper",3,"click"],[1,"info-card-content-wrapper"],["matListItemTitle","",3,"click"],["mat-button","",1,"menu-item"],[1,"detail-card-icons-wrapper",3,"click"],[4,"ngIf"],[1,"detail-card-content"],[1,"detail-text-wrapper"],[1,"images-wrapper"],["src","/assets/img/ceske_budejovice1.jpg",2,"width","100%"],[1,"no-selected-powerplant-info"]],template:function(i,r){if(1&i){const a=If();gt(0,"div",0)(1,"mat-drawer-container",1)(2,"mat-drawer",2,3)(4,"mat-list",4)(5,"div",5),Tn(6,"Elektr\xe1rny"),Mt(),Mi(7,MH,6,1,"mat-list-item",6),Mt()(),gt(8,"div",7)(9,"mat-toolbar",8)(10,"div",8)(11,"button",9),zi("click",function(){return Nl(a),Sc(tl(3).toggle())}),gt(12,"mat-icon"),Tn(13,"menu"),Mt()(),gt(14,"span"),Tn(15,"Uheln\xe9 elektr\xe1rny v \u010cR"),Mt()(),gt(16,"div")(17,"button",10),zi("click",function(){Nl(a);const f=tl(31);return f.classList.remove("info-card-disabled"),Sc(f.classList.add("info-card-enabled"))}),gt(18,"mat-icon"),Tn(19,"info"),Mt()()()(),gt(20,"div",11)(21,"mgl-map",12,13),zi("mapLoad",function(f){return r.mapLoaded(f)}),Mt()(),gt(23,"div",14,15)(25,"mat-card",16),Mi(26,AH,3,2,"div",17),gt(27,"mat-card-content",18),Mi(28,PH,38,15,"div",19),Mi(29,RH,2,0,"div",20),Mt()()()()(),gt(30,"div",21,22)(32,"mat-card",23)(33,"div",24),zi("click",function(){Nl(a);const f=tl(31);return f.classList.remove("info-card-enabled"),Sc(f.classList.add("info-card-disabled"))}),gt(34,"mat-icon"),Tn(35,"close"),Mt()(),gt(36,"mat-card-content",25)(37,"h2"),Tn(38,"P\u0159ehled uheln\xfdch elektr\xe1ren v \u010cR"),Mt(),Tn(39," Semestr\xe1ln\xed projekt HVT"),Nr(40,"br")(41,"br"),Tn(42," tady bude asi n\u011bjak\xfd popis a koment\xe1\u0159 k cel\xe9mu projektu "),Mt()()()()}2&i&&(on(2),hi("mode",r.isMobile?"over":"side"),on(5),hi("ngForOf",r.powerplants),on(14),nl("assets/slepa_mapa_osm_prod.json"),hi("zoom",O0(9,OH))("center",O0(10,FH)),on(5),hi("ngIf",null!=r.powerplant_details),on(2),hi("ngIf",null!=r.powerplant_details),on(1),hi("ngIf",null==r.powerplant_details))},dependencies:[kE,kv,JB,d6,h6,dI,uI,A8,L8,dH,uH,pH,t1,GA,$A],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}.page-container[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}.content-container[_ngcontent-%COMP%]{height:100%;overflow:hidden;position:relative}.sidenav-container[_ngcontent-%COMP%]{padding:20px}.mat-icon[_ngcontent-%COMP%]{vertical-align:top}.menu-container[_ngcontent-%COMP%]{width:100%}.menu-item[_ngcontent-%COMP%]{padding:.5em 0 .5em 1.5em;width:100%;text-align:left;font-weight:700;display:flex;flex-direction:row;justify-content:left;align-items:center}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:active{color:inherit;text-decoration:none}.menu-headline[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;justify-content:left;align-items:center}.detail-card-wrapper[_ngcontent-%COMP%]{position:absolute;width:80%;left:10%;top:90vh;height:85vh;z-index:1000}.detail-card[_ngcontent-%COMP%]{width:100%;height:100%;overflow:scroll;position:relative}.detail-card-icons-wrapper[_ngcontent-%COMP%]{width:100%;height:5em;display:flex;flex-direction:column;align-items:center;position:absolute;left:0;top:0;z-index:2000;font-size:small}.detail-card-icons-wrapper[_ngcontent-%COMP%]:hover, .info-card-icons-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.detail-card-content-wrapper[_ngcontent-%COMP%]{position:absolute;width:100%;left:0;top:1.5em;padding:0}.detail-card-content[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:row;flex-wrap:wrap;align-items:flex-start;justify-content:center}@keyframes _ngcontent-%COMP%_moredetail{0%{top:90vh}to{top:10vh}}@keyframes _ngcontent-%COMP%_lessdetail{0%{top:10vh}to{top:90vh}}.detail-card-down[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_lessdetail;animation-duration:.3s;animation-iteration-count:1;animation-timing-function:ease-in-out;animation-fill-mode:forwards}.detail-card-up[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_moredetail;animation-duration:.3s;animation-iteration-count:1;animation-timing-function:ease-in-out;animation-fill-mode:forwards}.no-selected-powerplant-info[_ngcontent-%COMP%]{text-align:center}.detail-text-wrapper[_ngcontent-%COMP%]{flex-grow:2;max-width:40em;padding:1em;text-align:justify}.images-wrapper[_ngcontent-%COMP%]{flex-grow:1;top:0;width:50%;padding:1em;display:flex;flex-direction:column;justify-content:flex-start}.top-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.drawer-button[_ngcontent-%COMP%]{margin-right:.5em}.info-card-enabled[_ngcontent-%COMP%]{display:block;visibility:visible}.info-card-disabled[_ngcontent-%COMP%]{display:none;visibility:hidden}.info-card[_ngcontent-%COMP%]{width:70vw;height:75vh;position:fixed;left:15vw;top:10vh;z-index:3000}.info-card-icons-wrapper[_ngcontent-%COMP%]{position:absolute;right:1em;top:1em;color:#fff}.info-card-content-wrapper[_ngcontent-%COMP%]{color:#fff;padding-top:1em}"]})}return t})()}];let LH=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({imports:[pD.forRoot(NH),pD]})}return t})(),zH=(()=>{class t{constructor(){this.title="hvt-uhelne-elektrarny"}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=ai({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&Nr(0,"router-outlet")},dependencies:[Jx]})}return t})();function WA(t){return new xe(3e3,!1)}function Xd(t){switch(t.length){case 0:return new vg;case 1:return t[0];default:return new aI(t)}}function qA(t,n,e=new Map,i=new Map){const r=[],a=[];let u=-1,f=null;if(n.forEach(b=>{const S=b.get("offset"),D=S==u,N=D&&f||new Map;b.forEach((H,K)=>{let re=K,ue=H;if("offset"!==K)switch(re=t.normalizePropertyName(re,r),ue){case"!":ue=e.get(K);break;case Xc:ue=i.get(K);break;default:ue=t.normalizeStyleValue(K,re,ue,r)}N.set(re,ue)}),D||a.push(N),f=N,u=S}),r.length)throw function aG(t){return new xe(3502,!1)}();return a}function r1(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&o1(e,"start",t)));break;case"done":t.onDone(()=>i(e&&o1(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&o1(e,"destroy",t)))}}function o1(t,n,e){const a=s1(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),u=t._data;return null!=u&&(a._data=u),a}function s1(t,n,e,i,r="",a=0,u){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:a,disabled:!!u}}function Gs(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function ZA(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const yG=(()=>typeof document>"u"?null:document.documentElement)();function a1(t){const n=t.parentNode||t.host||null;return n===yG?null:n}let hh=null,KA=!1;function XA(t,n){for(;n;){if(n===t)return!0;n=a1(n)}return!1}function QA(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]}let YA=(()=>{class t{validateStyleProperty(e){return function xG(t){hh||(hh=function wG(){return typeof document<"u"?document.body:null}()||{},KA=!!hh.style&&"WebkitAppearance"in hh.style);let n=!0;return hh.style&&!function bG(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in hh.style,!n&&KA&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in hh.style)),n}(e)}matchesElement(e,i){return!1}containsElement(e,i){return XA(e,i)}getParentElement(e){return a1(e)}query(e,i,r){return QA(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,a,u,f=[],b){return new vg(r,a)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})(),l1=(()=>{class t{static#e=this.NOOP=new YA}return t})();const SG=1e3,c1="ng-enter",Ty="ng-leave",ky="ng-trigger",Ey=".ng-trigger",e2="ng-animating",d1=".ng-animating";function Yc(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:u1(parseFloat(n[1]),n[2])}function u1(t,n){return"s"===n?t*SG:t}function My(t,n,e){return t.hasOwnProperty("duration")?t:function TG(t,n,e){let r,a=0,u="";if("string"==typeof t){const f=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return n.push(WA()),{duration:0,delay:0,easing:""};r=u1(parseFloat(f[1]),f[2]);const b=f[3];null!=b&&(a=u1(parseFloat(b),f[4]));const S=f[5];S&&(u=S)}else r=t;if(!e){let f=!1,b=n.length;r<0&&(n.push(function BH(){return new xe(3100,!1)}()),f=!0),a<0&&(n.push(function VH(){return new xe(3101,!1)}()),f=!0),f&&n.splice(b,0,WA())}return{duration:r,delay:a,easing:u}}(t,n,e)}function Eg(t,n={}){return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function t2(t){const n=new Map;return Object.keys(t).forEach(e=>{n.set(e,t[e])}),n}function Qd(t,n=new Map,e){if(e)for(let[i,r]of e)n.set(i,r);for(let[i,r]of t)n.set(i,r);return n}function Yl(t,n,e){n.forEach((i,r)=>{const a=p1(r);e&&!e.has(r)&&e.set(r,t.style[a]),t.style[a]=i})}function ph(t,n){n.forEach((e,i)=>{const r=p1(i);t.style[r]=""})}function Mg(t){return Array.isArray(t)?1==t.length?t[0]:rI(t):t}const h1=new RegExp("{{\\s*(.+?)\\s*}}","g");function r2(t){let n=[];if("string"==typeof t){let e;for(;e=h1.exec(t);)n.push(e[1]);h1.lastIndex=0}return n}function Dg(t,n,e){const i=t.toString(),r=i.replace(h1,(a,u)=>{let f=n[u];return null==f&&(e.push(function UH(t){return new xe(3003,!1)}()),f=""),f.toString()});return r==i?t:r}function Dy(t){const n=[];let e=t.next();for(;!e.done;)n.push(e.value),e=t.next();return n}const MG=/-+([a-z0-9])/g;function p1(t){return t.replace(MG,(...n)=>n[1].toUpperCase())}function $s(t,n,e){switch(n.type){case 7:return t.visitTrigger(n,e);case 0:return t.visitState(n,e);case 1:return t.visitTransition(n,e);case 2:return t.visitSequence(n,e);case 3:return t.visitGroup(n,e);case 4:return t.visitAnimate(n,e);case 5:return t.visitKeyframes(n,e);case 6:return t.visitStyle(n,e);case 8:return t.visitReference(n,e);case 9:return t.visitAnimateChild(n,e);case 10:return t.visitAnimateRef(n,e);case 11:return t.visitQuery(n,e);case 12:return t.visitStagger(n,e);default:throw function HH(t){return new xe(3004,!1)}()}}function o2(t,n){return window.getComputedStyle(t)[n]}const Iy="*";function AG(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function PG(t,n,e){if(":"==t[0]){const b=function RG(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function iG(t){return new xe(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof b)return void n.push(b);t=b}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function nG(t){return new xe(3015,!1)}()),n;const r=i[1],a=i[2],u=i[3];n.push(s2(r,u));"<"==a[0]&&!(r==Iy&&u==Iy)&&n.push(s2(u,r))}(i,e,n)):e.push(t),e}const Ay=new Set(["true","1"]),Py=new Set(["false","0"]);function s2(t,n){const e=Ay.has(t)||Py.has(t),i=Ay.has(n)||Py.has(n);return(r,a)=>{let u=t==Iy||t==r,f=n==Iy||n==a;return!u&&e&&"boolean"==typeof r&&(u=r?Ay.has(t):Py.has(t)),!f&&i&&"boolean"==typeof a&&(f=a?Ay.has(n):Py.has(n)),u&&f}}const OG=new RegExp("s*:selfs*,?","g");function m1(t,n,e,i){return new FG(t).build(n,e,i)}class FG{constructor(n){this._driver=n}build(n,e,i){const r=new zG(e);return this._resetContextStyleTimingState(r),$s(this,Mg(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0;const a=[],u=[];return"@"==n.name.charAt(0)&&e.errors.push(function $H(){return new xe(3006,!1)}()),n.definitions.forEach(f=>{if(this._resetContextStyleTimingState(e),0==f.type){const b=f,S=b.name;S.toString().split(/\s*,\s*/).forEach(D=>{b.name=D,a.push(this.visitState(b,e))}),b.name=S}else if(1==f.type){const b=this.visitTransition(f,e);i+=b.queryCount,r+=b.depCount,u.push(b)}else e.errors.push(function WH(){return new xe(3007,!1)}())}),{type:7,name:n.name,states:a,transitions:u,queryCount:i,depCount:r,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){const a=new Set,u=r||{};i.styles.forEach(f=>{f instanceof Map&&f.forEach(b=>{r2(b).forEach(S=>{u.hasOwnProperty(S)||a.add(S)})})}),a.size&&(Dy(a.values()),e.errors.push(function qH(t,n){return new xe(3008,!1)}()))}return{type:0,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=$s(this,Mg(n.animation),e);return{type:1,matchers:AG(n.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:mh(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(i=>$s(this,i,e)),options:mh(n.options)}}visitGroup(n,e){const i=e.currentTime;let r=0;const a=n.steps.map(u=>{e.currentTime=i;const f=$s(this,u,e);return r=Math.max(r,e.currentTime),f});return e.currentTime=r,{type:3,steps:a,options:mh(n.options)}}visitAnimate(n,e){const i=function VG(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return f1(My(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=f1(0,0,"");return a.dynamic=!0,a.strValue=e,a}const r=My(e,n);return f1(r.duration,r.delay,r.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let r,a=n.styles?n.styles:cy({});if(5==a.type)r=this.visitKeyframes(a,e);else{let u=n.styles,f=!1;if(!u){f=!0;const S={};i.easing&&(S.easing=i.easing),u=cy(S)}e.currentTime+=i.duration+i.delay;const b=this.visitStyle(u,e);b.isEmptyStep=f,r=b}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let f of r)"string"==typeof f?f===Xc?i.push(f):e.errors.push(new xe(3002,!1)):i.push(t2(f));let a=!1,u=null;return i.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(u=f.get("easing"),f.delete("easing")),!a))for(let b of f.values())if(b.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:i,easing:u,offset:n.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let r=e.currentTime,a=e.currentTime;i&&a>0&&(a-=i.duration+i.delay),n.styles.forEach(u=>{"string"!=typeof u&&u.forEach((f,b)=>{const S=e.collectedStyles.get(e.currentQuerySelector),D=S.get(b);let N=!0;D&&(a!=r&&a>=D.startTime&&r<=D.endTime&&(e.errors.push(function KH(t,n,e,i,r){return new xe(3010,!1)}()),N=!1),a=D.startTime),N&&S.set(b,{startTime:a,endTime:r}),e.options&&function EG(t,n,e){const i=n.params||{},r=r2(t);r.length&&r.forEach(a=>{i.hasOwnProperty(a)||e.push(function jH(t){return new xe(3001,!1)}())})}(f,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function XH(){return new xe(3011,!1)}()),i;let a=0;const u=[];let f=!1,b=!1,S=0;const D=n.steps.map(De=>{const ye=this._makeStyleAst(De,e);let st=null!=ye.offset?ye.offset:function BG(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(ye.styles),at=0;return null!=st&&(a++,at=ye.offset=st),b=b||at<0||at>1,f=f||at<S,S=at,u.push(at),ye});b&&e.errors.push(function QH(){return new xe(3012,!1)}()),f&&e.errors.push(function YH(){return new xe(3200,!1)}());const N=n.steps.length;let H=0;a>0&&a<N?e.errors.push(function JH(){return new xe(3202,!1)}()):0==a&&(H=1/(N-1));const K=N-1,re=e.currentTime,ue=e.currentAnimateTimings,we=ue.duration;return D.forEach((De,ye)=>{const st=H>0?ye==K?1:H*ye:u[ye],at=st*we;e.currentTime=re+ue.delay+at,ue.duration=at,this._validateStyleAst(De,e),De.offset=st,i.styles.push(De)}),i}visitReference(n,e){return{type:8,animation:$s(this,Mg(n.animation),e),options:mh(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:mh(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:mh(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;const[a,u]=function NG(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(OG,"")),t=t.replace(/@\*/g,Ey).replace(/@\w+/g,e=>Ey+"-"+e.slice(1)).replace(/:animating/g,d1),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+a:a,Gs(e.collectedStyles,e.currentQuerySelector,new Map);const f=$s(this,Mg(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:f,originalSelector:n.selector,options:mh(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function eG(){return new xe(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:My(n.timings,e.errors,!0);return{type:12,animation:$s(this,Mg(n.animation),e),timings:i,options:null}}}class zG{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function mh(t){return t?(t=Eg(t)).params&&(t.params=function LG(t){return t?Eg(t):null}(t.params)):t={},t}function f1(t,n,e){return{duration:t,delay:n,easing:e}}function g1(t,n,e,i,r,a,u=null,f=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:a,totalTime:r+a,easing:u,subTimeline:f}}class Ry{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const HG=new RegExp(":enter","g"),$G=new RegExp(":leave","g");function _1(t,n,e,i,r,a=new Map,u=new Map,f,b,S=[]){return(new WG).buildKeyframes(t,n,e,i,r,a,u,f,b,S)}class WG{buildKeyframes(n,e,i,r,a,u,f,b,S,D=[]){S=S||new Ry;const N=new v1(n,e,S,r,a,D,[]);N.options=b;const H=b.delay?Yc(b.delay):0;N.currentTimeline.delayNextStep(H),N.currentTimeline.setStyles([u],null,N.errors,b),$s(this,i,N);const K=N.timelines.filter(re=>re.containsAnimation());if(K.length&&f.size){let re;for(let ue=K.length-1;ue>=0;ue--){const we=K[ue];if(we.element===e){re=we;break}}re&&!re.allowOnlyTimelineStyles()&&re.setStyles([f],null,N.errors,b)}return K.length?K.map(re=>re.buildKeyframes()):[g1(e,[],[],[],0,H,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(n.options),a=e.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);a!=u&&e.transformIntoNewTimeline(u)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const r of n){const a=r?.delay;if(a){const u="number"==typeof a?a:Yc(Dg(a,r?.params??{},e.errors));i.delayNextStep(u)}}}_visitSubInstructions(n,e,i){let a=e.currentTimeline.currentTime;const u=null!=i.duration?Yc(i.duration):null,f=null!=i.delay?Yc(i.delay):null;return 0!==u&&n.forEach(b=>{const S=e.appendInstructionToTimeline(b,u,f);a=Math.max(a,S.duration+S.delay)}),a}visitReference(n,e){e.updateOptions(n.options,!0),$s(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let r=e;const a=n.options;if(a&&(a.params||a.delay)&&(r=e.createSubContext(a),r.transformIntoNewTimeline(),null!=a.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Oy);const u=Yc(a.delay);r.delayNextStep(u)}n.steps.length&&(n.steps.forEach(u=>$s(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let r=e.currentTimeline.currentTime;const a=n.options&&n.options.delay?Yc(n.options.delay):0;n.steps.forEach(u=>{const f=e.createSubContext(n.options);a&&f.delayNextStep(a),$s(this,u,f),r=Math.max(r,f.currentTimeline.currentTime),i.push(f.currentTimeline)}),i.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return My(e.params?Dg(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const a=n.style;5==a.type?this.visitKeyframes(a,e):(e.incrementTime(i.duration),this.visitStyle(a,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const a=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(a):i.setStyles(n.styles,a,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,a=i.duration,f=e.createSubContext().currentTimeline;f.easing=i.easing,n.styles.forEach(b=>{f.forwardTime((b.offset||0)*a),f.setStyles(b.styles,b.easing,e.errors,e.options),f.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(f),e.transformIntoNewTimeline(r+a),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,r=n.options||{},a=r.delay?Yc(r.delay):0;a&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Oy);let u=i;const f=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=f.length;let b=null;f.forEach((S,D)=>{e.currentQueryIndex=D;const N=e.createSubContext(n.options,S);a&&N.delayNextStep(a),S===e.element&&(b=N.currentTimeline),$s(this,n.animation,N),N.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,N.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),b&&(e.currentTimeline.mergeTimelineCollectedStyles(b),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,r=e.currentTimeline,a=n.timings,u=Math.abs(a.duration),f=u*(e.currentQueryTotal-1);let b=u*e.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":b=f-b;break;case"full":b=i.currentStaggerTime}const D=e.currentTimeline;b&&D.delayNextStep(b);const N=D.currentTime;$s(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-N+(r.startTime-i.currentTimeline.startTime)}}const Oy={};class v1{constructor(n,e,i,r,a,u,f,b){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=a,this.errors=u,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Oy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=b||new Fy(this._driver,e,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let r=this.options;null!=i.duration&&(r.duration=Yc(i.duration)),null!=i.delay&&(r.delay=Yc(i.delay));const a=i.params;if(a){let u=r.params;u||(u=this.options.params={}),Object.keys(a).forEach(f=>{(!e||!u.hasOwnProperty(f))&&(u[f]=Dg(a[f],u,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){const r=e||this.element,a=new v1(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(n),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(n){return this.previousNode=Oy,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},a=new qG(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,a,u){let f=[];if(r&&f.push(this.element),n.length>0){n=(n=n.replace(HG,"."+this._enterClassName)).replace($G,"."+this._leaveClassName);let S=this._driver.query(this.element,n,1!=i);0!==i&&(S=i<0?S.slice(S.length+i,S.length):S.slice(0,i)),f.push(...S)}return!a&&0==f.length&&u.push(function tG(t){return new xe(3014,!1)}()),f}}class Fy{constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new Fy(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Xc),this._currentKeyframe.set(e,Xc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);const a=r&&r.params||{},u=function ZG(t,n){const e=new Map;let i;return t.forEach(r=>{if("*"===r){i=i||n.keys();for(let a of i)e.set(a,Xc)}else Qd(r,e)}),e}(n,this._globalTimelineStyles);for(let[f,b]of u){const S=Dg(b,a,i);this._pendingStyles.set(f,S),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??Xc),this._updateStyle(f,S)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((f,b)=>{const S=Qd(f,new Map,this._backFill);S.forEach((D,N)=>{"!"===D?n.add(N):D===Xc&&e.add(N)}),i||S.set("offset",b/this.duration),r.push(S)});const a=n.size?Dy(n.values()):[],u=e.size?Dy(e.values()):[];if(i){const f=r[0],b=new Map(f);f.set("offset",0),b.set("offset",1),r=[f,b]}return g1(this.element,r,a,u,this.duration,this.startTime,this.easing,!1)}}class qG extends Fy{constructor(n,e,i,r,a,u,f=!1){super(n,e,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const a=[],u=i+e,f=e/u,b=Qd(n[0]);b.set("offset",0),a.push(b);const S=Qd(n[0]);S.set("offset",c2(f)),a.push(S);const D=n.length-1;for(let N=1;N<=D;N++){let H=Qd(n[N]);const K=H.get("offset");H.set("offset",c2((e+K*i)/u)),a.push(H)}i=u,e=0,r="",n=a}return g1(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function c2(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}class y1{}const KG=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class XG extends y1{normalizePropertyName(n,e){return p1(n)}normalizeStyleValue(n,e,i,r){let a="";const u=i.toString().trim();if(KG.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)a="px";else{const f=i.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&r.push(function GH(t,n){return new xe(3005,!1)}())}return u+a}}function d2(t,n,e,i,r,a,u,f,b,S,D,N,H){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:a,toState:i,toStyles:u,timelines:f,queriedElements:b,preStyleProps:S,postStyleProps:D,totalTime:N,errors:H}}const b1={};class u2{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return function QG(t,n,e,i,r){return t.some(a=>a(n,e,i,r))}(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return void 0!==n&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,a,u,f,b,S,D){const N=[],H=this.ast.options&&this.ast.options.params||b1,re=this.buildStyles(i,f&&f.params||b1,N),ue=b&&b.params||b1,we=this.buildStyles(r,ue,N),De=new Set,ye=new Map,st=new Map,at="void"===r,jt={params:YG(ue,H),delay:this.ast.options?.delay},ti=D?[]:_1(n,e,this.ast.animation,a,u,re,we,jt,S,N);let fi=0;if(ti.forEach(Ws=>{fi=Math.max(Ws.duration+Ws.delay,fi)}),N.length)return d2(e,this._triggerName,i,r,at,re,we,[],[],ye,st,fi,N);ti.forEach(Ws=>{const hl=Ws.element,By=Gs(ye,hl,new Set);Ws.preStyleProps.forEach(fh=>By.add(fh));const Ag=Gs(st,hl,new Set);Ws.postStyleProps.forEach(fh=>Ag.add(fh)),hl!==e&&De.add(hl)});const ao=Dy(De.values());return d2(e,this._triggerName,i,r,at,re,we,ti,ao,ye,st,fi)}}function YG(t,n){const e=Eg(n);for(const i in t)t.hasOwnProperty(i)&&null!=t[i]&&(e[i]=t[i]);return e}class JG{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,r=Eg(this.defaultParams);return Object.keys(n).forEach(a=>{const u=n[a];null!==u&&(r[a]=u)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,f)=>{u&&(u=Dg(u,r,e));const b=this.normalizer.normalizePropertyName(f,e);u=this.normalizer.normalizeStyleValue(f,b,u,e),i.set(f,u)})}),i}}class t7{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new JG(r.style,r.options&&r.options.params||{},i))}),h2(this.states,"true","1"),h2(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new u2(n,r,this.states))}),this.fallbackTransition=function n7(t,n,e){return new u2(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,f)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(u=>u.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function h2(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const i7=new Ry;class r7{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],a=m1(this._driver,e,i,[]);if(i.length)throw function lG(t){return new xe(3503,!1)}();this._animations.set(n,a)}_buildPlayer(n,e,i){const r=n.element,a=qA(this._normalizer,n.keyframes,e,i);return this._driver.animate(r,a,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const r=[],a=this._animations.get(n);let u;const f=new Map;if(a?(u=_1(this._driver,e,a,c1,Ty,new Map,new Map,i,i7,r),u.forEach(D=>{const N=Gs(f,D.element,new Map);D.postStyleProps.forEach(H=>N.set(H,null))})):(r.push(function cG(){return new xe(3300,!1)}()),u=[]),r.length)throw function dG(t){return new xe(3504,!1)}();f.forEach((D,N)=>{D.forEach((H,K)=>{D.set(K,this._driver.computeStyle(N,K,Xc))})});const S=Xd(u.map(D=>{const N=f.get(D.element);return this._buildPlayer(D,new Map,N)}));return this._playersById.set(n,S),S.onDestroy(()=>this.destroy(n)),this.players.push(S),S}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function uG(t){return new xe(3301,!1)}();return e}listen(n,e,i,r){const a=s1(e,"","","");return r1(this._getPlayer(n),i,a,r),()=>{}}command(n,e,i,r){if("register"==i)return void this.register(n,r[0]);if("create"==i)return void this.create(n,e,r[0]||{});const a=this._getPlayer(n);switch(i){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n)}}}const p2="ng-animate-queued",x1="ng-animate-disabled",c7=[],m2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},d7={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ul="__ng_removed";class w1{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function m7(t){return t??null}(i?n.value:n),i){const a=Eg(n);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Ig="void",S1=new w1(Ig);class u7{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,ba(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw function hG(t,n){return new xe(3302,!1)}();if(null==i||0==i.length)throw function pG(t){return new xe(3303,!1)}();if(!function f7(t){return"start"==t||"done"==t}(i))throw function mG(t,n){return new xe(3400,!1)}();const a=Gs(this._elementListeners,n,[]),u={name:e,phase:i,callback:r};a.push(u);const f=Gs(this._engine.statesByElement,n,new Map);return f.has(e)||(ba(n,ky),ba(n,ky+"-"+e),f.set(e,S1)),()=>{this._engine.afterFlush(()=>{const b=a.indexOf(u);b>=0&&a.splice(b,1),this._triggers.has(e)||f.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function fG(t){return new xe(3401,!1)}();return e}trigger(n,e,i,r=!0){const a=this._getTrigger(e),u=new C1(this.id,e,n);let f=this._engine.statesByElement.get(n);f||(ba(n,ky),ba(n,ky+"-"+e),this._engine.statesByElement.set(n,f=new Map));let b=f.get(e);const S=new w1(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&b&&S.absorbOptions(b.options),f.set(e,S),b||(b=S1),S.value!==Ig&&b.value===S.value){if(!function v7(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const a=e[r];if(!n.hasOwnProperty(a)||t[a]!==n[a])return!1}return!0}(b.params,S.params)){const ue=[],we=a.matchStyles(b.value,b.params,ue),De=a.matchStyles(S.value,S.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{ph(n,we),Yl(n,De)})}return}const H=Gs(this._engine.playersByElement,n,[]);H.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==e&&ue.queued&&ue.destroy()});let K=a.matchTransition(b.value,S.value,n,S.params),re=!1;if(!K){if(!r)return;K=a.fallbackTransition,re=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:K,fromState:b,toState:S,player:u,isFallbackTransition:re}),re||(ba(n,p2),u.onStart(()=>{am(n,p2)})),u.onDone(()=>{let ue=this.players.indexOf(u);ue>=0&&this.players.splice(ue,1);const we=this._engine.playersByElement.get(n);if(we){let De=we.indexOf(u);De>=0&&we.splice(De,1)}}),this.players.push(u),H.push(u),u}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,Ey,!0);i.forEach(r=>{if(r[ul])return;const a=this._engine.fetchNamespacesByElement(r);a.size?a.forEach(u=>u.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){const a=this._engine.statesByElement.get(n),u=new Map;if(a){const f=[];if(a.forEach((b,S)=>{if(u.set(S,b.value),this._triggers.has(S)){const D=this.trigger(n,S,Ig,r);D&&f.push(D)}}),f.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,u),i&&Xd(f).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const r=new Set;e.forEach(a=>{const u=a.name;if(r.has(u))return;r.add(u);const b=this._triggers.get(u).fallbackTransition,S=i.get(u)||S1,D=new w1(Ig),N=new C1(this.id,u,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:u,transition:b,fromState:S,toState:D,player:N,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){const a=i.players.length?i.playersByQueriedElement.get(n):[];if(a&&a.length)r=!0;else{let u=n;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{const a=n[ul];(!a||a===m2)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){ba(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const a=i.element,u=this._elementListeners.get(a);u&&u.forEach(f=>{if(f.name==i.triggerName){const b=s1(a,i.triggerName,i.fromState.value,i.toState.value);b._data=n,r1(i.player,f.phase,b,f.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const a=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class h7{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,a)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new u7(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let u=!1,f=this.driver.getParentElement(e);for(;f;){const b=r.get(f);if(b){const S=i.indexOf(b);i.splice(S+1,0,n),u=!0;break}f=this.driver.getParentElement(f)}u||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let r of i.values())if(r.namespaceId){const a=this._fetchNamespace(r.namespaceId);a&&e.add(a)}return e}trigger(n,e,i,r){if(Ny(e)){const a=this._fetchNamespace(n);if(a)return a.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!Ny(e))return;const a=e[ul];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(n){const u=this._fetchNamespace(n);u&&u.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),ba(n,x1)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),am(n,x1))}removeNode(n,e,i){if(Ny(e)){const r=n?this._fetchNamespace(n):null;r?r.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);const a=this.namespacesByHostElement.get(e);a&&a.id!==n&&a.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,r,a){this.collectedLeaveElements.push(e),e[ul]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:a}}listen(n,e,i,r,a){return Ny(e)?this._fetchNamespace(n).listen(e,i,r,a):()=>{}}_buildInstruction(n,e,i,r,a){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,a)}destroyInnerAnimations(n){let e=this.driver.query(n,Ey,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,d1,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Xd(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[ul];if(e&&e.setForRemoval){if(n[ul]=m2,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(x1)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ba(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Xd(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw function gG(t){return new xe(3402,!1)}()}_flushAnimations(n,e){const i=new Ry,r=[],a=new Map,u=[],f=new Map,b=new Map,S=new Map,D=new Set;this.disabledNodes.forEach(pt=>{D.add(pt);const St=this.driver.query(pt,".ng-animate-queued",!0);for(let Rt=0;Rt<St.length;Rt++)D.add(St[Rt])});const N=this.bodyNode,H=Array.from(this.statesByElement.keys()),K=_2(H,this.collectedEnterElements),re=new Map;let ue=0;K.forEach((pt,St)=>{const Rt=c1+ue++;re.set(St,Rt),pt.forEach(kn=>ba(kn,Rt))});const we=[],De=new Set,ye=new Set;for(let pt=0;pt<this.collectedLeaveElements.length;pt++){const St=this.collectedLeaveElements[pt],Rt=St[ul];Rt&&Rt.setForRemoval&&(we.push(St),De.add(St),Rt.hasAnimation?this.driver.query(St,".ng-star-inserted",!0).forEach(kn=>De.add(kn)):ye.add(St))}const st=new Map,at=_2(H,Array.from(De));at.forEach((pt,St)=>{const Rt=Ty+ue++;st.set(St,Rt),pt.forEach(kn=>ba(kn,Rt))}),n.push(()=>{K.forEach((pt,St)=>{const Rt=re.get(St);pt.forEach(kn=>am(kn,Rt))}),at.forEach((pt,St)=>{const Rt=st.get(St);pt.forEach(kn=>am(kn,Rt))}),we.forEach(pt=>{this.processLeaveNode(pt)})});const jt=[],ti=[];for(let pt=this._namespaceList.length-1;pt>=0;pt--)this._namespaceList[pt].drainQueuedTransitions(e).forEach(Rt=>{const kn=Rt.player,Kr=Rt.element;if(jt.push(kn),this.collectedEnterElements.length){const ko=Kr[ul];if(ko&&ko.setForMove){if(ko.previousTriggersValues&&ko.previousTriggersValues.has(Rt.triggerName)){const gh=ko.previousTriggersValues.get(Rt.triggerName),xa=this.statesByElement.get(Rt.element);if(xa&&xa.has(Rt.triggerName)){const Vy=xa.get(Rt.triggerName);Vy.value=gh,xa.set(Rt.triggerName,Vy)}}return void kn.destroy()}}const Jl=!N||!this.driver.containsElement(N,Kr),qs=st.get(Kr),Yd=re.get(Kr),Bi=this._buildInstruction(Rt,i,Yd,qs,Jl);if(Bi.errors&&Bi.errors.length)return void ti.push(Bi);if(Jl)return kn.onStart(()=>ph(Kr,Bi.fromStyles)),kn.onDestroy(()=>Yl(Kr,Bi.toStyles)),void r.push(kn);if(Rt.isFallbackTransition)return kn.onStart(()=>ph(Kr,Bi.fromStyles)),kn.onDestroy(()=>Yl(Kr,Bi.toStyles)),void r.push(kn);const M2=[];Bi.timelines.forEach(ko=>{ko.stretchStartingKeyframe=!0,this.disabledNodes.has(ko.element)||M2.push(ko)}),Bi.timelines=M2,i.append(Kr,Bi.timelines),u.push({instruction:Bi,player:kn,element:Kr}),Bi.queriedElements.forEach(ko=>Gs(f,ko,[]).push(kn)),Bi.preStyleProps.forEach((ko,gh)=>{if(ko.size){let xa=b.get(gh);xa||b.set(gh,xa=new Set),ko.forEach((Vy,E1)=>xa.add(E1))}}),Bi.postStyleProps.forEach((ko,gh)=>{let xa=S.get(gh);xa||S.set(gh,xa=new Set),ko.forEach((Vy,E1)=>xa.add(E1))})});if(ti.length){const pt=[];ti.forEach(St=>{pt.push(function _G(t,n){return new xe(3505,!1)}())}),jt.forEach(St=>St.destroy()),this.reportError(pt)}const fi=new Map,ao=new Map;u.forEach(pt=>{const St=pt.element;i.has(St)&&(ao.set(St,St),this._beforeAnimationBuild(pt.player.namespaceId,pt.instruction,fi))}),r.forEach(pt=>{const St=pt.element;this._getPreviousPlayers(St,!1,pt.namespaceId,pt.triggerName,null).forEach(kn=>{Gs(fi,St,[]).push(kn),kn.destroy()})});const Ws=we.filter(pt=>y2(pt,b,S)),hl=new Map;g2(hl,this.driver,ye,S,Xc).forEach(pt=>{y2(pt,b,S)&&Ws.push(pt)});const Ag=new Map;K.forEach((pt,St)=>{g2(Ag,this.driver,new Set(pt),b,"!")}),Ws.forEach(pt=>{const St=hl.get(pt),Rt=Ag.get(pt);hl.set(pt,new Map([...St?.entries()??[],...Rt?.entries()??[]]))});const fh=[],k2=[],E2={};u.forEach(pt=>{const{element:St,player:Rt,instruction:kn}=pt;if(i.has(St)){if(D.has(St))return Rt.onDestroy(()=>Yl(St,kn.toStyles)),Rt.disabled=!0,Rt.overrideTotalTime(kn.totalTime),void r.push(Rt);let Kr=E2;if(ao.size>1){let qs=St;const Yd=[];for(;qs=qs.parentNode;){const Bi=ao.get(qs);if(Bi){Kr=Bi;break}Yd.push(qs)}Yd.forEach(Bi=>ao.set(Bi,Kr))}const Jl=this._buildAnimation(Rt.namespaceId,kn,fi,a,Ag,hl);if(Rt.setRealPlayer(Jl),Kr===E2)fh.push(Rt);else{const qs=this.playersByElement.get(Kr);qs&&qs.length&&(Rt.parentPlayer=Xd(qs)),r.push(Rt)}}else ph(St,kn.fromStyles),Rt.onDestroy(()=>Yl(St,kn.toStyles)),k2.push(Rt),D.has(St)&&r.push(Rt)}),k2.forEach(pt=>{const St=a.get(pt.element);if(St&&St.length){const Rt=Xd(St);pt.setRealPlayer(Rt)}}),r.forEach(pt=>{pt.parentPlayer?pt.syncPlayerEvents(pt.parentPlayer):pt.destroy()});for(let pt=0;pt<we.length;pt++){const St=we[pt],Rt=St[ul];if(am(St,Ty),Rt&&Rt.hasAnimation)continue;let kn=[];if(f.size){let Jl=f.get(St);Jl&&Jl.length&&kn.push(...Jl);let qs=this.driver.query(St,d1,!0);for(let Yd=0;Yd<qs.length;Yd++){let Bi=f.get(qs[Yd]);Bi&&Bi.length&&kn.push(...Bi)}}const Kr=kn.filter(Jl=>!Jl.destroyed);Kr.length?g7(this,St,Kr):this.processLeaveNode(St)}return we.length=0,fh.forEach(pt=>{this.players.push(pt),pt.onDone(()=>{pt.destroy();const St=this.players.indexOf(pt);this.players.splice(St,1)}),pt.play()}),fh}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,a){let u=[];if(e){const f=this.playersByQueriedElement.get(n);f&&(u=f)}else{const f=this.playersByElement.get(n);if(f){const b=!a||a==Ig;f.forEach(S=>{S.queued||!b&&S.triggerName!=r||u.push(S)})}}return(i||r)&&(u=u.filter(f=>!(i&&i!=f.namespaceId||r&&r!=f.triggerName))),u}_beforeAnimationBuild(n,e,i){const a=e.element,u=e.isRemovalTransition?void 0:n,f=e.isRemovalTransition?void 0:e.triggerName;for(const b of e.timelines){const S=b.element,D=S!==a,N=Gs(i,S,[]);this._getPreviousPlayers(S,D,u,f,e.toState).forEach(K=>{const re=K.getRealPlayer();re.beforeDestroy&&re.beforeDestroy(),K.destroy(),N.push(K)})}ph(a,e.fromStyles)}_buildAnimation(n,e,i,r,a,u){const f=e.triggerName,b=e.element,S=[],D=new Set,N=new Set,H=e.timelines.map(re=>{const ue=re.element;D.add(ue);const we=ue[ul];if(we&&we.removedBeforeQueried)return new vg(re.duration,re.delay);const De=ue!==b,ye=function _7(t){const n=[];return v2(t,n),n}((i.get(ue)||c7).map(fi=>fi.getRealPlayer())).filter(fi=>!!fi.element&&fi.element===ue),st=a.get(ue),at=u.get(ue),jt=qA(this._normalizer,re.keyframes,st,at),ti=this._buildPlayer(re,jt,ye);if(re.subTimeline&&r&&N.add(ue),De){const fi=new C1(n,f,ue);fi.setRealPlayer(ti),S.push(fi)}return ti});S.forEach(re=>{Gs(this.playersByQueriedElement,re.element,[]).push(re),re.onDone(()=>function p7(t,n,e){let i=t.get(n);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,re.element,re))}),D.forEach(re=>ba(re,e2));const K=Xd(H);return K.onDestroy(()=>{D.forEach(re=>am(re,e2)),Yl(b,e.toStyles)}),N.forEach(re=>{Gs(r,re,[]).push(K)}),K}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new vg(n.duration,n.delay)}}class C1{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new vg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>r1(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Gs(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function Ny(t){return t&&1===t.nodeType}function f2(t,n){const e=t.style.display;return t.style.display=n??"none",e}function g2(t,n,e,i,r){const a=[];e.forEach(b=>a.push(f2(b)));const u=[];i.forEach((b,S)=>{const D=new Map;b.forEach(N=>{const H=n.computeStyle(S,N,r);D.set(N,H),(!H||0==H.length)&&(S[ul]=d7,u.push(S))}),t.set(S,D)});let f=0;return e.forEach(b=>f2(b,a[f++])),u}function _2(t,n){const e=new Map;if(t.forEach(f=>e.set(f,[])),0==n.length)return e;const r=new Set(n),a=new Map;function u(f){if(!f)return 1;let b=a.get(f);if(b)return b;const S=f.parentNode;return b=e.has(S)?S:r.has(S)?1:u(S),a.set(f,b),b}return n.forEach(f=>{const b=u(f);1!==b&&e.get(b).push(f)}),e}function ba(t,n){t.classList?.add(n)}function am(t,n){t.classList?.remove(n)}function g7(t,n,e){Xd(e).onDone(()=>t.processLeaveNode(n))}function v2(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof aI?v2(i.players,n):n.push(i)}}function y2(t,n,e){const i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(a=>r.add(a)):n.set(t,i),e.delete(t),!0}class Ly{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,a)=>{},this._transitionEngine=new h7(n,e,i),this._timelineEngine=new r7(n,e,i),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(n,e,i,r,a){const u=n+"-"+r;let f=this._triggerCache[u];if(!f){const b=[],D=m1(this._driver,a,b,[]);if(b.length)throw function sG(t,n){return new xe(3404,!1)}();f=function e7(t,n,e){return new t7(t,n,e)}(r,D,this._normalizer),this._triggerCache[u]=f}this._transitionEngine.registerTrigger(e,r,f)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if("@"==i.charAt(0)){const[a,u]=ZA(i);this._timelineEngine.command(a,e,u,r)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,a){if("@"==i.charAt(0)){const[u,f]=ZA(i);return this._timelineEngine.listen(u,e,f,a)}return this._transitionEngine.listen(n,e,i,r,a)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let b7=(()=>{class t{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let a=t.initialStylesByElement.get(e);a||t.initialStylesByElement.set(e,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Yl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Yl(this._element,this._initialStyles),this._endStyles&&(Yl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(ph(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ph(this._element,this._endStyles),this._endStyles=null),Yl(this._element,this._initialStyles),this._state=3)}}return t})();function T1(t){let n=null;return t.forEach((e,i)=>{(function x7(t){return"display"===t||"position"===t})(i)&&(n=n||new Map,n.set(i,e))}),n}class b2{constructor(n,e,i,r){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&n.set(r,this._finished?i:o2(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class w7{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return XA(n,e)}getParentElement(n){return a1(n)}query(n,e,i){return QA(n,e,i)}computeStyle(n,e,i){return window.getComputedStyle(n)[e]}animate(n,e,i,r,a,u=[]){const b={duration:i,delay:r,fill:0==r?"both":"forwards"};a&&(b.easing=a);const S=new Map,D=u.filter(K=>K instanceof b2);(function DG(t,n){return 0===t||0===n})(i,r)&&D.forEach(K=>{K.currentSnapshot.forEach((re,ue)=>S.set(ue,re))});let N=function kG(t){return t.length?t[0]instanceof Map?t:t.map(n=>t2(n)):[]}(e).map(K=>Qd(K));N=function IG(t,n,e){if(e.size&&n.length){let i=n[0],r=[];if(e.forEach((a,u)=>{i.has(u)||r.push(u),i.set(u,a)}),r.length)for(let a=1;a<n.length;a++){let u=n[a];r.forEach(f=>u.set(f,o2(t,f)))}}return n}(n,N,S);const H=function y7(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=T1(n[0]),n.length>1&&(i=T1(n[n.length-1]))):n instanceof Map&&(e=T1(n)),e||i?new b7(t,e,i):null}(n,N);return new b2(n,N,b,H)}}let S7=(()=>{class t extends nI{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:eo.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?rI(e):e;return x2(this._renderer,null,i,"register",[r]),new C7(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(bf),Oe(Un))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();class C7 extends N6{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new T7(this._id,n,e||{},this._renderer)}}class T7{constructor(n,e,i,r){this.id=n,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return x2(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function x2(t,n,e,i,r){return t.setProperty(n,`@@${e}:${i}`,r)}const w2="@.disabled";let k7=(()=>{class t{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(a,u)=>{const f=u?.parentNode(a);f&&u.removeChild(f,a)}}createRenderer(e,i){const a=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let D=this._rendererCache.get(a);return D||(D=new S2("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,D)),D}const u=i.id,f=i.id+"-"+this._currentId;this._currentId++,this.engine.register(f,e);const b=D=>{Array.isArray(D)?D.forEach(b):this.engine.registerTrigger(u,f,e,D.name,D)};return i.data.animation.forEach(b),new E7(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,f]=a;u(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(bf),Oe(Ly),Oe(Pt))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})();class S2{constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==w2?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class E7 extends S2{constructor(n,e,i,r,a){super(e,i,r,a),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==w2?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const r=function M7(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let a=e.slice(1),u="";return"@"!=a.charAt(0)&&([a,u]=function D7(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(a)),this.engine.listen(this.namespaceId,r,a,u,f=>{this.factory.scheduleListenerCallback(f._data||-1,i,f)})}return this.delegate.listen(n,e,i)}}const C2=[{provide:nI,useClass:S7},{provide:y1,useFactory:function A7(){return new XG}},{provide:Ly,useClass:(()=>{class t extends Ly{constructor(e,i,r,a){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||t)(Oe(Un),Oe(l1),Oe(y1),Oe(eh))};static#t=this.\u0275prov=Ze({token:t,factory:t.\u0275fac})}return t})()},{provide:bf,useFactory:function P7(t,n,e){return new k7(t,n,e)},deps:[Px,Ly,Pt]}],k1=[{provide:l1,useFactory:()=>new w7},{provide:Gl,useValue:"BrowserAnimations"},...C2],T2=[{provide:l1,useClass:YA},{provide:Gl,useValue:"NoopAnimations"},...C2];let R7=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?T2:k1}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=Dn({providers:k1,imports:[XE]})}return t})(),O7=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Vn({type:t,bootstrap:[zH]});static#n=this.\u0275inj=Dn({imports:[XE,LH,e5,R7,p6,W6,P8,z8,_H,kH]})}return t})();BB().bootstrapModule(O7).catch(t=>console.error(t))},624:function(lm){lm.exports=function(){"use strict";var Jc,ed,tn;function Jd(_,En){if(Jc)if(ed){var be="var sharedChunk = {}; ("+Jc+")(sharedChunk); ("+ed+")(sharedChunk);",Eo={};Jc(Eo),tn=En(Eo),typeof window<"u"&&(tn.workerUrl=window.URL.createObjectURL(new Blob([be],{type:"text/javascript"})))}else ed=En;else Jc=En}return Jd(0,function(_){function En(l,o,c,h){return new(c||(c=Promise))(function(m,y){function w(I){try{E(h.next(I))}catch(P){y(P)}}function C(I){try{E(h.throw(I))}catch(P){y(P)}}function E(I){var P;I.done?m(I.value):(P=I.value,P instanceof c?P:new c(function(F){F(P)})).then(w,C)}E((h=h.apply(l,o||[])).next())})}function be(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}"function"==typeof SuppressedError&&SuppressedError;var Eo=xr;function xr(l,o){this.x=l,this.y=o}xr.prototype={clone:function(){return new xr(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,o){return this.clone()._rotateAround(l,o)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var o=l.x-this.x,c=l.y-this.y;return o*o+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,o){return Math.atan2(this.x*o-this.y*l,this.x*l+this.y*o)},_matMult:function(l){var o=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=o,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var o=Math.cos(l),c=Math.sin(l),h=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=h,this},_rotateAround:function(l,o){var c=Math.cos(l),h=Math.sin(l),m=o.y+h*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-h*(this.y-o.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},xr.convert=function(l){return l instanceof xr?l:Array.isArray(l)?new xr(l[0],l[1]):l};var ct=be(Eo),vs=pl;function pl(l,o,c,h){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(h-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=o,this.p2x=c,this.p2y=h}pl.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,o){if(void 0===o&&(o=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,h=0;h<8;h++){var m=this.sampleCurveX(c)-l;if(Math.abs(m)<o)return c;var y=this.sampleCurveDerivativeX(c);if(Math.abs(y)<1e-6)break;c-=m/y}var w=0,C=1;for(c=l,h=0;h<20&&(m=this.sampleCurveX(c),!(Math.abs(m-l)<o));h++)l>m?w=c:C=c,c=.5*(C-w)+w;return c},solve:function(l,o){return this.sampleCurveY(this.solveCurveX(l,o))}};var Zs=be(vs);let wr,xi;function td(){return null==wr&&(wr=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),wr}function Qo(){if(null==xi&&(xi=!1,td())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let h=0;h<25;h++){const m=4*h;o.fillStyle=`rgb(${m},${m+1},${m+2})`,o.fillRect(h%5,Math.floor(h/5),1,1)}const c=o.getImageData(0,0,5,5).data;for(let h=0;h<100;h++)if(h%4!=3&&c[h]!==h){xi=!0;break}}}return xi||!1}function Mo(l,o,c,h){const m=new Zs(l,o,c,h);return function(y){return m.solve(y)}}const ys=Mo(.25,.1,.25,1);function Yo(l,o,c){return Math.min(c,Math.max(o,l))}function wa(l,o,c){const h=c-o,m=((l-o)%h+h)%h+o;return m===o?c:m}function $i(l,...o){for(const c of o)for(const h in c)l[h]=c[h];return l}let ml=1;function Zn(l,o,c){const h={};for(const m in l)h[m]=o.call(c||this,l[m],m,l);return h}function Jo(l,o,c){const h={};for(const m in l)o.call(c||this,l[m],m,l)&&(h[m]=l[m]);return h}function zr(l){return Array.isArray(l)?l.map(zr):"object"==typeof l&&l?Zn(l,zr):l}const Ks={};function Wi(l){Ks[l]||(typeof console<"u"&&console.warn(l),Ks[l]=!0)}function Xr(l,o,c){return(c.y-l.y)*(o.x-l.x)>(o.y-l.y)*(c.x-l.x)}function Do(l){let o=0;for(let c,h,m=0,y=l.length,w=y-1;m<y;w=m++)c=l[m],h=l[w],o+=(h.x-c.x)*(c.y+h.y);return o}function Di(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Sa=null;function fl(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const yn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function gl(l,o,c,h,m){return En(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(l,{timestamp:0});try{const w=y?.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const C=w.startsWith("BGR"),E=new Uint8ClampedArray(h*m*4);if(yield y.copyTo(E,function(I,P,F,z,j){const U=4*Math.max(-P,0),W=(Math.max(0,F)-F)*z*4+U,J=4*z,ne=Math.max(0,P),le=Math.max(0,F);return{rect:{x:ne,y:le,width:Math.min(I.width,P+z)-ne,height:Math.min(I.height,F+j)-le},layout:[{offset:W,stride:J}]}}(l,o,c,h,m)),C)for(let I=0;I<E.length;I+=4){const P=E[I];E[I]=E[I+2],E[I+2]=P}return E}finally{y.close()}})}let es,Nn,Br,Zt;const Ca={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(l){const o=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(l,o=0){return this.getImageCanvasContext(l).getImageData(-o,-o,l.width+2*o,l.height+2*o)},getImageCanvasContext(l){const o=window.document.createElement("canvas"),c=o.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return o.width=l.width,o.height=l.height,c.drawImage(l,0,0,l.width,l.height),c},resolveURL:l=>(Br||(Br=document.createElement("a")),Br.href=l,Br.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Zt&&(Zt=matchMedia("(prefers-reduced-motion: reduce)")),Zt.matches)}},Ta={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Mn extends Error{constructor(o,c,h,m){super(`AJAXError: ${c} (${o}): ${h}`),this.status=o,this.statusText=c,this.url=h,this.body=m}}const sn=Di()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,lo=l=>Ta.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))];function It(l,o){const c=new AbortController,h=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:sn(),signal:c.signal});let m=!1,y=!1;return"json"===l.type&&h.headers.set("Accept","application/json"),y||fetch(h).then(w=>{return w.ok?(C=w,void("arrayBuffer"===l.type||"image"===l.type?C.arrayBuffer():"json"===l.type?C.json():C.text()).then(E=>{y||(m=!0,o(null,E,C.headers.get("Cache-Control"),C.headers.get("Expires")))}).catch(E=>{y||o(new Error(E.message))})):w.blob().then(C=>o(new Mn(w.status,w.statusText,l.url,C)));var C}).catch(w=>{20!==w.code&&o(new Error(w.message))}),{cancel:()=>{y=!0,m||c.abort()}}}const ts=function(l,o){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){if(Di()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,o);if(!Di())return(lo(l.url)||It)(l,o)}if(!(/^file:/.test(c=l.url)||/^file:/.test(sn())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return It(l,o);if(Di()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,o,void 0,!0)}var c;return function(h,m){const y=new XMLHttpRequest;y.open(h.method||"GET",h.url,!0),"arrayBuffer"!==h.type&&"image"!==h.type||(y.responseType="arraybuffer");for(const w in h.headers)y.setRequestHeader(w,h.headers[w]);return"json"===h.type&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials="include"===h.credentials,y.onerror=()=>{m(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||0===y.status)&&null!==y.response){let w=y.response;if("json"===h.type)try{w=JSON.parse(y.response)}catch(C){return m(C)}m(null,w,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else{const w=new Blob([y.response],{type:y.getResponseHeader("Content-Type")});m(new Mn(y.status,y.statusText,h.url,w))}},y.send(h.body),{cancel:()=>y.abort()}}(l,o)},ec=function(l,o){return ts($i(l,{type:"arrayBuffer"}),o)};function Io(l){if(!l||l.indexOf("://")<=0||0===l.indexOf("data:image/")||0===l.indexOf("blob:"))return!0;const o=new URL(l),c=window.location;return o.protocol===c.protocol&&o.host===c.host}function _l(l,o,c){c[l]&&-1!==c[l].indexOf(o)||(c[l]=c[l]||[],c[l].push(o))}function ka(l,o,c){if(c&&c[l]){const h=c[l].indexOf(o);-1!==h&&c[l].splice(h,1)}}class Xs{constructor(o,c={}){$i(this,c),this.type=o}}class Ea extends Xs{constructor(o,c={}){super("error",$i({error:o},c))}}class vl{on(o,c){return this._listeners=this._listeners||{},_l(o,c,this._listeners),this}off(o,c){return ka(o,c,this._listeners),ka(o,c,this._oneTimeListeners),this}once(o,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},_l(o,c,this._oneTimeListeners),this):new Promise(h=>this.once(o,h))}fire(o,c){"string"==typeof o&&(o=new Xs(o,c||{}));const h=o.type;if(this.listens(h)){o.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const C of m)C.call(this,o);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const C of y)ka(h,C,this._oneTimeListeners),C.call(this,o);const w=this._eventedParent;w&&($i(o,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof Ea&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,c){return this._eventedParent=o,this._eventedParentData=c,this}}var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Qr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function co(l,o){const c={};for(const h in l)"ref"!==h&&(c[h]=l[h]);return Qr.forEach(h=>{h in o&&(c[h]=o[h])}),c}function bn(l,o){if(Array.isArray(l)){if(!Array.isArray(o)||l.length!==o.length)return!1;for(let c=0;c<l.length;c++)if(!bn(l[c],o[c]))return!1;return!0}if("object"==typeof l&&null!==l&&null!==o){if("object"!=typeof o||Object.keys(l).length!==Object.keys(o).length)return!1;for(const c in l)if(!bn(l[c],o[c]))return!1;return!0}return l===o}const nn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function uo(l,o,c){c.push({command:nn.addSource,args:[l,o[l]]})}function yl(l,o,c){o.push({command:nn.removeSource,args:[l]}),c[l]=!0}function Ao(l,o,c,h){yl(l,c,h),uo(l,o,c)}function tc(l,o,c){let h;for(h in l[c])if(Object.prototype.hasOwnProperty.call(l[c],h)&&"data"!==h&&!bn(l[c][h],o[c][h]))return!1;for(h in o[c])if(Object.prototype.hasOwnProperty.call(o[c],h)&&"data"!==h&&!bn(l[c][h],o[c][h]))return!1;return!0}function bl(l,o,c,h,m,y){let w;for(w in o=o||{},l=l||{})Object.prototype.hasOwnProperty.call(l,w)&&(bn(l[w],o[w])||c.push({command:y,args:[h,w,o[w],m]}));for(w in o)Object.prototype.hasOwnProperty.call(o,w)&&!Object.prototype.hasOwnProperty.call(l,w)&&(bn(l[w],o[w])||c.push({command:y,args:[h,w,o[w],m]}))}function Qs(l){return l.id}function Ma(l,o){return l[o.id]=o,l}class Fe{constructor(o,c,h,m){this.message=(o?`${o}: `:"")+h,m&&(this.identifier=m),null!=c&&c.__line__&&(this.line=c.__line__)}}function Po(l,...o){for(const c of o)for(const h in c)l[h]=c[h];return l}class ni extends Error{constructor(o,c){super(c),this.message=c,this.key=o}}class Ys{constructor(o,c=[]){this.parent=o,this.bindings={};for(const[h,m]of c)this.bindings[h]=m}concat(o){return new Ys(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const bs={kind:"null"},He={kind:"number"},Ot={kind:"string"},xt={kind:"boolean"},Sr={kind:"color"},ns={kind:"object"},Dt={kind:"value"},xs={kind:"collator"},X={kind:"formatted"},L={kind:"padding"},B={kind:"resolvedImage"},G={kind:"variableAnchorOffsetCollection"};function Y(l,o){return{kind:"array",itemType:l,N:o}}function ee(l){if("array"===l.kind){const o=ee(l.itemType);return"number"==typeof l.N?`array<${o}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${o}>`}return l.kind}const he=[bs,He,Ot,xt,Sr,X,ns,Y(Dt),L,B,G];function se(l,o){if("error"===o.kind)return null;if("array"===l.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!se(l.itemType,o.itemType))&&("number"!=typeof l.N||l.N===o.N))return null}else{if(l.kind===o.kind)return null;if("value"===l.kind)for(const c of he)if(!se(c,o))return null}return`Expected ${ee(l)} but found ${ee(o)} instead.`}function ie(l,o){return o.some(c=>c.kind===l.kind)}function ce(l,o){return o.some(c=>"null"===c?null===l:"array"===c?Array.isArray(l):"object"===c?l&&!Array.isArray(l)&&"object"==typeof l:c===typeof l)}function Ce(l,o){return"array"===l.kind&&"array"===o.kind?l.itemType.kind===o.itemType.kind&&"number"==typeof l.N:l.kind===o.kind}const Xe=4/29,_t=6/29,it=3*_t*_t,dt=_t*_t*_t,wt=Math.PI/180,an=180/Math.PI;function xn(l){return(l%=360)<0&&(l+=360),l}function Yt([l,o,c,h]){let m,y;const w=rr((.2225045*(l=At(l))+.7168786*(o=At(o))+.0606169*(c=At(c)))/1);l===o&&o===c?m=y=w:(m=rr((.4360747*l+.3850649*o+.1430804*c)/.96422),y=rr((.0139322*l+.0971045*o+.7141733*c)/.82521));const C=116*w-16;return[C<0?0:C,500*(m-w),200*(w-y),h]}function At(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function rr(l){return l>dt?Math.pow(l,1/3):l/it+Xe}function Ft([l,o,c,h]){let m=(l+16)/116,y=isNaN(o)?m:m+o/500,w=isNaN(c)?m:m-c/200;return m=1*Ln(m),y=.96422*Ln(y),w=.82521*Ln(w),[Hn(3.1338561*y-1.6168667*m-.4906146*w),Hn(-.9787684*y+1.9161415*m+.033454*w),Hn(.0719453*y-.2289914*m+1.4052427*w),h]}function Hn(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Ln(l){return l>_t?l*l*l:it*(l-Xe)}function Ro(l){return parseInt(l.padEnd(2,l),16)/255}function _h(l,o){return Da(o?l/100:l,0,1)}function Da(l,o,c){return Math.min(Math.max(o,l),c)}function Js(l){return!l.some(Number.isNaN)}const vh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class rn{constructor(o,c,h,m=1,y=!0){this.r=o,this.g=c,this.b=h,this.a=m,y||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[o,c,h,m]))}static parse(o){if(o instanceof rn)return o;if("string"!=typeof o)return;const c=function(h){if("transparent"===(h=h.toLowerCase().trim()))return[0,0,0,0];const m=vh[h];if(m){const[w,C,E]=m;return[w/255,C/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const w=h.length<6?1:2;let C=1;return[Ro(h.slice(C,C+=w)),Ro(h.slice(C,C+=w)),Ro(h.slice(C,C+=w)),Ro(h.slice(C,C+w)||"ff")]}if(h.startsWith("rgb")){const w=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[C,E,I,P,F,z,j,U,W,J,ne,le]=w,oe=[P||" ",j||" ",J].join("");if("  "===oe||"  /"===oe||",,"===oe||",,,"===oe){const pe=[I,z,W].join(""),ge="%%%"===pe?100:""===pe?255:0;if(ge){const Ee=[Da(+E/ge,0,1),Da(+F/ge,0,1),Da(+U/ge,0,1),ne?_h(+ne,le):1];if(Js(Ee))return Ee}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[w,C,E,I,P,F,z,j,U]=y,W=[E||" ",P||" ",z].join("");if("  "===W||"  /"===W||",,"===W||",,,"===W){const J=[+C,Da(+I,0,100),Da(+F,0,100),j?_h(+j,U):1];if(Js(J))return function([ne,le,oe,pe]){function ge(Ee){const We=(Ee+ne/30)%12,nt=le*Math.min(oe,1-oe);return oe-nt*Math.max(-1,Math.min(We-3,9-We,1))}return ne=xn(ne),le/=100,oe/=100,[ge(0),ge(8),ge(4),pe]}(J)}}}(o);return c?new rn(...c,!1):void 0}get rgb(){const{r:o,g:c,b:h,a:m}=this,y=m||1/0;return this.overwriteGetter("rgb",[o/y,c/y,h/y,m])}get hcl(){return this.overwriteGetter("hcl",function(o){const[c,h,m,y]=Yt(o),w=Math.sqrt(h*h+m*m);return[Math.round(1e4*w)?xn(Math.atan2(m,h)*an):NaN,w,c,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Yt(this.rgb))}overwriteGetter(o,c){return Object.defineProperty(this,o,{value:c}),c}toString(){const[o,c,h,m]=this.rgb;return`rgba(${[o,c,h].map(y=>Math.round(255*y)).join(",")},${m})`}}rn.black=new rn(0,0,0,1),rn.white=new rn(1,1,1,1),rn.transparent=new rn(0,0,0,0),rn.red=new rn(1,0,0,1);class eu{constructor(o,c,h){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,c){return this.collator.compare(o,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class nc{constructor(o,c,h,m,y){this.text=o,this.image=c,this.scale=h,this.fontStack=m,this.textColor=y}}class qi{constructor(o){this.sections=o}static fromString(o){return new qi([new nc(o,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(o=>0!==o.text.length||o.image&&0!==o.image.name.length)}static factory(o){return o instanceof qi?o:qi.fromString(o)}toString(){return 0===this.sections.length?"":this.sections.map(o=>o.text).join("")}}class Yr{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Yr)return o;if("number"==typeof o)return new Yr([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const c of o)if("number"!=typeof c)return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new Yr(o)}}toString(){return JSON.stringify(this.values)}}const dm=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ho{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ho)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let c=0;c<o.length;c+=2){const h=o[c],m=o[c+1];if("string"!=typeof h||!dm.has(h)||!Array.isArray(m)||2!==m.length||"number"!=typeof m[0]||"number"!=typeof m[1])return}return new ho(o)}}toString(){return JSON.stringify(this.values)}}class Zi{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Zi({name:o,available:!1}):null}}function ic(l,o,c,h){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof c&&c>=0&&c<=255?void 0===h||"number"==typeof h&&h>=0&&h<=1?null:`Invalid rgba value [${[l,o,c,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof h?[l,o,c,h]:[l,o,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xl(l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l||l instanceof rn||l instanceof eu||l instanceof qi||l instanceof Yr||l instanceof ho||l instanceof Zi)return!0;if(Array.isArray(l)){for(const o of l)if(!xl(o))return!1;return!0}if("object"==typeof l){for(const o in l)if(!xl(l[o]))return!1;return!0}return!1}function Kn(l){if(null===l)return bs;if("string"==typeof l)return Ot;if("boolean"==typeof l)return xt;if("number"==typeof l)return He;if(l instanceof rn)return Sr;if(l instanceof eu)return xs;if(l instanceof qi)return X;if(l instanceof Yr)return L;if(l instanceof ho)return G;if(l instanceof Zi)return B;if(Array.isArray(l)){const o=l.length;let c;for(const h of l){const m=Kn(h);if(c){if(c===m)continue;c=Dt;break}c=m}return Y(c||Dt,o)}return ns}function yt(l){const o=typeof l;return null===l?"":"string"===o||"number"===o||"boolean"===o?String(l):l instanceof rn||l instanceof qi||l instanceof Yr||l instanceof ho||l instanceof Zi?l.toString():JSON.stringify(l)}class ws{constructor(o,c){this.type=o,this.value=c}static parse(o,c){if(2!==o.length)return c.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!xl(o[1]))return c.error("invalid value");const h=o[1];let m=Kn(h);const y=c.expectedType;return"array"!==m.kind||0!==m.N||!y||"array"!==y.kind||"number"==typeof y.N&&0!==y.N||(m=y),new ws(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class en{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const mt={string:Ot,number:He,boolean:xt,object:ns};class Vr{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let h,m=1;const y=o[0];if("array"===y){let C,E;if(o.length>2){const I=o[1];if("string"!=typeof I||!(I in mt)||"object"===I)return c.error('The item type argument of "array" must be one of string, number, boolean',1);C=mt[I],m++}else C=Dt;if(o.length>3){if(null!==o[2]&&("number"!=typeof o[2]||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);E=o[2],m++}h=Y(C,E)}else{if(!mt[y])throw new Error(`Types doesn't contain name = ${y}`);h=mt[y]}const w=[];for(;m<o.length;m++){const C=c.parse(o[m],m,Dt);if(!C)return null;w.push(C)}return new Vr(h,w)}evaluate(o){for(let c=0;c<this.args.length;c++){const h=this.args[c].evaluate(o);if(!se(this.type,Kn(h)))return h;if(c===this.args.length-1)throw new en(`Expected value to be of type ${ee(this.type)}, but found ${ee(Kn(h))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const rc={"to-boolean":xt,"to-color":Sr,"to-number":He,"to-string":Ot};class Ki{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const h=o[0];if(!rc[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if(("to-boolean"===h||"to-string"===h)&&2!==o.length)return c.error("Expected one argument.");const m=rc[h],y=[];for(let w=1;w<o.length;w++){const C=c.parse(o[w],w,Dt);if(!C)return null;y.push(C)}return new Ki(m,y)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let c,h;for(const m of this.args){if(c=m.evaluate(o),h=null,c instanceof rn)return c;if("string"==typeof c){const y=o.parseColor(c);if(y)return y}else if(Array.isArray(c)&&(h=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:ic(c[0],c[1],c[2],c[3]),!h))return new rn(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new en(h||`Could not parse color from value '${"string"==typeof c?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const h of this.args){c=h.evaluate(o);const m=Yr.parse(c);if(m)return m}throw new en(`Could not parse padding from value '${"string"==typeof c?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const h of this.args){c=h.evaluate(o);const m=ho.parse(c);if(m)return m}throw new en(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof c?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const h of this.args){if(c=h.evaluate(o),null===c)return 0;const m=Number(c);if(!isNaN(m))return m}throw new en(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return qi.fromString(yt(this.args[0].evaluate(o)));case"resolvedImage":return Zi.fromString(yt(this.args[0].evaluate(o)));default:return yt(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const nd=["Unknown","Point","LineString","Polygon"];class tu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?nd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let c=this._parseColorCache[o];return c||(c=this._parseColorCache[o]=rn.parse(o)),c}}class cn{constructor(o,c,h=[],m,y=new Ys,w=[]){this.registry=o,this.path=h,this.key=h.map(C=>`[${C}]`).join(""),this.scope=y,this.errors=w,this.expectedType=m,this._isConstant=c}parse(o,c,h,m,y={}){return c?this.concat(c,h,m)._parse(o,y):this._parse(o,y)}_parse(o,c){function h(m,y,w){return"assert"===w?new Vr(y,[m]):"coerce"===w?new Ki(y,[m]):m}if(null!==o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o||(o=["literal",o]),Array.isArray(o)){if(0===o.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=o[0];if("string"!=typeof m)return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let w=y.parse(o,this);if(!w)return null;if(this.expectedType){const C=this.expectedType,E=w.type;if("string"!==C.kind&&"number"!==C.kind&&"boolean"!==C.kind&&"object"!==C.kind&&"array"!==C.kind||"value"!==E.kind)if("color"!==C.kind&&"formatted"!==C.kind&&"resolvedImage"!==C.kind||"value"!==E.kind&&"string"!==E.kind)if("padding"!==C.kind||"value"!==E.kind&&"number"!==E.kind&&"array"!==E.kind)if("variableAnchorOffsetCollection"!==C.kind||"value"!==E.kind&&"array"!==E.kind){if(this.checkSubtype(C,E))return null}else w=h(w,C,c.typeAnnotation||"coerce");else w=h(w,C,c.typeAnnotation||"coerce");else w=h(w,C,c.typeAnnotation||"coerce");else w=h(w,C,c.typeAnnotation||"assert")}if(!(w instanceof ws)&&"resolvedImage"!==w.type.kind&&this._isConstant(w)){const C=new tu;try{w=new ws(w.type,w.evaluate(C))}catch(E){return this.error(E.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===o?"'undefined' value invalid. Use null instead.":"object"==typeof o?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,c,h){const m="number"==typeof o?this.path.concat(o):this.path,y=h?this.scope.concat(h):this.scope;return new cn(this.registry,this._isConstant,m,c||null,y,this.errors)}error(o,...c){const h=`${this.key}${c.map(m=>`[${m}]`).join("")}`;this.errors.push(new ni(h,o))}checkSubtype(o,c){const h=se(o,c);return h&&this.error(h),h}}class Ia{constructor(o,c,h){this.type=xs,this.locale=h,this.caseSensitive=o,this.diacriticSensitive=c}static parse(o,c){if(2!==o.length)return c.error("Expected one argument.");const h=o[1];if("object"!=typeof h||Array.isArray(h))return c.error("Collator options argument must be an object.");const m=c.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,xt);if(!m)return null;const y=c.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,xt);if(!y)return null;let w=null;return h.locale&&(w=c.parse(h.locale,1,Ot),!w)?null:new Ia(m,y,w)}evaluate(o){return new eu(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}const zn=8192;function oc(l,o){l[0]=Math.min(l[0],o[0]),l[1]=Math.min(l[1],o[1]),l[2]=Math.max(l[2],o[0]),l[3]=Math.max(l[3],o[1])}function sc(l,o){return!(l[0]<=o[0]||l[2]>=o[2]||l[1]<=o[1]||l[3]>=o[3])}function wn(l,o){const c=(180+l[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,m=Math.pow(2,o.z);return[Math.round(c*m*zn),Math.round(h*m*zn)]}function kt(l,o,c){const h=l[0]-o[0],m=l[1]-o[1],y=l[0]-c[0],w=l[1]-c[1];return h*w-y*m==0&&h*y<=0&&m*w<=0}function ac(l,o){let c=!1;for(let w=0,C=o.length;w<C;w++){const E=o[w];for(let I=0,P=E.length;I<P-1;I++){if(kt(l,E[I],E[I+1]))return!1;(m=E[I])[1]>(h=l)[1]!=(y=E[I+1])[1]>h[1]&&h[0]<(y[0]-m[0])*(h[1]-m[1])/(y[1]-m[1])+m[0]&&(c=!c)}}var h,m,y;return c}function lc(l,o){for(let c=0;c<o.length;c++)if(ac(l,o[c]))return!0;return!1}function um(l,o,c,h){const m=h[0]-c[0],y=h[1]-c[1],w=(l[0]-c[0])*y-m*(l[1]-c[1]),C=(o[0]-c[0])*y-m*(o[1]-c[1]);return w>0&&C<0||w<0&&C>0}function yh(l,o,c){for(const I of c)for(let P=0;P<I.length-1;++P)if((C=[(w=I[P+1])[0]-(y=I[P])[0],w[1]-y[1]])[0]*(E=[(m=o)[0]-(h=l)[0],m[1]-h[1]])[1]-C[1]*E[0]!=0&&um(h,m,y,w)&&um(y,w,h,m))return!0;var h,m,y,w,C,E;return!1}function xe(l,o){for(let c=0;c<l.length;++c)if(!ac(l[c],o))return!1;for(let c=0;c<l.length-1;++c)if(yh(l[c],l[c+1],o))return!1;return!0}function cc(l,o){for(let c=0;c<o.length;c++)if(xe(l,o[c]))return!0;return!1}function Ct(l,o,c){const h=[];for(let m=0;m<l.length;m++){const y=[];for(let w=0;w<l[m].length;w++){const C=wn(l[m][w],c);oc(o,C),y.push(C)}h.push(y)}return h}function pn(l,o,c){const h=[];for(let m=0;m<l.length;m++){const y=Ct(l[m],o,c);h.push(y)}return h}function bh(l,o,c,h){if(l[0]<c[0]||l[0]>c[2]){const m=.5*h;let y=l[0]-c[0]>m?-h:c[0]-l[0]>m?h:0;0===y&&(y=l[0]-c[2]>m?-h:c[2]-l[0]>m?h:0),l[0]+=y}oc(o,l)}function xh(l,o,c,h){const m=Math.pow(2,h.z)*zn,y=[h.x*zn,h.y*zn],w=[];for(const C of l)for(const E of C){const I=[E.x+y[0],E.y+y[1]];bh(I,o,c,m),w.push(I)}return w}function nu(l,o,c,h){const m=Math.pow(2,h.z)*zn,y=[h.x*zn,h.y*zn],w=[];for(const E of l){const I=[];for(const P of E){const F=[P.x+y[0],P.y+y[1]];oc(o,F),I.push(F)}w.push(I)}if(o[2]-o[0]<=m/2){(C=o)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const E of w)for(const I of E)bh(I,o,c,m)}var C;return w}class Ss{constructor(o,c){this.type=xt,this.geojson=o,this.geometries=c}static parse(o,c){if(2!==o.length)return c.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(xl(o[1])){const h=o[1];if("FeatureCollection"===h.type)for(let m=0;m<h.features.length;++m){const y=h.features[m].geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new Ss(h,h.features[m].geometry)}else if("Feature"===h.type){const m=h.geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new Ss(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new Ss(h,h)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(null!=o.geometry()&&null!=o.canonicalID()){if("Point"===o.geometryType())return function(c,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if("Polygon"===h.type){const C=Ct(h.coordinates,y,w),E=xh(c.geometry(),m,y,w);if(!sc(m,y))return!1;for(const I of E)if(!ac(I,C))return!1}if("MultiPolygon"===h.type){const C=pn(h.coordinates,y,w),E=xh(c.geometry(),m,y,w);if(!sc(m,y))return!1;for(const I of E)if(!lc(I,C))return!1}return!0}(o,this.geometries);if("LineString"===o.geometryType())return function(c,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if("Polygon"===h.type){const C=Ct(h.coordinates,y,w),E=nu(c.geometry(),m,y,w);if(!sc(m,y))return!1;for(const I of E)if(!xe(I,C))return!1}if("MultiPolygon"===h.type){const C=pn(h.coordinates,y,w),E=nu(c.geometry(),m,y,w);if(!sc(m,y))return!1;for(const I of E)if(!cc(I,C))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class or{constructor(o,c){this.type=c.type,this.name=o,this.boundExpression=c}static parse(o,c){if(2!==o.length||"string"!=typeof o[1])return c.error("'var' expression requires exactly one string literal argument.");const h=o[1];return c.scope.has(h)?new or(h,c.scope.get(h)):c.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Oo{constructor(o,c,h,m){this.name=o,this.type=c,this._evaluate=h,this.args=m}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,c){const h=o[0],m=Oo.definitions[h];if(!m)return c.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,C=w.filter(([I])=>!Array.isArray(I)||I.length===o.length-1);let E=null;for(const[I,P]of C){E=new cn(c.registry,id,c.path,null,c.scope);const F=[];let z=!1;for(let j=1;j<o.length;j++){const U=o[j],W=Array.isArray(I)?I[j-1]:I.type,J=E.parse(U,1+F.length,W);if(!J){z=!0;break}F.push(J)}if(!z)if(Array.isArray(I)&&I.length!==F.length)E.error(`Expected ${I.length} arguments, but found ${F.length} instead.`);else{for(let j=0;j<F.length;j++){const U=Array.isArray(I)?I[j]:I.type,W=F[j];E.concat(j+1).checkSubtype(U,W.type)}if(0===E.errors.length)return new Oo(h,y,P,F)}}if(1===C.length)c.errors.push(...E.errors);else{const I=(C.length?C:w).map(([F])=>{return z=F,Array.isArray(z)?`(${z.map(ee).join(", ")})`:`(${ee(z.type)}...)`;var z}).join(" | "),P=[];for(let F=1;F<o.length;F++){const z=c.parse(o[F],1+P.length);if(!z)return null;P.push(ee(z.type))}c.error(`Expected arguments of type ${I}, but found (${P.join(", ")}) instead.`)}return null}static register(o,c){Oo.definitions=c;for(const h in c)o[h]=Oo}}function id(l){if(l instanceof or)return id(l.boundExpression);if(l instanceof Oo&&"error"===l.name||l instanceof Ia||l instanceof Ss)return!1;const o=l instanceof Ki||l instanceof Vr;let c=!0;return l.eachChild(h=>{c=o?c&&id(h):c&&h instanceof ws}),!!c&&iu(l)&&ru(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function iu(l){if(l instanceof Oo&&("get"===l.name&&1===l.args.length||"feature-state"===l.name||"has"===l.name&&1===l.args.length||"properties"===l.name||"geometry-type"===l.name||"id"===l.name||/^filter-/.test(l.name))||l instanceof Ss)return!1;let o=!0;return l.eachChild(c=>{o&&!iu(c)&&(o=!1)}),o}function Fo(l){if(l instanceof Oo&&"feature-state"===l.name)return!1;let o=!0;return l.eachChild(c=>{o&&!Fo(c)&&(o=!1)}),o}function ru(l,o){if(l instanceof Oo&&o.indexOf(l.name)>=0)return!1;let c=!0;return l.eachChild(h=>{c&&!ru(h,o)&&(c=!1)}),c}function dc(l,o){const c=l.length-1;let h,m,y=0,w=c,C=0;for(;y<=w;)if(C=Math.floor((y+w)/2),h=l[C],m=l[C+1],h<=o){if(C===c||o<m)return C;y=C+1}else{if(!(h>o))throw new en("Input is not a number.");w=C-1}return 0}class Aa{constructor(o,c,h){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(const[m,y]of h)this.labels.push(m),this.outputs.push(y)}static parse(o,c){if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");const h=c.parse(o[1],1,He);if(!h)return null;const m=[];let y=null;c.expectedType&&"value"!==c.expectedType.kind&&(y=c.expectedType);for(let w=1;w<o.length;w+=2){const C=1===w?-1/0:o[w],E=o[w+1],I=w,P=w+1;if("number"!=typeof C)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(m.length&&m[m.length-1][0]>=C)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const F=c.parse(E,P,y);if(!F)return null;y=y||F.type,m.push([C,F])}return new Aa(y,h,m)}evaluate(o){const c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(o);const m=this.input.evaluate(o);if(m<=c[0])return h[0].evaluate(o);const y=c.length;return m>=c[y-1]?h[y-1].evaluate(o):h[dc(c,m)].evaluate(o)}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Kt(l,o,c){return l+c*(o-l)}function rd(l,o,c){return l.map((h,m)=>Kt(h,o[m],c))}const po={number:Kt,color:function(l,o,c,h="rgb"){switch(h){case"rgb":{const[m,y,w,C]=rd(l.rgb,o.rgb,c);return new rn(m,y,w,C,!1)}case"hcl":{const[m,y,w,C]=l.hcl,[E,I,P,F]=o.hcl;let z,j;if(isNaN(m)||isNaN(E))isNaN(m)?isNaN(E)?z=NaN:(z=E,1!==w&&0!==w||(j=I)):(z=m,1!==P&&0!==P||(j=y));else{let le=E-m;E>m&&le>180?le-=360:E<m&&m-E>180&&(le+=360),z=m+c*le}const[U,W,J,ne]=function([le,oe,pe,ge]){return le=isNaN(le)?0:le*wt,Ft([pe,Math.cos(le)*oe,Math.sin(le)*oe,ge])}([z,j??Kt(y,I,c),Kt(w,P,c),Kt(C,F,c)]);return new rn(U,W,J,ne,!1)}case"lab":{const[m,y,w,C]=Ft(rd(l.lab,o.lab,c));return new rn(m,y,w,C,!1)}}},array:rd,padding:function(l,o,c){return new Yr(rd(l.values,o.values,c))},variableAnchorOffsetCollection:function(l,o,c){const h=l.values,m=o.values;if(h.length!==m.length)throw new en(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${o.toString()}`);const y=[];for(let w=0;w<h.length;w+=2){if(h[w]!==m[w])throw new en(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${h[w]}, to[${w}]: ${m[w]}`);y.push(h[w]);const[C,E]=h[w+1],[I,P]=m[w+1];y.push([Kt(C,I,c),Kt(E,P,c)])}return new ho(y)}};class Jr{constructor(o,c,h,m,y){this.type=o,this.operator=c,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[w,C]of y)this.labels.push(w),this.outputs.push(C)}static interpolationFactor(o,c,h,m){let y=0;if("exponential"===o.name)y=wh(c,o.base,h,m);else if("linear"===o.name)y=wh(c,1,h,m);else if("cubic-bezier"===o.name){const w=o.controlPoints;y=new Zs(w[0],w[1],w[2],w[3]).solve(wh(c,1,h,m))}return y}static parse(o,c){let[h,m,y,...w]=o;if(!Array.isArray(m)||0===m.length)return c.error("Expected an interpolation type expression.",1);if("linear"===m[0])m={name:"linear"};else if("exponential"===m[0]){const I=m[1];if("number"!=typeof I)return c.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if("cubic-bezier"!==m[0])return c.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const I=m.slice(1);if(4!==I.length||I.some(P=>"number"!=typeof P||P<0||P>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}}if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(y=c.parse(y,2,He),!y)return null;const C=[];let E=null;"interpolate-hcl"===h||"interpolate-lab"===h?E=Sr:c.expectedType&&"value"!==c.expectedType.kind&&(E=c.expectedType);for(let I=0;I<w.length;I+=2){const P=w[I],F=w[I+1],z=I+3,j=I+4;if("number"!=typeof P)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(C.length&&C[C.length-1][0]>=P)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',z);const U=c.parse(F,j,E);if(!U)return null;E=E||U.type,C.push([P,U])}return Ce(E,He)||Ce(E,Sr)||Ce(E,L)||Ce(E,G)||Ce(E,Y(He))?new Jr(E,h,m,y,C):c.error(`Type ${ee(E)} is not interpolatable.`)}evaluate(o){const c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(o);const m=this.input.evaluate(o);if(m<=c[0])return h[0].evaluate(o);const y=c.length;if(m>=c[y-1])return h[y-1].evaluate(o);const w=dc(c,m),C=Jr.interpolationFactor(this.interpolation,m,c[w],c[w+1]),E=h[w].evaluate(o),I=h[w+1].evaluate(o);switch(this.operator){case"interpolate":return po[this.type.kind](E,I,C);case"interpolate-hcl":return po.color(E,I,C,"hcl");case"interpolate-lab":return po.color(E,I,C,"lab")}}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function wh(l,o,c,h){const m=h-c,y=l-c;return 0===m?0:1===o?y/m:(Math.pow(o,y)-1)/(Math.pow(o,m)-1)}class Cr{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expectected at least one argument.");let h=null;const m=c.expectedType;m&&"value"!==m.kind&&(h=m);const y=[];for(const C of o.slice(1)){const E=c.parse(C,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,y.push(E)}if(!h)throw new Error("No output type");const w=m&&y.some(C=>se(m,C.type));return new Cr(w?Dt:h,y)}evaluate(o){let c,h=null,m=0;for(const y of this.args)if(m++,h=y.evaluate(o),h&&h instanceof Zi&&!h.available&&(c||(c=h.name),h=null,m===this.args.length&&(h=c)),null!==h)break;return h}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}class vt{constructor(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const c of this.bindings)o(c[1]);o(this.result)}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const h=[];for(let y=1;y<o.length-1;y+=2){const w=o[y];if("string"!=typeof w)return c.error(`Expected string, but found ${typeof w} instead.`,y);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",y);const C=c.parse(o[y+1],y+1);if(!C)return null;h.push([w,C])}const m=c.parse(o[o.length-1],o.length-1,c.expectedType,h);return m?new vt(h,m):null}outputDefined(){return this.result.outputDefined()}}class Sh{constructor(o,c,h){this.type=o,this.index=c,this.input=h}static parse(o,c){if(3!==o.length)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=c.parse(o[1],1,He),m=c.parse(o[2],2,Y(c.expectedType||Dt));return h&&m?new Sh(m.type.itemType,h,m):null}evaluate(o){const c=this.index.evaluate(o),h=this.input.evaluate(o);if(c<0)throw new en(`Array index out of bounds: ${c} < 0.`);if(c>=h.length)throw new en(`Array index out of bounds: ${c} > ${h.length-1}.`);if(c!==Math.floor(c))throw new en(`Array index must be an integer, but found ${c} instead.`);return h[c]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Ch{constructor(o,c){this.type=xt,this.needle=o,this.haystack=c}static parse(o,c){if(3!==o.length)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=c.parse(o[1],1,Dt),m=c.parse(o[2],2,Dt);return h&&m?ie(h.type,[xt,Ot,He,bs,Dt])?new Ch(h,m):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(h.type)} instead`):null}evaluate(o){const c=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!h)return!1;if(!ce(c,["boolean","string","number","null"]))throw new en(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Kn(c))} instead.`);if(!ce(h,["string","array"]))throw new en(`Expected second argument to be of type array or string, but found ${ee(Kn(h))} instead.`);return h.indexOf(c)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class ou{constructor(o,c,h){this.type=He,this.needle=o,this.haystack=c,this.fromIndex=h}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=c.parse(o[1],1,Dt),m=c.parse(o[2],2,Dt);if(!h||!m)return null;if(!ie(h.type,[xt,Ot,He,bs,Dt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(h.type)} instead`);if(4===o.length){const y=c.parse(o[3],3,He);return y?new ou(h,m,y):null}return new ou(h,m)}evaluate(o){const c=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!ce(c,["boolean","string","number","null"]))throw new en(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Kn(c))} instead.`);if(!ce(h,["string","array"]))throw new en(`Expected second argument to be of type array or string, but found ${ee(Kn(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(o);return h.indexOf(c,m)}return h.indexOf(c)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class Ze{constructor(o,c,h,m,y,w){this.inputType=o,this.type=c,this.input=h,this.cases=m,this.outputs=y,this.otherwise=w}static parse(o,c){if(o.length<5)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return c.error("Expected an even number of arguments.");let h,m;c.expectedType&&"value"!==c.expectedType.kind&&(m=c.expectedType);const y={},w=[];for(let I=2;I<o.length-1;I+=2){let P=o[I];const F=o[I+1];Array.isArray(P)||(P=[P]);const z=c.concat(I);if(0===P.length)return z.error("Expected at least one branch label.");for(const U of P){if("number"!=typeof U&&"string"!=typeof U)return z.error("Branch labels must be numbers or strings.");if("number"==typeof U&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof U&&Math.floor(U)!==U)return z.error("Numeric branch labels must be integer values.");if(h){if(z.checkSubtype(h,Kn(U)))return null}else h=Kn(U);if(void 0!==y[String(U)])return z.error("Branch labels must be unique.");y[String(U)]=w.length}const j=c.parse(F,I,m);if(!j)return null;m=m||j.type,w.push(j)}const C=c.parse(o[1],1,Dt);if(!C)return null;const E=c.parse(o[o.length-1],o.length-1,m);return E?"value"!==C.type.kind&&c.concat(1).checkSubtype(h,C.type)?null:new Ze(h,m,C,y,w,E):null}evaluate(o){const c=this.input.evaluate(o);return(Kn(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Th{constructor(o,c,h){this.type=o,this.branches=c,this.otherwise=h}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return c.error("Expected an odd number of arguments.");let h;c.expectedType&&"value"!==c.expectedType.kind&&(h=c.expectedType);const m=[];for(let w=1;w<o.length-1;w+=2){const C=c.parse(o[w],w,xt);if(!C)return null;const E=c.parse(o[w+1],w+1,h);if(!E)return null;m.push([C,E]),h=h||E.type}const y=c.parse(o[o.length-1],o.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new Th(h,m,y)}evaluate(o){for(const[c,h]of this.branches)if(c.evaluate(o))return h.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[c,h]of this.branches)o(c),o(h);o(this.otherwise)}outputDefined(){return this.branches.every(([o,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class Dn{constructor(o,c,h,m){this.type=o,this.input=c,this.beginIndex=h,this.endIndex=m}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=c.parse(o[1],1,Dt),m=c.parse(o[2],2,He);if(!h||!m)return null;if(!ie(h.type,[Y(Dt),Ot,Dt]))return c.error(`Expected first argument to be of type array or string, but found ${ee(h.type)} instead`);if(4===o.length){const y=c.parse(o[3],3,He);return y?new Dn(h.type,h,m,y):null}return new Dn(h.type,h,m)}evaluate(o){const c=this.input.evaluate(o),h=this.beginIndex.evaluate(o);if(!ce(c,["string","array"]))throw new en(`Expected first argument to be of type array or string, but found ${ee(Kn(c))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(o);return c.slice(h,m)}return c.slice(h)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function uc(l,o){return"=="===l||"!="===l?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function kh(l,o,c,h){return 0===h.compare(o,c)}function Pa(l,o,c){const h="=="!==l&&"!="!==l;return class D2{constructor(y,w,C){this.type=xt,this.lhs=y,this.rhs=w,this.collator=C,this.hasUntypedArgument="value"===y.type.kind||"value"===w.type.kind}static parse(y,w){if(3!==y.length&&4!==y.length)return w.error("Expected two or three arguments.");const C=y[0];let E=w.parse(y[1],1,Dt);if(!E)return null;if(!uc(C,E.type))return w.concat(1).error(`"${C}" comparisons are not supported for type '${ee(E.type)}'.`);let I=w.parse(y[2],2,Dt);if(!I)return null;if(!uc(C,I.type))return w.concat(2).error(`"${C}" comparisons are not supported for type '${ee(I.type)}'.`);if(E.type.kind!==I.type.kind&&"value"!==E.type.kind&&"value"!==I.type.kind)return w.error(`Cannot compare types '${ee(E.type)}' and '${ee(I.type)}'.`);h&&("value"===E.type.kind&&"value"!==I.type.kind?E=new Vr(I.type,[E]):"value"!==E.type.kind&&"value"===I.type.kind&&(I=new Vr(E.type,[I])));let P=null;if(4===y.length){if("string"!==E.type.kind&&"string"!==I.type.kind&&"value"!==E.type.kind&&"value"!==I.type.kind)return w.error("Cannot use collator to compare non-string types.");if(P=w.parse(y[3],3,xs),!P)return null}return new D2(E,I,P)}evaluate(y){const w=this.lhs.evaluate(y),C=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const E=Kn(w),I=Kn(C);if(E.kind!==I.kind||"string"!==E.kind&&"number"!==E.kind)throw new en(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=Kn(w),I=Kn(C);if("string"!==E.kind||"string"!==I.kind)return o(y,w,C)}return this.collator?c(y,w,C,this.collator.evaluate(y)):o(y,w,C)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const hm=Pa("==",function(l,o,c){return o===c},kh),od=Pa("!=",function(l,o,c){return o!==c},function(l,o,c,h){return!kh(0,o,c,h)}),sd=Pa("<",function(l,o,c){return o<c},function(l,o,c,h){return h.compare(o,c)<0}),su=Pa(">",function(l,o,c){return o>c},function(l,o,c,h){return h.compare(o,c)>0}),Eh=Pa("<=",function(l,o,c){return o<=c},function(l,o,c,h){return h.compare(o,c)<=0}),pm=Pa(">=",function(l,o,c){return o>=c},function(l,o,c,h){return h.compare(o,c)>=0});class Gt{constructor(o,c,h,m,y){this.type=Ot,this.number=o,this.locale=c,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(o,c){if(3!==o.length)return c.error("Expected two arguments.");const h=c.parse(o[1],1,He);if(!h)return null;const m=o[2];if("object"!=typeof m||Array.isArray(m))return c.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=c.parse(m.locale,1,Ot),!y))return null;let w=null;if(m.currency&&(w=c.parse(m.currency,1,Ot),!w))return null;let C=null;if(m["min-fraction-digits"]&&(C=c.parse(m["min-fraction-digits"],1,He),!C))return null;let E=null;return m["max-fraction-digits"]&&(E=c.parse(m["max-fraction-digits"],1,He),!E)?null:new Gt(h,y,w,C,E)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class wl{constructor(o){this.type=X,this.sections=o}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const h=o[1];if(!Array.isArray(h)&&"object"==typeof h)return c.error("First argument must be an image or text section.");const m=[];let y=!1;for(let w=1;w<=o.length-1;++w){const C=o[w];if(y&&"object"==typeof C&&!Array.isArray(C)){y=!1;let E=null;if(C["font-scale"]&&(E=c.parse(C["font-scale"],1,He),!E))return null;let I=null;if(C["text-font"]&&(I=c.parse(C["text-font"],1,Y(Ot)),!I))return null;let P=null;if(C["text-color"]&&(P=c.parse(C["text-color"],1,Sr),!P))return null;const F=m[m.length-1];F.scale=E,F.font=I,F.textColor=P}else{const E=c.parse(o[w],1,Dt);if(!E)return null;const I=E.type.kind;if("string"!==I&&"value"!==I&&"null"!==I&&"resolvedImage"!==I)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:E,scale:null,font:null,textColor:null})}}return new wl(m)}evaluate(o){return new qi(this.sections.map(c=>{const h=c.content.evaluate(o);return Kn(h)===B?new nc("",h,null,null,null):new nc(yt(h),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null)}))}eachChild(o){for(const c of this.sections)o(c.content),c.scale&&o(c.scale),c.font&&o(c.font),c.textColor&&o(c.textColor)}outputDefined(){return!1}}class ad{constructor(o){this.type=B,this.input=o}static parse(o,c){if(2!==o.length)return c.error("Expected two arguments.");const h=c.parse(o[1],1,Ot);return h?new ad(h):c.error("No image name provided.")}evaluate(o){const c=this.input.evaluate(o),h=Zi.fromString(c);return h&&o.availableImages&&(h.available=o.availableImages.indexOf(c)>-1),h}eachChild(o){o(this.input)}outputDefined(){return!1}}class sr{constructor(o){this.type=He,this.input=o}static parse(o,c){if(2!==o.length)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);const h=c.parse(o[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?c.error(`Expected argument of type string or array, but found ${ee(h.type)} instead.`):new sr(h):null}evaluate(o){const c=this.input.evaluate(o);if("string"==typeof c||Array.isArray(c))return c.length;throw new en(`Expected value to be of type string or array, but found ${ee(Kn(c))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const Ra={"==":hm,"!=":od,">":su,"<":sd,">=":pm,"<=":Eh,array:Vr,at:Sh,boolean:Vr,case:Th,coalesce:Cr,collator:Ia,format:wl,image:ad,in:Ch,"index-of":ou,interpolate:Jr,"interpolate-hcl":Jr,"interpolate-lab":Jr,length:sr,let:vt,literal:ws,match:Ze,number:Vr,"number-format":Gt,object:Vr,slice:Dn,step:Aa,string:Vr,"to-boolean":Ki,"to-color":Ki,"to-number":Ki,"to-string":Ki,var:or,within:Ss};function mm(l,[o,c,h,m]){o=o.evaluate(l),c=c.evaluate(l),h=h.evaluate(l);const y=m?m.evaluate(l):1,w=ic(o,c,h,y);if(w)throw new en(w);return new rn(o/255,c/255,h/255,y,!1)}function In(l,o){return l in o}function Mh(l,o){const c=o[l];return void 0===c?null:c}function Sl(l){return{type:l}}function Le(l){return{result:"success",value:l}}function is(l){return{result:"error",value:l}}function ea(l){return"data-driven"===l["property-type"]||"cross-faded-data-driven"===l["property-type"]}function au(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function hc(l){return!!l.expression&&l.expression.interpolated}function ln(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function Bn(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}function Pg(l){return l}function Xt(l,o){const c="color"===o.type,h=l.stops&&"object"==typeof l.stops[0][0],m=h||!(h||void 0!==l.property),y=l.type||(hc(o)?"exponential":"interval");if(c||"padding"===o.type){const P=c?rn.parse:Yr.parse;(l=Po({},l)).stops&&(l.stops=l.stops.map(F=>[F[0],P(F[1])])),l.default=P(l.default?l.default:o.default)}if(l.colorSpace&&"rgb"!==(w=l.colorSpace)&&"hcl"!==w&&"lab"!==w)throw new Error(`Unknown color space: "${l.colorSpace}"`);var w;let C,E,I;if("exponential"===y)C=Cs;else if("interval"===y)C=Xn;else if("categorical"===y){C=ii,E=Object.create(null);for(const P of l.stops)E[P[0]]=P[1];I=typeof l.stops[0][0]}else{if("identity"!==y)throw new Error(`Unknown function type "${y}"`);C=ld}if(h){const P={},F=[];for(let U=0;U<l.stops.length;U++){const W=l.stops[U],J=W[0].zoom;void 0===P[J]&&(P[J]={zoom:J,type:l.type,property:l.property,default:l.default,stops:[]},F.push(J)),P[J].stops.push([W[0].value,W[1]])}const z=[];for(const U of F)z.push([P[U].zoom,Xt(P[U],o)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:Jr.interpolationFactor.bind(void 0,j),zoomStops:z.map(U=>U[0]),evaluate:({zoom:U},W)=>Cs({stops:z,base:l.base},o,U).evaluate(U,W)}}if(m){const P="exponential"===y?{name:"exponential",base:void 0!==l.base?l.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Jr.interpolationFactor.bind(void 0,P),zoomStops:l.stops.map(F=>F[0]),evaluate:({zoom:F})=>C(l,o,F,E,I)}}return{kind:"source",evaluate(P,F){const z=F&&F.properties?F.properties[l.property]:void 0;return void 0===z?Cl(l.default,o.default):C(l,o,z,E,I)}}}function Cl(l,o,c){return void 0!==l?l:void 0!==o?o:void 0!==c?c:void 0}function ii(l,o,c,h,m){return Cl(typeof c===m?h[c]:void 0,l.default,o.default)}function Xn(l,o,c){if("number"!==ln(c))return Cl(l.default,o.default);const h=l.stops.length;if(1===h||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[h-1][0])return l.stops[h-1][1];const m=dc(l.stops.map(y=>y[0]),c);return l.stops[m][1]}function Cs(l,o,c){const h=void 0!==l.base?l.base:1;if("number"!==ln(c))return Cl(l.default,o.default);const m=l.stops.length;if(1===m||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[m-1][0])return l.stops[m-1][1];const y=dc(l.stops.map(P=>P[0]),c),w=function(P,F,z,j){const U=j-z,W=P-z;return 0===U?0:1===F?W/U:(Math.pow(F,W)-1)/(Math.pow(F,U)-1)}(c,h,l.stops[y][0],l.stops[y+1][0]),C=l.stops[y][1],E=l.stops[y+1][1],I=po[o.type]||Pg;return"function"==typeof C.evaluate?{evaluate(...P){const F=C.evaluate.apply(void 0,P),z=E.evaluate.apply(void 0,P);if(void 0!==F&&void 0!==z)return I(F,z,w,l.colorSpace)}}:I(C,E,w,l.colorSpace)}function ld(l,o,c){switch(o.type){case"color":c=rn.parse(c);break;case"formatted":c=qi.fromString(c.toString());break;case"resolvedImage":c=Zi.fromString(c.toString());break;case"padding":c=Yr.parse(c);break;default:ln(c)===o.type||"enum"===o.type&&o.values[c]||(c=void 0)}return Cl(c,l.default,o.default)}Oo.register(Ra,{error:[{kind:"error"},[Ot],(l,[o])=>{throw new en(o.evaluate(l))}],typeof:[Ot,[Dt],(l,[o])=>ee(Kn(o.evaluate(l)))],"to-rgba":[Y(He,4),[Sr],(l,[o])=>{const[c,h,m,y]=o.evaluate(l).rgb;return[255*c,255*h,255*m,y]}],rgb:[Sr,[He,He,He],mm],rgba:[Sr,[He,He,He,He],mm],has:{type:xt,overloads:[[[Ot],(l,[o])=>In(o.evaluate(l),l.properties())],[[Ot,ns],(l,[o,c])=>In(o.evaluate(l),c.evaluate(l))]]},get:{type:Dt,overloads:[[[Ot],(l,[o])=>Mh(o.evaluate(l),l.properties())],[[Ot,ns],(l,[o,c])=>Mh(o.evaluate(l),c.evaluate(l))]]},"feature-state":[Dt,[Ot],(l,[o])=>Mh(o.evaluate(l),l.featureState||{})],properties:[ns,[],l=>l.properties()],"geometry-type":[Ot,[],l=>l.geometryType()],id:[Dt,[],l=>l.id()],zoom:[He,[],l=>l.globals.zoom],"heatmap-density":[He,[],l=>l.globals.heatmapDensity||0],"line-progress":[He,[],l=>l.globals.lineProgress||0],accumulated:[Dt,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[He,Sl(He),(l,o)=>{let c=0;for(const h of o)c+=h.evaluate(l);return c}],"*":[He,Sl(He),(l,o)=>{let c=1;for(const h of o)c*=h.evaluate(l);return c}],"-":{type:He,overloads:[[[He,He],(l,[o,c])=>o.evaluate(l)-c.evaluate(l)],[[He],(l,[o])=>-o.evaluate(l)]]},"/":[He,[He,He],(l,[o,c])=>o.evaluate(l)/c.evaluate(l)],"%":[He,[He,He],(l,[o,c])=>o.evaluate(l)%c.evaluate(l)],ln2:[He,[],()=>Math.LN2],pi:[He,[],()=>Math.PI],e:[He,[],()=>Math.E],"^":[He,[He,He],(l,[o,c])=>Math.pow(o.evaluate(l),c.evaluate(l))],sqrt:[He,[He],(l,[o])=>Math.sqrt(o.evaluate(l))],log10:[He,[He],(l,[o])=>Math.log(o.evaluate(l))/Math.LN10],ln:[He,[He],(l,[o])=>Math.log(o.evaluate(l))],log2:[He,[He],(l,[o])=>Math.log(o.evaluate(l))/Math.LN2],sin:[He,[He],(l,[o])=>Math.sin(o.evaluate(l))],cos:[He,[He],(l,[o])=>Math.cos(o.evaluate(l))],tan:[He,[He],(l,[o])=>Math.tan(o.evaluate(l))],asin:[He,[He],(l,[o])=>Math.asin(o.evaluate(l))],acos:[He,[He],(l,[o])=>Math.acos(o.evaluate(l))],atan:[He,[He],(l,[o])=>Math.atan(o.evaluate(l))],min:[He,Sl(He),(l,o)=>Math.min(...o.map(c=>c.evaluate(l)))],max:[He,Sl(He),(l,o)=>Math.max(...o.map(c=>c.evaluate(l)))],abs:[He,[He],(l,[o])=>Math.abs(o.evaluate(l))],round:[He,[He],(l,[o])=>{const c=o.evaluate(l);return c<0?-Math.round(-c):Math.round(c)}],floor:[He,[He],(l,[o])=>Math.floor(o.evaluate(l))],ceil:[He,[He],(l,[o])=>Math.ceil(o.evaluate(l))],"filter-==":[xt,[Ot,Dt],(l,[o,c])=>l.properties()[o.value]===c.value],"filter-id-==":[xt,[Dt],(l,[o])=>l.id()===o.value],"filter-type-==":[xt,[Ot],(l,[o])=>l.geometryType()===o.value],"filter-<":[xt,[Ot,Dt],(l,[o,c])=>{const h=l.properties()[o.value],m=c.value;return typeof h==typeof m&&h<m}],"filter-id-<":[xt,[Dt],(l,[o])=>{const c=l.id(),h=o.value;return typeof c==typeof h&&c<h}],"filter->":[xt,[Ot,Dt],(l,[o,c])=>{const h=l.properties()[o.value],m=c.value;return typeof h==typeof m&&h>m}],"filter-id->":[xt,[Dt],(l,[o])=>{const c=l.id(),h=o.value;return typeof c==typeof h&&c>h}],"filter-<=":[xt,[Ot,Dt],(l,[o,c])=>{const h=l.properties()[o.value],m=c.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[xt,[Dt],(l,[o])=>{const c=l.id(),h=o.value;return typeof c==typeof h&&c<=h}],"filter->=":[xt,[Ot,Dt],(l,[o,c])=>{const h=l.properties()[o.value],m=c.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[xt,[Dt],(l,[o])=>{const c=l.id(),h=o.value;return typeof c==typeof h&&c>=h}],"filter-has":[xt,[Dt],(l,[o])=>o.value in l.properties()],"filter-has-id":[xt,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[xt,[Y(Ot)],(l,[o])=>o.value.indexOf(l.geometryType())>=0],"filter-id-in":[xt,[Y(Dt)],(l,[o])=>o.value.indexOf(l.id())>=0],"filter-in-small":[xt,[Ot,Y(Dt)],(l,[o,c])=>c.value.indexOf(l.properties()[o.value])>=0],"filter-in-large":[xt,[Ot,Y(Dt)],(l,[o,c])=>function(h,m,y,w){for(;y<=w;){const C=y+w>>1;if(m[C]===h)return!0;m[C]>h?w=C-1:y=C+1}return!1}(l.properties()[o.value],c.value,0,c.value.length-1)],all:{type:xt,overloads:[[[xt,xt],(l,[o,c])=>o.evaluate(l)&&c.evaluate(l)],[Sl(xt),(l,o)=>{for(const c of o)if(!c.evaluate(l))return!1;return!0}]]},any:{type:xt,overloads:[[[xt,xt],(l,[o,c])=>o.evaluate(l)||c.evaluate(l)],[Sl(xt),(l,o)=>{for(const c of o)if(c.evaluate(l))return!0;return!1}]]},"!":[xt,[xt],(l,[o])=>!o.evaluate(l)],"is-supported-script":[xt,[Ot],(l,[o])=>{const c=l.globals&&l.globals.isSupportedScript;return!c||c(o.evaluate(l))}],upcase:[Ot,[Ot],(l,[o])=>o.evaluate(l).toUpperCase()],downcase:[Ot,[Ot],(l,[o])=>o.evaluate(l).toLowerCase()],concat:[Ot,Sl(Dt),(l,o)=>o.map(c=>yt(c.evaluate(l))).join("")],"resolved-locale":[Ot,[xs],(l,[o])=>o.evaluate(l).resolvedLocale()]});class Tl{constructor(o,c){var h;this.expression=o,this._warningHistory={},this._evaluator=new tu,this._defaultValue=c?"color"===(h=c).type&&Bn(h.default)?new rn(0,0,0,0):"color"===h.type?rn.parse(h.default)||null:"padding"===h.type?Yr.parse(h.default)||null:"variableAnchorOffsetCollection"===h.type?ho.parse(h.default)||null:void 0===h.default?null:h.default:null,this._enumValues=c&&"enum"===c.type?c.values:null}evaluateWithoutErrorHandling(o,c,h,m,y,w){return this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(o,c,h,m,y,w){this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=w||null;try{const C=this.expression.evaluate(this._evaluator);if(null==C||"number"==typeof C&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new en(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function cd(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in Ra}function dd(l,o){const c=new cn(Ra,id,[],o?function(m){const y={color:Sr,string:Ot,number:He,enum:Ot,boolean:xt,formatted:X,padding:L,resolvedImage:B,variableAnchorOffsetCollection:G};return"array"===m.type?Y(y[m.value]||Dt,m.length):y[m.type]}(o):void 0),h=c.parse(l,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return h?Le(new Tl(h,o)):is(c.errors)}class lu{constructor(o,c){this.kind=o,this._styleExpression=c,this.isStateDependent="constant"!==o&&!Fo(c.expression)}evaluateWithoutErrorHandling(o,c,h,m,y,w){return this._styleExpression.evaluateWithoutErrorHandling(o,c,h,m,y,w)}evaluate(o,c,h,m,y,w){return this._styleExpression.evaluate(o,c,h,m,y,w)}}class pc{constructor(o,c,h,m){this.kind=o,this.zoomStops=h,this._styleExpression=c,this.isStateDependent="camera"!==o&&!Fo(c.expression),this.interpolationType=m}evaluateWithoutErrorHandling(o,c,h,m,y,w){return this._styleExpression.evaluateWithoutErrorHandling(o,c,h,m,y,w)}evaluate(o,c,h,m,y,w){return this._styleExpression.evaluate(o,c,h,m,y,w)}interpolationFactor(o,c,h){return this.interpolationType?Jr.interpolationFactor(this.interpolationType,o,c,h):0}}function ta(l,o){const c=dd(l,o);if("error"===c.result)return c;const h=c.value.expression,m=iu(h);if(!m&&!ea(o))return is([new ni("","data expressions not supported")]);const y=ru(h,["zoom"]);if(!y&&!au(o))return is([new ni("","zoom expressions not supported")]);const w=mo(h);return w||y?w instanceof ni?is([w]):w instanceof Jr&&!hc(o)?is([new ni("",'"interpolate" expressions cannot be used with this property')]):Le(w?new pc(m?"camera":"composite",c.value,w.labels,w instanceof Jr?w.interpolation:void 0):new lu(m?"constant":"source",c.value)):is([new ni("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class mc{constructor(o,c){this._parameters=o,this._specification=c,Po(this,Xt(this._parameters,this._specification))}static deserialize(o){return new mc(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function mo(l){let o=null;if(l instanceof vt)o=mo(l.result);else if(l instanceof Cr){for(const c of l.args)if(o=mo(c),o)break}else(l instanceof Aa||l instanceof Jr)&&l.input instanceof Oo&&"zoom"===l.input.name&&(o=l);return o instanceof ni||l.eachChild(c=>{const h=mo(c);h instanceof ni?o=h:!o&&h?o=new ni("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&h&&o!==h&&(o=new ni("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function fc(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const o of l.slice(1))if(!fc(o)&&"boolean"!=typeof o)return!1;return!0;default:return!0}}const Oe={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ud(l){if(null==l)return{filter:()=>!0,needGeometry:!1};fc(l)||(l=kl(l));const o=dd(l,Oe);if("error"===o.result)throw new Error(o.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,h,m)=>o.value.evaluate(c,h,{},m),needGeometry:gc(l)}}function qe(l,o){return l<o?-1:l>o?1:0}function gc(l){if(!Array.isArray(l))return!1;if("within"===l[0])return!0;for(let o=1;o<l.length;o++)if(gc(l[o]))return!0;return!1}function kl(l){if(!l)return!0;const o=l[0];return l.length<=1?"any"!==o:"=="===o?Oa(l[1],l[2],"=="):"!="===o?_c(Oa(l[1],l[2],"==")):"<"===o||">"===o||"<="===o||">="===o?Oa(l[1],l[2],o):"any"===o?(c=l.slice(1),["any"].concat(c.map(kl))):"all"===o?["all"].concat(l.slice(1).map(kl)):"none"===o?["all"].concat(l.slice(1).map(kl).map(_c)):"in"===o?Dh(l[1],l.slice(2)):"!in"===o?_c(Dh(l[1],l.slice(2))):"has"===o?Ih(l[1]):"!has"===o?_c(Ih(l[1])):"within"!==o||l;var c}function Oa(l,o,c){switch(l){case"$type":return[`filter-type-${c}`,o];case"$id":return[`filter-id-${c}`,o];default:return[`filter-${c}`,l,o]}}function Dh(l,o){if(0===o.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(c=>typeof c!=typeof o[0])?["filter-in-large",l,["literal",o.sort(qe)]]:["filter-in-small",l,["literal",o]]}}function Ih(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function _c(l){return["!",l]}function fo(l){const o=typeof l;if("number"===o||"boolean"===o||"string"===o||null==l)return JSON.stringify(l);if(Array.isArray(l)){let m="[";for(const y of l)m+=`${fo(y)},`;return`${m}]`}const c=Object.keys(l).sort();let h="{";for(let m=0;m<c.length;m++)h+=`${JSON.stringify(c[m])}:${fo(l[c[m]])},`;return`${h}}`}function Fa(l){let o="";for(const c of Qr)o+=`/${fo(l[c])}`;return o}function eo(l){const o=l.value;return o?[new Fe(l.key,o,"constants have been deprecated as of v8")]:[]}function dn(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Wt(l){if(Array.isArray(l))return l.map(Wt);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const o={};for(const c in l)o[c]=Wt(l[c]);return o}return dn(l)}function Xi(l){const o=l.key,c=l.value,h=l.valueSpec||{},m=l.objectElementValidators||{},y=l.style,w=l.styleSpec,C=l.validateSpec;let E=[];const I=ln(c);if("object"!==I)return[new Fe(o,c,`object expected, ${I} found`)];for(const P in c){const F=P.split(".")[0],z=h[F]||h["*"];let j;if(m[F])j=m[F];else if(h[F])j=C;else if(m["*"])j=m["*"];else{if(!h["*"]){E.push(new Fe(o,c[P],`unknown property "${P}"`));continue}j=C}E=E.concat(j({key:(o&&`${o}.`)+P,value:c[P],valueSpec:z,style:y,styleSpec:w,object:c,objectKey:P,validateSpec:C},c))}for(const P in h)m[P]||h[P].required&&void 0===h[P].default&&void 0===c[P]&&E.push(new Fe(o,c,`missing required property "${P}"`));return E}function na(l){const o=l.value,c=l.valueSpec,h=l.style,m=l.styleSpec,y=l.key,w=l.arrayElementValidator||l.validateSpec;if("array"!==ln(o))return[new Fe(y,o,`array expected, ${ln(o)} found`)];if(c.length&&o.length!==c.length)return[new Fe(y,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new Fe(y,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let C={type:c.value,values:c.values};m.$version<7&&(C.function=c.function),"object"===ln(c.value)&&(C=c.value);let E=[];for(let I=0;I<o.length;I++)E=E.concat(w({array:o,arrayIndex:I,value:o[I],valueSpec:C,validateSpec:l.validateSpec,style:h,styleSpec:m,key:`${y}[${I}]`}));return E}function Na(l){const o=l.key,c=l.value,h=l.valueSpec;let m=ln(c);return"number"===m&&c!=c&&(m="NaN"),"number"!==m?[new Fe(o,c,`number expected, ${m} found`)]:"minimum"in h&&c<h.minimum?[new Fe(o,c,`${c} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&c>h.maximum?[new Fe(o,c,`${c} is greater than the maximum value ${h.maximum}`)]:[]}function vc(l){const o=l.valueSpec,c=dn(l.value.type);let h,m,y,w={};const C="categorical"!==c&&void 0===l.value.property,E=!C,I="array"===ln(l.value.stops)&&"array"===ln(l.value.stops[0])&&"object"===ln(l.value.stops[0][0]),P=Xi({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(j){if("identity"===c)return[new Fe(j.key,j.value,'identity function may not have a "stops" property')];let U=[];const W=j.value;return U=U.concat(na({key:j.key,value:W,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:F})),"array"===ln(W)&&0===W.length&&U.push(new Fe(j.key,W,"array must have at least one stop")),U},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:o,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return"identity"===c&&C&&P.push(new Fe(l.key,l.value,'missing required property "property"')),"identity"===c||l.value.stops||P.push(new Fe(l.key,l.value,'missing required property "stops"')),"exponential"===c&&l.valueSpec.expression&&!hc(l.valueSpec)&&P.push(new Fe(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(E&&!ea(l.valueSpec)?P.push(new Fe(l.key,l.value,"property functions not supported")):C&&!au(l.valueSpec)&&P.push(new Fe(l.key,l.value,"zoom functions not supported"))),"categorical"!==c&&!I||void 0!==l.value.property||P.push(new Fe(l.key,l.value,'"property" property is required')),P;function F(j){let U=[];const W=j.value,J=j.key;if("array"!==ln(W))return[new Fe(J,W,`array expected, ${ln(W)} found`)];if(2!==W.length)return[new Fe(J,W,`array length 2 expected, length ${W.length} found`)];if(I){if("object"!==ln(W[0]))return[new Fe(J,W,`object expected, ${ln(W[0])} found`)];if(void 0===W[0].zoom)return[new Fe(J,W,"object stop key must have zoom")];if(void 0===W[0].value)return[new Fe(J,W,"object stop key must have value")];if(y&&y>dn(W[0].zoom))return[new Fe(J,W[0].zoom,"stop zoom values must appear in ascending order")];dn(W[0].zoom)!==y&&(y=dn(W[0].zoom),m=void 0,w={}),U=U.concat(Xi({key:`${J}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:Na,value:z}}))}else U=U.concat(z({key:`${J}[0]`,value:W[0],valueSpec:{},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},W));return cd(Wt(W[1]))?U.concat([new Fe(`${J}[1]`,W[1],"expressions are not allowed in function stops.")]):U.concat(j.validateSpec({key:`${J}[1]`,value:W[1],valueSpec:o,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function z(j,U){const W=ln(j.value),J=dn(j.value),ne=null!==j.value?j.value:U;if(h){if(W!==h)return[new Fe(j.key,ne,`${W} stop domain type must match previous stop domain type ${h}`)]}else h=W;if("number"!==W&&"string"!==W&&"boolean"!==W)return[new Fe(j.key,ne,"stop domain value must be a number, string, or boolean")];if("number"!==W&&"categorical"!==c){let le=`number expected, ${W} found`;return ea(o)&&void 0===c&&(le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(j.key,ne,le)]}return"categorical"!==c||"number"!==W||isFinite(J)&&Math.floor(J)===J?"categorical"!==c&&"number"===W&&void 0!==m&&J<m?[new Fe(j.key,ne,"stop domain values must appear in ascending order")]:(m=J,"categorical"===c&&J in w?[new Fe(j.key,ne,"stop domain values must be unique")]:(w[J]=!0,[])):[new Fe(j.key,ne,`integer expected, found ${J}`)]}}function Tr(l){const o=("property"===l.expressionContext?ta:dd)(Wt(l.value),l.valueSpec);if("error"===o.result)return o.value.map(h=>new Fe(`${l.key}${h.key}`,l.value,h.message));const c=o.value.expression||o.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!c.outputDefined())return[new Fe(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!Fo(c))return[new Fe(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext&&!Fo(c))return[new Fe(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!ru(c,["zoom","feature-state"]))return[new Fe(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!iu(c))return[new Fe(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ts(l){const o=l.key,c=l.value,h=l.valueSpec,m=[];return Array.isArray(h.values)?-1===h.values.indexOf(dn(c))&&m.push(new Fe(o,c,`expected one of [${h.values.join(", ")}], ${JSON.stringify(c)} found`)):-1===Object.keys(h.values).indexOf(dn(c))&&m.push(new Fe(o,c,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(c)} found`)),m}function La(l){return fc(Wt(l.value))?Tr(Po({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):cu(l)}function cu(l){const o=l.value,c=l.key;if("array"!==ln(o))return[new Fe(c,o,`array expected, ${ln(o)} found`)];const h=l.styleSpec;let m,y=[];if(o.length<1)return[new Fe(c,o,"filter array must have at least 1 element")];switch(y=y.concat(Ts({key:`${c}[0]`,value:o[0],valueSpec:h.filter_operator,style:l.style,styleSpec:l.styleSpec})),dn(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===dn(o[1])&&y.push(new Fe(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":3!==o.length&&y.push(new Fe(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(m=ln(o[1]),"string"!==m&&y.push(new Fe(`${c}[1]`,o[1],`string expected, ${m} found`)));for(let w=2;w<o.length;w++)m=ln(o[w]),"$type"===dn(o[1])?y=y.concat(Ts({key:`${c}[${w}]`,value:o[w],valueSpec:h.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==m&&"number"!==m&&"boolean"!==m&&y.push(new Fe(`${c}[${w}]`,o[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)y=y.concat(cu({key:`${c}[${w}]`,value:o[w],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":m=ln(o[1]),2!==o.length?y.push(new Fe(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):"string"!==m&&y.push(new Fe(`${c}[1]`,o[1],`string expected, ${m} found`));break;case"within":m=ln(o[1]),2!==o.length?y.push(new Fe(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):"object"!==m&&y.push(new Fe(`${c}[1]`,o[1],`object expected, ${m} found`))}return y}function hd(l,o){const c=l.key,h=l.validateSpec,m=l.style,y=l.styleSpec,w=l.value,C=l.objectKey,E=y[`${o}_${l.layerType}`];if(!E)return[];const I=C.match(/^(.*)-transition$/);if("paint"===o&&I&&E[I[1]]&&E[I[1]].transition)return h({key:c,value:w,valueSpec:y.transition,style:m,styleSpec:y});const P=l.valueSpec||E[C];if(!P)return[new Fe(c,w,`unknown property "${C}"`)];let F;if("string"===ln(w)&&ea(P)&&!P.tokens&&(F=/^{([^}]+)}$/.exec(w)))return[new Fe(c,w,`"${C}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const z=[];return"symbol"===l.layerType&&("text-field"===C&&m&&!m.glyphs&&z.push(new Fe(c,w,'use of "text-field" requires a style "glyphs" property')),"text-font"===C&&Bn(Wt(w))&&"identity"===dn(w.type)&&z.push(new Fe(c,w,'"text-font" does not support identity functions'))),z.concat(h({key:l.key,value:w,valueSpec:P,style:m,styleSpec:y,expressionContext:"property",propertyType:o,propertyKey:C}))}function du(l){return hd(l,"paint")}function uu(l){return hd(l,"layout")}function El(l){let o=[];const c=l.value,h=l.key,m=l.style,y=l.styleSpec;c.type||c.ref||o.push(new Fe(h,c,'either "type" or "ref" is required'));let w=dn(c.type);const C=dn(c.ref);if(c.id){const E=dn(c.id);for(let I=0;I<l.arrayIndex;I++){const P=m.layers[I];dn(P.id)===E&&o.push(new Fe(h,c.id,`duplicate layer id "${c.id}", previously used at line ${P.id.__line__}`))}}if("ref"in c){let E;["type","source","source-layer","filter","layout"].forEach(I=>{I in c&&o.push(new Fe(h,c[I],`"${I}" is prohibited for ref layers`))}),m.layers.forEach(I=>{dn(I.id)===C&&(E=I)}),E?E.ref?o.push(new Fe(h,c.ref,"ref cannot reference another ref layer")):w=dn(E.type):o.push(new Fe(h,c.ref,`ref layer "${C}" not found`))}else if("background"!==w)if(c.source){const E=m.sources&&m.sources[c.source],I=E&&dn(E.type);E?"vector"===I&&"raster"===w?o.push(new Fe(h,c.source,`layer "${c.id}" requires a raster source`)):"raster-dem"!==I&&"hillshade"===w?o.push(new Fe(h,c.source,`layer "${c.id}" requires a raster-dem source`)):"raster"===I&&"raster"!==w?o.push(new Fe(h,c.source,`layer "${c.id}" requires a vector source`)):"vector"!==I||c["source-layer"]?"raster-dem"===I&&"hillshade"!==w?o.push(new Fe(h,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==w||!c.paint||!c.paint["line-gradient"]||"geojson"===I&&E.lineMetrics||o.push(new Fe(h,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Fe(h,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new Fe(h,c.source,`source "${c.source}" not found`))}else o.push(new Fe(h,c,'missing required property "source"'));return o=o.concat(Xi({key:h,value:c,valueSpec:y.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${h}.type`,value:c.type,valueSpec:y.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:c,objectKey:"type"}),filter:La,layout:E=>Xi({layer:c,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>uu(Po({layerType:w},I))}}),paint:E=>Xi({layer:c,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>du(Po({layerType:w},I))}})}})),o}function No(l){const o=l.value,c=l.key,h=ln(o);return"string"!==h?[new Fe(c,o,`string expected, ${h} found`)]:[]}const Ml={promoteId:function({key:l,value:o}){if("string"===ln(o))return No({key:l,value:o});{const c=[];for(const h in o)c.push(...No({key:`${l}.${h}`,value:o[h]}));return c}}};function to(l){const o=l.value,c=l.key,h=l.styleSpec,m=l.style,y=l.validateSpec;if(!o.type)return[new Fe(c,o,'"type" is required')];const w=dn(o.type);let C;switch(w){case"vector":case"raster":return C=Xi({key:c,value:o,valueSpec:h[`source_${w.replace("-","_")}`],style:l.style,styleSpec:h,objectElementValidators:Ml,validateSpec:y}),C;case"raster-dem":return C=function(E){var I;const P=null!==(I=E.sourceName)&&void 0!==I?I:"",F=E.value,z=E.styleSpec,j=z.source_raster_dem,U=E.style;let W=[];const J=ln(F);if(void 0===F)return W;if("object"!==J)return W.push(new Fe("source_raster_dem",F,`object expected, ${J} found`)),W;const ne="custom"===dn(F.encoding),le=["redFactor","greenFactor","blueFactor","baseShift"],oe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const pe in F)!ne&&le.includes(pe)?W.push(new Fe(pe,F[pe],`In "${P}": "${pe}" is only valid when "encoding" is set to "custom". ${oe} encoding found`)):j[pe]?W=W.concat(E.validateSpec({key:pe,value:F[pe],valueSpec:j[pe],validateSpec:E.validateSpec,style:U,styleSpec:z})):W.push(new Fe(pe,F[pe],`unknown property "${pe}"`));return W}({sourceName:c,value:o,style:l.style,styleSpec:h,validateSpec:y}),C;case"geojson":if(C=Xi({key:c,value:o,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:y,objectElementValidators:Ml}),o.cluster)for(const E in o.clusterProperties){const[I,P]=o.clusterProperties[E],F="string"==typeof I?[I,["accumulated"],["get",E]]:I;C.push(...Tr({key:`${c}.${E}.map`,value:P,validateSpec:y,expressionContext:"cluster-map"})),C.push(...Tr({key:`${c}.${E}.reduce`,value:F,validateSpec:y,expressionContext:"cluster-reduce"}))}return C;case"video":return Xi({key:c,value:o,valueSpec:h.source_video,style:m,validateSpec:y,styleSpec:h});case"image":return Xi({key:c,value:o,valueSpec:h.source_image,style:m,validateSpec:y,styleSpec:h});case"canvas":return[new Fe(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ts({key:`${c}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:y,styleSpec:h})}}function Dl(l){const o=l.value,c=l.styleSpec,h=c.light,m=l.style;let y=[];const w=ln(o);if(void 0===o)return y;if("object"!==w)return y=y.concat([new Fe("light",o,`object expected, ${w} found`)]),y;for(const C in o){const E=C.match(/^(.*)-transition$/);y=y.concat(E&&h[E[1]]&&h[E[1]].transition?l.validateSpec({key:C,value:o[C],valueSpec:c.transition,validateSpec:l.validateSpec,style:m,styleSpec:c}):h[C]?l.validateSpec({key:C,value:o[C],valueSpec:h[C],validateSpec:l.validateSpec,style:m,styleSpec:c}):[new Fe(C,o[C],`unknown property "${C}"`)])}return y}function Ah(l){const o=l.value,c=l.styleSpec,h=c.terrain,m=l.style;let y=[];const w=ln(o);if(void 0===o)return y;if("object"!==w)return y=y.concat([new Fe("terrain",o,`object expected, ${w} found`)]),y;for(const C in o)y=y.concat(h[C]?l.validateSpec({key:C,value:o[C],valueSpec:h[C],validateSpec:l.validateSpec,style:m,styleSpec:c}):[new Fe(C,o[C],`unknown property "${C}"`)]);return y}function Ph(l){let o=[];const c=l.value,h=l.key;if(Array.isArray(c)){const m=[],y=[];for(const w in c)c[w].id&&m.includes(c[w].id)&&o.push(new Fe(h,c,`all the sprites' ids must be unique, but ${c[w].id} is duplicated`)),m.push(c[w].id),c[w].url&&y.includes(c[w].url)&&o.push(new Fe(h,c,`all the sprites' URLs must be unique, but ${c[w].url} is duplicated`)),y.push(c[w].url),o=o.concat(Xi({key:`${h}[${w}]`,value:c[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return o}return No({key:h,value:c})}const go={"*":()=>[],array:na,boolean:function(l){const o=l.value,c=l.key,h=ln(o);return"boolean"!==h?[new Fe(c,o,`boolean expected, ${h} found`)]:[]},number:Na,color:function(l){const o=l.key,c=l.value,h=ln(c);return"string"!==h?[new Fe(o,c,`color expected, ${h} found`)]:rn.parse(String(c))?[]:[new Fe(o,c,`color expected, "${c}" found`)]},constants:eo,enum:Ts,filter:La,function:vc,layer:El,object:Xi,source:to,light:Dl,terrain:Ah,string:No,formatted:function(l){return 0===No(l).length?[]:Tr(l)},resolvedImage:function(l){return 0===No(l).length?[]:Tr(l)},padding:function(l){const o=l.key,c=l.value;if("array"===ln(c)){if(c.length<1||c.length>4)return[new Fe(o,c,`padding requires 1 to 4 values; ${c.length} values found`)];const h={type:"number"};let m=[];for(let y=0;y<c.length;y++)m=m.concat(l.validateSpec({key:`${o}[${y}]`,value:c[y],validateSpec:l.validateSpec,valueSpec:h}));return m}return Na({key:o,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(l){const o=l.key,c=l.value,h=ln(c),m=l.styleSpec;if("array"!==h||c.length<1||c.length%2!=0)return[new Fe(o,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let w=0;w<c.length;w+=2)y=y.concat(Ts({key:`${o}[${w}]`,value:c[w],valueSpec:m.layout_symbol["text-anchor"]})),y=y.concat(na({key:`${o}[${w+1}]`,value:c[w+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:m}));return y},sprite:Ph};function ks(l){const o=l.value,c=l.valueSpec,h=l.styleSpec;return l.validateSpec=ks,c.expression&&Bn(dn(o))?vc(l):c.expression&&cd(Wt(o))?Tr(l):c.type&&go[c.type]?go[c.type](l):Xi(Po({},l,{valueSpec:c.type?h[c.type]:c}))}function hu(l){const o=l.value,c=l.key,h=No(l);return h.length||(-1===o.indexOf("{fontstack}")&&h.push(new Fe(c,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&h.push(new Fe(c,o,'"glyphs" url must include a "{range}" token'))),h}function _o(l,o=Se){let c=[];return c=c.concat(ks({key:"",value:l,valueSpec:o.$root,styleSpec:o,style:l,validateSpec:ks,objectElementValidators:{glyphs:hu,"*":()=>[]}})),l.constants&&(c=c.concat(eo({key:"constants",value:l.constants,style:l,styleSpec:o,validateSpec:ks}))),pd(c)}function Es(l){return function(o){return l({...o,validateSpec:ks})}}function pd(l){return[].concat(l).sort((o,c)=>o.line-c.line)}function Ms(l){return function(...o){return pd(l.apply(this,o))}}_o.source=Ms(Es(to)),_o.sprite=Ms(Es(Ph)),_o.glyphs=Ms(Es(hu)),_o.light=Ms(Es(Dl)),_o.terrain=Ms(Es(Ah)),_o.layer=Ms(Es(El)),_o.filter=Ms(Es(La)),_o.paintProperty=Ms(Es(du)),_o.layoutProperty=Ms(Es(uu));const rs=_o,fm=rs.light,pu=rs.paintProperty,Rh=rs.layoutProperty;function ai(l,o){let c=!1;if(o&&o.length)for(const h of o)l.fire(new Ea(new Error(h.message))),c=!0;return c}class Il{constructor(o,c,h){const m=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const w=new Int32Array(this.arrayBuffer);o=w[0],this.d=(c=w[1])+2*(h=w[2]);for(let E=0;E<this.d*this.d;E++){const I=w[3+E],P=w[3+E+1];m.push(I===P?null:w.subarray(I,P))}const C=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],C),this.bboxes=w.subarray(C),this.insert=this._insertReadonly}else{this.d=c+2*h;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=h,this.scale=c/o,this.uid=0;const y=h/c*o;this.min=-y,this.max=o+y}insert(o,c,h,m,y){this._forEachCell(c,h,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,c,h,m,y,w){this.cells[y].push(w)}query(o,c,h,m,y){const w=this.min,C=this.max;if(o<=w&&c<=w&&C<=h&&C<=m&&!y)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(o,c,h,m,this._queryCell,E,{},y),E}}_queryCell(o,c,h,m,y,w,C,E){const I=this.cells[y];if(null!==I){const P=this.keys,F=this.bboxes;for(let z=0;z<I.length;z++){const j=I[z];if(void 0===C[j]){const U=4*j;(E?E(F[U+0],F[U+1],F[U+2],F[U+3]):o<=F[U+2]&&c<=F[U+3]&&h>=F[U+0]&&m>=F[U+1])?(C[j]=!0,w.push(P[j])):C[j]=!1}}}}_forEachCell(o,c,h,m,y,w,C,E){const I=this._convertToCellCoord(o),P=this._convertToCellCoord(c),F=this._convertToCellCoord(h),z=this._convertToCellCoord(m);for(let j=I;j<=F;j++)for(let U=P;U<=z;U++){const W=this.d*U+j;if((!E||E(this._convertFromCellCoord(j),this._convertFromCellCoord(U),this._convertFromCellCoord(j+1),this._convertFromCellCoord(U+1)))&&y.call(this,o,c,h,m,W,w,C,E))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,c=3+this.cells.length+1+1;let h=0;for(let w=0;w<this.cells.length;w++)h+=this.cells[w].length;const m=new Int32Array(c+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=c;for(let w=0;w<o.length;w++){const C=o[w];m[3+w]=y,m.set(C,y),y+=C.length}return m[3+o.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+o.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(o,c){const h=o.toArrayBuffer();return c&&c.push(h),{buffer:h}}static deserialize(o){return new Il(o.buffer)}}const Ds={};function Qe(l,o,c={}){if(Ds[l])throw new Error(`${l} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:l,writeable:!1}),Ds[l]={klass:o,omit:c.omit||[],shallow:c.shallow||[]}}Qe("Object",Object),Qe("TransferableGridIndex",Il),Qe("Color",rn),Qe("Error",Error),Qe("AJAXError",Mn),Qe("ResolvedImage",Zi),Qe("StylePropertyFunction",mc),Qe("StyleExpression",Tl,{omit:["_evaluator"]}),Qe("ZoomDependentExpression",pc),Qe("ZoomConstantExpression",lu),Qe("CompoundExpression",Oo,{omit:["_evaluate"]});for(const l in Ra)Ra[l]._classRegistryKey||Qe(`Expression_${l}`,Ra[l]);function Vn(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&"ArrayBuffer"===l.constructor.name)}function ia(l,o){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob)return l;if(Vn(l)||fl(l))return o&&o.push(l),l;if(ArrayBuffer.isView(l)){const c=l;return o&&o.push(c.buffer),c}if(l instanceof ImageData)return o&&o.push(l.data.buffer),l;if(Array.isArray(l)){const c=[];for(const h of l)c.push(ia(h,o));return c}if("object"==typeof l){const c=l.constructor,h=c._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Ds[h])throw new Error(`${h} is not registered.`);const m=c.serialize?c.serialize(l,o):{};if(c.serialize){if(o&&m===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in l){if(!l.hasOwnProperty(y)||Ds[h].omit.indexOf(y)>=0)continue;const w=l[y];m[y]=Ds[h].shallow.indexOf(y)>=0?w:ia(w,o)}l instanceof Error&&(m.message=l.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==h&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof l)}function za(l){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||Vn(l)||fl(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(za);if("object"==typeof l){const o=l.$name||"Object";if(!Ds[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:c}=Ds[o];if(!c)throw new Error(`can't deserialize unregistered class ${o}`);if(c.deserialize)return c.deserialize(l);const h=Object.create(c.prototype);for(const m of Object.keys(l)){if("$name"===m)continue;const y=l[m];h[m]=Ds[o].shallow.indexOf(m)>=0?y:za(y)}return h}throw new Error("can't deserialize object of type "+typeof l)}class Je{constructor(){this.first=!0}update(o,c){const h=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=c),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=h,!0))}}const Be={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Jt(l){for(const o of l)if(ra(o.charCodeAt(0)))return!0;return!1}function Ii(l){for(const o of l)if(!kr(o.charCodeAt(0)))return!1;return!0}function kr(l){return!(Be.Arabic(l)||Be["Arabic Supplement"](l)||Be["Arabic Extended-A"](l)||Be["Arabic Presentation Forms-A"](l)||Be["Arabic Presentation Forms-B"](l))}function ra(l){return!(746!==l&&747!==l&&(l<4352||!(Be["Bopomofo Extended"](l)||Be.Bopomofo(l)||Be["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Be["CJK Compatibility Ideographs"](l)||Be["CJK Compatibility"](l)||Be["CJK Radicals Supplement"](l)||Be["CJK Strokes"](l)||!(!Be["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||12336===l)||Be["CJK Unified Ideographs Extension A"](l)||Be["CJK Unified Ideographs"](l)||Be["Enclosed CJK Letters and Months"](l)||Be["Hangul Compatibility Jamo"](l)||Be["Hangul Jamo Extended-A"](l)||Be["Hangul Jamo Extended-B"](l)||Be["Hangul Jamo"](l)||Be["Hangul Syllables"](l)||Be.Hiragana(l)||Be["Ideographic Description Characters"](l)||Be.Kanbun(l)||Be["Kangxi Radicals"](l)||Be["Katakana Phonetic Extensions"](l)||Be.Katakana(l)&&12540!==l||!(!Be["Halfwidth and Fullwidth Forms"](l)||65288===l||65289===l||65293===l||l>=65306&&l<=65310||65339===l||65341===l||65343===l||l>=65371&&l<=65503||65507===l||l>=65512&&l<=65519)||!(!Be["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Be["Unified Canadian Aboriginal Syllabics"](l)||Be["Unified Canadian Aboriginal Syllabics Extended"](l)||Be["Vertical Forms"](l)||Be["Yijing Hexagram Symbols"](l)||Be["Yi Syllables"](l)||Be["Yi Radicals"](l))))}function jr(l){return!(ra(l)||(o=l,Be["Latin-1 Supplement"](o)&&(167===o||169===o||174===o||177===o||188===o||189===o||190===o||215===o||247===o)||Be["General Punctuation"](o)&&(8214===o||8224===o||8225===o||8240===o||8241===o||8251===o||8252===o||8258===o||8263===o||8264===o||8265===o||8273===o)||Be["Letterlike Symbols"](o)||Be["Number Forms"](o)||Be["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||9003===o||o>=9085&&o<=9114||o>=9150&&o<=9165||9167===o||o>=9169&&o<=9179||o>=9186&&o<=9215)||Be["Control Pictures"](o)&&9251!==o||Be["Optical Character Recognition"](o)||Be["Enclosed Alphanumerics"](o)||Be["Geometric Shapes"](o)||Be["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Be["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Be["CJK Symbols and Punctuation"](o)||Be.Katakana(o)||Be["Private Use Area"](o)||Be["CJK Compatibility Forms"](o)||Be["Small Form Variants"](o)||Be["Halfwidth and Fullwidth Forms"](o)||8734===o||8756===o||8757===o||o>=9984&&o<=10087||o>=10102&&o<=10131||65532===o||65533===o));var o}function mu(l){return l>=1424&&l<=2303||Be["Arabic Presentation Forms-A"](l)||Be["Arabic Presentation Forms-B"](l)}function fu(l,o){return!(!o&&mu(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Be.Khmer(l))}function md(l){for(const o of l)if(mu(o.charCodeAt(0)))return!0;return!1}const gu="deferred",_u="loading",Qn="loaded";let Ye=null,ft="unavailable",mn=null;const Er=function(l){l&&"string"==typeof l&&l.indexOf("NetworkError")>-1&&(ft="error"),Ye&&Ye(l)};function Ba(){wi.fire(new Xs("pluginStateChange",{pluginStatus:ft,pluginURL:mn}))}const wi=new vl,oa=function(){return ft},li=function(){if(ft!==gu||!mn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ft=_u,Ba(),mn&&ec({url:mn},l=>{l?Er(l):(ft=Qn,Ba())})},Si={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ft===Qn||null!=Si.applyArabicShaping,isLoading:()=>ft===_u,setState(l){if(!Di())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ft=l.pluginStatus,mn=l.pluginURL},isParsed(){if(!Di())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Si.applyArabicShaping&&null!=Si.processBidirectionalText&&null!=Si.processStyledBidirectionalText},getPluginURL(){if(!Di())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return mn}};class fn{constructor(o,c){this.zoom=o,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Je,this.transition={})}isSupportedScript(o){return function(c,h){for(const m of c)if(!fu(m.charCodeAt(0),h))return!1;return!0}(o,Si.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,c=o-Math.floor(o),h=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*c}}}class Tt{constructor(o,c){this.property=o,this.value=c,this.expression=function(h,m){if(Bn(h))return new mc(h,m);if(cd(h)){const y=ta(h,m);if("error"===y.result)throw new Error(y.value.map(w=>`${w.key}: ${w.message}`).join(", "));return y.value}{let y=h;return"color"===m.type&&"string"==typeof h?y=rn.parse(h):"padding"!==m.type||"number"!=typeof h&&!Array.isArray(h)?"variableAnchorOffsetCollection"===m.type&&Array.isArray(h)&&(y=ho.parse(h)):y=Yr.parse(h),{kind:"constant",evaluate:()=>y}}}(void 0===c?o.specification.default:c,o.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(o,c,h){return this.property.possiblyEvaluate(this,o,c,h)}}class Va{constructor(o){this.property=o,this.value=new Tt(o,void 0)}transitioned(o,c){return new ja(this.property,this.value,c,$i({},o.transition,this.transition),o.now)}untransitioned(){return new ja(this.property,this.value,null,{},0)}}class vu{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return zr(this._values[o].value.value)}setValue(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Va(this._values[o].property)),this._values[o].value=new Tt(this._values[o].property,null===c?void 0:zr(c))}getTransition(o){return zr(this._values[o].transition)}setTransition(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Va(this._values[o].property)),this._values[o].transition=zr(c)||void 0}serialize(){const o={};for(const c of Object.keys(this._values)){const h=this.getValue(c);void 0!==h&&(o[c]=h);const m=this.getTransition(c);void 0!==m&&(o[`${c}-transition`]=m)}return o}transitioned(o,c){const h=new ci(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(o,c._values[m]);return h}untransitioned(){const o=new ci(this._properties);for(const c of Object.keys(this._values))o._values[c]=this._values[c].untransitioned();return o}}class ja{constructor(o,c,h,m,y){this.property=o,this.value=c,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,o.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(o,c,h){const m=o.now||0,y=this.value.possiblyEvaluate(o,c,h),w=this.prior;if(w){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return w.possiblyEvaluate(o,c,h);{const C=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,c,h),y,function(E){if(E<=0)return 0;if(E>=1)return 1;const I=E*E,P=I*E;return 4*(E<.5?P:3*(E-I)+P-.75)}(C))}}return y}}class ci{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,c,h){const m=new no(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(o,c,h);return m}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class yc{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return void 0!==this._values[o].value}getValue(o){return zr(this._values[o].value)}setValue(o,c){this._values[o]=new Tt(this._values[o].property,null===c?void 0:zr(c))}serialize(){const o={};for(const c of Object.keys(this._values)){const h=this.getValue(c);void 0!==h&&(o[c]=h)}return o}possiblyEvaluate(o,c,h){const m=new no(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(o,c,h);return m}}class Ci{constructor(o,c,h){this.property=o,this.value=c,this.parameters=h}isConstant(){return"constant"===this.value.kind}constantOr(o){return"constant"===this.value.kind?this.value.value:o}evaluate(o,c,h,m){return this.property.evaluate(this.value,this.parameters,o,c,h,m)}}class no{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class rt{constructor(o){this.specification=o}possiblyEvaluate(o,c){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(c)}interpolate(o,c,h){const m=po[this.specification.type];return m?m(o,c,h):o}}class ut{constructor(o,c){this.specification=o,this.overrides=c}possiblyEvaluate(o,c,h,m){return new Ci(this,"constant"===o.expression.kind||"camera"===o.expression.kind?{kind:"constant",value:o.expression.evaluate(c,null,{},h,m)}:o.expression,c)}interpolate(o,c,h){if("constant"!==o.value.kind||"constant"!==c.value.kind)return o;if(void 0===o.value.value||void 0===c.value.value)return new Ci(this,{kind:"constant",value:void 0},o.parameters);const m=po[this.specification.type];if(m){const y=m(o.value.value,c.value.value,h);return new Ci(this,{kind:"constant",value:y},o.parameters)}return o}evaluate(o,c,h,m,y,w){return"constant"===o.kind?o.value:o.evaluate(c,h,m,y,w)}}class vo extends ut{possiblyEvaluate(o,c,h,m){if(void 0===o.value)return new Ci(this,{kind:"constant",value:void 0},c);if("constant"===o.expression.kind){const y=o.expression.evaluate(c,null,{},h,m),w="resolvedImage"===o.property.specification.type&&"string"!=typeof y?y.name:y,C=this._calculate(w,w,w,c);return new Ci(this,{kind:"constant",value:C},c)}if("camera"===o.expression.kind){const y=this._calculate(o.expression.evaluate({zoom:c.zoom-1}),o.expression.evaluate({zoom:c.zoom}),o.expression.evaluate({zoom:c.zoom+1}),c);return new Ci(this,{kind:"constant",value:y},c)}return new Ci(this,o.expression,c)}evaluate(o,c,h,m,y,w){if("source"===o.kind){const C=o.evaluate(c,h,m,y,w);return this._calculate(C,C,C,c)}return"composite"===o.kind?this._calculate(o.evaluate({zoom:Math.floor(c.zoom)-1},h,m),o.evaluate({zoom:Math.floor(c.zoom)},h,m),o.evaluate({zoom:Math.floor(c.zoom)+1},h,m),c):o.value}_calculate(o,c,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:h,to:c}}interpolate(o){return o}}class Lo{constructor(o){this.specification=o}possiblyEvaluate(o,c,h,m){if(void 0!==o.value){if("constant"===o.expression.kind){const y=o.expression.evaluate(c,null,{},h,m);return this._calculate(y,y,y,c)}return this._calculate(o.expression.evaluate(new fn(Math.floor(c.zoom-1),c)),o.expression.evaluate(new fn(Math.floor(c.zoom),c)),o.expression.evaluate(new fn(Math.floor(c.zoom+1),c)),c)}}_calculate(o,c,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:h,to:c}}interpolate(o){return o}}class Ua{constructor(o){this.specification=o}possiblyEvaluate(o,c,h,m){return!!o.expression.evaluate(c,null,{},h,m)}interpolate(){return!1}}class Gn{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in o){const h=o[c];h.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new Tt(h,void 0),y=this.defaultTransitionablePropertyValues[c]=new Va(h);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate({})}}}Qe("DataDrivenProperty",ut),Qe("DataConstantProperty",rt),Qe("CrossFadedDataDrivenProperty",vo),Qe("CrossFadedProperty",Lo),Qe("ColorRampProperty",Ua);const $t="-transition";class zo extends vl{constructor(o,c){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),c.layout&&(this._unevaluatedLayout=new yc(c.layout)),c.paint)){this._transitionablePaint=new vu(c.paint);for(const h in o.paint)this.setPaintProperty(h,o.paint[h],{validate:!1});for(const h in o.layout)this.setLayoutProperty(h,o.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new no(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return"visibility"===o?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,c,h={}){null!=c&&this._validate(Rh,`layers.${this.id}.layout.${o}`,o,c,h)||("visibility"!==o?this._unevaluatedLayout.setValue(o,c):this.visibility=c)}getPaintProperty(o){return o.endsWith($t)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,c,h={}){if(null!=c&&this._validate(pu,`layers.${this.id}.paint.${o}`,o,c,h))return!1;if(o.endsWith($t))return this._transitionablePaint.setTransition(o.slice(0,-11),c||void 0),!1;{const m=this._transitionablePaint._values[o],y="cross-faded-data-driven"===m.property.specification["property-type"],w=m.value.isDataDriven(),C=m.value;this._transitionablePaint.setValue(o,c),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value;return E.isDataDriven()||w||y||this._handleOverridablePaintPropertyUpdate(o,C,E)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,c,h){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||"none"===this.visibility}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,c){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,c)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Jo(o,(c,h)=>!(void 0===c||"layout"===h&&!Object.keys(c).length||"paint"===h&&!Object.keys(c).length))}_validate(o,c,h,m,y={}){return(!y||!1!==y.validate)&&ai(this,o.call(rs,{key:c,layerType:this.type,objectKey:h,value:m,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const c=this.paint.get(o);if(c instanceof Ci&&ea(c.property.specification)&&("source"===c.value.kind||"composite"===c.value.kind)&&c.value.isStateDependent)return!0}return!1}}const fd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class sa{constructor(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class un{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,c){return o._trim(),c&&(o.isTransferred=!0,c.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function An(l,o=1){let c=0,h=0;return{members:l.map(m=>{const y=fd[m.type].BYTES_PER_ELEMENT,w=c=Bo(c,Math.max(o,y)),C=m.components||1;return h=Math.max(h,y),c+=y*C,{name:m.name,type:m.type,components:C,offset:w}}),size:Bo(c,Math.max(h,o)),alignment:o}}function Bo(l,o){return Math.ceil(l/o)*o}class Is extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,c)}emplace(o,c,h){const m=2*o;return this.int16[m+0]=c,this.int16[m+1]=h,o}}Is.prototype.bytesPerElement=4,Qe("StructArrayLayout2i4",Is);class gi extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=3*o;return this.int16[y+0]=c,this.int16[y+1]=h,this.int16[y+2]=m,o}}gi.prototype.bytesPerElement=6,Qe("StructArrayLayout3i6",gi);class Al extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,h,m)}emplace(o,c,h,m,y){const w=4*o;return this.int16[w+0]=c,this.int16[w+1]=h,this.int16[w+2]=m,this.int16[w+3]=y,o}}Al.prototype.bytesPerElement=8,Qe("StructArrayLayout4i8",Al);class ar extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w){const C=this.length;return this.resize(C+1),this.emplace(C,o,c,h,m,y,w)}emplace(o,c,h,m,y,w,C){const E=6*o;return this.int16[E+0]=c,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=y,this.int16[E+4]=w,this.int16[E+5]=C,o}}ar.prototype.bytesPerElement=12,Qe("StructArrayLayout2i4i12",ar);class Qi extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w){const C=this.length;return this.resize(C+1),this.emplace(C,o,c,h,m,y,w)}emplace(o,c,h,m,y,w,C){const E=4*o,I=8*o;return this.int16[E+0]=c,this.int16[E+1]=h,this.uint8[I+4]=m,this.uint8[I+5]=y,this.uint8[I+6]=w,this.uint8[I+7]=C,o}}Qi.prototype.bytesPerElement=8,Qe("StructArrayLayout2i4ub8",Qi);class aa extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,c)}emplace(o,c,h){const m=2*o;return this.float32[m+0]=c,this.float32[m+1]=h,o}}aa.prototype.bytesPerElement=8,Qe("StructArrayLayout2f8",aa);class As extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,C,E,I,P){const F=this.length;return this.resize(F+1),this.emplace(F,o,c,h,m,y,w,C,E,I,P)}emplace(o,c,h,m,y,w,C,E,I,P,F){const z=10*o;return this.uint16[z+0]=c,this.uint16[z+1]=h,this.uint16[z+2]=m,this.uint16[z+3]=y,this.uint16[z+4]=w,this.uint16[z+5]=C,this.uint16[z+6]=E,this.uint16[z+7]=I,this.uint16[z+8]=P,this.uint16[z+9]=F,o}}As.prototype.bytesPerElement=20,Qe("StructArrayLayout10ui20",As);class Pl extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,C,E,I,P,F,z){const j=this.length;return this.resize(j+1),this.emplace(j,o,c,h,m,y,w,C,E,I,P,F,z)}emplace(o,c,h,m,y,w,C,E,I,P,F,z,j){const U=12*o;return this.int16[U+0]=c,this.int16[U+1]=h,this.int16[U+2]=m,this.int16[U+3]=y,this.uint16[U+4]=w,this.uint16[U+5]=C,this.uint16[U+6]=E,this.uint16[U+7]=I,this.int16[U+8]=P,this.int16[U+9]=F,this.int16[U+10]=z,this.int16[U+11]=j,o}}Pl.prototype.bytesPerElement=24,Qe("StructArrayLayout4i4ui4i24",Pl);class Nt extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=3*o;return this.float32[y+0]=c,this.float32[y+1]=h,this.float32[y+2]=m,o}}Nt.prototype.bytesPerElement=12,Qe("StructArrayLayout3f12",Nt);class v extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint32[1*o+0]=c,o}}v.prototype.bytesPerElement=4,Qe("StructArrayLayout1ul4",v);class s extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,C,E,I){const P=this.length;return this.resize(P+1),this.emplace(P,o,c,h,m,y,w,C,E,I)}emplace(o,c,h,m,y,w,C,E,I,P){const F=10*o,z=5*o;return this.int16[F+0]=c,this.int16[F+1]=h,this.int16[F+2]=m,this.int16[F+3]=y,this.int16[F+4]=w,this.int16[F+5]=C,this.uint32[z+3]=E,this.uint16[F+8]=I,this.uint16[F+9]=P,o}}s.prototype.bytesPerElement=20,Qe("StructArrayLayout6i1ul2ui20",s);class d extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w){const C=this.length;return this.resize(C+1),this.emplace(C,o,c,h,m,y,w)}emplace(o,c,h,m,y,w,C){const E=6*o;return this.int16[E+0]=c,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=y,this.int16[E+4]=w,this.int16[E+5]=C,o}}d.prototype.bytesPerElement=12,Qe("StructArrayLayout2i2i2i12",d);class p extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y){const w=this.length;return this.resize(w+1),this.emplace(w,o,c,h,m,y)}emplace(o,c,h,m,y,w){const C=4*o,E=8*o;return this.float32[C+0]=c,this.float32[C+1]=h,this.float32[C+2]=m,this.int16[E+6]=y,this.int16[E+7]=w,o}}p.prototype.bytesPerElement=16,Qe("StructArrayLayout2f1f2i16",p);class g extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,h,m)}emplace(o,c,h,m,y){const w=12*o,C=3*o;return this.uint8[w+0]=c,this.uint8[w+1]=h,this.float32[C+1]=m,this.float32[C+2]=y,o}}g.prototype.bytesPerElement=12,Qe("StructArrayLayout2ub2f12",g);class x extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=3*o;return this.uint16[y+0]=c,this.uint16[y+1]=h,this.uint16[y+2]=m,o}}x.prototype.bytesPerElement=6,Qe("StructArrayLayout3ui6",x);class T extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,C,E,I,P,F,z,j,U,W,J,ne){const le=this.length;return this.resize(le+1),this.emplace(le,o,c,h,m,y,w,C,E,I,P,F,z,j,U,W,J,ne)}emplace(o,c,h,m,y,w,C,E,I,P,F,z,j,U,W,J,ne,le){const oe=24*o,pe=12*o,ge=48*o;return this.int16[oe+0]=c,this.int16[oe+1]=h,this.uint16[oe+2]=m,this.uint16[oe+3]=y,this.uint32[pe+2]=w,this.uint32[pe+3]=C,this.uint32[pe+4]=E,this.uint16[oe+10]=I,this.uint16[oe+11]=P,this.uint16[oe+12]=F,this.float32[pe+7]=z,this.float32[pe+8]=j,this.uint8[ge+36]=U,this.uint8[ge+37]=W,this.uint8[ge+38]=J,this.uint32[pe+10]=ne,this.int16[oe+22]=le,o}}T.prototype.bytesPerElement=48,Qe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class k extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h,m,y,w,C,E,I,P,F,z,j,U,W,J,ne,le,oe,pe,ge,Ee,We,nt,Ge,Ue,Ve,Ke){const je=this.length;return this.resize(je+1),this.emplace(je,o,c,h,m,y,w,C,E,I,P,F,z,j,U,W,J,ne,le,oe,pe,ge,Ee,We,nt,Ge,Ue,Ve,Ke)}emplace(o,c,h,m,y,w,C,E,I,P,F,z,j,U,W,J,ne,le,oe,pe,ge,Ee,We,nt,Ge,Ue,Ve,Ke,je){const Re=32*o,lt=16*o;return this.int16[Re+0]=c,this.int16[Re+1]=h,this.int16[Re+2]=m,this.int16[Re+3]=y,this.int16[Re+4]=w,this.int16[Re+5]=C,this.int16[Re+6]=E,this.int16[Re+7]=I,this.uint16[Re+8]=P,this.uint16[Re+9]=F,this.uint16[Re+10]=z,this.uint16[Re+11]=j,this.uint16[Re+12]=U,this.uint16[Re+13]=W,this.uint16[Re+14]=J,this.uint16[Re+15]=ne,this.uint16[Re+16]=le,this.uint16[Re+17]=oe,this.uint16[Re+18]=pe,this.uint16[Re+19]=ge,this.uint16[Re+20]=Ee,this.uint16[Re+21]=We,this.uint16[Re+22]=nt,this.uint32[lt+12]=Ge,this.float32[lt+13]=Ue,this.float32[lt+14]=Ve,this.uint16[Re+30]=Ke,this.uint16[Re+31]=je,o}}k.prototype.bytesPerElement=64,Qe("StructArrayLayout8i15ui1ul2f2ui64",k);class M extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.float32[1*o+0]=c,o}}M.prototype.bytesPerElement=4,Qe("StructArrayLayout1f4",M);class A extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=3*o;return this.uint16[6*o+0]=c,this.float32[y+1]=h,this.float32[y+2]=m,o}}A.prototype.bytesPerElement=12,Qe("StructArrayLayout1ui2f12",A);class R extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,o,c,h)}emplace(o,c,h,m){const y=4*o;return this.uint32[2*o+0]=c,this.uint16[y+2]=h,this.uint16[y+3]=m,o}}R.prototype.bytesPerElement=8,Qe("StructArrayLayout1ul2ui8",R);class O extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,c)}emplace(o,c,h){const m=2*o;return this.uint16[m+0]=c,this.uint16[m+1]=h,o}}O.prototype.bytesPerElement=4,Qe("StructArrayLayout2ui4",O);class V extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint16[1*o+0]=c,o}}V.prototype.bytesPerElement=2,Qe("StructArrayLayout1ui2",V);class Z extends un{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,o,c,h,m)}emplace(o,c,h,m,y){const w=4*o;return this.float32[w+0]=c,this.float32[w+1]=h,this.float32[w+2]=m,this.float32[w+3]=y,o}}Z.prototype.bytesPerElement=16,Qe("StructArrayLayout4f16",Z);class q extends sa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ct(this.anchorPointX,this.anchorPointY)}}q.prototype.size=20;class Q extends s{get(o){return new q(this,o)}}Qe("CollisionBoxArray",Q);class $ extends sa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}$.prototype.size=48;class ae extends T{get(o){return new $(this,o)}}Qe("PlacedSymbolArray",ae);class fe extends sa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}fe.prototype.size=64;class te extends k{get(o){return new fe(this,o)}}Qe("SymbolInstanceArray",te);class de extends M{getoffsetX(o){return this.float32[1*o+0]}}Qe("GlyphOffsetArray",de);class _e extends gi{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}Qe("SymbolLineVertexArray",_e);class ve extends sa{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Te extends A{get(o){return new ve(this,o)}}Qe("TextAnchorOffsetArray",Te);class Ae extends sa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ae.prototype.size=8;class Ie extends R{get(o){return new Ae(this,o)}}Qe("FeatureIndexArray",Ie);class ze extends Is{}class $e extends Is{}class Lt extends Is{}class Ne extends ar{}class ht extends Qi{}class ot extends aa{}class gn extends As{}class zt extends Pl{}class Et extends Nt{}class Vt extends v{}class Yn extends d{}class Sn extends g{}class Vi extends x{}class Ti extends O{}const di=An([{name:"a_pos",components:2,type:"Int16"}],4),{members:lr}=di;class _n{constructor(o=[]){this.segments=o}prepareSegment(o,c,h,m){let y=this.segments[this.segments.length-1];return o>_n.MAX_VERTEX_ARRAY_LENGTH&&Wi(`Max vertices per segment is ${_n.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!y||y.vertexLength+o>_n.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:c.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},void 0!==m&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const o of this.segments)for(const c in o.vaos)o.vaos[c].destroy()}static simpleSegment(o,c,h,m){return new _n([{vertexOffset:o,primitiveOffset:c,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Mr(l,o){return 256*(l=Yo(Math.floor(l),0,255))+Yo(Math.floor(o),0,255)}_n.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qe("SegmentVector",_n);const Vo=An([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ha={exports:{}},Yi=function(l,o){var c,h,m,y,w,C,E,I;for(h=l.length-(c=3&l.length),m=o,w=3432918353,C=461845907,I=0;I<h;)E=255&l.charCodeAt(I)|(255&l.charCodeAt(++I))<<8|(255&l.charCodeAt(++I))<<16|(255&l.charCodeAt(++I))<<24,++I,m=27492+(65535&(y=5*(65535&(m=(m^=E=(65535&(E=(E=(65535&E)*w+(((E>>>16)*w&65535)<<16)&4294967295)<<15|E>>>17))*C+(((E>>>16)*C&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(E=0,c){case 3:E^=(255&l.charCodeAt(I+2))<<16;case 2:E^=(255&l.charCodeAt(I+1))<<8;case 1:m^=E=(65535&(E=(E=(65535&(E^=255&l.charCodeAt(I)))*w+(((E>>>16)*w&65535)<<16)&4294967295)<<15|E>>>17))*C+(((E>>>16)*C&65535)<<16)&4294967295}return m^=l.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0},Ur=function(l,o){for(var c,h=l.length,m=o^h,y=0;h>=4;)c=1540483477*(65535&(c=255&l.charCodeAt(y)|(255&l.charCodeAt(++y))<<8|(255&l.charCodeAt(++y))<<16|(255&l.charCodeAt(++y))<<24))+((1540483477*(c>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:m^=(255&l.charCodeAt(y+2))<<16;case 2:m^=(255&l.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&l.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};Ha.exports=Yi,Ha.exports.murmur3=Yi,Ha.exports.murmur2=Ur;var la=be(Ha.exports);class Jn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,c,h,m){this.ids.push(Ai(o)),this.positions.push(c,h,m)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Ai(o);let h=0,m=this.ids.length-1;for(;h<m;){const w=h+m>>1;this.ids[w]>=c?m=w:h=w+1}const y=[];for(;this.ids[h]===c;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(o,c){const h=new Float64Array(o.ids),m=new Uint32Array(o.positions);return dr(h,m,0,h.length-1),c&&c.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(o){const c=new Jn;return c.ids=o.ids,c.positions=o.positions,c.indexed=!0,c}}function Ai(l){const o=+l;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:la(String(l))}function dr(l,o,c,h){for(;c<h;){const m=l[c+h>>1];let y=c-1,w=h+1;for(;;){do{y++}while(l[y]<m);do{w--}while(l[w]>m);if(y>=w)break;_i(l,y,w),_i(o,3*y,3*w),_i(o,3*y+1,3*w+1),_i(o,3*y+2,3*w+2)}w-c<h-w?(dr(l,o,c,w),c=w+1):(dr(l,o,w+1,h),h=w)}}function _i(l,o,c){const h=l[o];l[o]=l[c],l[c]=h}Qe("FeaturePositionMap",Jn);class Ol{constructor(o,c){this.gl=o.gl,this.location=c}}class gd extends Ol{constructor(o,c){super(o,c),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class yu extends Ol{constructor(o,c){super(o,c),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class bu extends Ol{constructor(o,c){super(o,c),this.current=rn.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const gm=new Float32Array(16);function xu(l){return[Mr(255*l.r,255*l.g),Mr(255*l.b,255*l.a)]}class os{constructor(o,c,h){this.value=o,this.uniformNames=c.map(m=>`u_${m}`),this.type=h}setUniform(o,c,h){o.set(h.constantOr(this.value))}getBinding(o,c,h){return"color"===this.type?new bu(o,c):new gd(o,c)}}class ca{constructor(o,c){this.uniformNames=c.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=o.tlbr}setUniform(o,c,h,m){const y="u_pattern_to"===m?this.patternTo:"u_pattern_from"===m?this.patternFrom:"u_pixel_ratio_to"===m?this.pixelRatioTo:"u_pixel_ratio_from"===m?this.pixelRatioFrom:null;y&&o.set(y)}getBinding(o,c,h){return"u_pattern"===h.substr(0,9)?new yu(o,c):new gd(o,c)}}class ss{constructor(o,c,h,m){this.expression=o,this.type=h,this.maxValue=0,this.paintVertexAttributes=c.map(y=>({name:`a_${y}`,type:"Float32",components:"color"===h?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(o,c,h,m,y){const w=this.paintVertexArray.length,C=this.expression.evaluate(new fn(0),c,{},m,[],y);this.paintVertexArray.resize(o),this._setPaintValue(w,o,C)}updatePaintArray(o,c,h,m){const y=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(o,c,y)}_setPaintValue(o,c,h){if("color"===this.type){const m=xu(h);for(let y=o;y<c;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=o;m<c;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class io{constructor(o,c,h,m,y,w){this.expression=o,this.uniformNames=c.map(C=>`u_${C}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=c.map(C=>({name:`a_${C}`,type:"Float32",components:"color"===h?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,c,h,m,y){const w=this.expression.evaluate(new fn(this.zoom),c,{},m,[],y),C=this.expression.evaluate(new fn(this.zoom+1),c,{},m,[],y),E=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(E,o,w,C)}updatePaintArray(o,c,h,m){const y=this.expression.evaluate({zoom:this.zoom},h,m),w=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(o,c,y,w)}_setPaintValue(o,c,h,m){if("color"===this.type){const y=xu(h),w=xu(m);for(let C=o;C<c;C++)this.paintVertexArray.emplace(C,y[0],y[1],w[0],w[1])}else{for(let y=o;y<c;y++)this.paintVertexArray.emplace(y,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,c){const h=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,m=Yo(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);o.set(m)}getBinding(o,c,h){return new gd(o,c)}}class as{constructor(o,c,h,m,y,w){this.expression=o,this.type=c,this.useIntegerZoom=h,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(o,c,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(m,o,c.patterns&&c.patterns[this.layerId],h)}updatePaintArray(o,c,h,m,y){this._setPaintValues(o,c,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(o,c,h,m){if(!m||!h)return;const{min:y,mid:w,max:C}=h,E=m[y],I=m[w],P=m[C];if(E&&I&&P)for(let F=o;F<c;F++)this.zoomInPaintVertexArray.emplace(F,I.tl[0],I.tl[1],I.br[0],I.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],I.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(F,I.tl[0],I.tl[1],I.br[0],I.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],I.pixelRatio,P.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Vo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Vo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Oh{constructor(o,c,h){this.binders={},this._buffers=[];const m=[];for(const y in o.paint._values){if(!h(y))continue;const w=o.paint.get(y);if(!(w instanceof Ci&&ea(w.property.specification)))continue;const C=yo(y,o.type),E=w.value,I=w.property.specification.type,P=w.property.useIntegerZoom,F=w.property.specification["property-type"],z="cross-faded"===F||"cross-faded-data-driven"===F;if("constant"===E.kind)this.binders[y]=z?new ca(E.value,C):new os(E.value,C,I),m.push(`/u_${y}`);else if("source"===E.kind||z){const j=_m(y,I,"source");this.binders[y]=z?new as(E,I,P,c,j,o.id):new ss(E,C,I,j),m.push(`/a_${y}`)}else{const j=_m(y,I,"composite");this.binders[y]=new io(E,C,I,P,c,j),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(o){const c=this.binders[o];return c instanceof ss||c instanceof io?c.maxValue:0}populatePaintArrays(o,c,h,m,y){for(const w in this.binders){const C=this.binders[w];(C instanceof ss||C instanceof io||C instanceof as)&&C.populatePaintArray(o,c,h,m,y)}}setConstantPatternPositions(o,c){for(const h in this.binders){const m=this.binders[h];m instanceof ca&&m.setConstantPatternPositions(o,c)}}updatePaintArrays(o,c,h,m,y){let w=!1;for(const C in o){const E=c.getPositions(C);for(const I of E){const P=h.feature(I.index);for(const F in this.binders){const z=this.binders[F];if((z instanceof ss||z instanceof io||z instanceof as)&&!0===z.expression.isStateDependent){const j=m.paint.get(F);z.expression=j.value,z.updatePaintArray(I.start,I.end,P,o[C],y),w=!0}}}}return w}defines(){const o=[];for(const c in this.binders){const h=this.binders[c];(h instanceof os||h instanceof ca)&&o.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return o}getBinderAttributes(){const o=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof ss||h instanceof io)for(let m=0;m<h.paintVertexAttributes.length;m++)o.push(h.paintVertexAttributes[m].name);else if(h instanceof as)for(let m=0;m<Vo.members.length;m++)o.push(Vo.members[m].name)}return o}getBinderUniforms(){const o=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof os||h instanceof ca||h instanceof io)for(const m of h.uniformNames)o.push(m)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,c){const h=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof os||y instanceof ca||y instanceof io)for(const w of y.uniformNames)if(c[w]){const C=y.getBinding(o,c[w],w);h.push({name:w,property:m,binding:C})}}return h}setUniforms(o,c,h,m){for(const{name:y,property:w,binding:C}of c)this.binders[w].setUniform(C,m,h.get(w),y)}updatePaintBuffers(o){this._buffers=[];for(const c in this.binders){const h=this.binders[c];if(o&&h instanceof as){const m=2===o.fromScale?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof ss||h instanceof io)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(o){for(const c in this.binders){const h=this.binders[c];(h instanceof ss||h instanceof io||h instanceof as)&&h.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const c=this.binders[o];(c instanceof ss||c instanceof io||c instanceof as)&&c.destroy()}}}class Ps{constructor(o,c,h=(()=>!0)){this.programConfigurations={};for(const m of o)this.programConfigurations[m.id]=new Oh(m,c,h);this.needsUpload=!1,this._featureMap=new Jn,this._bufferOffset=0}populatePaintArrays(o,c,h,m,y,w){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(o,c,m,y,w);void 0!==c.id&&this._featureMap.add(c.id,h,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,c,h,m){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(o,this._featureMap,c,y,m)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function yo(l,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${o}-`,"").replace(/-/g,"_")]}function _m(l,o,c){const m={"line-pattern":{source:gn,composite:gn},"fill-pattern":{source:gn,composite:gn},"fill-extrusion-pattern":{source:gn,composite:gn}}[l];return m&&m[c]||{color:{source:aa,composite:Z},number:{source:M,composite:aa}}[o][c]}Qe("ConstantBinder",os),Qe("CrossFadedConstantBinder",ca),Qe("SourceExpressionBinder",ss),Qe("CrossFadedCompositeBinder",as),Qe("CompositeExpressionBinder",io),Qe("ProgramConfiguration",Oh,{omit:["_buffers"]}),Qe("ProgramConfigurationSet",Ps);const ki=8192,vm=Math.pow(2,14)-1,ym=-vm-1;function Fl(l){const o=ki/l.extent,c=l.loadGeometry();for(let h=0;h<c.length;h++){const m=c[h];for(let y=0;y<m.length;y++){const w=m[y],C=Math.round(w.x*o),E=Math.round(w.y*o);w.x=Yo(C,ym,vm),w.y=Yo(E,ym,vm),(C<w.x||C>w.x+1||E<w.y||E>w.y+1)&&Wi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function xc(l,o){return{type:l.type,id:l.id,properties:l.properties,geometry:o?Fl(l):[]}}function _d(l,o,c,h,m){l.emplaceBack(2*o+(h+1)/2,2*c+(m+1)/2)}class bm{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new $e,this.indexArray=new Vi,this.segments=new _n,this.programConfigurations=new Ps(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,h){const m=this.layers[0],y=[];let w=null,C=!1;"circle"===m.type&&(w=m.layout.get("circle-sort-key"),C=!w.isConstant());for(const{feature:E,id:I,index:P,sourceLayerIndex:F}of o){const z=this.layers[0]._featureFilter.needGeometry,j=xc(E,z);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),j,h))continue;const U=C?w.evaluate(j,{},h):void 0,W={id:I,properties:E.properties,type:E.type,sourceLayerIndex:F,index:P,geometry:z?j.geometry:Fl(E),patterns:{},sortKey:U};y.push(W)}C&&y.sort((E,I)=>E.sortKey-I.sortKey);for(const E of y){const{geometry:I,index:P,sourceLayerIndex:F}=E,z=o[P].feature;this.addFeature(E,I,P,h),c.featureIndex.insert(z,I,P,F,this.index)}}update(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,lr),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,c,h,m){for(const y of c)for(const w of y){const C=w.x,E=w.y;if(C<0||C>=ki||E<0||E>=ki)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),P=I.vertexLength;_d(this.layoutVertexArray,C,E,-1,-1),_d(this.layoutVertexArray,C,E,1,-1),_d(this.layoutVertexArray,C,E,1,1),_d(this.layoutVertexArray,C,E,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+3,P+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,{},m)}}function Rs(l,o){for(let c=0;c<l.length;c++)if(Os(o,l[c]))return!0;for(let c=0;c<o.length;c++)if(Os(l,o[c]))return!0;return!!wu(l,o)}function Rg(l,o,c){return!!Os(l,o)||!!Hr(o,l,c)}function xm(l,o){if(1===l.length)return wm(o,l[0]);for(let c=0;c<o.length;c++){const h=o[c];for(let m=0;m<h.length;m++)if(Os(l,h[m]))return!0}for(let c=0;c<l.length;c++)if(wm(o,l[c]))return!0;for(let c=0;c<o.length;c++)if(wu(l,o[c]))return!0;return!1}function ei(l,o,c){if(l.length>1){if(wu(l,o))return!0;for(let h=0;h<o.length;h++)if(Hr(o[h],l,c))return!0}for(let h=0;h<l.length;h++)if(Hr(l[h],o,c))return!0;return!1}function wu(l,o){if(0===l.length||0===o.length)return!1;for(let c=0;c<l.length-1;c++){const h=l[c],m=l[c+1];for(let y=0;y<o.length-1;y++)if(Fh(h,m,o[y],o[y+1]))return!0}return!1}function Fh(l,o,c,h){return Xr(l,c,h)!==Xr(o,c,h)&&Xr(l,o,c)!==Xr(l,o,h)}function Hr(l,o,c){const h=c*c;if(1===o.length)return l.distSqr(o[0])<h;for(let m=1;m<o.length;m++)if(Og(l,o[m-1],o[m])<h)return!0;return!1}function Og(l,o,c){const h=o.distSqr(c);if(0===h)return l.distSqr(o);const m=((l.x-o.x)*(c.x-o.x)+(l.y-o.y)*(c.y-o.y))/h;return l.distSqr(m<0?o:m>1?c:c.sub(o)._mult(m)._add(o))}function wm(l,o){let c,h,m,y=!1;for(let w=0;w<l.length;w++){c=l[w];for(let C=0,E=c.length-1;C<c.length;E=C++)h=c[C],m=c[E],h.y>o.y!=m.y>o.y&&o.x<(m.x-h.x)*(o.y-h.y)/(m.y-h.y)+h.x&&(y=!y)}return y}function Os(l,o){let c=!1;for(let h=0,m=l.length-1;h<l.length;m=h++){const y=l[h],w=l[m];y.y>o.y!=w.y>o.y&&o.x<(w.x-y.x)*(o.y-y.y)/(w.y-y.y)+y.x&&(c=!c)}return c}function jo(l,o,c){const h=c[0],m=c[2];if(l.x<h.x&&o.x<h.x||l.x>m.x&&o.x>m.x||l.y<h.y&&o.y<h.y||l.y>m.y&&o.y>m.y)return!1;const y=Xr(l,o,c[0]);return y!==Xr(l,o,c[1])||y!==Xr(l,o,c[2])||y!==Xr(l,o,c[3])}function Su(l,o,c){const h=o.paint.get(l).value;return"constant"===h.kind?h.value:c.programConfigurations.get(o.id).getMaxValue(l)}function Nh(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Lh(l,o,c,h,m){if(!o[0]&&!o[1])return l;const y=ct.convert(o)._mult(m);"viewport"===c&&y._rotate(-h);const w=[];for(let C=0;C<l.length;C++)w.push(l[C].sub(y));return w}let Ga,Sm;Qe("CircleBucket",bm,{omit:["layers"]});var jy={get paint(){return Sm=Sm||new Gn({"circle-radius":new ut(Se.paint_circle["circle-radius"]),"circle-color":new ut(Se.paint_circle["circle-color"]),"circle-blur":new ut(Se.paint_circle["circle-blur"]),"circle-opacity":new ut(Se.paint_circle["circle-opacity"]),"circle-translate":new rt(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new rt(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new rt(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new rt(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ut(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ut(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ut(Se.paint_circle["circle-stroke-opacity"])})},get layout(){return Ga=Ga||new Gn({"circle-sort-key":new ut(Se.layout_circle["circle-sort-key"])})}},Dr=1e-6,wc=typeof Float32Array<"u"?Float32Array:Array;function zh(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Fg(l,o,c){var h=o[0],m=o[1],y=o[2],w=o[3],C=o[4],E=o[5],I=o[6],P=o[7],F=o[8],z=o[9],j=o[10],U=o[11],W=o[12],J=o[13],ne=o[14],le=o[15],oe=c[0],pe=c[1],ge=c[2],Ee=c[3];return l[0]=oe*h+pe*C+ge*F+Ee*W,l[1]=oe*m+pe*E+ge*z+Ee*J,l[2]=oe*y+pe*I+ge*j+Ee*ne,l[3]=oe*w+pe*P+ge*U+Ee*le,l[4]=(oe=c[4])*h+(pe=c[5])*C+(ge=c[6])*F+(Ee=c[7])*W,l[5]=oe*m+pe*E+ge*z+Ee*J,l[6]=oe*y+pe*I+ge*j+Ee*ne,l[7]=oe*w+pe*P+ge*U+Ee*le,l[8]=(oe=c[8])*h+(pe=c[9])*C+(ge=c[10])*F+(Ee=c[11])*W,l[9]=oe*m+pe*E+ge*z+Ee*J,l[10]=oe*y+pe*I+ge*j+Ee*ne,l[11]=oe*w+pe*P+ge*U+Ee*le,l[12]=(oe=c[12])*h+(pe=c[13])*C+(ge=c[14])*F+(Ee=c[15])*W,l[13]=oe*m+pe*E+ge*z+Ee*J,l[14]=oe*y+pe*I+ge*j+Ee*ne,l[15]=oe*w+pe*P+ge*U+Ee*le,l}Math.hypot||(Math.hypot=function(){for(var l=0,o=arguments.length;o--;)l+=arguments[o]*arguments[o];return Math.sqrt(l)});var bt,Ng=Fg;function Cm(l,o,c){var h=o[0],m=o[1],y=o[2],w=o[3];return l[0]=c[0]*h+c[4]*m+c[8]*y+c[12]*w,l[1]=c[1]*h+c[5]*m+c[9]*y+c[13]*w,l[2]=c[2]*h+c[6]*m+c[10]*y+c[14]*w,l[3]=c[3]*h+c[7]*m+c[11]*y+c[15]*w,l}bt=new wc(4),wc!=Float32Array&&(bt[0]=0,bt[1]=0,bt[2]=0,bt[3]=0);class Uy extends zo{constructor(o){super(o,jy)}createBucket(o){return new bm(o)}queryRadius(o){const c=o;return Su("circle-radius",this,c)+Su("circle-stroke-width",this,c)+Nh(this.paint.get("circle-translate"))}queryIntersectsFeature(o,c,h,m,y,w,C,E){const I=Lh(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,C),P=this.paint.get("circle-radius").evaluate(c,h)+this.paint.get("circle-stroke-width").evaluate(c,h),F="map"===this.paint.get("circle-pitch-alignment"),z=F?I:(W=E,I.map(J=>Lg(J,W))),j=F?P*C:P;var W;for(const U of m)for(const W of U){const J=F?W:Lg(W,E);let ne=j;const le=Cm([],[W.x,W.y,0,1],E);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ne*=le[3]/w.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ne*=w.cameraToCenterDistance/le[3]),Rg(z,J,ne))return!0}return!1}}function Lg(l,o){const c=Cm([],[l.x,l.y,0,1],o);return new ct(c[0]/c[3],c[1]/c[3])}class zg extends bm{}let Tm;Qe("HeatmapBucket",zg,{omit:["layers"]});var vd={get paint(){return Tm=Tm||new Gn({"heatmap-radius":new ut(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ut(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new rt(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ua(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new rt(Se.paint_heatmap["heatmap-opacity"])})}};function km(l,{width:o,height:c},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==o*c*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${o*c*h}`)}else m=new Uint8Array(o*c*h);return l.width=o,l.height=c,l.data=m,l}function Bg(l,{width:o,height:c},h){if(o===l.width&&c===l.height)return;const m=km({},{width:o,height:c},h);Em(l,m,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,o),height:Math.min(l.height,c)},h),l.width=o,l.height=c,l.data=m.data}function Em(l,o,c,h,m,y){if(0===m.width||0===m.height)return o;if(m.width>l.width||m.height>l.height||c.x>l.width-m.width||c.y>l.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>o.width||m.height>o.height||h.x>o.width-m.width||h.y>o.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=l.data,C=o.data;if(w===C)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<m.height;E++){const I=((c.y+E)*l.width+c.x)*y,P=((h.y+E)*o.width+h.x)*y;for(let F=0;F<m.width*y;F++)C[P+F]=w[I+F]}return o}class Cu{constructor(o,c){km(this,o,1,c)}resize(o){Bg(this,o,1)}clone(){return new Cu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,h,m,y){Em(o,c,h,m,y,1)}}class Uo{constructor(o,c){km(this,o,4,c)}resize(o){Bg(this,o,4)}replace(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Uo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,h,m,y){Em(o,c,h,m,y,4)}}function Pe(l){const o={},c=l.resolution||256,h=l.clips?l.clips.length:1,m=l.image||new Uo({width:c,height:h});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const y=(w,C,E)=>{o[l.evaluationKey]=E;const I=l.expression.evaluate(o);m.data[w+C+0]=Math.floor(255*I.r/I.a),m.data[w+C+1]=Math.floor(255*I.g/I.a),m.data[w+C+2]=Math.floor(255*I.b/I.a),m.data[w+C+3]=Math.floor(255*I.a)};if(l.clips)for(let w=0,C=0;w<h;++w,C+=4*c)for(let E=0,I=0;E<c;E++,I+=4){const P=E/(c-1),{start:F,end:z}=l.clips[w];y(C,I,F*(1-P)+z*P)}else for(let w=0,C=0;w<c;w++,C+=4)y(0,C,w/(c-1));return m}Qe("AlphaImage",Cu),Qe("RGBAImage",Uo);class hn extends zo{createBucket(o){return new zg(o)}constructor(o){super(o,vd),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Pe({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Nl;var Sc={get paint(){return Nl=Nl||new Gn({"hillshade-illumination-direction":new rt(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new rt(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new rt(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new rt(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new rt(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new rt(Se.paint_hillshade["hillshade-accent-color"])})}};class Ir extends zo{constructor(o){super(o,Sc)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const Vg=An([{name:"a_pos",components:2,type:"Int16"}],4),{members:Tu}=Vg;var ls={exports:{}};function yd(l,o,c){c=c||2;var h,m,y,w,C,E,I,P=o&&o.length,F=P?o[0]*c:l.length,z=Bh(l,0,F,c,!0),j=[];if(!z||z.next===z.prev)return j;if(P&&(z=function(W,J,ne,le){var oe,pe,ge,Ee=[];for(oe=0,pe=J.length;oe<pe;oe++)(ge=Bh(W,J[oe]*le,oe<pe-1?J[oe+1]*le:W.length,le,!1))===ge.next&&(ge.steiner=!0),Ee.push(Gy(ge));for(Ee.sort(bd),oe=0;oe<Ee.length;oe++)ne=Wa(Ee[oe],ne);return ne}(l,o,z,c)),l.length>80*c){h=y=l[0],m=w=l[1];for(var U=c;U<F;U+=c)(C=l[U])<h&&(h=C),(E=l[U+1])<m&&(m=E),C>y&&(y=C),E>w&&(w=E);I=0!==(I=Math.max(y-h,w-m))?32767/I:0}return Vh(z,j,c,h,m,I,0),j}function Bh(l,o,c,h,m){var y,w;if(m===Mu(l,o,c,h)>0)for(y=o;y<c;y+=h)w=Im(y,l[y],l[y+1],w);else for(y=c-h;y>=o;y-=h)w=Im(y,l[y],l[y+1],w);return w&&ku(w,w.next)&&(wd(w),w=w.next),w}function Cc(l,o){if(!l)return l;o||(o=l);var c,h=l;do{if(c=!1,h.steiner||!ku(h,h.next)&&0!==ri(h.prev,h,h.next))h=h.next;else{if(wd(h),(h=o=h.prev)===h.next)break;c=!0}}while(c||h!==o);return o}function Vh(l,o,c,h,m,y,w){if(l){!w&&y&&function(P,F,z,j){var U=P;do{0===U.z&&(U.z=jh(U.x,U.y,F,z,j)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next}while(U!==P);U.prevZ.nextZ=null,U.prevZ=null,function(W){var J,ne,le,oe,pe,ge,Ee,We,nt=1;do{for(ne=W,W=null,pe=null,ge=0;ne;){for(ge++,le=ne,Ee=0,J=0;J<nt&&(Ee++,le=le.nextZ);J++);for(We=nt;Ee>0||We>0&&le;)0!==Ee&&(0===We||!le||ne.z<=le.z)?(oe=ne,ne=ne.nextZ,Ee--):(oe=le,le=le.nextZ,We--),pe?pe.nextZ=oe:W=oe,oe.prevZ=pe,pe=oe;ne=le}pe.nextZ=null,nt*=2}while(ge>1)}(U)}(l,h,m,y);for(var C,E,I=l;l.prev!==l.next;)if(C=l.prev,E=l.next,y?ro(l,h,m,y):jg(l))o.push(C.i/c|0),o.push(l.i/c|0),o.push(E.i/c|0),wd(l),l=E.next,I=E.next;else if((l=E)===I){w?1===w?Vh(l=$a(Cc(l),o,c),o,c,h,m,y,2):2===w&&Ug(l,o,c,h,m,y):Vh(Cc(l),o,c,h,m,y,1);break}}}function jg(l){var o=l.prev,c=l,h=l.next;if(ri(o,c,h)>=0)return!1;for(var m=o.x,y=c.x,w=h.x,C=o.y,E=c.y,I=h.y,P=m<y?m<w?m:w:y<w?y:w,F=C<E?C<I?C:I:E<I?E:I,z=m>y?m>w?m:w:y>w?y:w,j=C>E?C>I?C:I:E>I?E:I,U=h.next;U!==o;){if(U.x>=P&&U.x<=z&&U.y>=F&&U.y<=j&&xd(m,C,y,E,w,I,U.x,U.y)&&ri(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function ro(l,o,c,h){var m=l.prev,y=l,w=l.next;if(ri(m,y,w)>=0)return!1;for(var C=m.x,E=y.x,I=w.x,P=m.y,F=y.y,z=w.y,j=C<E?C<I?C:I:E<I?E:I,U=P<F?P<z?P:z:F<z?F:z,W=C>E?C>I?C:I:E>I?E:I,J=P>F?P>z?P:z:F>z?F:z,ne=jh(j,U,o,c,h),le=jh(W,J,o,c,h),oe=l.prevZ,pe=l.nextZ;oe&&oe.z>=ne&&pe&&pe.z<=le;){if(oe.x>=j&&oe.x<=W&&oe.y>=U&&oe.y<=J&&oe!==m&&oe!==w&&xd(C,P,E,F,I,z,oe.x,oe.y)&&ri(oe.prev,oe,oe.next)>=0||(oe=oe.prevZ,pe.x>=j&&pe.x<=W&&pe.y>=U&&pe.y<=J&&pe!==m&&pe!==w&&xd(C,P,E,F,I,z,pe.x,pe.y)&&ri(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;oe&&oe.z>=ne;){if(oe.x>=j&&oe.x<=W&&oe.y>=U&&oe.y<=J&&oe!==m&&oe!==w&&xd(C,P,E,F,I,z,oe.x,oe.y)&&ri(oe.prev,oe,oe.next)>=0)return!1;oe=oe.prevZ}for(;pe&&pe.z<=le;){if(pe.x>=j&&pe.x<=W&&pe.y>=U&&pe.y<=J&&pe!==m&&pe!==w&&xd(C,P,E,F,I,z,pe.x,pe.y)&&ri(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function $a(l,o,c){var h=l;do{var m=h.prev,y=h.next.next;!ku(m,y)&&Uh(m,h,h.next,y)&&Tc(m,y)&&Tc(y,m)&&(o.push(m.i/c|0),o.push(h.i/c|0),o.push(y.i/c|0),wd(h),wd(h.next),h=l=y),h=h.next}while(h!==l);return Cc(h)}function Ug(l,o,c,h,m,y){var w=l;do{for(var C=w.next.next;C!==w.prev;){if(w.i!==C.i&&Mm(w,C)){var E=Dm(w,C);return w=Cc(w,w.next),E=Cc(E,E.next),Vh(w,o,c,h,m,y,0),void Vh(E,o,c,h,m,y,0)}C=C.next}w=w.next}while(w!==l)}function bd(l,o){return l.x-o.x}function Wa(l,o){var c=function(m,y){var w,C=y,E=m.x,I=m.y,P=-1/0;do{if(I<=C.y&&I>=C.next.y&&C.next.y!==C.y){var F=C.x+(I-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(F<=E&&F>P&&(P=F,w=C.x<C.next.x?C:C.next,F===E))return w}C=C.next}while(C!==y);if(!w)return null;var z,j=w,U=w.x,W=w.y,J=1/0;C=w;do{E>=C.x&&C.x>=U&&E!==C.x&&xd(I<W?E:P,I,U,W,I<W?P:E,I,C.x,C.y)&&(z=Math.abs(I-C.y)/(E-C.x),Tc(C,m)&&(z<J||z===J&&(C.x>w.x||C.x===w.x&&Hy(w,C)))&&(w=C,J=z)),C=C.next}while(C!==j);return w}(l,o);if(!c)return o;var h=Dm(c,l);return Cc(h,h.next),Cc(c,c.next)}function Hy(l,o){return ri(l.prev,l,o.prev)<0&&ri(o.next,l,l.next)<0}function jh(l,o,c,h,m){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-c)*m|0)|l<<8))|l<<4))|l<<2))|l<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-h)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function Gy(l){var o=l,c=l;do{(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next}while(o!==l);return c}function xd(l,o,c,h,m,y,w,C){return(m-w)*(o-C)>=(l-w)*(y-C)&&(l-w)*(h-C)>=(c-w)*(o-C)&&(c-w)*(y-C)>=(m-w)*(h-C)}function Mm(l,o){return l.next.i!==o.i&&l.prev.i!==o.i&&!function(c,h){var m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==h.i&&m.next.i!==h.i&&Uh(m,m.next,c,h))return!0;m=m.next}while(m!==c);return!1}(l,o)&&(Tc(l,o)&&Tc(o,l)&&function(c,h){var m=c,y=!1,w=(c.x+h.x)/2,C=(c.y+h.y)/2;do{m.y>C!=m.next.y>C&&m.next.y!==m.y&&w<(m.next.x-m.x)*(C-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next}while(m!==c);return y}(l,o)&&(ri(l.prev,l,o.prev)||ri(l,o.prev,o))||ku(l,o)&&ri(l.prev,l,l.next)>0&&ri(o.prev,o,o.next)>0)}function ri(l,o,c){return(o.y-l.y)*(c.x-o.x)-(o.x-l.x)*(c.y-o.y)}function ku(l,o){return l.x===o.x&&l.y===o.y}function Uh(l,o,c,h){var m=Eu(ri(l,o,c)),y=Eu(ri(l,o,h)),w=Eu(ri(c,h,l)),C=Eu(ri(c,h,o));return m!==y&&w!==C||!(0!==m||!Hh(l,c,o))||!(0!==y||!Hh(l,h,o))||!(0!==w||!Hh(c,l,h))||!(0!==C||!Hh(c,o,h))}function Hh(l,o,c){return o.x<=Math.max(l.x,c.x)&&o.x>=Math.min(l.x,c.x)&&o.y<=Math.max(l.y,c.y)&&o.y>=Math.min(l.y,c.y)}function Eu(l){return l>0?1:l<0?-1:0}function Tc(l,o){return ri(l.prev,l,l.next)<0?ri(l,o,l.next)>=0&&ri(l,l.prev,o)>=0:ri(l,o,l.prev)<0||ri(l,l.next,o)<0}function Dm(l,o){var c=new Gh(l.i,l.x,l.y),h=new Gh(o.i,o.x,o.y),m=l.next,y=o.prev;return l.next=o,o.prev=l,c.next=m,m.prev=c,h.next=c,c.prev=h,y.next=h,h.prev=y,h}function Im(l,o,c,h){var m=new Gh(l,o,c);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function wd(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Gh(l,o,c){this.i=l,this.x=o,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mu(l,o,c,h){for(var m=0,y=o,w=c-h;y<c;y+=h)m+=(l[w]-l[y])*(l[y+1]+l[w+1]),w=y;return m}ls.exports=yd,ls.exports.default=yd,yd.deviation=function(l,o,c,h){var m=o&&o.length,y=Math.abs(Mu(l,0,m?o[0]*c:l.length,c));if(m)for(var w=0,C=o.length;w<C;w++)y-=Math.abs(Mu(l,o[w]*c,w<C-1?o[w+1]*c:l.length,c));var E=0;for(w=0;w<h.length;w+=3){var I=h[w]*c,P=h[w+1]*c,F=h[w+2]*c;E+=Math.abs((l[I]-l[F])*(l[P+1]-l[I+1])-(l[I]-l[P])*(l[F+1]-l[I+1]))}return 0===y&&0===E?0:Math.abs((E-y)/y)},yd.flatten=function(l){for(var o=l[0][0].length,c={vertices:[],holes:[],dimensions:o},h=0,m=0;m<l.length;m++){for(var y=0;y<l[m].length;y++)for(var w=0;w<o;w++)c.vertices.push(l[m][y][w]);m>0&&c.holes.push(h+=l[m-1].length)}return c};var Hg=be(ls.exports);function $y(l,o,c,h,m){Gr(l,o,c||0,h||l.length-1,m||vi)}function Gr(l,o,c,h,m){for(;h>c;){if(h-c>600){var y=h-c+1,w=o-c+1,C=Math.log(y),E=.5*Math.exp(2*C/3),I=.5*Math.sqrt(C*E*(y-E)/y)*(w-y/2<0?-1:1);Gr(l,o,Math.max(c,Math.floor(o-w*E/y+I)),Math.min(h,Math.floor(o+(y-w)*E/y+I)),m)}var P=l[o],F=c,z=h;for(Fs(l,c,o),m(l[h],P)>0&&Fs(l,c,h);F<z;){for(Fs(l,F,z),F++,z--;m(l[F],P)<0;)F++;for(;m(l[z],P)>0;)z--}0===m(l[c],P)?Fs(l,c,z):Fs(l,++z,h),z<=o&&(c=z+1),o<=z&&(h=z-1)}}function Fs(l,o,c){var h=l[o];l[o]=l[c],l[c]=h}function vi(l,o){return l<o?-1:l>o?1:0}function $h(l,o){const c=l.length;if(c<=1)return[l];const h=[];let m,y;for(let w=0;w<c;w++){const C=Do(l[w]);0!==C&&(l[w].area=Math.abs(C),void 0===y&&(y=C<0),y===C<0?(m&&h.push(m),m=[l[w]]):m.push(l[w]))}if(m&&h.push(m),o>1)for(let w=0;w<h.length;w++)h[w].length<=o||($y(h[w],o,1,h[w].length-1,Wy),h[w]=h[w].slice(0,o));return h}function Wy(l,o){return o.area-l.area}function Wh(l,o,c){const h=c.patternDependencies;let m=!1;for(const y of o){const w=y.paint.get(`${l}-pattern`);w.isConstant()||(m=!0);const C=w.constantOr(null);C&&(m=!0,h[C.to]=!0,h[C.from]=!0)}return m}function Am(l,o,c,h,m){const y=m.patternDependencies;for(const w of o){const C=w.paint.get(`${l}-pattern`).value;if("constant"!==C.kind){let E=C.evaluate({zoom:h-1},c,{},m.availableImages),I=C.evaluate({zoom:h},c,{},m.availableImages),P=C.evaluate({zoom:h+1},c,{},m.availableImages);E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,P=P&&P.name?P.name:P,y[E]=!0,y[I]=!0,y[P]=!0,c.patterns[w.id]={min:E,mid:I,max:P}}}return c}class qh{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Lt,this.indexArray=new Vi,this.indexArray2=new Ti,this.programConfigurations=new Ps(o.layers,o.zoom),this.segments=new _n,this.segments2=new _n,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,h){this.hasPattern=Wh("fill",this.layers,c);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),w=[];for(const{feature:C,id:E,index:I,sourceLayerIndex:P}of o){const F=this.layers[0]._featureFilter.needGeometry,z=xc(C,F);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),z,h))continue;const j=y?m.evaluate(z,{},h,c.availableImages):void 0,U={id:E,properties:C.properties,type:C.type,sourceLayerIndex:P,index:I,geometry:F?z.geometry:Fl(C),patterns:{},sortKey:j};w.push(U)}y&&w.sort((C,E)=>C.sortKey-E.sortKey);for(const C of w){const{geometry:E,index:I,sourceLayerIndex:P}=C;if(this.hasPattern){const F=Am("fill",this.layers,C,this.zoom,c);this.patternFeatures.push(F)}else this.addFeature(C,E,I,h,{});c.featureIndex.insert(o[I].feature,E,I,P,this.index)}}update(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)}addFeatures(o,c,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Tu),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,c,h,m,y){for(const w of $h(c,500)){let C=0;for(const j of w)C+=j.length;const E=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),I=E.vertexLength,P=[],F=[];for(const j of w){if(0===j.length)continue;j!==w[0]&&F.push(P.length/2);const U=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),W=U.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(W+j.length-1,W),P.push(j[0].x),P.push(j[0].y);for(let J=1;J<j.length;J++)this.layoutVertexArray.emplaceBack(j[J].x,j[J].y),this.indexArray2.emplaceBack(W+J-1,W+J),P.push(j[J].x),P.push(j[J].y);U.vertexLength+=j.length,U.primitiveLength+=j.length}const z=Hg(P,F);for(let j=0;j<z.length;j+=3)this.indexArray.emplaceBack(I+z[j],I+z[j+1],I+z[j+2]);E.vertexLength+=C,E.primitiveLength+=z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,y,m)}}let Pm,Du;Qe("FillBucket",qh,{omit:["layers","patternFeatures"]});var Ll={get paint(){return Du=Du||new Gn({"fill-antialias":new rt(Se.paint_fill["fill-antialias"]),"fill-opacity":new ut(Se.paint_fill["fill-opacity"]),"fill-color":new ut(Se.paint_fill["fill-color"]),"fill-outline-color":new ut(Se.paint_fill["fill-outline-color"]),"fill-translate":new rt(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new rt(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new vo(Se.paint_fill["fill-pattern"])})},get layout(){return Pm=Pm||new Gn({"fill-sort-key":new ut(Se.layout_fill["fill-sort-key"])})}};class qy extends zo{constructor(o){super(o,Ll)}recalculate(o,c){super.recalculate(o,c);const h=this.paint._values["fill-outline-color"];"constant"===h.value.kind&&void 0===h.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new qh(o)}queryRadius(){return Nh(this.paint.get("fill-translate"))}queryIntersectsFeature(o,c,h,m,y,w,C){return xm(Lh(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,C),m)}isTileClipped(){return!0}}const Zh=An([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Kh=An([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Xh}=Zh;var da={},Gg=Eo,Rm=Sd;function Sd(l,o,c,h,m){this.properties={},this.extent=c,this.type=0,this._pbf=l,this._geometry=-1,this._keys=h,this._values=m,l.readFields(Cd,this,o)}function Cd(l,o,c){1==l?o.id=c.readVarint():2==l?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var w=m._keys[h.readVarint()],C=m._values[h.readVarint()];m.properties[w]=C}}(c,o):3==l?o.type=c.readVarint():4==l&&(o._geometry=c.pos)}function Iu(l){for(var o,c,h=0,m=0,y=l.length,w=y-1;m<y;w=m++)h+=((c=l[w]).x-(o=l[m]).x)*(o.y+c.y);return h}Sd.types=["Unknown","Point","LineString","Polygon"],Sd.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var o,c=l.readVarint()+l.pos,h=1,m=0,y=0,w=0,C=[];l.pos<c;){if(m<=0){var E=l.readVarint();h=7&E,m=E>>3}if(m--,1===h||2===h)y+=l.readSVarint(),w+=l.readSVarint(),1===h&&(o&&C.push(o),o=[]),o.push(new Gg(y,w));else{if(7!==h)throw new Error("unknown command "+h);o&&o.push(o[0].clone())}}return o&&C.push(o),C},Sd.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var o=l.readVarint()+l.pos,c=1,h=0,m=0,y=0,w=1/0,C=-1/0,E=1/0,I=-1/0;l.pos<o;){if(h<=0){var P=l.readVarint();c=7&P,h=P>>3}if(h--,1===c||2===c)(m+=l.readSVarint())<w&&(w=m),m>C&&(C=m),(y+=l.readSVarint())<E&&(E=y),y>I&&(I=y);else if(7!==c)throw new Error("unknown command "+c)}return[w,E,C,I]},Sd.prototype.toGeoJSON=function(l,o,c){var h,m,y=this.extent*Math.pow(2,c),w=this.extent*l,C=this.extent*o,E=this.loadGeometry(),I=Sd.types[this.type];function P(j){for(var U=0;U<j.length;U++){var W=j[U];j[U]=[360*(W.x+w)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(W.y+C)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(h=0;h<E.length;h++)F[h]=E[h][0];P(E=F);break;case 2:for(h=0;h<E.length;h++)P(E[h]);break;case 3:for(E=function(j){var U=j.length;if(U<=1)return[j];for(var W,J,ne=[],le=0;le<U;le++){var oe=Iu(j[le]);0!==oe&&(void 0===J&&(J=oe<0),J===oe<0?(W&&ne.push(W),W=[j[le]]):W.push(j[le]))}return W&&ne.push(W),ne}(E),h=0;h<E.length;h++)for(m=0;m<E[h].length;m++)P(E[h][m])}1===E.length?E=E[0]:I="Multi"+I;var z={type:"Feature",geometry:{type:I,coordinates:E},properties:this.properties};return"id"in this&&(z.id=this.id),z};var Zy=Rm,Ky=Qh;function Qh(l,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(M1,this,o),this.length=this._features.length}function M1(l,o,c){15===l?o.version=c.readVarint():1===l?o.name=c.readString():5===l?o.extent=c.readVarint():2===l?o._features.push(c.pos):3===l?o._keys.push(c.readString()):4===l&&o._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var w=h.readVarint()>>3;m=1===w?h.readString():2===w?h.readFloat():3===w?h.readDouble():4===w?h.readVarint64():5===w?h.readVarint():6===w?h.readSVarint():7===w?h.readBoolean():null}return m}(c))}Qh.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var o=this._pbf.readVarint()+this._pbf.pos;return new Zy(this._pbf,o,this.extent,this._keys,this._values)};var Xy=Ky;function Qy(l,o,c){if(3===l){var h=new Xy(c,c.readVarint()+c.pos);h.length&&(o[h.name]=h)}}da.VectorTile=function(l,o){this.layers=l.readFields(Qy,{},o)},da.VectorTileFeature=Rm,da.VectorTileLayer=Ky;const D1=da.VectorTileFeature.types,$g=Math.pow(2,13);function kc(l,o,c,h,m,y,w,C){l.emplaceBack(o,c,2*Math.floor(h*$g)+w,m*$g*2,y*$g*2,Math.round(C))}class Ec{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Ne,this.centroidVertexArray=new ze,this.indexArray=new Vi,this.programConfigurations=new Ps(o.layers,o.zoom),this.segments=new _n,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,h){this.features=[],this.hasPattern=Wh("fill-extrusion",this.layers,c);for(const{feature:m,id:y,index:w,sourceLayerIndex:C}of o){const E=this.layers[0]._featureFilter.needGeometry,I=xc(m,E);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),I,h))continue;const P={id:y,sourceLayerIndex:C,index:w,geometry:E?I.geometry:Fl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Am("fill-extrusion",this.layers,P,this.zoom,c)):this.addFeature(P,P.geometry,w,h,{}),c.featureIndex.insert(m,P.geometry,w,C,this.index,!0)}}addFeatures(o,c,h){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,c,h)}}update(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Xh),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,Kh.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,c,h,m,y){const w={x:0,y:0,vertexCount:0};for(const C of $h(c,500)){let E=0;for(const U of C)E+=U.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const U of C){if(0===U.length||((l=U).every(o=>o.x<0)||l.every(o=>o.x>ki)||l.every(o=>o.y<0)||l.every(o=>o.y>ki)))continue;let W=0;for(let J=0;J<U.length;J++){const ne=U[J];if(J>=1){const le=U[J-1];if(!Yy(ne,le)){I.vertexLength+4>_n.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const oe=ne.sub(le)._perp()._unit(),pe=le.dist(ne);W+pe>32768&&(W=0),kc(this.layoutVertexArray,ne.x,ne.y,oe.x,oe.y,0,0,W),kc(this.layoutVertexArray,ne.x,ne.y,oe.x,oe.y,0,1,W),w.x+=2*ne.x,w.y+=2*ne.y,w.vertexCount+=2,W+=pe,kc(this.layoutVertexArray,le.x,le.y,oe.x,oe.y,0,0,W),kc(this.layoutVertexArray,le.x,le.y,oe.x,oe.y,0,1,W),w.x+=2*le.x,w.y+=2*le.y,w.vertexCount+=2;const ge=I.vertexLength;this.indexArray.emplaceBack(ge,ge+2,ge+1),this.indexArray.emplaceBack(ge+1,ge+2,ge+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+E>_n.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),"Polygon"!==D1[o.type])continue;const P=[],F=[],z=I.vertexLength;for(const U of C)if(0!==U.length){U!==C[0]&&F.push(P.length/2);for(let W=0;W<U.length;W++){const J=U[W];kc(this.layoutVertexArray,J.x,J.y,0,0,1,1,0),w.x+=J.x,w.y+=J.y,w.vertexCount+=1,P.push(J.x),P.push(J.y)}}const j=Hg(P,F);for(let U=0;U<j.length;U+=3)this.indexArray.emplaceBack(z+j[U],z+j[U+2],z+j[U+1]);I.primitiveLength+=j.length/3,I.vertexLength+=E}var l;for(let C=0;C<w.vertexCount;C++)this.centroidVertexArray.emplaceBack(Math.floor(w.x/w.vertexCount),Math.floor(w.y/w.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,y,m)}}function Yy(l,o){return l.x===o.x&&(l.x<0||l.x>ki)||l.y===o.y&&(l.y<0||l.y>ki)}let Yh;Qe("FillExtrusionBucket",Ec,{omit:["layers","features"]});var Jh={get paint(){return Yh=Yh||new Gn({"fill-extrusion-opacity":new rt(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ut(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new rt(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new rt(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vo(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ut(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ut(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new rt(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class I1 extends zo{constructor(o){super(o,Jh)}createBucket(o){return new Ec(o)}queryRadius(){return Nh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,c,h,m,y,w,C,E){const I=Lh(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,C),P=this.paint.get("fill-extrusion-height").evaluate(c,h),F=this.paint.get("fill-extrusion-base").evaluate(c,h),z=function(U,W,J,ne){const le=[];for(const oe of U){const pe=[oe.x,oe.y,0,1];Cm(pe,pe,W),le.push(new ct(pe[0]/pe[3],pe[1]/pe[3]))}return le}(I,E),j=function(U,W,J,ne){const le=[],oe=[],pe=ne[8]*W,ge=ne[9]*W,Ee=ne[10]*W,We=ne[11]*W,nt=ne[8]*J,Ge=ne[9]*J,Ue=ne[10]*J,Ve=ne[11]*J;for(const Ke of U){const je=[],Re=[];for(const lt of Ke){const et=lt.x,Bt=lt.y,Pn=ne[0]*et+ne[4]*Bt+ne[12],$n=ne[1]*et+ne[5]*Bt+ne[13],Fi=ne[2]*et+ne[6]*Bt+ne[14],xo=ne[3]*et+ne[7]*Bt+ne[15],Pr=Fi+Ee,yi=xo+We,Ei=Pn+nt,ji=$n+Ge,Ni=Fi+Ue,Wr=xo+Ve,Li=new ct((Pn+pe)/yi,($n+ge)/yi);Li.z=Pr/yi,je.push(Li);const Ui=new ct(Ei/Wr,ji/Wr);Ui.z=Ni/Wr,Re.push(Ui)}le.push(je),oe.push(Re)}return[le,oe]}(m,F,P,E);return function(U,W,J){let ne=1/0;xm(J,W)&&(ne=Om(J,W[0]));for(let le=0;le<W.length;le++){const oe=W[le],pe=U[le];for(let ge=0;ge<oe.length-1;ge++){const Ee=oe[ge],We=[Ee,oe[ge+1],pe[ge+1],pe[ge],Ee];Rs(J,We)&&(ne=Math.min(ne,Om(J,We)))}}return ne!==1/0&&ne}(j[0],j[1],z)}}function Td(l,o){return l.x*o.x+l.y*o.y}function Om(l,o){if(1===l.length){let c=0;const h=o[c++];let m;for(;!m||h.equals(m);)if(m=o[c++],!m)return 1/0;for(;c<o.length;c++){const y=o[c],w=l[0],C=m.sub(h),E=y.sub(h),I=w.sub(h),P=Td(C,C),F=Td(C,E),z=Td(E,E),j=Td(I,C),U=Td(I,E),W=P*z-F*F,J=(z*j-F*U)/W,ne=(P*U-F*j)/W,le=h.z*(1-J-ne)+m.z*J+y.z*ne;if(isFinite(le))return le}return 1/0}{let c=1/0;for(const h of o)c=Math.min(c,h.z);return c}}const Jy=An([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ua}=Jy,eb=An([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ep}=eb,Fm=da.VectorTileFeature.types,Wg=Math.cos(Math.PI/180*37.5),Pu=Math.pow(2,14)/.5;class Ru{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new ht,this.layoutVertexArray2=new ot,this.indexArray=new Vi,this.programConfigurations=new Ps(o.layers,o.zoom),this.segments=new _n,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,h){this.hasPattern=Wh("line",this.layers,c);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),w=[];for(const{feature:C,id:E,index:I,sourceLayerIndex:P}of o){const F=this.layers[0]._featureFilter.needGeometry,z=xc(C,F);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),z,h))continue;const j=y?m.evaluate(z,{},h):void 0,U={id:E,properties:C.properties,type:C.type,sourceLayerIndex:P,index:I,geometry:F?z.geometry:Fl(C),patterns:{},sortKey:j};w.push(U)}y&&w.sort((C,E)=>C.sortKey-E.sortKey);for(const C of w){const{geometry:E,index:I,sourceLayerIndex:P}=C;if(this.hasPattern){const F=Am("line",this.layers,C,this.zoom,c);this.patternFeatures.push(F)}else this.addFeature(C,E,I,h,{});c.featureIndex.insert(o[I].feature,E,I,P,this.index)}}update(o,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,h)}addFeatures(o,c,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,ep)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,ua),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,c,h,m,y){const w=this.layers[0].layout,C=w.get("line-join").evaluate(o,{}),E=w.get("line-cap"),I=w.get("line-miter-limit"),P=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const F of c)this.addLine(F,o,C,E,I,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,y,m)}addLine(o,c,h,m,y,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<o.length-1;ne++)this.totalDistance+=o[ne].dist(o[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C="Polygon"===Fm[c.type];let E=o.length;for(;E>=2&&o[E-1].equals(o[E-2]);)E--;let I=0;for(;I<E-1&&o[I].equals(o[I+1]);)I++;if(E<(C?3:2))return;"bevel"===h&&(y=1.05);const P=this.overscaling<=16?15*ki/(512*this.overscaling):0,F=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let z,j,U,W,J;this.e1=this.e2=-1,C&&(z=o[E-2],J=o[I].sub(z)._unit()._perp());for(let ne=I;ne<E;ne++){if(U=ne===E-1?C?o[I+1]:void 0:o[ne+1],U&&o[ne].equals(U))continue;J&&(W=J),z&&(j=z),z=o[ne],J=U?U.sub(z)._unit()._perp():W,W=W||J;let le=W.add(J);0===le.x&&0===le.y||le._unit();const oe=W.x*J.x+W.y*J.y,pe=le.x*J.x+le.y*J.y,ge=0!==pe?1/pe:1/0,Ee=2*Math.sqrt(2-2*pe),We=pe<Wg&&j&&U,nt=W.x*J.y-W.y*J.x>0;if(We&&ne>I){const Ve=z.dist(j);if(Ve>2*P){const Ke=z.sub(z.sub(j)._mult(P/Ve)._round());this.updateDistance(j,Ke),this.addCurrentVertex(Ke,W,0,0,F),j=Ke}}const Ge=j&&U;let Ue=Ge?h:C?"butt":m;if(Ge&&"round"===Ue&&(ge<w?Ue="miter":ge<=2&&(Ue="fakeround")),"miter"===Ue&&ge>y&&(Ue="bevel"),"bevel"===Ue&&(ge>2&&(Ue="flipbevel"),ge<y&&(Ue="miter")),j&&this.updateDistance(j,z),"miter"===Ue)le._mult(ge),this.addCurrentVertex(z,le,0,0,F);else if("flipbevel"===Ue){if(ge>100)le=J.mult(-1);else{const Ve=ge*W.add(J).mag()/W.sub(J).mag();le._perp()._mult(Ve*(nt?-1:1))}this.addCurrentVertex(z,le,0,0,F),this.addCurrentVertex(z,le.mult(-1),0,0,F)}else if("bevel"===Ue||"fakeround"===Ue){const Ve=-Math.sqrt(ge*ge-1),Ke=nt?Ve:0,je=nt?0:Ve;if(j&&this.addCurrentVertex(z,W,Ke,je,F),"fakeround"===Ue){const Re=Math.round(180*Ee/Math.PI/20);for(let lt=1;lt<Re;lt++){let et=lt/Re;if(.5!==et){const Pn=et-.5;et+=et*Pn*(et-1)*((1.0904+oe*(oe*(3.55645-1.43519*oe)-3.2452))*Pn*Pn+(.848013+oe*(.215638*oe-1.06021)))}const Bt=J.sub(W)._mult(et)._add(W)._unit()._mult(nt?-1:1);this.addHalfVertex(z,Bt.x,Bt.y,!1,nt,0,F)}}U&&this.addCurrentVertex(z,J,-Ke,-je,F)}else if("butt"===Ue)this.addCurrentVertex(z,le,0,0,F);else if("square"===Ue){const Ve=j?1:-1;this.addCurrentVertex(z,le,Ve,Ve,F)}else"round"===Ue&&(j&&(this.addCurrentVertex(z,W,0,0,F),this.addCurrentVertex(z,W,1,1,F,!0)),U&&(this.addCurrentVertex(z,J,-1,-1,F,!0),this.addCurrentVertex(z,J,0,0,F)));if(We&&ne<E-1){const Ve=z.dist(U);if(Ve>2*P){const Ke=z.add(U.sub(z)._mult(P/Ve)._round());this.updateDistance(z,Ke),this.addCurrentVertex(Ke,J,0,0,F),z=Ke}}}}addCurrentVertex(o,c,h,m,y,w=!1){const C=c.y*m-c.x,E=-c.y-c.x*m;this.addHalfVertex(o,c.x+c.y*h,c.y-c.x*h,w,!1,h,y),this.addHalfVertex(o,C,E,w,!0,-m,y),this.distance>Pu/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,c,h,m,y,w))}addHalfVertex({x:o,y:c},h,m,y,w,C,E){const I=.5*(this.lineClips?this.scaledDistance*(Pu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(y?1:0),(c<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(0===C?0:C<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),E.primitiveLength++),w?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,c){this.distance+=o.dist(c),this.updateScaledDistance()}}let qg,Nm;Qe("LineBucket",Ru,{omit:["layers","patternFeatures"]});var Lm={get paint(){return Nm=Nm||new Gn({"line-opacity":new ut(Se.paint_line["line-opacity"]),"line-color":new ut(Se.paint_line["line-color"]),"line-translate":new rt(Se.paint_line["line-translate"]),"line-translate-anchor":new rt(Se.paint_line["line-translate-anchor"]),"line-width":new ut(Se.paint_line["line-width"]),"line-gap-width":new ut(Se.paint_line["line-gap-width"]),"line-offset":new ut(Se.paint_line["line-offset"]),"line-blur":new ut(Se.paint_line["line-blur"]),"line-dasharray":new Lo(Se.paint_line["line-dasharray"]),"line-pattern":new vo(Se.paint_line["line-pattern"]),"line-gradient":new Ua(Se.paint_line["line-gradient"])})},get layout(){return qg=qg||new Gn({"line-cap":new rt(Se.layout_line["line-cap"]),"line-join":new ut(Se.layout_line["line-join"]),"line-miter-limit":new rt(Se.layout_line["line-miter-limit"]),"line-round-limit":new rt(Se.layout_line["line-round-limit"]),"line-sort-key":new ut(Se.layout_line["line-sort-key"])})}};class Zg extends ut{possiblyEvaluate(o,c){return c=new fn(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(o,c)}evaluate(o,c,h,m){return c=$i({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(o,c,h,m)}}let Ou;class tb extends zo{constructor(o){super(o,Lm),this.gradientVersion=0,Ou||(Ou=new Zg(Lm.paint.properties["line-width"].specification),Ou.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if("line-gradient"===o){const c=this.gradientExpression();this.stepInterpolant=!(void 0===c._styleExpression)&&c._styleExpression.expression instanceof Aa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,c){super.recalculate(o,c),this.paint._values["line-floorwidth"]=Ou.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Ru(o)}queryRadius(o){const c=o,h=Fu(Su("line-width",this,c),Su("line-gap-width",this,c)),m=Su("line-offset",this,c);return h/2+Math.abs(m)+Nh(this.paint.get("line-translate"))}queryIntersectsFeature(o,c,h,m,y,w,C){const E=Lh(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,C),I=C/2*Fu(this.paint.get("line-width").evaluate(c,h),this.paint.get("line-gap-width").evaluate(c,h)),P=this.paint.get("line-offset").evaluate(c,h);return P&&(m=function(F,z){const j=[];for(let U=0;U<F.length;U++){const W=F[U],J=[];for(let ne=0;ne<W.length;ne++){const le=W[ne-1],oe=W[ne],pe=W[ne+1],ge=0===ne?new ct(0,0):oe.sub(le)._unit()._perp(),Ee=ne===W.length-1?new ct(0,0):pe.sub(oe)._unit()._perp(),We=ge._add(Ee)._unit(),nt=We.x*Ee.x+We.y*Ee.y;0!==nt&&We._mult(1/nt),J.push(We._mult(z)._add(oe))}j.push(J)}return j}(m,P*C)),function(F,z,j){for(let U=0;U<z.length;U++){const W=z[U];if(F.length>=3)for(let J=0;J<W.length;J++)if(Os(F,W[J]))return!0;if(ei(F,W,j))return!0}return!1}(E,m,I)}isTileClipped(){return!0}}function Fu(l,o){return o>0?o+2*l:l}const Mc=An([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nb=An([{name:"a_projected_pos",components:3,type:"Float32"}],4);An([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Kg=An([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);An([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const zm=An([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Nu=An([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ib(l,o,c){return l.sections.forEach(h=>{h.text=function(m,y,w){const C=y.layout.get("text-transform").evaluate(w,{});return"uppercase"===C?m=m.toLocaleUpperCase():"lowercase"===C&&(m=m.toLocaleLowerCase()),Si.applyArabicShaping&&(m=Si.applyArabicShaping(m)),m}(h.text,o,c)}),l}An([{name:"triangle",components:3,type:"Uint16"}]),An([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),An([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),An([{type:"Float32",name:"offsetX"}]),An([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),An([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ji={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Pi=24,Ri=vn,tp=function(l,o,c,h,m){var y,w,C=8*m-h-1,E=(1<<C)-1,I=E>>1,P=-7,F=c?m-1:0,z=c?-1:1,j=l[o+F];for(F+=z,y=j&(1<<-P)-1,j>>=-P,P+=C;P>0;y=256*y+l[o+F],F+=z,P-=8);for(w=y&(1<<-P)-1,y>>=-P,P+=h;P>0;w=256*w+l[o+F],F+=z,P-=8);if(0===y)y=1-I;else{if(y===E)return w?NaN:1/0*(j?-1:1);w+=Math.pow(2,h),y-=I}return(j?-1:1)*w*Math.pow(2,y-h)},Xg=function(l,o,c,h,m,y){var w,C,E,I=8*y-m-1,P=(1<<I)-1,F=P>>1,z=23===m?Math.pow(2,-24)-Math.pow(2,-77):0,j=h?0:y-1,U=h?1:-1,W=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(C=isNaN(o)?1:0,w=P):(w=Math.floor(Math.log(o)/Math.LN2),o*(E=Math.pow(2,-w))<1&&(w--,E*=2),(o+=w+F>=1?z/E:z*Math.pow(2,1-F))*E>=2&&(w++,E/=2),w+F>=P?(C=0,w=P):w+F>=1?(C=(o*E-1)*Math.pow(2,m),w+=F):(C=o*Math.pow(2,F-1)*Math.pow(2,m),w=0));m>=8;l[c+j]=255&C,j+=U,C/=256,m-=8);for(w=w<<m|C,I+=m;I>0;l[c+j]=255&w,j+=U,w/=256,I-=8);l[c+j-U]|=128*W};function vn(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}vn.Varint=0,vn.Fixed64=1,vn.Bytes=2,vn.Fixed32=5;var Dc=4294967296,Ic=1/Dc,Ac=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function bo(l){return l.type===vn.Bytes?l.readVarint()+l.pos:l.pos+1}function np(l,o,c){var h=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));c.realloc(h);for(var m=c.pos-1;m>=l;m--)c.buf[m+h]=c.buf[m]}function kd(l,o){for(var c=0;c<l.length;c++)o.writeVarint(l[c])}function A1(l,o){for(var c=0;c<l.length;c++)o.writeSVarint(l[c])}function rb(l,o){for(var c=0;c<l.length;c++)o.writeFloat(l[c])}function P1(l,o){for(var c=0;c<l.length;c++)o.writeDouble(l[c])}function R1(l,o){for(var c=0;c<l.length;c++)o.writeBoolean(l[c])}function O1(l,o){for(var c=0;c<l.length;c++)o.writeFixed32(l[c])}function F1(l,o){for(var c=0;c<l.length;c++)o.writeSFixed32(l[c])}function N1(l,o){for(var c=0;c<l.length;c++)o.writeFixed64(l[c])}function L1(l,o){for(var c=0;c<l.length;c++)o.writeSFixed64(l[c])}function qa(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+16777216*l[o+3]}function Ed(l,o,c){l[c]=o,l[c+1]=o>>>8,l[c+2]=o>>>16,l[c+3]=o>>>24}function Qg(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+(l[o+3]<<24)}vn.prototype={destroy:function(){this.buf=null},readFields:function(l,o,c){for(c=c||this.length;this.pos<c;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,l(m,o,this),this.pos===y&&this.skip(h)}return o},readMessage:function(l,o){return this.readFields(l,o,this.readVarint()+this.pos)},readFixed32:function(){var l=qa(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=Qg(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=qa(this.buf,this.pos)+qa(this.buf,this.pos+4)*Dc;return this.pos+=8,l},readSFixed64:function(){var l=qa(this.buf,this.pos)+Qg(this.buf,this.pos+4)*Dc;return this.pos+=8,l},readFloat:function(){var l=tp(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=tp(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var o,c,h=this.buf;return o=127&(c=h[this.pos++]),c<128?o:(o|=(127&(c=h[this.pos++]))<<7,c<128?o:(o|=(127&(c=h[this.pos++]))<<14,c<128?o:(o|=(127&(c=h[this.pos++]))<<21,c<128?o:function(m,y,w){var C,E,I=w.buf;if(C=(112&(E=I[w.pos++]))>>4,E<128||(C|=(127&(E=I[w.pos++]))<<3,E<128)||(C|=(127&(E=I[w.pos++]))<<10,E<128)||(C|=(127&(E=I[w.pos++]))<<17,E<128)||(C|=(127&(E=I[w.pos++]))<<24,E<128)||(C|=(1&(E=I[w.pos++]))<<31,E<128))return function Pc(l,o,c){return c?4294967296*o+(l>>>0):4294967296*(o>>>0)+(l>>>0)}(m,C,y);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(c=h[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,o=this.pos;return this.pos=l,l-o>=12&&Ac?Ac.decode(this.buf.subarray(o,l)):function(c,h,m){for(var y="",w=h;w<m;){var C,E,I,P=c[w],F=null,z=P>239?4:P>223?3:P>191?2:1;if(w+z>m)break;1===z?P<128&&(F=P):2===z?128==(192&(C=c[w+1]))&&(F=(31&P)<<6|63&C)<=127&&(F=null):3===z?(E=c[w+2],128==(192&(C=c[w+1]))&&128==(192&E)&&((F=(15&P)<<12|(63&C)<<6|63&E)<=2047||F>=55296&&F<=57343)&&(F=null)):4===z&&(E=c[w+2],I=c[w+3],128==(192&(C=c[w+1]))&&128==(192&E)&&128==(192&I)&&((F=(15&P)<<18|(63&C)<<12|(63&E)<<6|63&I)<=65535||F>=1114112)&&(F=null)),null===F?(F=65533,z=1):F>65535&&(F-=65536,y+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),y+=String.fromCharCode(F),w+=z}return y}(this.buf,o,l)},readBytes:function(){var l=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,l);return this.pos=l,o},readPackedVarint:function(l,o){if(this.type!==vn.Bytes)return l.push(this.readVarint(o));var c=bo(this);for(l=l||[];this.pos<c;)l.push(this.readVarint(o));return l},readPackedSVarint:function(l){if(this.type!==vn.Bytes)return l.push(this.readSVarint());var o=bo(this);for(l=l||[];this.pos<o;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==vn.Bytes)return l.push(this.readBoolean());var o=bo(this);for(l=l||[];this.pos<o;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==vn.Bytes)return l.push(this.readFloat());var o=bo(this);for(l=l||[];this.pos<o;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==vn.Bytes)return l.push(this.readDouble());var o=bo(this);for(l=l||[];this.pos<o;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==vn.Bytes)return l.push(this.readFixed32());var o=bo(this);for(l=l||[];this.pos<o;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==vn.Bytes)return l.push(this.readSFixed32());var o=bo(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==vn.Bytes)return l.push(this.readFixed64());var o=bo(this);for(l=l||[];this.pos<o;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==vn.Bytes)return l.push(this.readSFixed64());var o=bo(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed64());return l},skip:function(l){var o=7&l;if(o===vn.Varint)for(;this.buf[this.pos++]>127;);else if(o===vn.Bytes)this.pos=this.readVarint()+this.pos;else if(o===vn.Fixed32)this.pos+=4;else{if(o!==vn.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(l,o){this.writeVarint(l<<3|o)},realloc:function(l){for(var o=this.length||16;o<this.pos+l;)o*=2;if(o!==this.length){var c=new Uint8Array(o);c.set(this.buf),this.buf=c,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Ed(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Ed(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Ed(this.buf,-1&l,this.pos),Ed(this.buf,Math.floor(l*Ic),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Ed(this.buf,-1&l,this.pos),Ed(this.buf,Math.floor(l*Ic),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(o,c){var h,m,y,C;if(o>=0?(h=o%4294967296|0,m=o/4294967296|0):(m=~(-o/4294967296),4294967295^(h=~(-o%4294967296))?h=h+1|0:(h=0,m=m+1|0)),o>=0x10000000000000000||o<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),y=h,(C=c).buf[C.pos++]=127&y|128,y>>>=7,C.buf[C.pos++]=127&y|128,y>>>=7,C.buf[C.pos++]=127&y|128,y>>>=7,C.buf[C.pos++]=127&y|128,C.buf[C.pos]=127&(y>>>=7),function(y,w){var C=(7&y)<<4;w.buf[w.pos++]|=C|((y>>>=3)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y)))))}(m,c)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var o=this.pos;this.pos=function(h,m,y){for(var w,C,E=0;E<m.length;E++){if((w=m.charCodeAt(E))>55295&&w<57344){if(!C){w>56319||E+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):C=w;continue}if(w<56320){h[y++]=239,h[y++]=191,h[y++]=189,C=w;continue}w=C-55296<<10|w-56320|65536,C=null}else C&&(h[y++]=239,h[y++]=191,h[y++]=189,C=null);w<128?h[y++]=w:(w<2048?h[y++]=w>>6|192:(w<65536?h[y++]=w>>12|224:(h[y++]=w>>18|240,h[y++]=w>>12&63|128),h[y++]=w>>6&63|128),h[y++]=63&w|128)}return y}(this.buf,l,this.pos);var c=this.pos-o;c>=128&&np(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeFloat:function(l){this.realloc(4),Xg(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),Xg(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var o=l.length;this.writeVarint(o),this.realloc(o);for(var c=0;c<o;c++)this.buf[this.pos++]=l[c]},writeRawMessage:function(l,o){this.pos++;var c=this.pos;l(o,this);var h=this.pos-c;h>=128&&np(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeMessage:function(l,o,c){this.writeTag(l,vn.Bytes),this.writeRawMessage(o,c)},writePackedVarint:function(l,o){o.length&&this.writeMessage(l,kd,o)},writePackedSVarint:function(l,o){o.length&&this.writeMessage(l,A1,o)},writePackedBoolean:function(l,o){o.length&&this.writeMessage(l,R1,o)},writePackedFloat:function(l,o){o.length&&this.writeMessage(l,rb,o)},writePackedDouble:function(l,o){o.length&&this.writeMessage(l,P1,o)},writePackedFixed32:function(l,o){o.length&&this.writeMessage(l,O1,o)},writePackedSFixed32:function(l,o){o.length&&this.writeMessage(l,F1,o)},writePackedFixed64:function(l,o){o.length&&this.writeMessage(l,N1,o)},writePackedSFixed64:function(l,o){o.length&&this.writeMessage(l,L1,o)},writeBytesField:function(l,o){this.writeTag(l,vn.Bytes),this.writeBytes(o)},writeFixed32Field:function(l,o){this.writeTag(l,vn.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(l,o){this.writeTag(l,vn.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(l,o){this.writeTag(l,vn.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(l,o){this.writeTag(l,vn.Fixed64),this.writeSFixed64(o)},writeVarintField:function(l,o){this.writeTag(l,vn.Varint),this.writeVarint(o)},writeSVarintField:function(l,o){this.writeTag(l,vn.Varint),this.writeSVarint(o)},writeStringField:function(l,o){this.writeTag(l,vn.Bytes),this.writeString(o)},writeFloatField:function(l,o){this.writeTag(l,vn.Fixed32),this.writeFloat(o)},writeDoubleField:function(l,o){this.writeTag(l,vn.Fixed64),this.writeDouble(o)},writeBooleanField:function(l,o){this.writeVarintField(l,!!o)}};var Oi=be(Ri);const Bm=3;function Lu(l,o,c){1===l&&c.readMessage(ob,o)}function ob(l,o,c){if(3===l){const{id:h,bitmap:m,width:y,height:w,left:C,top:E,advance:I}=c.readMessage(cs,{});o.push({id:h,bitmap:new Cu({width:y+2*Bm,height:w+2*Bm},m),metrics:{width:y,height:w,left:C,top:E,advance:I}})}}function cs(l,o,c){1===l?o.id=c.readVarint():2===l?o.bitmap=c.readBytes():3===l?o.width=c.readVarint():4===l?o.height=c.readVarint():5===l?o.left=c.readSVarint():6===l?o.top=c.readSVarint():7===l&&(o.advance=c.readVarint())}const Rc=Bm;function Vm(l){let o=0,c=0;for(const w of l)o+=w.w*w.h,c=Math.max(c,w.w);l.sort((w,C)=>C.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),c),h:1/0}];let m=0,y=0;for(const w of l)for(let C=h.length-1;C>=0;C--){const E=h[C];if(!(w.w>E.w||w.h>E.h)){if(w.x=E.x,w.y=E.y,y=Math.max(y,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===E.w&&w.h===E.h){const I=h.pop();C<h.length&&(h[C]=I)}else w.h===E.h?(E.x+=w.w,E.w-=w.w):w.w===E.w?(E.y+=w.h,E.h-=w.h):(h.push({x:E.x+w.w,y:E.y,w:E.w-w.w,h:w.h}),E.y+=w.h,E.h-=w.h);break}}return{w:m,h:y,fill:o/(m*y)||0}}const ur=1;class Oc{constructor(o,{pixelRatio:c,version:h,stretchX:m,stretchY:y,content:w}){this.paddedRect=o,this.pixelRatio=c,this.stretchX=m,this.stretchY=y,this.content=w,this.version=h}get tl(){return[this.paddedRect.x+ur,this.paddedRect.y+ur]}get br(){return[this.paddedRect.x+this.paddedRect.w-ur,this.paddedRect.y+this.paddedRect.h-ur]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ur)/this.pixelRatio,(this.paddedRect.h-2*ur)/this.pixelRatio]}}class Yg{constructor(o,c){const h={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(o,h,y),this.addImages(c,m,y);const{w,h:C}=Vm(y),E=new Uo({width:w||1,height:C||1});for(const I in o){const P=o[I],F=h[I].paddedRect;Uo.copy(P.data,E,{x:0,y:0},{x:F.x+ur,y:F.y+ur},P.data)}for(const I in c){const P=c[I],F=m[I].paddedRect,z=F.x+ur,j=F.y+ur,U=P.data.width,W=P.data.height;Uo.copy(P.data,E,{x:0,y:0},{x:z,y:j},P.data),Uo.copy(P.data,E,{x:0,y:W-1},{x:z,y:j-1},{width:U,height:1}),Uo.copy(P.data,E,{x:0,y:0},{x:z,y:j+W},{width:U,height:1}),Uo.copy(P.data,E,{x:U-1,y:0},{x:z-1,y:j},{width:1,height:W}),Uo.copy(P.data,E,{x:0,y:0},{x:z+U,y:j},{width:1,height:W})}this.image=E,this.iconPositions=h,this.patternPositions=m}addImages(o,c,h){for(const m in o){const y=o[m],w={x:0,y:0,w:y.data.width+2*ur,h:y.data.height+2*ur};h.push(w),c[m]=new Oc(w,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(o,c){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in o.updatedImages)this.patchUpdatedImage(this.iconPositions[h],o.getImage(h),c),this.patchUpdatedImage(this.patternPositions[h],o.getImage(h),c)}patchUpdatedImage(o,c,h){if(!o||!c||o.version===c.version)return;o.version=c.version;const[m,y]=o.tl;h.update(c.data,void 0,{x:m,y})}}var Fc;Qe("ImagePosition",Oc),Qe("ImageAtlas",Yg),_.ai=void 0,(Fc=_.ai||(_.ai={}))[Fc.none=0]="none",Fc[Fc.horizontal=1]="horizontal",Fc[Fc.vertical=2]="vertical",Fc[Fc.horizontalOnly=3]="horizontalOnly";const zu=-17;class ip{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,c){const h=new ip;return h.scale=o||1,h.fontStack=c,h}static forImage(o){const c=new ip;return c.imageName=o,c}}class hr{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,c){const h=new hr;for(let m=0;m<o.sections.length;m++){const y=o.sections[m];y.image?h.addImageSection(y):h.addTextSection(y,c)}return h}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let c="";for(let h=0;h<o.length;h++){const m=o.charCodeAt(h+1)||null,y=o.charCodeAt(h-1)||null;c+=m&&jr(m)&&!Ji[o[h+1]]||y&&jr(y)&&!Ji[o[h-1]]||!Ji[o[h]]?o[h]:Ji[o[h]]}return c}(this.text)}trim(){let o=0;for(let h=0;h<this.text.length&&Za[this.text.charCodeAt(h)];h++)o++;let c=this.text.length;for(let h=this.text.length-1;h>=0&&h>=o&&Za[this.text.charCodeAt(h)];h--)c--;this.text=this.text.substring(o,c),this.sectionIndex=this.sectionIndex.slice(o,c)}substring(o,c){const h=new hr;return h.text=this.text.substring(o,c),h.sectionIndex=this.sectionIndex.slice(o,c),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,c)=>Math.max(o,this.sections[c].scale),0)}addTextSection(o,c){this.text+=o.text,this.sections.push(ip.forText(o.scale,o.fontStack||c));const h=this.sections.length-1;for(let m=0;m<o.text.length;++m)this.sectionIndex.push(h)}addImageSection(o){const c=o.image?o.image.name:"";if(0===c.length)return void Wi("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(ip.forImage(c)),this.sectionIndex.push(this.sections.length-1)):Wi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Md(l,o,c,h,m,y,w,C,E,I,P,F,z,j,U,W){const J=hr.fromFeature(l,m);let ne;F===_.ai.vertical&&J.verticalizePunctuation();const{processBidirectionalText:le,processStyledBidirectionalText:oe}=Si;if(le&&1===J.sections.length){ne=[];const Ee=le(J.toString(),Um(J,I,y,o,h,j,U));for(const We of Ee){const nt=new hr;nt.text=We,nt.sections=J.sections;for(let Ge=0;Ge<We.length;Ge++)nt.sectionIndex.push(0);ne.push(nt)}}else if(oe){ne=[];const Ee=oe(J.text,J.sectionIndex,Um(J,I,y,o,h,j,U));for(const We of Ee){const nt=new hr;nt.text=We[0],nt.sectionIndex=We[1],nt.sections=J.sections,ne.push(nt)}}else ne=function(Ee,We){const nt=[],Ge=Ee.text;let Ue=0;for(const Ve of We)nt.push(Ee.substring(Ue,Ve)),Ue=Ve;return Ue<Ge.length&&nt.push(Ee.substring(Ue,Ge.length)),nt}(J,Um(J,I,y,o,h,j,U));const pe=[],ge={positionedLines:pe,text:J.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(Ee,We,nt,Ge,Ue,Ve,Ke,je,Re,lt,et,Bt){let Pn=0,$n=zu,Fi=0,xo=0;const Pr="right"===je?1:"left"===je?0:.5;let yi=0;for(const Li of Ue){Li.trim();const Ui=Li.getMaxScale(),Rr=(Ui-1)*Pi,pr={positionedGlyphs:[],lineOffset:0};Ee.positionedLines[yi]=pr;const Or=pr.positionedGlyphs;let Hi=0;if(!Li.length()){$n+=Ve,++yi;continue}for(let bi=0;bi<Li.length();bi++){const Ut=Li.getSection(bi),fr=Li.getSectionIndex(bi),tr=Li.getCharCode(bi);let Wn=0,us=null,zs=null,Bs=null,Qa=Pi;const hs=!(Re===_.ai.horizontal||!et&&!ra(tr)||et&&(Za[tr]||(Ei=tr,Be.Arabic(Ei)||Be["Arabic Supplement"](Ei)||Be["Arabic Extended-A"](Ei)||Be["Arabic Presentation Forms-A"](Ei)||Be["Arabic Presentation Forms-B"](Ei))));if(Ut.imageName){const oi=Ge[Ut.imageName];if(!oi)continue;Bs=Ut.imageName,Ee.iconsInText=Ee.iconsInText||!0,zs=oi.paddedRect;const ui=oi.displaySize;Ut.scale=Ut.scale*Pi/Bt,us={width:ui[0],height:ui[1],left:ur,top:-Rc,advance:hs?ui[1]:ui[0]},Wn=Rr+(Pi-ui[1]*Ut.scale),Qa=us.advance;const Ya=hs?ui[0]*Ut.scale-Pi*Ui:ui[1]*Ut.scale-Pi*Ui;Ya>0&&Ya>Hi&&(Hi=Ya)}else{const oi=nt[Ut.fontStack],ui=oi&&oi[tr];if(ui&&ui.rect)zs=ui.rect,us=ui.metrics;else{const Ya=We[Ut.fontStack],Wu=Ya&&Ya[tr];if(!Wu)continue;us=Wu.metrics}Wn=(Ui-Ut.scale)*Pi}hs?(Ee.verticalizable=!0,Or.push({glyph:tr,imageName:Bs,x:Pn,y:$n+Wn,vertical:hs,scale:Ut.scale,fontStack:Ut.fontStack,sectionIndex:fr,metrics:us,rect:zs}),Pn+=Qa*Ut.scale+lt):(Or.push({glyph:tr,imageName:Bs,x:Pn,y:$n+Wn,vertical:hs,scale:Ut.scale,fontStack:Ut.fontStack,sectionIndex:fr,metrics:us,rect:zs}),Pn+=us.advance*Ut.scale+lt)}0!==Or.length&&(Fi=Math.max(Pn-lt,Fi),Gm(Or,0,Or.length-1,Pr,Hi)),Pn=0;const mr=Ve*Ui+Hi;pr.lineOffset=Math.max(Hi,Rr),$n+=mr,xo=Math.max(mr,xo),++yi}var Ei;const ji=$n-zu,{horizontalAlign:Ni,verticalAlign:Wr}=Hm(Ke);(function(Li,Ui,Rr,pr,Or,Hi,mr,bi,Ut){const fr=(Ui-Rr)*Or;let tr=0;tr=Hi!==mr?-bi*pr-zu:(-pr*Ut+.5)*mr;for(const Wn of Li)for(const us of Wn.positionedGlyphs)us.x+=fr,us.y+=tr})(Ee.positionedLines,Pr,Ni,Wr,Fi,xo,Ve,ji,Ue.length),Ee.top+=-Wr*ji,Ee.bottom=Ee.top+ji,Ee.left+=-Ni*Fi,Ee.right=Ee.left+Fi}(ge,o,c,h,ne,w,C,E,F,I,z,W),!function(Ee){for(const We of Ee)if(0!==We.positionedGlyphs.length)return!1;return!0}(pe)&&ge}const Za={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},z1={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function jm(l,o,c,h,m,y){if(o.imageName){const w=h[o.imageName];return w?w.displaySize[0]*o.scale*Pi/y+m:0}{const w=c[o.fontStack],C=w&&w[l];return C?C.metrics.advance*o.scale+m:0}}function Jg(l,o,c,h){const m=Math.pow(l-o,2);return h?l<o?m/2:2*m:m+Math.abs(c)*c}function sb(l,o,c){let h=0;return 10===l&&(h-=1e4),c&&(h+=150),40!==l&&65288!==l||(h+=50),41!==o&&65289!==o||(h+=50),h}function e_(l,o,c,h,m,y){let w=null,C=Jg(o,c,m,y);for(const E of h){const I=Jg(o-E.x,c,m,y)+E.badness;I<=C&&(w=E,C=I)}return{index:l,x:o,priorBreak:w,badness:C}}function t_(l){return l?t_(l.priorBreak).concat(l.index):[]}function Um(l,o,c,h,m,y,w){if("point"!==y)return[];if(!l)return[];const C=[],E=function(z,j,U,W,J,ne){let le=0;for(let oe=0;oe<z.length();oe++){const pe=z.getSection(oe);le+=jm(z.getCharCode(oe),pe,W,J,j,ne)}return le/Math.max(1,Math.ceil(le/U))}(l,o,c,h,m,w),I=l.text.indexOf("\u200b")>=0;let P=0;for(let z=0;z<l.length();z++){const j=l.getSection(z),U=l.getCharCode(z);if(Za[U]||(P+=jm(U,j,h,m,o,w)),z<l.length()-1){const W=!((F=U)<11904||!(Be["Bopomofo Extended"](F)||Be.Bopomofo(F)||Be["CJK Compatibility Forms"](F)||Be["CJK Compatibility Ideographs"](F)||Be["CJK Compatibility"](F)||Be["CJK Radicals Supplement"](F)||Be["CJK Strokes"](F)||Be["CJK Symbols and Punctuation"](F)||Be["CJK Unified Ideographs Extension A"](F)||Be["CJK Unified Ideographs"](F)||Be["Enclosed CJK Letters and Months"](F)||Be["Halfwidth and Fullwidth Forms"](F)||Be.Hiragana(F)||Be["Ideographic Description Characters"](F)||Be["Kangxi Radicals"](F)||Be["Katakana Phonetic Extensions"](F)||Be.Katakana(F)||Be["Vertical Forms"](F)||Be["Yi Radicals"](F)||Be["Yi Syllables"](F)));(z1[U]||W||j.imageName)&&C.push(e_(z+1,P,E,C,sb(U,l.getCharCode(z+1),W&&I),!1))}}var F;return t_(e_(l.length(),P,E,C,0,!0))}function Hm(l){let o=.5,c=.5;switch(l){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:o,verticalAlign:c}}function Gm(l,o,c,h,m){if(!h&&!m)return;const y=l[c],w=(l[c].x+y.metrics.advance*y.scale)*h;for(let C=o;C<=c;C++)l[C].x-=w,l[C].y+=m}function rp(l,o,c){const{horizontalAlign:h,verticalAlign:m}=Hm(c),y=o[0]-l.displaySize[0]*h,w=o[1]-l.displaySize[1]*m;return{image:l,top:w,bottom:w+l.displaySize[1],left:y,right:y+l.displaySize[0]}}function n_(l,o,c,h,m,y){const w=l.image;let C;if(w.content){const J=w.content,ne=w.pixelRatio||1;C=[J[0]/ne,J[1]/ne,w.displaySize[0]-J[2]/ne,w.displaySize[1]-J[3]/ne]}const E=o.left*y,I=o.right*y;let P,F,z,j;"width"===c||"both"===c?(j=m[0]+E-h[3],F=m[0]+I+h[1]):(j=m[0]+(E+I-w.displaySize[0])/2,F=j+w.displaySize[0]);const U=o.top*y,W=o.bottom*y;return"height"===c||"both"===c?(P=m[1]+U-h[0],z=m[1]+W+h[2]):(P=m[1]+(U+W-w.displaySize[1])/2,z=P+w.displaySize[1]),{image:w,top:P,right:F,bottom:z,left:j,collisionPadding:C}}const Ns=255,ha=128,ds=Ns*ha;function i_(l,o){const{expression:c}=o;if("constant"===c.kind)return{kind:"constant",layoutSize:c.evaluate(new fn(l+1))};if("source"===c.kind)return{kind:"source"};{const{zoomStops:h,interpolationType:m}=c;let y=0;for(;y<h.length&&h[y]<=l;)y++;y=Math.max(0,y-1);let w=y;for(;w<h.length&&h[w]<l+1;)w++;w=Math.min(h.length-1,w);const C=h[y],E=h[w];return"composite"===c.kind?{kind:"composite",minZoom:C,maxZoom:E,interpolationType:m}:{kind:"camera",minZoom:C,maxZoom:E,minSize:c.evaluate(new fn(C)),maxSize:c.evaluate(new fn(E)),interpolationType:m}}}function op(l,o,c){let h="never";const m=l.get(o);return m?h=m:l.get(c)&&(h="always"),h}const $m=da.VectorTileFeature.types,sp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bu(l,o,c,h,m,y,w,C,E,I,P,F,z){const j=C?Math.min(ds,Math.round(C[0])):0,U=C?Math.min(ds,Math.round(C[1])):0;l.emplaceBack(o,c,Math.round(32*h),Math.round(32*m),y,w,(j<<1)+(E?1:0),U,16*I,16*P,256*F,256*z)}function Wm(l,o,c){l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c)}function ab(l){for(const o of l.sections)if(md(o.text))return!0;return!1}class zl{constructor(o){this.layoutVertexArray=new zt,this.indexArray=new Vi,this.programConfigurations=o,this.segments=new _n,this.dynamicLayoutVertexArray=new Et,this.opacityVertexArray=new Vt,this.hasVisibleVertices=!1,this.placedSymbolArray=new ae}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(o,c,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Mc.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,nb.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,sp,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Qe("SymbolBuffers",zl);class Nc{constructor(o,c,h){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new h,this.segments=new _n,this.collisionVertexArray=new Sn}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,Kg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Qe("CollisionBuffers",Nc);class Dd{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=zh([]),this.placementViewportMatrix=zh([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=i_(this.zoom,c["text-size"]),this.iconSizeData=i_(this.zoom,c["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap="never"!==op(h,"text-overlap","text-allow-overlap")||"never"!==op(h,"icon-overlap","icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==y&&!m.isConstant(),this.sortFeaturesByY=("viewport-y"===y||"auto"===y&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===h.get("symbol-placement")&&(this.writingModes=h.get("text-writing-mode").map(w=>_.ai[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID}createArrays(){this.text=new zl(new Ps(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new zl(new Ps(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new de,this.lineVertexArray=new _e,this.symbolInstances=new te,this.textAnchorOffsets=new Te}calculateGlyphDependencies(o,c,h,m,y){for(let w=0;w<o.length;w++)if(c[o.charCodeAt(w)]=!0,(h||m)&&y){const C=Ji[o.charAt(w)];C&&(c[C.charCodeAt(0)]=!0)}}populate(o,c,h){const m=this.layers[0],y=m.layout,w=y.get("text-font"),C=y.get("text-field"),E=y.get("icon-image"),I=("constant"!==C.value.kind||C.value.value instanceof qi&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),P="constant"!==E.value.kind||!!E.value.value||Object.keys(E.parameters).length>0,F=y.get("symbol-sort-key");if(this.features=[],!I&&!P)return;const z=c.iconDependencies,j=c.glyphDependencies,U=c.availableImages,W=new fn(this.zoom);for(const{feature:J,id:ne,index:le,sourceLayerIndex:oe}of o){const pe=m._featureFilter.needGeometry,ge=xc(J,pe);if(!m._featureFilter.filter(W,ge,h))continue;let Ee,We;if(pe||(ge.geometry=Fl(J)),I){const Ge=m.getValueAndResolveTokens("text-field",ge,h,U),Ue=qi.factory(Ge);ab(Ue)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===oa()||this.hasRTLText&&Si.isParsed())&&(Ee=ib(Ue,m,ge))}if(P){const Ge=m.getValueAndResolveTokens("icon-image",ge,h,U);We=Ge instanceof Zi?Ge:Zi.fromString(Ge)}if(!Ee&&!We)continue;const nt=this.sortFeaturesByKey?F.evaluate(ge,{},h):void 0;if(this.features.push({id:ne,text:Ee,icon:We,index:le,sourceLayerIndex:oe,geometry:ge.geometry,properties:J.properties,type:$m[J.type],sortKey:nt}),We&&(z[We.name]=!0),Ee){const Ge=w.evaluate(ge,{},h).join(","),Ue="viewport"!==y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_.ai.vertical)>=0;for(const Ve of Ee.sections)if(Ve.image)z[Ve.image.name]=!0;else{const Ke=Jt(Ee.toString()),je=Ve.fontStack||Ge,Re=j[je]=j[je]||{};this.calculateGlyphDependencies(Ve.text,Re,Ue,this.allowVerticalPlacement,Ke)}}}"line"===y.get("symbol-placement")&&(this.features=function(J){const ne={},le={},oe=[];let pe=0;function ge(Ge){oe.push(J[Ge]),pe++}function Ee(Ge,Ue,Ve){const Ke=le[Ge];return delete le[Ge],le[Ue]=Ke,oe[Ke].geometry[0].pop(),oe[Ke].geometry[0]=oe[Ke].geometry[0].concat(Ve[0]),Ke}function We(Ge,Ue,Ve){const Ke=ne[Ue];return delete ne[Ue],ne[Ge]=Ke,oe[Ke].geometry[0].shift(),oe[Ke].geometry[0]=Ve[0].concat(oe[Ke].geometry[0]),Ke}function nt(Ge,Ue,Ve){const Ke=Ve?Ue[0][Ue[0].length-1]:Ue[0][0];return`${Ge}:${Ke.x}:${Ke.y}`}for(let Ge=0;Ge<J.length;Ge++){const Ue=J[Ge],Ve=Ue.geometry,Ke=Ue.text?Ue.text.toString():null;if(!Ke){ge(Ge);continue}const je=nt(Ke,Ve),Re=nt(Ke,Ve,!0);if(je in le&&Re in ne&&le[je]!==ne[Re]){const lt=We(je,Re,Ve),et=Ee(je,Re,oe[lt].geometry);delete ne[je],delete le[Re],le[nt(Ke,oe[et].geometry,!0)]=et,oe[lt].geometry=null}else je in le?Ee(je,Re,Ve):Re in ne?We(je,Re,Ve):(ge(Ge),ne[je]=pe-1,le[Re]=pe-1)}return oe.filter(Ge=>Ge.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((J,ne)=>J.sortKey-ne.sortKey)}update(o,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,c,this.layers,h),this.icon.programConfigurations.updatePaintArrays(o,c,this.layers,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,c){const h=this.lineVertexArray.length;if(void 0!==o.segment){let m=o.dist(c[o.segment+1]),y=o.dist(c[o.segment]);const w={};for(let C=o.segment+1;C<c.length;C++)w[C]={x:c[C].x,y:c[C].y,tileUnitDistanceFromAnchor:m},C<c.length-1&&(m+=c[C+1].dist(c[C]));for(let C=o.segment||0;C>=0;C--)w[C]={x:c[C].x,y:c[C].y,tileUnitDistanceFromAnchor:y},C>0&&(y+=c[C-1].dist(c[C]));for(let C=0;C<c.length;C++){const E=w[C];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(o,c,h,m,y,w,C,E,I,P,F,z){const j=o.indexArray,U=o.layoutVertexArray,W=o.segments.prepareSegment(4*c.length,U,j,this.canOverlap?w.sortKey:void 0),J=this.glyphOffsetArray.length,ne=W.vertexLength,le=this.allowVerticalPlacement&&C===_.ai.vertical?Math.PI/2:0,oe=w.text&&w.text.sections;for(let pe=0;pe<c.length;pe++){const{tl:ge,tr:Ee,bl:We,br:nt,tex:Ge,pixelOffsetTL:Ue,pixelOffsetBR:Ve,minFontScaleX:Ke,minFontScaleY:je,glyphOffset:Re,isSDF:lt,sectionIndex:et}=c[pe],Bt=W.vertexLength,Pn=Re[1];Bu(U,E.x,E.y,ge.x,Pn+ge.y,Ge.x,Ge.y,h,lt,Ue.x,Ue.y,Ke,je),Bu(U,E.x,E.y,Ee.x,Pn+Ee.y,Ge.x+Ge.w,Ge.y,h,lt,Ve.x,Ue.y,Ke,je),Bu(U,E.x,E.y,We.x,Pn+We.y,Ge.x,Ge.y+Ge.h,h,lt,Ue.x,Ve.y,Ke,je),Bu(U,E.x,E.y,nt.x,Pn+nt.y,Ge.x+Ge.w,Ge.y+Ge.h,h,lt,Ve.x,Ve.y,Ke,je),Wm(o.dynamicLayoutVertexArray,E,le),j.emplaceBack(Bt,Bt+1,Bt+2),j.emplaceBack(Bt+1,Bt+2,Bt+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Re[0]),pe!==c.length-1&&et===c[pe+1].sectionIndex||o.programConfigurations.populatePaintArrays(U.length,w,w.index,{},z,oe&&oe[et])}o.placedSymbolArray.emplaceBack(E.x,E.y,J,this.glyphOffsetArray.length-J,ne,I,P,E.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],C,0,!1,0,F)}_addCollisionDebugVertex(o,c,h,m,y,w){return c.emplaceBack(0,0),o.emplaceBack(h.x,h.y,m,y,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(o,c,h,m,y,w,C){const E=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),I=E.vertexLength,P=y.layoutVertexArray,F=y.collisionVertexArray,z=C.anchorX,j=C.anchorY;this._addCollisionDebugVertex(P,F,w,z,j,new ct(o,c)),this._addCollisionDebugVertex(P,F,w,z,j,new ct(h,c)),this._addCollisionDebugVertex(P,F,w,z,j,new ct(h,m)),this._addCollisionDebugVertex(P,F,w,z,j,new ct(o,m)),E.vertexLength+=4;const U=y.indexArray;U.emplaceBack(I,I+1),U.emplaceBack(I+1,I+2),U.emplaceBack(I+2,I+3),U.emplaceBack(I+3,I),E.primitiveLength+=4}addDebugCollisionBoxes(o,c,h,m){for(let y=o;y<c;y++){const w=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nc(Yn,zm.members,Ti),this.iconCollisionBox=new Nc(Yn,zm.members,Ti);for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(o,c,h,m,y,w,C,E,I){const P={};for(let F=c;F<h;F++){const z=o.get(F);P.textBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},P.textFeatureIndex=z.featureIndex;break}for(let F=m;F<y;F++){const z=o.get(F);P.verticalTextBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},P.verticalTextFeatureIndex=z.featureIndex;break}for(let F=w;F<C;F++){const z=o.get(F);P.iconBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},P.iconFeatureIndex=z.featureIndex;break}for(let F=E;F<I;F++){const z=o.get(F);P.verticalIconBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},P.verticalIconFeatureIndex=z.featureIndex;break}return P}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const h=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,c){const h=o.placedSymbolArray.get(c),m=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<m;y+=4)o.indexArray.emplaceBack(y,y+1,y+2),o.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const c=Math.sin(o),h=Math.cos(o),m=[],y=[],w=[];for(let C=0;C<this.symbolInstances.length;++C){w.push(C);const E=this.symbolInstances.get(C);m.push(0|Math.round(c*E.anchorX+h*E.anchorY)),y.push(E.featureIndex)}return w.sort((C,E)=>m[C]-m[E]||y[E]-y[C]),w}addToSortKeyRanges(o,c){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===c?h.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const h=this.symbolInstances.get(c);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,y,w)=>{m>=0&&w.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let lb,qm;Qe("SymbolBucket",Dd,{omit:["layers","collisionBoxArray","features","compareText"]}),Dd.MAX_GLYPHS=65535,Dd.addDynamicAttributes=Wm;var Zm={get paint(){return qm=qm||new Gn({"icon-opacity":new ut(Se.paint_symbol["icon-opacity"]),"icon-color":new ut(Se.paint_symbol["icon-color"]),"icon-halo-color":new ut(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new ut(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ut(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new rt(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new rt(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new ut(Se.paint_symbol["text-opacity"]),"text-color":new ut(Se.paint_symbol["text-color"],{runtimeType:Sr,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new ut(Se.paint_symbol["text-halo-color"]),"text-halo-width":new ut(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new ut(Se.paint_symbol["text-halo-blur"]),"text-translate":new rt(Se.paint_symbol["text-translate"]),"text-translate-anchor":new rt(Se.paint_symbol["text-translate-anchor"])})},get layout(){return lb=lb||new Gn({"symbol-placement":new rt(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new rt(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new rt(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ut(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new rt(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new rt(Se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new rt(Se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new rt(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new rt(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new rt(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new ut(Se.layout_symbol["icon-size"]),"icon-text-fit":new rt(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new rt(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new ut(Se.layout_symbol["icon-image"]),"icon-rotate":new ut(Se.layout_symbol["icon-rotate"]),"icon-padding":new ut(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new rt(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new ut(Se.layout_symbol["icon-offset"]),"icon-anchor":new ut(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new rt(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new rt(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new rt(Se.layout_symbol["text-rotation-alignment"]),"text-field":new ut(Se.layout_symbol["text-field"]),"text-font":new ut(Se.layout_symbol["text-font"]),"text-size":new ut(Se.layout_symbol["text-size"]),"text-max-width":new ut(Se.layout_symbol["text-max-width"]),"text-line-height":new rt(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new ut(Se.layout_symbol["text-letter-spacing"]),"text-justify":new ut(Se.layout_symbol["text-justify"]),"text-radial-offset":new ut(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new rt(Se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ut(Se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ut(Se.layout_symbol["text-anchor"]),"text-max-angle":new rt(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new rt(Se.layout_symbol["text-writing-mode"]),"text-rotate":new ut(Se.layout_symbol["text-rotate"]),"text-padding":new rt(Se.layout_symbol["text-padding"]),"text-keep-upright":new rt(Se.layout_symbol["text-keep-upright"]),"text-transform":new ut(Se.layout_symbol["text-transform"]),"text-offset":new ut(Se.layout_symbol["text-offset"]),"text-allow-overlap":new rt(Se.layout_symbol["text-allow-overlap"]),"text-overlap":new rt(Se.layout_symbol["text-overlap"]),"text-ignore-placement":new rt(Se.layout_symbol["text-ignore-placement"]),"text-optional":new rt(Se.layout_symbol["text-optional"])})}};class cb{constructor(o){if(void 0===o.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:bs,this.defaultValue=o}evaluate(o){if(o.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qe("FormatSectionOverride",cb,{omit:["defaultValue"]});class ap extends zo{constructor(o){super(o,Zm)}recalculate(o,c){if(super.recalculate(o,c),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const y of h)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,c,h,m){const y=this.layout.get(o).evaluate(c,{},h,m),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||cd(w.value)||!y?y:(C=c.properties,y.replace(/{([^{}]+)}/g,(I,P)=>P in C?String(C[P]):""));var C}createBucket(o){return new Dd(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of Zm.paint.overridableProperties){if(!ap.hasPaintOverride(this.layout,o))continue;const c=this.paint.get(o),h=new cb(c),m=new Tl(h,c.property.specification);let y=null;y="constant"===c.value.kind||"source"===c.value.kind?new lu("source",m):new pc("composite",m,c.value.zoomStops),this.paint._values[o]=new Ci(c.property,y,c.parameters)}}_handleOverridablePaintPropertyUpdate(o,c,h){return!(!this.layout||c.isDataDriven()||h.isDataDriven())&&ap.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,c){const h=o.get("text-field"),m=Zm.paint.properties[c];let y=!1;const w=C=>{for(const E of C)if(m.overrides&&m.overrides.hasOverride(E))return void(y=!0)};if("constant"===h.value.kind&&h.value.value instanceof qi)w(h.value.value.sections);else if("source"===h.value.kind){const C=I=>{y||(I instanceof ws&&Kn(I.value)===X?w(I.value.sections):I instanceof wl?w(I.sections):I.eachChild(C))},E=h.value;E._styleExpression&&C(E._styleExpression.expression)}return y}}let r_;var db={get paint(){return r_=r_||new Gn({"background-color":new rt(Se.paint_background["background-color"]),"background-pattern":new Lo(Se.paint_background["background-pattern"]),"background-opacity":new rt(Se.paint_background["background-opacity"])})}};class lp extends zo{constructor(o){super(o,db)}}let Km;var ub={get paint(){return Km=Km||new Gn({"raster-opacity":new rt(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new rt(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new rt(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new rt(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new rt(Se.paint_raster["raster-saturation"]),"raster-contrast":new rt(Se.paint_raster["raster-contrast"]),"raster-resampling":new rt(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new rt(Se.paint_raster["raster-fade-duration"])})}};class o_ extends zo{constructor(o){super(o,ub)}}class B1 extends zo{constructor(o){super(o,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=o}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class s_{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const a_=6371008.8;class Bl{constructor(o,c){if(isNaN(o)||isNaN(c))throw new Error(`Invalid LngLat object: (${o}, ${c})`);if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Bl(wa(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const c=Math.PI/180,h=this.lat*c,m=o.lat*c,y=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((o.lng-this.lng)*c);return a_*Math.acos(Math.min(y,1))}static convert(o){if(o instanceof Bl)return o;if(Array.isArray(o)&&(2===o.length||3===o.length))return new Bl(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&"object"==typeof o&&null!==o)return new Bl(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const l_=2*Math.PI*a_;function cp(l){return l_*Math.cos(l*Math.PI/180)}function hb(l){return(180+l)/360}function pb(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function dp(l,o){return l/cp(o)}function c_(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class Xm{constructor(o,c,h=0){this.x=+o,this.y=+c,this.z=+h}static fromLngLat(o,c=0){const h=Bl.convert(o);return new Xm(hb(h.lng),pb(h.lat),dp(c,h.lat))}toLngLat(){return new Bl(360*this.x-180,c_(this.y))}toAltitude(){return this.z*cp(c_(this.y))}meterInMercatorCoordinateUnits(){return 1/l_*(o=c_(this.y),1/Math.cos(o*Math.PI/180));var o}}function mb(l,o,c){var h=2*Math.PI*6378137/256/Math.pow(2,c);return[l*h-2*Math.PI*6378137/2,o*h-2*Math.PI*6378137/2]}class d_{constructor(o,c,h){if(o<0||o>25||h<0||h>=Math.pow(2,o)||c<0||c>=Math.pow(2,o))throw new Error(`x=${c}, y=${h}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=c,this.y=h,this.key=Vl(0,o,o,c,h)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,c,h){const m=(w=this.y,C=this.z,E=mb(256*(y=this.x),256*(w=Math.pow(2,C)-w-1),C),I=mb(256*(y+1),256*(w+1),C),E[0]+","+E[1]+","+I[0]+","+I[1]);var y,w,C,E,I;const P=function(F,z,j){let U,W="";for(let J=F;J>0;J--)U=1<<J-1,W+=(z&U?1:0)+(j&U?2:0);return W}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===h?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,P).replace(/{bbox-epsg-3857}/g,m)}isChildOf(o){const c=this.z-o.z;return c>0&&o.x===this.x>>c&&o.y===this.y>>c}getTilePoint(o){const c=Math.pow(2,this.z);return new ct((o.x*c-this.x)*ki,(o.y*c-this.y)*ki)}toString(){return`${this.z}/${this.x}/${this.y}`}}class fb{constructor(o,c){this.wrap=o,this.canonical=c,this.key=Vl(o,c.z,c.z,c.x,c.y)}}class Ho{constructor(o,c,h,m,y){if(o<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${h}`);this.overscaledZ=o,this.wrap=c,this.canonical=new d_(h,+m,+y),this.key=Vl(c,o,h,m,y)}clone(){return new Ho(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-o;return o>this.canonical.z?new Ho(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ho(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(o,c){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-o;return o>this.canonical.z?Vl(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y):Vl(this.wrap*+c,o,o,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const c=this.canonical.z-o.canonical.z;return 0===o.overscaledZ||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c}children(o){if(this.overscaledZ>=o)return[new Ho(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Ho(c,this.wrap,c,h,m),new Ho(c,this.wrap,c,h+1,m),new Ho(c,this.wrap,c,h,m+1),new Ho(c,this.wrap,c,h+1,m+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Ho(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Ho(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new Xm(o.x-this.wrap,o.y))}}function Vl(l,o,c,h,m){(l*=2)<0&&(l=-1*l-1);const y=1<<c;return(y*y*l+y*m+h).toString(36)+c.toString(36)+o.toString(36)}Qe("CanonicalTileID",d_),Qe("OverscaledTileID",Ho,{omit:["posMatrix"]});class Vu{constructor(o,c,h,m=1,y=1,w=1,C=0){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Wi(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const E=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=y,this.blueFactor=w,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<E;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(E,I)]=this.data[this._idx(E-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,E)]=this.data[this._idx(I,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<E;I++)for(let P=0;P<E;P++){const F=this.get(I,P);F>this.max&&(this.max=F),F<this.min&&(this.min=F)}}get(o,c){const h=new Uint8Array(this.data.buffer),m=4*this._idx(o,c);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(o+1)}unpack(o,c,h){return o*this.redFactor+c*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Uo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,c,h){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let m=c*this.dim,y=c*this.dim+this.dim,w=h*this.dim,C=h*this.dim+this.dim;switch(c){case-1:m=y-1;break;case 1:y=m+1}switch(h){case-1:w=C-1;break;case 1:C=w+1}const E=-c*this.dim,I=-h*this.dim;for(let P=w;P<C;P++)for(let F=m;F<y;F++)this.data[this._idx(F,P)]=o.data[this._idx(F+E,P+I)]}}Qe("DEMData",Vu);class Qm{constructor(o){this._stringToNumber={},this._numberToString=[];for(let c=0;c<o.length;c++){const h=o[c];this._stringToNumber[h]=c,this._numberToString[c]=h}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class Ym{constructor(o,c,h,m,y){this.type="Feature",this._vectorTileFeature=o,o._z=c,o._x=h,o._y=m,this.properties=o.properties,this.id=y}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const c in this)"_geometry"!==c&&"_vectorTileFeature"!==c&&(o[c]=this[c]);return o}}class Jm{constructor(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Il(ki,16,0),this.grid3D=new Il(ki,16,0),this.featureIndexArray=new Ie,this.promoteId=c}insert(o,c,h,m,y,w){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,y);const E=w?this.grid3D:this.grid;for(let I=0;I<c.length;I++){const P=c[I],F=[1/0,1/0,-1/0,-1/0];for(let z=0;z<P.length;z++){const j=P[z];F[0]=Math.min(F[0],j.x),F[1]=Math.min(F[1],j.y),F[2]=Math.max(F[2],j.x),F[3]=Math.max(F[3],j.y)}F[0]<ki&&F[1]<ki&&F[2]>=0&&F[3]>=0&&E.insert(C,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new da.VectorTile(new Oi(this.rawTileData)).layers,this.sourceLayerCoder=new Qm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,c,h,m){this.loadVTLayers();const y=o.params||{},w=ki/o.tileSize/o.scale,C=ud(y.filter),E=o.queryGeometry,I=o.queryPadding*w,P=ef(E),F=this.grid.query(P.minX-I,P.minY-I,P.maxX+I,P.maxY+I),z=ef(o.cameraQueryGeometry),j=this.grid3D.query(z.minX-I,z.minY-I,z.maxX+I,z.maxY+I,(J,ne,le,oe)=>function(pe,ge,Ee,We,nt){for(const Ue of pe)if(ge<=Ue.x&&Ee<=Ue.y&&We>=Ue.x&&nt>=Ue.y)return!0;const Ge=[new ct(ge,Ee),new ct(ge,nt),new ct(We,nt),new ct(We,Ee)];if(pe.length>2)for(const Ue of Ge)if(Os(pe,Ue))return!0;for(let Ue=0;Ue<pe.length-1;Ue++)if(jo(pe[Ue],pe[Ue+1],Ge))return!0;return!1}(o.cameraQueryGeometry,J-I,ne-I,le+I,oe+I));for(const J of j)F.push(J);F.sort(u_);const U={};let W;for(let J=0;J<F.length;J++){const ne=F[J];if(ne===W)continue;W=ne;const le=this.featureIndexArray.get(ne);let oe=null;this.loadMatchingFeature(U,le.bucketIndex,le.sourceLayerIndex,le.featureIndex,C,y.layers,y.availableImages,c,h,m,(pe,ge,Ee)=>(oe||(oe=Fl(pe)),ge.queryIntersectsFeature(E,pe,Ee,oe,this.z,o.transform,w,o.pixelPosMatrix)))}return U}loadMatchingFeature(o,c,h,m,y,w,C,E,I,P,F){const z=this.bucketLayerIDs[c];if(w&&!function(J,ne){for(let le=0;le<J.length;le++)if(ne.indexOf(J[le])>=0)return!0;return!1}(w,z))return;const j=this.sourceLayerCoder.decode(h),U=this.vtLayers[j].feature(m);if(y.needGeometry){const J=xc(U,!0);if(!y.filter(new fn(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!y.filter(new fn(this.tileID.overscaledZ),U))return;const W=this.getId(U,j);for(let J=0;J<z.length;J++){const ne=z[J];if(w&&w.indexOf(ne)<0)continue;const le=E[ne];if(!le)continue;let oe={};W&&P&&(oe=P.getState(le.sourceLayer||"_geojsonTileLayer",W));const pe=$i({},I[ne]);pe.paint=Lc(pe.paint,le.paint,U,oe,C),pe.layout=Lc(pe.layout,le.layout,U,oe,C);const ge=!F||F(U,le,oe);if(!ge)continue;const Ee=new Ym(U,this.z,this.x,this.y,W);Ee.layer=pe;let We=o[ne];void 0===We&&(We=o[ne]=[]),We.push({featureIndex:m,feature:Ee,intersectionZ:ge})}}lookupSymbolFeatures(o,c,h,m,y,w,C,E){const I={};this.loadVTLayers();const P=ud(y);for(const F of o)this.loadMatchingFeature(I,h,m,F,P,w,C,E,c);return I}hasLayer(o){for(const c of this.bucketLayerIDs)for(const h of c)if(o===h)return!0;return!1}getId(o,c){let h=o.id;return this.promoteId&&(h=o.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[c]],"boolean"==typeof h&&(h=Number(h))),h}}function Lc(l,o,c,h,m){return Zn(l,(y,w)=>{const C=o instanceof no?o.get(w):null;return C&&C.evaluate?C.evaluate(c,h,m):C})}function ef(l){let o=1/0,c=1/0,h=-1/0,m=-1/0;for(const y of l)o=Math.min(o,y.x),c=Math.min(c,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return{minX:o,minY:c,maxX:h,maxY:m}}function u_(l,o){return o-l}function ju(l,o,c,h,m){const y=[];for(let w=0;w<l.length;w++){const C=l[w];let E;for(let I=0;I<C.length-1;I++){let P=C[I],F=C[I+1];P.x<o&&F.x<o||(P.x<o?P=new ct(o,P.y+(o-P.x)/(F.x-P.x)*(F.y-P.y))._round():F.x<o&&(F=new ct(o,P.y+(o-P.x)/(F.x-P.x)*(F.y-P.y))._round()),P.y<c&&F.y<c||(P.y<c?P=new ct(P.x+(c-P.y)/(F.y-P.y)*(F.x-P.x),c)._round():F.y<c&&(F=new ct(P.x+(c-P.y)/(F.y-P.y)*(F.x-P.x),c)._round()),P.x>=h&&F.x>=h||(P.x>=h?P=new ct(h,P.y+(h-P.x)/(F.x-P.x)*(F.y-P.y))._round():F.x>=h&&(F=new ct(h,P.y+(h-P.x)/(F.x-P.x)*(F.y-P.y))._round()),P.y>=m&&F.y>=m||(P.y>=m?P=new ct(P.x+(m-P.y)/(F.y-P.y)*(F.x-P.x),m)._round():F.y>=m&&(F=new ct(P.x+(m-P.y)/(F.y-P.y)*(F.x-P.x),m)._round()),E&&P.equals(E[E.length-1])||(E=[P],y.push(E)),E.push(F)))))}}return y}Qe("FeatureIndex",Jm,{omit:["rawTileData","sourceLayerCoder"]});class Ls extends ct{constructor(o,c,h,m){super(o,c),this.angle=h,void 0!==m&&(this.segment=m)}clone(){return new Ls(this.x,this.y,this.angle,this.segment)}}function Ka(l,o,c,h,m){if(void 0===o.segment||0===c)return!0;let y=o,w=o.segment+1,C=0;for(;C>-c/2;){if(w--,w<0)return!1;C-=l[w].dist(y),y=l[w]}C+=l[w].dist(l[w+1]),w++;const E=[];let I=0;for(;C<c/2;){const P=l[w],F=l[w+1];if(!F)return!1;let z=l[w-1].angleTo(P)-P.angleTo(F);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:C,angleDelta:z}),I+=z;C-E[0].distance>h;)I-=E.shift().angleDelta;if(I>m)return!1;w++,C+=P.dist(F)}return!0}function h_(l){let o=0;for(let c=0;c<l.length-1;c++)o+=l[c].dist(l[c+1]);return o}function p_(l,o,c){return l?.6*o*c:0}function m_(l,o){return Math.max(l?l.right-l.left:0,o?o.right-o.left:0)}function f_(l,o,c,h,m,y){const w=p_(c,m,y),C=m_(c,h)*y;let E=0;const I=h_(l)/2;for(let P=0;P<l.length-1;P++){const F=l[P],z=l[P+1],j=F.dist(z);if(E+j>I){const U=(I-E)/j,W=po.number(F.x,z.x,U),J=po.number(F.y,z.y,U),ne=new Ls(W,J,z.angleTo(F),P);return ne._round(),!w||Ka(l,ne,C,w,o)?ne:void 0}E+=j}}function tf(l,o,c,h,m,y,w,C,E){const I=p_(h,y,w),P=m_(h,m),F=P*w,z=0===l[0].x||l[0].x===E||0===l[0].y||l[0].y===E;return o-F<o/4&&(o=F+o/4),g_(l,z?o/2*C%o:(P/2+2*y)*w*C%o,o,I,c,F,z,!1,E)}function g_(l,o,c,h,m,y,w,C,E){const I=y/2,P=h_(l);let F=0,z=o-c,j=[];for(let U=0;U<l.length-1;U++){const W=l[U],J=l[U+1],ne=W.dist(J),le=J.angleTo(W);for(;z+c<F+ne;){z+=c;const oe=(z-F)/ne,pe=po.number(W.x,J.x,oe),ge=po.number(W.y,J.y,oe);if(pe>=0&&pe<E&&ge>=0&&ge<E&&z-I>=0&&z+I<=P){const Ee=new Ls(pe,ge,le,U);Ee._round(),h&&!Ka(l,Ee,y,h,m)||j.push(Ee)}}F+=ne}return C||j.length||w||(j=g_(l,F/2,c,h,m,y,w,!0,E)),j}Qe("Anchor",Ls);const Id=ur;function __(l,o,c,h){const m=[],y=l.image,w=y.pixelRatio,C=y.paddedRect.w-2*Id,E=y.paddedRect.h-2*Id,I=l.right-l.left,P=l.bottom-l.top,F=y.stretchX||[[0,C]],z=y.stretchY||[[0,E]],j=(Ve,Ke)=>Ve+Ke[1]-Ke[0],U=F.reduce(j,0),W=z.reduce(j,0),J=C-U,ne=E-W;let le=0,oe=U,pe=0,ge=W,Ee=0,We=J,nt=0,Ge=ne;if(y.content&&h){const Ve=y.content;le=Uu(F,0,Ve[0]),pe=Uu(z,0,Ve[1]),oe=Uu(F,Ve[0],Ve[2]),ge=Uu(z,Ve[1],Ve[3]),Ee=Ve[0]-le,nt=Ve[1]-pe,We=Ve[2]-Ve[0]-oe,Ge=Ve[3]-Ve[1]-ge}const Ue=(Ve,Ke,je,Re)=>{const lt=up(Ve.stretch-le,oe,I,l.left),et=Ar(Ve.fixed-Ee,We,Ve.stretch,U),Bt=up(Ke.stretch-pe,ge,P,l.top),Pn=Ar(Ke.fixed-nt,Ge,Ke.stretch,W),$n=up(je.stretch-le,oe,I,l.left),Fi=Ar(je.fixed-Ee,We,je.stretch,U),xo=up(Re.stretch-pe,ge,P,l.top),Pr=Ar(Re.fixed-nt,Ge,Re.stretch,W),yi=new ct(lt,Bt),Ei=new ct($n,Bt),ji=new ct($n,xo),Ni=new ct(lt,xo),Wr=new ct(et/w,Pn/w),Li=new ct(Fi/w,Pr/w),Ui=o*Math.PI/180;if(Ui){const Or=Math.sin(Ui),Hi=Math.cos(Ui),mr=[Hi,-Or,Or,Hi];yi._matMult(mr),Ei._matMult(mr),Ni._matMult(mr),ji._matMult(mr)}const Rr=Ve.stretch+Ve.fixed,pr=Ke.stretch+Ke.fixed;return{tl:yi,tr:Ei,bl:Ni,br:ji,tex:{x:y.paddedRect.x+Id+Rr,y:y.paddedRect.y+Id+pr,w:je.stretch+je.fixed-Rr,h:Re.stretch+Re.fixed-pr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wr,pixelOffsetBR:Li,minFontScaleX:We/w/I,minFontScaleY:Ge/w/P,isSDF:c}};if(h&&(y.stretchX||y.stretchY)){const Ve=v_(F,J,U),Ke=v_(z,ne,W);for(let je=0;je<Ve.length-1;je++){const Re=Ve[je],lt=Ve[je+1];for(let et=0;et<Ke.length-1;et++)m.push(Ue(Re,Ke[et],lt,Ke[et+1]))}}else m.push(Ue({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:E+1}));return m}function Uu(l,o,c){let h=0;for(const m of l)h+=Math.max(o,Math.min(c,m[1]))-Math.max(o,Math.min(c,m[0]));return h}function v_(l,o,c){const h=[{fixed:-Id,stretch:0}];for(const[m,y]of l){const w=h[h.length-1];h.push({fixed:m-w.stretch,stretch:w.stretch}),h.push({fixed:m-w.stretch,stretch:w.stretch+(y-m)})}return h.push({fixed:o+Id,stretch:c}),h}function up(l,o,c,h){return l/o*c+h}function Ar(l,o,c,h){return l-o*c/h}class Ad{constructor(o,c,h,m,y,w,C,E,I,P){if(this.boxStartIndex=o.length,I){let F=w.top,z=w.bottom;const j=w.collisionPadding;j&&(F-=j[1],z+=j[3]);let U=z-F;U>0&&(U=Math.max(10,U),this.circleDiameter=U)}else{let F=w.top*C-E[0],z=w.bottom*C+E[2],j=w.left*C-E[3],U=w.right*C+E[1];const W=w.collisionPadding;if(W&&(j-=W[0]*C,F-=W[1]*C,U+=W[2]*C,z+=W[3]*C),P){const J=new ct(j,F),ne=new ct(U,F),le=new ct(j,z),oe=new ct(U,z),pe=P*Math.PI/180;J._rotate(pe),ne._rotate(pe),le._rotate(pe),oe._rotate(pe),j=Math.min(J.x,ne.x,le.x,oe.x),U=Math.max(J.x,ne.x,le.x,oe.x),F=Math.min(J.y,ne.y,le.y,oe.y),z=Math.max(J.y,ne.y,le.y,oe.y)}o.emplaceBack(c.x,c.y,j,F,U,z,h,m,y)}this.boxEndIndex=o.length}}class y_{constructor(o=[],c=nf){if(this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const o=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:c,compare:h}=this,m=c[o];for(;o>0;){const y=o-1>>1,w=c[y];if(h(m,w)>=0)break;c[o]=w,o=y}c[o]=m}_down(o){const{data:c,compare:h}=this,m=this.length>>1,y=c[o];for(;o<m;){let w=1+(o<<1),C=c[w];const E=w+1;if(E<this.length&&h(c[E],C)<0&&(w=E,C=c[E]),h(C,y)>=0)break;c[o]=C,o=w}c[o]=y}}function nf(l,o){return l<o?-1:l>o?1:0}function $r(l,o=1,c=!1){let h=1/0,m=1/0,y=-1/0,w=-1/0;const C=l[0];for(let j=0;j<C.length;j++){const U=C[j];(!j||U.x<h)&&(h=U.x),(!j||U.y<m)&&(m=U.y),(!j||U.x>y)&&(y=U.x),(!j||U.y>w)&&(w=U.y)}const E=Math.min(y-h,w-m);let I=E/2;const P=new y_([],Hu);if(0===E)return new ct(h,m);for(let j=h;j<y;j+=E)for(let U=m;U<w;U+=E)P.push(new zc(j+I,U+I,I,l));let F=function(j){let U=0,W=0,J=0;const ne=j[0];for(let le=0,oe=ne.length,pe=oe-1;le<oe;pe=le++){const ge=ne[le],Ee=ne[pe],We=ge.x*Ee.y-Ee.x*ge.y;W+=(ge.x+Ee.x)*We,J+=(ge.y+Ee.y)*We,U+=3*We}return new zc(W/U,J/U,0,j)}(l),z=P.length;for(;P.length;){const j=P.pop();(j.d>F.d||!F.d)&&(F=j,c&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,z)),j.max-F.d<=o||(I=j.h/2,P.push(new zc(j.p.x-I,j.p.y-I,I,l)),P.push(new zc(j.p.x+I,j.p.y-I,I,l)),P.push(new zc(j.p.x-I,j.p.y+I,I,l)),P.push(new zc(j.p.x+I,j.p.y+I,I,l)),z+=4)}return c&&(console.log(`num probes: ${z}`),console.log(`best distance: ${F.d}`)),F.p}function Hu(l,o){return o.max-l.max}function zc(l,o,c,h){this.p=new ct(l,o),this.h=c,this.d=function(m,y){let w=!1,C=1/0;for(let E=0;E<y.length;E++){const I=y[E];for(let P=0,F=I.length,z=F-1;P<F;z=P++){const j=I[P],U=I[z];j.y>m.y!=U.y>m.y&&m.x<(U.x-j.x)*(m.y-j.y)/(U.y-j.y)+j.x&&(w=!w),C=Math.min(C,Og(m,j,U))}}return(w?1:-1)*Math.sqrt(C)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var er;_.aq=void 0,(er=_.aq||(_.aq={}))[er.center=1]="center",er[er.left=2]="left",er[er.right=3]="right",er[er.top=4]="top",er[er.bottom=5]="bottom",er[er["top-left"]=6]="top-left",er[er["top-right"]=7]="top-right",er[er["bottom-left"]=8]="bottom-left",er[er["bottom-right"]=9]="bottom-right";const jl=7,hp=Number.POSITIVE_INFINITY;function b_(l,o){return o[1]!==hp?function(c,h,m){let y=0,w=0;switch(h=Math.abs(h),m=Math.abs(m),c){case"top-right":case"top-left":case"top":w=m-jl;break;case"bottom-right":case"bottom-left":case"bottom":w=-m+jl}switch(c){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,w]}(l,o[0],o[1]):function(c,h){let m=0,y=0;h<0&&(h=0);const w=h/Math.SQRT2;switch(c){case"top-right":case"top-left":y=w-jl;break;case"bottom-right":case"bottom-left":y=-w+jl;break;case"bottom":y=-h+jl;break;case"top":y=h-jl}switch(c){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(l,o[0])}function rf(l,o,c){var h;const m=l.layout,y=null===(h=m.get("text-variable-anchor-offset"))||void 0===h?void 0:h.evaluate(o,{},c);if(y){const C=y.values,E=[];for(let I=0;I<C.length;I+=2){const P=E[I]=C[I],F=C[I+1].map(z=>z*Pi);P.startsWith("top")?F[1]-=jl:P.startsWith("bottom")&&(F[1]+=jl),E[I+1]=F}return new ho(E)}const w=m.get("text-variable-anchor");if(w){let C;C=void 0!==l._unevaluatedLayout.getValue("text-radial-offset")?[m.get("text-radial-offset").evaluate(o,{},c)*Pi,hp]:m.get("text-offset").evaluate(o,{},c).map(I=>I*Pi);const E=[];for(const I of w)E.push(I,b_(I,C));return new ho(E)}return null}function sf(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function x_(l,o,c,h,m,y,w,C,E,I,P){let F=y.textMaxSize.evaluate(o,{});void 0===F&&(F=w);const z=l.layers[0].layout,j=z.get("icon-offset").evaluate(o,{},P),U=S_(c.horizontal),W=w/24,J=l.tilePixelRatio*W,ne=l.tilePixelRatio*F/24,le=l.tilePixelRatio*C,oe=l.tilePixelRatio*z.get("symbol-spacing"),pe=z.get("text-padding")*l.tilePixelRatio,ge=function(Re,lt,et,Bt=1){const Pn=Re.get("icon-padding").evaluate(lt,{},et),$n=Pn&&Pn.values;return[$n[0]*Bt,$n[1]*Bt,$n[2]*Bt,$n[3]*Bt]}(z,o,P,l.tilePixelRatio),Ee=z.get("text-max-angle")/180*Math.PI,We="viewport"!==z.get("text-rotation-alignment")&&"point"!==z.get("symbol-placement"),nt="map"===z.get("icon-rotation-alignment")&&"point"!==z.get("symbol-placement"),Ge=z.get("symbol-placement"),Ue=oe/2,Ve=z.get("icon-text-fit");let Ke;h&&"none"!==Ve&&(l.allowVerticalPlacement&&c.vertical&&(Ke=n_(h,c.vertical,Ve,z.get("icon-text-fit-padding"),j,W)),U&&(h=n_(h,U,Ve,z.get("icon-text-fit-padding"),j,W)));const je=(Re,lt)=>{lt.x<0||lt.x>=ki||lt.y<0||lt.y>=ki||function(et,Bt,Pn,$n,Fi,xo,Pr,yi,Ei,ji,Ni,Wr,Li,Ui,Rr,pr,Or,Hi,mr,bi,Ut,fr,tr,Wn,us){const zs=et.addToLineVertexArray(Bt,Pn);let Bs,Qa,hs,oi,ui=0,Ya=0,Wu=0,T_=0,df=-1,uf=-1;const Ja={};let hf=la("");if(et.allowVerticalPlacement&&$n.vertical){const qr=yi.layout.get("text-rotate").evaluate(Ut,{},Wn)+90;hs=new Ad(Ei,Bt,ji,Ni,Wr,$n.vertical,Li,Ui,Rr,qr),Pr&&(oi=new Ad(Ei,Bt,ji,Ni,Wr,Pr,Or,Hi,Rr,qr))}if(Fi){const qr=yi.layout.get("icon-rotate").evaluate(Ut,{}),ms="none"!==yi.layout.get("icon-text-fit"),Hl=__(Fi,qr,tr,ms),Vs=Pr?__(Pr,qr,tr,ms):void 0;Qa=new Ad(Ei,Bt,ji,Ni,Wr,Fi,Or,Hi,!1,qr),ui=4*Hl.length;const Vc=et.iconSizeData;let pa=null;"source"===Vc.kind?(pa=[ha*yi.layout.get("icon-size").evaluate(Ut,{})],pa[0]>ds&&Wi(`${et.layerIds[0]}: Value for "icon-size" is >= ${Ns}. Reduce your "icon-size".`)):"composite"===Vc.kind&&(pa=[ha*fr.compositeIconSizes[0].evaluate(Ut,{},Wn),ha*fr.compositeIconSizes[1].evaluate(Ut,{},Wn)],(pa[0]>ds||pa[1]>ds)&&Wi(`${et.layerIds[0]}: Value for "icon-size" is >= ${Ns}. Reduce your "icon-size".`)),et.addSymbols(et.icon,Hl,pa,bi,mr,Ut,_.ai.none,Bt,zs.lineStartIndex,zs.lineLength,-1,Wn),df=et.icon.placedSymbolArray.length-1,Vs&&(Ya=4*Vs.length,et.addSymbols(et.icon,Vs,pa,bi,mr,Ut,_.ai.vertical,Bt,zs.lineStartIndex,zs.lineLength,-1,Wn),uf=et.icon.placedSymbolArray.length-1)}const k_=Object.keys($n.horizontal);for(const qr of k_){const ms=$n.horizontal[qr];if(!Bs){hf=la(ms.text);const Vs=yi.layout.get("text-rotate").evaluate(Ut,{},Wn);Bs=new Ad(Ei,Bt,ji,Ni,Wr,ms,Li,Ui,Rr,Vs)}const Hl=1===ms.positionedLines.length;if(Wu+=w_(et,Bt,ms,xo,yi,Rr,Ut,pr,zs,$n.vertical?_.ai.horizontal:_.ai.horizontalOnly,Hl?k_:[qr],Ja,df,fr,Wn),Hl)break}$n.vertical&&(T_+=w_(et,Bt,$n.vertical,xo,yi,Rr,Ut,pr,zs,_.ai.vertical,["vertical"],Ja,uf,fr,Wn));const _b=Bs?Bs.boxStartIndex:et.collisionBoxArray.length,vb=Bs?Bs.boxEndIndex:et.collisionBoxArray.length,yb=hs?hs.boxStartIndex:et.collisionBoxArray.length,_p=hs?hs.boxEndIndex:et.collisionBoxArray.length,el=Qa?Qa.boxStartIndex:et.collisionBoxArray.length,qu=Qa?Qa.boxEndIndex:et.collisionBoxArray.length,E_=oi?oi.boxStartIndex:et.collisionBoxArray.length,M_=oi?oi.boxEndIndex:et.collisionBoxArray.length;let ps=-1;const pf=(qr,ms)=>qr&&qr.circleDiameter?Math.max(qr.circleDiameter,ms):ms;ps=pf(Bs,ps),ps=pf(hs,ps),ps=pf(Qa,ps),ps=pf(oi,ps);const bb=ps>-1?1:0;bb&&(ps*=us/Pi),et.glyphOffsetArray.length>=Dd.MAX_GLYPHS&&Wi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ut.sortKey&&et.addToSortKeyRanges(et.symbolInstances.length,Ut.sortKey);const V1=rf(yi,Ut,Wn),[mf,ff]=function(qr,ms){const Hl=qr.length,Vs=ms?.values;if(Vs?.length>0)for(let Vc=0;Vc<Vs.length;Vc+=2){const pa=Vs[Vc+1];qr.emplaceBack(_.aq[Vs[Vc]],pa[0],pa[1])}return[Hl,qr.length]}(et.textAnchorOffsets,V1);et.symbolInstances.emplaceBack(Bt.x,Bt.y,Ja.right>=0?Ja.right:-1,Ja.center>=0?Ja.center:-1,Ja.left>=0?Ja.left:-1,Ja.vertical||-1,df,uf,hf,_b,vb,yb,_p,el,qu,E_,M_,ji,Wu,T_,ui,Ya,bb,0,Li,ps,mf,ff)}(l,lt,Re,c,h,m,Ke,l.layers[0],l.collisionBoxArray,o.index,o.sourceLayerIndex,l.index,J,[pe,pe,pe,pe],We,E,le,ge,nt,j,o,y,I,P,w)};if("line"===Ge)for(const Re of ju(o.geometry,0,0,ki,ki)){const lt=tf(Re,oe,Ee,c.vertical||U,h,24,ne,l.overscaling,ki);for(const et of lt)U&&af(l,U.text,Ue,et)||je(Re,et)}else if("line-center"===Ge){for(const Re of o.geometry)if(Re.length>1){const lt=f_(Re,Ee,c.vertical||U,h,24,ne);lt&&je(Re,lt)}}else if("Polygon"===o.type)for(const Re of $h(o.geometry,0)){const lt=$r(Re,16);je(Re[0],new Ls(lt.x,lt.y,0))}else if("LineString"===o.type)for(const Re of o.geometry)je(Re,new Ls(Re[0].x,Re[0].y,0));else if("Point"===o.type)for(const Re of o.geometry)for(const lt of Re)je([lt],new Ls(lt.x,lt.y,0))}function w_(l,o,c,h,m,y,w,C,E,I,P,F,z,j,U){const W=function(le,oe,pe,ge,Ee,We,nt,Ge){const Ue=ge.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,Ve=[];for(const Ke of oe.positionedLines)for(const je of Ke.positionedGlyphs){if(!je.rect)continue;const Re=je.rect||{};let lt=Rc+1,et=!0,Bt=1,Pn=0;const $n=(Ee||Ge)&&je.vertical,Fi=je.metrics.advance*je.scale/2;if(Ge&&oe.verticalizable&&(Pn=Ke.lineOffset/2-(je.imageName?-(Pi-je.metrics.width*je.scale)/2:(je.scale-1)*Pi)),je.imageName){const bi=nt[je.imageName];et=bi.sdf,Bt=bi.pixelRatio,lt=ur/Bt}const xo=Ee?[je.x+Fi,je.y]:[0,0];let Pr=Ee?[0,0]:[je.x+Fi+pe[0],je.y+pe[1]-Pn],yi=[0,0];$n&&(yi=Pr,Pr=[0,0]);const Ei=je.metrics.isDoubleResolution?2:1,ji=(je.metrics.left-lt)*je.scale-Fi+Pr[0],Ni=(-je.metrics.top-lt)*je.scale+Pr[1],Wr=ji+Re.w/Ei*je.scale/Bt,Li=Ni+Re.h/Ei*je.scale/Bt,Ui=new ct(ji,Ni),Rr=new ct(Wr,Ni),pr=new ct(ji,Li),Or=new ct(Wr,Li);if($n){const bi=new ct(-Fi,Fi-zu),Ut=-Math.PI/2,fr=Pi/2-Fi,tr=new ct(5-zu-fr,-(je.imageName?fr:0)),Wn=new ct(...yi);Ui._rotateAround(Ut,bi)._add(tr)._add(Wn),Rr._rotateAround(Ut,bi)._add(tr)._add(Wn),pr._rotateAround(Ut,bi)._add(tr)._add(Wn),Or._rotateAround(Ut,bi)._add(tr)._add(Wn)}if(Ue){const bi=Math.sin(Ue),Ut=Math.cos(Ue),fr=[Ut,-bi,bi,Ut];Ui._matMult(fr),Rr._matMult(fr),pr._matMult(fr),Or._matMult(fr)}const Hi=new ct(0,0),mr=new ct(0,0);Ve.push({tl:Ui,tr:Rr,bl:pr,br:Or,tex:Re,writingMode:oe.writingMode,glyphOffset:xo,sectionIndex:je.sectionIndex,isSDF:et,pixelOffsetTL:Hi,pixelOffsetBR:mr,minFontScaleX:0,minFontScaleY:0})}return Ve}(0,c,C,m,y,w,h,l.allowVerticalPlacement),J=l.textSizeData;let ne=null;"source"===J.kind?(ne=[ha*m.layout.get("text-size").evaluate(w,{})],ne[0]>ds&&Wi(`${l.layerIds[0]}: Value for "text-size" is >= ${Ns}. Reduce your "text-size".`)):"composite"===J.kind&&(ne=[ha*j.compositeTextSizes[0].evaluate(w,{},U),ha*j.compositeTextSizes[1].evaluate(w,{},U)],(ne[0]>ds||ne[1]>ds)&&Wi(`${l.layerIds[0]}: Value for "text-size" is >= ${Ns}. Reduce your "text-size".`)),l.addSymbols(l.text,W,ne,C,y,w,I,o,E.lineStartIndex,E.lineLength,z,U);for(const le of P)F[le]=l.text.placedSymbolArray.length-1;return 4*W.length}function S_(l){for(const o in l)return l[o];return null}function af(l,o,c,h){const m=l.compareText;if(o in m){const y=m[o];for(let w=y.length-1;w>=0;w--)if(h.dist(y[w])<c)return!0}else m[o]=[];return m[o].push(h),!1}const pp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class lf{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,h]=new Uint8Array(o,0,2);if(219!==c)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(1!==m)throw new Error(`Got v${m} data when expected v1.`);const y=pp[15&h];if(!y)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[C]=new Uint32Array(o,4,1);return new lf(C,w,y,o)}constructor(o,c=64,h=Float64Array,m){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=h,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const y=pp.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,C=o*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-C%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+C+E,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+C+E),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+C+E,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=o)}add(o,c){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=o,this.coords[this._pos++]=c,h}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return Bc(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,c,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:w,nodeSize:C}=this,E=[0,y.length-1,0],I=[];for(;E.length;){const P=E.pop()||0,F=E.pop()||0,z=E.pop()||0;if(F-z<=C){for(let J=z;J<=F;J++){const ne=w[2*J],le=w[2*J+1];ne>=o&&ne<=h&&le>=c&&le<=m&&I.push(y[J])}continue}const j=z+F>>1,U=w[2*j],W=w[2*j+1];U>=o&&U<=h&&W>=c&&W<=m&&I.push(y[j]),(0===P?o<=U:c<=W)&&(E.push(z),E.push(j-1),E.push(1-P)),(0===P?h>=U:m>=W)&&(E.push(j+1),E.push(F),E.push(1-P))}return I}within(o,c,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:w}=this,C=[0,m.length-1,0],E=[],I=h*h;for(;C.length;){const P=C.pop()||0,F=C.pop()||0,z=C.pop()||0;if(F-z<=w){for(let J=z;J<=F;J++)cf(y[2*J],y[2*J+1],o,c)<=I&&E.push(m[J]);continue}const j=z+F>>1,U=y[2*j],W=y[2*j+1];cf(U,W,o,c)<=I&&E.push(m[j]),(0===P?o-h<=U:c-h<=W)&&(C.push(z),C.push(j-1),C.push(1-P)),(0===P?o+h>=U:c+h>=W)&&(C.push(j+1),C.push(F),C.push(1-P))}return E}}function Bc(l,o,c,h,m,y){if(m-h<=c)return;const w=h+m>>1;C_(l,o,w,h,m,y),Bc(l,o,c,h,w-1,1-y),Bc(l,o,c,w+1,m,1-y)}function C_(l,o,c,h,m,y){for(;m>h;){if(m-h>600){const I=m-h+1,P=c-h+1,F=Math.log(I),z=.5*Math.exp(2*F/3),j=.5*Math.sqrt(F*z*(I-z)/I)*(P-I/2<0?-1:1);C_(l,o,c,Math.max(h,Math.floor(c-P*z/I+j)),Math.min(m,Math.floor(c+(I-P)*z/I+j)),y)}const w=o[2*c+y];let C=h,E=m;for(Gu(l,o,h,c),o[2*m+y]>w&&Gu(l,o,h,m);C<E;){for(Gu(l,o,C,E),C++,E--;o[2*C+y]<w;)C++;for(;o[2*E+y]>w;)E--}o[2*h+y]===w?Gu(l,o,h,E):(E++,Gu(l,o,E,m)),E<=c&&(h=E+1),c<=E&&(m=E-1)}}function Gu(l,o,c,h){mp(l,c,h),mp(o,2*c,2*h),mp(o,2*c+1,2*h+1)}function mp(l,o,c){const h=l[o];l[o]=l[c],l[c]=h}function cf(l,o,c,h){const m=l-c,y=o-h;return m*m+y*y}var fp;_.bg=void 0,(fp=_.bg||(_.bg={})).create="create",fp.load="load",fp.fullLoad="fullLoad";let Xa=null,Ul=[];const gp=1e3/60,$u="loadTime",Pd="fullLoadTime",gb={mark(l){performance.mark(l)},frame(l){const o=l;null!=Xa&&Ul.push(o-Xa),Xa=o},clearMetrics(){Xa=null,Ul=[],performance.clearMeasures($u),performance.clearMeasures(Pd);for(const l in _.bg)performance.clearMarks(_.bg[l])},getPerformanceMetrics(){performance.measure($u,_.bg.create,_.bg.load),performance.measure(Pd,_.bg.create,_.bg.fullLoad);const l=performance.getEntriesByName($u)[0].duration,o=performance.getEntriesByName(Pd)[0].duration,c=Ul.length,h=1/(Ul.reduce((y,w)=>y+w,0)/c/1e3),m=Ul.filter(y=>y>gp).reduce((y,w)=>y+(w-gp)/gp,0);return{loadTime:l,fullLoadTime:o,fps:h,percentDroppedFrames:m/(c+m)*100,totalFrames:c}}};_.$=function(l,o,c){var h,m,y,w,C,E,I,P,F,z,j,U,W=c[0],J=c[1],ne=c[2];return o===l?(l[12]=o[0]*W+o[4]*J+o[8]*ne+o[12],l[13]=o[1]*W+o[5]*J+o[9]*ne+o[13],l[14]=o[2]*W+o[6]*J+o[10]*ne+o[14],l[15]=o[3]*W+o[7]*J+o[11]*ne+o[15]):(m=o[1],y=o[2],w=o[3],C=o[4],E=o[5],I=o[6],P=o[7],F=o[8],z=o[9],j=o[10],U=o[11],l[0]=h=o[0],l[1]=m,l[2]=y,l[3]=w,l[4]=C,l[5]=E,l[6]=I,l[7]=P,l[8]=F,l[9]=z,l[10]=j,l[11]=U,l[12]=h*W+C*J+F*ne+o[12],l[13]=m*W+E*J+z*ne+o[13],l[14]=y*W+I*J+j*ne+o[14],l[15]=w*W+P*J+U*ne+o[15]),l},_.A=wc,_.B=po,_.C=class{constructor(l,o,c){this.receive=h=>{const m=h.data,y=m.id;if(y&&(!m.targetMapId||this.mapId===m.targetMapId))if("<cancel>"===m.type){delete this.tasks[y];const w=this.cancelCallbacks[y];delete this.cancelCallbacks[y],w&&w()}else Di()||m.mustQueue?(this.tasks[y]=m,this.taskQueue.push(y),this.invoker.trigger()):this.processTask(y,m)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),m=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(h,m)},this.target=l,this.parent=o,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new s_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Di()?l:window}send(l,o,c,h,m=!1){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[y]=c);const w=[],C={id:y,type:l,hasCallback:!!c,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:ia(o,w)};return this.target.postMessage(C,{transfer:w}),{cancel:()=>{c&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(l,o){if("<response>"===o.type){const c=this.callbacks[l];delete this.callbacks[l],c&&(o.error?c(za(o.error)):c(null,za(o.data)))}else{let c=!1;const h=[],m=o.hasCallback?(C,E)=>{c=!0,delete this.cancelCallbacks[l];const I={id:l,type:"<response>",sourceMapId:this.mapId,error:C?ia(C):null,data:ia(E,h)};this.target.postMessage(I,{transfer:h})}:C=>{c=!0};let y=null;const w=za(o.data);if(this.parent[o.type])y=this.parent[o.type](o.sourceMapId,w,m);else if("getWorkerSource"in this.parent){const C=o.type.split(".");y=this.parent.getWorkerSource(o.sourceMapId,C[0],w.source)[C[1]](w,m)}else m(new Error(`Could not find function ${o.type}`));!c&&y&&y.cancel&&(this.cancelCallbacks[l]=y.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},_.D=rt,_.E=vl,_.F=function(l,o){const c={};for(let h=0;h<o.length;h++){const m=o[h];m in l&&(c[m]=l[m])}return c},_.G=hb,_.H=pb,_.I=Oc,_.J=td,_.K=Qo,_.L=Bl,_.M=gl,_.N=ki,_.O=Ho,_.P=ct,_.Q=An,_.R=Uo,_.S=_n,_.T=vu,_.U=Xm,_.V=class extends Al{},_.W=d_,_.X=function(l,o){const c=window.document.createElement("video");c.muted=!0,c.onloadstart=function(){o(null,c)};for(let h=0;h<l.length;h++){const m=window.document.createElement("source");Io(l[h])||(c.crossOrigin="Anonymous"),m.src=l[h],c.appendChild(m)}return{cancel:()=>{}}},_.Y=Fe,_.Z=function(){var l=new wc(16);return wc!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},_._=En,_.a=fl,_.a$=class extends V{},_.a0=function(l,o,c){var h=c[0],m=c[1],y=c[2];return l[0]=o[0]*h,l[1]=o[1]*h,l[2]=o[2]*h,l[3]=o[3]*h,l[4]=o[4]*m,l[5]=o[5]*m,l[6]=o[6]*m,l[7]=o[7]*m,l[8]=o[8]*y,l[9]=o[9]*y,l[10]=o[10]*y,l[11]=o[11]*y,l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l},_.a1=Fg,_.a2=function(){return ml++},_.a3=Q,_.a4=Dd,_.a5=function(){Si.isLoading()||Si.isLoaded()||"deferred"!==oa()||li()},_.a6=ud,_.a7=xc,_.a8=fn,_.a9=Ym,_.aA=Er,_.aB=function(l){l=l.slice();const o=Object.create(null);for(let c=0;c<l.length;c++)o[l[c].id]=l[c];for(let c=0;c<l.length;c++)"ref"in l[c]&&(l[c]=co(l[c],o[l[c].ref]));return l},_.aC=function(l){if("custom"===l.type)return new B1(l);switch(l.type){case"background":return new lp(l);case"circle":return new Uy(l);case"fill":return new qy(l);case"fill-extrusion":return new I1(l);case"heatmap":return new hn(l);case"hillshade":return new Ir(l);case"line":return new tb(l);case"raster":return new o_(l);case"symbol":return new ap(l)}},_.aD=zr,_.aE=function(l,o){if(!l)return[{command:nn.setStyle,args:[o]}];let c=[];try{if(!bn(l.version,o.version))return[{command:nn.setStyle,args:[o]}];bn(l.center,o.center)||c.push({command:nn.setCenter,args:[o.center]}),bn(l.zoom,o.zoom)||c.push({command:nn.setZoom,args:[o.zoom]}),bn(l.bearing,o.bearing)||c.push({command:nn.setBearing,args:[o.bearing]}),bn(l.pitch,o.pitch)||c.push({command:nn.setPitch,args:[o.pitch]}),bn(l.sprite,o.sprite)||c.push({command:nn.setSprite,args:[o.sprite]}),bn(l.glyphs,o.glyphs)||c.push({command:nn.setGlyphs,args:[o.glyphs]}),bn(l.transition,o.transition)||c.push({command:nn.setTransition,args:[o.transition]}),bn(l.light,o.light)||c.push({command:nn.setLight,args:[o.light]});const h={},m=[];!function(w,C,E,I){let P;for(P in C=C||{},w=w||{})Object.prototype.hasOwnProperty.call(w,P)&&(Object.prototype.hasOwnProperty.call(C,P)||yl(P,E,I));for(P in C)Object.prototype.hasOwnProperty.call(C,P)&&(Object.prototype.hasOwnProperty.call(w,P)?bn(w[P],C[P])||("geojson"===w[P].type&&"geojson"===C[P].type&&tc(w,C,P)?E.push({command:nn.setGeoJSONSourceData,args:[P,C[P].data]}):Ao(P,C,E,I)):uo(P,C,E))}(l.sources,o.sources,m,h);const y=[];l.layers&&l.layers.forEach(w=>{h[w.source]?c.push({command:nn.removeLayer,args:[w.id]}):y.push(w)}),c=c.concat(m),function(w,C,E){C=C||[];const I=(w=w||[]).map(Qs),P=C.map(Qs),F=w.reduce(Ma,{}),z=C.reduce(Ma,{}),j=I.slice(),U=Object.create(null);let W,J,ne,le,oe,pe,ge;for(W=0,J=0;W<I.length;W++)ne=I[W],Object.prototype.hasOwnProperty.call(z,ne)?J++:(E.push({command:nn.removeLayer,args:[ne]}),j.splice(j.indexOf(ne,J),1));for(W=0,J=0;W<P.length;W++)ne=P[P.length-1-W],j[j.length-1-W]!==ne&&(Object.prototype.hasOwnProperty.call(F,ne)?(E.push({command:nn.removeLayer,args:[ne]}),j.splice(j.lastIndexOf(ne,j.length-J),1)):J++,pe=j[j.length-W],E.push({command:nn.addLayer,args:[z[ne],pe]}),j.splice(j.length-W,0,ne),U[ne]=!0);for(W=0;W<P.length;W++)if(ne=P[W],le=F[ne],oe=z[ne],!U[ne]&&!bn(le,oe))if(bn(le.source,oe.source)&&bn(le["source-layer"],oe["source-layer"])&&bn(le.type,oe.type)){for(ge in bl(le.layout,oe.layout,E,ne,null,nn.setLayoutProperty),bl(le.paint,oe.paint,E,ne,null,nn.setPaintProperty),bn(le.filter,oe.filter)||E.push({command:nn.setFilter,args:[ne,oe.filter]}),bn(le.minzoom,oe.minzoom)&&bn(le.maxzoom,oe.maxzoom)||E.push({command:nn.setLayerZoomRange,args:[ne,oe.minzoom,oe.maxzoom]}),le)Object.prototype.hasOwnProperty.call(le,ge)&&"layout"!==ge&&"paint"!==ge&&"filter"!==ge&&"metadata"!==ge&&"minzoom"!==ge&&"maxzoom"!==ge&&(0===ge.indexOf("paint.")?bl(le[ge],oe[ge],E,ne,ge.slice(6),nn.setPaintProperty):bn(le[ge],oe[ge])||E.push({command:nn.setLayerProperty,args:[ne,ge,oe[ge]]}));for(ge in oe)Object.prototype.hasOwnProperty.call(oe,ge)&&!Object.prototype.hasOwnProperty.call(le,ge)&&"layout"!==ge&&"paint"!==ge&&"filter"!==ge&&"metadata"!==ge&&"minzoom"!==ge&&"maxzoom"!==ge&&(0===ge.indexOf("paint.")?bl(le[ge],oe[ge],E,ne,ge.slice(6),nn.setPaintProperty):bn(le[ge],oe[ge])||E.push({command:nn.setLayerProperty,args:[ne,ge,oe[ge]]}))}else E.push({command:nn.removeLayer,args:[ne]}),pe=j[j.lastIndexOf(ne)+1],E.push({command:nn.addLayer,args:[oe,pe]})}(y,o.layers,c)}catch(h){console.warn("Unable to compute style diff:",h),c=[{command:nn.setStyle,args:[o]}]}return c},_.aF=function(l){const o=[],c=l.id;return void 0===c&&o.push({message:`layers.${c}: missing required property "id"`}),void 0===l.render&&o.push({message:`layers.${c}: missing required method "render"`}),l.renderingMode&&"2d"!==l.renderingMode&&"3d"!==l.renderingMode&&o.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),o},_.aG=function l(o,c){if(Array.isArray(o)){if(!Array.isArray(c)||o.length!==c.length)return!1;for(let h=0;h<o.length;h++)if(!l(o[h],c[h]))return!1;return!0}if("object"==typeof o&&null!==o&&null!==c){if("object"!=typeof c||Object.keys(o).length!==Object.keys(c).length)return!1;for(const h in o)if(!l(o[h],c[h]))return!1;return!0}return o===c},_.aH=Zn,_.aI=Jo,_.aJ=wi,_.aK=function(l){return l({pluginStatus:ft,pluginURL:mn}),wi.on("pluginStateChange",l),l},_.aL=class extends Ol{constructor(l,o){super(l,o),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},_.aM=gd,_.aN=class extends Ol{constructor(l,o){super(l,o),this.current=gm}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let o=1;o<16;o++)if(l[o]!==this.current[o]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},_.aO=yu,_.aP=class extends Ol{constructor(l,o){super(l,o),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},_.aQ=class extends Ol{constructor(l,o){super(l,o),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},_.aR=bu,_.aS=function(l,o,c,h,m,y,w){var C=1/(o-c),E=1/(h-m),I=1/(y-w);return l[0]=-2*C,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*E,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*I,l[11]=0,l[12]=(o+c)*C,l[13]=(m+h)*E,l[14]=(w+y)*I,l[15]=1,l},_.aT=rn,_.aU=Ng,_.aV=class extends p{},_.aW=Nu,_.aX=class extends x{},_.aY=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},_.aZ=Pe,_.a_=ze,_.aa=function(l){const o={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,h,m,y)=>{const w=m||y;return o[h]=!w||w.toLowerCase(),""}),o["max-age"]){const c=parseInt(o["max-age"],10);isNaN(c)?delete o["max-age"]:o["max-age"]=c}return o},_.ab=function(l,o){const c=[];for(const h in l)h in o||c.push(h);return c},_.ac=function(l){if(null==Sa){const o=l.navigator?l.navigator.userAgent:null;Sa=!!l.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Sa},_.ad=Yo,_.ae=function(l,o,c){var h=Math.sin(c),m=Math.cos(c),y=o[0],w=o[1],C=o[2],E=o[3],I=o[4],P=o[5],F=o[6],z=o[7];return o!==l&&(l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=y*m+I*h,l[1]=w*m+P*h,l[2]=C*m+F*h,l[3]=E*m+z*h,l[4]=I*m-y*h,l[5]=P*m-w*h,l[6]=F*m-C*h,l[7]=z*m-E*h,l},_.af=function(l){var o=new wc(16);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o[8]=l[8],o[9]=l[9],o[10]=l[10],o[11]=l[11],o[12]=l[12],o[13]=l[13],o[14]=l[14],o[15]=l[15],o},_.ag=Cm,_.ah=function(l,o){let c=0,h=0;if("constant"===l.kind)h=l.layoutSize;else if("source"!==l.kind){const{interpolationType:m,minZoom:y,maxZoom:w}=l,C=m?Yo(Jr.interpolationFactor(m,o,y,w),0,1):0;"camera"===l.kind?h=po.number(l.minSize,l.maxSize,C):c=C}return{uSizeT:c,uSize:h}},_.aj=function(l,{uSize:o,uSizeT:c},{lowerSize:h,upperSize:m}){return"source"===l.kind?h/ha:"composite"===l.kind?po.number(h/ha,m/ha,c):o},_.ak=Wm,_.al=function(l,o,c,h){const m=o.y-l.y,y=o.x-l.x,w=h.y-c.y,C=h.x-c.x,E=w*y-C*m;if(0===E)return null;const I=(C*(l.y-c.y)-w*(l.x-c.x))/E;return new ct(l.x+I*y,l.y+I*m)},_.am=ju,_.an=Rs,_.ao=zh,_.ap=Pi,_.ar=op,_.as=function(l,o){var c=o[0],h=o[1],m=o[2],y=o[3],w=o[4],C=o[5],E=o[6],I=o[7],P=o[8],F=o[9],z=o[10],j=o[11],U=o[12],W=o[13],J=o[14],ne=o[15],le=c*C-h*w,oe=c*E-m*w,pe=c*I-y*w,ge=h*E-m*C,Ee=h*I-y*C,We=m*I-y*E,nt=P*W-F*U,Ge=P*J-z*U,Ue=P*ne-j*U,Ve=F*J-z*W,Ke=F*ne-j*W,je=z*ne-j*J,Re=le*je-oe*Ke+pe*Ve+ge*Ue-Ee*Ge+We*nt;return Re?(l[0]=(C*je-E*Ke+I*Ve)*(Re=1/Re),l[1]=(m*Ke-h*je-y*Ve)*Re,l[2]=(W*We-J*Ee+ne*ge)*Re,l[3]=(z*Ee-F*We-j*ge)*Re,l[4]=(E*Ue-w*je-I*Ge)*Re,l[5]=(c*je-m*Ue+y*Ge)*Re,l[6]=(J*pe-U*We-ne*oe)*Re,l[7]=(P*We-z*pe+j*oe)*Re,l[8]=(w*Ke-C*Ue+I*nt)*Re,l[9]=(h*Ue-c*Ke-y*nt)*Re,l[10]=(U*Ee-W*pe+ne*le)*Re,l[11]=(F*pe-P*Ee-j*le)*Re,l[12]=(C*Ge-w*Ve-E*nt)*Re,l[13]=(c*Ve-h*Ge+m*nt)*Re,l[14]=(W*oe-U*ge-J*le)*Re,l[15]=(P*ge-F*oe+z*le)*Re,l):null},_.at=sf,_.au=Hm,_.av=lf,_.aw=function(){const l={},o=Se.$version;for(const c in Se.$root){const h=Se.$root[c];if(h.required){let m=null;m="version"===c?o:"array"===h.type?[]:{},null!=m&&(l[c]=m)}}return l},_.ax=nn,_.ay=Je,_.az=sn,_.b=function(l,o){const c=new Blob([new Uint8Array(l)],{type:"image/png"});createImageBitmap(c).then(h=>{o(null,h)}).catch(h=>{o(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},_.b0=Vi,_.b1=function(l,o){var c=l[0],h=l[1],m=l[2],y=l[3],w=l[4],C=l[5],E=l[6],I=l[7],P=l[8],F=l[9],z=l[10],j=l[11],U=l[12],W=l[13],J=l[14],ne=l[15],le=o[0],oe=o[1],pe=o[2],ge=o[3],Ee=o[4],We=o[5],nt=o[6],Ge=o[7],Ue=o[8],Ve=o[9],Ke=o[10],je=o[11],Re=o[12],lt=o[13],et=o[14],Bt=o[15];return Math.abs(c-le)<=Dr*Math.max(1,Math.abs(c),Math.abs(le))&&Math.abs(h-oe)<=Dr*Math.max(1,Math.abs(h),Math.abs(oe))&&Math.abs(m-pe)<=Dr*Math.max(1,Math.abs(m),Math.abs(pe))&&Math.abs(y-ge)<=Dr*Math.max(1,Math.abs(y),Math.abs(ge))&&Math.abs(w-Ee)<=Dr*Math.max(1,Math.abs(w),Math.abs(Ee))&&Math.abs(C-We)<=Dr*Math.max(1,Math.abs(C),Math.abs(We))&&Math.abs(E-nt)<=Dr*Math.max(1,Math.abs(E),Math.abs(nt))&&Math.abs(I-Ge)<=Dr*Math.max(1,Math.abs(I),Math.abs(Ge))&&Math.abs(P-Ue)<=Dr*Math.max(1,Math.abs(P),Math.abs(Ue))&&Math.abs(F-Ve)<=Dr*Math.max(1,Math.abs(F),Math.abs(Ve))&&Math.abs(z-Ke)<=Dr*Math.max(1,Math.abs(z),Math.abs(Ke))&&Math.abs(j-je)<=Dr*Math.max(1,Math.abs(j),Math.abs(je))&&Math.abs(U-Re)<=Dr*Math.max(1,Math.abs(U),Math.abs(Re))&&Math.abs(W-lt)<=Dr*Math.max(1,Math.abs(W),Math.abs(lt))&&Math.abs(J-et)<=Dr*Math.max(1,Math.abs(J),Math.abs(et))&&Math.abs(ne-Bt)<=Dr*Math.max(1,Math.abs(ne),Math.abs(Bt))},_.b2=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l},_.b3=function(l,o,c){return l[0]=o[0]*c[0],l[1]=o[1]*c[1],l[2]=o[2]*c[2],l[3]=o[3]*c[3],l},_.b4=function(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]+l[3]*o[3]},_.b5=wa,_.b6=fb,_.b7=dp,_.b8=function(l,o,c,h,m){var y,w=1/Math.tan(o/2);return l[0]=w/c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=w,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,null!=m&&m!==1/0?(l[10]=(m+h)*(y=1/(h-m)),l[14]=2*m*h*y):(l[10]=-1,l[14]=-2*h),l},_.b9=function(l,o,c){var h=Math.sin(c),m=Math.cos(c),y=o[4],w=o[5],C=o[6],E=o[7],I=o[8],P=o[9],F=o[10],z=o[11];return o!==l&&(l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[4]=y*m+I*h,l[5]=w*m+P*h,l[6]=C*m+F*h,l[7]=E*m+z*h,l[8]=I*m-y*h,l[9]=P*m-w*h,l[10]=F*m-C*h,l[11]=z*m-E*h,l},_.bA=Ri,_.bB=dd,_.bC=Si,_.ba=Mo,_.bb=ys,_.bc=function(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=o[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},_.bd=class extends gi{},_.be=a_,_.bf=gb,_.bh=Mn,_.bi=function(l,o,c=!1){if(ft===gu||ft===_u||ft===Qn)throw new Error("setRTLTextPlugin cannot be called multiple times.");mn=Ca.resolveURL(l),ft=gu,Ye=o,Ba(),c||li()},_.bj=oa,_.bk=function(l,o){const c={};for(let m=0;m<l.length;m++){const y=o&&o[l[m].id]||Fa(l[m]);o&&(o[l[m].id]=y);let w=c[y];w||(w=c[y]=[]),w.push(l[m])}const h=[];for(const m in c)h.push(c[m]);return h},_.bl=Qe,_.bm=Qm,_.bn=Jm,_.bo=Yg,_.bp=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=ki/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const o=l.bucket.layers[0],c=o.layout,h=o._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new fn(l.bucket.zoom+1),l.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new fn(l.bucket.zoom+1),l.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new fn(18))};if("composite"===l.bucket.textSizeData.kind){const{minZoom:I,maxZoom:P}=l.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new fn(I),l.canonical),h["text-size"].possiblyEvaluate(new fn(P),l.canonical)]}if("composite"===l.bucket.iconSizeData.kind){const{minZoom:I,maxZoom:P}=l.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new fn(I),l.canonical),h["icon-size"].possiblyEvaluate(new fn(P),l.canonical)]}const y=c.get("text-line-height")*Pi,w="viewport"!==c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),C=c.get("text-keep-upright"),E=c.get("text-size");for(const I of l.bucket.features){const P=c.get("text-font").evaluate(I,{},l.canonical).join(","),F=E.evaluate(I,{},l.canonical),z=m.layoutTextSize.evaluate(I,{},l.canonical),j=m.layoutIconSize.evaluate(I,{},l.canonical),U={horizontal:{},vertical:void 0},W=I.text;let J,ne=[0,0];if(W){const pe=W.toString(),ge=c.get("text-letter-spacing").evaluate(I,{},l.canonical)*Pi,Ee=Ii(pe)?ge:0,We=c.get("text-anchor").evaluate(I,{},l.canonical),nt=rf(o,I,l.canonical);if(!nt){const je=c.get("text-radial-offset").evaluate(I,{},l.canonical);ne=je?b_(We,[je*Pi,hp]):c.get("text-offset").evaluate(I,{},l.canonical).map(Re=>Re*Pi)}let Ge=w?"center":c.get("text-justify").evaluate(I,{},l.canonical);const Ue=c.get("symbol-placement"),Ve="point"===Ue?c.get("text-max-width").evaluate(I,{},l.canonical)*Pi:0,Ke=()=>{l.bucket.allowVerticalPlacement&&Jt(pe)&&(U.vertical=Md(W,l.glyphMap,l.glyphPositions,l.imagePositions,P,Ve,y,We,"left",Ee,ne,_.ai.vertical,!0,Ue,z,F))};if(!w&&nt){const je=new Set;if("auto"===Ge)for(let lt=0;lt<nt.values.length;lt+=2)je.add(sf(nt.values[lt]));else je.add(Ge);let Re=!1;for(const lt of je)if(!U.horizontal[lt])if(Re)U.horizontal[lt]=U.horizontal[0];else{const et=Md(W,l.glyphMap,l.glyphPositions,l.imagePositions,P,Ve,y,"center",lt,Ee,ne,_.ai.horizontal,!1,Ue,z,F);et&&(U.horizontal[lt]=et,Re=1===et.positionedLines.length)}Ke()}else{"auto"===Ge&&(Ge=sf(We));const je=Md(W,l.glyphMap,l.glyphPositions,l.imagePositions,P,Ve,y,We,Ge,Ee,ne,_.ai.horizontal,!1,Ue,z,F);je&&(U.horizontal[Ge]=je),Ke(),Jt(pe)&&w&&C&&(U.vertical=Md(W,l.glyphMap,l.glyphPositions,l.imagePositions,P,Ve,y,We,Ge,Ee,ne,_.ai.vertical,!1,Ue,z,F))}}let le=!1;if(I.icon&&I.icon.name){const pe=l.imageMap[I.icon.name];pe&&(J=rp(l.imagePositions[I.icon.name],c.get("icon-offset").evaluate(I,{},l.canonical),c.get("icon-anchor").evaluate(I,{},l.canonical)),le=!!pe.sdf,void 0===l.bucket.sdfIcons?l.bucket.sdfIcons=le:l.bucket.sdfIcons!==le&&Wi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pe.pixelRatio!==l.bucket.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(l.bucket.iconsNeedLinear=!0))}const oe=S_(U.horizontal)||U.vertical;l.bucket.iconsInText=!!oe&&oe.iconsInText,(oe||J)&&x_(l.bucket,I,U,J,l.imageMap,m,z,j,ne,le,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},_.bq=Ru,_.br=qh,_.bs=Ec,_.bt=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return 0===l.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},_.bu=Oi,_.bv=da,_.bw=function(l,o,c,h,m){return En(this,void 0,void 0,function*(){if(Qo())try{return yield gl(l,o,c,h,m)}catch{}return function(y,w,C,E,I){const P=y.width,F=y.height;es&&Nn||(es=new OffscreenCanvas(P,F),Nn=es.getContext("2d",{willReadFrequently:!0})),es.width=P,es.height=F,Nn.drawImage(y,0,0,P,F);const z=Nn.getImageData(w,C,E,I);return Nn.clearRect(0,0,P,F),z.data}(l,o,c,h,m)})},_.bx=Vu,_.by=be,_.bz=Eo,_.c=Ta,_.d=function(l,o){const c=new Image;c.onload=()=>{o(null,c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=yn})},c.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(l)],{type:"image/png"});c.src=l.byteLength?URL.createObjectURL(h):yn},_.e=$i,_.f=function(l,o){return ts($i(l,{type:"json"}),o)},_.g=lo,_.h=Ca,_.i=Di,_.j=Ea,_.k=Xs,_.l=ec,_.m=ts,_.n=function(l){return new Oi(l).readFields(Lu,[])},_.o=function(l,o,c){if(!l.length)return c(null,[]);let h=l.length;const m=new Array(l.length);let y=null;l.forEach((w,C)=>{o(w,(E,I)=>{E&&(y=E),m[C]=I,0==--h&&c(y,m)})})},_.p=Vm,_.q=Cu,_.r=Gn,_.s=Io,_.t=fm,_.u=Be,_.v=Se,_.w=Wi,_.x=ai,_.y=rs,_.z=function([l,o,c]){return o+=90,o*=Math.PI/180,c*=Math.PI/180,{x:l*Math.cos(o)*Math.sin(c),y:l*Math.sin(o)*Math.sin(c),z:l*Math.cos(c)}}}),Jd(0,function(_){class En{constructor(L){this.keyCache={},L&&this.replace(L)}replace(L){this._layerConfigs={},this._layers={},this.update(L,[])}update(L,B){for(const Y of L){this._layerConfigs[Y.id]=Y;const ee=this._layers[Y.id]=_.aC(Y);ee._featureFilter=_.a6(ee.filter),this.keyCache[Y.id]&&delete this.keyCache[Y.id]}for(const Y of B)delete this.keyCache[Y],delete this._layerConfigs[Y],delete this._layers[Y];this.familiesBySource={};const G=_.bk(Object.values(this._layerConfigs),this.keyCache);for(const Y of G){const ee=Y.map(ke=>this._layers[ke.id]),he=ee[0];if("none"===he.visibility)continue;const se=he.source||"";let ie=this.familiesBySource[se];ie||(ie=this.familiesBySource[se]={});const ce=he.sourceLayer||"_geojsonTileLayer";let Ce=ie[ce];Ce||(Ce=ie[ce]=[]),Ce.push(ee)}}}class be{constructor(L){const B={},G=[];for(const se in L){const ie=L[se],ce=B[se]={};for(const Ce in ie){const ke=ie[+Ce];if(!ke||0===ke.bitmap.width||0===ke.bitmap.height)continue;const Me={x:0,y:0,w:ke.bitmap.width+2,h:ke.bitmap.height+2};G.push(Me),ce[Ce]={rect:Me,metrics:ke.metrics}}}const{w:Y,h:ee}=_.p(G),he=new _.q({width:Y||1,height:ee||1});for(const se in L){const ie=L[se];for(const ce in ie){const Ce=ie[+ce];if(!Ce||0===Ce.bitmap.width||0===Ce.bitmap.height)continue;const ke=B[se][ce].rect;_.q.copy(Ce.bitmap,he,{x:0,y:0},{x:ke.x+1,y:ke.y+1},Ce.bitmap)}}this.image=he,this.positions=B}}_.bl("GlyphAtlas",be);class Eo{constructor(L){this.tileID=new _.O(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(L,B,G,Y,ee){this.status="parsing",this.data=L,this.collisionBoxArray=new _.a3;const he=new _.bm(Object.keys(L.layers).sort()),se=new _.bn(this.tileID,this.promoteId);se.bucketLayerIDs=[];const ie={},ce={featureIndex:se,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:G},Ce=B.familiesBySource[this.source];for(const Yt in Ce){const At=L.layers[Yt];if(!At)continue;1===At.version&&_.w(`Vector tile source "${this.source}" layer "${Yt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const rr=he.encode(Yt),Ft=[];for(let Hn=0;Hn<At.length;Hn++){const Ln=At.feature(Hn),Ro=se.getId(Ln,Yt);Ft.push({feature:Ln,id:Ro,index:Hn,sourceLayerIndex:rr})}for(const Hn of Ce[Yt]){const Ln=Hn[0];Ln.source!==this.source&&_.w(`layer.source = ${Ln.source} does not equal this.source = ${this.source}`),Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||"none"!==Ln.visibility&&(xr(Hn,this.zoom,G),(ie[Ln.id]=Ln.createBucket({index:se.bucketLayerIDs.length,layers:Hn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:rr,sourceID:this.source})).populate(Ft,ce,this.tileID.canonical),se.bucketLayerIDs.push(Hn.map(Ro=>Ro.id)))}}let ke,Me,Xe,_t;const it=_.aH(ce.glyphDependencies,Yt=>Object.keys(Yt).map(Number));this.inFlightDependencies.forEach(Yt=>Yt?.cancel()),this.inFlightDependencies=[];const dt=++this.dependencySentinel;Object.keys(it).length?this.inFlightDependencies.push(Y.send("getGlyphs",{uid:this.uid,stacks:it,source:this.source,tileID:this.tileID,type:"glyphs"},(Yt,At)=>{dt===this.dependencySentinel&&(ke||(ke=Yt,Me=At,xn.call(this)))})):Me={};const wt=Object.keys(ce.iconDependencies);wt.length?this.inFlightDependencies.push(Y.send("getImages",{icons:wt,source:this.source,tileID:this.tileID,type:"icons"},(Yt,At)=>{dt===this.dependencySentinel&&(ke||(ke=Yt,Xe=At,xn.call(this)))})):Xe={};const an=Object.keys(ce.patternDependencies);function xn(){if(ke)return ee(ke);if(Me&&Xe&&_t){const Yt=new be(Me),At=new _.bo(Xe,_t);for(const rr in ie){const Ft=ie[rr];Ft instanceof _.a4?(xr(Ft.layers,this.zoom,G),_.bp({bucket:Ft,glyphMap:Me,glyphPositions:Yt.positions,imageMap:Xe,imagePositions:At.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ft.hasPattern&&(Ft instanceof _.bq||Ft instanceof _.br||Ft instanceof _.bs)&&(xr(Ft.layers,this.zoom,G),Ft.addFeatures(ce,this.tileID.canonical,At.patternPositions))}this.status="done",ee(null,{buckets:Object.values(ie).filter(rr=>!rr.isEmpty()),featureIndex:se,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yt.image,imageAtlas:At,glyphMap:this.returnDependencies?Me:null,iconMap:this.returnDependencies?Xe:null,glyphPositions:this.returnDependencies?Yt.positions:null})}}an.length?this.inFlightDependencies.push(Y.send("getImages",{icons:an,source:this.source,tileID:this.tileID,type:"patterns"},(Yt,At)=>{dt===this.dependencySentinel&&(ke||(ke=Yt,_t=At,xn.call(this)))})):_t={},xn.call(this)}}function xr(X,L,B){const G=new _.a8(L);for(const Y of X)Y.recalculate(G,B)}function ct(X,L){const B=_.l(X.request,(G,Y,ee,he)=>{if(G)L(G);else if(Y)try{const se=new _.bv.VectorTile(new _.bu(Y));L(null,{vectorTile:se,rawData:Y,cacheControl:ee,expires:he})}catch(se){const ie=new Uint8Array(Y);let ce=`Unable to parse the tile at ${X.request.url}, `;ce+=31===ie[0]&&139===ie[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${se.messge}`,L(new Error(ce))}});return()=>{B.cancel(),L()}}class vs{constructor(L,B,G,Y){this.actor=L,this.layerIndex=B,this.availableImages=G,this.loadVectorData=Y||ct,this.fetching={},this.loading={},this.loaded={}}loadTile(L,B){const G=L.uid;this.loading||(this.loading={});const Y=!!(L&&L.request&&L.request.collectResourceTiming)&&new _.bt(L.request),ee=this.loading[G]=new Eo(L);ee.abort=this.loadVectorData(L,(he,se)=>{if(delete this.loading[G],he||!se)return ee.status="done",this.loaded[G]=ee,B(he);const ie=se.rawData,ce={};se.expires&&(ce.expires=se.expires),se.cacheControl&&(ce.cacheControl=se.cacheControl);const Ce={};if(Y){const ke=Y.finish();ke&&(Ce.resourceTiming=JSON.parse(JSON.stringify(ke)))}ee.vectorTile=se.vectorTile,ee.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,(ke,Me)=>{if(delete this.fetching[G],ke||!Me)return B(ke);B(null,_.e({rawTileData:ie.slice(0)},Me,ce,Ce))}),this.loaded=this.loaded||{},this.loaded[G]=ee,this.fetching[G]={rawTileData:ie,cacheControl:ce,resourceTiming:Ce}})}reloadTile(L,B){const G=this.loaded,Y=L.uid;if(G&&G[Y]){const ee=G[Y];ee.showCollisionBoxes=L.showCollisionBoxes,"parsing"===ee.status?ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,(he,se)=>{if(he||!se)return B(he,se);let ie;if(this.fetching[Y]){const{rawTileData:ce,cacheControl:Ce,resourceTiming:ke}=this.fetching[Y];delete this.fetching[Y],ie=_.e({rawTileData:ce.slice(0)},se,Ce,ke)}else ie=se;B(null,ie)}):"done"===ee.status&&(ee.vectorTile?ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,B):B())}}abortTile(L,B){const G=this.loading,Y=L.uid;G&&G[Y]&&G[Y].abort&&(G[Y].abort(),delete G[Y]),B()}removeTile(L,B){const G=this.loaded,Y=L.uid;G&&G[Y]&&delete G[Y],B()}}class pl{constructor(){this.loaded={}}loadTile(L,B){return _._(this,void 0,void 0,function*(){const{uid:G,encoding:Y,rawImageData:ee,redFactor:he,greenFactor:se,blueFactor:ie,baseShift:ce}=L,Ce=ee.width+2,ke=ee.height+2,Me=_.a(ee)?new _.R({width:Ce,height:ke},yield _.bw(ee,-1,-1,Ce,ke)):ee,Xe=new _.bx(G,Me,Y,he,se,ie,ce);this.loaded=this.loaded||{},this.loaded[G]=Xe,B(null,Xe)})}removeTile(L){const B=this.loaded,G=L.uid;B&&B[G]&&delete B[G]}}function Zs(X,L){if(0!==X.length){wr(X[0],L);for(var B=1;B<X.length;B++)wr(X[B],!L)}}function wr(X,L){for(var B=0,G=0,Y=0,ee=X.length,he=ee-1;Y<ee;he=Y++){var se=(X[Y][0]-X[he][0])*(X[he][1]+X[Y][1]),ie=B+se;G+=Math.abs(B)>=Math.abs(se)?B-ie+se:se-ie+B,B=ie}B+G>=0!=!!L&&X.reverse()}var xi=_.by(function X(L,B){var G,Y=L&&L.type;if("FeatureCollection"===Y)for(G=0;G<L.features.length;G++)X(L.features[G],B);else if("GeometryCollection"===Y)for(G=0;G<L.geometries.length;G++)X(L.geometries[G],B);else if("Feature"===Y)X(L.geometry,B);else if("Polygon"===Y)Zs(L.coordinates,B);else if("MultiPolygon"===Y)for(G=0;G<L.coordinates.length;G++)Zs(L.coordinates[G],B);return L});const td=_.bv.VectorTileFeature.prototype.toGeoJSON;var Qo={exports:{}},Mo=_.bz,ys=_.bv.VectorTileFeature,Yo=wa;function wa(X,L){this.options=L||{},this.features=X,this.length=X.length}function $i(X,L){this.id="number"==typeof X.id?X.id:void 0,this.type=X.type,this.rawGeometry=1===X.type?[X.geometry]:X.geometry,this.properties=X.tags,this.extent=L||4096}wa.prototype.feature=function(X){return new $i(this.features[X],this.options.extent)},$i.prototype.loadGeometry=function(){var X=this.rawGeometry;this.geometry=[];for(var L=0;L<X.length;L++){for(var B=X[L],G=[],Y=0;Y<B.length;Y++)G.push(new Mo(B[Y][0],B[Y][1]));this.geometry.push(G)}return this.geometry},$i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var X=this.geometry,L=1/0,B=-1/0,G=1/0,Y=-1/0,ee=0;ee<X.length;ee++)for(var he=X[ee],se=0;se<he.length;se++){var ie=he[se];L=Math.min(L,ie.x),B=Math.max(B,ie.x),G=Math.min(G,ie.y),Y=Math.max(Y,ie.y)}return[L,G,B,Y]},$i.prototype.toGeoJSON=ys.prototype.toGeoJSON;var ml=_.bA,Zn=Yo;function Jo(X){var L=new ml;return function(B,G){for(var Y in B.layers)G.writeMessage(3,zr,B.layers[Y])}(X,L),L.finish()}function zr(X,L){var B;L.writeVarintField(15,X.version||1),L.writeStringField(1,X.name||""),L.writeVarintField(5,X.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<X.length;B++)G.feature=X.feature(B),L.writeMessage(2,Ks,G);var Y=G.keys;for(B=0;B<Y.length;B++)L.writeStringField(3,Y[B]);var ee=G.values;for(B=0;B<ee.length;B++)L.writeMessage(4,Sa,ee[B])}function Ks(X,L){var B=X.feature;void 0!==B.id&&L.writeVarintField(1,B.id),L.writeMessage(2,Wi,X),L.writeVarintField(3,B.type),L.writeMessage(4,Di,B)}function Wi(X,L){var B=X.feature,G=X.keys,Y=X.values,ee=X.keycache,he=X.valuecache;for(var se in B.properties){var ie=B.properties[se],ce=ee[se];if(null!==ie){void 0===ce&&(G.push(se),ee[se]=ce=G.length-1),L.writeVarint(ce);var Ce=typeof ie;"string"!==Ce&&"boolean"!==Ce&&"number"!==Ce&&(ie=JSON.stringify(ie));var ke=Ce+":"+ie,Me=he[ke];void 0===Me&&(Y.push(ie),he[ke]=Me=Y.length-1),L.writeVarint(Me)}}}function Xr(X,L){return(L<<3)+(7&X)}function Do(X){return X<<1^X>>31}function Di(X,L){for(var B=X.loadGeometry(),G=X.type,Y=0,ee=0,he=B.length,se=0;se<he;se++){var ie=B[se],ce=1;1===G&&(ce=ie.length),L.writeVarint(Xr(1,ce));for(var Ce=3===G?ie.length-1:ie.length,ke=0;ke<Ce;ke++){1===ke&&1!==G&&L.writeVarint(Xr(2,Ce-1));var Me=ie[ke].x-Y,Xe=ie[ke].y-ee;L.writeVarint(Do(Me)),L.writeVarint(Do(Xe)),Y+=Me,ee+=Xe}3===G&&L.writeVarint(Xr(7,1))}}function Sa(X,L){var B=typeof X;"string"===B?L.writeStringField(1,X):"boolean"===B?L.writeBooleanField(7,X):"number"===B&&(X%1!=0?L.writeDoubleField(3,X):X<0?L.writeSVarintField(6,X):L.writeVarintField(5,X))}Qo.exports=Jo,Qo.exports.fromVectorTileJs=Jo,Qo.exports.fromGeojsonVt=function(X,L){L=L||{};var B={};for(var G in X)B[G]=new Zn(X[G].features,L),B[G].name=G,B[G].version=L.version,B[G].extent=L.extent;return Jo({layers:B})},Qo.exports.GeoJSONWrapper=Zn;var fl=_.by(Qo.exports);const yn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:X=>X},gl=Math.fround||(es=new Float32Array(1),X=>(es[0]=+X,es[0]));var es;const Nn=3,Br=5,Zt=6;class Ca{constructor(L){this.options=Object.assign(Object.create(yn),L),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(L){const{log:B,minZoom:G,maxZoom:Y}=this.options;B&&console.time("total time");const ee=`prepare ${L.length} points`;B&&console.time(ee),this.points=L;const he=[];for(let ie=0;ie<L.length;ie++){const ce=L[ie];if(!ce.geometry)continue;const[Ce,ke]=ce.geometry.coordinates,Me=gl(sn(Ce)),Xe=gl(lo(ke));he.push(Me,Xe,1/0,ie,-1,1),this.options.reduce&&he.push(0)}let se=this.trees[Y+1]=this._createTree(he);B&&console.timeEnd(ee);for(let ie=Y;ie>=G;ie--){const ce=+Date.now();se=this.trees[ie]=this._createTree(this._cluster(se,ie)),B&&console.log("z%d: %d clusters in %dms",ie,se.numItems,+Date.now()-ce)}return B&&console.timeEnd("total time"),this}getClusters(L,B){let G=((L[0]+180)%360+360)%360-180;const Y=Math.max(-90,Math.min(90,L[1]));let ee=180===L[2]?180:((L[2]+180)%360+360)%360-180;const he=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)G=-180,ee=180;else if(G>ee){const ke=this.getClusters([G,Y,180,he],B),Me=this.getClusters([-180,Y,ee,he],B);return ke.concat(Me)}const se=this.trees[this._limitZoom(B)],ie=se.range(sn(G),lo(he),sn(ee),lo(Y)),ce=se.data,Ce=[];for(const ke of ie){const Me=this.stride*ke;Ce.push(ce[Me+Br]>1?Ta(ce,Me,this.clusterProps):this.points[ce[Me+Nn]])}return Ce}getChildren(L){const B=this._getOriginId(L),G=this._getOriginZoom(L),Y="No cluster with the specified id.",ee=this.trees[G];if(!ee)throw new Error(Y);const he=ee.data;if(B*this.stride>=he.length)throw new Error(Y);const se=this.options.radius/(this.options.extent*Math.pow(2,G-1)),ie=ee.within(he[B*this.stride],he[B*this.stride+1],se),ce=[];for(const Ce of ie){const ke=Ce*this.stride;he[ke+4]===L&&ce.push(he[ke+Br]>1?Ta(he,ke,this.clusterProps):this.points[he[ke+Nn]])}if(0===ce.length)throw new Error(Y);return ce}getLeaves(L,B,G){const Y=[];return this._appendLeaves(Y,L,B=B||10,G=G||0,0),Y}getTile(L,B,G){const Y=this.trees[this._limitZoom(L)],ee=Math.pow(2,L),{extent:he,radius:se}=this.options,ie=se/he,ce=(G-ie)/ee,Ce=(G+1+ie)/ee,ke={features:[]};return this._addTileFeatures(Y.range((B-ie)/ee,ce,(B+1+ie)/ee,Ce),Y.data,B,G,ee,ke),0===B&&this._addTileFeatures(Y.range(1-ie/ee,ce,1,Ce),Y.data,ee,G,ee,ke),B===ee-1&&this._addTileFeatures(Y.range(0,ce,ie/ee,Ce),Y.data,-1,G,ee,ke),ke.features.length?ke:null}getClusterExpansionZoom(L){let B=this._getOriginZoom(L)-1;for(;B<=this.options.maxZoom;){const G=this.getChildren(L);if(B++,1!==G.length)break;L=G[0].properties.cluster_id}return B}_appendLeaves(L,B,G,Y,ee){const he=this.getChildren(B);for(const se of he){const ie=se.properties;if(ie&&ie.cluster?ee+ie.point_count<=Y?ee+=ie.point_count:ee=this._appendLeaves(L,ie.cluster_id,G,Y,ee):ee<Y?ee++:L.push(se),L.length===G)break}return ee}_createTree(L){const B=new _.av(L.length/this.stride|0,this.options.nodeSize,Float32Array);for(let G=0;G<L.length;G+=this.stride)B.add(L[G],L[G+1]);return B.finish(),B.data=L,B}_addTileFeatures(L,B,G,Y,ee,he){for(const se of L){const ie=se*this.stride,ce=B[ie+Br]>1;let Ce,ke,Me;if(ce)Ce=Mn(B,ie,this.clusterProps),ke=B[ie],Me=B[ie+1];else{const it=this.points[B[ie+Nn]];Ce=it.properties;const[dt,wt]=it.geometry.coordinates;ke=sn(dt),Me=lo(wt)}const Xe={type:1,geometry:[[Math.round(this.options.extent*(ke*ee-G)),Math.round(this.options.extent*(Me*ee-Y))]],tags:Ce};let _t;_t=ce||this.options.generateId?B[ie+Nn]:this.points[B[ie+Nn]].id,void 0!==_t&&(Xe.id=_t),he.features.push(Xe)}}_limitZoom(L){return Math.max(this.options.minZoom,Math.min(Math.floor(+L),this.options.maxZoom+1))}_cluster(L,B){const{radius:G,extent:Y,reduce:ee,minPoints:he}=this.options,se=G/(Y*Math.pow(2,B)),ie=L.data,ce=[],Ce=this.stride;for(let ke=0;ke<ie.length;ke+=Ce){if(ie[ke+2]<=B)continue;ie[ke+2]=B;const Me=ie[ke],Xe=ie[ke+1],_t=L.within(ie[ke],ie[ke+1],se),it=ie[ke+Br];let dt=it;for(const wt of _t){const an=wt*Ce;ie[an+2]>B&&(dt+=ie[an+Br])}if(dt>it&&dt>=he){let wt,an=Me*it,xn=Xe*it,Yt=-1;const At=((ke/Ce|0)<<5)+(B+1)+this.points.length;for(const rr of _t){const Ft=rr*Ce;if(ie[Ft+2]<=B)continue;ie[Ft+2]=B;const Hn=ie[Ft+Br];an+=ie[Ft]*Hn,xn+=ie[Ft+1]*Hn,ie[Ft+4]=At,ee&&(wt||(wt=this._map(ie,ke,!0),Yt=this.clusterProps.length,this.clusterProps.push(wt)),ee(wt,this._map(ie,Ft)))}ie[ke+4]=At,ce.push(an/dt,xn/dt,1/0,At,-1,dt),ee&&ce.push(Yt)}else{for(let wt=0;wt<Ce;wt++)ce.push(ie[ke+wt]);if(dt>1)for(const wt of _t){const an=wt*Ce;if(!(ie[an+2]<=B)){ie[an+2]=B;for(let xn=0;xn<Ce;xn++)ce.push(ie[an+xn])}}}}return ce}_getOriginId(L){return L-this.points.length>>5}_getOriginZoom(L){return(L-this.points.length)%32}_map(L,B,G){if(L[B+Br]>1){const he=this.clusterProps[L[B+Zt]];return G?Object.assign({},he):he}const Y=this.points[L[B+Nn]].properties,ee=this.options.map(Y);return G&&ee===Y?Object.assign({},ee):ee}}function Ta(X,L,B){return{type:"Feature",id:X[L+Nn],properties:Mn(X,L,B),geometry:{type:"Point",coordinates:[(G=X[L],360*(G-.5)),It(X[L+1])]}};var G}function Mn(X,L,B){const G=X[L+Br],Y=G>=1e4?`${Math.round(G/1e3)}k`:G>=1e3?Math.round(G/100)/10+"k":G,ee=X[L+Zt],he=-1===ee?{}:Object.assign({},B[ee]);return Object.assign(he,{cluster:!0,cluster_id:X[L+Nn],point_count:G,point_count_abbreviated:Y})}function sn(X){return X/360+.5}function lo(X){const L=Math.sin(X*Math.PI/180),B=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return B<0?0:B>1?1:B}function It(X){const L=(180-360*X)*Math.PI/180;return 360*Math.atan(Math.exp(L))/Math.PI-90}function ts(X,L,B,G){for(var Y,ee=G,he=B-L>>1,se=B-L,ie=X[L],ce=X[L+1],Ce=X[B],ke=X[B+1],Me=L+3;Me<B;Me+=3){var Xe=ec(X[Me],X[Me+1],ie,ce,Ce,ke);if(Xe>ee)Y=Me,ee=Xe;else if(Xe===ee){var _t=Math.abs(Me-he);_t<se&&(Y=Me,se=_t)}}ee>G&&(Y-L>3&&ts(X,L,Y,G),X[Y+2]=ee,B-Y>3&&ts(X,Y,B,G))}function ec(X,L,B,G,Y,ee){var he=Y-B,se=ee-G;if(0!==he||0!==se){var ie=((X-B)*he+(L-G)*se)/(he*he+se*se);ie>1?(B=Y,G=ee):ie>0&&(B+=he*ie,G+=se*ie)}return(he=X-B)*he+(se=L-G)*se}function Io(X,L,B,G){var Y={id:void 0===X?null:X,type:L,geometry:B,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ee){var he=ee.geometry,se=ee.type;if("Point"===se||"MultiPoint"===se||"LineString"===se)_l(ee,he);else if("Polygon"===se||"MultiLineString"===se)for(var ie=0;ie<he.length;ie++)_l(ee,he[ie]);else if("MultiPolygon"===se)for(ie=0;ie<he.length;ie++)for(var ce=0;ce<he[ie].length;ce++)_l(ee,he[ie][ce])}(Y),Y}function _l(X,L){for(var B=0;B<L.length;B+=3)X.minX=Math.min(X.minX,L[B]),X.minY=Math.min(X.minY,L[B+1]),X.maxX=Math.max(X.maxX,L[B]),X.maxY=Math.max(X.maxY,L[B+1])}function ka(X,L,B,G){if(L.geometry){var Y=L.geometry.coordinates,ee=L.geometry.type,he=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),se=[],ie=L.id;if(B.promoteId?ie=L.properties[B.promoteId]:B.generateId&&(ie=G||0),"Point"===ee)Xs(Y,se);else if("MultiPoint"===ee)for(var ce=0;ce<Y.length;ce++)Xs(Y[ce],se);else if("LineString"===ee)Ea(Y,se,he,!1);else if("MultiLineString"===ee){if(B.lineMetrics){for(ce=0;ce<Y.length;ce++)Ea(Y[ce],se=[],he,!1),X.push(Io(ie,"LineString",se,L.properties));return}vl(Y,se,he,!1)}else if("Polygon"===ee)vl(Y,se,he,!0);else{if("MultiPolygon"!==ee){if("GeometryCollection"===ee){for(ce=0;ce<L.geometry.geometries.length;ce++)ka(X,{id:ie,geometry:L.geometry.geometries[ce],properties:L.properties},B,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ce=0;ce<Y.length;ce++){var Ce=[];vl(Y[ce],Ce,he,!0),se.push(Ce)}}X.push(Io(ie,ee,se,L.properties))}}function Xs(X,L){L.push(Se(X[0])),L.push(Qr(X[1])),L.push(0)}function Ea(X,L,B,G){for(var Y,ee,he=0,se=0;se<X.length;se++){var ie=Se(X[se][0]),ce=Qr(X[se][1]);L.push(ie),L.push(ce),L.push(0),se>0&&(he+=G?(Y*ce-ie*ee)/2:Math.sqrt(Math.pow(ie-Y,2)+Math.pow(ce-ee,2))),Y=ie,ee=ce}var Ce=L.length-3;L[2]=1,ts(L,0,Ce,B),L[Ce+2]=1,L.size=Math.abs(he),L.start=0,L.end=L.size}function vl(X,L,B,G){for(var Y=0;Y<X.length;Y++){var ee=[];Ea(X[Y],ee,B,G),L.push(ee)}}function Se(X){return X/360+.5}function Qr(X){var L=Math.sin(X*Math.PI/180),B=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return B<0?0:B>1?1:B}function co(X,L,B,G,Y,ee,he,se){if(G/=L,ee>=(B/=L)&&he<G)return X;if(he<B||ee>=G)return null;for(var ie=[],ce=0;ce<X.length;ce++){var Ce=X[ce],ke=Ce.geometry,Me=Ce.type,Xe=0===Y?Ce.minX:Ce.minY,_t=0===Y?Ce.maxX:Ce.maxY;if(Xe>=B&&_t<G)ie.push(Ce);else if(!(_t<B||Xe>=G)){var it=[];if("Point"===Me||"MultiPoint"===Me)bn(ke,it,B,G,Y);else if("LineString"===Me)nn(ke,it,B,G,Y,!1,se.lineMetrics);else if("MultiLineString"===Me)yl(ke,it,B,G,Y,!1);else if("Polygon"===Me)yl(ke,it,B,G,Y,!0);else if("MultiPolygon"===Me)for(var dt=0;dt<ke.length;dt++){var wt=[];yl(ke[dt],wt,B,G,Y,!0),wt.length&&it.push(wt)}if(it.length){if(se.lineMetrics&&"LineString"===Me){for(dt=0;dt<it.length;dt++)ie.push(Io(Ce.id,Me,it[dt],Ce.tags));continue}"LineString"!==Me&&"MultiLineString"!==Me||(1===it.length?(Me="LineString",it=it[0]):Me="MultiLineString"),"Point"!==Me&&"MultiPoint"!==Me||(Me=3===it.length?"Point":"MultiPoint"),ie.push(Io(Ce.id,Me,it,Ce.tags))}}}return ie.length?ie:null}function bn(X,L,B,G,Y){for(var ee=0;ee<X.length;ee+=3){var he=X[ee+Y];he>=B&&he<=G&&(L.push(X[ee]),L.push(X[ee+1]),L.push(X[ee+2]))}}function nn(X,L,B,G,Y,ee,he){for(var se,ie,ce=uo(X),Ce=0===Y?tc:bl,ke=X.start,Me=0;Me<X.length-3;Me+=3){var Xe=X[Me],_t=X[Me+1],it=X[Me+2],dt=X[Me+3],wt=X[Me+4],an=0===Y?Xe:_t,xn=0===Y?dt:wt,Yt=!1;he&&(se=Math.sqrt(Math.pow(Xe-dt,2)+Math.pow(_t-wt,2))),an<B?xn>B&&(ie=Ce(ce,Xe,_t,dt,wt,B),he&&(ce.start=ke+se*ie)):an>G?xn<G&&(ie=Ce(ce,Xe,_t,dt,wt,G),he&&(ce.start=ke+se*ie)):Ao(ce,Xe,_t,it),xn<B&&an>=B&&(ie=Ce(ce,Xe,_t,dt,wt,B),Yt=!0),xn>G&&an<=G&&(ie=Ce(ce,Xe,_t,dt,wt,G),Yt=!0),!ee&&Yt&&(he&&(ce.end=ke+se*ie),L.push(ce),ce=uo(X)),he&&(ke+=se)}var At=X.length-3;Xe=X[At],_t=X[At+1],it=X[At+2],(an=0===Y?Xe:_t)>=B&&an<=G&&Ao(ce,Xe,_t,it),At=ce.length-3,ee&&At>=3&&(ce[At]!==ce[0]||ce[At+1]!==ce[1])&&Ao(ce,ce[0],ce[1],ce[2]),ce.length&&L.push(ce)}function uo(X){var L=[];return L.size=X.size,L.start=X.start,L.end=X.end,L}function yl(X,L,B,G,Y,ee){for(var he=0;he<X.length;he++)nn(X[he],L,B,G,Y,ee,!1)}function Ao(X,L,B,G){X.push(L),X.push(B),X.push(G)}function tc(X,L,B,G,Y,ee){var he=(ee-L)/(G-L);return X.push(ee),X.push(B+(Y-B)*he),X.push(1),he}function bl(X,L,B,G,Y,ee){var he=(ee-B)/(Y-B);return X.push(L+(G-L)*he),X.push(ee),X.push(1),he}function Qs(X,L){for(var B=[],G=0;G<X.length;G++){var Y,ee=X[G],he=ee.type;if("Point"===he||"MultiPoint"===he||"LineString"===he)Y=Ma(ee.geometry,L);else if("MultiLineString"===he||"Polygon"===he){Y=[];for(var se=0;se<ee.geometry.length;se++)Y.push(Ma(ee.geometry[se],L))}else if("MultiPolygon"===he)for(Y=[],se=0;se<ee.geometry.length;se++){for(var ie=[],ce=0;ce<ee.geometry[se].length;ce++)ie.push(Ma(ee.geometry[se][ce],L));Y.push(ie)}B.push(Io(ee.id,he,Y,ee.tags))}return B}function Ma(X,L){var B=[];B.size=X.size,void 0!==X.start&&(B.start=X.start,B.end=X.end);for(var G=0;G<X.length;G+=3)B.push(X[G]+L,X[G+1],X[G+2]);return B}function Fe(X,L){if(X.transformed)return X;var B,G,Y,ee=1<<X.z,he=X.x,se=X.y;for(B=0;B<X.features.length;B++){var ie=X.features[B],ce=ie.geometry,Ce=ie.type;if(ie.geometry=[],1===Ce)for(G=0;G<ce.length;G+=2)ie.geometry.push(Po(ce[G],ce[G+1],L,ee,he,se));else for(G=0;G<ce.length;G++){var ke=[];for(Y=0;Y<ce[G].length;Y+=2)ke.push(Po(ce[G][Y],ce[G][Y+1],L,ee,he,se));ie.geometry.push(ke)}}return X.transformed=!0,X}function Po(X,L,B,G,Y,ee){return[Math.round(B*(X*G-Y)),Math.round(B*(L*G-ee))]}function ni(X,L,B,G,Y){for(var ee=L===Y.maxZoom?0:Y.tolerance/((1<<L)*Y.extent),he={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:G,z:L,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},se=0;se<X.length;se++){he.numFeatures++,Ys(he,X[se],ee,Y);var ie=X[se].minX,ce=X[se].minY,Ce=X[se].maxX,ke=X[se].maxY;ie<he.minX&&(he.minX=ie),ce<he.minY&&(he.minY=ce),Ce>he.maxX&&(he.maxX=Ce),ke>he.maxY&&(he.maxY=ke)}return he}function Ys(X,L,B,G){var Y=L.geometry,ee=L.type,he=[];if("Point"===ee||"MultiPoint"===ee)for(var se=0;se<Y.length;se+=3)he.push(Y[se]),he.push(Y[se+1]),X.numPoints++,X.numSimplified++;else if("LineString"===ee)bs(he,Y,X,B,!1,!1);else if("MultiLineString"===ee||"Polygon"===ee)for(se=0;se<Y.length;se++)bs(he,Y[se],X,B,"Polygon"===ee,0===se);else if("MultiPolygon"===ee)for(var ie=0;ie<Y.length;ie++){var ce=Y[ie];for(se=0;se<ce.length;se++)bs(he,ce[se],X,B,!0,0===se)}if(he.length){var Ce=L.tags||null;if("LineString"===ee&&G.lineMetrics){for(var ke in Ce={},L.tags)Ce[ke]=L.tags[ke];Ce.mapbox_clip_start=Y.start/Y.size,Ce.mapbox_clip_end=Y.end/Y.size}var Me={geometry:he,type:"Polygon"===ee||"MultiPolygon"===ee?3:"LineString"===ee||"MultiLineString"===ee?2:1,tags:Ce};null!==L.id&&(Me.id=L.id),X.features.push(Me)}}function bs(X,L,B,G,Y,ee){var he=G*G;if(G>0&&L.size<(Y?he:G))B.numPoints+=L.length/3;else{for(var se=[],ie=0;ie<L.length;ie+=3)(0===G||L[ie+2]>he)&&(B.numSimplified++,se.push(L[ie]),se.push(L[ie+1])),B.numPoints++;Y&&function(ce,Ce){for(var ke=0,Me=0,Xe=ce.length,_t=Xe-2;Me<Xe;_t=Me,Me+=2)ke+=(ce[Me]-ce[_t])*(ce[Me+1]+ce[_t+1]);if(ke>0===Ce)for(Me=0,Xe=ce.length;Me<Xe/2;Me+=2){var it=ce[Me],dt=ce[Me+1];ce[Me]=ce[Xe-2-Me],ce[Me+1]=ce[Xe-1-Me],ce[Xe-2-Me]=it,ce[Xe-1-Me]=dt}}(se,ee),X.push(se)}}function He(X,L){var B=(L=this.options=function(Y,ee){for(var he in ee)Y[he]=ee[he];return Y}(Object.create(this.options),L)).debug;if(B&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");var Y,ee,he,se,ie,ce,G=function(Y,ee){var he=[];if("FeatureCollection"===Y.type)for(var se=0;se<Y.features.length;se++)ka(he,Y.features[se],ee,se);else ka(he,"Feature"===Y.type?Y:{geometry:Y},ee);return he}(X,L);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=Y=G,ie=co(Y,1,-1-(he=(ee=L).buffer/ee.extent),he,0,-1,2,ee),ce=co(Y,1,1-he,2+he,0,-1,2,ee),(ie||ce)&&(se=co(Y,1,-he,1+he,0,-1,2,ee)||[],ie&&(se=Qs(ie,1).concat(se)),ce&&(se=se.concat(Qs(ce,-1)))),(G=se).length&&this.splitTile(G,0,0,0),B&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ot(X,L,B){return 32*((1<<X)*B+L)+X}function xt(X,L){return L?X.properties[L]:X.id}function Sr(X,L){if(null==X)return!0;if("Feature"===X.type)return null!=xt(X,L);if("FeatureCollection"===X.type){const B=new Set;for(const G of X.features){const Y=xt(G,L);if(null==Y||B.has(Y))return!1;B.add(Y)}return!0}return!1}function ns(X,L){const B=new Map;if(null!=X)if("Feature"===X.type)B.set(xt(X,L),X);else for(const G of X.features)B.set(xt(G,L),G);return B}He.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},He.prototype.splitTile=function(X,L,B,G,Y,ee,he){for(var se=[X,L,B,G],ie=this.options,ce=ie.debug;se.length;){G=se.pop(),B=se.pop(),L=se.pop(),X=se.pop();var Ce=1<<L,ke=Ot(L,B,G),Me=this.tiles[ke];if(!Me&&(ce>1&&console.time("creation"),Me=this.tiles[ke]=ni(X,L,B,G,ie),this.tileCoords.push({z:L,x:B,y:G}),ce)){ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,B,G,Me.numFeatures,Me.numPoints,Me.numSimplified),console.timeEnd("creation"));var Xe="z"+L;this.stats[Xe]=(this.stats[Xe]||0)+1,this.total++}if(Me.source=X,Y){if(L===ie.maxZoom||L===Y)continue;var _t=1<<Y-L;if(B!==Math.floor(ee/_t)||G!==Math.floor(he/_t))continue}else if(L===ie.indexMaxZoom||Me.numPoints<=ie.indexMaxPoints)continue;if(Me.source=null,0!==X.length){ce>1&&console.time("clipping");var it,dt,wt,an,xn,Yt,At=.5*ie.buffer/ie.extent,rr=.5-At,Ft=.5+At,Hn=1+At;it=dt=wt=an=null,xn=co(X,Ce,B-At,B+Ft,0,Me.minX,Me.maxX,ie),Yt=co(X,Ce,B+rr,B+Hn,0,Me.minX,Me.maxX,ie),X=null,xn&&(it=co(xn,Ce,G-At,G+Ft,1,Me.minY,Me.maxY,ie),dt=co(xn,Ce,G+rr,G+Hn,1,Me.minY,Me.maxY,ie),xn=null),Yt&&(wt=co(Yt,Ce,G-At,G+Ft,1,Me.minY,Me.maxY,ie),an=co(Yt,Ce,G+rr,G+Hn,1,Me.minY,Me.maxY,ie),Yt=null),ce>1&&console.timeEnd("clipping"),se.push(it||[],L+1,2*B,2*G),se.push(dt||[],L+1,2*B,2*G+1),se.push(wt||[],L+1,2*B+1,2*G),se.push(an||[],L+1,2*B+1,2*G+1)}}},He.prototype.getTile=function(X,L,B){var G=this.options,Y=G.extent,ee=G.debug;if(X<0||X>24)return null;var he=1<<X,se=Ot(X,L=(L%he+he)%he,B);if(this.tiles[se])return Fe(this.tiles[se],Y);ee>1&&console.log("drilling down to z%d-%d-%d",X,L,B);for(var ie,ce=X,Ce=L,ke=B;!ie&&ce>0;)ce--,Ce=Math.floor(Ce/2),ke=Math.floor(ke/2),ie=this.tiles[Ot(ce,Ce,ke)];return ie&&ie.source?(ee>1&&console.log("found parent tile z%d-%d-%d",ce,Ce,ke),ee>1&&console.time("drilling down"),this.splitTile(ie.source,ce,Ce,ke,X,L,B),ee>1&&console.timeEnd("drilling down"),this.tiles[se]?Fe(this.tiles[se],Y):null):null};class Dt extends vs{constructor(L,B,G,Y){super(L,B,G),this._dataUpdateable=new Map,this.loadGeoJSON=(ee,he)=>{const{promoteId:se}=ee;if(ee.request)return _.f(ee.request,(ie,ce,Ce,ke)=>{this._dataUpdateable=Sr(ce,se)?ns(ce,se):void 0,he(ie,ce,Ce,ke)});if("string"==typeof ee.data)try{const ie=JSON.parse(ee.data);this._dataUpdateable=Sr(ie,se)?ns(ie,se):void 0,he(null,ie)}catch{he(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`))}else ee.dataDiff?this._dataUpdateable?(function(ie,ce,Ce){var ke,Me,Xe,_t;if(ce.removeAll&&ie.clear(),ce.remove)for(const it of ce.remove)ie.delete(it);if(ce.add)for(const it of ce.add){const dt=xt(it,Ce);null!=dt&&ie.set(dt,it)}if(ce.update)for(const it of ce.update){let dt=ie.get(it.id);if(null==dt)continue;const wt=!it.removeAllProperties&&((null===(ke=it.removeProperties)||void 0===ke?void 0:ke.length)>0||(null===(Me=it.addOrUpdateProperties)||void 0===Me?void 0:Me.length)>0);if((it.newGeometry||it.removeAllProperties||wt)&&(dt=Object.assign({},dt),ie.set(it.id,dt),wt&&(dt.properties=Object.assign({},dt.properties))),it.newGeometry&&(dt.geometry=it.newGeometry),it.removeAllProperties)dt.properties={};else if((null===(Xe=it.removeProperties)||void 0===Xe?void 0:Xe.length)>0)for(const an of it.removeProperties)Object.prototype.hasOwnProperty.call(dt.properties,an)&&delete dt.properties[an];if((null===(_t=it.addOrUpdateProperties)||void 0===_t?void 0:_t.length)>0)for(const{key:an,value:xn}of it.addOrUpdateProperties)dt.properties[an]=xn}}(this._dataUpdateable,ee.dataDiff,se),he(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):he(new Error(`Cannot update existing geojson data in ${ee.source}`)):he(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Y&&(this.loadGeoJSON=Y)}loadGeoJSONTile(L,B){const G=L.tileID.canonical;if(!this._geoJSONIndex)return B(null,null);const Y=this._geoJSONIndex.getTile(G.z,G.x,G.y);if(!Y)return B(null,null);const ee=new class{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=_.N,this.length=se.length,this._features=se}feature(se){return new class{constructor(ie){this._feature=ie,this.extent=_.N,this.type=ie.type,this.properties=ie.tags,"id"in ie&&!isNaN(ie.id)&&(this.id=parseInt(ie.id,10))}loadGeometry(){if(1===this._feature.type){const ie=[];for(const ce of this._feature.geometry)ie.push([new _.P(ce[0],ce[1])]);return ie}{const ie=[];for(const ce of this._feature.geometry){const Ce=[];for(const ke of ce)Ce.push(new _.P(ke[0],ke[1]));ie.push(Ce)}return ie}}toGeoJSON(ie,ce,Ce){return td.call(this,ie,ce,Ce)}}(this._features[se])}}(Y.features);let he=fl(ee);0===he.byteOffset&&he.byteLength===he.buffer.byteLength||(he=new Uint8Array(he)),B(null,{vectorTile:ee,rawData:he.buffer})}loadData(L,B){var G;null===(G=this._pendingRequest)||void 0===G||G.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Y=!!(L&&L.request&&L.request.collectResourceTiming)&&new _.bt(L.request);this._pendingCallback=B,this._pendingRequest=this.loadGeoJSON(L,(ee,he)=>{if(delete this._pendingCallback,delete this._pendingRequest,ee||!he)return B(ee);if("object"!=typeof he)return B(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));{xi(he,!0);try{if(L.filter){const ie=_.bB(L.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ie.result)throw new Error(ie.value.map(Ce=>`${Ce.key}: ${Ce.message}`).join(", "));he={type:"FeatureCollection",features:he.features.filter(Ce=>ie.value.evaluate({zoom:0},Ce))}}this._geoJSONIndex=L.cluster?new Ca(function({superclusterOptions:ie,clusterProperties:ce}){if(!ce||!ie)return ie;const Ce={},ke={},Me={accumulated:null,zoom:0},Xe={properties:null},_t=Object.keys(ce);for(const it of _t){const[dt,wt]=ce[it],an=_.bB(wt),xn=_.bB("string"==typeof dt?[dt,["accumulated"],["get",it]]:dt);Ce[it]=an.value,ke[it]=xn.value}return ie.map=it=>{Xe.properties=it;const dt={};for(const wt of _t)dt[wt]=Ce[wt].evaluate(Me,Xe);return dt},ie.reduce=(it,dt)=>{Xe.properties=dt;for(const wt of _t)Me.accumulated=it[wt],it[wt]=ke[wt].evaluate(Me,Xe)},ie}(L)).load(he.features):new He(ie=he,L.geojsonVtOptions)}catch(ie){return B(ie)}this.loaded={};const se={};if(Y){const ie=Y.finish();ie&&(se.resourceTiming={},se.resourceTiming[L.source]=JSON.parse(JSON.stringify(ie)))}B(null,se)}var ie})}reloadTile(L,B){const G=this.loaded;return G&&G[L.uid]?super.reloadTile(L,B):this.loadTile(L,B)}removeSource(L,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()}getClusterExpansionZoom(L,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(L.clusterId))}catch(G){B(G)}}getClusterChildren(L,B){try{B(null,this._geoJSONIndex.getChildren(L.clusterId))}catch(G){B(G)}}getClusterLeaves(L,B){try{B(null,this._geoJSONIndex.getLeaves(L.clusterId,L.limit,L.offset))}catch(G){B(G)}}}class xs{constructor(L){this.self=L,this.actor=new _.C(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:vs,geojson:Dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(B,G)=>{if(this.workerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.workerSourceTypes[B]=G},this.self.registerRTLTextPlugin=B=>{if(_.bC.isParsed())throw new Error("RTL text plugin already registered.");_.bC.applyArabicShaping=B.applyArabicShaping,_.bC.processBidirectionalText=B.processBidirectionalText,_.bC.processStyledBidirectionalText=B.processStyledBidirectionalText}}setReferrer(L,B){this.referrer=B}setImages(L,B,G){this.availableImages[L]=B;for(const Y in this.workerSources[L]){const ee=this.workerSources[L][Y];for(const he in ee)ee[he].availableImages=B}G()}setLayers(L,B,G){this.getLayerIndex(L).replace(B),G()}updateLayers(L,B,G){this.getLayerIndex(L).update(B.layers,B.removedIds),G()}loadTile(L,B,G){this.getWorkerSource(L,B.type,B.source).loadTile(B,G)}loadDEMTile(L,B,G){this.getDEMWorkerSource(L,B.source).loadTile(B,G)}reloadTile(L,B,G){this.getWorkerSource(L,B.type,B.source).reloadTile(B,G)}abortTile(L,B,G){this.getWorkerSource(L,B.type,B.source).abortTile(B,G)}removeTile(L,B,G){this.getWorkerSource(L,B.type,B.source).removeTile(B,G)}removeDEMTile(L,B){this.getDEMWorkerSource(L,B.source).removeTile(B)}removeSource(L,B,G){if(!this.workerSources[L]||!this.workerSources[L][B.type]||!this.workerSources[L][B.type][B.source])return;const Y=this.workerSources[L][B.type][B.source];delete this.workerSources[L][B.type][B.source],void 0!==Y.removeSource?Y.removeSource(B,G):G()}loadWorkerSource(L,B,G){try{this.self.importScripts(B.url),G()}catch(Y){G(Y.toString())}}syncRTLPluginState(L,B,G){try{_.bC.setState(B);const Y=_.bC.getPluginURL();if(_.bC.isLoaded()&&!_.bC.isParsed()&&null!=Y){this.self.importScripts(Y);const ee=_.bC.isParsed();G(ee?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Y}`),ee)}}catch(Y){G(Y.toString())}}getAvailableImages(L){let B=this.availableImages[L];return B||(B=[]),B}getLayerIndex(L){let B=this.layerIndexes[L];return B||(B=this.layerIndexes[L]=new En),B}getWorkerSource(L,B,G){return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][B]||(this.workerSources[L][B]={}),this.workerSources[L][B][G]||(this.workerSources[L][B][G]=new this.workerSourceTypes[B]({send:(Y,ee,he)=>{this.actor.send(Y,ee,he,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][B][G]}getDEMWorkerSource(L,B){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][B]||(this.demWorkerSources[L][B]=new pl),this.demWorkerSources[L][B]}}return _.i()&&(self.worker=new xs(self)),xs}),Jd(0,function(_){class be{static testProp(s){if(!be.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in be.docStyle)return s[d];return s[0]}static create(s,d,p){const g=window.document.createElement(s);return void 0!==d&&(g.className=d),p&&p.appendChild(g),g}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){be.docStyle&&be.selectProp&&(be.userSelect=be.docStyle[be.selectProp],be.docStyle[be.selectProp]="none")}static enableDrag(){be.docStyle&&be.selectProp&&(be.docStyle[be.selectProp]=be.userSelect)}static setTransform(s,d){s.style[be.transformProp]=d}static addEventListener(s,d,p,g={}){s.addEventListener(d,p,"passive"in g?g:g.capture)}static removeEventListener(s,d,p,g={}){s.removeEventListener(d,p,"passive"in g?g:g.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",be.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",be.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",be.suppressClickInternal,!0)},0)}static mousePos(s,d){const p=s.getBoundingClientRect();return new _.P(d.clientX-p.left-s.clientLeft,d.clientY-p.top-s.clientTop)}static touchPos(s,d){const p=s.getBoundingClientRect(),g=[];for(let x=0;x<d.length;x++)g.push(new _.P(d[x].clientX-p.left-s.clientLeft,d[x].clientY-p.top-s.clientTop));return g}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}be.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,be.selectProp=be.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),be.transformProp=be.testProp(["transform","WebkitTransform"]);const Eo={supported:!1,testSupport:function(v){!vs&&ct&&(pl?Zs(v):xr=v)}};let xr,ct,vs=!1,pl=!1;function Zs(v){const s=v.createTexture();v.bindTexture(v.TEXTURE_2D,s);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,ct),v.isContextLost())return;Eo.supported=!0}catch{}v.deleteTexture(s),vs=!0}var wr,xi,v;typeof document<"u"&&(ct=document.createElement("img"),ct.onload=function(){xr&&Zs(xr),xr=null,pl=!0},ct.onerror=function(){vs=!0,xr=null},ct.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let s,d,p,g;v.resetRequestQueue=()=>{s=[],d=0,p=0,g={}},v.addThrottleControl=A=>{const R=p++;return g[R]=A,R},v.removeThrottleControl=A=>{delete g[A],k()},v.getImage=(A,R,O=!0)=>{Eo.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*");const V={requestParameters:A,supportImageRefresh:O,callback:R,cancelled:!1,completed:!1,cancel:()=>{V.completed||V.cancelled||(V.cancelled=!0,V.innerRequest&&(V.innerRequest.cancel(),d--),k())}};return s.push(V),k(),V};const x=A=>{const{requestParameters:R,supportImageRefresh:O,callback:V}=A;return _.e(R,{type:"image"}),(!1!==O||_.i()||_.g(R.url)||R.headers&&!Object.keys(R.headers).reduce((Z,q)=>Z&&"accept"===q,!0)?_.m:M)(R,(Z,q,Q,$)=>{T(A,V,Z,q,Q,$)})},T=(A,R,O,V,Z,q)=>{var Q,$;O?R(O):V instanceof HTMLImageElement||_.a(V)?R(null,V):V&&(Q=V,$=(Q,$)=>{null!=Q?R(Q):null!=$&&R(null,$,{cacheControl:Z,expires:q})},"function"==typeof createImageBitmap?_.b(Q,$):_.d(Q,$)),A.cancelled||(A.completed=!0,d--,k())},k=()=>{const A=(()=>{const R=Object.keys(g);let O=!1;if(R.length>0)for(const V of R)if(O=g[V](),O)break;return O})()?_.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:_.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=d;R<A&&s.length>0;R++){const O=s.shift();if(O.cancelled){R--;continue}const V=x(O);d++,O.innerRequest=V}},M=(A,R)=>{const O=new Image,V=A.url;let Z=!1;const q=A.credentials;return q&&"include"===q?O.crossOrigin="use-credentials":(q&&"same-origin"===q||!_.s(V))&&(O.crossOrigin="anonymous"),O.fetchPriority="high",O.onload=()=>{R(null,O),O.onerror=O.onload=null},O.onerror=()=>{Z||R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),O.onerror=O.onload=null},O.src=V,{cancel:()=>{Z=!0,O.src=""}}}}(wr||(wr={})),wr.resetRequestQueue(),(v=xi||(xi={})).Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown";class td{constructor(s){this._transformRequestFn=s}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}normalizeSpriteURL(s,d,p){const g=function(x){const T=x.match(Qo);if(!T)throw new Error(`Unable to parse URL "${x}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(s);return g.path+=`${d}${p}`,function(x){const T=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${T}`}(g)}setTransformRequest(s){this._transformRequestFn=s}}const Qo=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Mo(v){var s=new _.A(3);return s[0]=v[0],s[1]=v[1],s[2]=v[2],s}var ys,Yo=function(v,s,d){return v[0]=s[0]-d[0],v[1]=s[1]-d[1],v[2]=s[2]-d[2],v};ys=new _.A(3),_.A!=Float32Array&&(ys[0]=0,ys[1]=0,ys[2]=0);var wa=function(v){var s=v[0],d=v[1];return s*s+d*d};function $i(v){const s=[];if("string"==typeof v)s.push({id:"default",url:v});else if(v&&v.length>0){const d=[];for(const{id:p,url:g}of v){const x=`${p}${g}`;-1===d.indexOf(x)&&(d.push(x),s.push({id:p,url:g}))}}return s}function ml(v,s,d,p,g){if(p)return void v(p);if(g!==Object.values(s).length||g!==Object.values(d).length)return;const x={};for(const T in s){x[T]={};const k=_.h.getImageCanvasContext(d[T]),M=s[T];for(const A in M){const{width:R,height:O,x:V,y:Z,sdf:q,pixelRatio:Q,stretchX:$,stretchY:ae,content:fe}=M[A];x[T][A]={data:null,pixelRatio:Q,sdf:q,stretchX:$,stretchY:ae,content:fe,spriteData:{width:R,height:O,x:V,y:Z,context:k}}}}v(null,x)}!function(){var v=new _.A(2);_.A!=Float32Array&&(v[0]=0,v[1]=0)}();class Zn{constructor(s,d,p,g){this.context=s,this.format=p,this.texture=s.gl.createTexture(),this.update(d,g)}update(s,d,p){const{width:g,height:x}=s,T=!(this.size&&this.size[0]===g&&this.size[1]===x||p),{context:k}=this,{gl:M}=k;if(this.useMipmap=!(!d||!d.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!d||!1!==d.premultiply)),T)this.size=[g,x],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||_.a(s)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,s):M.texImage2D(M.TEXTURE_2D,0,this.format,g,x,0,this.format,M.UNSIGNED_BYTE,s.data);else{const{x:A,y:R}=p||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||_.a(s)?M.texSubImage2D(M.TEXTURE_2D,0,A,R,M.RGBA,M.UNSIGNED_BYTE,s):M.texSubImage2D(M.TEXTURE_2D,0,A,R,g,x,M.RGBA,M.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(s,d,p){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),s!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,s),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||s),this.filter=s),d!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,d),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function Jo(v){const{userImage:s}=v;return!!(s&&s.render&&s.render())&&(v.data.replace(new Uint8Array(s.data.buffer)),!0)}class zr extends _.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new _.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,callback:p}of this.requestors)this._notify(d,p);this.requestors=[]}}getImage(s){const d=this.images[s];if(d&&!d.data&&d.spriteData){const p=d.spriteData;d.data=new _.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let p=!0;const g=d.data||d.spriteData;return this._validateStretch(d.stretchX,g&&g.width)||(this.fire(new _.j(new Error(`Image "${s}" has invalid "stretchX" value`))),p=!1),this._validateStretch(d.stretchY,g&&g.height)||(this.fire(new _.j(new Error(`Image "${s}" has invalid "stretchY" value`))),p=!1),this._validateContent(d.content,d)||(this.fire(new _.j(new Error(`Image "${s}" has invalid "content" value`))),p=!1),p}_validateStretch(s,d){if(!s)return!0;let p=0;for(const g of s){if(g[0]<p||g[1]<g[0]||d<g[1])return!1;p=g[1]}return!0}_validateContent(s,d){if(!s)return!0;if(4!==s.length)return!1;const p=d.spriteData,g=p&&p.width||d.data.width,x=p&&p.height||d.data.height;return!(s[0]<0||g<s[0]||s[1]<0||x<s[1]||s[2]<0||g<s[2]||s[3]<0||x<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,p=!0){const g=this.getImage(s);if(p&&(g.data.width!==d.data.width||g.data.height!==d.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=g.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,d){let p=!0;if(!this.isLoaded())for(const g of s)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(s,d):this.requestors.push({ids:s,callback:d})}_notify(s,d){const p={};for(const g of s){let x=this.getImage(g);x||(this.fire(new _.k("styleimagemissing",{id:g})),x=this.getImage(g)),x?p[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!(!x.userImage||!x.userImage.render)}:_.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,p)}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],p=this.getImage(s);if(!p)return null;if(d&&d.position.version===p.version)return d.position;if(d)d.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new _.I(g,p);this.patterns[s]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Zn(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const x in this.patterns)s.push(this.patterns[x].bin);const{w:d,h:p}=_.p(s),g=this.atlasImage;g.resize({width:d||1,height:p||1});for(const x in this.patterns){const{bin:T}=this.patterns[x],k=T.x+1,M=T.y+1,A=this.getImage(x).data,R=A.width,O=A.height;_.R.copy(A,g,{x:0,y:0},{x:k,y:M},{width:R,height:O}),_.R.copy(A,g,{x:0,y:O-1},{x:k,y:M-1},{width:R,height:1}),_.R.copy(A,g,{x:0,y:0},{x:k,y:M+O},{width:R,height:1}),_.R.copy(A,g,{x:R-1,y:0},{x:k-1,y:M},{width:1,height:O}),_.R.copy(A,g,{x:0,y:0},{x:k+R,y:M},{width:1,height:O})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const p=this.getImage(d);p||_.w(`Image with ID: "${d}" was not found`),Jo(p)&&this.updateImage(d,p)}}}const Ks=1e20;function Wi(v,s,d,p,g,x,T,k,M){for(let A=s;A<s+p;A++)Xr(v,d*x+A,x,g,T,k,M);for(let A=d;A<d+g;A++)Xr(v,A*x+s,1,p,T,k,M)}function Xr(v,s,d,p,g,x,T){x[0]=0,T[0]=-Ks,T[1]=Ks,g[0]=v[s];for(let k=1,M=0,A=0;k<p;k++){g[k]=v[s+k*d];const R=k*k;do{const O=x[M];A=(g[k]-g[O]+R-O*O)/(k-O)/2}while(A<=T[M]&&--M>-1);M++,x[M]=k,T[M]=A,T[M+1]=Ks}for(let k=0,M=0;k<p;k++){for(;T[M+1]<k;)M++;const A=x[M],R=k-A;v[s+k*d]=g[A]+R*R}}class Do{constructor(s,d){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={}}setURL(s){this.url=s}getGlyphs(s,d){const p=[];for(const g in s)for(const x of s[g])p.push({stack:g,id:x});_.o(p,({stack:g,id:x},T)=>{let k=this.entries[g];k||(k=this.entries[g]={glyphs:{},requests:{},ranges:{}});let M=k.glyphs[x];if(void 0!==M)return void T(null,{stack:g,id:x,glyph:M});if(M=this._tinySDF(k,g,x),M)return k.glyphs[x]=M,void T(null,{stack:g,id:x,glyph:M});const A=Math.floor(x/256);if(256*A>65535)return void T(new Error("glyphs > 65535 not supported"));if(k.ranges[A])return void T(null,{stack:g,id:x,glyph:M});if(!this.url)return void T(new Error("glyphsUrl is not set"));let R=k.requests[A];R||(R=k.requests[A]=[],Do.loadGlyphRange(g,A,this.url,this.requestManager,(O,V)=>{if(V){for(const Z in V)this._doesCharSupportLocalGlyph(+Z)||(k.glyphs[+Z]=V[+Z]);k.ranges[A]=!0}for(const Z of R)Z(O,V);delete k.requests[A]})),R.push((O,V)=>{O?T(O):V&&T(null,{stack:g,id:x,glyph:V[x]||null})})},(g,x)=>{if(g)d(g);else if(x){const T={};for(const{stack:k,id:M,glyph:A}of x)(T[k]||(T[k]={}))[M]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};d(null,T)}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(_.u["CJK Unified Ideographs"](s)||_.u["Hangul Syllables"](s)||_.u.Hiragana(s)||_.u.Katakana(s))}_tinySDF(s,d,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let x=s.tinySDF;if(!x){let k="400";/bold/i.test(d)?k="900":/medium/i.test(d)?k="500":/light/i.test(d)&&(k="200"),x=s.tinySDF=new Do.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:k})}const T=x.draw(String.fromCharCode(p));return{id:p,bitmap:new _.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}Do.loadGlyphRange=function(v,s,d,p,g){const x=256*s,T=x+255,k=p.transformRequest(d.replace("{fontstack}",v).replace("{range}",`${x}-${T}`),xi.Glyphs);_.l(k,(M,A)=>{if(M)g(M);else if(A){const R={};for(const O of _.n(A))R[O.id]=O;g(null,R)}})},Do.TinySDF=class{constructor({fontSize:v=24,buffer:s=3,radius:d=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:T="normal"}={}){this.buffer=s,this.cutoff=p,this.radius=d;const k=this.size=v+4*s,M=this._createCanvas(k),A=this.ctx=M.getContext("2d",{willReadFrequently:!0});A.font=`${T} ${x} ${v}px ${g}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(v){const s=document.createElement("canvas");return s.width=s.height=v,s}draw(v){const{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(v),T=Math.ceil(d),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),M=Math.min(this.size-this.buffer,T+Math.ceil(p)),A=k+2*this.buffer,R=M+2*this.buffer,O=Math.max(A*R,0),V=new Uint8ClampedArray(O),Z={data:V,width:A,height:R,glyphWidth:k,glyphHeight:M,glyphTop:T,glyphLeft:0,glyphAdvance:s};if(0===k||0===M)return Z;const{ctx:q,buffer:Q,gridInner:$,gridOuter:ae}=this;q.clearRect(Q,Q,k,M),q.fillText(v,Q,Q+T);const fe=q.getImageData(Q,Q,k,M);ae.fill(Ks,0,O),$.fill(0,0,O);for(let te=0;te<M;te++)for(let de=0;de<k;de++){const _e=fe.data[4*(te*k+de)+3]/255;if(0===_e)continue;const ve=(te+Q)*A+de+Q;if(1===_e)ae[ve]=0,$[ve]=Ks;else{const Te=.5-_e;ae[ve]=Te>0?Te*Te:0,$[ve]=Te<0?Te*Te:0}}Wi(ae,0,0,A,R,A,this.f,this.v,this.z),Wi($,Q,Q,k,M,A,this.f,this.v,this.z);for(let te=0;te<O;te++){const de=Math.sqrt(ae[te])-Math.sqrt($[te]);V[te]=Math.round(255-255*(de/this.radius+this.cutoff))}return Z}};class Di{constructor(){this.specification=_.v.light.position}possiblyEvaluate(s,d){return _.z(s.expression.evaluate(d))}interpolate(s,d,p){return{x:_.B.number(s.x,d.x,p),y:_.B.number(s.y,d.y,p),z:_.B.number(s.z,d.z,p)}}}let Sa;class fl extends _.E{constructor(s){super(),Sa=Sa||new _.r({anchor:new _.D(_.v.light.anchor),position:new Di,color:new _.D(_.v.light.color),intensity:new _.D(_.v.light.intensity)}),this._transitionable=new _.T(Sa),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(_.t,s,d))for(const p in s){const g=s[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,p){return(!p||!1!==p.validate)&&_.x(this,s.call(_.y,_.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:_.v})))}}class yn{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){const p=s.join(",")+String(d);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(s,d)),this.dashEntry[p]}getDashRanges(s,d,p){const g=[];let x=s.length%2==1?-s[s.length-1]*p:0,T=s[0]*p,k=!0;g.push({left:x,right:T,isDash:k,zeroLength:0===s[0]});let M=s[0];for(let A=1;A<s.length;A++){k=!k;const R=s[A];x=M*p,M+=R,T=M*p,g.push({left:x,right:T,isDash:k,zeroLength:0===R})}return g}addRoundDash(s,d,p){const g=d/2;for(let x=-p;x<=p;x++){const T=this.width*(this.nextRow+p+x);let k=0,M=s[k];for(let A=0;A<this.width;A++){A/M.right>1&&(M=s[++k]);const R=Math.abs(A-M.left),O=Math.abs(A-M.right),V=Math.min(R,O);let Z;const q=x/p*(g+1);if(M.isDash){const Q=g-Math.abs(q);Z=Math.sqrt(V*V+Q*Q)}else Z=g-Math.sqrt(V*V+q*q);this.data[T+A]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(s){for(let k=s.length-1;k>=0;--k){const M=s[k],A=s[k+1];M.zeroLength?s.splice(k,1):A&&A.isDash===M.isDash&&(A.left=M.left,s.splice(k,1))}const d=s[0],p=s[s.length-1];d.isDash===p.isDash&&(d.left=p.left-this.width,p.right=d.right+this.width);const g=this.width*this.nextRow;let x=0,T=s[x];for(let k=0;k<this.width;k++){k/T.right>1&&(T=s[++x]);const M=Math.abs(k-T.left),A=Math.abs(k-T.right),R=Math.min(M,A);this.data[g+k]=Math.max(0,Math.min(255,(T.isDash?R:-R)+128))}}addDash(s,d){const p=d?7:0,g=2*p+1;if(this.nextRow+g>this.height)return _.w("LineAtlas out of space"),null;let x=0;for(let k=0;k<s.length;k++)x+=s[k];if(0!==x){const k=this.width/x,M=this.getDashRanges(s,this.width,k);d?this.addRoundDash(M,k,p):this.addRegularDash(M)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:x};return this.nextRow+=g,this.dirty=!0,T}bind(s){const d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class gl{constructor(s,d,p){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let x=0;x<g.length;x++){const T=new _.C(g[x],d,p);T.name=`Worker ${x}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d,p){_.o(this.actors,(g,x)=>{g.send(s,d,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}}function es(v,s,d){const p=function(g,x){if(g)return d(g);if(x){const T=_.F(_.e(x,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(T.vectorLayers=x.vector_layers,T.vectorLayerIds=T.vectorLayers.map(k=>k.id)),d(null,T)}};return v.url?_.f(s.transformRequest(v.url,xi.Source),p):_.h.frame(()=>p(null,v))}class Nn{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof _.L?new _.L(s.lng,s.lat):_.L.convert(s),this}setSouthWest(s){return this._sw=s instanceof _.L?new _.L(s.lng,s.lat):_.L.convert(s),this}extend(s){const d=this._sw,p=this._ne;let g,x;if(s instanceof _.L)g=s,x=s;else{if(!(s instanceof Nn))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(Nn.convert(s)):this.extend(_.L.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(_.L.convert(s)):this;if(g=s._sw,x=s._ne,!g||!x)return this}return d||p?(d.lng=Math.min(g.lng,d.lng),d.lat=Math.min(g.lat,d.lat),p.lng=Math.max(x.lng,p.lng),p.lat=Math.max(x.lat,p.lat)):(this._sw=new _.L(g.lng,g.lat),this._ne=new _.L(x.lng,x.lat)),this}getCenter(){return new _.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new _.L(this.getWest(),this.getNorth())}getSouthEast(){return new _.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:d,lat:p}=_.L.convert(s);let g=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(s){return s instanceof Nn?s:s&&new Nn(s)}static fromLngLat(s,d=0){const p=360*d/40075017,g=p/Math.cos(Math.PI/180*s.lat);return new Nn(new _.L(s.lng-g,s.lat-p),new _.L(s.lng+g,s.lat+p))}}class Br{constructor(s,d,p){this.bounds=Nn.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=p||24}validateBounds(s){return Array.isArray(s)&&4===s.length?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),p=Math.floor(_.G(this.bounds.getWest())*d),g=Math.floor(_.H(this.bounds.getNorth())*d),x=Math.ceil(_.G(this.bounds.getEast())*d),T=Math.ceil(_.H(this.bounds.getSouth())*d);return s.x>=p&&s.x<x&&s.y>=g&&s.y<T}}class Zt extends _.E{constructor(s,d,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new _.k("dataloading",{dataType:"source"})),this._tileJSONRequest=es(this._options,this.map._requestManager,(x,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),x?this.fire(new _.j(x)):T&&(_.e(this,T),T.bounds&&(this.tileBounds=new Br(T.bounds,this.minzoom,this.maxzoom)),this.fire(new _.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>_.e({},this._options),this.id=s,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,_.e(this,_.F(d,["url","scheme","tileSize","promoteId"])),this._options=_.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(s,d){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,xi.Tile),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(T,k){return delete s.request,s.aborted?d(null):T&&404!==T.status?d(T):(k&&k.resourceTiming&&(s.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&s.setExpiryData(k),s.loadVectorData(k,this.map.painter),d(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,s.actor&&"expired"!==s.state?"loading"===s.state?s.reloadCallback=d:s.request=s.actor.send("reloadTile",g,x.bind(this)):(s.actor=this.dispatcher.getActor(),s.request=s.actor.send("loadTile",g,x.bind(this)))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id},void 0)}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ca extends _.E{constructor(s,d,p,g){super(),this.id=s,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=_.e({type:"raster"},d),_.e(this,_.F(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new _.k("dataloading",{dataType:"source"})),this._tileJSONRequest=es(this._options,this.map._requestManager,(s,d)=>{this._tileJSONRequest=null,this._loaded=!0,s?this.fire(new _.j(s)):d&&(_.e(this,d),d.bounds&&(this.tileBounds=new Br(d.bounds,this.minzoom,this.maxzoom)),this.fire(new _.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}serialize(){return _.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,d){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.request=wr.getImage(this.map._requestManager.transformRequest(p,xi.Tile),(g,x,T)=>{if(delete s.request,s.aborted)s.state="unloaded",d(null);else if(g)s.state="errored",d(g);else if(x){this.map._refreshExpiredTiles&&T&&s.setExpiryData(T);const k=this.map.painter.context,M=k.gl;s.texture=this.map.painter.getTileTexture(x.width),s.texture?s.texture.update(x,{useMipmap:!0}):(s.texture=new Zn(k,x,M.RGBA,{useMipmap:!0}),s.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),s.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(s,d){s.request&&(s.request.cancel(),delete s.request),d()}unloadTile(s,d){s.texture&&this.map.painter.saveTileTexture(s.texture),d()}hasTransition(){return!1}}class Ta extends Ca{constructor(s,d,p,g){super(s,d,p,g),this.type="raster-dem",this.maxzoom=22,this._options=_.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s,d){const p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,xi.Tile);function x(T,k){T&&(s.state="errored",d(T)),k&&(s.dem=k,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded",d(null))}s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.request=wr.getImage(g,(T,k,M)=>_._(this,void 0,void 0,function*(){if(delete s.request,s.aborted)s.state="unloaded",d(null);else if(T)s.state="errored",d(T);else if(k){this.map._refreshExpiredTiles&&s.setExpiryData(M);const A=_.a(k)&&_.J()?k:yield function(O){return _._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&_.K()){const V=O.width+2,Z=O.height+2;try{return new _.R({width:V,height:Z},yield _.M(O,-1,-1,V,Z))}catch{}}return _.h.getImageData(O,1)})}(k),R={uid:s.uid,coord:s.tileID,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};s.actor&&"expired"!==s.state||(s.actor=this.dispatcher.getActor(),s.actor.send("loadDEMTile",R,x))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(s){const d=s.canonical,p=Math.pow(2,d.z),g=(d.x-1+p)%p,x=0===d.x?s.wrap-1:s.wrap,T=(d.x+1+p)%p,k=d.x+1===p?s.wrap+1:s.wrap,M={};return M[new _.O(s.overscaledZ,x,d.z,g,d.y).key]={backfilled:!1},M[new _.O(s.overscaledZ,k,d.z,T,d.y).key]={backfilled:!1},d.y>0&&(M[new _.O(s.overscaledZ,x,d.z,g,d.y-1).key]={backfilled:!1},M[new _.O(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},M[new _.O(s.overscaledZ,k,d.z,T,d.y-1).key]={backfilled:!1}),d.y+1<p&&(M[new _.O(s.overscaledZ,x,d.z,g,d.y+1).key]={backfilled:!1},M[new _.O(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},M[new _.O(s.overscaledZ,k,d.z,T,d.y+1).key]={backfilled:!1}),M}unloadTile(s){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&s.actor.send("removeDEMTile",{uid:s.uid,source:this.id})}}class Mn extends _.E{constructor(s,d,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>_.e({},this._options,{type:this.type,data:this._data}),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=d.data,this._options=_.e({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const x=_.N/this.tileSize;this.workerOptions=_.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*x,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*x,extent:_.N,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:_.N,radius:(d.clusterRadius||50)*x,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(void 0!==s.clusterRadius&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),void 0!==s.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:s,source:this.id},d),this}getClusterChildren(s,d){return this.actor.send("geojson.getClusterChildren",{clusterId:s,source:this.id},d),this}getClusterLeaves(s,d,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:s,limit:d,offset:p},g),this}_updateWorkerData(s){const d=_.e({},this.workerOptions);s?d.dataDiff=s:"string"==typeof this._data?(d.request=this.map._requestManager.transformRequest(_.h.resolveURL(this._data),xi.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new _.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new _.k("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new _.j(p));const T={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&_.e(T,{resourceTiming:x}),this.fire(new _.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new _.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return 0===this._pendingLoads}loadTile(s,d){const p=s.actor?"reloadTile":"loadTile";s.actor=this.actor;const g={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.request=this.actor.send(p,g,(x,T)=>(delete s.request,s.unloadVectorData(),s.aborted?d(null):x?d(x):(s.loadVectorData(T,this.map.painter,"reloadTile"===p),d(null))))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.aborted=!0}unloadTile(s){s.unloadVectorData(),this.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var sn=_.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class lo extends _.E{constructor(s,d,p,g){super(),this.load=(x,T)=>{this._loaded=!1,this.fire(new _.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=wr.getImage(this.map._requestManager.transformRequest(this.url,xi.Image),(k,M)=>{this._request=null,this._loaded=!0,k?this.fire(new _.j(k)):M&&(this.image=M,x&&(this.coordinates=x),T&&T(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||!this.image)return;const x=this.map.painter.context,T=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=_.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Zn(x,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let k=!1;for(const M in this.tiles){const A=this.tiles[M];"loaded"!==A.state&&(A.state="loaded",A.texture=this.texture,k=!0)}k&&this.fire(new _.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=s,this.dispatcher=p,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=d}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=s.url,this.load(s.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new _.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(s){this.coordinates=s;const d=s.map(_.U.fromLngLat);this.tileID=function(g){let x=1/0,T=1/0,k=-1/0,M=-1/0;for(const V of g)x=Math.min(x,V.x),T=Math.min(T,V.y),k=Math.max(k,V.x),M=Math.max(M,V.y);const A=Math.max(k-x,M-T),R=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),O=Math.pow(2,R);return new _.W(R,Math.floor((x+k)/2*O),Math.floor((T+M)/2*O))}(d),this.minzoom=this.maxzoom=this.tileID.z;const p=d.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new _.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,_.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,_.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,_.N,_.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new _.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(s,d){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},d(null)):(s.state="errored",d(null))}hasTransition(){return!1}}class It extends lo{constructor(s,d,p,g){super(s,d,p,g),this.load=()=>{this._loaded=!1;const x=this.options;this.urls=[];for(const T of x.urls)this.urls.push(this.map._requestManager.transformRequest(T,xi.Source).url);_.X(this.urls,(T,k)=>{this._loaded=!0,T?this.fire(new _.j(T)):k&&(this.video=k,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const x=this.map.painter.context,T=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=_.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new Zn(x,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let k=!1;for(const M in this.tiles){const A=this.tiles[M];"loaded"!==A.state&&(A.state="loaded",A.texture=this.texture,k=!0)}k&&this.fire(new _.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new _.j(new _.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class ts extends lo{constructor(s,d,p,g){super(s,d,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new _.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const T=this.map.painter.context,k=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=_.S.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Zn(T,this.canvas,k.RGBA,{premultiply:!0});let M=!1;for(const A in this.tiles){const R=this.tiles[A];"loaded"!==R.state&&(R.state="loaded",R.texture=this.texture,M=!0)}M&&this.fire(new _.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(x=>!Array.isArray(x)||2!==x.length||x.some(T=>"number"!=typeof T))||this.fire(new _.j(new _.Y(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new _.j(new _.Y(`sources.${s}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new _.j(new _.Y(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof HTMLCanvasElement||this.fire(new _.j(new _.Y(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new _.j(new _.Y(`sources.${s}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const ec={},Io=v=>{switch(v){case"geojson":return Mn;case"image":return lo;case"raster":return Ca;case"raster-dem":return Ta;case"vector":return Zt;case"video":return It;case"canvas":return ts}return ec[v]};function _l(v,s){const d=_.Z();return _.$(d,d,[1,1,0]),_.a0(d,d,[.5*v.width,.5*v.height,1]),_.a1(d,d,v.calculatePosMatrix(s.toUnwrapped()))}function ka(v,s,d,p,g,x){const T=function(O,V,Z){if(O)for(const q of O){const Q=V[q];if(Q&&Q.source===Z&&"fill-extrusion"===Q.type)return!0}else for(const q in V){const Q=V[q];if(Q.source===Z&&"fill-extrusion"===Q.type)return!0}return!1}(g&&g.layers,s,v.id),k=x.maxPitchScaleFactor(),M=v.tilesIn(p,k,T);M.sort(Xs);const A=[];for(const O of M)A.push({wrappedTileID:O.tileID.wrapped().key,queryResults:O.tile.queryRenderedFeatures(s,d,v._state,O.queryGeometry,O.cameraQueryGeometry,O.scale,g,x,k,_l(v.transform,O.tileID))});const R=function(O){const V={},Z={};for(const q of O){const Q=q.queryResults,$=q.wrappedTileID,ae=Z[$]=Z[$]||{};for(const fe in Q){const te=Q[fe],de=ae[fe]=ae[fe]||{},_e=V[fe]=V[fe]||[];for(const ve of te)de[ve.featureIndex]||(de[ve.featureIndex]=!0,_e.push(ve))}}return V}(A);for(const O in R)R[O].forEach(V=>{const Z=V.feature,q=v.getFeatureState(Z.layer["source-layer"],Z.id);Z.source=Z.layer.source,Z.layer["source-layer"]&&(Z.sourceLayer=Z.layer["source-layer"]),Z.state=q});return R}function Xs(v,s){const d=v.tileID,p=s.tileID;return d.overscaledZ-p.overscaledZ||d.canonical.y-p.canonical.y||d.wrap-p.wrap||d.canonical.x-p.canonical.x}class Ea{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=_.a2(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const d=s+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(g,x){const T={};if(!x)return T;for(const k of g){const M=k.layerIds.map(A=>x.getLayer(A)).filter(Boolean);if(0!==M.length){k.layers=M,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(A=>M.filter(R=>R.id===A)[0]));for(const A of M)T[A.id]=k}}return T}(s.buckets,d.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof _.a4){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof _.a4&&x.hasRTLText){this.hasRTLText=!0,_.a5();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(g).queryRadius(x))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new _.a3}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(s)}const d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Zn(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Zn(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,p,g,x,T,k,M,A,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:T,tileSize:this.tileSize,pixelPosMatrix:R,transform:M,params:k,queryPadding:this.queryPadding*A},s,d,p):{}}querySourceFeatures(s,d){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),x=d&&d.sourceLayer?d.sourceLayer:"",T=g._geojsonTileLayer||g[x];if(!T)return;const k=_.a6(d&&d.filter),{z:M,x:A,y:R}=this.tileID.canonical,O={z:M,x:A,y:R};for(let V=0;V<T.length;V++){const Z=T.feature(V);if(k.needGeometry){const $=_.a7(Z,!0);if(!k.filter(new _.a8(this.tileID.overscaledZ),$,this.tileID.canonical))continue}else if(!k.filter(new _.a8(this.tileID.overscaledZ),Z))continue;const q=p.getId(Z,x),Q=new _.a9(Z,M,A,R,q);Q.tile=O,s.push(Q)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const d=this.expirationTime;if(s.cacheControl){const p=_.aa(s.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(d)if(this.expirationTime<d)g=!0;else{const x=this.expirationTime-d;x?this.expirationTime=p+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(s).length)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!d.style.hasLayer(g))continue;const x=this.buckets[g],T=x.layers[0].sourceLayer||"_geojsonTileLayer",k=p[T],M=s[T];if(!k||!M||0===Object.keys(M).length)continue;x.update(M,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const A=d&&d.style&&d.style.getLayer(g);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(x)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<_.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=_.h.now()+s}setDependencies(s,d){const p={};for(const g of d)p[g]=!0;this.dependencies[s]=p}hasDependency(s,d){for(const p of s){const g=this.dependencies[p];if(g)for(const x of d)if(g[x])return!0}return!1}}class vl{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(const s in this.data)for(const d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,p){const g=s.wrapped().key;void 0===this.data[g]&&(this.data[g]=[]);const x={value:d,timeout:void 0};if(void 0!==p&&(x.timeout=setTimeout(()=>{this.remove(s,x)},p)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),0===this.data[s].length&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){const d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;const p=s.wrapped().key,g=void 0===d?0:this.data[p].indexOf(d),x=this.data[p][g];return this.data[p].splice(g,1),x.timeout&&clearTimeout(x.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){const d=[];for(const p in this.data)for(const g of this.data[p])s(g.value)||d.push(g);for(const p of d)this.remove(p.value.tileID,p)}}class Se{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,p){const g=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][g]=this.stateChanges[s][g]||{},_.e(this.stateChanges[s][g],p),null===this.deletedStates[s]){this.deletedStates[s]={};for(const x in this.state[s])x!==g&&(this.deletedStates[s][x]=null)}else if(this.deletedStates[s]&&null===this.deletedStates[s][g]){this.deletedStates[s][g]={};for(const x in this.state[s][g])p[x]||(this.deletedStates[s][g][x]=null)}else for(const x in p)this.deletedStates[s]&&this.deletedStates[s][g]&&null===this.deletedStates[s][g][x]&&delete this.deletedStates[s][g][x]}removeFeatureState(s,d,p){if(null===this.deletedStates[s])return;const g=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},p&&void 0!==d)null!==this.deletedStates[s][g]&&(this.deletedStates[s][g]=this.deletedStates[s][g]||{},this.deletedStates[s][g][p]=null);else if(void 0!==d)if(this.stateChanges[s]&&this.stateChanges[s][g])for(p in this.deletedStates[s][g]={},this.stateChanges[s][g])this.deletedStates[s][g][p]=null;else this.deletedStates[s][g]=null;else this.deletedStates[s]=null}getState(s,d){const p=String(d),g=_.e({},(this.state[s]||{})[p],(this.stateChanges[s]||{})[p]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){const x=this.deletedStates[s][d];if(null===x)return{};for(const T in x)delete g[T]}return g}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const T in this.stateChanges[g])this.state[g][T]||(this.state[g][T]={}),_.e(this.state[g][T],this.stateChanges[g][T]),x[T]=this.state[g][T];p[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(null===this.deletedStates[g])for(const T in this.state[g])x[T]={},this.state[g][T]={};else for(const T in this.deletedStates[g]){if(null===this.deletedStates[g][T])this.state[g][T]={};else for(const k of Object.keys(this.deletedStates[g][T]))delete this.state[g][T][k];x[T]=this.state[g][T]}p[g]=p[g]||{},_.e(p[g],x)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const g in s)s[g].setFeatureState(p,d)}}class Qr extends _.E{constructor(s,d,p){super(),this.id=s,this.dispatcher=p,this.on("data",g=>{"source"===g.dataType&&"metadata"===g.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===g.dataType&&"content"===g.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,x,T,k)=>{const M=new(Io(x.type))(g,x,T,k);if(M.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${M.id}`);return M})(s,d,p,this),this._tiles={},this._cache=new vl(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Se,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const d=this._tiles[s];if("loaded"!==d.state&&"errored"!==d.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d){return this._source.loadTile(s,d)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){this._source.abortTile&&this._source.abortTile(s,()=>{}),this._source.fire(new _.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const p=this._tiles[d];p.upload(s),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(co).map(s=>s.key)}getRenderableIds(s){const d=[];for(const p in this._tiles)this._isIdRenderable(p,s)&&d.push(this._tiles[p]);return s?d.sort((p,g)=>{const x=p.tileID,T=g.tileID,k=new _.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),M=new _.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-T.overscaledZ||M.y-k.y||M.x-k.x}).map(p=>p.tileID.key):d.map(p=>p.tileID).sort(co).map(p=>p.key)}hasRenderableParent(s){const d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)"errored"!==this._tiles[s].state&&this._reloadTile(s,"reloading")}}_reloadTile(s,d){const p=this._tiles[s];p&&("loading"!==p.state&&(p.state=d),this._loadTile(p,this._tileLoaded.bind(this,p,s,d)))}_tileLoaded(s,d,p,g){if(g)return s.state="errored",void(404!==g.status?this._source.fire(new _.j(g,{tile:s})):this.update(this.transform,this.terrain));s.timeAdded=_.h.now(),"expired"===p&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),"raster-dem"===this.getSource().type&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new _.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const d=this.getRenderableIds();for(let g=0;g<d.length;g++){const x=d[g];if(s.neighboringTiles&&s.neighboringTiles[x]){const T=this.getTileByID(x);p(s,T),p(T,s)}}function p(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let T=x.tileID.canonical.x-g.tileID.canonical.x;const k=x.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),A=x.tileID.key;0===T&&0===k||Math.abs(k)>1||(Math.abs(T)>1&&(1===Math.abs(T+M)?T+=M:1===Math.abs(T-M)&&(T-=M)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,T,k),g.neighboringTiles&&g.neighboringTiles[A]&&(g.neighboringTiles[A].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,p,g){for(const x in this._tiles){let T=this._tiles[x];if(g[x]||!T.hasData()||T.tileID.overscaledZ<=d||T.tileID.overscaledZ>p)continue;let k=T.tileID;for(;T&&T.tileID.overscaledZ>d+1;){const A=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[A.key],T&&T.hasData()&&(k=A)}let M=k;for(;M.overscaledZ>d;)if(M=M.scaledTo(M.overscaledZ-1),s[M.key]){g[k.key]=k;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){const p=this._loadedParentTiles[s.key];return p&&p.tileID.overscaledZ>=d?p:null}for(let p=s.overscaledZ-1;p>=d;p--){const g=s.scaledTo(p),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(s){const d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const d=Math.ceil(s.width/this._source.tileSize)+1,p=Math.ceil(s.height/this._source.tileSize)+1,g=Math.floor(d*p*(null===this._maxTileCacheZoomLevels?_.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(s){const d=Math.round((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,d){const p={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+d),p[x.tileID.key]=x}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(s,d){if(this.transform=s,this.terrain=d,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new _.O(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(p=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(p=p.filter(R=>this._source.hasTile(R)))):p=[];const g=s.coveringZoomLevel(this._source),x=Math.max(g-Qr.maxOverzooming,this._source.minzoom),T=Math.max(g+Qr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const O of p)if(O.canonical.z>this._source.minzoom){const V=O.scaledTo(O.canonical.z-1);R[V.key]=V;const Z=O.scaledTo(Math.max(this._source.minzoom,Math.min(O.canonical.z,5)));R[Z.key]=Z}p=p.concat(Object.values(R))}const k=0===p.length&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new _.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(p,g);if(bn(this._source.type)){const R={},O={},V=Object.keys(M),Z=_.h.now();for(const q of V){const Q=M[q],$=this._tiles[q];if(!$||0!==$.fadeEndTime&&$.fadeEndTime<=Z)continue;const ae=this.findLoadedParent(Q,x);ae&&(this._addTile(ae.tileID),R[ae.tileID.key]=ae.tileID),O[q]=Q}this._retainLoadedChildren(O,g,T,M);for(const q in R)M[q]||(this._coveredTiles[q]=!0,M[q]=R[q]);if(d){const q={},Q={};for(const $ of p)this._tiles[$.key].hasData()?q[$.key]=$:Q[$.key]=$;for(const $ in Q){const ae=Q[$].children(this._source.maxzoom);this._tiles[ae[0].key]&&this._tiles[ae[1].key]&&this._tiles[ae[2].key]&&this._tiles[ae[3].key]&&(q[ae[0].key]=M[ae[0].key]=ae[0],q[ae[1].key]=M[ae[1].key]=ae[1],q[ae[2].key]=M[ae[2].key]=ae[2],q[ae[3].key]=M[ae[3].key]=ae[3],delete Q[$])}for(const $ in Q){const ae=this.findLoadedParent(Q[$],this._source.minzoom);if(ae){q[ae.tileID.key]=M[ae.tileID.key]=ae.tileID;for(const fe in q)q[fe].isChildOf(ae.tileID)&&delete q[fe]}}for(const $ in this._tiles)q[$]||(this._coveredTiles[$]=!0)}}for(const R in M)this._tiles[R].clearFadeHold();const A=_.ab(this._tiles,M);for(const R of A){const O=this._tiles[R];O.hasSymbolBuckets&&!O.holdingForFade()?O.setHoldDuration(this.map._fadeDuration):O.hasSymbolBuckets&&!O.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){const p={},g={},x=Math.max(d-Qr.maxOverzooming,this._source.minzoom),T=Math.max(d+Qr.maxUnderzooming,this._source.minzoom),k={};for(const M of s){const A=this._addTile(M);p[M.key]=M,A.hasData()||d<this._source.maxzoom&&(k[M.key]=M)}this._retainLoadedChildren(k,d,T,p);for(const M of s){let A=this._tiles[M.key];if(A.hasData())continue;if(d+1>this._source.maxzoom){const O=M.children(this._source.maxzoom)[0],V=this.getTile(O);if(V&&V.hasData()){p[O.key]=O;continue}}else{const O=M.children(this._source.maxzoom);if(p[O[0].key]&&p[O[1].key]&&p[O[2].key]&&p[O[3].key])continue}let R=A.wasRequested();for(let O=M.overscaledZ-1;O>=x;--O){const V=M.scaledTo(O);if(g[V.key])break;if(g[V.key]=!0,A=this.getTile(V),!A&&R&&(A=this._addTile(V)),A){const Z=A.hasData();if((R||Z)&&(p[V.key]=V),R=A.wasRequested(),Z)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const d=[];let p,g=this._tiles[s].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}d.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;g=x}for(const x of d)this._loadedParentTiles[x]=p}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));const p=d;return d||(d=new Ea(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,s.key,d.state))),d.uses++,this._tiles[s.key]=d,p||this._source.fire(new _.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const p=d.getExpiryTimeout();p&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},p))}_removeTile(s){const d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&"reloading"!==d.state?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,p){const g=[],x=this.transform;if(!x)return g;const T=p?x.getCameraQueryGeometry(s):s,k=s.map(q=>x.pointCoordinate(q,this.terrain)),M=T.map(q=>x.pointCoordinate(q,this.terrain)),A=this.getIds();let R=1/0,O=1/0,V=-1/0,Z=-1/0;for(const q of M)R=Math.min(R,q.x),O=Math.min(O,q.y),V=Math.max(V,q.x),Z=Math.max(Z,q.y);for(let q=0;q<A.length;q++){const Q=this._tiles[A[q]];if(Q.holdingForFade())continue;const $=Q.tileID,ae=Math.pow(2,x.zoom-Q.tileID.overscaledZ),fe=d*Q.queryPadding*_.N/Q.tileSize/ae,te=[$.getTilePoint(new _.U(R,O)),$.getTilePoint(new _.U(V,Z))];if(te[0].x-fe<_.N&&te[0].y-fe<_.N&&te[1].x+fe>=0&&te[1].y+fe>=0){const de=k.map(ve=>$.getTilePoint(ve)),_e=M.map(ve=>$.getTilePoint(ve));g.push({tile:Q,tileID:$,queryGeometry:de,cameraQueryGeometry:_e,scale:ae})}}return g}getVisibleCoordinates(s){const d=this.getRenderableIds(s).map(p=>this._tiles[p].tileID);for(const p of d)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(bn(this._source.type)){const s=_.h.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setFeatureState(s,d,p){this._state.updateState(s=s||"_geojsonTileLayer",d,p)}removeFeatureState(s,d,p){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,p)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,p){const g=this._tiles[s];g&&g.setDependencies(d,p)}reloadTilesForDependencies(s,d){for(const p in this._tiles)this._tiles[p].hasDependency(s,d)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(s,d))}}function co(v,s){const d=Math.abs(2*v.wrap)-+(v.wrap<0),p=Math.abs(2*s.wrap)-+(s.wrap<0);return v.overscaledZ-s.overscaledZ||p-d||s.canonical.y-v.canonical.y||s.canonical.x-v.canonical.x}function bn(v){return"raster"===v||"image"===v||"video"===v}Qr.maxOverzooming=10,Qr.maxUnderzooming=3;const nn="mapboxgl_preloaded_worker_pool";class uo{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<uo.workerCount;)this.workers.push(new Worker(_.c.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nn]}numActive(){return Object.keys(this.active).length}}const yl=Math.floor(_.h.hardwareConcurrency/2);let Ao;function tc(){return Ao||(Ao=new uo),Ao}uo.workerCount=_.ac(globalThis)?Math.max(Math.min(yl,3),1):1;class bl{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(1===this.points.length)return this.points[0];s=_.ad(s,0,1);let d=1,p=this._distances[d];const g=s*this.paddedLength+this.padding;for(;p<g&&d<this._distances.length;)p=this._distances[++d];const x=d-1,T=this._distances[x],k=p-T,M=k>0?(g-T)/k:0;return this.points[x].mult(1-M).add(this.points[d].mult(M))}}function Qs(v,s){let d=!0;return"always"===v||"never"!==v&&"never"!==s||(d=!1),d}class Ma{constructor(s,d,p){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(s/p),this.yCellCount=Math.ceil(d/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,p,g,x){this._forEachCell(d,p,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(s,d,p,g){this._forEachCell(d-g,p-g,d+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(p),this.circles.push(g)}_insertBoxCell(s,d,p,g,x,T){this.boxCells[x].push(T)}_insertCircleCell(s,d,p,g,x,T){this.circleCells[x].push(T)}_query(s,d,p,g,x,T,k){if(p<0||s>this.width||g<0||d>this.height)return[];const M=[];if(s<=0&&d<=0&&this.width<=p&&this.height<=g){if(x)return[{key:null,x1:s,y1:d,x2:p,y2:g}];for(let A=0;A<this.boxKeys.length;A++)M.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){const R=this.circles[3*A],O=this.circles[3*A+1],V=this.circles[3*A+2];M.push({key:this.circleKeys[A],x1:R-V,y1:O-V,x2:R+V,y2:O+V})}}else this._forEachCell(s,d,p,g,this._queryCell,M,{hitTest:x,overlapMode:T,seenUids:{box:{},circle:{}}},k);return M}query(s,d,p,g){return this._query(s,d,p,g,!1,null)}hitTest(s,d,p,g,x,T){return this._query(s,d,p,g,!0,x,T).length>0}hitTestCircle(s,d,p,g,x){const T=s-p,k=s+p,M=d-p,A=d+p;if(k<0||T>this.width||A<0||M>this.height)return!1;const R=[];return this._forEachCell(T,M,k,A,this._queryCellCircle,R,{hitTest:!0,overlapMode:g,circle:{x:s,y:d,radius:p},seenUids:{box:{},circle:{}}},x),R.length>0}_queryCell(s,d,p,g,x,T,k,M){const{seenUids:A,hitTest:R,overlapMode:O}=k,V=this.boxCells[x];if(null!==V){const q=this.bboxes;for(const Q of V)if(!A.box[Q]){A.box[Q]=!0;const $=4*Q,ae=this.boxKeys[Q];if(s<=q[$+2]&&d<=q[$+3]&&p>=q[$+0]&&g>=q[$+1]&&(!M||M(ae))&&(!R||!Qs(O,ae.overlapMode))&&(T.push({key:ae,x1:q[$],y1:q[$+1],x2:q[$+2],y2:q[$+3]}),R))return!0}}const Z=this.circleCells[x];if(null!==Z){const q=this.circles;for(const Q of Z)if(!A.circle[Q]){A.circle[Q]=!0;const $=3*Q,ae=this.circleKeys[Q];if(this._circleAndRectCollide(q[$],q[$+1],q[$+2],s,d,p,g)&&(!M||M(ae))&&(!R||!Qs(O,ae.overlapMode))){const fe=q[$],te=q[$+1],de=q[$+2];if(T.push({key:ae,x1:fe-de,y1:te-de,x2:fe+de,y2:te+de}),R)return!0}}}return!1}_queryCellCircle(s,d,p,g,x,T,k,M){const{circle:A,seenUids:R,overlapMode:O}=k,V=this.boxCells[x];if(null!==V){const q=this.bboxes;for(const Q of V)if(!R.box[Q]){R.box[Q]=!0;const $=4*Q,ae=this.boxKeys[Q];if(this._circleAndRectCollide(A.x,A.y,A.radius,q[$+0],q[$+1],q[$+2],q[$+3])&&(!M||M(ae))&&!Qs(O,ae.overlapMode))return T.push(!0),!0}}const Z=this.circleCells[x];if(null!==Z){const q=this.circles;for(const Q of Z)if(!R.circle[Q]){R.circle[Q]=!0;const $=3*Q,ae=this.circleKeys[Q];if(this._circlesCollide(q[$],q[$+1],q[$+2],A.x,A.y,A.radius)&&(!M||M(ae))&&!Qs(O,ae.overlapMode))return T.push(!0),!0}}}_forEachCell(s,d,p,g,x,T,k,M){const A=this._convertToXCellCoord(s),R=this._convertToYCellCoord(d),O=this._convertToXCellCoord(p),V=this._convertToYCellCoord(g);for(let Z=A;Z<=O;Z++)for(let q=R;q<=V;q++)if(x.call(this,s,d,p,g,this.xCellCount*q+Z,T,k,M))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,p,g,x,T){const k=g-s,M=x-d,A=p+T;return A*A>k*k+M*M}_circleAndRectCollide(s,d,p,g,x,T,k){const M=(T-g)/2,A=Math.abs(s-(g+M));if(A>M+p)return!1;const R=(k-x)/2,O=Math.abs(d-(x+R));if(O>R+p)return!1;if(A<=M||O<=R)return!0;const V=A-M,Z=O-R;return V*V+Z*Z<=p*p}}function Fe(v,s,d,p,g){const x=_.Z();return s?(_.a0(x,x,[1/g,1/g,1]),d||_.ae(x,x,p.angle)):_.a1(x,p.labelPlaneMatrix,v),x}function Po(v,s,d,p,g){if(s){const x=_.af(v);return _.a0(x,x,[g,g,1]),d||_.ae(x,x,-p.angle),x}return p.glCoordMatrix}function ni(v,s,d){let p;d?(p=[v.x,v.y,d(v.x,v.y),1],_.ag(p,p,s)):(p=[v.x,v.y,0,1],Y(p,p,s));const g=p[3];return{point:new _.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function Ys(v,s){return.5+v/s*.5}function bs(v,s){const d=v[0]/v[3],p=v[1]/v[3];return d>=-s[0]&&d<=s[0]&&p>=-s[1]&&p<=s[1]}function He(v,s,d,p,g,x,T,k,M,A){const R=p?v.textSizeData:v.iconSizeData,O=_.ah(R,d.transform.zoom),V=[256/d.width*2+1,256/d.height*2+1],Z=p?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Z.clear();const q=v.lineVertexArray,Q=p?v.text.placedSymbolArray:v.icon.placedSymbolArray,$=d.transform.width/d.transform.height;let ae=!1;for(let fe=0;fe<Q.length;fe++){const te=Q.get(fe);if(te.hidden||te.writingMode===_.ai.vertical&&!ae){G(te.numGlyphs,Z);continue}let de;if(ae=!1,A?(de=[te.anchorX,te.anchorY,A(te.anchorX,te.anchorY),1],_.ag(de,de,s)):(de=[te.anchorX,te.anchorY,0,1],Y(de,de,s)),!bs(de,V)){G(te.numGlyphs,Z);continue}const _e=Ys(d.transform.cameraToCenterDistance,de[3]),ve=_.aj(R,O,te),Te=T?ve/_e:ve*_e,Ae=new _.P(te.anchorX,te.anchorY),Ie=ni(Ae,g,A).point,ze={projections:{},offsets:{}},$e=Sr(te,Te,!1,k,s,g,x,v.glyphOffsetArray,q,Z,Ie,Ae,ze,$,M,A);ae=$e.useVertical,($e.notEnoughRoom||ae||$e.needsFlipping&&Sr(te,Te,!0,k,s,g,x,v.glyphOffsetArray,q,Z,Ie,Ae,ze,$,M,A).notEnoughRoom)&&G(te.numGlyphs,Z)}p?v.text.dynamicLayoutVertexBuffer.updateData(Z):v.icon.dynamicLayoutVertexBuffer.updateData(Z)}function Ot(v,s,d,p,g,x,T,k,M,A,R,O,V){const Z=k.glyphStartIndex+k.numGlyphs,q=k.lineStartIndex,Q=k.lineStartIndex+k.lineLength,$=s.getoffsetX(k.glyphStartIndex),ae=s.getoffsetX(Z-1),fe=L(v*$,d,p,g,x,T,k.segment,q,Q,M,A,R,O,V);if(!fe)return null;const te=L(v*ae,d,p,g,x,T,k.segment,q,Q,M,A,R,O,V);return te?{first:fe,last:te}:null}function xt(v,s,d,p){return v===_.ai.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*p?{useVertical:!0}:(v===_.ai.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function Sr(v,s,d,p,g,x,T,k,M,A,R,O,V,Z,q,Q){const $=s/24,ae=v.lineOffsetX*$,fe=v.lineOffsetY*$;let te;if(v.numGlyphs>1){const de=v.glyphStartIndex+v.numGlyphs,_e=v.lineStartIndex,ve=v.lineStartIndex+v.lineLength,Te=Ot($,k,ae,fe,d,R,O,v,M,x,V,q,Q);if(!Te)return{notEnoughRoom:!0};const Ae=ni(Te.first.point,T,Q).point,Ie=ni(Te.last.point,T,Q).point;if(p&&!d){const ze=xt(v.writingMode,Ae,Ie,Z);if(ze)return ze}te=[Te.first];for(let ze=v.glyphStartIndex+1;ze<de-1;ze++)te.push(L($*k.getoffsetX(ze),ae,fe,d,R,O,v.segment,_e,ve,M,x,V,q,Q));te.push(Te.last)}else{if(p&&!d){const _e=ni(O,g,Q).point,ve=v.lineStartIndex+v.segment+1,Te=new _.P(M.getx(ve),M.gety(ve)),Ae=ni(Te,g,Q),Ie=Ae.signedDistanceFromCamera>0?Ae.point:ns(O,Te,_e,1,g,Q),ze=xt(v.writingMode,_e,Ie,Z);if(ze)return ze}const de=L($*k.getoffsetX(v.glyphStartIndex),ae,fe,d,R,O,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,M,x,V,q,Q);if(!de)return{notEnoughRoom:!0};te=[de]}for(const de of te)_.ak(A,de.point,de.angle);return{}}function ns(v,s,d,p,g,x){const T=ni(v.add(v.sub(s)._unit()),g,x).point,k=d.sub(T);return d.add(k._mult(p/k.mag()))}function Dt(v,s){const{projectionCache:d,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:T,getElevation:k,previousVertex:M,direction:A,absOffsetX:R}=s;if(d.projections[v])return d.projections[v];const O=new _.P(p.getx(v),p.gety(v)),V=ni(O,g,k);if(V.signedDistanceFromCamera>0)return d.projections[v]=V.point,V.point;const Z=v-A;return ns(0===T?x:new _.P(p.getx(Z),p.gety(Z)),O,M,R-T+1,g,k)}function xs(v,s,d){return v._unit()._perp()._mult(s*d)}function X(v,s,d,p,g,x,T,k){const{projectionCache:M,direction:A}=k;if(M.offsets[v])return M.offsets[v];const R=d.add(s);if(v+A<p||v+A>=g)return M.offsets[v]=R,R;const O=Dt(v+A,k),V=xs(O.sub(d),T,A),Z=d.add(V),q=O.add(V);return M.offsets[v]=_.al(x,R,Z,q)||R,M.offsets[v]}function L(v,s,d,p,g,x,T,k,M,A,R,O,V,Z){const q=p?v-s:v+s;let Q=q>0?1:-1,$=0;p&&(Q*=-1,$=Math.PI),Q<0&&($+=Math.PI);let ae,fe,te=Q>0?k+T:k+T+1,de=g,_e=g,ve=0,Te=0;const Ae=Math.abs(q),Ie=[];let ze;for(;ve+Te<=Ae;){if(te+=Q,te<k||te>=M)return null;ve+=Te,_e=de,fe=ae;const Ne={projectionCache:O,lineVertexArray:A,labelPlaneMatrix:R,tileAnchorPoint:x,distanceFromAnchor:ve,getElevation:Z,previousVertex:_e,direction:Q,absOffsetX:Ae};if(de=Dt(te,Ne),0===d)Ie.push(_e),ze=de.sub(_e);else{let ht;const ot=de.sub(_e);ht=0===ot.mag()?xs(Dt(te+Q,Ne).sub(de),d,Q):xs(ot,d,Q),fe||(fe=_e.add(ht)),ae=X(te,ht,de,k,M,fe,d,Ne),Ie.push(fe),ze=ae.sub(fe)}Te=ze.mag()}const $e=ze._mult((Ae-ve)/Te)._add(fe||_e),Lt=$+Math.atan2(de.y-_e.y,de.x-_e.x);return Ie.push($e),{point:$e,angle:V?Lt:0,path:Ie}}const B=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function G(v,s){for(let d=0;d<v;d++){const p=s.length;s.resize(p+4),s.float32.set(B,3*p)}}function Y(v,s,d){const p=s[0],g=s[1];return v[0]=d[0]*p+d[4]*g+d[12],v[1]=d[1]*p+d[5]*g+d[13],v[3]=d[3]*p+d[7]*g+d[15],v}const ee=100;class he{constructor(s,d=new Ma(s.width+200,s.height+200,25),p=new Ma(s.width+200,s.height+200,25)){this.transform=s,this.grid=d,this.ignoredGrid=p,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+ee,this.screenBottomBoundary=s.height+ee,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,p,g,x,T){const k=this.projectAndGetPerspectiveRatio(g,s.anchorPointX,s.anchorPointY,T),M=p*k.perspectiveRatio,A=s.x1*M+k.point.x,R=s.y1*M+k.point.y,O=s.x2*M+k.point.x,V=s.y2*M+k.point.y;return!this.isInsideGrid(A,R,O,V)||"always"!==d&&this.grid.hitTest(A,R,O,V,d,x)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[A,R,O,V],offscreen:this.isOffscreen(A,R,O,V)}}placeCollisionCircles(s,d,p,g,x,T,k,M,A,R,O,V,Z,q){const Q=[],$=new _.P(d.anchorX,d.anchorY),ae=ni($,T,q),fe=Ys(this.transform.cameraToCenterDistance,ae.signedDistanceFromCamera),te=(R?x/fe:x*fe)/_.ap,de=ni($,k,q).point,_e=Ot(te,g,d.lineOffsetX*te,d.lineOffsetY*te,!1,de,$,d,p,k,{projections:{},offsets:{}},!1,q);let ve=!1,Te=!1,Ae=!0;if(_e){const Ie=.5*V*fe+Z,ze=new _.P(-100,-100),$e=new _.P(this.screenRightBoundary,this.screenBottomBoundary),Lt=new bl,Ne=_e.first,ht=_e.last;let ot=[];for(let Et=Ne.path.length-1;Et>=1;Et--)ot.push(Ne.path[Et]);for(let Et=1;Et<ht.path.length;Et++)ot.push(ht.path[Et]);const gn=2.5*Ie;if(M){const Et=ot.map(Vt=>ni(Vt,M,q));ot=Et.some(Vt=>Vt.signedDistanceFromCamera<=0)?[]:Et.map(Vt=>Vt.point)}let zt=[];if(ot.length>0){const Et=ot[0].clone(),Vt=ot[0].clone();for(let Yn=1;Yn<ot.length;Yn++)Et.x=Math.min(Et.x,ot[Yn].x),Et.y=Math.min(Et.y,ot[Yn].y),Vt.x=Math.max(Vt.x,ot[Yn].x),Vt.y=Math.max(Vt.y,ot[Yn].y);zt=Et.x>=ze.x&&Vt.x<=$e.x&&Et.y>=ze.y&&Vt.y<=$e.y?[ot]:Vt.x<ze.x||Et.x>$e.x||Vt.y<ze.y||Et.y>$e.y?[]:_.am([ot],ze.x,ze.y,$e.x,$e.y)}for(const Et of zt){Lt.reset(Et,.25*Ie);let Vt=0;Vt=Lt.length<=.5*Ie?1:Math.ceil(Lt.paddedLength/gn)+1;for(let Yn=0;Yn<Vt;Yn++){const Sn=Yn/Math.max(Vt-1,1),Vi=Lt.lerp(Sn),Ti=Vi.x+ee,di=Vi.y+ee;Q.push(Ti,di,Ie,0);const lr=Ti-Ie,_n=di-Ie,Mr=Ti+Ie,Vo=di+Ie;if(Ae=Ae&&this.isOffscreen(lr,_n,Mr,Vo),Te=Te||this.isInsideGrid(lr,_n,Mr,Vo),"always"!==s&&this.grid.hitTestCircle(Ti,di,Ie,s,O)&&(ve=!0,!A))return{circles:[],offscreen:!1,collisionDetected:ve}}}}return{circles:!A&&ve||!Te||fe<this.perspectiveRatioCutoff?[]:Q,offscreen:Ae,collisionDetected:ve}}queryRenderedSymbols(s){if(0===s.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let p=1/0,g=1/0,x=-1/0,T=-1/0;for(const R of s){const O=new _.P(R.x+ee,R.y+ee);p=Math.min(p,O.x),g=Math.min(g,O.y),x=Math.max(x,O.x),T=Math.max(T,O.y),d.push(O)}const k=this.grid.query(p,g,x,T).concat(this.ignoredGrid.query(p,g,x,T)),M={},A={};for(const R of k){const O=R.key;if(void 0===M[O.bucketInstanceId]&&(M[O.bucketInstanceId]={}),M[O.bucketInstanceId][O.featureIndex])continue;const V=[new _.P(R.x1,R.y1),new _.P(R.x2,R.y1),new _.P(R.x2,R.y2),new _.P(R.x1,R.y2)];_.an(d,V)&&(M[O.bucketInstanceId][O.featureIndex]=!0,void 0===A[O.bucketInstanceId]&&(A[O.bucketInstanceId]=[]),A[O.bucketInstanceId].push(O.featureIndex))}return A}insertCollisionBox(s,d,p,g,x,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:T,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,p,g,x,T){const k=p?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:x,collisionGroupID:T,overlapMode:d};for(let A=0;A<s.length;A+=4)k.insertCircle(M,s[A],s[A+1],s[A+2])}projectAndGetPerspectiveRatio(s,d,p,g){let x;return g?(x=[d,p,g(d,p),1],_.ag(x,x,s)):(x=[d,p,0,1],Y(x,x,s)),{point:new _.P((x[0]/x[3]+1)/2*this.transform.width+ee,(-x[1]/x[3]+1)/2*this.transform.height+ee),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(s,d,p,g){return p<ee||s>=this.screenRightBoundary||g<ee||d>this.screenBottomBoundary}isInsideGrid(s,d,p,g){return p>=0&&s<this.gridRightBoundary&&g>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=_.ao([]);return _.$(s,s,[-100,-100,0]),s}}function se(v,s,d){return s*(_.N/(v.tileSize*Math.pow(2,d-v.tileID.overscaledZ)))}class ie{constructor(s,d,p,g){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):g&&p?1:0,this.placed=p}isHidden(){return 0===this.opacity&&!this.placed}}class ce{constructor(s,d,p,g,x){this.text=new ie(s?s.text:null,d,p,x),this.icon=new ie(s?s.icon:null,d,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ce{constructor(s,d,p){this.text=s,this.icon=d,this.skipFade=p}}class ke{constructor(){this.invProjMatrix=_.Z(),this.viewportMatrix=_.Z(),this.circles=[]}}class Me{constructor(s,d,p,g,x){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=x}}class Xe{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:p=>p.collisionGroupID===d}}return this.collisionGroups[s]}}function _t(v,s,d,p,g){const{horizontalAlign:x,verticalAlign:T}=_.au(v);return new _.P(-(x-.5)*s+p[0]*g,-(T-.5)*d+p[1]*g)}function it(v,s,d,p,g,x){const{x1:T,x2:k,y1:M,y2:A,anchorPointX:R,anchorPointY:O}=v,V=new _.P(s,d);return p&&V._rotate(g?x:-x),{x1:T+V.x,y1:M+V.y,x2:k+V.x,y2:A+V.y,anchorPointX:R,anchorPointY:O}}class dt{constructor(s,d,p,g,x){this.transform=s.clone(),this.terrain=d,this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Xe(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,d,p,g){const x=p.getBucket(d),T=p.latestFeatureIndex;if(!x||!T||d.id!==x.layerIds[0])return;const k=p.collisionBoxArray,M=x.layers[0].layout,A=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),R=p.tileSize/_.N,O=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),V="map"===M.get("text-pitch-alignment"),Z="map"===M.get("text-rotation-alignment"),q=se(p,1,this.transform.zoom),Q=Fe(O,V,Z,this.transform,q);let $=null;if(V){const fe=Po(O,V,Z,this.transform,q);$=_.a1([],this.transform.labelPlaneMatrix,fe)}this.retainedQueryData[x.bucketInstanceId]=new Me(x.bucketInstanceId,T,x.sourceLayerIndex,x.index,p.tileID);const ae={bucket:x,layout:M,posMatrix:O,textLabelPlaneMatrix:Q,labelToScreenMatrix:$,scale:A,textPixelRatio:R,holdingForFade:p.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:_.ah(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const fe of x.sortKeyRanges){const{sortKey:te,symbolInstanceStart:de,symbolInstanceEnd:_e}=fe;s.push({sortKey:te,symbolInstanceStart:de,symbolInstanceEnd:_e,parameters:ae})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ae})}attemptAnchorPlacement(s,d,p,g,x,T,k,M,A,R,O,V,Z,q,Q,$){const ae=_.aq[s.textAnchor],fe=[s.textOffset0,s.textOffset1],te=_t(ae,p,g,fe,x),de=this.collisionIndex.placeCollisionBox(it(d,te.x,te.y,T,k,this.transform.angle),O,M,A,R.predicate,$);if((!Q||0!==this.collisionIndex.placeCollisionBox(it(Q,te.x,te.y,T,k,this.transform.angle),O,M,A,R.predicate,$).box.length)&&de.box.length>0){let _e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID].text&&(_e=this.prevPlacement.variableOffsets[V.crossTileID].anchor),0===V.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[V.crossTileID]={textOffset:fe,width:p,height:g,anchor:ae,textBoxScale:x,prevAnchor:_e},this.markUsedJustification(Z,ae,V,q),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,q,V),this.placedOrientations[V.crossTileID]=q),{shift:te,placedGlyphBoxes:de}}}placeLayerBucketPart(s,d,p){const{bucket:g,layout:x,posMatrix:T,textLabelPlaneMatrix:k,labelToScreenMatrix:M,textPixelRatio:A,holdingForFade:R,collisionBoxArray:O,partiallyEvaluatedTextSize:V,collisionGroup:Z}=s.parameters,q=x.get("text-optional"),Q=x.get("icon-optional"),$=_.ar(x,"text-overlap","text-allow-overlap"),ae="always"===$,fe=_.ar(x,"icon-overlap","icon-allow-overlap"),te="always"===fe,de="map"===x.get("text-rotation-alignment"),_e="map"===x.get("text-pitch-alignment"),ve="none"!==x.get("icon-text-fit"),Te="viewport-y"===x.get("symbol-z-order"),Ae=ae&&(te||!g.hasIconData()||Q),Ie=te&&(ae||!g.hasTextData()||q);!g.collisionArrays&&O&&g.deserializeCollisionBoxes(O);const ze=this.retainedQueryData[g.bucketInstanceId].tileID,$e=this.terrain?(Ne,ht)=>this.terrain.getElevation(ze,Ne,ht):null,Lt=(Ne,ht)=>{var ot,gn;if(d[Ne.crossTileID])return;if(R)return void(this.placements[Ne.crossTileID]=new Ce(!1,!1,!1));let zt=!1,Et=!1,Vt=!0,Yn=null,Sn={box:null,offscreen:null},Vi={box:null,offscreen:null},Ti=null,di=null,lr=null,_n=0,Mr=0,Vo=0;ht.textFeatureIndex?_n=ht.textFeatureIndex:Ne.useRuntimeCollisionCircles&&(_n=Ne.featureIndex),ht.verticalTextFeatureIndex&&(Mr=ht.verticalTextFeatureIndex);const Ha=ht.textBox;if(Ha){const cr=Jn=>{let Ai=_.ai.horizontal;if(g.allowVerticalPlacement&&!Jn&&this.prevPlacement){const dr=this.prevPlacement.placedOrientations[Ne.crossTileID];dr&&(this.placedOrientations[Ne.crossTileID]=dr,Ai=dr,this.markUsedOrientation(g,Ai,Ne))}return Ai},Yi=(Jn,Ai)=>{if(g.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&ht.verticalTextBox){for(const dr of g.writingModes)if(dr===_.ai.vertical?(Sn=Ai(),Vi=Sn):Sn=Jn(),Sn&&Sn.box&&Sn.box.length)break}else Sn=Jn()},Ur=Ne.textAnchorOffsetStartIndex,la=Ne.textAnchorOffsetEndIndex;if(la===Ur){const Jn=(Ai,dr)=>{const _i=this.collisionIndex.placeCollisionBox(Ai,$,A,T,Z.predicate,$e);return _i&&_i.box&&_i.box.length&&(this.markUsedOrientation(g,dr,Ne),this.placedOrientations[Ne.crossTileID]=dr),_i};Yi(()=>Jn(Ha,_.ai.horizontal),()=>{const Ai=ht.verticalTextBox;return g.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&Ai?Jn(Ai,_.ai.vertical):{box:null,offscreen:null}}),cr(Sn&&Sn.box&&Sn.box.length)}else{let Jn=_.aq[null===(gn=null===(ot=this.prevPlacement)||void 0===ot?void 0:ot.variableOffsets[Ne.crossTileID])||void 0===gn?void 0:gn.anchor];const Ai=(_i,Ol,gd)=>{const yu=_i.x2-_i.x1,bu=_i.y2-_i.y1,gm=Ne.textBoxScale,xu=ve&&"never"===fe?Ol:null;let os={box:[],offscreen:!1},ca="never"===$?1:2,ss="never";Jn&&ca++;for(let io=0;io<ca;io++){for(let as=Ur;as<la;as++){const Oh=g.textAnchorOffsets.get(as);if(Jn&&Oh.textAnchor!==Jn)continue;const Ps=this.attemptAnchorPlacement(Oh,_i,yu,bu,gm,de,_e,A,T,Z,ss,Ne,g,gd,xu,$e);if(Ps&&(os=Ps.placedGlyphBoxes,os&&os.box&&os.box.length))return zt=!0,Yn=Ps.shift,os}Jn?Jn=null:ss=$}return os};Yi(()=>Ai(Ha,ht.iconBox,_.ai.horizontal),()=>{const _i=ht.verticalTextBox;return g.allowVerticalPlacement&&!(Sn&&Sn.box&&Sn.box.length)&&Ne.numVerticalGlyphVertices>0&&_i?Ai(_i,ht.verticalIconBox,_.ai.vertical):{box:null,offscreen:null}}),Sn&&(zt=Sn.box,Vt=Sn.offscreen);const dr=cr(Sn&&Sn.box);if(!zt&&this.prevPlacement){const _i=this.prevPlacement.variableOffsets[Ne.crossTileID];_i&&(this.variableOffsets[Ne.crossTileID]=_i,this.markUsedJustification(g,_i.anchor,Ne,dr))}}}if(Ti=Sn,zt=Ti&&Ti.box&&Ti.box.length>0,Vt=Ti&&Ti.offscreen,Ne.useRuntimeCollisionCircles){const cr=g.text.placedSymbolArray.get(Ne.centerJustifiedTextSymbolIndex),Yi=_.aj(g.textSizeData,V,cr),Ur=x.get("text-padding");di=this.collisionIndex.placeCollisionCircles($,cr,g.lineVertexArray,g.glyphOffsetArray,Yi,T,k,M,p,_e,Z.predicate,Ne.collisionCircleDiameter,Ur,$e),di.circles.length&&di.collisionDetected&&!p&&_.w("Collisions detected, but collision boxes are not shown"),zt=ae||di.circles.length>0&&!di.collisionDetected,Vt=Vt&&di.offscreen}if(ht.iconFeatureIndex&&(Vo=ht.iconFeatureIndex),ht.iconBox){const cr=Yi=>{const Ur=ve&&Yn?it(Yi,Yn.x,Yn.y,de,_e,this.transform.angle):Yi;return this.collisionIndex.placeCollisionBox(Ur,fe,A,T,Z.predicate,$e)};Vi&&Vi.box&&Vi.box.length&&ht.verticalIconBox?(lr=cr(ht.verticalIconBox),Et=lr.box.length>0):(lr=cr(ht.iconBox),Et=lr.box.length>0),Vt=Vt&&lr.offscreen}const Rl=q||0===Ne.numHorizontalGlyphVertices&&0===Ne.numVerticalGlyphVertices,bc=Q||0===Ne.numIconVertices;if(Rl||bc?bc?Rl||(Et=Et&&zt):zt=Et&&zt:Et=zt=Et&&zt,zt&&Ti&&Ti.box&&this.collisionIndex.insertCollisionBox(Ti.box,$,x.get("text-ignore-placement"),g.bucketInstanceId,Vi&&Vi.box&&Mr?Mr:_n,Z.ID),Et&&lr&&this.collisionIndex.insertCollisionBox(lr.box,fe,x.get("icon-ignore-placement"),g.bucketInstanceId,Vo,Z.ID),di&&(zt&&this.collisionIndex.insertCollisionCircles(di.circles,$,x.get("text-ignore-placement"),g.bucketInstanceId,_n,Z.ID),p)){const cr=g.bucketInstanceId;let Yi=this.collisionCircleArrays[cr];void 0===Yi&&(Yi=this.collisionCircleArrays[cr]=new ke);for(let Ur=0;Ur<di.circles.length;Ur+=4)Yi.circles.push(di.circles[Ur+0]),Yi.circles.push(di.circles[Ur+1]),Yi.circles.push(di.circles[Ur+2]),Yi.circles.push(di.collisionDetected?1:0)}if(0===Ne.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===g.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ne.crossTileID]=new Ce(zt||Ae,Et||Ie,Vt||g.justReloaded),d[Ne.crossTileID]=!0};if(Te){if(0!==s.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Ne=g.getSortedSymbolIndexes(this.transform.angle);for(let ht=Ne.length-1;ht>=0;--ht){const ot=Ne[ht];Lt(g.symbolInstances.get(ot),g.collisionArrays[ot])}}else for(let Ne=s.symbolInstanceStart;Ne<s.symbolInstanceEnd;Ne++)Lt(g.symbolInstances.get(Ne),g.collisionArrays[Ne]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const Ne=this.collisionCircleArrays[g.bucketInstanceId];_.as(Ne.invProjMatrix,T),Ne.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(s,d,p,g){let x;x=g===_.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[_.at(d)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of T)k>=0&&(s.text.placedSymbolArray.get(k).crossTileID=x>=0&&k!==x?0:p.crossTileID)}markUsedOrientation(s,d,p){const g=d===_.ai.horizontal||d===_.ai.horizontalOnly?d:0,x=d===_.ai.vertical?d:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of T)s.text.placedSymbolArray.get(k).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let p=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const g=d?d.symbolFadeChange(s):1,x=d?d.opacities:{},T=d?d.variableOffsets:{},k=d?d.placedOrientations:{};for(const M in this.placements){const A=this.placements[M],R=x[M];R?(this.opacities[M]=new ce(R,g,A.text,A.icon),p=p||A.text!==R.text.placed||A.icon!==R.icon.placed):(this.opacities[M]=new ce(null,g,A.text,A.icon,A.skipFade),p=p||A.text||A.icon)}for(const M in x){const A=x[M];if(!this.opacities[M]){const R=new ce(A,g,!1,!1);R.isHidden()||(this.opacities[M]=R,p=p||A.text.placed||A.icon.placed)}}for(const M in T)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=T[M]);for(const M in k)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=k[M]);if(d&&void 0===d.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=s:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const p={};for(const g of d){const x=g.getBucket(s);x&&g.latestFeatureIndex&&s.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,g.collisionBoxArray)}}updateBucketOpacities(s,d,p){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const g=s.layers[0],x=g.layout,T=new ce(null,0,!1,!1,!0),k=x.get("text-allow-overlap"),M=x.get("icon-allow-overlap"),A=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),R="map"===x.get("text-rotation-alignment"),O="map"===x.get("text-pitch-alignment"),V="none"!==x.get("icon-text-fit"),Z=new ce(null,0,k&&(M||!s.hasIconData()||x.get("icon-optional")),M&&(k||!s.hasTextData()||x.get("text-optional")),!0);!s.collisionArrays&&p&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(p);const q=(Q,$,ae)=>{for(let fe=0;fe<$/4;fe++)Q.opacityVertexArray.emplaceBack(ae);Q.hasVisibleVertices=Q.hasVisibleVertices||ae!==Ro};for(let Q=0;Q<s.symbolInstances.length;Q++){const $=s.symbolInstances.get(Q),{numHorizontalGlyphVertices:ae,numVerticalGlyphVertices:fe,crossTileID:te}=$;let de=this.opacities[te];d[te]?de=T:de||(de=Z,this.opacities[te]=de),d[te]=!0;const _e=$.numIconVertices>0,ve=this.placedOrientations[$.crossTileID],Te=ve===_.ai.vertical,Ae=ve===_.ai.horizontal||ve===_.ai.horizontalOnly;if(ae>0||fe>0){const Ie=Ln(de.text);q(s.text,ae,Te?Ro:Ie),q(s.text,fe,Ae?Ro:Ie);const ze=de.text.isHidden();[$.rightJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.leftJustifiedTextSymbolIndex].forEach(Ne=>{Ne>=0&&(s.text.placedSymbolArray.get(Ne).hidden=ze||Te?1:0)}),$.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get($.verticalPlacedTextSymbolIndex).hidden=ze||Ae?1:0);const $e=this.variableOffsets[$.crossTileID];$e&&this.markUsedJustification(s,$e.anchor,$,ve);const Lt=this.placedOrientations[$.crossTileID];Lt&&(this.markUsedJustification(s,"left",$,Lt),this.markUsedOrientation(s,Lt,$))}if(_e){const Ie=Ln(de.icon),ze=!(V&&$.verticalPlacedIconSymbolIndex&&Te);$.placedIconSymbolIndex>=0&&(q(s.icon,$.numIconVertices,ze?Ie:Ro),s.icon.placedSymbolArray.get($.placedIconSymbolIndex).hidden=de.icon.isHidden()),$.verticalPlacedIconSymbolIndex>=0&&(q(s.icon,$.numVerticalIconVertices,ze?Ro:Ie),s.icon.placedSymbolArray.get($.verticalPlacedIconSymbolIndex).hidden=de.icon.isHidden())}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const Ie=s.collisionArrays[Q];if(Ie){let ze=new _.P(0,0);if(Ie.textBox||Ie.verticalTextBox){let Lt=!0;if(A){const Ne=this.variableOffsets[te];Ne?(ze=_t(Ne.anchor,Ne.width,Ne.height,Ne.textOffset,Ne.textBoxScale),R&&ze._rotate(O?this.transform.angle:-this.transform.angle)):Lt=!1}Ie.textBox&&wt(s.textCollisionBox.collisionVertexArray,de.text.placed,!Lt||Te,ze.x,ze.y),Ie.verticalTextBox&&wt(s.textCollisionBox.collisionVertexArray,de.text.placed,!Lt||Ae,ze.x,ze.y)}const $e=!(Ae||!Ie.verticalIconBox);Ie.iconBox&&wt(s.iconCollisionBox.collisionVertexArray,de.icon.placed,$e,V?ze.x:0,V?ze.y:0),Ie.verticalIconBox&&wt(s.iconCollisionBox.collisionVertexArray,de.icon.placed,!$e,V?ze.x:0,V?ze.y:0)}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const Q=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=Q.invProjMatrix,s.placementViewportMatrix=Q.viewportMatrix,s.collisionCircleArray=Q.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return 0===this.fadeDuration?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const p=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*p>s}setStale(){this.stale=!0}}function wt(v,s,d,p,g){v.emplaceBack(s?1:0,d?1:0,p||0,g||0),v.emplaceBack(s?1:0,d?1:0,p||0,g||0),v.emplaceBack(s?1:0,d?1:0,p||0,g||0),v.emplaceBack(s?1:0,d?1:0,p||0,g||0)}const an=Math.pow(2,25),xn=Math.pow(2,24),Yt=Math.pow(2,17),At=Math.pow(2,16),rr=Math.pow(2,9),Ft=Math.pow(2,8),Hn=Math.pow(2,1);function Ln(v){if(0===v.opacity&&!v.placed)return 0;if(1===v.opacity&&v.placed)return 4294967295;const s=v.placed?1:0,d=Math.floor(127*v.opacity);return d*an+s*xn+d*Yt+s*At+d*rr+s*Ft+d*Hn+s}const Ro=0;class _h{constructor(s){this._sortAcrossTiles="viewport-y"!==s.layout.get("symbol-z-order")&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,p,g,x){const T=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(T,g,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((k,M)=>k.sortKey-M.sortKey));this._currentPartIndex<T.length;)if(d.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class Da{constructor(s,d,p,g,x,T,k,M){this.placement=new dt(s,d,T,k,M),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(s,d,p){const g=_.h.now(),x=()=>!this._forceFullPlacement&&_.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const T=d[s[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if("symbol"===T.type&&(!T.minzoom||T.minzoom<=k)&&(!T.maxzoom||T.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new _h(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Js=512/_.N/2;class vh{constructor(s,d,p){this.tileID=s,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let x=0;x<d.length;x++){const T=d.get(x),k=T.key,M=g.get(k);M?M.push(T):g.set(k,[T])}for(const[x,T]of g){const k={positions:T.map(M=>({x:Math.floor(M.anchorX*Js),y:Math.floor(M.anchorY*Js)})),crossTileIDs:T.map(M=>M.crossTileID)};if(k.positions.length>128){const M=new _.av(k.positions.length,16,Uint16Array);for(const{x:A,y:R}of k.positions)M.add(A,R);M.finish(),delete k.positions,k.index=M}this._symbolsByKey[x]=k}}getScaledCoordinates(s,d){const{x:p,y:g,z:x}=this.tileID.canonical,{x:T,y:k,z:M}=d.canonical,A=Js/Math.pow(2,M-x),R=(k*_.N+s.anchorY)*A,O=g*_.N*Js;return{x:Math.floor((T*_.N+s.anchorX)*A-p*_.N*Js),y:Math.floor(R-O)}}findMatches(s,d,p){const g=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let x=0;x<s.length;x++){const T=s.get(x);if(T.crossTileID)continue;const k=this._symbolsByKey[T.key];if(!k)continue;const M=this.getScaledCoordinates(T,d);if(k.index){const A=k.index.range(M.x-g,M.y-g,M.x+g,M.y+g).sort();for(const R of A){const O=k.crossTileIDs[R];if(!p[O]){p[O]=!0,T.crossTileID=O;break}}}else if(k.positions)for(let A=0;A<k.positions.length;A++){const R=k.positions[A],O=k.crossTileIDs[A];if(Math.abs(R.x-M.x)<=g&&Math.abs(R.y-M.y)<=g&&!p[O]){p[O]=!0,T.crossTileID=O;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class rn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class eu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(0!==d)for(const p in this.indexes){const g=this.indexes[p],x={};for(const T in g){const k=g[T];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+d),x[k.tileID.key]=k}this.indexes[p]=x}this.lng=s}addBucket(s,d,p){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let x=0;x<d.symbolInstances.length;x++)d.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const g=this.usedCrossTileIDs[s.overscaledZ];for(const x in this.indexes){const T=this.indexes[x];if(Number(x)>s.overscaledZ)for(const k in T){const M=T[k];M.tileID.isChildOf(s)&&M.findMatches(d.symbolInstances,s,g)}else{const k=T[s.scaledTo(Number(x)).key];k&&k.findMatches(d.symbolInstances,s,g)}}for(let x=0;x<d.symbolInstances.length;x++){const T=d.symbolInstances.get(x);T.crossTileID||(T.crossTileID=p.generate(),g[T.crossTileID]=!0)}return void 0===this.indexes[s.overscaledZ]&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new vh(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const p of d.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[s][g]}removeStaleBuckets(s){let d=!1;for(const p in this.indexes){const g=this.indexes[p];for(const x in g)s[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[x]),delete g[x],d=!0)}return d}}class nc{constructor(){this.layerIndexes={},this.crossTileIDs=new rn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,p){let g=this.layerIndexes[s.id];void 0===g&&(g=this.layerIndexes[s.id]=new eu);let x=!1;const T={};g.handleWrapJump(p);for(const k of d){const M=k.getBucket(s);M&&s.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,M,this.crossTileIDs)&&(x=!0),T[M.bucketInstanceId]=!0)}return g.removeStaleBuckets(T)&&(x=!0),x}pruneUnusedLayers(s){const d={};s.forEach(p=>{d[p]=!0});for(const p in this.layerIndexes)d[p]||delete this.layerIndexes[p]}}const qi=(v,s)=>_.x(v,s&&s.filter(d=>"source.canvas"!==d.identifier)),Yr=_.F(_.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),dm=_.F(_.ax,["setCenter","setZoom","setBearing","setPitch"]),ho=_.aw();class Zi extends _.E{constructor(s,d={}){super(),this.map=s,this.dispatcher=new gl(tc(),this,s._getMapId()),this.imageManager=new zr,this.imageManager.setEventedParent(this),this.glyphManager=new Do(s._requestManager,d.localIdeographFontFamily),this.lineAtlas=new yn(256,512),this.crossTileSymbolIndex=new nc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new _.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",_.az());const p=this;this._rtlTextPluginCallback=Zi.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,T)=>{if(_.aA(x),T&&T.every(k=>k))for(const k in p.sourceCaches){const M=p.sourceCaches[k].getSource().type;"vector"!==M&&"geojson"!==M||p.sourceCaches[k].reload()}})}),this.on("data",g=>{if("source"!==g.dataType||"metadata"!==g.sourceDataType)return;const x=this.sourceCaches[g.sourceId];if(!x)return;const T=x.getSource();if(T&&T.vectorLayerIds)for(const k in this._layers){const M=this._layers[k];M.source===T.id&&this._validateLayer(M)}})}loadURL(s,d={},p){this.fire(new _.k("dataloading",{dataType:"style"})),d.validate="boolean"!=typeof d.validate||d.validate;const g=this.map._requestManager.transformRequest(s,xi.Style);this._request=_.f(g,(x,T)=>{this._request=null,x?this.fire(new _.j(x)):T&&this._load(T,d,p)})}loadJSON(s,d={},p){this.fire(new _.k("dataloading",{dataType:"style"})),this._request=_.h.frame(()=>{this._request=null,d.validate=!1!==d.validate,this._load(s,d,p)})}loadEmpty(){this.fire(new _.k("dataloading",{dataType:"style"})),this._load(ho,{validate:!1})}_load(s,d,p){var g;const x=d.transformStyle?d.transformStyle(p,s):s;if(!d.validate||!qi(this,_.y(x))){this._loaded=!0,this.stylesheet=x;for(const T in x.sources)this.addSource(T,x.sources[T],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new fl(this.stylesheet.light),this.map.setTerrain(null!==(g=this.stylesheet.terrain)&&void 0!==g?g:null),this.fire(new _.k("data",{dataType:"style"})),this.fire(new _.k("style.load"))}}_createLayers(){const s=_.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",s),this._order=s.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of s){const p=_.aC(d);p.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=p}}_loadSprite(s,d=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,T,k){const M=$i(g),A=M.length,R=T>1?"@2x":"",O={},V={},Z={};for(const{id:q,url:Q}of M){const $=x.transformRequest(x.normalizeSpriteURL(Q,R,".json"),xi.SpriteJSON),ae=`${q}_${$.url}`;O[ae]=_.f($,(de,_e)=>{delete O[ae],V[q]=_e,ml(k,V,Z,de,A)});const fe=x.transformRequest(x.normalizeSpriteURL(Q,R,".png"),xi.SpriteImage),te=`${q}_${fe.url}`;O[te]=wr.getImage(fe,(de,_e)=>{delete O[te],Z[q]=_e,ml(k,V,Z,de,A)})}return{cancel(){for(const q of Object.values(O))q.cancel()}}}(s,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new _.j(g));else if(x)for(const T in x){this._spritesImagesIds[T]=[];const k=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(M=>!(M in x)):[];for(const M of k)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in x[T]){const A="default"===T?M:`${T}:${M}`;this._spritesImagesIds[T].push(A),A in this.imageManager.images?this.imageManager.updateImage(A,x[T][M],!1):this.imageManager.addImage(A,x[T][M]),d&&(this._changedImages[A]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.k("data",{dataType:"style"}))}_validateLayer(s){const d=this.sourceCaches[s.source];if(!d)return;const p=s.sourceLayer;if(!p)return;const g=d.getSource();("geojson"===g.type||g.vectorLayerIds&&-1===g.vectorLayerIds.indexOf(p))&&this.fire(new _.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s){const d=this._serializedAllLayers();if(!s||0===s.length)return Object.values(d);const p=[];for(const g of s)d[g]&&p.push(d[g]);return p}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const d=Object.keys(this._layers);for(const p of d){const g=this._layers[p];"custom"!==g.type&&(s[p]=g.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const d=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const T in this._updatedSources){const k=this._updatedSources[T];if("reload"===k)this._reloadSource(T);else{if("clear"!==k)throw new Error(`Invalid action ${k}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];p[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(s,this._availableImages),!x.isHidden(s.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in p){const x=this.sourceCaches[g];p[g]!==x.used&&x.fire(new _.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(s),this.z=s.zoom,d&&this.fire(new _.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(s),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){this._checkLoaded();const p=this.serialize();if(s=d.transformStyle?d.transformStyle(p,s):s,qi(this,_.y(s)))return!1;(s=_.aD(s)).layers=_.aB(s.layers);const g=_.aE(p,s).filter(T=>!(T.command in dm));if(0===g.length)return!1;const x=g.filter(T=>!(T.command in Yr));if(x.length>0)throw new Error(`Unimplemented: ${x.map(T=>T.command).join(", ")}.`);for(const T of g)"setTransition"!==T.command&&this[T.command].apply(this,T.args);return this.stylesheet=s,this._serializedLayers=null,!0}addImage(s,d){if(this.getImage(s))return this.fire(new _.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new _.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,p={}){if(this._checkLoaded(),void 0!==this.sourceCaches[s])throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(_.y.source,`sources.${s}`,d,null,p))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const g=this.sourceCaches[s]=new Qr(s,d,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:s})),g.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===s)return this.fire(new _.j(new Error(`Source "${s}" cannot be removed while layer "${p}" is using it.`)));const d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new _.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error(`There is no source with this ID=${s}`);const p=this.sourceCaches[s].getSource();if("geojson"!==p.type)throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,p={}){this._checkLoaded();const g=s.id;if(this.getLayer(g))return void this.fire(new _.j(new Error(`Layer "${g}" already exists on this map.`)));let x;if("custom"===s.type){if(qi(this,_.aF(s)))return;x=_.aC(s)}else{if("source"in s&&"object"==typeof s.source&&(this.addSource(g,s.source),s=_.aD(s),s=_.e(s,{source:g})),this._validate(_.y.layer,`layers.${g}`,s,{arrayIndex:-1},p))return;x=_.aC(s),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const T=d?this._order.indexOf(d):this._order.length;if(d&&-1===T)this.fire(new _.j(new Error(`Cannot add layer "${g}" before non-existing layer "${d}".`)));else{if(this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&"custom"!==x.type){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new _.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const p=this._order.indexOf(s);this._order.splice(p,1);const g=d?this._order.indexOf(d):this._order.length;d&&-1===g?this.fire(new _.j(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(g,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new _.j(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);const p=this._order.indexOf(s);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,p){this._checkLoaded();const g=this.getLayer(s);g?g.minzoom===d&&g.maxzoom===p||(null!=d&&(g.minzoom=d),null!=p&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new _.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,p={}){this._checkLoaded();const g=this.getLayer(s);if(g){if(!_.aG(g.filter,d))return null==d?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(_.y.filter,`layers.${g.id}.filter`,d,null,p)||(g.filter=_.aD(d),this._updateLayer(g)))}else this.fire(new _.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return _.aD(this.getLayer(s).filter)}setLayoutProperty(s,d,p,g={}){this._checkLoaded();const x=this.getLayer(s);x?_.aG(x.getLayoutProperty(d),p)||(x.setLayoutProperty(d,p,g),this._updateLayer(x)):this.fire(new _.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){const p=this.getLayer(s);if(p)return p.getLayoutProperty(d);this.fire(new _.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,p,g={}){this._checkLoaded();const x=this.getLayer(s);x?_.aG(x.getPaintProperty(d),p)||(x.setPaintProperty(d,p,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new _.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const p=s.source,g=s.sourceLayer,x=this.sourceCaches[p];if(void 0===x)return void this.fire(new _.j(new Error(`The source '${p}' does not exist in the map's style.`)));const T=x.getSource().type;"geojson"===T&&g?this.fire(new _.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==T||g?(void 0===s.id&&this.fire(new _.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,s.id,d)):this.fire(new _.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();const p=s.source,g=this.sourceCaches[p];if(void 0===g)return void this.fire(new _.j(new Error(`The source '${p}' does not exist in the map's style.`)));const x=g.getSource().type,T="vector"===x?s.sourceLayer:void 0;"vector"!==x||T?d&&"string"!=typeof s.id&&"number"!=typeof s.id?this.fire(new _.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(T,s.id,d):this.fire(new _.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const d=s.source,p=s.sourceLayer,g=this.sourceCaches[d];if(void 0!==g)return"vector"!==g.getSource().type||p?(void 0===s.id&&this.fire(new _.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,s.id)):void this.fire(new _.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new _.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return _.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=_.aH(this.sourceCaches,x=>x.serialize()),d=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return _.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:s,layers:d,terrain:p},x=>void 0!==x)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&"raster"!==this.sourceCaches[s.source].getSource().type&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const d=T=>"fill-extrusion"===this._layers[T].type,p={},g=[];for(let T=this._order.length-1;T>=0;T--){const k=this._order[T];if(d(k)){p[k]=T;for(const M of s){const A=M[k];if(A)for(const R of A)g.push(R)}}}g.sort((T,k)=>k.intersectionZ-T.intersectionZ);const x=[];for(let T=this._order.length-1;T>=0;T--){const k=this._order[T];if(d(k))for(let M=g.length-1;M>=0;M--){const A=g[M].feature;if(p[A.layer.id]<T)break;x.push(A),g.pop()}else for(const M of s){const A=M[k];if(A)for(const R of A)x.push(R.feature)}}return x}queryRenderedFeatures(s,d,p){d&&d.filter&&this._validate(_.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const g={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new _.j(new Error("parameters.layers must be an Array."))),[];for(const k of d.layers){const M=this._layers[k];if(!M)return this.fire(new _.j(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[M.source]=!0}}const x=[];d.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const k in this.sourceCaches)d.layers&&!g[k]||x.push(ka(this.sourceCaches[k],this._layers,T,s,d,p));return this.placement&&x.push(function(k,M,A,R,O,V,Z){const q={},Q=V.queryRenderedSymbols(R),$=[];for(const ae of Object.keys(Q).map(Number))$.push(Z[ae]);$.sort(Xs);for(const ae of $){const fe=ae.featureIndex.lookupSymbolFeatures(Q[ae.bucketInstanceId],M,ae.bucketIndex,ae.sourceLayerIndex,O.filter,O.layers,O.availableImages,k);for(const te in fe){const de=q[te]=q[te]||[],_e=fe[te];_e.sort((ve,Te)=>{const Ae=ae.featureSortOrder;if(Ae){const Ie=Ae.indexOf(ve.featureIndex);return Ae.indexOf(Te.featureIndex)-Ie}return Te.featureIndex-ve.featureIndex});for(const ve of _e)de.push(ve)}}for(const ae in q)q[ae].forEach(fe=>{const te=fe.feature,de=A[k[ae].source].getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=de});return q}(this._layers,T,this.sourceCaches,s,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(s,d){d&&d.filter&&this._validate(_.y.filter,"querySourceFeatures.filter",d.filter,null,d);const p=this.sourceCaches[s];return p?function(g,x){const T=g.getRenderableIds().map(A=>g.getTileByID(A)),k=[],M={};for(let A=0;A<T.length;A++){const R=T[A],O=R.tileID.canonical.key;M[O]||(M[O]=!0,R.querySourceFeatures(k,x))}return k}(p,d):[]}addSourceType(s,d,p){return Io(s)?p(new Error(`A source type called "${s}" already exists.`)):(ec[s]=d,d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:d.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const T in s)if(!_.aG(s[T],p[T])){g=!0;break}if(!g)return;const x={now:_.h.now(),transition:_.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(x)}_validate(s,d,p,g,x={}){return(!x||!1!==x.validate)&&qi(this,s.call(_.y,_.e({key:d,style:this.serialize(),value:p,styleSpec:_.v},g)))}_remove(s=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),_.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const p=this.sourceCaches[d];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const d in this.sourceCaches)this.sourceCaches[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,p,g,x=!1){let T=!1,k=!1;const M={};for(const A of this._order){const R=this._layers[A];if("symbol"!==R.type)continue;if(!M[R.source]){const V=this.sourceCaches[R.source];M[R.source]=V.getRenderableIds(!0).map(Z=>V.getTileByID(Z)).sort((Z,q)=>q.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(q.tileID)?-1:1))}const O=this.crossTileSymbolIndex.addLayer(R,M[R.source],s.center.lng);T=T||O}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||0===p)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(_.h.now(),s.zoom))&&(this.pauseablePlacement=new Da(s,this.map.terrain,this._order,x,d,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(_.h.now()),k=!0),T&&this.pauseablePlacement.placement.setStale()),k||T)for(const A of this._order){const R=this._layers[A];"symbol"===R.type&&this.placement.updateLayerOpacities(R,M[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(_.h.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d,p){this.imageManager.getImages(d.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[d.source];g&&g.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(s,d,p){this.glyphManager.getGlyphs(d.stacks,p);const g=this.sourceCaches[d.source];g&&g.setDependencies(d.tileID.key,d.type,[""])}getResource(s,d,p){return _.m(d,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(_.y.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,d,p={},g){this._checkLoaded();const x=[{id:s,url:d}],T=[...$i(this.stylesheet.sprite),...x];this._validate(_.y.sprite,"sprite",T,null,p)||(this.stylesheet.sprite=T,this._loadSprite(x,!0,g))}removeSprite(s){this._checkLoaded();const d=$i(this.stylesheet.sprite);if(d.find(p=>p.id===s)){if(this._spritesImagesIds[s])for(const p of this._spritesImagesIds[s])this.imageManager.removeImage(p),this._changedImages[p]=!0;d.splice(d.findIndex(p=>p.id===s),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.k("data",{dataType:"style"}))}else this.fire(new _.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return $i(this.stylesheet.sprite)}setSprite(s,d={},p){this._checkLoaded(),s&&this._validate(_.y.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,p):(this._unloadSprite(),p&&p(null)))}}Zi.registerForPluginStateChange=_.aK;var ic=_.Q([{name:"a_pos",type:"Int16",components:2}]),xl="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Kn={prelude:yt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:yt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:yt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:yt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:yt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:yt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:yt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:yt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:yt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:yt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:yt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:yt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:yt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:yt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:yt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:yt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:yt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:yt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:yt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:yt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:yt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:yt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:yt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:yt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:yt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:yt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",xl),terrainDepth:yt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",xl),terrainCoords:yt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",xl)};function yt(v,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=s.match(/attribute ([\w]+) ([\w]+)/g),g=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=x?x.concat(g):g,k={};return{fragmentSource:v=v.replace(d,(M,A,R,O,V)=>(k[V]=!0,"define"===A?`\n#ifndef HAS_UNIFORM_u_${V}\nvarying ${R} ${O} ${V};\n#else\nuniform ${R} ${O} u_${V};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${V}\n    ${R} ${O} ${V} = u_${V};\n#endif\n`)),vertexSource:s=s.replace(d,(M,A,R,O,V)=>{const Z="float"===O?"vec2":"vec4",q=V.match(/color/)?"color":Z;return k[V]?"define"===A?`\n#ifndef HAS_UNIFORM_u_${V}\nuniform lowp float u_${V}_t;\nattribute ${R} ${Z} a_${V};\nvarying ${R} ${O} ${V};\n#else\nuniform ${R} ${O} u_${V};\n#endif\n`:"vec4"===q?`\n#ifndef HAS_UNIFORM_u_${V}\n    ${V} = a_${V};\n#else\n    ${R} ${O} ${V} = u_${V};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${V}\n    ${V} = unpack_mix_${q}(a_${V}, u_${V}_t);\n#else\n    ${R} ${O} ${V} = u_${V};\n#endif\n`:"define"===A?`\n#ifndef HAS_UNIFORM_u_${V}\nuniform lowp float u_${V}_t;\nattribute ${R} ${Z} a_${V};\n#else\nuniform ${R} ${O} u_${V};\n#endif\n`:"vec4"===q?`\n#ifndef HAS_UNIFORM_u_${V}\n    ${R} ${O} ${V} = a_${V};\n#else\n    ${R} ${O} ${V} = u_${V};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${V}\n    ${R} ${O} ${V} = unpack_mix_${q}(a_${V}, u_${V}_t);\n#else\n    ${R} ${O} ${V} = u_${V};\n#endif\n`}),staticAttributes:p,staticUniforms:T}}class ws{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,p,g,x,T,k,M,A){this.context=s;let R=this.boundPaintVertexBuffers.length!==g.length;for(let O=0;!R&&O<g.length;O++)this.boundPaintVertexBuffers[O]!==g[O]&&(R=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==p||R||this.boundIndexBuffer!==x||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==A?this.freshBind(d,p,g,x,T,k,M,A):(s.bindVertexArray.set(this.vao),k&&k.bind(),x&&x.dynamicDraw&&x.bind(),M&&M.bind(),A&&A.bind())}freshBind(s,d,p,g,x,T,k,M){const A=s.numAttributes,R=this.context,O=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=M,d.enableAttributes(O,s);for(const V of p)V.enableAttributes(O,s);T&&T.enableAttributes(O,s),k&&k.enableAttributes(O,s),M&&M.enableAttributes(O,s),d.bind(),d.setVertexAttribPointers(O,s,x);for(const V of p)V.bind(),V.setVertexAttribPointers(O,s,x);T&&(T.bind(),T.setVertexAttribPointers(O,s,x)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(O,s,x)),M&&(M.bind(),M.setVertexAttribPointers(O,s,x)),R.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function en(v){const s=[];for(let d=0;d<v.length;d++){if(null===v[d])continue;const p=v[d].split(" ");s.push(p.pop())}return s}class mt{constructor(s,d,p,g,x,T){const k=s.gl;this.program=k.createProgram();const M=en(d.staticAttributes),A=p?p.getBinderAttributes():[],R=M.concat(A),O=Kn.prelude.staticUniforms?en(Kn.prelude.staticUniforms):[],V=d.staticUniforms?en(d.staticUniforms):[],Z=p?p.getBinderUniforms():[],q=O.concat(V).concat(Z),Q=[];for(const ve of q)Q.indexOf(ve)<0&&Q.push(ve);const $=p?p.defines():[];x&&$.push("#define OVERDRAW_INSPECTOR;"),T&&$.push("#define TERRAIN3D;");const ae=$.concat(Kn.prelude.fragmentSource,d.fragmentSource).join("\n"),fe=$.concat(Kn.prelude.vertexSource,d.vertexSource).join("\n"),te=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(te,ae),k.compileShader(te),!k.getShaderParameter(te,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(te)}`);k.attachShader(this.program,te);const de=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(de,fe),k.compileShader(de),!k.getShaderParameter(de,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(de)}`);k.attachShader(this.program,de),this.attributes={};const _e={};this.numAttributes=R.length;for(let ve=0;ve<this.numAttributes;ve++)R[ve]&&(k.bindAttribLocation(this.program,ve,R[ve]),this.attributes[R[ve]]=ve);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(de),k.deleteShader(te);for(let ve=0;ve<Q.length;ve++){const Te=Q[ve];if(Te&&!_e[Te]){const Ae=k.getUniformLocation(this.program,Te);Ae&&(_e[Te]=Ae)}}var ve,Te;this.fixedUniforms=g(s,_e),this.terrainUniforms={u_depth:new _.aL(ve=s,(Te=_e).u_depth),u_terrain:new _.aL(ve,Te.u_terrain),u_terrain_dim:new _.aM(ve,Te.u_terrain_dim),u_terrain_matrix:new _.aN(ve,Te.u_terrain_matrix),u_terrain_unpack:new _.aO(ve,Te.u_terrain_unpack),u_terrain_exaggeration:new _.aM(ve,Te.u_terrain_exaggeration)},this.binderUniforms=p?p.getUniforms(s,_e):[]}draw(s,d,p,g,x,T,k,M,A,R,O,V,Z,q,Q,$,ae,fe){const te=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(p),s.setStencilMode(g),s.setColorMode(x),s.setCullFace(T),M){s.activeTexture.set(te.TEXTURE2),te.bindTexture(te.TEXTURE_2D,M.depthTexture),s.activeTexture.set(te.TEXTURE3),te.bindTexture(te.TEXTURE_2D,M.texture);for(const _e in this.terrainUniforms)this.terrainUniforms[_e].set(M[_e])}for(const _e in this.fixedUniforms)this.fixedUniforms[_e].set(k[_e]);Q&&Q.setUniforms(s,this.binderUniforms,Z,{zoom:q});let de=0;switch(d){case te.LINES:de=2;break;case te.TRIANGLES:de=3;break;case te.LINE_STRIP:de=1}for(const _e of V.get()){const ve=_e.vaos||(_e.vaos={});(ve[A]||(ve[A]=new ws)).bind(s,this,R,Q?Q.getPaintVertexBuffers():[],O,_e.vertexOffset,$,ae,fe),te.drawElements(d,_e.primitiveLength*de,te.UNSIGNED_SHORT,_e.primitiveOffset*de*2)}}}function Vr(v,s,d){const p=1/se(d,1,s.transform.tileZoom),g=Math.pow(2,d.tileID.overscaledZ),x=d.tileSize*Math.pow(2,s.transform.tileZoom)/g,T=x*(d.tileID.canonical.x+d.tileID.wrap*g),k=x*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[T>>16,k>>16],u_pixel_coord_lower:[65535&T,65535&k]}}const rc=(v,s,d,p)=>{const g=s.style.light,x=g.properties.get("position"),T=[x.x,x.y,x.z],k=(A=new _.A(9),_.A!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A);var A;"viewport"===g.properties.get("anchor")&&function(A,R){var O=Math.sin(R),V=Math.cos(R);A[0]=V,A[1]=O,A[2]=0,A[3]=-O,A[4]=V,A[5]=0,A[6]=0,A[7]=0,A[8]=1}(k,-s.transform.angle),function(A,R,O){var V=R[0],Z=R[1],q=R[2];A[0]=V*O[0]+Z*O[3]+q*O[6],A[1]=V*O[1]+Z*O[4]+q*O[7],A[2]=V*O[2]+Z*O[5]+q*O[8]}(T,T,k);const M=g.properties.get("color");return{u_matrix:v,u_lightpos:T,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+d,u_opacity:p}},Ki=(v,s,d,p,g,x,T)=>_.e(rc(v,s,d,p),Vr(x,s,T),{u_height_factor:-Math.pow(2,g.overscaledZ)/T.tileSize/8}),nd=v=>({u_matrix:v}),tu=(v,s,d,p)=>_.e(nd(v),Vr(d,s,p)),cn=(v,s)=>({u_matrix:v,u_world:s}),Ia=(v,s,d,p,g)=>_.e(tu(v,s,d,p),{u_world:g}),zn=(v,s,d,p)=>{const g=v.transform;let x,T;if("map"===p.paint.get("circle-pitch-alignment")){const k=se(d,1,g.zoom);x=!0,T=[k,k]}else x=!1,T=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+("map"===p.paint.get("circle-pitch-scale")),u_matrix:v.translatePosMatrix(s.posMatrix,d,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:T}},oc=(v,s,d)=>{const p=se(d,1,s.zoom),g=Math.pow(2,s.zoom-d.tileID.overscaledZ),x=d.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[s.pixelsToGLUnits[0]/(p*g),s.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:x}},sc=(v,s,d=1)=>({u_matrix:v,u_color:s,u_overlay:0,u_overlay_scale:d}),wn=v=>({u_matrix:v}),kt=(v,s,d,p)=>({u_matrix:v,u_extrude_scale:se(s,1,d),u_intensity:p});function ac(v,s){const d=Math.pow(2,s.canonical.z),p=s.canonical.y;return[new _.U(0,p/d).toLngLat().lat,new _.U(0,(p+1)/d).toLngLat().lat]}const lc=(v,s,d,p)=>{const g=v.transform;return{u_matrix:Ct(v,s,d,p),u_ratio:1/se(s,1,g.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},um=(v,s,d,p,g)=>_.e(lc(v,s,d,g),{u_image:0,u_image_height:p}),yh=(v,s,d,p,g)=>{const x=v.transform,T=cc(s,x);return{u_matrix:Ct(v,s,d,g),u_texsize:s.imageAtlasTexture.size,u_ratio:1/se(s,1,x.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[T,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},xe=(v,s,d,p,g,x)=>{const T=v.lineAtlas,k=cc(s,v.transform),M="round"===d.layout.get("line-cap"),A=T.getDash(p.from,M),R=T.getDash(p.to,M),O=A.width*g.fromScale,V=R.width*g.toScale;return _.e(lc(v,s,d,x),{u_patternscale_a:[k/O,-A.height/2],u_patternscale_b:[k/V,-R.height/2],u_sdfgamma:T.width/(256*Math.min(O,V)*v.pixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:R.y,u_mix:g.t})};function cc(v,s){return 1/se(v,1,s.tileZoom)}function Ct(v,s,d,p){return v.translatePosMatrix(p?p.posMatrix:s.tileID.posMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const pn=(v,s,d,p,g)=>{return{u_matrix:v,u_tl_parent:s,u_scale_parent:d,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(T=g.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:bh(g.paint.get("raster-hue-rotate"))};var x,T};function bh(v){v*=Math.PI/180;const s=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const xh=(v,s,d,p,g,x,T,k,M,A)=>{const R=g.transform;return{u_is_size_zoom_constant:+("constant"===v||"source"===v),u_is_size_feature_constant:+("constant"===v||"camera"===v),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:R.cameraToCenterDistance,u_pitch:R.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:R.width/R.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:T,u_coord_matrix:k,u_is_text:+M,u_pitch_with_map:+p,u_texsize:A,u_texture:0}},nu=(v,s,d,p,g,x,T,k,M,A,R)=>{const O=g.transform;return _.e(xh(v,s,d,p,g,x,T,k,M,A),{u_gamma_scale:p?Math.cos(O._pitch)*O.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+R})},Ss=(v,s,d,p,g,x,T,k,M,A)=>_.e(nu(v,s,d,p,g,x,T,k,!0,M,!0),{u_texsize_icon:A,u_texture_icon:1}),or=(v,s,d)=>({u_matrix:v,u_opacity:s,u_color:d}),Oo=(v,s,d,p,g,x)=>_.e(function(T,k,M,A){const R=M.imageManager.getPattern(T.from.toString()),O=M.imageManager.getPattern(T.to.toString()),{width:V,height:Z}=M.imageManager.getPixelSize(),q=Math.pow(2,A.tileID.overscaledZ),Q=A.tileSize*Math.pow(2,M.transform.tileZoom)/q,$=Q*(A.tileID.canonical.x+A.tileID.wrap*q),ae=Q*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[V,Z],u_mix:k.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/se(A,1,M.transform.tileZoom),u_pixel_coord_upper:[$>>16,ae>>16],u_pixel_coord_lower:[65535&$,65535&ae]}}(p,x,d,g),{u_matrix:v,u_opacity:s}),id={fillExtrusion:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_lightpos:new _.aP(v,s.u_lightpos),u_lightintensity:new _.aM(v,s.u_lightintensity),u_lightcolor:new _.aP(v,s.u_lightcolor),u_vertical_gradient:new _.aM(v,s.u_vertical_gradient),u_opacity:new _.aM(v,s.u_opacity)}),fillExtrusionPattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_lightpos:new _.aP(v,s.u_lightpos),u_lightintensity:new _.aM(v,s.u_lightintensity),u_lightcolor:new _.aP(v,s.u_lightcolor),u_vertical_gradient:new _.aM(v,s.u_vertical_gradient),u_height_factor:new _.aM(v,s.u_height_factor),u_image:new _.aL(v,s.u_image),u_texsize:new _.aQ(v,s.u_texsize),u_pixel_coord_upper:new _.aQ(v,s.u_pixel_coord_upper),u_pixel_coord_lower:new _.aQ(v,s.u_pixel_coord_lower),u_scale:new _.aP(v,s.u_scale),u_fade:new _.aM(v,s.u_fade),u_opacity:new _.aM(v,s.u_opacity)}),fill:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix)}),fillPattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_image:new _.aL(v,s.u_image),u_texsize:new _.aQ(v,s.u_texsize),u_pixel_coord_upper:new _.aQ(v,s.u_pixel_coord_upper),u_pixel_coord_lower:new _.aQ(v,s.u_pixel_coord_lower),u_scale:new _.aP(v,s.u_scale),u_fade:new _.aM(v,s.u_fade)}),fillOutline:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_world:new _.aQ(v,s.u_world)}),fillOutlinePattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_world:new _.aQ(v,s.u_world),u_image:new _.aL(v,s.u_image),u_texsize:new _.aQ(v,s.u_texsize),u_pixel_coord_upper:new _.aQ(v,s.u_pixel_coord_upper),u_pixel_coord_lower:new _.aQ(v,s.u_pixel_coord_lower),u_scale:new _.aP(v,s.u_scale),u_fade:new _.aM(v,s.u_fade)}),circle:(v,s)=>({u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_scale_with_map:new _.aL(v,s.u_scale_with_map),u_pitch_with_map:new _.aL(v,s.u_pitch_with_map),u_extrude_scale:new _.aQ(v,s.u_extrude_scale),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_matrix:new _.aN(v,s.u_matrix)}),collisionBox:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_pixels_to_tile_units:new _.aM(v,s.u_pixels_to_tile_units),u_extrude_scale:new _.aQ(v,s.u_extrude_scale),u_overscale_factor:new _.aM(v,s.u_overscale_factor)}),collisionCircle:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_inv_matrix:new _.aN(v,s.u_inv_matrix),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_viewport_size:new _.aQ(v,s.u_viewport_size)}),debug:(v,s)=>({u_color:new _.aR(v,s.u_color),u_matrix:new _.aN(v,s.u_matrix),u_overlay:new _.aL(v,s.u_overlay),u_overlay_scale:new _.aM(v,s.u_overlay_scale)}),clippingMask:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix)}),heatmap:(v,s)=>({u_extrude_scale:new _.aM(v,s.u_extrude_scale),u_intensity:new _.aM(v,s.u_intensity),u_matrix:new _.aN(v,s.u_matrix)}),heatmapTexture:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_world:new _.aQ(v,s.u_world),u_image:new _.aL(v,s.u_image),u_color_ramp:new _.aL(v,s.u_color_ramp),u_opacity:new _.aM(v,s.u_opacity)}),hillshade:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_image:new _.aL(v,s.u_image),u_latrange:new _.aQ(v,s.u_latrange),u_light:new _.aQ(v,s.u_light),u_shadow:new _.aR(v,s.u_shadow),u_highlight:new _.aR(v,s.u_highlight),u_accent:new _.aR(v,s.u_accent)}),hillshadePrepare:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_image:new _.aL(v,s.u_image),u_dimension:new _.aQ(v,s.u_dimension),u_zoom:new _.aM(v,s.u_zoom),u_unpack:new _.aO(v,s.u_unpack)}),line:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_ratio:new _.aM(v,s.u_ratio),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_units_to_pixels:new _.aQ(v,s.u_units_to_pixels)}),lineGradient:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_ratio:new _.aM(v,s.u_ratio),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_units_to_pixels:new _.aQ(v,s.u_units_to_pixels),u_image:new _.aL(v,s.u_image),u_image_height:new _.aM(v,s.u_image_height)}),linePattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_texsize:new _.aQ(v,s.u_texsize),u_ratio:new _.aM(v,s.u_ratio),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_image:new _.aL(v,s.u_image),u_units_to_pixels:new _.aQ(v,s.u_units_to_pixels),u_scale:new _.aP(v,s.u_scale),u_fade:new _.aM(v,s.u_fade)}),lineSDF:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_ratio:new _.aM(v,s.u_ratio),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_units_to_pixels:new _.aQ(v,s.u_units_to_pixels),u_patternscale_a:new _.aQ(v,s.u_patternscale_a),u_patternscale_b:new _.aQ(v,s.u_patternscale_b),u_sdfgamma:new _.aM(v,s.u_sdfgamma),u_image:new _.aL(v,s.u_image),u_tex_y_a:new _.aM(v,s.u_tex_y_a),u_tex_y_b:new _.aM(v,s.u_tex_y_b),u_mix:new _.aM(v,s.u_mix)}),raster:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_tl_parent:new _.aQ(v,s.u_tl_parent),u_scale_parent:new _.aM(v,s.u_scale_parent),u_buffer_scale:new _.aM(v,s.u_buffer_scale),u_fade_t:new _.aM(v,s.u_fade_t),u_opacity:new _.aM(v,s.u_opacity),u_image0:new _.aL(v,s.u_image0),u_image1:new _.aL(v,s.u_image1),u_brightness_low:new _.aM(v,s.u_brightness_low),u_brightness_high:new _.aM(v,s.u_brightness_high),u_saturation_factor:new _.aM(v,s.u_saturation_factor),u_contrast_factor:new _.aM(v,s.u_contrast_factor),u_spin_weights:new _.aP(v,s.u_spin_weights)}),symbolIcon:(v,s)=>({u_is_size_zoom_constant:new _.aL(v,s.u_is_size_zoom_constant),u_is_size_feature_constant:new _.aL(v,s.u_is_size_feature_constant),u_size_t:new _.aM(v,s.u_size_t),u_size:new _.aM(v,s.u_size),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_pitch:new _.aM(v,s.u_pitch),u_rotate_symbol:new _.aL(v,s.u_rotate_symbol),u_aspect_ratio:new _.aM(v,s.u_aspect_ratio),u_fade_change:new _.aM(v,s.u_fade_change),u_matrix:new _.aN(v,s.u_matrix),u_label_plane_matrix:new _.aN(v,s.u_label_plane_matrix),u_coord_matrix:new _.aN(v,s.u_coord_matrix),u_is_text:new _.aL(v,s.u_is_text),u_pitch_with_map:new _.aL(v,s.u_pitch_with_map),u_texsize:new _.aQ(v,s.u_texsize),u_texture:new _.aL(v,s.u_texture)}),symbolSDF:(v,s)=>({u_is_size_zoom_constant:new _.aL(v,s.u_is_size_zoom_constant),u_is_size_feature_constant:new _.aL(v,s.u_is_size_feature_constant),u_size_t:new _.aM(v,s.u_size_t),u_size:new _.aM(v,s.u_size),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_pitch:new _.aM(v,s.u_pitch),u_rotate_symbol:new _.aL(v,s.u_rotate_symbol),u_aspect_ratio:new _.aM(v,s.u_aspect_ratio),u_fade_change:new _.aM(v,s.u_fade_change),u_matrix:new _.aN(v,s.u_matrix),u_label_plane_matrix:new _.aN(v,s.u_label_plane_matrix),u_coord_matrix:new _.aN(v,s.u_coord_matrix),u_is_text:new _.aL(v,s.u_is_text),u_pitch_with_map:new _.aL(v,s.u_pitch_with_map),u_texsize:new _.aQ(v,s.u_texsize),u_texture:new _.aL(v,s.u_texture),u_gamma_scale:new _.aM(v,s.u_gamma_scale),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_is_halo:new _.aL(v,s.u_is_halo)}),symbolTextAndIcon:(v,s)=>({u_is_size_zoom_constant:new _.aL(v,s.u_is_size_zoom_constant),u_is_size_feature_constant:new _.aL(v,s.u_is_size_feature_constant),u_size_t:new _.aM(v,s.u_size_t),u_size:new _.aM(v,s.u_size),u_camera_to_center_distance:new _.aM(v,s.u_camera_to_center_distance),u_pitch:new _.aM(v,s.u_pitch),u_rotate_symbol:new _.aL(v,s.u_rotate_symbol),u_aspect_ratio:new _.aM(v,s.u_aspect_ratio),u_fade_change:new _.aM(v,s.u_fade_change),u_matrix:new _.aN(v,s.u_matrix),u_label_plane_matrix:new _.aN(v,s.u_label_plane_matrix),u_coord_matrix:new _.aN(v,s.u_coord_matrix),u_is_text:new _.aL(v,s.u_is_text),u_pitch_with_map:new _.aL(v,s.u_pitch_with_map),u_texsize:new _.aQ(v,s.u_texsize),u_texsize_icon:new _.aQ(v,s.u_texsize_icon),u_texture:new _.aL(v,s.u_texture),u_texture_icon:new _.aL(v,s.u_texture_icon),u_gamma_scale:new _.aM(v,s.u_gamma_scale),u_device_pixel_ratio:new _.aM(v,s.u_device_pixel_ratio),u_is_halo:new _.aL(v,s.u_is_halo)}),background:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_opacity:new _.aM(v,s.u_opacity),u_color:new _.aR(v,s.u_color)}),backgroundPattern:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_opacity:new _.aM(v,s.u_opacity),u_image:new _.aL(v,s.u_image),u_pattern_tl_a:new _.aQ(v,s.u_pattern_tl_a),u_pattern_br_a:new _.aQ(v,s.u_pattern_br_a),u_pattern_tl_b:new _.aQ(v,s.u_pattern_tl_b),u_pattern_br_b:new _.aQ(v,s.u_pattern_br_b),u_texsize:new _.aQ(v,s.u_texsize),u_mix:new _.aM(v,s.u_mix),u_pattern_size_a:new _.aQ(v,s.u_pattern_size_a),u_pattern_size_b:new _.aQ(v,s.u_pattern_size_b),u_scale_a:new _.aM(v,s.u_scale_a),u_scale_b:new _.aM(v,s.u_scale_b),u_pixel_coord_upper:new _.aQ(v,s.u_pixel_coord_upper),u_pixel_coord_lower:new _.aQ(v,s.u_pixel_coord_lower),u_tile_units_to_pixels:new _.aM(v,s.u_tile_units_to_pixels)}),terrain:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_texture:new _.aL(v,s.u_texture),u_ele_delta:new _.aM(v,s.u_ele_delta)}),terrainDepth:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_ele_delta:new _.aM(v,s.u_ele_delta)}),terrainCoords:(v,s)=>({u_matrix:new _.aN(v,s.u_matrix),u_texture:new _.aL(v,s.u_texture),u_terrain_coords_id:new _.aM(v,s.u_terrain_coords_id),u_ele_delta:new _.aM(v,s.u_ele_delta)})};class iu{constructor(s,d,p){this.context=s;const g=s.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ru{constructor(s,d,p,g){this.length=d.length,this.attributes=p,this.itemSize=d.bytesPerElement,this.dynamicDraw=g,this.context=s;const x=s.gl;this.buffer=x.createBuffer(),s.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let p=0;p<this.attributes.length;p++){const g=d.attributes[this.attributes[p].name];void 0!==g&&s.enableVertexAttribArray(g)}}setVertexAttribPointers(s,d,p){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],T=d.attributes[x.name];void 0!==T&&s.vertexAttribPointer(T,x.components,s[Fo[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const dc=new WeakMap;function Aa(v){var s;if(dc.has(v))return dc.get(v);{const d=null===(s=v.getParameter(v.VERSION))||void 0===s?void 0:s.startsWith("WebGL 2.0");return dc.set(v,d),d}}class Kt{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class rd extends Kt{getDefault(){return _.aT.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class po extends Kt{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Jr extends Kt{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class wh extends Kt{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Cr extends Kt{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class vt extends Kt{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Sh extends Kt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Ch extends Kt{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class ou extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class Ze extends Kt{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Th extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class Dn extends Kt{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class uc extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class kh extends Kt{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Pa extends Kt{getDefault(){return _.aT.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class hm extends Kt{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class od extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class sd extends Kt{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class su extends Kt{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Eh extends Kt{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class pm extends Kt{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Gt extends Kt{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class wl extends Kt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class ad extends Kt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class sr extends Kt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Ra extends Kt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class mm extends Kt{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class In extends Kt{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;const p=this.gl;Aa(p)?p.bindVertexArray(s):null===(d=p.getExtension("OES_vertex_array_object"))||void 0===d||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class Mh extends Kt{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Sl extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Le extends Kt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class is extends Kt{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class ea extends is{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class au extends is{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class hc extends is{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class ln{constructor(s,d,p,g,x){this.context=s,this.width=d,this.height=p;const T=s.gl,k=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new ea(s,k),g)this.depthAttachment=x?new hc(s,k):new au(s,k);else if(x)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const p=this.depthAttachment.get();p&&s.deleteRenderbuffer(p)}s.deleteFramebuffer(this.framebuffer)}}class Bn{constructor(s,d,p){this.blendFunction=s,this.blendColor=d,this.mask=p}}Bn.Replace=[1,0],Bn.disabled=new Bn(Bn.Replace,_.aT.transparent,[!1,!1,!1,!1]),Bn.unblended=new Bn(Bn.Replace,_.aT.transparent,[!0,!0,!0,!0]),Bn.alphaBlended=new Bn([1,771],_.aT.transparent,[!0,!0,!0,!0]);class Pg{constructor(s){var d,p;if(this.gl=s,this.clearColor=new rd(this),this.clearDepth=new po(this),this.clearStencil=new Jr(this),this.colorMask=new wh(this),this.depthMask=new Cr(this),this.stencilMask=new vt(this),this.stencilFunc=new Sh(this),this.stencilOp=new Ch(this),this.stencilTest=new ou(this),this.depthRange=new Ze(this),this.depthTest=new Th(this),this.depthFunc=new Dn(this),this.blend=new uc(this),this.blendFunc=new kh(this),this.blendColor=new Pa(this),this.blendEquation=new hm(this),this.cullFace=new od(this),this.cullFaceSide=new sd(this),this.frontFace=new su(this),this.program=new Eh(this),this.activeTexture=new pm(this),this.viewport=new Gt(this),this.bindFramebuffer=new wl(this),this.bindRenderbuffer=new ad(this),this.bindTexture=new sr(this),this.bindVertexBuffer=new Ra(this),this.bindElementBuffer=new mm(this),this.bindVertexArray=new In(this),this.pixelStoreUnpack=new Mh(this),this.pixelStoreUnpackPremultiplyAlpha=new Sl(this),this.pixelStoreUnpackFlipY=new Le(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Aa(s)){this.HALF_FLOAT=s.HALF_FLOAT;const g=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(d=s.RGBA16F)&&void 0!==d?d:g?.RGBA16F_EXT,this.RGB16F=null!==(p=s.RGB16F)&&void 0!==p?p:g?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const g=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=g?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new iu(this,s,d)}createVertexBuffer(s,d,p){return new ru(this,s,d,p)}createRenderbuffer(s,d,p){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,s,d,p),this.bindRenderbuffer.set(null),x}createFramebuffer(s,d,p,g){return new ln(this,s,d,p,g)}clear({color:s,depth:d,stencil:p}){const g=this.gl;let x=0;s&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==p&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(x)}setCullFace(s){!1===s.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){_.aG(s.blendFunction,Bn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Aa(this.gl)?this.gl.createVertexArray():null===(s=this.gl.getExtension("OES_vertex_array_object"))||void 0===s?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return Aa(this.gl)?this.gl.deleteVertexArray(s):null===(d=this.gl.getExtension("OES_vertex_array_object"))||void 0===d?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class Xt{constructor(s,d,p){this.func=s,this.mask=d,this.range=p}}Xt.ReadOnly=!1,Xt.ReadWrite=!0,Xt.disabled=new Xt(519,Xt.ReadOnly,[0,1]);class ii{constructor(s,d,p,g,x,T){this.test=s,this.ref=d,this.mask=p,this.fail=g,this.depthFail=x,this.pass=T}}ii.disabled=new ii({func:519,mask:0},0,0,7680,7680,7680);class Xn{constructor(s,d,p){this.enable=s,this.mode=d,this.frontFace=p}}let Cs;function ld(v,s,d,p,g,x,T){const k=v.context,M=k.gl,A=v.useProgram("collisionBox"),R=[];let O=0,V=0;for(let te=0;te<p.length;te++){const de=p[te],_e=s.getTile(de),ve=_e.getBucket(d);if(!ve)continue;let Te=de.posMatrix;0===g[0]&&0===g[1]||(Te=v.translatePosMatrix(de.posMatrix,_e,g,x));const Ae=T?ve.textCollisionBox:ve.iconCollisionBox,Ie=ve.collisionCircleArray;if(Ie.length>0){const ze=_.Z(),$e=Te;_.aU(ze,ve.placementInvProjMatrix,v.transform.glCoordMatrix),_.aU(ze,ze,ve.placementViewportMatrix),R.push({circleArray:Ie,circleOffset:V,transform:$e,invTransform:ze,coord:de}),O+=Ie.length/4,V=O}Ae&&A.draw(k,M.LINES,Xt.disabled,ii.disabled,v.colorModeForRenderPass(),Xn.disabled,oc(Te,v.transform,_e),v.style.map.terrain&&v.style.map.terrain.getTerrainData(de),d.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,null,v.transform.zoom,null,null,Ae.collisionVertexBuffer)}if(!T||!R.length)return;const Z=v.useProgram("collisionCircle"),q=new _.aV;q.resize(4*O),q._trim();let Q=0;for(const te of R)for(let de=0;de<te.circleArray.length/4;de++){const _e=4*de,ve=te.circleArray[_e+0],Te=te.circleArray[_e+1],Ae=te.circleArray[_e+2],Ie=te.circleArray[_e+3];q.emplace(Q++,ve,Te,Ae,Ie,0),q.emplace(Q++,ve,Te,Ae,Ie,1),q.emplace(Q++,ve,Te,Ae,Ie,2),q.emplace(Q++,ve,Te,Ae,Ie,3)}(!Cs||Cs.length<2*O)&&(Cs=function(te){const de=2*te,_e=new _.aX;_e.resize(de),_e._trim();for(let ve=0;ve<de;ve++){const Te=6*ve;_e.uint16[Te+0]=4*ve+0,_e.uint16[Te+1]=4*ve+1,_e.uint16[Te+2]=4*ve+2,_e.uint16[Te+3]=4*ve+2,_e.uint16[Te+4]=4*ve+3,_e.uint16[Te+5]=4*ve+0}return _e}(O));const $=k.createIndexBuffer(Cs,!0),ae=k.createVertexBuffer(q,_.aW.members,!0);for(const te of R){const de={u_matrix:te.transform,u_inv_matrix:te.invTransform,u_camera_to_center_distance:(fe=v.transform).cameraToCenterDistance,u_viewport_size:[fe.width,fe.height]};Z.draw(k,M.TRIANGLES,Xt.disabled,ii.disabled,v.colorModeForRenderPass(),Xn.disabled,de,v.style.map.terrain&&v.style.map.terrain.getTerrainData(te.coord),d.id,ae,$,_.S.simpleSegment(0,2*te.circleOffset,te.circleArray.length,te.circleArray.length/2),null,v.transform.zoom,null,null,null)}var fe;ae.destroy(),$.destroy()}Xn.disabled=new Xn(!1,1029,2305),Xn.backCCW=new Xn(!0,1029,2305);const Tl=_.ao(new Float32Array(16));function cd(v,s,d,p,g,x){const{horizontalAlign:T,verticalAlign:k}=_.au(v);return new _.P((-(T-.5)*s/g+p[0])*x,(-(k-.5)*d/g+p[1])*x)}function dd(v,s,d,p,g,x,T,k,M,A,R){const O=v.text.placedSymbolArray,V=v.text.dynamicLayoutVertexArray,Z=v.icon.dynamicLayoutVertexArray,q={};V.clear();for(let Q=0;Q<O.length;Q++){const $=O.get(Q),ae=$.hidden||!$.crossTileID||v.allowVerticalPlacement&&!$.placedOrientation?null:p[$.crossTileID];if(ae){const fe=new _.P($.anchorX,$.anchorY),te=ni(fe,d?T:x,R),de=Ys(g.cameraToCenterDistance,te.signedDistanceFromCamera);let _e=_.aj(v.textSizeData,M,$)*de/_.ap;d&&(_e*=v.tilePixelRatio/k);const{width:ve,height:Te,anchor:Ae,textOffset:Ie,textBoxScale:ze}=ae,$e=cd(Ae,ve,Te,Ie,ze,_e),Lt=d?ni(fe.add($e),x,R).point:te.point.add(s?$e.rotate(-g.angle):$e),Ne=v.allowVerticalPlacement&&$.placedOrientation===_.ai.vertical?Math.PI/2:0;for(let ht=0;ht<$.numGlyphs;ht++)_.ak(V,Lt,Ne);A&&$.associatedIconIndex>=0&&(q[$.associatedIconIndex]={shiftedAnchor:Lt,angle:Ne})}else G($.numGlyphs,V)}if(A){Z.clear();const Q=v.icon.placedSymbolArray;for(let $=0;$<Q.length;$++){const ae=Q.get($);if(ae.hidden)G(ae.numGlyphs,Z);else{const fe=q[$];if(fe)for(let te=0;te<ae.numGlyphs;te++)_.ak(Z,fe.shiftedAnchor,fe.angle);else G(ae.numGlyphs,Z)}}v.icon.dynamicLayoutVertexBuffer.updateData(Z)}v.text.dynamicLayoutVertexBuffer.updateData(V)}function lu(v,s,d){return d.iconsInText&&s?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function pc(v,s,d,p,g,x,T,k,M,A,R,O){const V=v.context,Z=V.gl,q=v.transform,Q="map"===k,$="map"===M,ae="viewport"!==k&&"point"!==d.layout.get("symbol-placement"),fe=Q&&!$&&!ae,te=!d.layout.get("symbol-sort-key").isConstant();let de=!1;const _e=v.depthModeForSublayer(0,Xt.ReadOnly),ve=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Te=[];for(const Ae of p){const Ie=s.getTile(Ae),ze=Ie.getBucket(d);if(!ze)continue;const $e=g?ze.text:ze.icon;if(!$e||!$e.segments.get().length||!$e.hasVisibleVertices)continue;const Lt=$e.programConfigurations.get(d.id),Ne=g||ze.sdfIcons,ht=g?ze.textSizeData:ze.iconSizeData,ot=$||0!==q.pitch,gn=v.useProgram(lu(Ne,g,ze),Lt),zt=_.ah(ht,q.zoom),Et=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ae);let Vt,Yn,Sn,Vi,Ti=[0,0],di=null;if(g)Yn=Ie.glyphAtlasTexture,Sn=Z.LINEAR,Vt=Ie.glyphAtlasTexture.size,ze.iconsInText&&(Ti=Ie.imageAtlasTexture.size,di=Ie.imageAtlasTexture,Vi=ot||v.options.rotating||v.options.zooming||"composite"===ht.kind||"camera"===ht.kind?Z.LINEAR:Z.NEAREST);else{const Jn=1!==d.layout.get("icon-size").constantOr(0)||ze.iconsNeedLinear;Yn=Ie.imageAtlasTexture,Sn=Ne||v.options.rotating||v.options.zooming||Jn||ot?Z.LINEAR:Z.NEAREST,Vt=Ie.imageAtlasTexture.size}const lr=se(Ie,1,v.transform.zoom),_n=Fe(Ae.posMatrix,$,Q,v.transform,lr),Mr=Po(Ae.posMatrix,$,Q,v.transform,lr),Vo=ve&&ze.hasTextData(),Ha="none"!==d.layout.get("icon-text-fit")&&Vo&&ze.hasIconData();if(ae){const Jn=v.style.map.terrain?(dr,_i)=>v.style.map.terrain.getElevation(Ae,dr,_i):null,Ai="map"===d.layout.get("text-rotation-alignment");He(ze,Ae.posMatrix,v,g,_n,Mr,$,A,Ai,Jn)}const Rl=v.translatePosMatrix(Ae.posMatrix,Ie,x,T),bc=ae||g&&ve||Ha?Tl:_n,cr=v.translatePosMatrix(Mr,Ie,x,T,!0),Yi=Ne&&0!==d.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1);let Ur;Ur=Ne?ze.iconsInText?Ss(ht.kind,zt,fe,$,v,Rl,bc,cr,Vt,Ti):nu(ht.kind,zt,fe,$,v,Rl,bc,cr,g,Vt,!0):xh(ht.kind,zt,fe,$,v,Rl,bc,cr,g,Vt);const la={program:gn,buffers:$e,uniformValues:Ur,atlasTexture:Yn,atlasTextureIcon:di,atlasInterpolation:Sn,atlasInterpolationIcon:Vi,isSDF:Ne,hasHalo:Yi};if(te&&ze.canOverlap){de=!0;const Jn=$e.segments.get();for(const Ai of Jn)Te.push({segments:new _.S([Ai]),sortKey:Ai.sortKey,state:la,terrainData:Et})}else Te.push({segments:$e.segments,sortKey:0,state:la,terrainData:Et})}de&&Te.sort((Ae,Ie)=>Ae.sortKey-Ie.sortKey);for(const Ae of Te){const Ie=Ae.state;if(V.activeTexture.set(Z.TEXTURE0),Ie.atlasTexture.bind(Ie.atlasInterpolation,Z.CLAMP_TO_EDGE),Ie.atlasTextureIcon&&(V.activeTexture.set(Z.TEXTURE1),Ie.atlasTextureIcon&&Ie.atlasTextureIcon.bind(Ie.atlasInterpolationIcon,Z.CLAMP_TO_EDGE)),Ie.isSDF){const ze=Ie.uniformValues;Ie.hasHalo&&(ze.u_is_halo=1,ta(Ie.buffers,Ae.segments,d,v,Ie.program,_e,R,O,ze,Ae.terrainData)),ze.u_is_halo=0}ta(Ie.buffers,Ae.segments,d,v,Ie.program,_e,R,O,Ie.uniformValues,Ae.terrainData)}}function ta(v,s,d,p,g,x,T,k,M,A){const R=p.context;g.draw(R,R.gl.TRIANGLES,x,T,k,Xn.disabled,M,A,d.id,v.layoutVertexBuffer,v.indexBuffer,s,d.paint,p.transform.zoom,v.programConfigurations.get(d.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function mc(v,s,d,p,g){if(!d||!p||!p.imageAtlas)return;const x=p.imageAtlas.patternPositions;let T=x[d.to.toString()],k=x[d.from.toString()];if(!T||!k){const M=g.getPaintProperty(s);T=x[M],k=x[M]}T&&k&&v.setConstantPatternPositions(T,k)}function mo(v,s,d,p,g,x,T){const k=v.context.gl,M="fill-pattern",A=d.paint.get(M),R=A&&A.constantOr(1),O=d.getCrossfadeParameters();let V,Z,q,Q,$;T?(Z=R&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=k.LINES):(Z=R?"fillPattern":"fill",V=k.TRIANGLES);const ae=A.constantOr(null);for(const fe of p){const te=s.getTile(fe);if(R&&!te.patternsLoaded())continue;const de=te.getBucket(d);if(!de)continue;const _e=de.programConfigurations.get(d.id),ve=v.useProgram(Z,_e),Te=v.style.map.terrain&&v.style.map.terrain.getTerrainData(fe);R&&(v.context.activeTexture.set(k.TEXTURE0),te.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),_e.updatePaintBuffers(O)),mc(_e,M,ae,te,d);const Ae=Te?fe:null,Ie=v.translatePosMatrix(Ae?Ae.posMatrix:fe.posMatrix,te,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(T){Q=de.indexBuffer2,$=de.segments2;const ze=[k.drawingBufferWidth,k.drawingBufferHeight];q="fillOutlinePattern"===Z&&R?Ia(Ie,v,O,te,ze):cn(Ie,ze)}else Q=de.indexBuffer,$=de.segments,q=R?tu(Ie,v,O,te):nd(Ie);ve.draw(v.context,V,g,v.stencilModeForClipping(fe),x,Xn.disabled,q,Te,d.id,de.layoutVertexBuffer,Q,$,d.paint,v.transform.zoom,_e)}}function fc(v,s,d,p,g,x,T){const k=v.context,M=k.gl,A="fill-extrusion-pattern",R=d.paint.get(A),O=R.constantOr(1),V=d.getCrossfadeParameters(),Z=d.paint.get("fill-extrusion-opacity"),q=R.constantOr(null);for(const Q of p){const $=s.getTile(Q),ae=$.getBucket(d);if(!ae)continue;const fe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Q),te=ae.programConfigurations.get(d.id),de=v.useProgram(O?"fillExtrusionPattern":"fillExtrusion",te);O&&(v.context.activeTexture.set(M.TEXTURE0),$.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),te.updatePaintBuffers(V)),mc(te,A,q,$,d);const _e=v.translatePosMatrix(Q.posMatrix,$,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ve=d.paint.get("fill-extrusion-vertical-gradient"),Te=O?Ki(_e,v,ve,Z,Q,V,$):rc(_e,v,ve,Z);de.draw(k,k.gl.TRIANGLES,g,x,T,Xn.backCCW,Te,fe,d.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,d.paint,v.transform.zoom,te,v.style.map.terrain&&ae.centroidVertexBuffer)}}function Oe(v,s,d,p,g,x,T){const k=v.context,M=k.gl,A=d.fbo;if(!A)return;const R=v.useProgram("hillshade"),O=v.style.map.terrain&&v.style.map.terrain.getTerrainData(s);k.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,A.colorAttachment.get()),R.draw(k,M.TRIANGLES,g,x,T,Xn.disabled,((V,Z,q,Q)=>{const $=q.paint.get("hillshade-shadow-color"),ae=q.paint.get("hillshade-highlight-color"),fe=q.paint.get("hillshade-accent-color");let te=q.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===q.paint.get("hillshade-illumination-anchor")&&(te-=V.transform.angle);const de=!V.options.moving;return{u_matrix:Q?Q.posMatrix:V.transform.calculatePosMatrix(Z.tileID.toUnwrapped(),de),u_image:0,u_latrange:ac(0,Z.tileID),u_light:[q.paint.get("hillshade-exaggeration"),te],u_shadow:$,u_highlight:ae,u_accent:fe}})(v,d,p,O?s:null),O,p.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function ud(v,s,d,p,g,x){const T=v.context,k=T.gl,M=s.dem;if(M&&M.data){const A=M.dim,R=M.stride,O=M.getPixels();if(T.activeTexture.set(k.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||v.getTileTexture(R),s.demTexture){const Z=s.demTexture;Z.update(O,{premultiply:!1}),Z.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else s.demTexture=new Zn(T,O,k.RGBA,{premultiply:!1}),s.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);T.activeTexture.set(k.TEXTURE0);let V=s.fbo;if(!V){const Z=new Zn(T,{width:A,height:A,data:null},k.RGBA);Z.bind(k.LINEAR,k.CLAMP_TO_EDGE),V=s.fbo=T.createFramebuffer(A,A,!0,!1),V.colorAttachment.set(Z.texture)}T.bindFramebuffer.set(V.framebuffer),T.viewport.set([0,0,A,A]),v.useProgram("hillshadePrepare").draw(T,k.TRIANGLES,p,g,x,Xn.disabled,((Z,q)=>{const Q=q.stride,$=_.Z();return _.aS($,0,_.N,-_.N,0,0,1),_.$($,$,[0,-_.N,0]),{u_matrix:$,u_image:1,u_dimension:[Q,Q],u_zoom:Z.overscaledZ,u_unpack:q.getUnpackVector()}})(s.tileID,M),null,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function qe(v,s,d,p,g,x){const T=p.paint.get("raster-fade-duration");if(!x&&T>0){const k=_.h.now(),M=(k-v.timeAdded)/T,A=s?(k-s.timeAdded)/T:-1,R=d.getSource(),O=g.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),V=!s||Math.abs(s.tileID.overscaledZ-O)>Math.abs(v.tileID.overscaledZ-O),Z=V&&v.refreshedUponExpiration?1:_.ad(V?M:1-A,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}const gc=new _.aT(1,0,0,1),kl=new _.aT(0,1,0,1),Oa=new _.aT(0,0,1,1),Dh=new _.aT(1,0,1,1),Ih=new _.aT(0,1,1,1);function _c(v,s,d,p){Fa(v,0,s+d/2,v.transform.width,d,p)}function fo(v,s,d,p){Fa(v,s-d/2,0,d,v.transform.height,p)}function Fa(v,s,d,p,g,x){const T=v.context,k=T.gl;k.enable(k.SCISSOR_TEST),k.scissor(s*v.pixelRatio,d*v.pixelRatio,p*v.pixelRatio,g*v.pixelRatio),T.clear({color:x}),k.disable(k.SCISSOR_TEST)}function eo(v,s,d){const p=v.context,g=p.gl,x=d.posMatrix,T=v.useProgram("debug"),k=Xt.disabled,M=ii.disabled,A=v.colorModeForRenderPass(),R="$debug",O=v.style.map.terrain&&v.style.map.terrain.getTerrainData(d);p.activeTexture.set(g.TEXTURE0);const V=s.getTileByID(d.key).latestRawTileData,Z=Math.floor((V&&V.byteLength||0)/1024),q=s.getTile(d).tileSize,Q=512/Math.min(q,512)*(d.overscaledZ/v.transform.zoom)*.5;let $=d.canonical.toString();d.overscaledZ!==d.canonical.z&&($+=` => ${d.overscaledZ}`),function(ae,fe){ae.initDebugOverlayCanvas();const te=ae.debugOverlayCanvas,de=ae.context.gl,_e=ae.debugOverlayCanvas.getContext("2d");_e.clearRect(0,0,te.width,te.height),_e.shadowColor="white",_e.shadowBlur=2,_e.lineWidth=1.5,_e.strokeStyle="white",_e.textBaseline="top",_e.font="bold 36px Open Sans, sans-serif",_e.fillText(fe,5,5),_e.strokeText(fe,5,5),ae.debugOverlayTexture.update(te),ae.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)}(v,`${$} ${Z}kB`),T.draw(p,g.TRIANGLES,k,M,Bn.alphaBlended,Xn.disabled,sc(x,_.aT.transparent,Q),null,R,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),T.draw(p,g.LINE_STRIP,k,M,A,Xn.disabled,sc(x,_.aT.red),O,R,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function dn(v,s,d){const p=v.context,g=p.gl,x=v.colorModeForRenderPass(),T=new Xt(g.LEQUAL,Xt.ReadWrite,v.depthRangeFor3D),k=v.useProgram("terrain"),M=s.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,v.width,v.height]);for(const A of d){const R=v.renderToTexture.getTexture(A),O=s.getTerrainData(A.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,R.texture);const V={u_matrix:v.transform.calculatePosMatrix(A.tileID.toUnwrapped()),u_texture:0,u_ele_delta:s.getMeshFrameDelta(v.transform.zoom)};k.draw(p,g.TRIANGLES,T,ii.disabled,x,Xn.backCCW,V,O,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Wt{constructor(s,d){this.context=new Pg(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:_.Z(),renderTime:0},this.setup(),this.numSublayers=Qr.maxUnderzooming+Qr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new nc}resize(s,d,p){if(this.width=Math.floor(s*p),this.height=Math.floor(d*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const s=this.context,d=new _.a_;d.emplaceBack(0,0),d.emplaceBack(_.N,0),d.emplaceBack(0,_.N),d.emplaceBack(_.N,_.N),this.tileExtentBuffer=s.createVertexBuffer(d,ic.members),this.tileExtentSegments=_.S.simpleSegment(0,0,4,2);const p=new _.a_;p.emplaceBack(0,0),p.emplaceBack(_.N,0),p.emplaceBack(0,_.N),p.emplaceBack(_.N,_.N),this.debugBuffer=s.createVertexBuffer(p,ic.members),this.debugSegments=_.S.simpleSegment(0,0,4,5);const g=new _.V;g.emplaceBack(0,0,0,0),g.emplaceBack(_.N,0,_.N,0),g.emplaceBack(0,_.N,0,_.N),g.emplaceBack(_.N,_.N,_.N,_.N),this.rasterBoundsBuffer=s.createVertexBuffer(g,sn.members),this.rasterBoundsSegments=_.S.simpleSegment(0,0,4,2);const x=new _.a_;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(x,ic.members),this.viewportSegments=_.S.simpleSegment(0,0,4,2);const T=new _.a$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(T);const k=new _.b0;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(k);const M=this.context.gl;this.stencilClearMode=new ii({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=_.Z();_.aS(p,0,this.width,this.height,0,0,1),_.a0(p,p,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,d.TRIANGLES,Xt.disabled,this.stencilClearMode,Bn.disabled,Xn.disabled,wn(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source;const p=this.context,g=p.gl;this.nextStencilID+d.length>256&&this.clearStencil(),p.setColorMode(Bn.disabled),p.setDepthMode(Xt.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of d){const k=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);x.draw(p,g.TRIANGLES,Xt.disabled,new ii({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),Bn.disabled,Xn.disabled,wn(T.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new ii({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){const d=this.context.gl;return new ii({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){const d=this.context.gl,p=s.sort((T,k)=>k.overscaledZ-T.overscaledZ),g=p[p.length-1].overscaledZ,x=p[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const T={};for(let k=0;k<x;k++)T[k+g]=new ii({func:d.GEQUAL,mask:255},k+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=x,[T,p]}return[{[g]:ii.disabled},p]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Bn([s.CONSTANT_COLOR,s.ONE],new _.aT(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Bn.unblended:Bn.alphaBlended}depthModeForSublayer(s,d,p){if(!this.opaquePassEnabledForLayer())return Xt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Xt(p||this.context.gl.LEQUAL,d,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(_.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,x={},T={},k={};for(const M in g){const A=g[M];A.used&&A.prepare(this.context),x[M]=A.getVisibleCoordinates(),T[M]=x[M].slice().reverse(),k[M]=A.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<p.length;M++)if(this.style._layers[p[M]].is3D()){this.opaquePassCutoff=M;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const M=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!_.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||M.length)&&(_.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(A,R){const O=A.context,V=O.gl,Z=Bn.unblended,q=new Xt(V.LEQUAL,Xt.ReadWrite,[0,1]),Q=R.getTerrainMesh(),$=R.sourceCache.getRenderableTiles(),ae=A.useProgram("terrainDepth");O.bindFramebuffer.set(R.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),O.clear({color:_.aT.transparent,depth:1});for(const fe of $){const te=R.getTerrainData(fe.tileID),de={u_matrix:A.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_ele_delta:R.getMeshFrameDelta(A.transform.zoom)};ae.draw(O,V.TRIANGLES,q,ii.disabled,Z,Xn.backCCW,de,te,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain),function(A,R){const O=A.context,V=O.gl,Z=Bn.unblended,q=new Xt(V.LEQUAL,Xt.ReadWrite,[0,1]),Q=R.getTerrainMesh(),$=R.getCoordsTexture(),ae=R.sourceCache.getRenderableTiles(),fe=A.useProgram("terrainCoords");O.bindFramebuffer.set(R.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),O.clear({color:_.aT.transparent,depth:1}),R.coordsIndex=[];for(const te of ae){const de=R.getTerrainData(te.tileID);O.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,$.texture);const _e={u_matrix:A.transform.calculatePosMatrix(te.tileID.toUnwrapped()),u_terrain_coords_id:(255-R.coordsIndex.length)/255,u_texture:0,u_ele_delta:R.getMeshFrameDelta(A.transform.zoom)};fe.draw(O,V.TRIANGLES,q,ii.disabled,Z,Xn.backCCW,_e,de,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),R.coordsIndex.push(te.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const M of p){const A=this.style._layers[M];if(!A.hasOffscreenPass()||A.isHidden(this.transform.zoom))continue;const R=T[A.source];("custom"===A.type||R.length)&&this.renderLayer(this,g[A.source],A,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?_.aT.black:_.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[p[this.currentLayer]],A=g[M.source],R=x[M.source];this._renderTileClippingMasks(M,R),this.renderLayer(this,A,M,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const M=this.style._layers[p[this.currentLayer]],A=g[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const R=("symbol"===M.type?k:T)[M.source];this._renderTileClippingMasks(M,x[M.source]),this.renderLayer(this,A,M,R)}if(this.options.showTileBoundaries){const M=function(A,R){let O=null;const V=Object.values(A._layers).flatMap($=>$.source&&!$.isHidden(R)?[A.sourceCaches[$.source]]:[]),Z=V.filter($=>"vector"===$.getSource().type),q=V.filter($=>"vector"!==$.getSource().type),Q=$=>{(!O||O.getSource().maxzoom<$.getSource().maxzoom)&&(O=$)};return Z.forEach($=>Q($)),O||q.forEach($=>Q($)),O}(this.style,this.transform.zoom);M&&function(A,R,O){for(let V=0;V<O.length;V++)eo(A,R,O[V])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const A=M.transform.padding;_c(M,M.transform.height-(A.top||0),3,gc),_c(M,A.bottom||0,3,kl),fo(M,A.left||0,3,Oa),fo(M,M.transform.width-(A.right||0),3,Dh);const R=M.transform.centerPoint;var O,V,Z,q;Fa(O=M,(V=R.x)-1,(Z=M.transform.height-R.y)-10,2,20,q=Ih),Fa(O,V-10,Z-1,20,2,q)}(this),this.context.setDefault()}renderLayer(s,d,p,g){if(!p.isHidden(this.transform.zoom)&&("background"===p.type||"custom"===p.type||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":!function(x,T,k,M,A){if("translucent"!==x.renderPass)return;const R=ii.disabled,O=x.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(V,Z,q,Q,$,ae,fe){const te=Z.transform,de="map"===$,_e="map"===ae;for(const ve of V){const Te=Q.getTile(ve),Ae=Te.getBucket(q);if(!Ae||!Ae.text||!Ae.text.segments.get().length)continue;const Ie=_.ah(Ae.textSizeData,te.zoom),ze=se(Te,1,Z.transform.zoom),$e=Fe(ve.posMatrix,_e,de,Z.transform,ze),Lt="none"!==q.layout.get("icon-text-fit")&&Ae.hasIconData();if(Ie){const Ne=Math.pow(2,te.zoom-Te.tileID.overscaledZ);dd(Ae,de,_e,fe,te,$e,ve.posMatrix,Ne,Ie,Lt,Z.style.map.terrain?(ht,ot)=>Z.style.map.terrain.getElevation(ve,ht,ot):null)}}}(M,x,k,T,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),A),0!==k.paint.get("icon-opacity").constantOr(1)&&pc(x,T,k,M,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),R,O),0!==k.paint.get("text-opacity").constantOr(1)&&pc(x,T,k,M,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),R,O),T.map.showCollisionBoxes&&(ld(x,T,k,M,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),ld(x,T,k,M,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))}(s,d,p,g,this.style.placement.variableOffsets);break;case"circle":!function(x,T,k,M){if("translucent"!==x.renderPass)return;const A=k.paint.get("circle-opacity"),R=k.paint.get("circle-stroke-width"),O=k.paint.get("circle-stroke-opacity"),V=!k.layout.get("circle-sort-key").isConstant();if(0===A.constantOr(1)&&(0===R.constantOr(1)||0===O.constantOr(1)))return;const Z=x.context,q=Z.gl,Q=x.depthModeForSublayer(0,Xt.ReadOnly),$=ii.disabled,ae=x.colorModeForRenderPass(),fe=[];for(let te=0;te<M.length;te++){const de=M[te],_e=T.getTile(de),ve=_e.getBucket(k);if(!ve)continue;const Te=ve.programConfigurations.get(k.id),Ae=x.useProgram("circle",Te),Ie=ve.layoutVertexBuffer,ze=ve.indexBuffer,$e=x.style.map.terrain&&x.style.map.terrain.getTerrainData(de),Lt={programConfiguration:Te,program:Ae,layoutVertexBuffer:Ie,indexBuffer:ze,uniformValues:zn(x,de,_e,k),terrainData:$e};if(V){const Ne=ve.segments.get();for(const ht of Ne)fe.push({segments:new _.S([ht]),sortKey:ht.sortKey,state:Lt})}else fe.push({segments:ve.segments,sortKey:0,state:Lt})}V&&fe.sort((te,de)=>te.sortKey-de.sortKey);for(const te of fe){const{programConfiguration:de,program:_e,layoutVertexBuffer:ve,indexBuffer:Te,uniformValues:Ae,terrainData:Ie}=te.state;_e.draw(Z,q.TRIANGLES,Q,$,ae,Xn.disabled,Ae,Ie,k.id,ve,Te,te.segments,k.paint,x.transform.zoom,de)}}(s,d,p,g);break;case"heatmap":!function(x,T,k,M){if(0!==k.paint.get("heatmap-opacity"))if("offscreen"===x.renderPass){const A=x.context,R=A.gl,O=ii.disabled,V=new Bn([R.ONE,R.ONE],_.aT.transparent,[!0,!0,!0,!0]);(function(Z,q,Q){const $=Z.gl;Z.activeTexture.set($.TEXTURE1),Z.viewport.set([0,0,q.width/4,q.height/4]);let ae=Q.heatmapFbo;if(ae)$.bindTexture($.TEXTURE_2D,ae.colorAttachment.get()),Z.bindFramebuffer.set(ae.framebuffer);else{const fe=$.createTexture();$.bindTexture($.TEXTURE_2D,fe),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),ae=Q.heatmapFbo=Z.createFramebuffer(q.width/4,q.height/4,!1,!1),function(te,de,_e,ve){var Te,Ae;const Ie=te.gl,ze=null!==(Te=te.HALF_FLOAT)&&void 0!==Te?Te:Ie.UNSIGNED_BYTE,$e=null!==(Ae=te.RGBA16F)&&void 0!==Ae?Ae:Ie.RGBA;Ie.texImage2D(Ie.TEXTURE_2D,0,$e,de.width/4,de.height/4,0,Ie.RGBA,ze,null),ve.colorAttachment.set(_e)}(Z,q,fe,ae)}})(A,x,k),A.clear({color:_.aT.transparent});for(let Z=0;Z<M.length;Z++){const q=M[Z];if(T.hasRenderableParent(q))continue;const Q=T.getTile(q),$=Q.getBucket(k);if(!$)continue;const ae=$.programConfigurations.get(k.id),fe=x.useProgram("heatmap",ae),{zoom:te}=x.transform;fe.draw(A,R.TRIANGLES,Xt.disabled,O,V,Xn.disabled,kt(q.posMatrix,Q,te,k.paint.get("heatmap-intensity")),null,k.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,k.paint,x.transform.zoom,ae)}A.viewport.set([0,0,x.width,x.height])}else"translucent"===x.renderPass&&(x.context.setColorMode(x.colorModeForRenderPass()),function(A,R){const O=A.context,V=O.gl,Z=R.heatmapFbo;if(!Z)return;O.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,Z.colorAttachment.get()),O.activeTexture.set(V.TEXTURE1);let q=R.colorRampTexture;q||(q=R.colorRampTexture=new Zn(O,R.colorRamp,V.RGBA)),q.bind(V.LINEAR,V.CLAMP_TO_EDGE),A.useProgram("heatmapTexture").draw(O,V.TRIANGLES,Xt.disabled,ii.disabled,A.colorModeForRenderPass(),Xn.disabled,((Q,$,ae,fe)=>{const te=_.Z();_.aS(te,0,Q.width,Q.height,0,0,1);const de=Q.context.gl;return{u_matrix:te,u_world:[de.drawingBufferWidth,de.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:$.paint.get("heatmap-opacity")}})(A,R),null,R.id,A.viewportBuffer,A.quadTriangleIndexBuffer,A.viewportSegments,R.paint,A.transform.zoom)}(x,k))}(s,d,p,g);break;case"line":!function(x,T,k,M){if("translucent"!==x.renderPass)return;const A=k.paint.get("line-opacity"),R=k.paint.get("line-width");if(0===A.constantOr(1)||0===R.constantOr(1))return;const O=x.depthModeForSublayer(0,Xt.ReadOnly),V=x.colorModeForRenderPass(),Z=k.paint.get("line-dasharray"),q=k.paint.get("line-pattern"),Q=q.constantOr(1),$=k.paint.get("line-gradient"),ae=k.getCrossfadeParameters(),fe=Q?"linePattern":Z?"lineSDF":$?"lineGradient":"line",te=x.context,de=te.gl;let _e=!0;for(const ve of M){const Te=T.getTile(ve);if(Q&&!Te.patternsLoaded())continue;const Ae=Te.getBucket(k);if(!Ae)continue;const Ie=Ae.programConfigurations.get(k.id),ze=x.context.program.get(),$e=x.useProgram(fe,Ie),Lt=_e||$e.program!==ze,Ne=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ve),ht=q.constantOr(null);if(ht&&Te.imageAtlas){const zt=Te.imageAtlas,Et=zt.patternPositions[ht.to.toString()],Vt=zt.patternPositions[ht.from.toString()];Et&&Vt&&Ie.setConstantPatternPositions(Et,Vt)}const ot=Ne?ve:null,gn=Q?yh(x,Te,k,ae,ot):Z?xe(x,Te,k,Z,ae,ot):$?um(x,Te,k,Ae.lineClipsArray.length,ot):lc(x,Te,k,ot);if(Q)te.activeTexture.set(de.TEXTURE0),Te.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Ie.updatePaintBuffers(ae);else if(Z&&(Lt||x.lineAtlas.dirty))te.activeTexture.set(de.TEXTURE0),x.lineAtlas.bind(te);else if($){const zt=Ae.gradients[k.id];let Et=zt.texture;if(k.gradientVersion!==zt.version){let Vt=256;if(k.stepInterpolant){const Yn=T.getSource().maxzoom,Sn=ve.canonical.z===Yn?Math.ceil(1<<x.transform.maxZoom-ve.canonical.z):1;Vt=_.ad(_.aY(Ae.maxLineLength/_.N*1024*Sn),256,te.maxTextureSize)}zt.gradient=_.aZ({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Vt,image:zt.gradient||void 0,clips:Ae.lineClipsArray}),zt.texture?zt.texture.update(zt.gradient):zt.texture=new Zn(te,zt.gradient,de.RGBA),zt.version=k.gradientVersion,Et=zt.texture}te.activeTexture.set(de.TEXTURE0),Et.bind(k.stepInterpolant?de.NEAREST:de.LINEAR,de.CLAMP_TO_EDGE)}$e.draw(te,de.TRIANGLES,O,x.stencilModeForClipping(ve),V,Xn.disabled,gn,Ne,k.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,k.paint,x.transform.zoom,Ie,Ae.layoutVertexBuffer2),_e=!1}}(s,d,p,g);break;case"fill":!function(x,T,k,M){const A=k.paint.get("fill-color"),R=k.paint.get("fill-opacity");if(0===R.constantOr(1))return;const O=x.colorModeForRenderPass(),V=k.paint.get("fill-pattern"),Z=x.opaquePassEnabledForLayer()&&!V.constantOr(1)&&1===A.constantOr(_.aT.transparent).a&&1===R.constantOr(0)?"opaque":"translucent";if(x.renderPass===Z){const q=x.depthModeForSublayer(1,"opaque"===x.renderPass?Xt.ReadWrite:Xt.ReadOnly);mo(x,T,k,M,q,O,!1)}if("translucent"===x.renderPass&&k.paint.get("fill-antialias")){const q=x.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,Xt.ReadOnly);mo(x,T,k,M,q,O,!0)}}(s,d,p,g);break;case"fill-extrusion":!function(x,T,k,M){const A=k.paint.get("fill-extrusion-opacity");if(0!==A&&"translucent"===x.renderPass){const R=new Xt(x.context.gl.LEQUAL,Xt.ReadWrite,x.depthRangeFor3D);if(1!==A||k.paint.get("fill-extrusion-pattern").constantOr(1))fc(x,T,k,M,R,ii.disabled,Bn.disabled),fc(x,T,k,M,R,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const O=x.colorModeForRenderPass();fc(x,T,k,M,R,ii.disabled,O)}}}(s,d,p,g);break;case"hillshade":!function(x,T,k,M){if("offscreen"!==x.renderPass&&"translucent"!==x.renderPass)return;const A=x.context,R=x.depthModeForSublayer(0,Xt.ReadOnly),O=x.colorModeForRenderPass(),[V,Z]="translucent"===x.renderPass?x.stencilConfigForOverlap(M):[{},M];for(const q of Z){const Q=T.getTile(q);void 0!==Q.needsHillshadePrepare&&Q.needsHillshadePrepare&&"offscreen"===x.renderPass?ud(x,Q,k,R,ii.disabled,O):"translucent"===x.renderPass&&Oe(x,q,Q,k,R,V[q.overscaledZ],O)}A.viewport.set([0,0,x.width,x.height])}(s,d,p,g);break;case"raster":!function(x,T,k,M){if("translucent"!==x.renderPass||0===k.paint.get("raster-opacity")||!M.length)return;const A=x.context,R=A.gl,O=T.getSource(),V=x.useProgram("raster"),Z=x.colorModeForRenderPass(),[q,Q]=O instanceof lo?[{},M]:x.stencilConfigForOverlap(M),$=Q[Q.length-1].overscaledZ,ae=!x.options.moving;for(const fe of Q){const te=x.depthModeForSublayer(fe.overscaledZ-$,1===k.paint.get("raster-opacity")?Xt.ReadWrite:Xt.ReadOnly,R.LESS),de=T.getTile(fe);de.registerFadeDuration(k.paint.get("raster-fade-duration"));const _e=T.findLoadedParent(fe,0),ve=qe(de,_e,T,k,x.transform,x.style.map.terrain);let Te,Ae;const Ie="nearest"===k.paint.get("raster-resampling")?R.NEAREST:R.LINEAR;A.activeTexture.set(R.TEXTURE0),de.texture.bind(Ie,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),A.activeTexture.set(R.TEXTURE1),_e?(_e.texture.bind(Ie,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Te=Math.pow(2,_e.tileID.overscaledZ-de.tileID.overscaledZ),Ae=[de.tileID.canonical.x*Te%1,de.tileID.canonical.y*Te%1]):de.texture.bind(Ie,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const ze=x.style.map.terrain&&x.style.map.terrain.getTerrainData(fe),$e=ze?fe:null,Lt=$e?$e.posMatrix:x.transform.calculatePosMatrix(fe.toUnwrapped(),ae),Ne=pn(Lt,Ae||[0,0],Te||1,ve,k);O instanceof lo?V.draw(A,R.TRIANGLES,te,ii.disabled,Z,Xn.disabled,Ne,ze,k.id,O.boundsBuffer,x.quadTriangleIndexBuffer,O.boundsSegments):V.draw(A,R.TRIANGLES,te,q[fe.overscaledZ],Z,Xn.disabled,Ne,ze,k.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}}(s,d,p,g);break;case"background":!function(x,T,k,M){const A=k.paint.get("background-color"),R=k.paint.get("background-opacity");if(0===R)return;const O=x.context,V=O.gl,Z=x.transform,q=Z.tileSize,Q=k.paint.get("background-pattern");if(x.isPatternMissing(Q))return;const $=!Q&&1===A.a&&1===R&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==$)return;const ae=ii.disabled,fe=x.depthModeForSublayer(0,"opaque"===$?Xt.ReadWrite:Xt.ReadOnly),te=x.colorModeForRenderPass(),de=x.useProgram(Q?"backgroundPattern":"background"),_e=M||Z.coveringTiles({tileSize:q,terrain:x.style.map.terrain});Q&&(O.activeTexture.set(V.TEXTURE0),x.imageManager.bind(x.context));const ve=k.getCrossfadeParameters();for(const Te of _e){const Ae=M?Te.posMatrix:x.transform.calculatePosMatrix(Te.toUnwrapped()),Ie=Q?Oo(Ae,R,x,Q,{tileID:Te,tileSize:q},ve):or(Ae,R,A),ze=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Te);de.draw(O,V.TRIANGLES,fe,ae,te,Xn.disabled,Ie,ze,k.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}(s,0,p,g);break;case"custom":!function(x,T,k){const M=x.context,A=k.implementation;if("offscreen"===x.renderPass){const R=A.prerender;R&&(x.setCustomLayerDefaults(),M.setColorMode(x.colorModeForRenderPass()),R.call(A,M.gl,x.transform.customLayerMatrix()),M.setDirty(),x.setBaseState())}else if("translucent"===x.renderPass){x.setCustomLayerDefaults(),M.setColorMode(x.colorModeForRenderPass()),M.setStencilMode(ii.disabled);const R="3d"===A.renderingMode?new Xt(x.context.gl.LEQUAL,Xt.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,Xt.ReadOnly);M.setDepthMode(R),A.render(M.gl,x.transform.customLayerMatrix()),M.setDirty(),x.setBaseState(),M.bindFramebuffer.set(null)}}(s,0,p)}}translatePosMatrix(s,d,p,g,x){if(!p[0]&&!p[1])return s;const T=x?"map"===g?this.transform.angle:0:"viewport"===g?-this.transform.angle:0;if(T){const A=Math.sin(T),R=Math.cos(T);p=[p[0]*R-p[1]*A,p[0]*A+p[1]*R]}const k=[x?p[0]:se(d,p[0],this.transform.zoom),x?p[1]:se(d,p[1],this.transform.zoom),0],M=new Float32Array(16);return _.$(M,s,k),M}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const d=this.imageManager.getPattern(s.from.toString()),p=this.imageManager.getPattern(s.to.toString());return!d||!p}useProgram(s,d){this.cache=this.cache||{};const p=s+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new mt(this.context,Kn[s],d,id[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Zn(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}class Xi{constructor(s,d){this.points=s,this.planes=d}static fromInvProjectionMatrix(s,d,p){const g=Math.pow(2,p),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const M=1/(k=_.ag([],k,s))[3]/d*g;return _.b3(k,k,[M,M,1/k[3],M])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const M=function(V,Z){var q=Z[0],Q=Z[1],$=Z[2],ae=q*q+Q*Q+$*$;return ae>0&&(ae=1/Math.sqrt(ae)),V[0]=Z[0]*ae,V[1]=Z[1]*ae,V[2]=Z[2]*ae,V}([],(V=[],Z=Yo([],x[k[0]],x[k[1]]),q=Yo([],x[k[2]],x[k[1]]),Q=Z[0],fe=q[0],V[0]=($=Z[1])*(de=q[2])-(ae=Z[2])*(te=q[1]),V[1]=ae*fe-Q*de,V[2]=Q*te-$*fe,V)),A=-((R=M)[0]*(O=x[k[1]])[0]+R[1]*O[1]+R[2]*O[2]);var V,Z,q,Q,$,ae,fe,te,de,R,O;return M.concat(A)});return new Xi(x,T)}}class na{constructor(s,d){var p,g,x;this.min=s,this.max=d,this.center=function(p,g,x){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],((p=[])[0]=(g=this.min)[0]+(x=this.max)[0],p[1]=g[1]+x[1],p[2]=g[2]+x[2],p))}quadrant(s){const d=[s%2==0,s<2],p=Mo(this.min),g=Mo(this.max);for(let x=0;x<d.length;x++)p[x]=d[x]?this.min[x]:this.center[x],g[x]=d[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new na(p,g)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<s.planes.length;g++){const x=s.planes[g];let T=0;for(let k=0;k<d.length;k++)_.b4(x,d[k])>=0&&T++;if(0===T)return 0;T!==d.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let k=0;k<s.points.length;k++){const M=s.points[k][g]-this.min[g];x=Math.min(x,M),T=Math.max(T,M)}if(T<0||x>this.max[g]-this.min[g])return 0}return 1}}class Na{constructor(s=0,d=0,p=0,g=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=p,this.right=g}interpolate(s,d,p){return null!=d.top&&null!=s.top&&(this.top=_.B.number(s.top,d.top,p)),null!=d.bottom&&null!=s.bottom&&(this.bottom=_.B.number(s.bottom,d.bottom,p)),null!=d.left&&null!=s.left&&(this.left=_.B.number(s.left,d.left,p)),null!=d.right&&null!=s.right&&(this.right=_.B.number(s.right,d.right,p)),this}getCenter(s,d){const p=_.ad((this.left+s-this.right)/2,0,s),g=_.ad((this.top+d-this.bottom)/2,0,d);return new _.P(p,g)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Na(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class vc{constructor(s,d,p,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===x||!!x,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new _.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Na,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const s=new vc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this._minEleveationForCurrentTile=s._minEleveationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){void 0===s?s=!0:null===s&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new _.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const d=-_.b5(s,-180,180)*Math.PI/180;var p;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(p=new _.A(4),_.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),function(p,g,x){var T=g[0],k=g[1],M=g[2],A=g[3],R=Math.sin(x),O=Math.cos(x);p[0]=T*O+M*R,p[1]=k*O+A*R,p[2]=T*-R+M*O,p[3]=k*-R+A*O}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const d=_.ad(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,p){this._unmodified=!1,this._edgeInsets.interpolate(s,d,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){const d=[new _.b6(0,s)];if(this._renderWorldCopies){const p=this.pointCoordinate(new _.P(0,0)),g=this.pointCoordinate(new _.P(this.width,0)),x=this.pointCoordinate(new _.P(this.width,this.height)),T=this.pointCoordinate(new _.P(0,this.height)),k=Math.floor(Math.min(p.x,g.x,x.x,T.x)),M=Math.floor(Math.max(p.x,g.x,x.x,T.x)),A=1;for(let R=k-A;R<=M+A;R++)0!==R&&d.push(new _.b6(R,s))}return d}coveringTiles(s){var d,p;let g=this.coveringZoomLevel(s);const x=g;if(void 0!==s.minzoom&&g<s.minzoom)return[];void 0!==s.maxzoom&&g>s.maxzoom&&(g=s.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),k=_.U.fromLngLat(this.center),M=Math.pow(2,g),A=[M*T.x,M*T.y,0],R=[M*k.x,M*k.y,0],O=Xi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let V=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(V=g);const Z=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,q=te=>({aabb:new na([te*M,0,0],[(te+1)*M,M,0]),zoom:0,x:0,y:0,wrap:te,fullyVisible:!1}),Q=[],$=[],ae=g,fe=s.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let te=1;te<=3;te++)Q.push(q(-te)),Q.push(q(te));for(Q.push(q(0));Q.length>0;){const te=Q.pop(),de=te.x,_e=te.y;let ve=te.fullyVisible;if(!ve){const $e=te.aabb.intersects(O);if(0===$e)continue;ve=2===$e}const Te=s.terrain?A:R,Ae=te.aabb.distanceX(Te),Ie=te.aabb.distanceY(Te),ze=Math.max(Math.abs(Ae),Math.abs(Ie));if(te.zoom===ae||ze>Z+(1<<ae-te.zoom)-2&&te.zoom>=V){const $e=ae-te.zoom,Lt=A[0]-.5-(de<<$e),Ne=A[1]-.5-(_e<<$e);$.push({tileID:new _.O(te.zoom===ae?fe:te.zoom,te.wrap,te.zoom,de,_e),distanceSq:wa([R[0]-.5-de,R[1]-.5-_e]),tileDistanceToCamera:Math.sqrt(Lt*Lt+Ne*Ne)})}else for(let $e=0;$e<4;$e++){const Lt=(de<<1)+$e%2,Ne=(_e<<1)+($e>>1),ht=te.zoom+1;let ot=te.aabb.quadrant($e);if(s.terrain){const gn=new _.O(ht,te.wrap,ht,Lt,Ne),zt=s.terrain.getMinMaxElevation(gn),Et=null!==(d=zt.minElevation)&&void 0!==d?d:this.elevation,Vt=null!==(p=zt.maxElevation)&&void 0!==p?p:this.elevation;ot=new na([ot.min[0],ot.min[1],Et],[ot.max[0],ot.max[1],Vt])}Q.push({aabb:ot,zoom:ht,x:Lt,y:Ne,wrap:te.wrap,fullyVisible:ve})}}return $.sort((te,de)=>te.distanceSq-de.distanceSq).map(te=>te.tileID)}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const d=_.ad(s.lat,-this.maxValidLatitude,this.maxValidLatitude);return new _.P(_.G(s.lng)*this.worldSize,_.H(d)*this.worldSize)}unproject(s){return new _.U(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const d=this.pointLocation(this.centerPoint,s),p=s.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),x=_.U.fromLngLat(g.lngLat,g.altitude),T=_.U.fromLngLat(d,p),k=x.x-T.x,M=x.y-T.y,A=x.z-T.z,R=Math.sqrt(k*k+M*M+A*A),O=this.scaleZoom(this.cameraToCenterDistance/R/this.tileSize);this._elevation=p,this._center=d,this.zoom=O}setLocationAtPoint(s,d){const p=this.pointCoordinate(d),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(s),T=new _.U(x.x-(p.x-g.x),x.y-(p.y-g.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,d){return d?this.coordinatePoint(this.locationCoordinate(s),d.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,d){return this.coordinateLocation(this.pointCoordinate(s,d))}locationCoordinate(s){return _.U.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,d){if(d){const V=d.pointCoordinate(s);if(null!=V)return V}const p=[s.x,s.y,0,1],g=[s.x,s.y,1,1];_.ag(p,p,this.pixelMatrixInverse),_.ag(g,g,this.pixelMatrixInverse);const x=p[3],T=g[3],k=p[1]/x,M=g[1]/T,A=p[2]/x,R=g[2]/T,O=A===R?0:(0-A)/(R-A);return new _.U(_.B.number(p[0]/x,g[0]/T,O)/this.worldSize,_.B.number(k,M,O)/this.worldSize)}coordinatePoint(s,d=0,p=this.pixelMatrix){const g=[s.x*this.worldSize,s.y*this.worldSize,d,1];return _.ag(g,g,p),new _.P(g[0]/g[3],g[1]/g[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return(new Nn).extend(this.pointLocation(new _.P(0,s))).extend(this.pointLocation(new _.P(this.width,s))).extend(this.pointLocation(new _.P(this.width,this.height))).extend(this.pointLocation(new _.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Nn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(s,d=!1){const p=s.key,g=d?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const x=s.canonical,T=this.worldSize/this.zoomScale(x.z),k=x.x+Math.pow(2,x.z)*s.wrap,M=_.ao(new Float64Array(16));return _.$(M,M,[k*T,x.y*T,0]),_.a0(M,M,[T/_.N,T/_.N,1]),_.a1(M,d?this.alignedProjMatrix:this.projMatrix,M),g[p]=new Float32Array(M),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s,d,p,g,x=-90,T=90,k=-180,M=180;const A=this.size,R=this._unmodified;if(this.latRange){const Z=this.latRange;x=_.H(Z[1])*this.worldSize,T=_.H(Z[0])*this.worldSize,s=T-x<A.y?A.y/(T-x):0}if(this.lngRange){const Z=this.lngRange;k=_.b5(_.G(Z[0])*this.worldSize,0,this.worldSize),M=_.b5(_.G(Z[1])*this.worldSize,0,this.worldSize),M<k&&(M+=this.worldSize),d=M-k<A.x?A.x/(M-k):0}const O=this.point,V=Math.max(d||0,s||0);if(V)return this.center=this.unproject(new _.P(d?(M+k)/2:O.x,s?(T+x)/2:O.y)),this.zoom+=this.scaleZoom(V),this._unmodified=R,void(this._constraining=!1);if(this.latRange){const Z=O.y,q=A.y/2;Z-q<x&&(g=x+q),Z+q>T&&(g=T-q)}if(this.lngRange){const Z=(k+M)/2,q=_.b5(O.x,Z-this.worldSize/2,Z+this.worldSize/2),Q=A.x/2;q-Q<k&&(p=k+Q),q+Q>M&&(p=M-Q)}void 0===p&&void 0===g||(this.center=this.unproject(new _.P(void 0!==p?p:O.x,void 0!==g?g:O.y)).wrap()),this._unmodified=R,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,d=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=_.b7(1,this.center.lat)*this.worldSize;let g=_.ao(new Float64Array(16));_.a0(g,g,[this.width/2,-this.height/2,1]),_.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=_.ao(new Float64Array(16)),_.a0(g,g,[1,-1,1]),_.$(g,g,[-1,-1,0]),_.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),k=x-T*this._pixelPerMeter/Math.cos(this._pitch),M=T<0?k:x,A=Math.PI/2+this._pitch,R=this._fov*(.5+s.y/this.height),O=Math.sin(R)*M/Math.sin(_.ad(Math.PI-A-R,.01,Math.PI-.01)),V=this.getHorizon(),Z=2*Math.atan(V/this.cameraToCenterDistance)*(.5+s.y/(2*V)),q=Math.sin(Z)*M/Math.sin(_.ad(Math.PI-A-Z,.01,Math.PI-.01)),Q=Math.min(O,q),$=1.01*(Math.cos(Math.PI/2-this._pitch)*Q+M),ae=this.height/50;g=new Float64Array(16),_.b8(g,this._fov,this.width/this.height,ae,$),g[8]=2*-s.x/this.width,g[9]=2*s.y/this.height,_.a0(g,g,[1,-1,1]),_.$(g,g,[0,0,-this.cameraToCenterDistance]),_.b9(g,g,this._pitch),_.ae(g,g,this.angle),_.$(g,g,[-d,-p,0]),this.mercatorMatrix=_.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),_.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=_.a1(new Float64Array(16),this.labelPlaneMatrix,g),_.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=_.as([],g),this.pixelMatrix3D=_.a1(new Float64Array(16),this.labelPlaneMatrix,g);const fe=this.width%2/2,te=this.height%2/2,de=Math.cos(this.angle),_e=Math.sin(this.angle),ve=d-Math.round(d)+de*fe+_e*te,Te=p-Math.round(p)+de*te+_e*fe,Ae=new Float64Array(g);if(_.$(Ae,Ae,[ve>.5?ve-1:ve,Te>.5?Te-1:Te,0]),this.alignedProjMatrix=Ae,g=_.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new _.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return _.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new _.P(0,s))}getCameraQueryGeometry(s){const d=this.getCameraPoint();if(1===s.length)return[s[0],d];{let p=d.x,g=d.y,x=d.x,T=d.y;for(const k of s)p=Math.min(p,k.x),g=Math.min(g,k.y),x=Math.max(x,k.x),T=Math.max(T,k.y);return[new _.P(p,g),new _.P(x,g),new _.P(x,T),new _.P(p,T),new _.P(p,g)]}}}function Tr(v,s){let d,p=!1,g=null,x=null;const T=()=>{g=null,p&&(v.apply(x,d),g=setTimeout(T,s),p=!1)};return(...k)=>(p=!0,x=this,d=k,g||T(),g)}class Ts{constructor(s){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let p;return d.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:p,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=Tr(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(s){const d=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),T=Math.round(d.lng*x)/x,k=Math.round(d.lat*x)/x,M=this._map.getBearing(),A=this._map.getPitch();let R="";if(R+=s?`/${T}/${k}/${p}`:`${p}/${k}/${T}`,(M||A)&&(R+="/"+Math.round(10*M)/10),A&&(R+=`/${Math.round(A)}`),this._hashName){const O=this._hashName;let V=!1;const Z=window.location.hash.slice(1).split("&").map(q=>{const Q=q.split("=")[0];return Q===O?(V=!0,`${Q}=${R}`):q}).filter(q=>q);return V||Z.push(`${O}=${R}`),`#${Z.join("&")}`}return`#${R}`}}const La={linearity:.3,easing:_.ba(0,0,.3,1)},cu=_.e({deceleration:2500,maxSpeed:1400},La),hd=_.e({deceleration:20,maxSpeed:1400},La),du=_.e({deceleration:1e3,maxSpeed:360},La),uu=_.e({deceleration:1e3,maxSpeed:90},La);class El{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:_.h.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=_.h.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new _.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)d.zoom+=x.zoomDelta||0,d.bearing+=x.bearingDelta||0,d.pitch+=x.pitchDelta||0,x.panDelta&&d.pan._add(x.panDelta),x.around&&(d.around=x.around),x.pinchAround&&(d.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(d.pan.mag()){const x=Ml(d.pan.mag(),p,_.e({},cu,s||{}));g.offset=d.pan.mult(x.amount/d.pan.mag()),g.center=this._map.transform.center,No(g,x)}if(d.zoom){const x=Ml(d.zoom,p,hd);g.zoom=this._map.transform.zoom+x.amount,No(g,x)}if(d.bearing){const x=Ml(d.bearing,p,du);g.bearing=this._map.transform.bearing+_.ad(x.amount,-179,179),No(g,x)}if(d.pitch){const x=Ml(d.pitch,p,uu);g.pitch=this._map.transform.pitch+x.amount,No(g,x)}if(g.zoom||g.bearing){const x=void 0===d.pinchAround?d.around:d.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),_.e(g,{noMoveStart:!0})}}function No(v,s){(!v.duration||v.duration<s.duration)&&(v.duration=s.duration,v.easing=s.easing)}function Ml(v,s,d){const{maxSpeed:p,linearity:g,deceleration:x}=d,T=_.ad(v*g/(s/1e3),-p,p),k=Math.abs(T)/(x*g);return{easing:d.easing,duration:1e3*k,amount:T*(k/2)}}class to extends _.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,p,g={}){const x=be.mousePos(d.getCanvasContainer(),p),T=d.unproject(x);super(s,_.e({point:x,lngLat:T,originalEvent:p},g)),this._defaultPrevented=!1,this.target=d}}class Dl extends _.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,p){const g="touchend"===s?p.changedTouches:p.touches,x=be.touchPos(d.getCanvasContainer(),g),T=x.map(M=>d.unproject(M)),k=x.reduce((M,A,R,O)=>M.add(A.div(O.length)),new _.P(0,0));super(s,{points:x,point:k,lngLats:T,lngLat:d.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class Ah extends _.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,p){super(s,{originalEvent:p}),this._defaultPrevented=!1}}class Ph{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Ah(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new to(s.type,this._map,s))}mouseup(s){this._map.fire(new to(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new to(s.type,this._map,s))}dblclick(s){return this._firePreventable(new to(s.type,this._map,s))}mouseover(s){this._map.fire(new to(s.type,this._map,s))}mouseout(s){this._map.fire(new to(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Dl(s.type,this._map,s))}touchmove(s){this._map.fire(new Dl(s.type,this._map,s))}touchend(s){this._map.fire(new Dl(s.type,this._map,s))}touchcancel(s){this._map.fire(new Dl(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class go{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new to(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new to("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new to(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ks{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(_.P.convert(s),this._map.terrain)}}class hu{constructor(s,d){this._map=s,this._tr=new ks(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&0===s.button&&(be.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const p=d;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=be.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const x=Math.min(g.x,p.x),T=Math.max(g.x,p.x),k=Math.min(g.y,p.y),M=Math.max(g.y,p.y);be.setTransform(this._box,`translate(${x}px,${k}px)`),this._box.style.width=T-x+"px",this._box.style.height=M-k+"px"}mouseupWindow(s,d){if(!this._active||0!==s.button)return;const p=this._startPos,g=d;if(this.reset(),be.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new _.k("boxzoomend",{originalEvent:s})),{cameraAnimation:x=>x.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&27===s.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(be.remove(this._box),this._box=null),be.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new _.k(s,{originalEvent:d}))}}function _o(v,s){if(v.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${s.length}`);const d={};for(let p=0;p<v.length;p++)d[v[p].identifier]=s[p];return d}class Es{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=s.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const x=new _.P(0,0);for(const T of g)x._add(T);return x.div(g.length)}(d),this.touches=_o(p,d)))}touchmove(s,d,p){if(this.aborted||!this.centroid)return;const g=_o(p,d);for(const x in this.touches){const T=g[x];(!T||T.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(s,d,p){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),0===p.length){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class pd{constructor(s){this.singleTap=new Es(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,p){this.singleTap.touchstart(s,d,p)}touchmove(s,d,p){this.singleTap.touchmove(s,d,p)}touchend(s,d,p){const g=this.singleTap.touchend(s,d,p);if(g){const x=s.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(x&&T||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ms{constructor(s){this._tr=new ks(s),this._zoomIn=new pd({numTouches:1,numTaps:2}),this._zoomOut=new pd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,p){this._zoomIn.touchstart(s,d,p),this._zoomOut.touchstart(s,d,p)}touchmove(s,d,p){this._zoomIn.touchmove(s,d,p),this._zoomOut.touchmove(s,d,p)}touchend(s,d,p){const g=this._zoomIn.touchend(s,d,p),x=this._zoomOut.touchend(s,d,p),T=this._tr;return g?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(g)},{originalEvent:s})}):x?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(x)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rs{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const g=d.length?d[0]:d;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&be.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const fm={0:1,2:2};class pu{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const d=be.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(d,p){const g=fm[p];return void 0===d.buttons||(d.buttons&g)!==g}(s,this._eventButton)}isValidEndEvent(s){return be.mouseButton(s)===this._eventButton}}class Rh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return 1===s.targetTouches.length}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}const ai=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(s){s.preventDefault()}},Il=({enable:v,clickTolerance:s,bearingDegreesPerPixelMoved:d=.8})=>{const p=new pu({checkCorrectEvent:g=>0===be.mouseButton(g)&&g.ctrlKey||2===be.mouseButton(g)});return new rs({clickTolerance:s,move:(g,x)=>({bearingDelta:(x.x-g.x)*d}),moveStateManager:p,enable:v,assignEvents:ai})},Ds=({enable:v,clickTolerance:s,pitchDegreesPerPixelMoved:d=-.5})=>{const p=new pu({checkCorrectEvent:g=>0===be.mouseButton(g)&&g.ctrlKey||2===be.mouseButton(g)});return new rs({clickTolerance:s,move:(g,x)=>({pitchDelta:(x.y-g.y)*d}),moveStateManager:p,enable:v,assignEvents:ai})};class Qe{constructor(s,d){this._minTouches=s.cooperativeGestures?2:1,this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new _.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(s,d,p){return this._calculateTransform(s,d,p)}touchmove(s,d,p){if(this._map._cooperativeGestures&&(2===this._minTouches&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(s,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return s.preventDefault(),this._calculateTransform(s,d,p)}touchend(s,d,p){this._calculateTransform(s,d,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,p){p.length>0&&(this._active=!0);const g=_o(p,d),x=new _.P(0,0),T=new _.P(0,0);let k=0;for(const A in g){const R=g[A],O=this._touches[A];O&&(x._add(R),T._add(R.sub(O)),k++,g[A]=R)}if(this._touches=g,k<this._minTouches||!T.mag())return;const M=T.div(k);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(k),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,p){if(!this._firstTwoTouches)return;s.preventDefault();const[g,x]=this._firstTwoTouches,T=ia(p,d,g),k=ia(p,d,x);if(!T||!k)return;const M=this._aroundCenter?null:T.add(k).div(2);return this._move([T,k],M,s)}touchend(s,d,p){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,T=ia(p,d,g),k=ia(p,d,x);T&&k||(this._active&&be.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&"center"===s.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ia(v,s,d){for(let p=0;p<v.length;p++)if(v[p].identifier===d)return s[p]}function za(v,s){return Math.log(v/s)/Math.LN2}class Je extends Vn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const p=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(za(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:za(this._distance,p),pinchAround:d}}}function Be(v,s){return 180*v.angleWith(s)/Math.PI}class Jt extends Vn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d){const p=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Be(this._vector,p),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,p=Be(s,this._startVector);return Math.abs(p)<d}}function Ii(v){return Math.abs(v.y)>Math.abs(v.x)}class kr extends Vn{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,p){super.touchstart(s,d,p),this._currentTouchCount=p.length}_start(s){this._lastPoints=s,Ii(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=s[0].sub(this._lastPoints[0]),x=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,p.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,p){if(void 0!==this._valid)return this._valid;const g=s.mag()>=2,x=d.mag()>=2;if(!g&&!x)return;if(!g||!x)return void 0===this._firstMove&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=s.y>0==d.y>0;return Ii(s)&&Ii(d)&&T}}const ra={panStep:100,bearingStep:15,pitchStep:10};class jr{constructor(s){this._tr=new ks(s);const d=ra;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,p=0,g=0,x=0,T=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?p=-1:(s.preventDefault(),x=-1);break;case 39:s.shiftKey?p=1:(s.preventDefault(),x=1);break;case 38:s.shiftKey?g=1:(s.preventDefault(),T=-1);break;case 40:s.shiftKey?g=-1:(s.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:k=>{const M=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:mu,zoom:d?Math.round(M.zoom)+d*(s.shiftKey?2:1):M.zoom,bearing:M.bearing+p*this._bearingStep,pitch:M.pitch+g*this._pitchStep,offset:[-x*this._panStep,-T*this._panStep],center:M.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function mu(v){return v*(2-v)}const fu=4.000244140625;class md{constructor(s,d){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=s,this._tr=new ks(s),this._el=s.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&"center"===s.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!s[this._map._metaKey])return;s.preventDefault()}let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const p=_.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,0!==d&&d%fu==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(g*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=be.mousePos(this._el,s),p=this._tr;this._around=_.L.convert(this._aroundCenter?p.center:p.unproject(d)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(0!==this._delta){const k="wheel"===this._type&&Math.abs(this._delta)>fu?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&0!==M&&(M=1/M);const A="number"==typeof this._targetZoom?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(A*M))),"wheel"===this._type&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d="number"==typeof this._targetZoom?this._targetZoom:s.zoom,p=this._startZoom,g=this._easing;let x,T=!1;if("wheel"===this._type&&p&&g){const k=Math.min((_.h.now()-this._lastWheelEventTime)/200,1),M=g(k);x=_.B.number(p,d,M),k<1?this._frameId||(this._frameId=!0):T=!0}else x=d,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:x-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=_.bb;if(this._prevEase){const p=this._prevEase,g=(_.h.now()-p.start)/p.duration,x=p.easing(g+.01)-p.easing(g),T=.27/Math.sqrt(x*x+1e-4)*.01,k=Math.sqrt(.0729-T*T);d=_.ba(T,k,.25,1)}return this._prevEase={start:_.h.now(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class gu{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _u{constructor(s){this._tr=new ks(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qn{constructor(){this._tap=new pd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,p){if(!this._swipePoint)if(this._tapTime){const g=d[0],x=s.timeStamp-this._tapTime<500,T=this._tapPoint.dist(g)<30;x&&T?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(s,d,p)}touchmove(s,d,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=d[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,s.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(s,d,p)}touchend(s,d,p){if(this._tapTime)this._swipePoint&&0===p.length&&this.reset();else{const g=this._tap.touchend(s,d,p);g&&(this._tapTime=s.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ye{constructor(s,d,p){this._el=s,this._mousePan=d,this._touchPan=p}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ft{constructor(s,d,p){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class mn{constructor(s,d,p,g){this._el=s,this._touchZoom=d,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Er=v=>v.zoom||v.drag||v.pitch||v.rotate;class Ba extends _.k{}function wi(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class oa{constructor(s,d){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if("blur"===g.type)return void this.stop(!0);this._updatingCamera=!0;const T="renderFrame"===g.type?void 0:g,k={needsRenderFrame:!1},M={},A={},R=g.touches,O=R?this._getMapTouches(R):void 0,V=O?be.touchPos(this._el,O):be.mousePos(this._el,g);for(const{handlerName:Q,handler:$,allowed:ae}of this._handlers){if(!$.isEnabled())continue;let fe;this._blockedByActive(A,ae,Q)?$.reset():$[x||g.type]&&(fe=$[x||g.type](g,V,O),this.mergeHandlerResult(k,M,fe,Q,T),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||$.isActive())&&(A[Q]=$)}const Z={};for(const Q in this._previousActiveHandlers)A[Q]||(Z[Q]=T);this._previousActiveHandlers=A,(Object.keys(Z).length||wi(k))&&(this._changes.push([k,M,Z]),this._triggerRenderFrame()),(Object.keys(A).length||wi(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=k;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new El(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,T]of this._listeners)be.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[s,d,p]of this._listeners)be.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(s){const d=this._map,p=d.getCanvasContainer();this._add("mapEvent",new Ph(d,s));const g=d.boxZoom=new hu(d,s);this._add("boxZoom",g),s.interactive&&s.boxZoom&&g.enable();const x=new Ms(d),T=new _u(d);d.doubleClickZoom=new gu(T,x),this._add("tapZoom",x),this._add("clickZoom",T),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();const k=new Qn;this._add("tapDragZoom",k);const M=d.touchPitch=new kr(d);this._add("touchPitch",M),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);const A=Il(s),R=Ds(s);d.dragRotate=new ft(s,A,R),this._add("mouseRotate",A,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();const O=(({enable:ae,clickTolerance:fe})=>{const te=new pu({checkCorrectEvent:de=>0===be.mouseButton(de)&&!de.ctrlKey});return new rs({clickTolerance:fe,move:(de,_e)=>({around:_e,panDelta:_e.sub(de)}),activateOnStart:!0,moveStateManager:te,enable:ae,assignEvents:ai})})(s),V=new Qe(s,d);d.dragPan=new Ye(p,O,V),this._add("mousePan",O),this._add("touchPan",V,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);const Z=new Jt,q=new Je;d.touchZoomRotate=new mn(p,q,Z,k),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",q,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate);const Q=d.scrollZoom=new md(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Q,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);const $=d.keyboard=new jr(d);this._add("keyboard",$),s.interactive&&s.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new go(d))}_add(s,d,p){this._handlers.push({handlerName:s,handler:d,allowed:p}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Er(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,p){for(const g in s)if(g!==p&&(!d||d.indexOf(g)<0))return!0;return!1}_getMapTouches(s){const d=[];for(const p of s)this._el.contains(p.target)&&d.push(p);return d}mergeHandlerResult(s,d,p,g,x){if(!p)return;_.e(s,p);const T={handlerName:g,originalEvent:p.originalEvent||x};void 0!==p.zoomDelta&&(d.zoom=T),void 0!==p.panDelta&&(d.drag=T),void 0!==p.pitchDelta&&(d.pitch=T),void 0!==p.bearingDelta&&(d.rotate=T)}_applyChanges(){const s={},d={},p={};for(const[g,x,T]of this._changes)g.panDelta&&(s.panDelta=(s.panDelta||new _.P(0,0))._add(g.panDelta)),g.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+g.pitchDelta),void 0!==g.around&&(s.around=g.around),void 0!==g.pinchAround&&(s.pinchAround=g.pinchAround),g.noInertia&&(s.noInertia=g.noInertia),_.e(d,x),_.e(p,T);this._updateMapTransform(s,d,p),this._changes=[]}_updateMapTransform(s,d,p){const g=this._map,x=g._getTransformForUpdate(),T=g.terrain;if(!(wi(s)||T&&this._terrainMovement))return this._fireEvents(d,p,!0);let{panDelta:k,zoomDelta:M,bearingDelta:A,pitchDelta:R,around:O,pinchAround:V}=s;void 0!==V&&(O=V),g._stop(!0),O=O||g.transform.centerPoint;const Z=x.pointLocation(k?O.sub(k):O);A&&(x.bearing+=A),R&&(x.pitch+=R),M&&(x.zoom+=M),T?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(k)):x.setLocationAtPoint(Z,O):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(Z,O),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(Z,O),g._applyUpdatedTransform(x),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,p,!0)}_fireEvents(s,d,p){const g=Er(this._eventsInProgress),x=Er(s),T={};for(const R in s){const{originalEvent:O}=s[R];this._eventsInProgress[R]||(T[`${R}start`]=O),this._eventsInProgress[R]=s[R]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const R in T)this._fireEvent(R,T[R]);x&&this._fireEvent("move",x.originalEvent);for(const R in s){const{originalEvent:O}=s[R];this._fireEvent(R,O)}const k={};let M;for(const R in this._eventsInProgress){const{handlerName:O,originalEvent:V}=this._eventsInProgress[R];this._handlersById[O].isActive()||(delete this._eventsInProgress[R],M=d[O]||V,k[`${R}end`]=M)}for(const R in k)this._fireEvent(R,k[R]);const A=Er(this._eventsInProgress);if(p&&(g||x)&&!A){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),O=V=>0!==V&&-this._bearingSnap<V&&V<this._bearingSnap;!R||!R.essential&&_.h.prefersReducedMotion?(this._map.fire(new _.k("moveend",{originalEvent:M})),O(this._map.getBearing())&&this._map.resetNorth()):(O(R.bearing||this._map.getBearing())&&(R.bearing=0),R.freezeElevation=!0,this._map.easeTo(R,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new _.k(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new Ba("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class li extends _.E{constructor(s,d){super(),this._renderFrameCallback=()=>{const p=Math.min((_.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new _.L(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,p){return s=_.P.convert(s).mult(-1),this.panTo(this.transform.center,_.e({offset:s},d),p)}panTo(s,d,p){return this.easeTo(_.e({center:s},d),p)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,p){return this.easeTo(_.e({zoom:s},d),p)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,p){return this.easeTo(_.e({bearing:s},d),p)}resetNorth(s,d){return this.rotateTo(0,_.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(_.e({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=Nn.convert(s);const p=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),p,d)}_cameraForBoxAndBearing(s,d,p,g){const x={top:0,bottom:0,right:0,left:0};if("number"==typeof(g=_.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding){const _e=g.padding;g.padding={top:_e,bottom:_e,right:_e,left:_e}}g.padding=_.e(x,g.padding);const T=this.transform,k=T.padding,M=T.project(_.L.convert(s)),A=T.project(_.L.convert(d)),R=M.rotate(-p*Math.PI/180),O=A.rotate(-p*Math.PI/180),V=new _.P(Math.max(R.x,O.x),Math.max(R.y,O.y)),Z=new _.P(Math.min(R.x,O.x),Math.min(R.y,O.y)),q=V.sub(Z),Q=(T.width-(k.left+k.right+g.padding.left+g.padding.right))/q.x,$=(T.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/q.y;if($<0||Q<0)return void _.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ae=Math.min(T.scaleZoom(T.scale*Math.min(Q,$)),g.maxZoom),fe=_.P.convert(g.offset),te=new _.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),de=fe.add(te).mult(T.scale/T.zoomScale(ae));return{center:T.unproject(M.add(A).div(2).sub(de)),zoom:ae,bearing:p}}fitBounds(s,d,p){return this._fitInternal(this.cameraForBounds(s,d),d,p)}fitScreenCoordinates(s,d,p,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(_.P.convert(s)),this.transform.pointLocation(_.P.convert(d)),p,g),g,x)}_fitInternal(s,d,p){return s?(delete(d=_.e(s,d)).padding,d.linear?this.easeTo(d,p):this.flyTo(d,p)):this}jumpTo(s,d){this.stop();const p=this._getTransformForUpdate();let g=!1,x=!1,T=!1;return"zoom"in s&&p.zoom!==+s.zoom&&(g=!0,p.zoom=+s.zoom),void 0!==s.center&&(p.center=_.L.convert(s.center)),"bearing"in s&&p.bearing!==+s.bearing&&(x=!0,p.bearing=+s.bearing),"pitch"in s&&p.pitch!==+s.pitch&&(T=!0,p.pitch=+s.pitch),null==s.padding||p.isPaddingEqual(s.padding)||(p.padding=s.padding),this._applyUpdatedTransform(p),this.fire(new _.k("movestart",d)).fire(new _.k("move",d)),g&&this.fire(new _.k("zoomstart",d)).fire(new _.k("zoom",d)).fire(new _.k("zoomend",d)),x&&this.fire(new _.k("rotatestart",d)).fire(new _.k("rotate",d)).fire(new _.k("rotateend",d)),T&&this.fire(new _.k("pitchstart",d)).fire(new _.k("pitch",d)).fire(new _.k("pitchend",d)),this.fire(new _.k("moveend",d))}calculateCameraOptionsFromTo(s,d,p,g=0){const x=_.U.fromLngLat(s,d),T=_.U.fromLngLat(p,g),k=T.x-x.x,M=T.y-x.y,A=T.z-x.z,R=Math.hypot(k,M,A);if(0===R)throw new Error("Can't calculate camera options with same From and To");const O=Math.hypot(k,M),V=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),Z=180*Math.atan2(k,-M)/Math.PI;let q=180*Math.acos(O/R)/Math.PI;return q=A<0?90-q:90+q,{center:T.toLngLat(),zoom:V,pitch:q,bearing:Z}}easeTo(s,d){this._stop(!1,s.easeId),(!1===(s=_.e({offset:[0,0],duration:500,easing:_.bb},s)).animate||!s.essential&&_.h.prefersReducedMotion)&&(s.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),T=this.getPitch(),k=this.getPadding(),M="zoom"in s?+s.zoom:g,A="bearing"in s?this._normalizeBearing(s.bearing,x):x,R="pitch"in s?+s.pitch:T,O="padding"in s?s.padding:p.padding,V=_.P.convert(s.offset);let Z=p.centerPoint.add(V);const q=p.pointLocation(Z),Q=_.L.convert(s.center||q);this._normalizeCenter(Q);const $=p.project(q),ae=p.project(Q).sub($),fe=p.zoomScale(M-g);let te,de;s.around&&(te=_.L.convert(s.around),de=p.locationPoint(te));const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==g,this._rotating=this._rotating||x!==A,this._pitching=this._pitching||R!==T,this._padding=!p.isPaddingEqual(O),this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,_e),this.terrain&&this._prepareElevation(Q),this._ease(ve=>{if(this._zooming&&(p.zoom=_.B.number(g,M,ve)),this._rotating&&(p.bearing=_.B.number(x,A,ve)),this._pitching&&(p.pitch=_.B.number(T,R,ve)),this._padding&&(p.interpolatePadding(k,O,ve),Z=p.centerPoint.add(V)),this.terrain&&!s.freezeElevation&&this._updateElevation(ve),te)p.setLocationAtPoint(te,de);else{const Te=p.zoomScale(p.zoom-g),Ae=M>g?Math.min(2,fe):Math.max(.5,fe),Ie=Math.pow(Ae,1-ve),ze=p.unproject($.add(ae.mult(ve*Ie)).mult(Te));p.setLocationAtPoint(p.renderWorldCopies?ze.wrap():ze,Z)}this._applyUpdatedTransform(p),this._fireMoveEvents(d)},ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,ve)},s),this}_prepareEase(s,d,p={}){this._moving=!0,d||p.moving||this.fire(new _.k("movestart",s)),this._zooming&&!p.zooming&&this.fire(new _.k("zoomstart",s)),this._rotating&&!p.rotating&&this.fire(new _.k("rotatestart",s)),this._pitching&&!p.pitching&&this.fire(new _.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(p-(d-(p*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.elevation=_.B.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(s){if(!this.transformCameraUpdate)return;const d=s.clone(),{center:p,zoom:g,pitch:x,bearing:T,elevation:k}=this.transformCameraUpdate(d);p&&(d.center=p),void 0!==g&&(d.zoom=g),void 0!==x&&(d.pitch=x),void 0!==T&&(d.bearing=T),void 0!==k&&(d.elevation=k),this.transform.apply(d)}_fireMoveEvents(s){this.fire(new _.k("move",s)),this._zooming&&this.fire(new _.k("zoom",s)),this._rotating&&this.fire(new _.k("rotate",s)),this._pitching&&this.fire(new _.k("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const p=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new _.k("zoomend",s)),g&&this.fire(new _.k("rotateend",s)),x&&this.fire(new _.k("pitchend",s)),this.fire(new _.k("moveend",s))}flyTo(s,d){if(!s.essential&&_.h.prefersReducedMotion){const ot=_.F(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ot,d)}this.stop(),s=_.e({offset:[0,0],speed:1.2,curve:1.42,easing:_.bb},s);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),T=this.getPitch(),k=this.getPadding(),M="zoom"in s?_.ad(+s.zoom,p.minZoom,p.maxZoom):g,A="bearing"in s?this._normalizeBearing(s.bearing,x):x,R="pitch"in s?+s.pitch:T,O="padding"in s?s.padding:p.padding,V=p.zoomScale(M-g),Z=_.P.convert(s.offset);let q=p.centerPoint.add(Z);const Q=p.pointLocation(q),$=_.L.convert(s.center||Q);this._normalizeCenter($);const ae=p.project(Q),fe=p.project($).sub(ae);let te=s.curve;const de=Math.max(p.width,p.height),_e=de/V,ve=fe.mag();if("minZoom"in s){const ot=_.ad(Math.min(s.minZoom,g,M),p.minZoom,p.maxZoom),gn=de/p.zoomScale(ot-g);te=Math.sqrt(gn/ve*2)}const Te=te*te;function Ae(ot){const gn=(_e*_e-de*de+(ot?-1:1)*Te*Te*ve*ve)/(2*(ot?_e:de)*Te*ve);return Math.log(Math.sqrt(gn*gn+1)-gn)}function Ie(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function ze(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const $e=Ae(!1);let Lt=function(ot){return ze($e)/ze($e+te*ot)},Ne=function(ot){return de*((ze($e)*(Ie(gn=$e+te*ot)/ze(gn))-Ie($e))/Te)/ve;var gn},ht=(Ae(!0)-$e)/te;if(Math.abs(ve)<1e-6||!isFinite(ht)){if(Math.abs(de-_e)<1e-6)return this.easeTo(s,d);const ot=_e<de?-1:1;ht=Math.abs(Math.log(_e/de))/te,Ne=function(){return 0},Lt=function(gn){return Math.exp(ot*te*gn)}}return s.duration="duration"in s?+s.duration:1e3*ht/("screenSpeed"in s?+s.screenSpeed/te:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=x!==A,this._pitching=R!==T,this._padding=!p.isPaddingEqual(O),this._prepareEase(d,!1),this.terrain&&this._prepareElevation($),this._ease(ot=>{const gn=ot*ht,zt=1/Lt(gn);p.zoom=1===ot?M:g+p.scaleZoom(zt),this._rotating&&(p.bearing=_.B.number(x,A,ot)),this._pitching&&(p.pitch=_.B.number(T,R,ot)),this._padding&&(p.interpolatePadding(k,O,ot),q=p.centerPoint.add(Z)),this.terrain&&!s.freezeElevation&&this._updateElevation(ot);const Et=1===ot?$:p.unproject(ae.add(fe.mult(Ne(gn))).mult(zt));p.setLocationAtPoint(p.renderWorldCopies?Et.wrap():Et,q),this._applyUpdatedTransform(p),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,d)}if(!s){const p=this.handlers;p&&p.stop(!1)}return this}_ease(s,d,p){!1===p.animate||0===p.duration?(s(1),d()):(this._easeStart=_.h.now(),this._easeOptions=p,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=_.b5(s,-180,180);const p=Math.abs(s-d);return Math.abs(s-360-d)<p&&(s-=360),Math.abs(s+360-d)<p&&(s+=360),s}_normalizeCenter(s){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const p=s.lng-d.center.lng;s.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(_.L.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}class Si{constructor(s={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType&&"terrain"!==d.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options&&this.options.compact,this._container=be.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=be.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=be.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){be.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const p=this._map._getUIString(`AttributionControl.${d}`);s.title=p,s.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(g=>"string"!=typeof g?"":g)):"string"==typeof this.options.customAttribution&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const d=this._map.style.sourceCaches;for(const g in d){const x=d[g];if(x.used||x.usedForTerrain){const T=x.getSource();T.attribution&&s.indexOf(T.attribution)<0&&s.push(T.attribution)}}s=s.filter(g=>String(g).trim()),s.sort((g,x)=>g.length-x.length),s=s.filter((g,x)=>{for(let T=x+1;T<s.length;T++)if(s[T].indexOf(g)>=0)return!1;return!0});const p=s.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,s.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class fn{constructor(s={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const p=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=be.create("div","maplibregl-ctrl");const d=be.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){be.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Tt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,p=d?this._queue.concat(d):this._queue;for(const g of p)if(g.id===s)return void(g.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const p of d)if(!p.cancelled&&(p.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Va={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var vu=_.Q([{name:"a_pos3d",type:"Int16",components:3}]);class ja extends _.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];const p={};for(const g of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),_.aS(g.posMatrix,0,_.N,0,_.N,0,1),this._tiles[g.key]=new Ea(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(s){for(const d in this._tiles){const p=this._tiles[d];(!s||p.tileID.equals(s)||p.tileID.isChildOf(s)||s.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const d={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(s.canonical)){const x=s.clone();x.posMatrix=new Float64Array(16),_.aS(x.posMatrix,0,_.N,0,_.N,0,1),d[p]=x}else if(g.canonical.isChildOf(s.canonical)){const x=s.clone();x.posMatrix=new Float64Array(16);const T=g.canonical.z-s.canonical.z,k=g.canonical.x-(g.canonical.x>>T<<T),M=g.canonical.y-(g.canonical.y>>T<<T),A=_.N>>T;_.aS(x.posMatrix,0,A,0,A,0,1),_.$(x.posMatrix,x.posMatrix,[-k*A,-M*A,0]),d[p]=x}else if(s.canonical.isChildOf(g.canonical)){const x=s.clone();x.posMatrix=new Float64Array(16);const T=s.canonical.z-g.canonical.z,k=s.canonical.x-(s.canonical.x>>T<<T),M=s.canonical.y-(s.canonical.y>>T<<T),A=_.N>>T;_.aS(x.posMatrix,0,_.N,0,_.N,0,1),_.$(x.posMatrix,x.posMatrix,[k*A,M*A,0]),_.a0(x.posMatrix,x.posMatrix,[1/2**T,1/2**T,0]),d[p]=x}}return d}getSourceTile(s,d){const p=this.sourceCache._source;let g=s.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!x||!x.dem)&&d)for(;g>=p.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(s.scaledTo(g--).key);return x}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=s)}}class ci{constructor(s,d,p){this.painter=s,this.sourceCache=new ja(d),this.options=p,this.exaggeration="number"==typeof p.exaggeration?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,p,g=_.N){var x;if(!(d>=0&&d<g&&p>=0&&p<g))return 0;const T=this.getTerrainData(s),k=null===(x=T.tile)||void 0===x?void 0:x.dem;if(!k)return 0;const M=((q=[])[0]=($=T.u_terrain_matrix)[0]*(ae=(Q=[d/g*_.N,p/g*_.N])[0])+$[4]*(fe=Q[1])+$[12],q[1]=$[1]*ae+$[5]*fe+$[13],q),A=[M[0]*k.dim,M[1]*k.dim],R=Math.floor(A[0]),O=Math.floor(A[1]),V=A[0]-R,Z=A[1]-O;var q,Q,$,ae,fe;return k.get(R,O)*(1-V)*(1-Z)+k.get(R+1,O)*V*(1-Z)+k.get(R,O+1)*(1-V)*Z+k.get(R+1,O+1)*V*Z}getElevationForLngLatZoom(s,d){const{tileID:p,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(p,g%_.N,x%_.N,_.N)}getElevation(s,d,p,g=_.N){return this.getDEMElevation(s,d,p,g)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const g=this.painter.context,x=new _.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Zn(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Zn(g,new _.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=_.ao([])}const d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const g=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new Zn(g,d.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),d.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const p=d&&d+d.tileID.key+s.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=g?x=s.canonical.z-g:_.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=s.canonical.x-(s.canonical.x>>x<<x),k=s.canonical.y-(s.canonical.y>>x<<x),M=_.bc(new Float64Array(16),[1/(_.N<<x),1/(_.N<<x),0]);_.$(M,M,[T*_.N,k*_.N,0]),this._demMatrixCache[s.key]={matrix:M,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){const d=this.painter,p=d.width/devicePixelRatio,g=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Zn(d.context,{width:p,height:g,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Zn(d.context,{width:p,height:g,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set("coords"===s?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,T=0;x<this._coordsTextureSize;x++)for(let k=0;k<this._coordsTextureSize;k++,T+=4)d[T+0]=255&k,d[T+1]=255&x,d[T+2]=k>>8<<4|x>>8,d[T+3]=0;const p=new _.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),g=new Zn(s,p,s.gl.RGBA,{premultiply:!1});return g.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(s){const d=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,d),p.bindFramebuffer.set(null);const x=d[0]+(d[2]>>4<<8),T=d[1]+((15&d[2])<<8),k=this.coordsIndex[255-d[3]],M=k&&this.sourceCache.getTileByID(k);if(!M)return null;const A=this._coordsTextureSize,R=(1<<M.tileID.canonical.z)*A;return new _.U((M.tileID.canonical.x*A+x)/R,(M.tileID.canonical.y*A+T)/R,this.getElevation(M.tileID,x,T,A))}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.painter.context,d=new _.bd,p=new _.b0,g=this.meshSize,x=_.N/g,T=g*g;for(let O=0;O<=g;O++)for(let V=0;V<=g;V++)d.emplaceBack(V*x,O*x,0);for(let O=0;O<T;O+=g+1)for(let V=0;V<g;V++)p.emplaceBack(V+O,g+V+O+1,g+V+O+2),p.emplaceBack(V+O,g+V+O+2,V+O+1);const k=d.length,M=k+2*(g+1);for(const O of[0,1])for(let V=0;V<=g;V++)for(const Z of[0,1])d.emplaceBack(V*x,O*_.N,Z);for(let O=0;O<2*g;O+=2)p.emplaceBack(M+O,M+O+1,M+O+3),p.emplaceBack(M+O,M+O+3,M+O+2),p.emplaceBack(k+O,k+O+3,k+O+1),p.emplaceBack(k+O,k+O+2,k+O+3);const A=d.length,R=A+2*(g+1);for(const O of[0,1])for(let V=0;V<=g;V++)for(const Z of[0,1])d.emplaceBack(O*_.N,V*x,Z);for(let O=0;O<2*g;O+=2)p.emplaceBack(A+O,A+O+1,A+O+3),p.emplaceBack(A+O,A+O+3,A+O+2),p.emplaceBack(R+O,R+O+3,R+O+1),p.emplaceBack(R+O,R+O+2,R+O+3);return this._mesh={indexBuffer:s.createIndexBuffer(p),vertexBuffer:s.createVertexBuffer(d,vu.members),segments:_.S.simpleSegment(0,0,d.length,p.length)},this._mesh}getMeshFrameDelta(s){return 2*Math.PI*_.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,d){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(s,d);return null!==(p=this.getMinMaxElevation(g).minElevation)&&void 0!==p?p:0}getMinMaxElevation(s){const d=this.getTerrainData(s).tile,p={minElevation:null,maxElevation:null};return d&&d.dem&&(p.minElevation=d.dem.min*this.exaggeration,p.maxElevation=d.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(s,d){const p=_.U.fromLngLat(s.wrap()),g=(1<<d)*_.N,x=p.x*g,T=p.y*g,k=Math.floor(x/_.N),M=Math.floor(T/_.N);return{tileID:new _.O(d,0,d,k,M),mercatorX:x,mercatorY:T}}}class yc{constructor(s,d,p){this._context=s,this._size=d,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Zn(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(p.texture),{id:s,fbo:d,texture:p,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>s.id!==d),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(s=>!s.inUse)}}const Ci={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class no{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new yc(s.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(p=>!s._layers[p].isHidden(d)),this._coordsDescendingInv={};for(const p in s.sourceCaches){this._coordsDescendingInv[p]={};const g=s.sourceCaches[p].getVisibleCoordinates();for(const x of g){const T=this.terrain.sourceCache.getTerrainCoords(x);for(const k in T)this._coordsDescendingInv[p][k]||(this._coordsDescendingInv[p][k]=[]),this._coordsDescendingInv[p][k].push(T[k])}}this._coordsDescendingInvStr={};for(const p of s._order){const g=s._layers[p],x=g.source;if(Ci[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const T in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][T]=this._coordsDescendingInv[x][T].map(k=>k.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][p.tileID.key];x&&x!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;const d=s.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Ci[d]&&(this._prevType&&Ci[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(s.id),!g))return!0;if(Ci[this._prevType]||Ci[d]&&g){this._prevType=d;const x=this._stacks.length-1,T=this._stacks[x]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(dn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[x]){const A=this.pool.getObjectForId(k.rtt[x].id);if(A.stamp===k.rtt[x].stamp){this.pool.useObject(A);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),k.rtt[x]={id:M.id,stamp:M.stamp},p.context.bindFramebuffer.set(M.fbo.framebuffer),p.context.clear({color:_.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let A=0;A<T.length;A++){const R=p.style._layers[T[A]],O=R.source?this._coordsDescendingInv[R.source][k.tileID.key]:[k.tileID];p.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),p._renderTileClippingMasks(R,O),p.renderLayer(p,p.style.sourceCaches[R.source],R,O),R.source&&(k.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][k.tileID.key])}}return dn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ci[d]}return!1}}const ut={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:_.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},vo=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Lo={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ua{constructor(s,d,p=!1){this.mousedown=T=>{this.startMouse(_.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),be.mousePos(this.element,T)),be.addEventListener(window,"mousemove",this.mousemove),be.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,be.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{1!==T.targetTouches.length?this.reset():(this._startPos=this._lastPos=be.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),be.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),be.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{1!==T.targetTouches.length?this.reset():(this._lastPos=be.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{0===T.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=s.dragRotate._mouseRotate.getClickTolerance(),x=s.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Il({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:k,bearingDegreesPerPixelMoved:M=.8})=>{const A=new Rh;return new rs({clickTolerance:k,move:(R,O)=>({bearingDelta:(O.x-R.x)*M}),moveStateManager:A,enable:T,assignEvents:vo})})({clickTolerance:g,enable:!0}),this.map=s,p&&(this.mousePitch=Ds({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:k,pitchDegreesPerPixelMoved:M=-.5})=>{const A=new Rh;return new rs({clickTolerance:k,move:(R,O)=>({pitchDelta:(O.y-R.y)*M}),moveStateManager:A,enable:T,assignEvents:vo})})({clickTolerance:x,enable:!0})),be.addEventListener(d,"mousedown",this.mousedown),be.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),be.addEventListener(d,"touchcancel",this.reset)}startMouse(s,d){this.mouseRotate.dragStart(s,d),this.mousePitch&&this.mousePitch.dragStart(s,d),be.disableDrag()}startTouch(s,d){this.touchRotate.dragStart(s,d),this.touchPitch&&this.touchPitch.dragStart(s,d),be.disableDrag()}moveMouse(s,d){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(s,d)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(s,d)||{};x&&p.setPitch(p.getPitch()+x)}}moveTouch(s,d){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(s,d)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(s,d)||{};x&&p.setPitch(p.getPitch()+x)}}off(){const s=this.element;be.removeEventListener(s,"mousedown",this.mousedown),be.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),be.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),be.removeEventListener(window,"touchend",this.touchend),be.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){be.enableDrag(),be.removeEventListener(window,"mousemove",this.mousemove),be.removeEventListener(window,"mouseup",this.mouseup),be.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),be.removeEventListener(window,"touchend",this.touchend)}}let Gn;function $t(v,s,d){if(v=new _.L(v.lng,v.lat),s){const p=new _.L(v.lng-360,v.lat),g=new _.L(v.lng+360,v.lat),x=d.locationPoint(v).distSqr(s);d.locationPoint(p).distSqr(s)<x?v=p:d.locationPoint(g).distSqr(s)<x&&(v=g)}for(;Math.abs(v.lng-d.center.lng)>180;){const p=d.locationPoint(v);if(p.x>=0&&p.y>=0&&p.x<=d.width&&p.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v}const zo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fd(v,s,d){const p=v.classList;for(const g in zo)p.remove(`maplibregl-${d}-anchor-${g}`);p.add(`maplibregl-${d}-anchor-${s}`)}class sa extends _.E{constructor(s){if(super(),this._onKeyPress=d=>{const p=d.code,g=d.charCode||d.keyCode;"Space"!==p&&"Enter"!==p&&32!==g&&13!==g||this.togglePopup()},this._onMapClick=d=>{const p=d.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();("terrain"===d?.type||"render"===d?.type&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=$t(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?g=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?x="rotateX(0deg)":"map"===this._pitchAlignment&&(x=`rotateX(${this._map.getPitch()}deg)`),d&&"moveend"!==d.type||(this._pos=this._pos.round()),be.setTransform(this._element,`${zo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),k=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*k?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new _.k("dragstart"))),this.fire(new _.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new _.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&"auto"!==s.pitchAlignment?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=_.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=be.create("div"),this._element.setAttribute("aria-label","Map marker");const d=be.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${p}px`),d.setAttributeNS(null,"width",`${g}px`),d.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const x=be.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const T=be.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const k=be.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ae of M){const fe=be.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ae.rx),fe.setAttributeNS(null,"ry",ae.ry),k.appendChild(fe)}const A=be.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill",this._color);const R=be.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),A.appendChild(R);const O=be.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"opacity","0.25"),O.setAttributeNS(null,"fill","#000000");const V=be.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),O.appendChild(V);const Z=be.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");const q=be.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Q=be.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#000000"),Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962");const $=be.createNS("http://www.w3.org/2000/svg","circle");$.setAttributeNS(null,"fill","#FFFFFF"),$.setAttributeNS(null,"cx","5.5"),$.setAttributeNS(null,"cy","5.5"),$.setAttributeNS(null,"r","5.4999962"),q.appendChild(Q),q.appendChild($),T.appendChild(k),T.appendChild(A),T.appendChild(O),T.appendChild(Z),T.appendChild(q),d.appendChild(T),d.setAttributeNS(null,"height",p*this._scale+"px"),d.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(d),this._offset=_.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),fd(this._element,this._anchor,"marker"),s&&s.className)for(const d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),be.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=_.L.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const g=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(24.6+g)],"bottom-right":[-g,-1*(24.6+g)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=s,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?s.remove():s.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(s){return this._offset=_.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&"auto"!==s?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const un={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let An=0,Bo=!1;const Is={maxWidth:100,unit:"metric"};function gi(v,s,d){const p=d&&d.maxWidth||100,g=v._container.clientHeight/2,x=v.unproject([0,g]),T=v.unproject([p,g]),k=x.distanceTo(T);if(d&&"imperial"===d.unit){const M=3.2808*k;M>5280?Al(s,p,M/5280,v._getUIString("ScaleControl.Miles")):Al(s,p,M,v._getUIString("ScaleControl.Feet"))}else d&&"nautical"===d.unit?Al(s,p,k/1852,v._getUIString("ScaleControl.NauticalMiles")):k>=1e3?Al(s,p,k/1e3,v._getUIString("ScaleControl.Kilometers")):Al(s,p,k,v._getUIString("ScaleControl.Meters"))}function Al(v,s,d,p){const g=function(x){const T=Math.pow(10,`${Math.floor(x)}`.length-1);let k=x/T;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(M){const A=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*A)/A}(k),T*k}(d);v.style.width=s*(g/d)+"px",v.innerHTML=`${g}&nbsp;${p}`}const ar={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Qi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function aa(v){if(v){if("number"==typeof v){const s=Math.round(Math.abs(v)/Math.SQRT2);return{center:new _.P(0,0),top:new _.P(0,v),"top-left":new _.P(s,s),"top-right":new _.P(-s,s),bottom:new _.P(0,-v),"bottom-left":new _.P(s,-s),"bottom-right":new _.P(-s,-s),left:new _.P(v,0),right:new _.P(-v,0)}}if(v instanceof _.P||Array.isArray(v)){const s=_.P.convert(v);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:_.P.convert(v.center||[0,0]),top:_.P.convert(v.top||[0,0]),"top-left":_.P.convert(v["top-left"]||[0,0]),"top-right":_.P.convert(v["top-right"]||[0,0]),bottom:_.P.convert(v.bottom||[0,0]),"bottom-left":_.P.convert(v["bottom-left"]||[0,0]),"bottom-right":_.P.convert(v["bottom-right"]||[0,0]),left:_.P.convert(v.left||[0,0]),right:_.P.convert(v.right||[0,0])}}return aa(new _.P(0,0))}const As={extend:(v,...s)=>_.e(v,...s),run(v){v()},logToElement(v,s=!1,d="log"){const p=window.document.getElementById(d);p&&(s&&(p.innerHTML=""),p.innerHTML+=`<br>${v}`)}};class Nt{static get version(){return"3.5.2"}static get workerCount(){return uo.workerCount}static set workerCount(s){uo.workerCount=s}static get maxParallelImageRequests(){return _.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(s){_.c.MAX_PARALLEL_IMAGE_REQUESTS=s}static get workerUrl(){return _.c.WORKER_URL}static set workerUrl(s){_.c.WORKER_URL=s}static addProtocol(s,d){_.c.REGISTERED_PROTOCOLS[s]=d}static removeProtocol(s){delete _.c.REGISTERED_PROTOCOLS[s]}}return Nt.Map=class extends li{constructor(v){if(_.bf.mark(_.bg.create),null!=(v=_.e({},ut,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new vc(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._cooperativeGesturesOnWheel=s=>{this._onCooperativeGesture(s,s[this._metaKey],1)},this._contextLost=s=>{s.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new _.k("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new _.k("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._cooperativeGestures=v.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new Tt,this._controls=[],this._mapId=_.a2(),this._locale=_.e({},Va,v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=wr.addThrottleControl(()=>this.isMoving()),this._requestManager=new td(v.transformRequest),"string"==typeof v.container){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const d=Tr(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{s?d(p):s=!0}),this._resizeObserver.observe(this._container)}this.handlers=new oa(this,v),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=v.hash&&new Ts("string"==typeof v.hash&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,_.e({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new Si({customAttribution:v.customAttribution})),v.maplibreLogo&&this.addControl(new fn,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update("style"===s.dataType),this.fire(new _.k(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new _.k(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new _.k("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(v,s){if(void 0===s&&(s=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new _.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[s];return-1!==s.indexOf("bottom")?p.insertBefore(d,p.firstChild):p.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new _.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(v);return s>-1&&this._controls.splice(s,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,s,d,p){return null==p&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,s,d,p)}resize(v){var s;const d=this._containerDimensions(),p=d[0],g=d[1],x=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,x),this.painter.resize(p,g,x),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const M=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,M),this.painter.resize(p,g,M)}this.transform.resize(p,g),null===(s=this._requestedCameraState)||void 0===s||s.resize(p,g);const T=!this._moving;return T&&(this.stop(),this.fire(new _.k("movestart",v)).fire(new _.k("move",v))),this.fire(new _.k("resize",v)),T&&this.fire(new _.k("moveend",v)),this}_getClampedPixelRatio(v,s){const{0:d,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),x=v*g,T=s*g;return Math.min(x>d?d/x:1,T>p?p/T:1)*g}getPixelRatio(){var v;return null!==(v=this._overridePixelRatio)&&void 0!==v?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Nn.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(v){return this.transform.locationPoint(_.L.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(_.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||(null===(v=this.handlers)||void 0===v?void 0:v.isMoving())}isZooming(){var v;return this._zooming||(null===(v=this.handlers)||void 0===v?void 0:v.isZooming())}isRotating(){var v;return this._rotating||(null===(v=this.handlers)||void 0===v?void 0:v.isRotating())}_createDelegatedListener(v,s,d){if("mouseenter"===v||"mouseover"===v){let p=!1;return{layer:s,listener:d,delegates:{mousemove:x=>{const T=this.getLayer(s)?this.queryRenderedFeatures(x.point,{layers:[s]}):[];T.length?p||(p=!0,d.call(this,new to(v,this,x.originalEvent,{features:T}))):p=!1},mouseout:()=>{p=!1}}}}if("mouseleave"===v||"mouseout"===v){let p=!1;return{layer:s,listener:d,delegates:{mousemove:T=>{(this.getLayer(s)?this.queryRenderedFeatures(T.point,{layers:[s]}):[]).length?p=!0:p&&(p=!1,d.call(this,new to(v,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,d.call(this,new to(v,this,T.originalEvent)))}}}}{const p=g=>{const x=this.getLayer(s)?this.queryRenderedFeatures(g.point,{layers:[s]}):[];x.length&&(g.features=x,d.call(this,g),delete g.features)};return{layer:s,listener:d,delegates:{[v]:p}}}}on(v,s,d){if(void 0===d)return super.on(v,s);const p=this._createDelegatedListener(v,s,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(v,s,d){if(void 0===d)return super.once(v,s);const p=this._createDelegatedListener(v,s,d);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(v,s,d){return void 0===d?super.off(v,s):(this._delegatedListeners&&this._delegatedListeners[v]&&(p=>{const g=this._delegatedListeners[v];for(let x=0;x<g.length;x++){const T=g[x];if(T.layer===s&&T.listener===d){for(const k in T.delegates)this.off(k,T.delegates[k]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(v,s){if(!this.style)return[];let d;const p=v instanceof _.P||Array.isArray(v),g=p?v:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(p?{}:v)||{},g instanceof _.P||"number"==typeof g[0])d=[_.P.convert(g)];else{const x=_.P.convert(g[0]),T=_.P.convert(g[1]);d=[x,new _.P(T.x,x.y),T,new _.P(x.x,T.y),x]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(v,s){return this.style.querySourceFeatures(v,s)}setStyle(v,s){return!1!==(s=_.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(v,s))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const s=this._locale[v];if(null==s)throw new Error(`Missing UI string '${v}'`);return s}_updateStyle(v,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,s));const d=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Zi(this,s||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof v?this.style.loadURL(v,s,d):this.style.loadJSON(v,s,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Zi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,s){if("string"==typeof v){const d=this._requestManager.transformRequest(v,xi.Style);_.f(d,(p,g)=>{p?this.fire(new _.j(p)):g&&this._updateDiff(g,s)})}else"object"==typeof v&&this._updateDiff(v,s)}_updateDiff(v,s){try{this.style.setState(v,s)&&this._update(!0)}catch(d){_.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(v,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():_.w("There is no style added to the map.")}addSource(v,s){return this._lazyInitEmptyStyle(),this.style.addSource(v,s),this._update(!0)}isSourceLoaded(v){const s=this.style&&this.style.sourceCaches[v];if(void 0!==s)return s.loaded();this.fire(new _.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const s=this.style.sourceCaches[v.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);for(const d in this.style._layers){const p=this.style._layers[d];"hillshade"===p.type&&p.source===v.source&&_.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ci(this.painter,s,v),this.painter.renderToTexture=new no(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{"style"===d.dataType?this.terrain.sourceCache.freeRtt():"source"===d.dataType&&d.tile&&(d.sourceId!==v.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new _.k("terrain",{terrain:v})),this}getTerrain(){var v,s;return null!==(s=null===(v=this.terrain)||void 0===v?void 0:v.options)&&void 0!==s?s:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const s in v){const d=v[s]._tiles;for(const p in d){const g=d[p];if("loaded"!==g.state&&"errored"!==g.state)return!1}}return!0}addSourceType(v,s,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,s,d)}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,s,d={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:x,stretchY:T,content:k}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||_.a(s))){if(void 0===s.width||void 0===s.height)return this.fire(new _.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:M,height:A,data:R}=s,O=s;return this.style.addImage(v,{data:new _.R({width:M,height:A},new Uint8Array(R)),pixelRatio:p,stretchX:x,stretchY:T,content:k,sdf:g,version:0,userImage:O}),O.onAdd&&O.onAdd(this,v),this}}{const{width:M,height:A,data:R}=_.h.getImageData(s);this.style.addImage(v,{data:new _.R({width:M,height:A},R),pixelRatio:p,stretchX:x,stretchY:T,content:k,sdf:g,version:0})}}updateImage(v,s){const d=this.style.getImage(v);if(!d)return this.fire(new _.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=s instanceof HTMLImageElement||_.a(s)?_.h.getImageData(s):s,{width:g,height:x,data:T}=p;if(void 0===g||void 0===x)return this.fire(new _.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==d.data.width||x!==d.data.height)return this.fire(new _.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(s instanceof HTMLImageElement||_.a(s));return d.data.replace(T,k),this.style.updateImage(v,d),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new _.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,s){wr.getImage(this._requestManager.transformRequest(v,xi.Image),s)}listImages(){return this.style.listImages()}addLayer(v,s){return this._lazyInitEmptyStyle(),this.style.addLayer(v,s),this._update(!0)}moveLayer(v,s){return this.style.moveLayer(v,s),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,s,d){return this.style.setLayerZoomRange(v,s,d),this._update(!0)}setFilter(v,s,d={}){return this.style.setFilter(v,s,d),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,s,d,p={}){return this.style.setPaintProperty(v,s,d,p),this._update(!0)}getPaintProperty(v,s){return this.style.getPaintProperty(v,s)}setLayoutProperty(v,s,d,p={}){return this.style.setLayoutProperty(v,s,d,p),this._update(!0)}getLayoutProperty(v,s){return this.style.getLayoutProperty(v,s)}setGlyphs(v,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,s,d,p=>{p||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,s,d=>{d||this._update(!0)}),this}setLight(v,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,s),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,s){return this.style.setFeatureState(v,s),this._update()}removeFeatureState(v,s){return this.style.removeFeatureState(v,s),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,s=0;return this._container&&(v=this._container.clientWidth||400,s=this._container.clientHeight||300),[v,s]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const s=this._canvasContainer=be.create("div","maplibregl-canvas-container",v);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=be.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),p=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],p);const g=this._controlContainer=be.create("div","maplibregl-control-container",v),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{x[T]=be.create("div",`maplibregl-ctrl-${T} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=be.create("div","maplibregl-cooperative-gesture-screen",this._container);let v="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(v="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${v}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){be.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(v,s,d){this._canvas.width=Math.floor(d*v),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let s=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{s={requestedAttributes:v},p&&(s.statusMessage=p.statusMessage,s.type=p.type)},{once:!0});const d=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!d){const p="Failed to initialize WebGL";throw s?(s.message=p,new Error(JSON.stringify(s))):new Error(p)}this.painter=new Wt(d,this.transform),Eo.testSupport(d)}_onCooperativeGesture(v,s,d){return!s&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=_.h.now();this.style.zoomHistory.update(g,x);const T=new _.a8(g,{now:x,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=T.crossFadingFactor();1===k&&k===this._crossFadingFactor||(d=!0,this._crossFadingFactor=k),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new _.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,_.bf.mark(_.bg.load),this.fire(new _.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new _.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,_.bf.mark(_.bg.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),wr.removeThrottleControl(this._imageQueueHandle),null===(v=this._resizeObserver)||void 0===v||v.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),be.remove(this._canvasContainer),be.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),_.bf.clearMetrics(),this._removed=!0,this.fire(new _.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=_.h.frame(v=>{_.bf.frame(v),this._frame=null,this._render(v)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return"3.5.2"}getCameraTargetElevation(){return this.transform.elevation}},Nt.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const s=this._map.getZoom(),d=s===this._map.getMaxZoom(),p=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,d)=>{const p=this._map._getUIString(`NavigationControl.${d}`);s.title=p,s.setAttribute("aria-label",p)},this.options=_.e({},Lo,v),this._container=be.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),be.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),be.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=be.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ua(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){be.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,s){const d=be.create("button",v,this._container);return d.type="button",d.addEventListener("click",s),d}},Nt.GeolocateControl=class extends _.E{constructor(v){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new _.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(s),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new _.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{const d=new _.L(s.coords.longitude,s.coords.latitude),p=s.coords.accuracy,g=this._map.getBearing(),x=_.e({bearing:g},this.options.fitBoundsOptions),T=Nn.fromLngLat(d,p);this._map.fitBounds(T,x,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const d=new _.L(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(1===s.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===s.code&&Bo)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new _.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=s=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=be.create("button","maplibregl-ctrl-geolocate",this._container),be.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===s){_.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=be.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new sa({element:this._dotElement}),this._circleElement=be.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||"ACTIVE_LOCK"!==this._watchState||d.originalEvent&&"resize"===d.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new _.k("trackuserlocationend")))})}},this.options=_.e({},un,v)}onAdd(v){return this._map=v,this._container=be.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(s,d=!1){void 0===Gn||d?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(p=>{Gn="denied"!==p.state,s(Gn)}).catch(()=>{Gn=!!window.navigator.geolocation,s(Gn)}):(Gn=!!window.navigator.geolocation,s(Gn)):s(Gn)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),be.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,An=0,Bo=!1}_isOutOfMapMaxBounds(v){const s=this._map.getMaxBounds(),d=v.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),s=v.getSouthEast(),d=v.getNorthEast(),p=s.distanceTo(d),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return _.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new _.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":An--,Bo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new _.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new _.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),An++,An>1?(v={maximumAge:6e5,timeout:0},Bo=!0):(v=this.options.positionOptions,Bo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Nt.AttributionControl=Si,Nt.LogoControl=fn,Nt.ScaleControl=class{constructor(v){this._onMove=()=>{gi(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,gi(this._map,this._container,this.options)},this.options=_.e({},Is,v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=be.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){be.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Nt.FullscreenControl=class extends _.E{constructor(v={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:_.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=be.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){be.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=be.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);be.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new _.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new _.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Nt.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=v}onAdd(v){return this._map=v,this._container=be.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=be.create("button","maplibregl-ctrl-terrain",this._container),be.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){be.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Nt.Popup=class extends _.E{constructor(v){super(),this.remove=()=>(this._content&&be.remove(this._content),this._container&&(be.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new _.k("close")),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=be.create("div","maplibregl-popup",this._map.getContainer()),this._tip=be.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=$t(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!s)return;const d=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);let p=this.options.anchor;const g=aa(this.options.offset);if(!p){const T=this._container.offsetWidth,k=this._container.offsetHeight;let M;M=d.y+g.bottom.y<k?["top"]:d.y>this._map.transform.height-k?["bottom"]:[],d.x<T/2?M.push("left"):d.x>this._map.transform.width-T/2&&M.push("right"),p=0===M.length?"bottom":M.join("-")}const x=d.add(g[p]).round();be.setTransform(this._container,`${zo[p]} translate(${x.x}px,${x.y}px)`),fd(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=_.e(Object.create(ar),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new _.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=_.L.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const s=document.createDocumentFragment(),d=document.createElement("body");let p;for(d.innerHTML=v;p=d.firstChild,p;)s.appendChild(p);return this.setDOMContent(s)}getMaxWidth(){var v;return null===(v=this._container)||void 0===v?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=be.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}_createCloseButton(){this.options.closeButton&&(this._closeButton=be.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Qi);v&&v.focus()}},Nt.Marker=sa,Nt.Style=Zi,Nt.LngLat=_.L,Nt.LngLatBounds=Nn,Nt.Point=_.P,Nt.MercatorCoordinate=_.U,Nt.Evented=_.E,Nt.AJAXError=_.bh,Nt.config=_.c,Nt.CanvasSource=ts,Nt.GeoJSONSource=Mn,Nt.ImageSource=lo,Nt.RasterDEMTileSource=Ta,Nt.RasterTileSource=Ca,Nt.VectorTileSource=Zt,Nt.VideoSource=It,Nt.setRTLTextPlugin=_.bi,Nt.getRTLTextPluginStatus=_.bj,Nt.prewarm=function(){tc().acquire(nn)},Nt.clearPrewarmedResources=function(){const v=Ao;v&&(v.isPreloaded()&&1===v.numActive()?(v.release(nn),Ao=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},As.extend(Nt,{isSafari:_.ac,getPerformanceMetrics:_.bf.getPerformanceMetrics}),Nt}),tn}()}},lm=>{lm(lm.s=135)}]);